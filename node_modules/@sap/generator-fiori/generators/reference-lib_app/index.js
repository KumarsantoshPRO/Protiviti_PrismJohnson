(()=>{var e,r,t={51617:e=>{function r(e){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=51617,e.exports=r},39973:e=>{function r(e){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=39973,e.exports=r},20545:e=>{function r(e){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=20545,e.exports=r},4297:e=>{function r(e){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=4297,e.exports=r},75601:e=>{function r(e){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=75601,e.exports=r},82626:e=>{function r(e){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=82626,e.exports=r},37974:e=>{function r(e){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=37974,e.exports=r},85858:(e,r,t)=>{var s={"./cat":43112,"./cat.js":43112,"./cd":86698,"./cd.js":86698,"./chmod":23986,"./chmod.js":23986,"./common":96816,"./common.js":96816,"./cp":80610,"./cp.js":80610,"./dirs":91972,"./dirs.js":91972,"./echo":16166,"./echo.js":16166,"./error":80609,"./error.js":80609,"./exec":52024,"./exec-child":69911,"./exec-child.js":69911,"./exec.js":52024,"./find":22261,"./find.js":22261,"./grep":56818,"./grep.js":56818,"./head":66412,"./head.js":66412,"./ln":91247,"./ln.js":91247,"./ls":5815,"./ls.js":5815,"./mkdir":70098,"./mkdir.js":70098,"./mv":74164,"./mv.js":74164,"./popd":99851,"./popd.js":99851,"./pushd":6978,"./pushd.js":6978,"./pwd":24044,"./pwd.js":24044,"./rm":44256,"./rm.js":44256,"./sed":43422,"./sed.js":43422,"./set":17444,"./set.js":17444,"./sort":53033,"./sort.js":53033,"./tail":50318,"./tail.js":50318,"./tempdir":16275,"./tempdir.js":16275,"./test":50021,"./test.js":50021,"./to":44915,"./to.js":44915,"./toEnd":13326,"./toEnd.js":13326,"./touch":57650,"./touch.js":57650,"./uniq":63019,"./uniq.js":63019,"./which":5483,"./which.js":5483};function o(e){var r=i(e);return t(r)}function i(e){if(!t.o(s,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=i,e.exports=o,o.id=85858},34624:function(e,r,t){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const o=s(t(98819)),i=t(72772),n=t(56813),a=t(25184),c=t(66828),u=t(28033),d=s(t(42403)),l=t(47937),p=t(1628),f=t(98359);class ReferenceLibGen extends o.default{constructor(e,r){super(e,r,{unique:"namespace"}),this.appWizard=r.appWizard||a.AppWizard.create(r),d.default.configureLogging(this.options.logger,this.rootGeneratorName(),this.log,this.options.vscode)}async default(){await(0,l.initTelemetrySettings)({modulePackageJson:{name:"@sap/generator-fiori-reference-lib",version:this.rootGeneratorVersion()}})}async prompting(){this.answers={};const e=await(0,n.getProjects)(c.workspace.workspaceFolders),r=await(0,u.getReuseLibs)(c.workspace.workspaceFolders),t=await this.prompt(await(0,n.getQuestions)(this.appWizard,e,r));Object.assign(this.answers,t)}async writing(){(0,i.updateYaml)(this.answers),await(0,i.updateManifest)(this.answers.targetProjectFolder.path,this.answers.referenceLibraries)}end(){try{const e=p.TelemetryHelper.createTelemetryData();(0,p.sendTelemetry)(l.EventName.LIB_REFERENCE_ADDED,e,this.answers.targetProjectFolder.path)}catch(e){d.default.logger.error((0,f.t)("LOG_ERROR_END_PHASE"))}}}r.default=ReferenceLibGen},14115:function(e,r,t){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.checkDependencies=r.getProjects=void 0;const o=t(28033),i=t(75764),n=s(t(71017)),a=t(95598),c=t(40913),u=s(t(42403));r.getProjects=async e=>{const r=(await(0,o.findAllProjectRoots)(e,!1)).sort();return(await(0,a.asyncFilter)(r,(async e=>{let r;const t=await(0,o.getUi5CustomWebappPath)(e),s=n.default.join(e,t,"manifest.json");try{r=n.default.join(e,i.FileName.Package);const t=await(0,o.readJSON)(r);return(0,o.hasDependency)(t,"@sap/ux-ui5-tooling")&&await(0,o.fileExists)(s)}catch(e){u.default.logger.error(`${(0,c.t)("ERROR_READING_PROJECT_PACKAGE_JSON",{filepath:r})} Error: ${e}`)}}))).map((e=>({name:n.default.basename(e),value:{folderName:n.default.basename(e),path:e}})))},r.checkDependencies=function(e,r){const t=[];return e.forEach((e=>{const s=e.dependencies;s.length&&s.forEach((e=>{r.some((r=>e===r.name))||t.push(e)}))})),t.join()}},56813:function(e,r,t){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,r,t,s){void 0===s&&(s=t);var o=Object.getOwnPropertyDescriptor(r,t);o&&!("get"in o?!r.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,s,o)}:function(e,r,t,s){void 0===s&&(s=t),e[s]=r[t]}),o=this&&this.__exportStar||function(e,r){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(r,t)||s(r,e,t)};Object.defineProperty(r,"__esModule",{value:!0}),o(t(83488),r),o(t(14115),r)},83488:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getQuestions=void 0;const s=t(98359),o=t(95598),i=t(14115),n=t(25184);r.getQuestions=function(e,r,t){const a=!0;return[{type:"list",name:"targetProjectFolder",message:(0,s.t)("PROMPT_REFLIB_TARGET_FOLDER"),guiOptions:{breadcrumb:a},choices:()=>r,default:()=>{if(r.length)return 0},validate:()=>{if(!r.length)return(0,s.t)("ERROR_NO_PROJECTS_FOUND")}},{type:"list",name:"source",message:(0,s.t)("PROMPT_REFLIB_SOURCE"),guiOptions:{breadcrumb:a},choices:[{name:(0,s.t)("LABEL_WORKSPACE"),value:o.SourceType.Workspace}],default:0},{type:"checkbox",name:"referenceLibraries",message:(0,s.t)("PROMPT_REFLIB_SELECT"),guiOptions:{breadcrumb:a},choices:()=>t,validate:r=>{if(!t.length)return(0,s.t)("ERROR_NO_LIBS_FOUND");if(r.length<1)return(0,s.t)("ERROR_NO_LIB_SELECTED");if(r.length){const o=(0,i.checkDependencies)(r,t.map((e=>e.value)));o&&e.showInformation((0,s.t)("STATUS_MISSING_DEPS",{dependencies:o}),n.MessageType.notification)}return!0}}]}},95598:(e,r)=>{"use strict";var t;Object.defineProperty(r,"__esModule",{value:!0}),r.asyncFilter=r.fioriToolsProxy=r.serveStatic=r.sapUXYamls=r.SourceType=void 0,function(e){e.Workspace="Workspace"}(t||(r.SourceType=t={})),r.sapUXYamls=["ui5.yaml","ui5-local.yaml","ui5-mock.yaml"],r.serveStatic="fiori-tools-servestatic",r.fioriToolsProxy="fiori-tools-proxy";r.asyncFilter=async(e,r)=>{const t=await Promise.all(e.map(r));return e.filter(((e,r)=>t[r]))}},72772:function(e,r,t){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.updateYaml=r.updateManifest=void 0;const o=t(28033),i=s(t(57147)),n=t(71017),a=s(t(52375)),c=t(95598);r.updateManifest=async function(e,r){const t=await(0,o.getUi5CustomWebappPath)(e),s=(0,n.join)(e,t,"manifest.json"),a=await(0,o.readJSON)(s);return r.forEach((e=>{a["sap.ui5"].dependencies&&!a["sap.ui5"].dependencies[o.ManifestReuseType[e.type]]&&(a["sap.ui5"].dependencies[o.ManifestReuseType[e.type]]={}),Object.assign(a["sap.ui5"].dependencies[o.ManifestReuseType[e.type]],{[e.name]:{lazy:!1}})})),new Promise(((e,r)=>{i.default.writeFile(s,JSON.stringify(a,null,4),{encoding:"utf8"},(t=>{t?r(t):e()}))}))},r.updateYaml=function(e){c.sapUXYamls.forEach((r=>{const t=(0,n.join)(e.targetProjectFolder.path,r);if(i.default.existsSync(t)){const r=a.default.parse(i.default.readFileSync(t).toString());let s,o;if(r.server?.customMiddleware&&Array.isArray(r.server?.customMiddleware)){s=r.server?.customMiddleware.findIndex((e=>e.name===c.serveStatic)),o=-1!==r.server?.customMiddleware.findIndex((e=>e.name===c.fioriToolsProxy));let t=[];e.referenceLibraries.forEach((r=>{const s=[{path:`/resources/${r.name.replace(/\./g,"/")}`,src:(0,n.relative)(e.targetProjectFolder.path,(0,n.dirname)(r.path)),fallthrough:!1}];r.uri&&s.push({path:`${r.uri.replace(/\/bsp\//g,"/ui5_ui5/")}`,src:(0,n.relative)(e.targetProjectFolder.path,(0,n.dirname)(r.path)),fallthrough:!1}),t=t.concat(s)})),-1!==s?(!function(e,r,t){"compression"===e.afterMiddleware&&t&&(delete e.afterMiddleware,e.beforeMiddleware=c.fioriToolsProxy,e.configuration.paths=e.configuration.paths.concat(r))}(r.server.customMiddleware[s],t,o),r.server.customMiddleware[s].configuration.paths=r.server.customMiddleware[s].configuration.paths.concat(t)):r.server.customMiddleware.push(function(e,r){return e?{name:c.serveStatic,beforeMiddleware:c.fioriToolsProxy,configuration:{paths:r}}:{name:c.serveStatic,afterMiddleware:"compression",configuration:{paths:r}}}(o,t))}const u=a.default.stringify(r);i.default.writeFileSync(t,u,"utf-8")}}))}},40913:function(e,r,t){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.t=r.addTranslations=r.initI18n=void 0;const o=s(t(73577)),i=s(t(66568)),n="common";async function a(){await o.default.init({resources:{en:{[n]:i.default}},lng:"en",fallbackLng:"en",defaultNS:n,ns:[n]})}r.initI18n=a,r.addTranslations=function(e,r){o.default.addResources("en",r,e)},r.t=function(e,r){return r={...r,interpolation:{...r?.interpolation,escapeValue:!1}},o.default.t(e,r)},a()},98359:function(e,r,t){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,r,t,s){void 0===s&&(s=t);var o=Object.getOwnPropertyDescriptor(r,t);o&&!("get"in o?!r.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,s,o)}:function(e,r,t,s){void 0===s&&(s=t),e[s]=r[t]}),o=this&&this.__exportStar||function(e,r){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(r,t)||s(r,e,t)};Object.defineProperty(r,"__esModule",{value:!0}),o(t(40913),r)},42403:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});const s=t(1628),o=t(40913);class ReferenceLibGenLogger{static configureLogging(e,r,t,i){const n=new s.LogWrapper(r,void 0,t,e,i);n.debug((0,o.t)("DEBUG_LOG_INITIALISED")),ReferenceLibGenLogger.logger=n}}ReferenceLibGenLogger.logger=s.DefaultLogger,r.default=ReferenceLibGenLogger},34409:e=>{function r(e){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=34409,e.exports=r},70910:(e,r,t)=>{var s={"./Find-VisualStudio.cs":20183,"./build":17724,"./build.js":17724,"./clean":1658,"./clean.js":1658,"./configure":4748,"./configure.js":4748,"./create-config-gypi":98395,"./create-config-gypi.js":98395,"./find-node-directory":24159,"./find-node-directory.js":24159,"./find-python":29130,"./find-python.js":29130,"./find-visualstudio":17703,"./find-visualstudio.js":17703,"./install":25925,"./install.js":25925,"./list":44179,"./list.js":44179,"./node-gyp":55614,"./node-gyp.js":55614,"./process-release":75344,"./process-release.js":75344,"./rebuild":64187,"./rebuild.js":64187,"./remove":13103,"./remove.js":13103,"./util":55690,"./util.js":55690};function o(e){var r=i(e);return t(r)}function i(e){if(!t.o(s,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=i,e.exports=o,o.id=70910},84679:e=>{function r(e){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=84679,e.exports=r},72869:e=>{function r(e){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=72869,e.exports=r},12937:e=>{function r(e){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=12937,e.exports=r},84397:e=>{function r(e){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=84397,e.exports=r},45869:e=>{function r(e){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=45869,e.exports=r},54529:e=>{"use strict";e.exports=require("@opentelemetry/tracing")},85767:e=>{"use strict";e.exports=require("@sap/cds")},32220:e=>{"use strict";e.exports=require("applicationinsights-native-metrics")},43241:e=>{"use strict";e.exports=require("esprima")},74602:e=>{"use strict";e.exports=require("keytar")},66828:e=>{"use strict";e.exports=require("vscode")},39491:e=>{"use strict";e.exports=require("assert")},50852:e=>{"use strict";e.exports=require("async_hooks")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},96206:e=>{"use strict";e.exports=require("console")},22057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},73292:e=>{"use strict";e.exports=require("fs/promises")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},98188:e=>{"use strict";e.exports=require("module")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},85477:e=>{"use strict";e.exports=require("punycode")},63477:e=>{"use strict";e.exports=require("querystring")},14521:e=>{"use strict";e.exports=require("readline")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},39512:e=>{"use strict";e.exports=require("timers")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},26144:e=>{"use strict";e.exports=require("vm")},59796:e=>{"use strict";e.exports=require("zlib")},66568:e=>{"use strict";e.exports=JSON.parse('{"PROMPT_REFLIB_TARGET_FOLDER":"Project folder path","PROMPT_REFLIB_SOURCE":"Reusable Library Source","PROMPT_REFLIB_SELECT":"Select Reusable Libraries","TITLE_REFERENCE_GENERATOR_STEP":"SAP Fiori Reusable Library","ERROR_NO_PROJECTS_FOUND":"No Fiori tools projects found in the workspace","ERROR_NO_LIBS_FOUND":"No reuse libraries or components found in the workspace","ERROR_NO_LIB_SELECTED":"You must select at least one reuse library or component","LABEL_WORKSPACE":"Workspace","STATUS_NO_MISSING_DEPS":"No missing dependencies for selected libraries","STATUS_MISSING_DEPS":"Missing dependencies detected: {{dependencies}}","DEBUG_LOG_INITIALISED":"Logging initialized","ERROR_READING_PROJECT_PACKAGE_JSON":"An error occurred reading/parsing file: {{- filepath }}. Project will be ignored.","LOG_ERROR_END_PHASE":"Error in end phase in the reference library generator: {{error}}"}')},69645:e=>{"use strict";e.exports={}}},s={};function o(e){var r=s[e];if(void 0!==r)return r.exports;var i=s[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=t,o.c=s,o.x=()=>{var e=o.O(void 0,[712,784,475,763],(()=>o(o.s=34624)));return e=o.O(e)},e=[],o.O=(r,t,s,i)=>{if(!t){var n=1/0;for(d=0;d<e.length;d++){for(var[t,s,i]=e[d],a=!0,c=0;c<t.length;c++)(!1&i||n>=i)&&Object.keys(o.O).every((e=>o.O[e](t[c])))?t.splice(c--,1):(a=!1,i<n&&(n=i));if(a){e.splice(d--,1);var u=s();void 0!==u&&(r=u)}}return r}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[t,s,i]},o.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return o.d(r,{a:r}),r},o.d=(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((r,t)=>(o.f[t](e,r),r)),[])),o.u=e=>({475:"tools-suite-common-libs",712:"commonlibs",763:"app-gen-shared",784:"open-ux-shared"}[e]+"/index.js"),o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.j=944,o.p="",(()=>{var e={944:1,190:1};o.O.require=r=>e[r];o.f.require=(r,t)=>{e[r]||(r=>{var t=r.modules,s=r.ids,i=r.runtime;for(var n in t)o.o(t,n)&&(o.m[n]=t[n]);i&&i(o);for(var a=0;a<s.length;a++)e[s[a]]=1;o.O()})(require("../"+o.u(r)))}})(),r=o.x,o.x=()=>(o.e(712),o.e(784),o.e(475),o.e(763),r());var i=o.x();module.exports=i})();