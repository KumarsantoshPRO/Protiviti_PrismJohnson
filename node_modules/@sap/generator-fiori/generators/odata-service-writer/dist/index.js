"use strict";exports.id=916,exports.ids=[916],exports.modules={59572:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getAnnotationNamespaces=void 0;const i=t(88295),a=t(46996);function o(e){const n={attributeNamePrefix:"",ignoreAttributes:!1,ignoreNameSpace:!0,parseAttributeValue:!0};try{return new i.XMLParser(n).parse(e,!0)}catch(e){throw new Error((0,a.t)("error.unparseableXML",{error:e}))}}n.getAnnotationNamespaces=function({metadata:e,annotations:n}){const t=e?function(e){var n,t;const i=o(e);let a=null===(t=null===(n=i["edmx:Edmx"])||void 0===n?void 0:n["edmx:DataServices"])||void 0===t?void 0:t.Schema;if(!a)return[];Array.isArray(a)||(a=[a]);return a.map((e=>({namespace:e.Namespace,alias:e.Alias||""})))}(e):[];if(null==n?void 0:n.xml){const e=o(n.xml);return t.map((t=>{const i=n.xml&&t.namespace?function(e,n){var t,i;let a=null===(t=e["edmx:Edmx"])||void 0===t?void 0:t["edmx:Reference"];Array.isArray(a)||(a=[a]);const o=a.find((e=>{var t,i;return(null===(t=e["edmx:Include"])||void 0===t?void 0:t.Namespace)===n&&(null===(i=e["edmx:Include"])||void 0===i?void 0:i.Alias)}));return o?null===(i=o["edmx:Include"])||void 0===i?void 0:i.Alias:""}(e,t.namespace):"";return i&&(t.alias=i),t}))}return t}},72848:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_DATASOURCE_NAME=void 0,n.DEFAULT_DATASOURCE_NAME="mainService"},77660:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.enhanceData=void 0;const i=t(72848);n.enhanceData=function(e){var n,t;!function(e){var n,t;e.path=(null===(n=e.path)||void 0===n?void 0:n.endsWith("/"))?e.path:(null!==(t=e.path)&&void 0!==t?t:"")+"/"}(e),function(e){var n;e.name=null!==(n=e.name)&&void 0!==n?n:i.DEFAULT_DATASOURCE_NAME}(e),function(e){var n;e.model=null!==(n=e.model)&&void 0!==n?n:""}(e),function(e){var n,t,i,a;(null===(n=e.annotations)||void 0===n?void 0:n.technicalName)&&!e.annotations.name&&(e.annotations.name=null===(a=null===(i=null===(t=e.annotations)||void 0===t?void 0:t.technicalName)||void 0===i?void 0:i.replace(/\//g,"_"))||void 0===a?void 0:a.replace(/^_/,""))}(e),e.previewSettings=e.previewSettings||{},e.previewSettings.path=e.previewSettings.path||`/${null!==(t=null===(n=e.path)||void 0===n?void 0:n.split("/").filter((e=>""!==e))[0])&&void 0!==t?t:""}`,e.previewSettings.url=e.previewSettings.url||e.url||"http://localhost",e.client&&!e.previewSettings.client&&(e.previewSettings.client=e.client),e.destination&&!e.previewSettings.destination&&(e.previewSettings.destination=e.destination.name,e.destination.instance&&(e.previewSettings.destinationInstance=e.destination.instance))}},28276:function(e,n,t){var i=this&&this.__createBinding||(Object.create?function(e,n,t,i){void 0===i&&(i=t);var a=Object.getOwnPropertyDescriptor(n,t);a&&!("get"in a?!n.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,i,a)}:function(e,n,t,i){void 0===i&&(i=t),e[i]=n[t]}),a=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||i(n,e,t)};Object.defineProperty(n,"__esModule",{value:!0}),a(t(77660),n),a(t(59572),n)},46996:function(e,n,t){var i=this&&this.__awaiter||function(e,n,t,i){return new(t||(t=Promise))((function(a,o){function r(e){try{s(i.next(e))}catch(e){o(e)}}function d(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,d)}s((i=i.apply(e,n||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.t=n.initI18n=void 0;const o=a(t(18237)),r=a(t(67402)),d="odata-service-writer";function s(){return i(this,void 0,void 0,(function*(){yield o.default.init({resources:{en:{[d]:r.default}},lng:"en",fallbackLng:"en",defaultNS:d,ns:[d]})}))}n.initI18n=s,n.t=function(e,n){return o.default.t(e,n)},s().catch((()=>{}))},28923:function(e,n,t){var i=this&&this.__awaiter||function(e,n,t,i){return new(t||(t=Promise))((function(a,o){function r(e){try{s(i.next(e))}catch(e){o(e)}}function d(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,d)}s((i=i.apply(e,n||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.ServiceType=n.OdataVersion=n.generate=n.findProjectFiles=void 0;const o=t(71017),r=t(5407),d=t(84659),s=t(51450),c=t(50911),u=a(t(10980)),l=t(28276),p=t(46996),v=t(71508);function f(e,n){return i(this,void 0,void 0,(function*(){const t={},i=e.split(o.sep);for(;i.length>0&&(!t.packageJson||!t.ui5Yaml);){const e=i.join(o.sep);!t.packageJson&&n.exists((0,o.join)(e,"package.json"))&&(t.packageJson=(0,o.join)(e,"package.json")),!t.ui5Yaml&&n.exists((0,o.join)(e,"ui5.yaml"))&&(t.ui5Yaml=(0,o.join)(e,"ui5.yaml")),i.pop()}return t}))}Object.defineProperty(n,"OdataVersion",{enumerable:!0,get:function(){return v.OdataVersion}}),Object.defineProperty(n,"ServiceType",{enumerable:!0,get:function(){return v.ServiceType}}),n.findProjectFiles=f,n.generate=function(e,n,t){var a;return i(this,void 0,void 0,(function*(){t||(t=(0,d.create)((0,r.create)()));const i=yield f(e,t);!function(e,n,t){n.forEach((n=>{if(!t.exists((0,o.join)(e,n)))throw new Error((0,p.t)("error.requiredProjectFileNotFound",{path:n}))}))}(e,["webapp/manifest.json"],t),(0,l.enhanceData)(n);const v=(0,o.join)(__dirname,"../templates");let m,h,w;if((0,s.updateManifest)(e,n,t,v),i.ui5Yaml){m=yield c.UI5Config.newInstance(t.read(i.ui5Yaml));try{m.addBackendToFioriToolsProxydMiddleware(n.previewSettings)}catch(e){if(!(e instanceof c.YAMLError&&e.code===c.yamlErrorCode.nodeNotFound))throw e;m.addFioriToolsProxydMiddleware({backend:[n.previewSettings]})}t.write(i.ui5Yaml,m.toString()),w=(0,o.join)((0,o.dirname)(i.ui5Yaml),"ui5-local.yaml"),t.exists(w)&&(h=yield c.UI5Config.newInstance(t.read(w)),h.addFioriToolsProxydMiddleware({backend:[n.previewSettings]}))}if(n.metadata){if(i.ui5Yaml&&m){const e=yield c.UI5Config.newInstance(m.toString());e.addMockServerMiddleware(n.path),t.write((0,o.join)((0,o.dirname)(i.ui5Yaml),"ui5-mock.yaml"),e.toString()),h&&h.addMockServerMiddleware(n.path)}if(t.write((0,o.join)(e,"webapp","localService","metadata.xml"),(0,u.default)(n.metadata,{indent:4})),n.localAnnotationsName){const i=(0,l.getAnnotationNamespaces)(n);t.copyTpl((0,o.join)(v,"add","annotation.xml"),(0,o.join)(e,"webapp","annotations",`${n.localAnnotationsName}.xml`),Object.assign(Object.assign({},n),{namespaces:i}))}}return i.packageJson&&i.ui5Yaml&&(0,s.updatePackageJson)(i.packageJson,t,!!n.metadata),w&&h&&t.write(w,h.toString()),(null===(a=n.annotations)||void 0===a?void 0:a.xml)&&t.write((0,o.join)(e,"webapp","localService",`${n.annotations.technicalName}.xml`),(0,u.default)(n.annotations.xml,{indent:4})),t}))}},71508:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ServiceType=n.OdataVersion=void 0,function(e){e.v2="2",e.v4="4"}(n.OdataVersion||(n.OdataVersion={})),function(e){e.EDMX="edmx",e.CDS="cds"}(n.ServiceType||(n.ServiceType={}))},51450:function(e,n,t){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.hasUI5CliV3=n.updatePackageJson=n.updateManifest=void 0;const a=t(69288),o=t(71017),r=t(46996),d=i(t(76027));function s(e){let n=!1;const t=d.default.coerce(e["@ui5/cli"]);return t&&d.default.gte(t,"3.0.0")&&(n=!0),n}n.updateManifest=function(e,n,t,i){var d;const s=(0,o.join)(e,"webapp","manifest.json"),c=t.readJSON(s),u="sap.app";if(!(null===(d=null==c?void 0:c[u])||void 0===d?void 0:d.id))throw new Error((0,r.t)("error.requiredProjectPropertyNotFound",{property:"'sap.app'.id",path:s}));const l=t.read((0,o.join)(i,"extend","manifest.json"));t.extendJSON(s,JSON.parse((0,a.render)(l,n,{})))},n.updatePackageJson=function(e,n,t){var i,a,o;const r=JSON.parse(n.read(e));r.devDependencies=null!==(i=r.devDependencies)&&void 0!==i?i:{},s(r.devDependencies)||(r.ui5=null!==(a=r.ui5)&&void 0!==a?a:{},r.ui5.dependencies=null!==(o=r.ui5.dependencies)&&void 0!==o?o:[],r.ui5.dependencies.includes("@sap/ux-ui5-tooling")||r.ui5.dependencies.push("@sap/ux-ui5-tooling"),!t||r.ui5.dependencies.includes("@sap/ux-ui5-fe-mockserver-middleware")||r.ui5.dependencies.includes("@sap-ux/ui5-middleware-fe-mockserver")||r.ui5.dependencies.push("@sap-ux/ui5-middleware-fe-mockserver")),r.devDependencies["@sap/ux-ui5-tooling"]||(r.devDependencies["@sap/ux-ui5-tooling"]="1"),t&&(r.devDependencies["@sap/ux-ui5-fe-mockserver-middleware"]||r.devDependencies["@sap-ux/ui5-middleware-fe-mockserver"]||(r.devDependencies["@sap-ux/ui5-middleware-fe-mockserver"]="2")),n.writeJSON(e,r)},n.hasUI5CliV3=s},67402:e=>{e.exports=JSON.parse('{"error":{"requiredProjectFileNotFound":"Invalid project structure. Cannot find required file {{-path}}","requiredProjectPropertyNotFound":"Required project property: {{-property}} was not found in file: {{-path}}","unparseableXML":"Unparseable XML was specified: {{-error}}"}}')}};