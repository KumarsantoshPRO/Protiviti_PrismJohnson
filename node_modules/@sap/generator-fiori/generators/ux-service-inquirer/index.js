"use strict";exports.id=689,exports.ids=[689],exports.modules={24003:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,i)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(73215),t)},93540:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,i)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(23580),t),i(r(20023),t),i(r(98133),t),i(r(67288),t),i(r(29142),t),i(r(35907),t),i(r(21509),t)},23580:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSourcesQuestions=t.getDataSelectionChoices=void 0;const a=r(1628),i=r(37705),s=r(25184),n=a.FioriGeneratorPromptNames.serviceInquirer;function o(e,t){const r=[{name:(0,a.t)("LABEL_SAP"),value:"SAP System"},{name:(0,a.t)("LABEL_ODATA"),value:"OData Url"},{name:(0,a.t)("SELECT_APIHUB"),value:"SAP Business Accelerator Hub"}];return(0,a.getPlatform)()===a.PLATFORMS.SBAS&&(0,i.isInternalFeaturesSettingEnabled)()&&r.push({name:(0,a.t)("LABEL_MTA"),value:"MTA File"}),e!==a.ODataVersion.v2&&r.push({name:(0,a.t)("LABEL_CAP"),value:"Local Cap"}),r.push({name:(0,a.t)("LABEL_METADATA"),value:"File"}),t&&r.unshift({name:(0,a.t)("LABEL_NONE"),value:"None"}),r}t.getDataSelectionChoices=o,t.getSourcesQuestions=function(e,t,r,i){return{type:"list",name:n.sourceQuestion.source,guiOptions:{breadcrumb:!0},default:()=>i?.[n.systemConfigQuestions.system]?.value?"SAP System":r?"Local Cap":void 0,message:(0,a.t)("LABEL_DATA_SERVICE_MESSAGE"),choices:o(e.version,t),additionalMessages:e=>{if("SAP Business Accelerator Hub"===e)return{message:(0,a.t)("WARN_MSG_NON_UI_SOURCE_OR_SERVICE_SELECTED",{serviceTypeDesc:(0,a.t)("TEXT_API_BUSINESS_HUB_NAME")}),severity:s.Severity.warning}}}}},35907:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getApiHubQuestions=void 0;const a=r(1628),i=r(48721);t.getApiHubQuestions=function(e,t){let r;return[{type:"list",name:"apihubService",message:(0,a.t)("SELECT_SERVICE_MSG"),guiOptions:{breadcrumb:(0,a.t)("LABEL_SERVICE")},choices:async()=>(r||(r=await(0,i.getAPIHubServiceChoices)()),r)},{when:e=>!!e?.apihubService,type:"input",guiOptions:{mandatory:!0},name:"apihubUser",message:(0,a.t)("PROMPT_APIHUB_USERNAME"),validate:e=>!!e?.trim()},{when:e=>!!e?.apihubService,type:"password",name:"apihubPassword",guiType:"login",message:(0,a.t)("PROMPT_APIHUB_PASSWORD"),validate:async(r,{apihubService:s,apihubUser:n})=>{if(r){const o=await(0,i.getAPIHubServiceDetails)(s,n,r);return"string"==typeof o?o:(e.edmx=o.edmx,e.servicePath=o.servicePath,e.host=o.host,e.version=o.version,e.apiHubConfig={apiHubKey:o.apiHubConfig?.apiHubKey,apiHubType:"API_HUB"},!t||e.version===t||(0,a.t)("ERROR_ODATA_SERVICE_VERSION_MISMATCH",{requiredVersion:t,serviceVersion:e.version}))}return!1}}]}},48721:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAPIHubServiceChoices=t.getAPIHubServiceDetails=void 0;const i=r(71671),s=r(84826),n=r(77090),o=r(57310),c=a(r(75503));t.getAPIHubServiceDetails=async function(e,t,r){try{const a={};a.apiHubApiKey=await(0,i.getApihubKey)(t,r),a.servicePath=e.ServiceUrl;const c={};c.edmx=await(0,i.getMetadata)(a,e);const l=s.MetadataFactory.getMetadataFactory().getMetadataExplorer(c.edmx);c.version=l.v2Logger?n.ODataVersion.v2:n.ODataVersion.v4;const u=new o.URL(e.ServiceUrl);return c.host=u.origin,c.servicePath=u.pathname,c.apiHubConfig={apiHubKey:a.apiHubApiKey,apiHubType:"API_HUB"},c}catch(e){return c.default.logErrorMsgs(e,e.message)}},t.getAPIHubServiceChoices=async function(){try{return(await(0,i.getListODataServices)()).map((e=>({name:e.Title,value:e}))).sort(((e,t)=>e.name.localeCompare(t.name,void 0,{sensitivity:"base"})))}catch(e){c.default.logErrorMsgs(e)}return[]}},20023:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCapQuestions=void 0;const i=r(1628),s=r(71361),n=r(85379),o=r(24003),c=a(r(75503)),l=r(16284),u=r(35875);t.getCapQuestions=function(e,t,r){const a=new s.CapHelper;let d,S,E,_,m=!1;const y=async t=>{t?.serviceName&&(e.edmx=await a.getEdmx(t.urlPath,t.projectPath,t?.serviceName),e.servicePath=t.urlPath,e.version=i.ODataVersion.v4,void 0===e.edmx&&o.ServiceInquirer.logger.info((0,i.t)("ERROR_ODATA_SERVICE_METADATA_INVALID")))},p=[{when:async()=>(S=await a.getCapWorkspaceFolders(r),S.length>0&&(E=await a.getCapWorkspaceChoices(S),!0)),type:"list",name:"capWorkspaceProject",message:(0,i.t)("LABEL_CAP_CHOOSE_PROJECT"),default:()=>(0,u.defaultCapChoice)(t,E?.length),choices:()=>E,guiOptions:{applyDefaultWhenDirty:!0,mandatory:!0,breadcrumb:(0,i.t)("LABEL_CAP_PROJECT_BREADCRUMB")},validate:e=>!!e?.path&&(m=!0,!0)},{when:e=>0===S.length||e.capWorkspaceProject?.path===l.MANUAL_PATH,type:"input",guiType:"folder-browser",name:"projectPath",message:(0,i.t)("LABEL_CAP_PROJECT_MESSAGE"),default:()=>{if(t)return t.projectPath},guiOptions:{mandatory:!0,breadcrumb:(0,i.t)("LABEL_CAP_PROJECT_BREADCRUMB")},validate:async e=>(m=await(0,n.validateCapPath)(e),m)},{when:async e=>{if(e.capWorkspaceProject&&e.capWorkspaceProject.path!==l.MANUAL_PATH&&(e.projectPath=e.capWorkspaceProject.path,m=!0),!0===m){const t=e.projectPath?{path:e.projectPath}:e.capWorkspaceProject;return _=await a.getCapServiceChoices(t),!0}return!1},type:"list",name:"capService",message:(0,i.t)("LABEL_ODATA_MESSAGE"),choices:()=>(t&&(d=_?.findIndex((e=>e.value?.serviceName===t.serviceName))),_),guiOptions:{applyDefaultWhenDirty:!0,mandatory:!0,breadcrumb:!0},default:()=>_?.length>1?d:0,validate:async t=>{const r=c.default.getErrorMsg(void 0,!0);return r||!!t&&(await y(t),void 0!==e.edmx||(0,i.t)("ERROR_ODATA_SERVICE_METADATA_INVALID"))}}];return(0,i.getPlatform)()===i.PLATFORMS.CLI&&p.push({when:async e=>(await y(e.capService),!1),name:"edmx"}),p}},71361:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CapHelper=void 0;const i=r(1628),s=r(71017),n=r(73215),o=a(r(75503)),c=r(74448),l=r(16284),u=r(28033),d=r(76027),S=r(9949);t.CapHelper=class CapHelper{constructor(){this.capServiceSanitizeUrls={}}async checkIfCDSPreV7(e){try{const t=(0,s.join)(e,"package.json"),r=await(0,u.readJSON)(t)??{},a=await(0,S.isCapNodeJsProject)(r)&&!await(0,S.isCapJavaProject)(e),i="7.0.0";return(0,d.lt)((0,d.coerce)(r?.dependencies?.["@sap/cds"])??i,i)&&a}catch{return!1}}sanitizeUrlPath(e,t=!1){return e.startsWith("/")||(e=`/${e}`),t&&(e=e.replace(/\\/g,"/").replace(/\/\//g,"/").replace("odata/v4/","")),e.replace(/\\/g,"/").replace(/\/\//g,"/")}async getCapServiceChoices(e){if(n.ServiceInquirer.logger.trace(`getCapServiceChoices: ${JSON.stringify(e)}`),!e)return[];try{e.srv||(e=Object.assign(e,await this.getCapPaths(e.path)),n.ServiceInquirer.logger.trace(`getCapServiceChoices: ${JSON.stringify(e)}`));let t=[];try{const r=n.ServiceInquirer.logger,{model:a,services:i}=await(0,u.getCapModelAndServices)({projectRoot:e.path,logger:r});t=i,this.capModel=a}catch(e){return"MODEL_NOT_FOUND"===e.code?o.default.logErrorMsgs((0,i.t)("ERROR_USER_CDS_MODEL_NOT_FOUND")):o.default.logErrorMsgs((0,i.t)("ERROR_CDS_COMPILE",{error:e?.message})),n.ServiceInquirer.logger.error((0,i.t)("ERROR_CDS_COMPILE",{error:e?.message})),[]}const r=e.path,a=e?.app||c.CAP_APPS_FOLDER,l=await this.checkIfCDSPreV7(e.path);return t.map((e=>{const t=this.capModel.definitions[e.name];n.ServiceInquirer.logger.trace(`Cap service def: ${JSON.stringify(t)}`),n.ServiceInquirer.logger.trace(`Cap service def $location.file: ${JSON.stringify(t.$location.file)}`);let o=t.$location.file;(0,s.isAbsolute)(o)&&(o=(0,s.relative)(r,o)),o=(0,i.removeLastMatch)(o,".cds"),n.ServiceInquirer.logger.trace(`serviceCdsFilePath: ${o}`);const c=this.sanitizeUrlPath(e.urlPath,l);this.capServiceSanitizeUrls[e.name]={urlPath:e.urlPath,sanitizedUrlPath:c};const u={serviceName:e.name,urlPath:c,serviceCdsPath:o,projectPath:r,appPath:a,capType:e.runtime};return{name:u.capType?u.serviceName+" ("+u.capType+")":u.serviceName,value:u}}))}catch(e){o.default.logErrorMsgs(e)}return[]}async getEdmx(e,t,r){if(!this.capModel)return o.default.logErrorMsgs("CAP Model not loaded");try{const a=this.capServiceSanitizeUrls?.[r]?.urlPath??e;return await(0,S.readCapServiceMetadataEdmx)(t,a,"v4")}catch(e){o.default.logErrorMsgs(e)}}async getCapWorkspaceChoices(e){const t=[],r=e.reduce(((e,t)=>(e[t.folderName]=e[t.folderName]||[],e[t.folderName].push(t),e)),{}),a=Object.values(r);for await(const e of a)if(1===e.length){const r=await this.getCapPaths(e[0].path);r&&t.push(Object.assign(e[0],r))}else for(const r of e){r.folderName=`${r.folderName} (${r.path})`;const e=await this.getCapPaths(r.path);e&&t.push(Object.assign(r,e))}return[...t.map((e=>({name:e.folderName,value:e}))),{name:(0,i.t)("LABEL_CAP_MANUALLY_SELECT_PATH"),value:{path:l.MANUAL_PATH}}]}async getCapWorkspaceFolders(e){const t=await(0,S.findCapProjects)({wsFolders:e}),r=[];for(const e of t)r.some((t=>t.path===e))||r.push({folderName:(0,s.basename)(e),path:e});return r.sort(((e,t)=>e.folderName.localeCompare(t.folderName)))}async getCapPaths(e){const t=await(0,S.getCapCustomPaths)(e),r=t.srv?t.srv:c.CAP_SERVICES_FOLDER;return{...t,srv:r}}}},35875:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCapChoice=void 0,t.defaultCapChoice=function(e,t){return e?{path:e.projectPath}:2===t?0:void 0}},85379:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateCapPath=void 0;const a=r(1628),i=r(9949);t.validateCapPath=async function(e){if(e){"win32"===process.platform&&"/"===e.substring(0,1)&&(e=e.substring(1));try{return!!await(0,i.getCapProjectType)(e)||(0,a.t)("NOT_VALID_CAP_PROJECT")}catch(e){return(0,a.t)("NOT_VALID_CAP_PROJECT")}}return!1}},98133:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalMetadataQuestions=void 0;const a=r(1628),i=r(57147),s=r(98651);t.getLocalMetadataQuestions=function(e){const t=e.version;return[{type:"input",guiType:"file-browser",name:"localEdmxFilePath",guiOptions:{mandatory:!0,breadcrumb:!0},message:(0,a.t)("LABEL_METADATA_MESSAGE"),validate:r=>{if(!r)return!1;if((0,i.existsSync)(r)&&(0,i.statSync)(r).isFile()){e.edmx=(0,i.readFileSync)(r,"utf-8"),e.edmx=e.edmx.replace(/ & /g," &amp; ");const{validationMsg:n,version:o}=(0,s.validateODataVersion)(e.edmx,t);return n?(delete e.edmx,n):(e.servicePath=(0,a.t)("EXAMPLE_URL_PATH"),e.version=o,!0)}return(0,a.t)("ERROR_METADATA_FILE_DOES_NOT_EXIST")}}]}},39154:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMtaQuestions=void 0;const i=r(1628),s=r(19324),n=a(r(75503));t.getMtaQuestions=function(e){const t=new s.DestinationHelpers;let r=!1,a=!1,o=!1,c=!1;return[{type:"input",guiType:"file-browser",name:"mtaFilePath",message:(0,i.t)("LABEL_MTA_SELECT_FILE"),guiOptions:{mandatory:!0,breadcrumb:!0},validate:async e=>!!e&&(r=await t.validateMtaPath(e),a=!1,o=!1,c=!1,r)},{when:()=>!0===r,type:"list",name:"destinationInstance",message:(0,i.t)("LABEL_MTA_SELECT_DESTINATION"),guiOptions:{mandatory:!0,breadcrumb:(0,i.t)("LABEL_DESTINATION_BREADCRUMB")},choices:async e=>t.getDestinationsFromFile(e.mtaFilePath),validate:async e=>!!e&&(a=await t.validateDestination(e),o=!1,a)},{when:()=>!0===a,type:"list",name:"destination",message:(0,i.t)("LABEL_MTA_SELECT_SYSTEM"),guiOptions:{mandatory:!0,breadcrumb:(0,i.t)("LABEL_SYSTEM")},choices:async({destinationInstance:e})=>t.getSystems(e),validate:async(e,r)=>{if(e){let a=await t.validateSystem(r.destinationInstance,e);return"string"==typeof a&&a===(0,i.t)("ERROR_AUTHENTICATION")?(c=!0,o=!1,a=!0):(c=!1,o=a),a}return!1}},{when:()=>!0===c,type:"input",name:"mtaDestinationUser",message:(0,i.t)("LABEL_SERVICE_USERNAME"),guiOptions:{mandatory:!0},validate:e=>!!e?.trim()},{when:()=>!0===c,type:"password",guiType:"login",name:"mtaDestinationPassword",message:(0,i.t)("LABEL_SERVICE_PASSWORD"),mask:"*",default:"",guiOptions:{applyDefaultWhenDirty:!0,mandatory:!0},validate:async(e,{destinationInstance:r,destination:a,mtaDestinationUser:i})=>!!e&&(o=await t.validateSystem(r,a,{user:i,password:e}),o)},{when:()=>!0===o,type:"list",name:"serviceName",message:(0,i.t)("LABEL_MTA_SELECT_SERVICE"),guiOptions:{mandatory:!0,breadcrumb:(0,i.t)("LABEL_SERVICE")},choices:async({destination:r,destinationInstance:a})=>t.getServices(a,r,e?.version),validate:async(r,{destination:a,destinationInstance:s})=>{if(r){const o=await t.getMetadata(s,a,r.service,r.protocol);if("string"==typeof o)return o;if(Object.keys(o).length)try{return e.edmx=o.edmx,e.annotations=o.annotations,e.version=o.version,e.host=o.host,e.servicePath=o.servicePath,e.destination=a,e.destinationInstance=s,!0}catch(e){return n.default.logErrorMsgs((0,i.t)("ERROR_SERVICE_NOT_AVAILABLE"),e.message)}}return!1}}]}},19324:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DestinationHelpers=void 0;const i=r(71017),s=r(57147),n=r(77482),o=r(1628),c=r(60349),l=r(45546),u=r(84826),d=a(r(75503)),S=r(77090);class DestinationProvider{async getSystems(e){if(this.localDestinationInstance!==e||!this.systems){const t=new c.DestinationInstanceProviderRepository;await t.init(e),this.systems=await t.getSystems(),this.localDestinationInstance=e}return this.systems}async findSystem(e,t){return(await this.getSystems(e)).find((e=>e.name===t))}async getServices(e,t,r){const a=await this.findSystem(e,t),i={filter:new Map([["protocol",["odatav2","odatav4"]]])};(r||a.credentials)&&(i.credentials=a.credentials||new l.Authentication(r.user,r.password));const s=await a.getServices(i);return r&&this.systems&&this.systems.forEach((e=>{e.name===t&&(e.credentials=new l.Authentication(r.user,r.password))})),s}async getMetadata(e,t,r,a){const i=await this.findSystem(e,t),s=new l.ODataService(r.name,r.url,r.id,a),{data:n,annotations:d=[]}=await i.getMetadata(s,c.EncodingMode.XML,{annotations:!0,...i.credentials&&{credentials:i.credentials}});let E;try{const e=u.MetadataFactory.getMetadataFactory().getMetadataExplorer(n);E=e.v2Logger?o.ODataVersion.v2:o.ODataVersion.v4}catch(e){return(0,o.t)("ERROR_COULD_NOT_PARSE_MAIN_ENTITIES")}const _=[];d?.length&&d.forEach((e=>{_.push({TechnicalName:e.technicalName,Version:e.version,Definitions:e.data||[],Uri:`${E===o.ODataVersion.v2?S.V2_CATALOG_URL_PATH:S.V4_CATALOG_URL_PATH_PROD}/Annotations(TechnicalName='${encodeURIComponent(e.technicalName)}',Version='${e.version}')/$value/`})}));const{origin:m,pathname:y,searchParams:p}=/^((http|https):\/\/)/.test(r.url)?new URL(r.url):new URL(r.url,i.url);return{edmx:n,annotations:_.length?_:void 0,version:E,host:m,servicePath:`${y}${p.toString().length?"?"+p.toString():""}`}}}t.DestinationHelpers=class DestinationHelpers{constructor(){this.destinationProvider=new DestinationProvider}async getDestinations(e){const t=new n.Mta((0,i.dirname)(e)),r=await t.getResources();let a=[];return r&&(a=r.filter((e=>"destination"===e.parameters?.service)).map((e=>e.name))),a}async validateMtaPath(e){let t=!1;if(e)try{if("win32"===process.platform&&"/"===e.substring(0,1)&&(e=e.substring(1)),"mta.yaml"===(0,i.basename)(e)&&(0,s.existsSync)(e))try{t=!!(await this.getDestinations(e))?.length||(0,o.t)("ERROR_MTA_NO_DESTINATIONS_FOUND")}catch(e){t=(0,o.t)("ERROR_SCP_ABAP_SOURCE_DISCOVER"),d.default.logErrorMsgs(e)}else e&&(t=(0,o.t)("ERROR_MTA_FILE_DOES_NOT_EXIST"))}catch(e){t=(0,o.t)("ERROR_MTA_FILE_INVALID"),d.default.logErrorMsgs(e)}return t}async validateDestination(e){let t=!1;if(e)try{t=!!(await this.destinationProvider.getSystems(e))?.length||(0,o.t)("ERROR_MTA_NOT_FOUND",{source:"systems",target:"destination"})}catch(e){t=(0,o.t)("ERROR_SCP_ABAP_SOURCE_DISCOVER"),d.default.logErrorMsgs(e)}return t}async validateSystem(e,t,r){let a=!1;if(e&&t)try{a=!!(await this.destinationProvider.getServices(e,t,r))?.length||(0,o.t)("ERROR_MTA_NOT_FOUND",{source:"services",target:"destination"})}catch(e){a=e?.code&&e?.getOriginalCause&&401===e.getOriginalCause()?(0,o.t)("ERROR_AUTHENTICATION"):(0,o.t)("ERROR_SCP_ABAP_SOURCE_DISCOVER"),d.default.logErrorMsgs(e)}return a}async getDestinationsFromFile(e){let t=[];try{t=await this.getDestinations(e)}catch(e){t.length=0,d.default.logErrorMsgs(e)}return t}async getSystems(e){let t=[];try{t=(await this.destinationProvider.getSystems(e)).map((e=>e.name))}catch(e){t.length=0,d.default.logErrorMsgs(e)}return t}async getServices(e,t,r){const a=[];try{let i=await this.destinationProvider.getServices(e,t);r&&(i=i.filter((e=>e.protocol.includes(r)))),i.forEach((e=>{a.push({name:`${e.name?.length?e.name:e.id} - OData v${e.protocol.includes("2")?2:4}`,value:{service:e,protocol:e.protocol}})}))}catch(e){a.length=0,d.default.logErrorMsgs(e)}return a.sort((0,o.compareFunc)("name"))}async getMetadata(e,t,r,a){let i=!1;if(r)try{i=await this.destinationProvider.getMetadata(e,t,r,a)}catch(e){i=(0,o.t)("ERROR_SERVICE_NOT_AVAILABLE"),d.default.logErrorMsgs(e,e.message)}return i}}},21509:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,i)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(39154),t)},67288:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getServiceUrlQuestions=t.validateService=void 0;const i=r(1628),s=r(77090),n=r(84826),o=a(r(75503)),c=r(35677),l=r(73215);async function u({serviceUrl:e,serviceUrlUser:t,serviceUrlPassword:r,requiredVersion:a},c,l,u=!1){if(l.validity.authenticated||!1===l.validity.authRequired)try{!0===u&&l.setRejectUnauthorized(!u);const{system:d,servicePath:S,search:E}=(0,s.newSapSystemForServiceUrl)(e);e&&r&&d.setCredentials({username:t,password:r});const _=await d.getService(S,u);c.edmx=await _.metadata();const m=n.MetadataFactory.getMetadataFactory().getMetadataExplorer(c.edmx).v2Logger?s.ODataVersion.v2:s.ODataVersion.v4;if(a&&a!==m)return delete c.edmx,`${(0,i.t)("ERROR_ODATA_SERVICE_VERSION_MISMATCH",{serviceVersion:m,requiredVersion:a})}`;c.version=m;const y=new URLSearchParams(E);y.has(i.SAP_CLIENT_KEY)&&y.delete(i.SAP_CLIENT_KEY);const p=y.toString()?"?"+y.toString():"";c.servicePath=S+p;const g=await d.getCatalog(c.version,u);return c.annotations=await g.getAnnotations({path:S}).catch((e=>{o.default.logErrorMsgs(e)})),c.host=d.config.url,c.client=d.config.client,!0}catch(e){return delete c.edmx,o.default.logErrorMsgs(e)}finally{l.setRejectUnauthorized(!0)}return!1}t.validateService=u,t.getServiceUrlQuestions=function(e){const t=new c.ConnectionValidator,r=e.version;let a,s=!1;return[{when:function(e){return!!e},type:"input",name:"serviceUrl",guiOptions:{hint:"http://<hostname>:<port>/path/to/odata/service/",mandatory:!0,breadcrumb:!0},message:(0,i.t)("LABEL_ODATA_SERVICE_URL",{odataVersion:r}),validate:async(s,n)=>(a=await t.validateUrl({urlString:s,isServiceUrl:!0}),!![i.ERROR_TYPE.CERT_SELF_SIGNED,i.ERROR_TYPE.CERT_SELF_SIGNED_CERT_IN_CHAIN].includes(o.default.getCurrentErrorType())||(!0===a?!!t.validity.authRequired||u({serviceUrl:s,serviceUrlUser:n.serviceUrlUser,serviceUrlPassword:n.serviceUrlPassword,requiredVersion:r},e,t):a))},{when:function(e){if(e.serviceUrl){const e=[i.ERROR_TYPE.CERT_SELF_SIGNED,i.ERROR_TYPE.CERT_SELF_SIGNED_CERT_IN_CHAIN].includes(o.default.getCurrentErrorType(i.PLATFORMS.CLI!==(0,i.getPlatform)()));return s=s||e,e}return!1},type:"confirm",name:"ignoreCertError",message:(0,i.t)("LABEL_PROMPT_CONTINUE_WITH_UNTRUSTED_CERT"),default:!1,validate:async(a,s)=>{a&&l.ServiceInquirer.logger.warn((0,i.t)("LOG_MSG_INFO_USER_DISABLED_CERT_VALIDATION"));const n=await t.validateUrl({urlString:s.serviceUrl,isServiceUrl:!0,ignoreCertError:a,forceReValidation:!0});return!0===n?!!t.validity.authRequired||u({serviceUrl:s.serviceUrl,serviceUrlUser:s.serviceUrlUser,serviceUrlPassword:s.serviceUrlPassword,requiredVersion:r},e,t,a):n}},{when:async a=>{if(i.PLATFORMS.CLI===(0,i.getPlatform)()){if(!1===a.ignoreCertError)throw new Error("exiting");l.ServiceInquirer.logger.warn((0,i.t)("LOG_MSG_INFO_USER_DISABLED_CERT_VALIDATION"));const s=await t.validateUrl({urlString:a.serviceUrl,isServiceUrl:!0,ignoreCertError:a.ignoreCertError,forceReValidation:!0});if(!0!==s)throw new Error(s.toString());if(!t.validity.authRequired){const i=await u({serviceUrl:a.serviceUrl,serviceUrlUser:a.serviceUrlUser,serviceUrlPassword:a.serviceUrlPassword,requiredVersion:r},e,t,a.ignoreCertError);if(!0!==i)throw new Error(i.toString())}}return!1},name:"cliOnlyRevalidate"},{when:e=>!!t.validity.reachable&&t.isAuthRequired(e.serviceUrl,void 0,e.ignoreCertError),type:"input",name:"serviceUrlUser",message:(0,i.t)("LABEL_SERVICE_USERNAME"),guiOptions:{mandatory:!0},default:"",validate:e=>!!(e&&e.length>0)},{when:e=>!!t.validity.reachable&&t.isAuthRequired(e.serviceUrl,void 0,e.ignoreCertError),type:"password",guiOptions:{applyDefaultWhenDirty:!0,mandatory:!0},name:"serviceUrlPassword",message:(0,i.t)("LABEL_SERVICE_PASSWORD"),guiType:"login",mask:"*",default:"",validate:async(a,i)=>{const s=await t.validateAuth(i.serviceUrl,i.serviceUrlUser,a,void 0,i.ignoreCertError);return!0===s?u({serviceUrl:i.serviceUrl,serviceUrlUser:i.serviceUrlUser,serviceUrlPassword:a,requiredVersion:r},e,t,i.ignoreCertError):s}}]}},54672:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedServiceLabel=t.updateAndValidateServiceDetail=t.createNormalisedURL=t.defaultSystemName=t.appendSuffix=t.suggestSystemName=t.isSystemConfigEqual=t.resetSystemState=t.updateSapSystemCredentials=t.createNewSystem=t.getSystemForService=t.getRequiredServiceInformation=t.getServiceChoices=t.canSaveSapSystem=t.getSapSystemChoices=void 0;const i=r(43895),s=r(1628),n=r(77090),o=r(82884),c=r(24003),l=a(r(75503)),u=r(64989),d=r(98651),S=r(47937);t.getSapSystemChoices=function(e){const t=[],r=(0,i.isAppStudio)()?(0,s.t)("LABEL_SAP_SYSTEM_SOURCE_TYPE_SCP"):(0,s.t)("NEW_SYSTEM");return t.push({name:r,value:r}),e&&Object.values(e).forEach((e=>{(0,i.isAppStudio)()&&!(0,d.validateDestinationAttributes)(e)&&(c.ServiceInquirer.logger.info((0,s.t)("INFO_INVALID_DESTINATION",{destination:e.getDisplayName()})),e=null),e&&t.push({name:e.getDisplayName(),value:e.name})})),t},t.canSaveSapSystem=function(e){let t=!1;return!(0,i.isAppStudio)()&&e&&e?.name!==(0,s.t)("NEW_SYSTEM")&&e?.hasSavedCredentials()&&!e?.isScp()&&(t=!0),t};const E=async(e,t,r)=>{let a,i;try{const i=await e.getCatalog(t);a=await i.listServices(r===n.CATALOG_REQ_TYPE.RECOMMENDED)}catch(a){c.ServiceInquirer.logger.debug((0,s.t)("ERROR_SERVICES_UNAVAILABLE_FOR_VERSION",{catalogType:n.CATALOG_REQ_TYPE[r],system:e.toString(),version:t})),i=a}return{services:a,version:t,error:i}},_=e=>{const t=e.error;return t&&(e.errorType=s.ErrorHandler.getErrorType(t)),e},m=({error:e,errorType:t})=>t===s.ERROR_TYPE.CONNECTION||e instanceof n.ConnectionError||e instanceof n.UAATimeoutError||e instanceof n.TimeoutError?e:void 0,y=e=>{(0,s.getPlatform)()!==s.PLATFORMS.CLI&&c.ServiceInquirer.logger.warn((0,s.t)("LOG_MSG_PROBLEM_WITH_SERVICE_DEFINITION",{service:JSON.stringify(e)}))},p=async({system:e,catRequestErrors:t,rootCauseErrorType:r,logMsg:a,error:n,reqVersion:o})=>{const c=t?.map((({errorType:e})=>e)),u=((e,t,r,a)=>{let n;return(0,i.isAppStudio)()&&(t.isHTML5DynamicDestination()?e&&(e.includes(s.ERROR_TYPE.BAD_GATEWAY)?n=s.ERROR_TYPE.BAD_GATEWAY:e.includes(s.ERROR_TYPE.SERVICE_UNAVAILABLE)&&t.isOnPremSystem()?n=s.ERROR_TYPE.DESTINATION_BAD_GATEWAY_503:e.includes(s.ERROR_TYPE.NOT_FOUND)?n=a===s.ODataVersion.v2?s.ERROR_TYPE.NO_V2_SERVICES:a===s.ODataVersion.v4?s.ERROR_TYPE.NO_V4_SERVICES:s.ERROR_TYPE.DESTINATION_NOT_FOUND:r&&(n=s.ErrorHandler.getErrorType(r))):n=s.ERROR_TYPE.DESTINATION_MISCONFIGURED),n})(c,e,n,o);if((0,s.getPlatform)()===s.PLATFORMS.CLI){if(u){const t=s.TelemetryHelper.createTelemetryData({basErrorType:u,destODataType:e.destinationODataType});throw await(0,s.sendTelemetryBlocking)(S.EventName.SERVICE_INQUIRER_BAS_ERROR,t),new Error(s.ErrorHandler.getHelpForError(u))}{const e=a?s.ErrorHandler.getHelpForError(r,a).toString():l.default.getErrorMsg(n,!0,r);throw new Error(e)}}if(u){const t=s.TelemetryHelper.createTelemetryData({basErrorType:u,destODataType:e.destinationODataType});return(0,s.sendTelemetry)(S.EventName.SERVICE_INQUIRER_BAS_ERROR,t),l.default.logErrorMsgs(u)}const d=c?.indexOf(s.ERROR_TYPE.AUTH);return d>-1?l.default.logErrorMsgs(t[d].error):l.default.logErrorMsgs(n??r,a)};async function g(e,t,r=!0){if(t.servicePath||!r)try{try{const r=await e.getCatalog(t.version);t.annotations=await r.getAnnotations({path:t.servicePath})}catch{c.ServiceInquirer.logger.info((0,s.t)("INFO_NO_ANNOTATIONS_FILE"))}const r=await e.getService(t.servicePath);t.edmx=await r.metadata(),t.host=e.config.url??t.newSystemServiceInfo?.url,t.client=e.config.client,(0,i.isAppStudio)()&&(t.destination=e.name),t.scp=e.isScp(),t.destinationAuthType=e.config.destinationAuthType}catch(t){return c.ServiceInquirer.logger.error(l.default.getErrorMsg(t,!1,s.ERROR_TYPE.SERVICE_UNAVAILABLE)),p({system:e,rootCauseErrorType:s.ERROR_TYPE.SERVICE_UNAVAILABLE})}return!0}async function v(e,t,r){let a;try{a=t||new URL(e).origin+(r?(0,s.t)("SUGGEST_SYSTEM_NAME_CLIENT",{systemClient:r}):"")}catch(e){return void c.ServiceInquirer.logger.warn((0,s.t)("ERROR_SUGGEST_SAP_SYSTEM_NAME",{error:e}))}return!0===await(0,d.validateSystemName)(a)?a:h(a)}async function h(e){let t=1,r=`${e} (${t})`;for(;!0!==await(0,d.validateSystemName)(r);)r=`${e} (${t})`,t++;return r}function A(e,t=""){return t=t.replace(/^\//,""),e=!e.endsWith("/")&&t?e+"/":e,new URL(e+t)}t.getServiceChoices=async function(e,t){const r=performance.now(),a=t?[t]:[s.ODataVersion.v2,s.ODataVersion.v4],o=[n.CATALOG_REQ_TYPE.RECOMMENDED,n.CATALOG_REQ_TYPE.LEGACY],u=[],d=[];for(const t of o)for(const r of a)u.push((()=>E(e,r,t)));const g=await u[0]();d.push(_(g));let v=m(g),h=!!g.error;if(!v)for(let e=1;e<u.length;e++){const t=await u[e]();d.push(_(t)),v=v||m(t),h=h&&!!t.error}const A=((e,t)=>{const r=[],a="trace"===c.ServiceInquirer.logger.getLogLevel();for(let i=0;i<e.length;i++){const n=t[t[i]?i:i+e.length],o=e[i];n?.filter((e=>!e.ServiceId?.includes("/IWBEP/COMMON"))).forEach((e=>{try{let t=e.TechnicalServiceName??`${e.GroupId} > ${e.ServiceAlias||e.ServiceId}`;const i=o===s.ODataVersion.v2?new URL(e.ServiceUrl).pathname:e.ServiceUrl.split("?")[0];t=`${t} (${e.TechnicalServiceVersion??e.ServiceVersion}) - OData V${o}`,a&&(t=`${t} Service Type: ${e.ServiceType}`),r?.push({name:t,value:{servicePath:i,serviceODataVersion:o,toString:()=>t,serviceType:e.ServiceType}})}catch(t){l.default.logErrorMsgs(t),y(e)}}))}return r})(a,d.map((e=>e.services)));if(v||0===A.length&&h){A.push({name:(0,s.t)("SERVICES_UNAVAILABLE"),value:s.ERROR_TYPE.SERVICES_UNAVAILABLE});const r=(0,s.t)("ERROR_ALL_SERVICES_UNAVAILABLE",{system:e.toString(),version:a.join(", V")});await p({system:e,catRequestErrors:d.map((({errorType:e,error:t})=>({errorType:e,error:t}))),rootCauseErrorType:s.ERROR_TYPE.SERVICES_UNAVAILABLE,logMsg:v?void 0:r,error:v,reqVersion:t})}else if((0,i.isAppStudio)()){const t=s.TelemetryHelper.createTelemetryData({destODataType:e.destinationODataType});(0,s.sendTelemetry)(S.EventName.SERVICE_INQUIRER_BAS_SUCCESS,t)}const R=performance.now();return c.ServiceInquirer.logger.info((0,s.t)("SERVICES_TIME_ELAPSED",{servicesRetrievalTime:Math.round((R-r)/1e3)})),A.sort((0,s.compareFunc)("name"))},t.getRequiredServiceInformation=g,t.getSystemForService=async function(e,t){let r=await(0,o.createDestinationInstance)(e,"ABAP");return!0===await(0,n.isSystemNameInUse)(r)&&(r=await h(r)),(0,i.isAppStudio)()?(0,n.newSapSystemForDestinaton)({destination:r}):(0,n.newSapSystemForSteampunk)(r,t,!0)},t.createNewSystem=function(e){const t=e.newSystemName||"Temp System";try{if("SCP"===e.newSystemType&&e.newSystemServiceInfo)return(0,n.newSapSystemForSteampunk)(t,e.newSystemServiceInfo,!0);if("S4HC"===e.newSystemType)return(0,n.newS4HCSystem)({name:t,url:e.newSystemUrl,unSaved:!0});{let r;return e.newSystemUser&&e.newSystemPassword&&(r={username:e.newSystemUser,password:e.newSystemPassword}),(0,n.newSapSystem)(t,e.newSystemUrl,e.newSystemClient??"",r,!0)}}catch(e){l.default.logErrorMsgs(e)}},t.updateSapSystemCredentials=async function(e,t){try{let r;return e.systemUser&&e.systemPassword?(r={username:e.systemUser,password:e.systemPassword},t.setCredentials(r),await(0,n.saveSapSystem)(t),t):t}catch(e){l.default.logErrorMsgs(e)}},t.resetSystemState=function(e){return e.newSystem=void 0,e.newSystemServiceInfo=void 0,e.newSystemServiceInstance=void 0,e.newSystemName="",e.servicePath=void 0,u.tempAnswers.suggestedSystemName=null,u.tempAnswers.lastSystemNameSuggested=null,u.tempAnswers.isSuggestion=!0,!0},t.isSystemConfigEqual=function(e,t){return e.client===t.client&&e.destination===t.destination&&e.originalUrl===t.originalUrl&&e.scp===t.scp&&e.service===t.service&&e.url===t.url},t.suggestSystemName=v,t.appendSuffix=h,t.defaultSystemName=async function(e,t,r,a){return u.tempAnswers.suggestedSystemName=await v(e,t,r),!u.tempAnswers.lastSystemNameSuggested||u.tempAnswers.isSuggestion&&a===u.tempAnswers.lastSystemNameSuggested?(u.tempAnswers.lastSystemNameSuggested=u.tempAnswers.suggestedSystemName,u.tempAnswers.suggestedSystemName):(u.tempAnswers.isSuggestion=!1,a)},t.createNormalisedURL=A,t.updateAndValidateServiceDetail=async function(e,t,r){const a=await g(e,t,!1);if(!0!==a)return a;{const r=A(e.config.url,t.servicePath??"");t.host=r.origin,t.servicePath=r.pathname}const{validationMsg:i,version:s}=(0,d.validateODataVersion)(t.edmx,r);return i||(t.version=s,!0)},t.getSelectedServiceLabel=function(e){let t=(0,s.t)("LABEL_SERVICE");return e.newSystem?.isScp()&&e.newSystem?.userDisplayName&&(t=t.concat(` ${(0,s.t)("LABEL_SERVICE_FOR_USER",{username:e.newSystem?.userDisplayName})}`)),t}},29142:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,i)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createNewSystem=void 0,i(r(19024),t),i(r(62815),t);var s=r(54672);Object.defineProperty(t,"createNewSystem",{enumerable:!0,get:function(){return s.createNewSystem}})},19024:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSystemConfigQuestions=t.getServicesForSystemQuestions=t.getDiscoverSystemQuestions=t.getNewSystemQuestions=t.getScpQuestions=t.getS4HCQuestions=t.getOnPremQuestions=void 0;const i=r(1628),s=r(77090),n=r(43895),o=r(75836),c=r(54672),l=r(2929),u=a(r(75503)),d=r(98651),S=r(64989),E=r(62815),_=r(33774),m=r(73215),y=r(25184),p=i.FioriGeneratorPromptNames.serviceInquirer.systemConfigQuestions;function g(e){const t=new l.ConnectionValidator;return[{type:"input",name:"newSystemUrl",message:(0,i.t)("MSG_SYSTEM_URL"),guiOptions:{mandatory:!0,breadcrumb:(0,i.t)("MSG_SYSTEM_URL")},validate:e=>t.validateUrl({urlString:e,ignorePath:!0})},{type:"input",name:"newSystemClient",message:(0,i.t)("MSG_CLIENT_CODE"),guiOptions:{breadcrumb:(0,i.t)("LABEL_SAP_CLIENT_BREADCRUMB")},validate:d.validateSapClient},{when:()=>t.isAuthRequired(),type:"input",name:"newSystemUser",message:(0,i.t)("LABEL_SERVICE_USERNAME"),guiOptions:{mandatory:!0},default:"",validate:()=>!0},{when:()=>t.isAuthRequired(),type:"password",guiOptions:{applyDefaultWhenDirty:!0,mandatory:!0},name:"newSystemPassword",message:(0,i.t)("LABEL_SERVICE_PASSWORD"),guiType:"login",mask:"*",default:"",validate:(e,r)=>t.validateAuth(void 0,r.newSystemUser,e,r.newSystemClient)},{when:async r=>(!r.newSystemUrl||!t.validity.authenticated&&t.isAuthRequired()||(e.newSystem=await(0,c.createNewSystem)(r)),!1),name:"createOnPremSystem"}]}function v(e){return[{type:"input",name:"newS4HCSystemUrl",message:(0,i.t)("MSG_SYSTEM_URL"),guiOptions:{mandatory:!0,breadcrumb:(0,i.t)("MSG_SYSTEM_URL")},validate:_.validateUrl},{when:t=>(t.newS4HCSystemUrl&&(e.newSystem=(0,c.createNewSystem)({...t,newSystemUrl:t.newS4HCSystemUrl,newSystemType:"S4HC"})),!1),name:"createS4HCSystem"}]}function h(e){const t=[];let r;return(0,n.isAppStudio)()?r="DISCOVER":(t.push({type:"list",name:"serviceKeySource",choices:[{name:(0,i.t)("SCP_ABAP_SOURCE_SELECT_DISCOVER"),value:"DISCOVER"},{name:(0,i.t)("SCP_ABAP_SOURCE_SELECT_FILE"),value:"FILE"}],message:(0,i.t)("SCP_ABAP_SOURCE_MESSAGE"),validate:()=>(0,c.resetSystemState)(e)}),t.push({when:e=>"FILE"===e.serviceKeySource,type:"input",name:"newSystemServiceKeyPath",message:(0,i.t)("LABEL_SERVICE_KEY_MESSAGE"),guiType:"file-browser",guiOptions:{hint:(0,i.t)("SERVICE_CONNECTION_LOCAL_FILE"),applyDefaultWhenDirty:!0,mandatory:!0},validate:t=>{const r=(0,d.validateServiceKey)(t);return"string"==typeof r||"boolean"==typeof r?r:(e.newSystemServiceInfo=r,!0)}})),t.push({when:e=>"DISCOVER"===(e.serviceKeySource??r),type:"list",name:"newSystemServiceInstance",guiOptions:{breadcrumb:(0,i.t)("SCP_ABAP_SELECT_MESSAGE")},choices:async()=>{const e=await(0,i.getABAPInstanceChoices)();if(e.outputError&&(u.default.logErrorMsgs(e.outputError.error,e.outputError.userMsg),(0,i.getPlatform)()===i.PLATFORMS.CLI))throw new Error((0,i.t)("INFO_ABAP_ENVIRONMENTS_UNAVAILABLE"));return e.choices},message:(0,i.t)("SCP_ABAP_SELECT_MESSAGE"),default:()=>i.ERROR_TYPE.NO_ABAP_ENVS,validate:t=>{if(t===i.ERROR_TYPE.NO_ABAP_ENVS){const e=u.default.getErrorMsg("",!0),t=(0,i.t)("ERROR_SCP_ABAP_SOURCE_DISCOVER_CHECK_LOG");return e?`${e} ${t}`:t}return(0,c.resetSystemState)(e),e.newSystemServiceInstance=t,!0}}),t.push({when:async t=>{if((0,i.getPlatform)()===i.PLATFORMS.CLI&&(e.newSystemServiceInstance=t.newSystemServiceInstance),e.newSystemServiceInfo){const r={newSystemName:e.newSystemName,newSystemType:t.newSystemType,newSystemServiceInfo:e.newSystemServiceInfo,newSystemUser:t.newSystemUser,newSystemPassword:t.newSystemPassword,newSystemUrl:t.newSystemUrl,newSystemClient:t.newSystemClient};e.newSystem=(0,c.createNewSystem)(r)}else if(e.newSystemServiceInstance&&e.newSystemServiceInstance!==i.ERROR_TYPE.NO_ABAP_ENVS)try{e.newSystemServiceInfo=(await(0,o.apiGetInstanceCredentials)(e.newSystemServiceInstance)).credentials,e.newSystem=await(0,c.getSystemForService)(e.newSystemServiceInstance,e.newSystemServiceInfo),e.newSystemName=e.newSystem.name}catch(t){u.default.logErrorMsgs("",(0,i.t)("SERVICES_UNAVAILABLE_BY_ABAP_ENV_UNAVAILABLE"),!1),u.default.logErrorMsgs(t,(0,i.t)("INFO_ABAP_ENVIRONMENTS_UNAVAILABLE")),e.newSystem={name:l.SERVICES_UNAVAILABLE_DUMMY_SYSTEM_NAME}}return!1},name:"createSCPSystem"}),t}function A(e){const t=[],r=i.FeatureManager.getInstance().isFeatureEnabled(i.Features.S4HCSystem);t.push({name:(0,i.t)("LABEL_SAP_SYSTEM_SOURCE_TYPE_SCP"),value:"SCP"}),r&&t.push({name:(0,i.t)("LABEL_SAP_SYSTEM_SOURCE_TYPE_S4HC"),value:"S4HC"}),t.push({name:(0,i.t)("LABEL_SAP_SYSTEM_SOURCE_TYPE_ON_PREM"),value:"ON_PREM"});const a=[{type:"list",name:"newSystemType",choices:t,message:(0,i.t)("MSG_SYSTEM_TYPE_CHOICE"),validate:()=>(0,c.resetSystemState)(e)}];return a.push(...(0,i.withCondition)(g(e),(e=>"ON_PREM"===e.newSystemType))),a.push(...(0,i.withCondition)(h(e),(e=>"SCP"===e.newSystemType))),r&&a.push(...(0,i.withCondition)(v(e),(e=>"S4HC"===e.newSystemType))),a.push({when:()=>!!e?.newSystem&&e?.newSystem?.name!==l.SERVICES_UNAVAILABLE_DUMMY_SYSTEM_NAME,type:"input",guiOptions:{hint:(0,i.t)("HINT_ENTER_SYSTEM_NAME_TO_SAVE"),applyDefaultWhenDirty:!0,breadcrumb:(0,i.t)("SYSTEM_NAME")},name:"newSystemName",message:(0,i.t)("SYSTEM_NAME"),default:t=>e.newSystemName||(0,c.defaultSystemName)("SCP"===t.newSystemType?e.newSystemServiceInfo.url:t.newSystemUrl,e.newSystemServiceInfo?.systemid,t.newSystemClient,t.newSystemName),validate:e=>e===S.tempAnswers.suggestedSystemName||(0,d.validateSystemName)(e)}),a}function R(e){const t=[{when:()=>!1,name:"newSystemType",default:"SCP"}];return t.push(...h(e)),t}function f(e,t={},r){let a,o,d=[];const S=e.version,E=[];return(0,n.isAppStudio)()&&(a=new l.ConnectionValidator,E.push({when:async r=>{if(e.newSystem||t[r.system].isScp())return!1;const i=Object.assign({},t[r.system].config);return(0,s.replaceUrlForAppStudio)(i,r.system),await a.validateUrl({urlString:i.url+i.service,ignorePath:!1,authType:i.destinationAuthType}),a.isAuthRequired()},type:"input",name:"destinationUser",message:(0,i.t)("LABEL_SERVICE_USERNAME"),guiOptions:{mandatory:!0},default:""}),E.push({when:r=>!e.newSystem&&!t[r.system].isScp()&&a.isAuthRequired(),type:"password",guiOptions:{applyDefaultWhenDirty:!0},name:"destinationPassword",message:(0,i.t)("LABEL_SERVICE_PASSWORD"),guiType:"login",mask:"*",default:"",validate:async(e,r)=>{const i=await a.validateAuth(void 0,r.destinationUser,e);return i&&t[r.system].setCredentials({username:r.destinationUser,password:e}),i}})),E.push({when:async s=>(r&&e.newSystem&&(0,c.isSystemConfigEqual)(r.config,e.newSystem?.config)&&(e.newSystem=r),e?.newSystem?.name===l.SERVICES_UNAVAILABLE_DUMMY_SYSTEM_NAME||(u.default.hasError()?(d.push({name:(0,i.t)("SERVICES_UNAVAILABLE"),value:i.ERROR_TYPE.SERVICES_UNAVAILABLE}),!0):!((0,n.isAppStudio)()&&!e.newSystem&&!t[s.system]?.isScp()&&a.validity.authRequired&&!a.validity.authenticated)&&(o&&(0,c.isSystemConfigEqual)(o,t[s.system]?.config||e.newSystem?.config)||(d=await(0,c.getServiceChoices)(t[s.system]||e.newSystem,S),o=t[s.system]?.config||e.newSystem?.config),!!o))),type:(0,i.getPlatform)()===i.PLATFORMS.CLI?"autocomplete":"list",name:"selectedService",guiOptions:{applyDefaultWhenDirty:!0,breadcrumb:(0,i.t)("LABEL_SERVICE")},choices:()=>d,source:(e,t)=>(0,i.searchChoices)(t,d),message:()=>(0,c.getSelectedServiceLabel)(e),additionalMessages:e=>{if(e?.serviceType&&e.serviceType!==l.SERVICE_TYPE.UI)return{message:(0,i.t)("WARN_MSG_NON_UI_SOURCE_OR_SERVICE_SELECTED",{serviceTypeDesc:"A2X"}),severity:y.Severity.warning}},default:()=>d.length>1?void 0:0,validate:async(r,a)=>e?.newSystem?.name===l.SERVICES_UNAVAILABLE_DUMMY_SYSTEM_NAME?(0,i.t)("SERVICES_UNAVAILABLE_BY_ABAP_ENV_UNAVAILABLE"):u.default.hasError()?u.default.getValidationErrorHelp():r?(e.version=r.serviceODataVersion,e.servicePath=r.servicePath,(0,c.getRequiredServiceInformation)(e.newSystem??t[a.system],e)):void 0}),E.push({when:async r=>{if(!u.default.hasError(!0)&&(0,i.getPlatform)()===i.PLATFORMS.CLI&&r.selectedService)return e.version=r.selectedService.serviceODataVersion,e.servicePath=r.selectedService.servicePath,!await(0,c.getRequiredServiceInformation)(e.newSystem??t[r.system],e)},name:"getServiceDetail"}),E}t.getOnPremQuestions=g,t.getS4HCQuestions=v,t.getScpQuestions=h,t.getNewSystemQuestions=A,t.getDiscoverSystemQuestions=R,t.getServicesForSystemQuestions=f,t.getSystemConfigQuestions=async function(e,t,r){let a={};const o=new l.ConnectionValidator;let u;try{a=await(0,s.listSAPSystems)(),e.newSystem&&(a[e.newSystem.name]=e.newSystem)}catch(e){m.ServiceInquirer.logger.error(`${(0,i.t)("ERROR_SAP_SYSTEM")}: ${e}`)}const d=[{type:(0,i.getPlatform)()===i.PLATFORMS.CLI?"autocomplete":"list",guiOptions:{hint:(0,i.t)("LABEL_SYSTEM_CONFIG"),applyDefaultWhenDirty:!0,breadcrumb:(0,i.t)("LABEL_SYSTEM")},name:p.system,choices:(0,c.getSapSystemChoices)(a),source:(e,t)=>(0,i.searchChoices)(t,(0,c.getSapSystemChoices)(a)),message:(0,i.t)("LABEL_SYSTEM"),default:r?.[p.system]?.value??(e.newSystem?e.newSystem.name:""),validate:()=>(0,c.resetSystemState)(e)},{when:async t=>{if(e.sapSystem=a[t.system],(0,c.canSaveSapSystem)(a[t.system])){const e=a[t.system];return await o.validateUrl({urlString:e?.url}),o.validity.reachable?(u=await o.validateAuth(e?.url,e?.username,e?.password,e?.client),!0!==u):!1}return!1},type:"input",name:p.systemUser,message:(0,i.t)("LABEL_SERVICE_USERNAME"),guiOptions:{mandatory:!0,applyDefaultWhenDirty:!0},default:e=>a[e.system]?.username,validate:()=>!0},{when:e=>(0,c.canSaveSapSystem)(a[e.system])&&o.validity.reachable&&!o.validity.authenticated,type:"password",guiOptions:{applyDefaultWhenDirty:!0},name:p.systemPassword,message:(0,i.t)("LABEL_SERVICE_PASSWORD"),guiType:"login",mask:"*",default:"",validate:(e,t)=>o.validateAuth(a[t.system]?.url,t.systemUser,e,a[t.system]?.client)},{when:async e=>(!0!==u&&o.validity.authenticated&&(a[e.system]=await(0,c.updateSapSystemCredentials)(e,a[e.system])),!1),name:"updateSapSystemCredentials"}];return(0,n.isAppStudio)()?d.push(...(0,i.withCondition)(R(e),(e=>e.system&&e.system===(0,i.t)("LABEL_SAP_SYSTEM_SOURCE_TYPE_SCP")))):d.push(...(0,i.withCondition)(A(e),(e=>e.system&&e.system===(0,i.t)("NEW_SYSTEM")))),(0,n.isAppStudio)()&&d.push(...(0,i.withCondition)((0,E.getGenericODataDestQuestions)(e,a),(e=>e.system&&e.system!==(0,i.t)("LABEL_SAP_SYSTEM_SOURCE_TYPE_SCP")&&a[e.system].isGenericODataDest()))),d.push(...(0,i.withCondition)(f(e,a,t),(t=>!!e?.newSystem||t.system&&!((0,c.canSaveSapSystem)(a[t.system])&&o.validity.reachable&&!o.validity.authenticated)&&t.system!==((0,n.isAppStudio)()?(0,i.t)("LABEL_SAP_SYSTEM_SOURCE_TYPE_SCP"):(0,i.t)("NEW_SYSTEM"))&&(!(0,n.isAppStudio)()||a[t.system].isAbapCatalogDest())))),d}},62815:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getGenericODataDestQuestions=void 0;const i=r(1628),s=r(77090),n=r(2929),o=a(r(75503)),c=r(54672);function l(e,t){const r=Object.assign({},e,{service:t??""});return(0,s.replaceUrlForAppStudio)(r),(0,c.createNormalisedURL)(r.url,r.service).toString()}t.getGenericODataDestQuestions=function(e,t){const r=new n.ConnectionValidator(!0);let a;const s=e.version;let u;return[{when:r=>(u=t[r?.system],e.sapSystem=u,!!u?.isPartialUrlDest()),type:"input",name:"servicePathInput",message:(0,i.t)("LABEL_SERVICE_PATH"),guiOptions:{mandatory:!0,breadcrumb:!0},validate:async t=>{if(!t)return(0,i.t)("WARNING_ENTER_VALID_SERVICE_PATH");let a=await r.validateUrl({urlString:l(u.config,t)});if(!0!==a){if(!1===r.getValidity()?.reachable)return(0,i.t)("ERROR_ODATA_SERVICE_PATH_NOT_FOUND");if(!u.isHTML5DynamicDestination())return i.ErrorHandler.getHelpForError(i.ERROR_TYPE.DESTINATION_MISCONFIGURED)}return!0!==a||r.validity.authRequired||(e.servicePath=t,a=await(0,c.updateAndValidateServiceDetail)(u,e,s)),a}},{when:async e=>u?.isPartialUrlDest()?!!e.servicePathInput&&r.validity.authRequired:(await r.validateUrl({urlString:l(u?.config)}),!!r.validity.authRequired),type:"input",name:"destinationSrvUser",message:(0,i.t)("LABEL_SERVICE_USERNAME"),guiOptions:{mandatory:!0},default:""},{when:()=>!!r.validity.authRequired,type:"password",name:"destinationSrvPassword",message:(0,i.t)("LABEL_SERVICE_PASSWORD"),guiType:"login",mask:"*",default:"",validate:async(t,a)=>{const i=await r.validateAuth(void 0,a.destinationSrvUser,t);return!0===i&&(u.setCredentials({username:a.destinationSrvUser,password:t}),a.servicePathInput)?(e.servicePath=a.servicePathInput,(0,c.updateAndValidateServiceDetail)(u,e,s)):i}},{when:async()=>!(!u?.isFullUrlDest()||!(!r.validity.authRequired||r.validity.authRequired&&r.validity.authenticated))&&(a=!0===await(0,c.updateAndValidateServiceDetail)(u,e,s)?{name:e.host+e.servicePath,value:e.host+e.servicePath}:{name:(0,i.t)("ERROR_MSG_SERVICE_UNAVAILABLE"),value:i.ERROR_TYPE.SERVICES_UNAVAILABLE},!0),type:"list",name:"selectedDestinationService",choices:()=>[a],message:(0,i.t)("LABEL_SERVICE"),guiOptions:{applyDefaultWhenDirty:!0,breadcrumb:!0},default:()=>0,validate:e=>e!==i.ERROR_TYPE.SERVICES_UNAVAILABLE||o.default.getErrorMsg(null,!0,i.ERROR_TYPE.SERVICES_UNAVAILABLE)}]}},64989:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tempAnswers=void 0,t.tempAnswers={suggestedSystemName:null,lastSystemNameSuggested:null,isSuggestion:!0}},98651:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validateDestinationAttributes=t.validateODataVersion=t.validateSystemName=t.validateServiceKey=t.validateSapClient=void 0;const i=r(1628),s=r(77090),n=r(84826),o=r(57147),c=a(r(75503));t.validateSapClient=function(e){return!(e&&!new RegExp("^[0-9][0-9][0-9]$").test(e))||(0,i.t)("WARNING_CLIENT_CODE_FORMAT")},t.validateServiceKey=function(e){if(!e)return!1;try{const t=(0,o.readFileSync)(e,"utf8"),r=JSON.parse(t);return r.url&&r.uaa&&r.catalogs?r:(0,i.t)("ERROR_SERVICE_KEYS_INFO")}catch(e){return(0,i.t)("ERROR_SERVICE_KEYS_INFO")}},t.validateSystemName=async function(e){if(e){if(e===(0,i.t)("NEW_SYSTEM")||e===(0,i.t)("LABEL_SAP_SYSTEM_SOURCE_TYPE_SCP"))return(0,i.t)("VALIDATION_ERROR_RESERVED_SYSTEM_NAME",{systemName:e})+". "+(0,i.t)("SYSTEM_NAME_INVALID");return!await(0,s.isSystemNameInUse)(e)||(0,i.t)("SYSTEM_NAME_EXISTS")}return(0,i.t)("SYSTEM_NAME_INVALID")},t.validateODataVersion=function(e,t){try{const r=n.MetadataFactory.getMetadataFactory().getMetadataExplorer(e).v2Logger?i.ODataVersion.v2:i.ODataVersion.v4;return t&&t!==r?{validationMsg:`${c.default.logErrorMsgs((0,i.t)("ERROR_ODATA_SERVICE_VERSION_MISMATCH",{serviceVersion:r,requiredVersion:t}))}`}:{version:r}}catch(e){return{validationMsg:(0,i.t)("ERROR_ODATA_SERVICE_METADATA_INVALID")}}},t.validateDestinationAttributes=function(e){return e.isAbapCatalogDest()||e.isFullUrlDest()||e.isPartialUrlDest()}},73215:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceInquirer=void 0;const a=r(1628),i=r(43895),s=r(93540),n=r(35907),o=r(77090),c=r(47937);class ServiceInquirer{constructor(e,t,r){ServiceInquirer._logger=e??a.DefaultLogger,a.ErrorHandler.logger=ServiceInquirer._logger,this.workspaceFolders=t,this.generatorInfo=r}static get logger(){return this._logger}async getAllQuestion(e,t,r,i,o){const c=e.version,l=[];return l.push((0,s.getSourcesQuestions)(e,t,r,o)),l.push(...(0,a.withCondition)((0,s.getLocalMetadataQuestions)(e),(e=>"File"===e.source))),l.push(...(0,a.withCondition)(await(0,s.getCapQuestions)(e,r,this.workspaceFolders),(e=>"Local Cap"===e.source))),l.push(...(0,a.withCondition)(await(0,s.getSystemConfigQuestions)(e,i,o),(e=>"SAP System"===e.source))),l.push(...(0,a.withCondition)((0,s.getServiceUrlQuestions)(e),(e=>"OData Url"===e.source))),l.push(...(0,a.withCondition)((0,n.getApiHubQuestions)(e,c),(e=>"SAP Business Accelerator Hub"===e.source))),l.push(...(0,a.withCondition)((0,s.getMtaQuestions)(e),(e=>"MTA File"===e.source))),l}async inquire(e,t){await(0,c.initTelemetrySettings)({modulePackageJson:{name:a.APP_GENERATOR_MODULE,version:this.generatorInfo.rootGeneratorVersion}});const r={version:t.requiredOdataVersion},s=t.promptSettings,n=await this.getAllQuestion(r,!!t.allowNoDatasource,t.capService,t.cachedSapSystem,s);return Object.assign(r,await e(n)),r.newSystemName&&r.newSystem&&!(0,i.isAppStudio)()&&(r.newSystem.name=r.newSystemName),this.answersToService(r)}answersToService(e){return{host:(e=this.cleanServiceProperties(e)).host,client:e.client,scp:e.scp,destination:e.destination,servicePath:e.servicePath,edmx:e.edmx,annotations:e.annotations,version:e.version,capService:e.capService,source:e.source,localEdmxFilePath:e.localEdmxFilePath,sapSystem:e.sapSystem??this.getNewSystemOrDestination(e),apiHubConfig:e.apiHubConfig,destinationInstance:e.destinationInstance,destinationAuthType:e.destinationAuthType,ignoreCertError:e.ignoreCertError}}getNewSystemOrDestination(e){return e.newSystem?e.newSystem:e.destination?(0,o.newSapSystemForDestinaton)({destination:e.destination,destinationInstance:e.destinationInstance,destinationAuthType:e.destinationAuthType,credentials:{username:e.destinationUser,password:e.destinationPassword}}):void 0}cleanServiceProperties(e){return["File","Local Cap"].includes(e.source)&&delete e.host,"SAP Business Accelerator Hub"!==e.source&&delete e.apiHubConfig,e}}t.ServiceInquirer=ServiceInquirer,ServiceInquirer._logger=a.DefaultLogger},35677:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,i)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return i(t,e),t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionValidator=void 0;const o=r(43895),c=r(1628),l=r(77090),u=n(r(28887)),d=r(16284),S=s(r(79325)),E=r(73215),_=n(r(75503)),m=n(r(95687));u.default.defaults.adapter="http";class ConnectionValidator{constructor(e=!1){this.validity={},this._isFullURLService=e,void 0===ConnectionValidator._requestLoggerId&&(ConnectionValidator._requestLoggerId=u.default.interceptors.request.use((e=>S.requestLogger(e)),S.errorLogger)),void 0===ConnectionValidator._responseLoggerId&&(ConnectionValidator._responseLoggerId=u.default.interceptors.response.use(S.responseLogger,S.errorLogger),S.setGlobalConfig({logger:e=>E.ServiceInquirer.logger.debug(e),headers:!0}))}isSAPSystem({pathname:e}){return e?.length<2||e.startsWith("/destinations")}async checkSapService(e,t,r,a=!1){const i=(0,o.isAppStudio)();try{const s=!this._isFullURLService&&this.isSAPSystem(e);s&&e.searchParams.append("$top","1");const n=Object.fromEntries(e.searchParams),o=(e.pathname+(s?d.PING_PATH:"")).replace("//","/");return!0===a&&this.setRejectUnauthorized(!a),await new l.ODataClient({system:{url:e.origin,params:n,service:o},credentials:{username:t,password:r},disableSAML:i,ignoreCertError:a}).get(),200}catch(e){if(E.ServiceInquirer.logger.debug(`ConnectionValidator.checkSapService() - error: ${e.message}`),e?.isAxiosError){if(500===e?.response?.status&&i)throw e;return e?.response?.status||e?.code}throw e}finally{this.setRejectUnauthorized(!0)}}async validateUrl({urlString:e,ignorePath:t=!1,authType:r,isServiceUrl:a=!1,ignoreCertError:i=!1,forceReValidation:s=!1}){if(this.isEmptyString(e))return this.resetValidity(),!1;try{const n=this.createUrl(e,t);if(!s&&this.isUrlValidated(e))return this.validity.reachable;if("null"===n.origin)return(0,c.t)("WARNING_INVALID_URL");const o=await this.checkSapService(n,void 0,void 0,i);if(E.ServiceInquirer.logger.debug(`ConnectionValidator.validateUrl() - status: ${o}; authType: ${r};`),this.validity.urlFormat=!0,this._validatedUrl=e,200===o)this.validity.authenticated=!0,this.validity.authRequired=!1;else{if(404===o)return this.validity.reachable=!1,a?c.ErrorHandler.getErrorMsgFromType(c.ERROR_TYPE.ODATA_URL_NOT_FOUND):c.ErrorHandler.getErrorMsgFromType(c.ERROR_TYPE.NOT_FOUND);if(c.ErrorHandler.isCertError(o))return this.validity.reachable=!1,_.default.setCurrentError(c.ErrorHandler.getErrorType(o)),_.default.getValidationErrorHelp(o,!1,c.ERROR_TYPE.CERT);if(c.ErrorHandler.isAuthCode(o)){if(!this.isAuthRequiredBasedOnAuthType(r))return _.default.logErrorMsgs((0,c.t)("ERROR_AUTHENTICATION_CONFIGURATION"))}else{if(c.ErrorHandler.isRedirect(o))return(0,c.t)("WARNING_URL_REDIRECTS");if(404!==o)return c.ErrorHandler.getErrorMsgFromType(c.ERROR_TYPE.CONNECTION,`http code: ${o}`)}}return this.validity.reachable=404!==o,this.validity.reachable}catch(t){if(c.ErrorHandler.getErrorType(t)===c.ERROR_TYPE.CONNECTION)return _.default.logErrorMsgs((0,c.t)("ERROR_SERVICE_URL_NOT_FOUND",{url:e}));this.resetValidity();const r=_.default.getErrorMsg(t);return void 0===r?(0,c.t)("WARNING_INVALID_URL"):r}}isEmptyString(e){return!e||!/\S/.test(e)}createUrl(e,t){return t&&(e=new URL(e).origin),new URL(e)}isUrlValidated(e){return this._validatedUrl===e||(this.resetValidity(),!1)}isAuthRequiredBasedOnAuthType(e){return e&&"NoAuthentication"!==e?(this.validity.authRequired=!1,!1):(this.validity.authRequired=!0,!0)}async isAuthRequired(e=this._validatedUrl,t=this._validatedClient,r=!1){if(!e)return!1;if(!1===this.validity.reachable||!1===this.validity.authRequired)return!1;if(this._validatedUrl===e&&this._validatedClient===t&&void 0!==this.validity.authRequired)return this.validity.authRequired;try{const a=new URL(e);return t&&a.searchParams.append(c.SAP_CLIENT_KEY,t),this.validity.authRequired=c.ErrorHandler.isAuthCode(await this.checkSapService(a,void 0,void 0,r)),this.validity.authRequired}catch(e){return _.default.logErrorMsgs(e),!1}}async validateAuth(e=this._validatedUrl,t,r,a,i=!1){if(!this.validity.reachable||!t||!r)return!1;try{const s=new URL(e);return a&&s.searchParams.append(c.SAP_CLIENT_KEY,a),this.validity.authenticated=200===await this.checkSapService(s,t,r,i),!0===this.validity.authenticated||(0,c.t)("ERROR_AUTHENTICATION")}catch(e){return _.default.getErrorMsg(e)}}getValidity(){return this.validity}resetValidity(){this.validity.urlFormat=!1,delete this.validity.reachable,delete this.validity.authRequired,delete this.validity.authenticated,this._validatedUrl=void 0,this._validatedClient=void 0}setRejectUnauthorized(e){m.default.globalAgent.options&&(m.default.globalAgent.options.rejectUnauthorized=e),m.default.globalAgent.fallbackAgent&&(m.default.globalAgent.fallbackAgent.options.rejectUnauthorized=e)}}t.ConnectionValidator=ConnectionValidator},16284:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SERVICE_TYPE=t.MANUAL_PATH=t.SERVICES_UNAVAILABLE_DUMMY_SYSTEM_NAME=t.PING_PATH=t.CERT_HELP_LINK=void 0;const a=r(77090);t.CERT_HELP_LINK="https://help.sap.com/viewer/17d50220bcd848aa854c9c182d65b699/Latest/en-US/4b318bede7eb4021a8be385c46c74045.html",t.PING_PATH=a.V2_CATALOG_URL_PATH+a.V2_SERVICES_PATH,t.SERVICES_UNAVAILABLE_DUMMY_SYSTEM_NAME="SYSTEM_SERVICES_UNAVAILABLE",t.MANUAL_PATH="MANUAL_PATH",t.SERVICE_TYPE={UI:"UI",NOT_CLASSIFIED:"Not Classified",WEB_API:"WEB_API"}},75503:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=new(r(1628).ErrorHandler);t.default=a},2929:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,i)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionValidator=void 0;var s=r(35677);Object.defineProperty(t,"ConnectionValidator",{enumerable:!0,get:function(){return s.ConnectionValidator}}),i(r(16284),t)},33774:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validateUrl=void 0;const i=r(1628),s=a(r(75503));t.validateUrl=function(e){if(!e)return!1;try{return"null"!==new URL(e).origin||(0,i.t)("WARNING_INVALID_URL")}catch(e){return s.default.getErrorMsg(e)}}}};