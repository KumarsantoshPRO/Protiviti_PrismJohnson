"use strict";exports.id=506,exports.ids=[506],exports.modules={83661:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setAppDefaults=t.setDefaultTemplateSettings=void 0;const o=i(28923),a=n(i(50283)),r=i(17514),s=i(71235);t.setDefaultTemplateSettings=function(e,t){const i=e.settings;if(e.type===r.TemplateType.AnalyticalListPage){const n=e.settings;if(Object.assign(i,{tableType:n.tableType||r.TableType.ANALYTICAL}),t===o.OdataVersion.v4){const t=e.settings;return Object.assign(i,{selectionMode:t.selectionMode||r.TableSelectionMode.NONE}),i}if(t===o.OdataVersion.v2){const t=e.settings;return Object.assign(i,{multiSelect:t.multiSelect,qualifier:t.qualifier,autoHide:t.autoHide,smartVariantManagement:t.smartVariantManagement}),i}}return i},t.setAppDefaults=function(e){var t,i,n,o,p,l,d,u,c;if(!(null===(t=e.app.sourceTemplate)||void 0===t?void 0:t.version)||!(null===(i=e.app.sourceTemplate)||void 0===i?void 0:i.id)){const t=a.default.sync({cwd:__dirname});e.app.sourceTemplate={id:`${null==t?void 0:t.packageJson.name}:${e.template.type}`,version:null==t?void 0:t.packageJson.version,toolsId:null===(n=e.app.sourceTemplate)||void 0===n?void 0:n.toolsId}}return e.app.baseComponent=e.app.baseComponent||(0,s.getBaseComponent)(e.template.type,e.service.version),e.ui5=Object.assign(Object.assign({},e.ui5),{ui5Libs:null===(o=(0,s.getUi5Libs)(e.template.type,e.service.version))||void 0===o?void 0:o.concat(null!==(l=null===(p=e.ui5)||void 0===p?void 0:p.ui5Libs)&&void 0!==l?l:[])}),e.service.localAnnotationsName||(e.service.localAnnotationsName="annotation"),e.template.type===r.TemplateType.OverviewPage&&(e.service.model="mainModel"),e.ui5=null!==(d=e.ui5)&&void 0!==d?d:{},e.ui5.minUI5Version||(e.ui5.minUI5Version=null!==(u=e.ui5.version)&&void 0!==u?u:s.TemplateTypeAttributes[e.template.type].minimumUi5Version[e.service.version]),e.appOptions=null!==(c=e.appOptions)&&void 0!==c?c:{},!1!==e.appOptions.sapux&&(e.appOptions.sapux=!0),e}},77462:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.extendManifestJson=void 0;const o=i(17514),a=i(28923),r=i(71017),s=i(69288),p=n(i(76027));t.extendManifestJson=function(e,t,i,n){var l,d;let u=n.template.type;if(n.service.version===a.OdataVersion.v4&&[o.TemplateType.FormEntryObjectPage,o.TemplateType.AnalyticalListPage,o.TemplateType.ListReportObjectPage,o.TemplateType.Worklist].includes(n.template.type)){u=o.TemplateType.ListReportObjectPage;const e=p.default.coerce(null===(l=n.ui5)||void 0===l?void 0:l.minUI5Version);if(!e||p.default.gte(e,"1.94.0")){const e=n.template.settings.entityConfig;e.contextPath=`/${e.mainEntityName}`,(null===(d=e.navigationEntity)||void 0===d?void 0:d.EntitySet)&&(e.navigationEntity.contextPath=`${e.contextPath}/${e.navigationEntity.Name}`)}}const c=Object.assign(Object.assign({},n.template.settings),{defaultModel:n.service.model,type:n.template.type}),v=[(0,r.join)(i,"common","extend","webapp"),(0,r.join)(i,u,"extend","webapp"),(0,r.join)(i,`v${n.service.version}`,u,"extend","webapp"),(0,r.join)(i,`v${n.service.version}`,"common","extend","webapp")],m=(0,r.join)(t,"webapp","manifest.json");v.forEach((t=>{const i=(0,r.join)(t,"manifest.json");e.exists(i)&&e.extendJSON(m,JSON.parse((0,s.render)(e.read(i),c,{})))}))}},71235:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateTypeAttributes=t.getUi5Libs=t.getBaseComponent=t.escapeFLPText=t.changesPreviewToVersion=t.oldestSupportedUI5Version=void 0;const n=i(17514);t.oldestSupportedUI5Version="1.65.0",t.changesPreviewToVersion="1.78.0";t.escapeFLPText=e=>e.replace(/\\/g,"\\\\").replace(/(")/g,"\\$&");const o="sap/suite/ui/generic/template/lib/AppComponent",a="sap/ovp/app/Component",r="sap/fe/core/AppComponent",s={[n.OdataVersion.v2]:["sap.m","sap.ushell","sap.ui.core","sap.f","sap.ui.comp","sap.ui.generic.app","sap.suite.ui.generic.template"],[n.OdataVersion.v4]:["sap.m","sap.ushell","sap.fe.templates"]},p={[n.OdataVersion.v2]:{[n.TemplateType.AnalyticalListPage]:{baseComponent:o,ui5Libs:[...s[n.OdataVersion.v2]]},[n.TemplateType.ListReportObjectPage]:{baseComponent:o,ui5Libs:[...s[n.OdataVersion.v2]]},[n.TemplateType.OverviewPage]:{baseComponent:a,ui5Libs:[...s[n.OdataVersion.v2],"sap.ovp","sap.ui.rta","sap.ui.layout"]},[n.TemplateType.Worklist]:{baseComponent:o,ui5Libs:[...s[n.OdataVersion.v2],"sap.collaboration"]}},[n.OdataVersion.v4]:{[n.TemplateType.ListReportObjectPage]:{baseComponent:r,ui5Libs:s[n.OdataVersion.v4]},[n.TemplateType.FormEntryObjectPage]:{baseComponent:r,ui5Libs:s[n.OdataVersion.v4]},[n.TemplateType.AnalyticalListPage]:{baseComponent:r,ui5Libs:s[n.OdataVersion.v4]},[n.TemplateType.Worklist]:{baseComponent:r,ui5Libs:s[n.OdataVersion.v4]},[n.TemplateType.OverviewPage]:{baseComponent:a,ui5Libs:[...s[n.OdataVersion.v4],"sap.ovp","sap.ui.rta","sap.ui.layout"]},[n.TemplateType.FlexibleProgrammingModel]:{baseComponent:r,ui5Libs:[...s[n.OdataVersion.v4],"sap.fe.templates"]}}};t.getBaseComponent=function(e,t){var i;return null===(i=p[t][e])||void 0===i?void 0:i.baseComponent},t.getUi5Libs=function(e,t){var i;return null===(i=p[t][e])||void 0===i?void 0:i.ui5Libs},t.TemplateTypeAttributes={[n.TemplateType.Worklist]:{supportedODataVersions:[n.OdataVersion.v2,n.OdataVersion.v4],minimumUi5Version:{[n.OdataVersion.v2]:t.oldestSupportedUI5Version,[n.OdataVersion.v4]:"1.99.0"}},[n.TemplateType.ListReportObjectPage]:{supportedODataVersions:[n.OdataVersion.v2,n.OdataVersion.v4],minimumUi5Version:{[n.OdataVersion.v2]:t.oldestSupportedUI5Version,[n.OdataVersion.v4]:"1.84.0"}},[n.TemplateType.AnalyticalListPage]:{supportedODataVersions:[n.OdataVersion.v2,n.OdataVersion.v4],minimumUi5Version:{[n.OdataVersion.v2]:t.oldestSupportedUI5Version,[n.OdataVersion.v4]:"1.90.0"}},[n.TemplateType.OverviewPage]:{supportedODataVersions:[n.OdataVersion.v2,n.OdataVersion.v4],minimumUi5Version:{[n.OdataVersion.v2]:t.oldestSupportedUI5Version,[n.OdataVersion.v4]:"1.96.8"}},[n.TemplateType.FormEntryObjectPage]:{supportedODataVersions:[n.OdataVersion.v4],minimumUi5Version:{[n.OdataVersion.v4]:"1.90.0"}},[n.TemplateType.FlexibleProgrammingModel]:{supportedODataVersions:[n.OdataVersion.v4],minimumUi5Version:{[n.OdataVersion.v4]:"1.94.0"}}}},86209:function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,a){function r(e){try{p(n.next(e))}catch(e){a(e)}}function s(e){try{p(n.throw(e))}catch(e){a(e)}}function p(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,s)}p((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.t=t.initI18n=void 0;const a=o(i(30681)),r=o(i(63133)),s="fiori-freestyle-writer";function p(){return n(this,void 0,void 0,(function*(){yield a.default.init({resources:{en:{[s]:r.default}},lng:"en",fallbackLng:"en",defaultNS:s,ns:[s]})}))}t.initI18n=p,t.t=function(e,t){return a.default.t(e,t)},p().catch((()=>{}))},67233:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)},a=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,a){function r(e){try{p(n.next(e))}catch(e){a(e)}}function s(e){try{p(n.throw(e))}catch(e){a(e)}}function p(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,s)}p((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.generate=t.V2_FE_TYPES_AVAILABLE=void 0;const s=i(71017),p=i(69288),l=i(16948),d=i(3905),u=i(28923),c=i(73143),v=i(65911),m=r(i(28869)),f=i(17514),y=i(29043),g=i(83661),O=i(71235),T=i(77462),V=r(i(76027));t.V2_FE_TYPES_AVAILABLE="1.108.0",t.generate=function(e,i,n){var o,r,b,h,P,_,j,I,w,x,L,A,S,U,E;return a(this,void 0,void 0,(function*(){const a=(0,m.default)(i);(0,y.validateRequiredProperties)(a),(0,g.setAppDefaults)(a),n=yield(0,d.generate)(e,a,n),a.template.settings=(0,g.setDefaultTemplateSettings)(a.template,a.service.version),(0,y.validateApp)(a),yield(0,u.generate)(e,a.service,n);const M=V.default.coerce(null===(o=a.ui5)||void 0===o?void 0:o.version),C={changesPreview:!!(null===(r=a.ui5)||void 0===r?void 0:r.version)&&V.default.lt(M,O.changesPreviewToVersion),changesLoader:a.service.version===u.OdataVersion.v2},k=(0,s.join)(__dirname,"..","templates");let N=["**/*.ts"];!0===(null===(b=a.appOptions)||void 0===b?void 0:b.typescript)&&(N=function(e,i){var n;let o=[];const a=!!(null===(n=e.ui5)||void 0===n?void 0:n.version)&&V.default.gte(i,t.V2_FE_TYPES_AVAILABLE);return o=["**/*.js"],e.service.version===u.OdataVersion.v2?a&&o.push("**/ui5.d.ts"):e.template.type!==f.TemplateType.OverviewPage&&o.push("**/ui5.d.ts"),o}(a,M)),n.copyTpl((0,s.join)(k,"common","add","**/*.*"),e,Object.assign(Object.assign({},a),{templateOptions:C,escapeFLPText:O.escapeFLPText}),void 0,{globOptions:{ignore:N,dot:!0}});const $=(0,s.join)(e,"package.json");if(n.extendJSON($,JSON.parse((0,p.render)(n.read((0,s.join)(k,"common","extend","package.json")),a,{}))),a.template.type===f.TemplateType.FlexibleProgrammingModel){const t=a.template.settings;(0,l.generateCustomPage)(e,{entity:t.entityConfig.mainEntityName,name:t.pageName,minUI5Version:null===(h=a.ui5)||void 0===h?void 0:h.minUI5Version,typescript:null===(P=a.appOptions)||void 0===P?void 0:P.typescript},n)}else{const t=(0,s.join)(k,`v${null===(_=a.service)||void 0===_?void 0:_.version}`);[(0,s.join)(t,"common","add"),(0,s.join)(t,a.template.type,"add")].forEach((t=>{n.copyTpl((0,s.join)(t,"**/*.*"),e,a,{},{ignoreNoMatch:!0,globOptions:{ignore:N,dot:!0}})}))}(0,T.extendManifestJson)(n,e,k,a);const F=JSON.parse(n.read($)),D=!(!a.appOptions.addTests||(null===(j=a.service)||void 0===j?void 0:j.version)!==u.OdataVersion.v4||!(null===(I=a.service)||void 0===I?void 0:I.metadata)&&a.service.type!==u.ServiceType.CDS);return F.scripts=Object.assign(F.scripts||{},Object.assign({},(0,v.getPackageJsonTasks)({localOnly:!(null===(w=a.service)||void 0===w?void 0:w.url),addMock:!!(null===(x=a.service)||void 0===x?void 0:x.metadata),addTest:D,sapClient:null===(L=a.service)||void 0===L?void 0:L.client,flpAppId:a.app.flpAppId,startFile:null===(A=null==i?void 0:i.app)||void 0===A?void 0:A.startFile,localStartFile:null===(S=null==i?void 0:i.app)||void 0===S?void 0:S.localStartFile,generateIndex:null===(U=a.appOptions)||void 0===U?void 0:U.generateIndex}))),n.writeJSON($,F),D&&(0,c.generateOPAFiles)(e,{htmlTarget:(null===(E=a.appOptions)||void 0===E?void 0:E.generateIndex)?"index.html":`test/flpSandbox.html?sap-ui-xx-viewCache=false#${a.app.flpAppId}`},n),n}))},o(i(17514),t)},65911:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPackageJsonTasks=void 0;const n=i(86209);t.getPackageJsonTasks=function({localOnly:e,addMock:t=!0,addTest:i=!1,sapClient:o,flpAppId:a="",startFile:r,localStartFile:s,generateIndex:p=!0}){const l=[];o&&l.push(["sap-client",`${o}`]),l.push(["sap-ui-xx-viewCache","false"]);let d=new URLSearchParams(l).toString();d=d?`?${d}`:"";const u=`${d}${a?`#${a}`:""}`,c={start:e?`echo \\"${(0,n.t)("info.mockOnlyWarning")}\\"`:`fiori run --open "${r||"test/flpSandbox.html"}${u}"`,"start-local":`fiori run --config ./ui5-local.yaml --open "${s||"test/flpSandbox.html"}${u}"`};return p&&(c["start-noflp"]=e?`echo \\"${(0,n.t)("info.mockOnlyWarning")}\\"`:`fiori run --open "index.html${d}"`),t&&(c["start-mock"]=`fiori run --config ./ui5-mock.yaml --open "test/flpSandbox.html${u}"`),i&&(c["int-test"]='fiori run --config ./ui5-mock.yaml --open "test/integration/opaTests.qunit.html"'),c}},17514:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OdataVersion=t.TableSelectionMode=t.TableType=t.ValidationError=t.TemplateType=void 0,function(e){e.Worklist="worklist",e.ListReportObjectPage="lrop",e.AnalyticalListPage="alp",e.OverviewPage="ovp",e.FormEntryObjectPage="feop",e.FlexibleProgrammingModel="fpm"}(t.TemplateType||(t.TemplateType={}));class ValidationError extends Error{constructor(e){super(`Validation error: ${e}`),this.name=this.constructor.name}}t.ValidationError=ValidationError,function(e){e.GRID="GridTable",e.ANALYTICAL="AnalyticalTable",e.RESPONSIVE="ResponsiveTable"}(t.TableType||(t.TableType={})),function(e){e.NONE="None",e.AUTO="Auto",e.MULTI="Multi",e.SINGLE="Single"}(t.TableSelectionMode||(t.TableSelectionMode={}));var n=i(28923);Object.defineProperty(t,"OdataVersion",{enumerable:!0,get:function(){return n.OdataVersion}})},29043:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validateRequiredProperties=t.validateApp=void 0;const o=n(i(76027)),a=i(71235),r=i(86209),s=i(17514);t.validateApp=function(e){var t,i,n,p,l,d,u,c;if(e.service.version&&!a.TemplateTypeAttributes[e.template.type].supportedODataVersions.includes(e.service.version))throw new s.ValidationError((0,r.t)("error.unsupportedOdataVersion",{serviceVersion:e.service.version,templateType:e.template.type}));let v,m=null;if((null===(t=e.ui5)||void 0===t?void 0:t.version)&&(m=o.default.coerce(null===(i=e.ui5)||void 0===i?void 0:i.version),!m))throw new s.ValidationError((0,r.t)("error.invalidUI5Version",{versionProperty:"version",ui5Version:null===(n=e.ui5)||void 0===n?void 0:n.version}));const f=a.TemplateTypeAttributes[e.template.type].minimumUi5Version[e.service.version];if(null===(p=e.ui5)||void 0===p?void 0:p.minUI5Version){if(v=o.default.coerce(null===(l=e.ui5)||void 0===l?void 0:l.minUI5Version),!v)throw new s.ValidationError((0,r.t)("error.invalidUI5Version",{versionProperty:"minUI5Version",ui5Version:null===(d=e.ui5)||void 0===d?void 0:d.minUI5Version}))}else v=o.default.coerce(f);if(m&&o.default.lt(m,f))throw new s.ValidationError((0,r.t)("error.unsupportedUI5Version",{versionProperty:"version",ui5Version:null===(u=e.ui5)||void 0===u?void 0:u.version,templateType:e.template.type,minRequiredUI5Version:f}));if(o.default.lt(v,f))throw new s.ValidationError((0,r.t)("error.unsupportedUI5Version",{versionProperty:"minUI5Version",ui5Version:null===(c=e.ui5)||void 0===c?void 0:c.minUI5Version,templateType:e.template.type,minRequiredUI5Version:f}))},t.validateRequiredProperties=function(e){if(!e.service)throw new s.ValidationError((0,r.t)("error.missingRequiredProperty",{propertyName:"FioriElementsApp.service"}))}},63133:e=>{e.exports=JSON.parse('{"info":{"mockOnlyWarning":"This application was generated with a local metadata file and does not reference a live server. Please add the required server configuration or start this application with mock data using the target: npm run start-mock"},"error":{"unsupportedOdataVersion":"OData Version of the specified service: {{ serviceVersion }}, is not supported by the template type: {{ templateType }}","unsupportedUI5Version":"Specified UI5 property \'{{ versionProperty }}\': {{ ui5Version }}, is not supported by the template type: {{ templateType }}. Please specify {{minRequiredUI5Version}} or above.","invalidUI5Version":"Specified UI5 property \'{{ versionProperty }}\': {{ ui5Version }}, is not a valid semantic version","missingRequiredProperty":"A property required for application generation is not specified: \'{{ propertyName }}\'."}}')}};