exports.id=475,exports.ids=[475],exports.modules={71435:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FE_APP_CONFIG_SUPPORTED_VERSIONS=t.FE_APP_CONFIG_CURRENT_VERSION=t.applicationTitle=void 0;const a=n(66897);t.applicationTitle=(0,a.t)("APPLICATION_TITLE"),t.FE_APP_CONFIG_CURRENT_VERSION="0.2",t.FE_APP_CONFIG_SUPPORTED_VERSIONS=["0.1",t.FE_APP_CONFIG_CURRENT_VERSION]},23401:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.featuresEnabled=void 0;const a=n(37705),o=n(1628);t.featuresEnabled={internal:()=>(0,a.isInternalFeaturesSettingEnabled)(),lcap:()=>(0,a.isFeatureEnabled)(o.LCAP_FEATURE_ID),experimentalFeatures:()=>(0,a.isFeatureEnabled)(o.EXPERIMENTAL_FEATURES)}},91902:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(71435),t),o(n(98234),t),o(n(12206),t),o(n(23401),t)},98234:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},12206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.capitalize=t.getReadMeLabels=t.getUI5Uri=void 0;const a=n(1628);t.getUI5Uri=function(e=""){const t=process.env.UI5_CDN_URL?.replace(/\/*$/,"");return e.includes("snapshot")?a.UI5_VERSION_PROPS.SNAPSHOT_URL:t||a.UI5_VERSION_PROPS.OFFICIAL_URL},t.getReadMeLabels=function(e,t,n,o){let r;return"SAP System"===e&&(r=`SAP System (${(0,a.t)("LABEL_SAP_SYSTEM_SOURCE_TYPE_"+(o?"SCP":"ON_PREM"))})`),{dataSourceLabel:r||e,projectTypeLabel:`${(0,a.t)(`LABEL_PROJECT_TYPE_${t}`,{odataVersion:n})}`}},t.capitalize=function(e){return e.replace(/\w\S*/g,(e=>e.replace(/^\w/,(e=>e.toUpperCase()))))}},94368:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationServiceImpl=void 0;const a=n(72307),o=n(36712),r=n(26853),i=n(54993),s=n(61625),l=n(35504),p=n(83554),c=n(52679),u=n(32217),m=n(27246),d=n(68751),y=n(84204),g=n(85727),f=n(75224),h=n(3524),T=n(86337),P=n(41810),E=n(33261),v=n(18007),b=n(94872);t.AnnotationServiceImpl=class AnnotationServiceImpl{createNewContext(e){this.context={metadataUri:this.metadataUri,fileCache:this.fileCache,namespaceFileUriMap:{metadata:{},annotations:{}},metadata:e,navigationSourceMap:{},annotations:{},referenceLocations:{},metadataReferenceLocations:{},pathExpressions:{targetPath:{},path:{},annotationPath:{},pathCc:{},propertyPathCc:{},annotationPathCc:{}},annotationFileSequence:this.annotationFileSequence,labeledElements:{},vocabularies:this.vocabularyService||new u.VocabularyService(this.supportSplit),useSnippets:this.useSnippets,i18n:[],supportSplit:this.supportSplit,splitAnnotationKeys:this.supportSplit?{}:null,omitRedundantTypesInSnippets:this.omitRedundantTypesInSnippets,completionOnly:this.completionOnly,compatiblePrimitiveTypesMap:{}}}check(e,t){const n=(0,l.getAllNamespacesAndReferences)(e?.namespace,e.references),o=(0,P.getAliasInformation)(n,this.context.metadata.getNamespaces());let r=[];const s=new Map,p=this.logger;if(!this.context.metadata.isCds&&t!==this.context.metadata.fileUri){r=this.checkNamespace(e,t);(0,m.createUnusedNamespaceDiagnostic)(o,e).forEach((e=>r.push(e)))}const u=new Map,d=[];return e.targets.forEach((e=>{try{let t;if(!this.context.supportSplit){(0,P.resolveName)(e.name,o.aliasMapMetadata).namespace||o.aliasMapMetadata[(0,P.resolveName)(e.name).namespace]||(t=this.checkTargetNamespaceReferenced(e,o))}if(t)r.push(t);else{const t=(0,l.lookupTarget)(this.context,e.name,o);if((e.terms||[]).forEach((t=>{"Common.TextArrangement"===t?.attributes?.Term?.value?u.set(e.name,t.attributes.Term.valueRange?t.attributes.Term.valueRange:t.attributes.Term.nameRange):t.attributes&&"Common.Text"===t.attributes.Term.value&&d.push(e.name)})),t.caseIssue){const n=t.caseIssue,a=n.wrong;let i=n.correct;const s=e.name.indexOf(a),l=JSON.parse(JSON.stringify(e.nameRange));s>0&&(l.start.character+=s),l.end.character=l.start.character+a.length,n.correct.includes(".")&&a.toUpperCase()!==i.toUpperCase()&&(i=(0,P.toAliasQualifiedName)(n.correct,o));const p=(0,m.createNameCasePathValueDiagnostic)(a,i,l);r.push(p)}else if(t.errorMessage){const n=t.resolvedPath&&e.name.startsWith(t.resolvedPath)?t.resolvedPath.length+1:0;let o=e.nameRange;n>0&&(o=JSON.parse(JSON.stringify(e.nameRange)),o.start.character+=n),r.push({message:t.errorMessage,severity:a.DiagnosticSeverity.Error,range:o,rule:"ignore-target-validation"})}else{const n=(new c.CheckTrace).registerTarget(t.resolvedPath);(e.terms||[]).forEach((a=>{r=r.concat((0,l.checkAnnotationValue)(this.context,a,(0,P.getPathBaseMetadataElement)(this.context.metadata,e.name,o),t.metadataElement,t.resolvedPathWithoutAlias,o,s,n,p))}))}}}catch(t){this.logger.error(`AnnotationService: error checking target "${e.name}": ${t}`)}})),r.filter((e=>!!e?.data?.caseCheck)).forEach((e=>{const t=(0,i.getHintForCaseIssues)(this.context,e.data.caseCheck,e.data);t&&(e.message.endsWith(".")||(e.message+="."),e.message+=` ${t}`)})),u.forEach(((e,t)=>{d.includes(t)||r.push({message:T.i18n.t("common_text_should_be_provided"),severity:a.DiagnosticSeverity.Error,range:e})})),r}checkTargetNamespaceReferenced(e,t){let n;const a=(0,P.resolveName)(e.name).namespace;return this.context.metadata.getNamespaces().has(a)&&!t.aliasMapMetadata[a]&&(n=(0,m.createUnknownMetadataDiagnostic)(a,e.nameRange||e.range,this.metadataUri)),n}checkNamespace(e,t){const n=[];return(0,l.getAllNamespacesAndReferences)(e?.namespace,e.references).forEach((o=>{let r=!0,i="",s="",p=[],c="";const u=this.context.vocabularies;if("namespace"===o.type){const n=e.namespace;p=this.haveDuplicateNamespace(n.name,t),i=p.join(", "),c=u.getVocabularies().has(n.name)?u.getVocabularies().get(n.name).defaultAlias:"",r=(0,l.isValidNamespace)(n.name)}if(this.context.metadata.getNamespaces().has(o.name)||u.getVocabularies().has(o.name))c?s=T.i18n.t("Cannot_use_a_reserved_namespace_Namespace_is_reserved_for_0_vocabulary",{namespace:c}):p.length>0&&(s=T.i18n.t("Duplicate_schema_namespace_namespace_is_already_used_in_0",{fileNames:i}));else if(r)if("namespace"!==o.type){const e=[...this.context.metadata.getNamespaces()].join(", ");s=T.i18n.t("Namespace_for_the_metadata_must_match_the_one_defined_in_the_metadata_file_0",{metadataFile:e})}else p.length>0&&(s=T.i18n.t("Duplicate_schema_namespace_namespace_is_already_used_in_0",{fileNames:i}));else s=T.i18n.t("Namespace_0_should_be_a_sequence_of_type_SimpleIdentifier_separated_by_dot",{namespace:o.name});s&&n.push({message:s,severity:a.DiagnosticSeverity.Error,range:o.nameRange})})),n}haveDuplicateNamespace(e,t){const n=[];return Object.keys(this.context.fileCache).forEach((a=>{a!==t&&this.context.fileCache[a].namespace===e&&n.push(a.substring(a.lastIndexOf("/")+1))})),n}checkServiceFiles(){this.context.annotationFileSequence.forEach((e=>{const t=this.context.fileCache[e].serviceFile;if(this.openedFiles.get(e)){const n=this.check(t.content,e);this.setMessagesForFile(t.uri,n)}}))}handleServiceError(e,t){const n=`Error in AnnotationService. ${e}(): ${t}`;this.logger.error(n)}getLocationsForReferencedAnnotations(e,t,n,a,o){let r="";const i=[],s=[];let p="",c=!1;const u={context:this.context,aliasInfo:a,pathBase:n},{segments:m}=(0,f.determineSegmentsFromPath)(e,u);(m||[]).forEach((e=>{if(r)s.push(e);else{const t=e.indexOf("@");t<0?i.push(e):t>1&&(i.push(e.slice(0,t)),c=!0),t>=0&&(r=e.slice(t+1))}}));const d=i.join("/");if(r){const e=(0,l.lookupTarget)(this.context,d,a)?.metadataElement;if(e)return p=!e.targetKinds.includes(g.NAVIGATION_PROPERTY_KIND)||c||t?e.path:e.structuredType,{locations:this.findAllLocations(this.context,e,p,o,r,s)}}return{mdPathValue:d}}getPathValueForGotoDefinition(e,t,n){let a="",o=!1,r=!1;const i=e.elementContext,p=(0,s.getPathTargetInElement)(i?.path,i?.parentElement);let c="";return e.annotation&&(c=function(e,t){let n="@"+(0,P.getElementAttributeValue)(e,"Term");const a=(0,P.getElementAttributeValue)(e,"Qualifier");a&&(n=n+"#"+a);const o=(0,s.getPathSegments)(t);let r=e;for(let e=0;e<o.length;e++)"content"===o[e]&&(r=r.content[o[e+1]],(0,P.getElementAttributeValue)(r,"Property")&&(n=n+"/"+r.attributes.Property.value));return n}(e.annotation,e.path)),!e.targetPath||function(e,t){return e.isAttributeValue&&e.attribute.name.endsWith("Path")||e.isTextSubNode&&t?.name?.endsWith("Path")}(p,i?.parentElement)?a=t:!function(e){return e.isAttributeValue&&["Term","Qualifier","Property"].includes(e.attribute.name)}(p)?function(e,t){return e.isAttributeValue&&"String"===e.attribute.name||e.isTextSubNode&&"String"===t?.name}(p,i?.parentElement)&&({pathValue:a,isTemplateVariable:r,isActionName:o}=(0,l.getPathValueForStringProperty)(this.metadataService,t,e,p,n,c)):a=c,{pathValue:a,isActionName:o,isTemplateVariable:r}}constructor(e,t,n,a,r,i){this.maxNumberOfDiagnostics=100,this.context=null,this.useSnippets=!1,this.supportSplit=!1,this.omitRedundantTypesInSnippets=!1,this.completionOnly=!1,this.openedFiles=new Map,this.fileCache={},this.annotationFileSequence=[],this.setMessagesForFile=e,this.useSnippets=t,this.supportSplit=i&&i.supportSplit,this.omitRedundantTypesInSnippets=i&&i.omitRedundantTypesInSnippets,this.completionOnly=i&&i.completionOnly,this.vocabularyService=i&&i.vocabularyService,this.metadataService=n,this.metadataUri=a,this.logger=r,this.createNewContext(n),this.completionItemCategorySortingMap=(new Map).set(o.CompletionItemCategory.ValueElement,"A").set(o.CompletionItemCategory.ValueElementSet,"A").set(o.CompletionItemCategory.PathKind,"B").set(o.CompletionItemCategory.Annotation,"C").set(o.CompletionItemCategory.Path,"C").set(o.CompletionItemCategory.Annotation,"D").set(o.CompletionItemCategory.Apply,"E").set(o.CompletionItemCategory.DynamicExpressionName,"F").set(o.CompletionItemCategory.Unknown,"Z")}loadService(e,t){try{this.createNewContext(this.metadataService),(0,v.addMetadataToContext)(this.context),e.forEach((e=>{e&&e.content&&(0,p.addServiceFileToContext)(this.context,e)})),this.context.i18n=void 0===t?[]:t;const n=(0,i.getAvailableEntitySetProperties)(this.context.metadata);this.context.availableEntitySetPropertyMap=n.entitySetPropertyMap,this.context.serviceNamespaceMap=n.serviceNameSpaceMap}catch(e){this.handleServiceError("loadService",e)}}getPositionContext(e,t,n,a=!1){const o=JSON.parse(JSON.stringify(e)),r=n||(0,P.findPathToPosition)(o,t,a)?.path;if(void 0===r)return null;const i=(0,P.getPositionData)(o,r);if(!i.found)return null;const s=(0,l.getAllNamespacesAndReferences)(o?.namespace,o.references),p=(0,P.getAliasInformation)(s,this.context.metadata.getNamespaces());return{positionData:i,aliasInfo:p,cursorContext:(0,f.resolvePathToCursorContext)(this.context,o,p,i.path,this.logger)}}complete(e,t,n=!1,a,o){try{const r=t?{line:t.line,character:t.character}:t,i=this.getPositionContext(e,r,a,!0);if(!i)return[];const{aliasInfo:p,positionData:c,cursorContext:u}=i;Object.keys(this.context.fileCache).forEach((t=>{this.context.fileCache[t].serviceFile.content===e&&(u.fileUri=t)}));let m=[];const g=c.startString,f={startString:g,remainingString:c.remainingString,position:r};if(u.targetPath)if(u.annotation||!n&&!u.path){const e=(0,s.getPathTargetInElement)(u.path,u.annotation);if(e.element||e.attribute||e.isName||e.isAttributeName||e.isTextSubNode||e.isWhitespacePosition)if(e.isAttributeValue&&"Term"===e.attribute.name){const{targetKinds:e,targetType:t,targetTypeAssocKey:n,applicableTermsConstraint:a}=(0,l.getTargetInfoFromCursorContext)(u,this.context,p);e.length&&(m=(0,l.completeTerm)(this.context,e,t,n,p,a))}else m=!e.isAttributeName||e.isSubNode||!u.annotation||"Term"!==e.attribute.name&&(0,P.getElementAttribute)(u.annotation,"Term")?(0,l.completeAnnotationValue)(this.context,u,g,p,this.logger,d.completeComplexAnnotationSnippet):[{name:"Term",text:"Term"}];else m=[]}else m=(0,d.completeComplexAnnotationSnippet)(u,this.context,p,this.logger);else{if(""!==u.targetPath)return[];m=(0,l.completeTarget)(this.context,g,p)}if(o)if(u.annotation){const e=(0,P.getElementAttribute)(u.annotation,"Term")?.value;o.embeddingTerm=(0,y.replaceWithDefaultAlias)(e,p,this.context.vocabularies)}else o.embeddingTerm="";return this.assembleCompletionItem(m,f,p,o)}catch(e){return this.handleServiceError("complete",e),[]}}addSortingInfo(e,t){const n=e.sorting||{},a=[];a.push(this.completionItemCategorySortingMap.get(e.category||o.CompletionItemCategory.Unknown)||"Z"),a.push(n.isUIVocabulary),a.push(n.isAlias),a.push(!n.isNotMandatory),a.push(!n.isAbsolutePath),a.push((n.isAnnotationPath||!e.text.includes("@"))&&!n.isAssociation),a.push(!n.isGroup),t.sortText=a.map((e=>["boolean","undefined","null"].includes(typeof e)?e?"0":"1":e)).join("")}assembleCompletionItem(e,t,n,r){const i=[];return e.forEach((e=>{const s={label:e.text,deprecated:e.deprecated,commitCharacters:e.commitCharacters,sortText:e.sortText,documentation:e.documentation,filterText:e.filterText||e.text,insertText:e.insertText||e.text};this.addSortingInfo(e,s);let p=a.CompletionItemKind.Class;if(e.type===o.CompletionItemType.Snippet?(p=a.CompletionItemKind.Snippet,e.category===o.CompletionItemCategory.ValueElementSet?p=a.CompletionItemKind.Constant:e.category===o.CompletionItemCategory.Annotation?p=a.CompletionItemKind.Class:e.category===o.CompletionItemCategory.DynamicExpressionName?p=a.CompletionItemKind.Operator:e.category===o.CompletionItemCategory.Apply?p=a.CompletionItemKind.Function:(e.sorting||{}).isNotMandatory&&(p=a.CompletionItemKind.Method)):e.category===o.CompletionItemCategory.EnumerationMember&&(p=a.CompletionItemKind.Enum),s.kind=p,e.affectedRange?s.textEdit=a.TextEdit.replace(e.affectedRange,e.insertText||e.text):t&&e.type!==o.CompletionItemType.Snippet&&(e.affectedRange=(0,l.getAffectedRange)(e.commitCharacters,t),s.textEdit=a.TextEdit.replace(e.affectedRange,e.insertText||e.text)),s.insertText=e.insertText||e.text,e.data&&e.type===o.CompletionItemType.Snippet&&(s.insertTextFormat=a.InsertTextFormat.Snippet,s.data={generic:e},e.data.documentation&&e.data.documentation.length>0&&(s.documentation={kind:a.MarkupKind.Markdown,value:e.data.documentation.join("\n")})),!e.documentation&&e.category&&e.type!==o.CompletionItemType.Snippet){let t;const o=e.id;"Property"===e.category?t=e.text:"EnumerationMember"===e.category&&(t=e.text.split("/").pop());const r=this.context.vocabularies.getDocumentation(o,t,n),i=(0,l.appendNameToDocumentationAndTruncate)(s.label,r,this.context,!0,n);s.label=i||s.label,r.length>0&&(s.documentation={kind:a.MarkupKind.Markdown,value:r.join("\n")})}if(r){const t=Object.assign({},r);e.category===o.CompletionItemCategory.Term?(t.embeddingTerm="",t.category=o.CompletionItemCategory.Term,t.completionText=(0,y.replaceWithDefaultAlias)(e.text,n,this.context.vocabularies)):e.category===o.CompletionItemCategory.Annotation?(t.completionText=(0,y.replaceWithDefaultAlias)(e.text,n,this.context.vocabularies),t.category=o.CompletionItemCategory.Term):(t.completionText=e.text,t.category=e.category?e.category:o.CompletionItemCategory.Unknown),s.command={command:"sap.ux.annotationModeler.completionSelection",title:"completion selected item title",arguments:[t]}}i.push(s)})),i}hover(e,t,n){try{const a=t?{line:t.line,character:t.character}:t,o=this.context.fileCache[e].serviceFile,r=this.getPositionContext(o.content,a,n);if(!r||r.positionData.path.startsWith("$['references']"))return null;const{aliasInfo:i,cursorContext:p}=r;if(p.targetPath){if(null===p.annotation)return null}else if(""===p.targetPath){const e=o.content;let t;const n=(0,s.getPathSegments)(r.positionData.path);return n.pop(),n.forEach(((n,a)=>{t=0===a?e[n]:t[n]})),(0,l.hoverTarget)(this.context,t,i)}const c=(0,s.getPathTargetInElement)(p.path,p.annotation);return c.isAttributeValue&&"Term"===c.attribute.name?(0,l.hoverTerm)(this.context,c,i):(0,l.hoverAnnotationValue)(this.context,p,i,a,this.logger)}catch(e){return this.handleServiceError("hover",e),null}}hoverTrusted(e,t){try{const n=t?{line:t.line,character:t.character}:t,a=this.context.fileCache[e].serviceFile,o=this.getPositionContext(a.content,n);if(!o||o.positionData.path.startsWith("$['references']"))return[];const{aliasInfo:r,cursorContext:i}=o;if(i.targetPath&&null!==i.annotation){const t=(0,s.getPathTargetInElement)(i.path,i.annotation);if(t.isAttributeValue&&"Term"===t.attribute.name)return(0,l.hoverTermTrusted)(this.context,e,t,r)}return[]}catch(e){return this.handleServiceError("HoverTrusted",e),null}}getReferencesIndex(){const e=new Map;return Object.keys(this.context.metadataReferenceLocations).forEach((t=>{Object.keys(this.context.metadataReferenceLocations[t]).forEach((n=>{let a=this.context.metadata.getMetadataElement(n);if(function(e,t){if(!t?.isEntityType||!t?.structuredType)return!1;if(!t.targetKinds.some((e=>[g.TYPE_DEFINITION_KIND,g.ENUM_TYPE_KIND,g.COMPLEX_TYPE_KIND,g.TERM_KIND,g.ENTITY_TYPE_KIND,g.ACTION_KIND,g.FUNCTION_KIND,g.ASSOCIATION_KIND,g.ENTITY_CONTAINER_KIND,g.PROPERTY_KIND,g.NAVIGATION_PROPERTY_KIND,g.ENTITY_SET_KIND,g.SINGLETON_KIND,g.ACTION_IMPORT_KIND,g.FUNCTION_IMPORT_KIND,g.ASSOCIATION_SET_KIND,g.COLLECTION_KIND].includes(e))))return!1;const n=t.path.split("/")[0];return e.getMetadataElement(n)?.content[0]?.name===t.name}(this.context.metadata,a)&&(a=this.context.metadata.getMetadataElement(a.structuredType)),!a)return;const o=a.originalName||a.path,r=this.context.metadata.getMetadataElementLocations(a.path)?.[0];!e.has(o)&&r&&e.set(o,{name:o,definition:r,references:[]}),e.get(o).references.push(...this.context.metadataReferenceLocations[t][n].values())}))})),[...e.values()]}getReferences(e,t,n,a){const o=this.context.fileCache[e];if(!o)return;const r=o.serviceFile,s=this.getPositionCopy(t),p=this.getPositionContext(r.content,s,n);if(!p)return[];const{aliasInfo:c,cursorContext:u}=p;if(u.fileUri=e,u.applyContext){const e=(0,f.getTemplateVariableLocations)(u);if(e)return e}let m,d,y="";if(u.targetPath){const e=(0,l.resolvePath)(u.targetPath,c);if(m=(0,i.getMdElementForMdPath)(e,this.context.metadata),!m)return[];const t=(0,P.getElementAttributeValue)(u.annotation,"Term");d=(0,P.resolveName)(t,c.aliasMap),y=this.isCallForVirtualPropertyName(u,d,s)}return y?(0,l.findVirtualPropertyReferences)(this.context,c,m.path,y):this.isCallForTermReferences(u,d)?this.getTermReferences(u,m.path,d,e):this.getMdReferencesAtCursor(t,p,a)}isCallForVirtualPropertyName(e,t,n){if("com.sap.vocabularies.Analytics.v1.AggregatedProperties"===t.qName){const t=(0,E.getVirtualPropertyRecordByPosition)(e.annotation,n);if(t){const e=(0,E.getRecordPropertyElement)(t,"Name");if(e)return(0,E.getPropertyStringValue)(e)}}return""}isCallForTermReferences(e,t){if(!e.targetPath)return!1;let n=!0;const a=(0,s.getPathTargetInElement)(e.path,e.annotation);return a.isAttributeValue||(n=!1),n&&!["Term","Qualifier"].includes(a.attribute.name)&&(n=!1),n&&!t.qName&&(n=!1),n}getMdReferencesAtCursor(e,t,n){const a=t.cursorContext.fileUri;let o=this.getDefinitionLocationInternal(a,t)?.mdPathValue;if(o||this.context.supportSplit||(o=(0,b.findReferencedMdElementByPosition)(this.context,a,e)),!o)return[];const r=(0,l.lookupTarget)(this.context,o,t.aliasInfo)?.metadataElement?.path||"",s=[];if(Object.keys(this.context.metadataReferenceLocations).forEach((e=>{this.context.metadataReferenceLocations[e][r]&&s.push(...this.context.metadataReferenceLocations[e][r].values())})),n){const e=(0,i.getMdElementForMdPath)(o,this.context.metadata);s.unshift(...this.context.metadata.getMetadataElementLocations(e?.path))}return s}collectTargetPathFromGhostFiles(e,t,n){if(this.context.fileCache["!"+t]){const a=(0,P.getElementAttributeValue)(n.annotation,"Term"),o=this.context.fileCache["!"+t].serviceFile?.content?.targets;e.push(...(o||[]).filter((e=>(e.terms||[]).findIndex((e=>(0,P.getElementAttributeValue)(e,"Term")===a&&(0,P.positionContained)((0,P.getElementAttribute)(e,"Term").valueRange,(0,P.getElementAttribute)(n.annotation,"Term").valueRange.start)))>=0)).map((e=>e.name)))}return e}getTermReferences(e,t,n,a){const o=(0,P.getElementAttributeValue)(e.annotation,"Qualifier"),r=o?n.qName+"#"+o:n.qName,s=[t];this.collectTargetPathFromGhostFiles(s,a,e);let l=[];const p=this.context.referenceLocations;return Object.keys(p).forEach((e=>{p[e][r]&&Object.keys(p[e][r]).filter((e=>{const[t,n]=e.split("//");return(0,i.isMatchingPath)(this.context,s,t,n)})).forEach((t=>{l=[...l,...p[e][r][t]?.values()]}))})),l}getDefinitionLocation(e,t,n,a=!1){const o=this.context.fileCache[e];if(!o)return null;const r=o.serviceFile,i=this.getPositionCopy(t),s=this.getPositionContext(r.content,i,n);return!s||s.positionData.path.startsWith("$['references']")?null:this.getDefinitionLocationInternal(e,s,a)?.locations||null}getDefinitionLocationInternal(e,t,n=!1){const{cursorContext:a,positionData:o,aliasInfo:r}=t;let i=o.startString+o.remainingString;const s=o.startString.lastIndexOf("/")+1;if(i.substring(s).indexOf("/")>0){const e=i.substring(s).indexOf("/")+s;i=i.substring(0,e)}const{pathValue:l,isActionName:p,isTemplateVariable:c}=this.getPathValueForGotoDefinition(a,i,o.startString);if(!l)return null;if(c)return this.getLabeledElementLocation(a,l,e);if(-1!==l.indexOf("{@i18n>"))return this.resolveI18NDefLocation(l,e);let u="",m=!1;if(a.targetPath){if(a.annotation){const{pathBase:e,cursorIsOnTermName:t}=this.getPathBaseForCursorPosition(a,r),o=this.getLocationsForReferencedAnnotations(l,t,e,r,n);if(!o.mdPathValue)return{locations:o.locations};u=o.mdPathValue,u=this.adjustMDPath(u,e,p)}}else{u=l.split("/").map((e=>(0,P.getSegmentWithoutAlias)(r,e))).join("/"),m=!0}if(u){const e=this.resolveMdServiceLocation(u,r,m);if(e)return e}}getLabeledElementLocation(e,t,n){const o=(e.applyContext.apply.content||[]).filter((e=>e.type===P.ELEMENT_TYPE&&"LabeledElement"===e.name)).find((e=>(0,P.getElementAttributeValue)(e,"Name")===t));return{locations:o?a.Location.create(n,o.range):void 0}}adjustMDPath(e,t,n){return n&&(this.context.metadata.getMetadataElement(e)||(e+="()",this.context.metadata.getMetadataElement(e)||(e=e.slice(0,-2)+"("+t.path+")"))),e}getPositionCopy(e){return e?{line:e.line,character:e.character}:e}resolveI18NDefLocation(e,t){const n=(0,r.getI18nUri)(t),o=(0,h.extractI18nKey)(e),i=this.context.i18n.filter((e=>e.key.value===o));if(n&&i.length)return{locations:a.Location.create(n,i[0].key.range)}}getPathBaseForCursorPosition(e,t){let n,a;const o=(0,s.getPathTargetInElement)(e.path,e.annotation);if(o?.isAttributeValue&&"Term"===o?.attribute.name){const o=e.targetPath.split("/").map((e=>(0,P.getSegmentWithoutAlias)(t,e))).join("/");n=(0,i.getMdElementForMdPath)(o,this.context.metadata),a=!0}else n=(0,P.getPathBaseMetadataElement)(this.context.metadata,e.targetPath,t),a=!1;return{pathBase:n,cursorIsOnTermName:a}}resolveMdServiceLocation(e,t,n){const a=this.metadataService.getMetadataElementLocations(e);if(a.length)return{locations:a,mdPathValue:e};let o=(0,l.lookupTarget)(this.context,e,t)?.metadataElement;if(o&&o.targetKinds.includes(g.NAVIGATION_PROPERTY_KIND)&&!n&&(o=this.metadataService.getMetadataElement(o.structuredType)),o)return{locations:this.metadataService.getMetadataElementLocations(o.path),mdPathValue:e};const r=e.split("/"),i=r.pop();let s;return r.length>1?(o=this.context.metadata.getMetadataElement(r.join("/")),s=o?.structuredType?o.structuredType:o.path):s=r.join("/"),{locations:(0,l.findVirtualPropertyLocations)(this.context,s,i)}}getNextPathSegments(e,t,n){const a={context:this.context,aliasInfo:null},o=e.split("/"),r=[...o,...n],i=(0,f.getPathInfo)(a,r,t,[],!1,o.length);return i.validPath?i.nextPossibleSegments??[]:[]}findAllLocations(e,t,n,o,r,i){let s,l,p=!1;const c=[];if(n)for(let u=e.annotationFileSequence.length-1;u>=0&&(!p||o);u--){l=e.annotationFileSequence[u];const o=e.fileCache[l].serviceFile,[m,d]=r.split("#");({annotationFound:p,elements:s}=(0,f.findElementsForPath)(e,o.content,n,m,d||"",i)),l=l&&l.startsWith(P.GHOST_FILENAME_PREFIX)?l.substr(P.GHOST_FILENAME_PREFIX.length):l,l&&s&&s.length?s.filter((e=>!!e.range)).forEach((e=>{c.push(a.Location.create(l,e.range))})):t.location&&""===r&&c.push(t.location)}return c.length?1===c.length?c[0]:c:null}onFileRegistered(e,t){try{(0,p.addServiceFileToContext)(this.context,e,t),this.checkServiceFiles()}catch(e){this.handleServiceError("onFileRegistered",e)}}onFileDeregistered(e){try{if(this.context.fileCache[e]&&this.context.fileCache[e].serviceFile){this.setMessagesForFile(e,[]),(0,p.removeOutdatedCacheContent)(this.context,e),delete this.context.fileCache[e];const t=this.context.annotationFileSequence.findIndex((t=>t===e));t>=0&&this.context.annotationFileSequence.splice(t,1),this.checkServiceFiles()}}catch(e){this.handleServiceError("onFileDeregistered",e)}}onFileOpened(e,t=!1){try{const n=this.context.fileCache[e]&&this.context.fileCache[e].serviceFile;if(n){this.openedFiles.set(e,!0);const a=t?[]:this.check(n.content,e);this.setMessagesForFile(n.uri,a)}}catch(e){this.handleServiceError("onFileOpened",e)}}updateMessageForFile(e){const t=this.context.fileCache[e]&&this.context.fileCache[e].serviceFile;if(t){const n=this.check(t.content,e);this.setMessagesForFile(t.uri,n)}}getOpenedFiles(){return this.openedFiles}onMetadataChanged(){try{(0,p.removeOutdatedCacheContent)(this.context,this.context.metadata.fileUri),(0,v.addMetadataToContext)(this.context)}catch(e){this.handleServiceError("onMetadataChanged",e)}}onFileChanged(e,t,n){try{const a=this.context.fileCache[e].serviceFile;if(a){const o=Object.assign({},a,{content:t});(0,p.addServiceFileToContext)(this.context,o),this.openedFiles.set(e,!0),n||this.checkServiceFiles()}}catch(e){this.handleServiceError("onFileChanged",e)}}onFileClosed(e){try{this.context.fileCache[e]&&this.context.fileCache[e].serviceFile&&this.openedFiles.set(e,!1)}catch(e){this.handleServiceError("onFileClosed",e)}}onFileSequenceChanged(e){try{const t=[...this.context.annotationFileSequence];for(let e=this.context.annotationFileSequence.length-1;e>0;e--){const t=this.context.annotationFileSequence[e];this.context.fileCache[t]&&t===this.context.metadata.fileUri||this.context.annotationFileSequence.pop()}(e||[]).forEach((e=>{e!==this.context.metadata.fileUri&&this.context.annotationFileSequence.push(e)})),t.filter((e=>!this.context.annotationFileSequence.includes(e))).forEach((e=>{delete this.context.fileCache[e],(0,p.removeOutdatedCacheContent)(this.context,e)}));let n=t.length!==this.context.annotationFileSequence.length;n||this.context.annotationFileSequence.forEach(((e,a)=>{t[a]===e&&(n=!0)})),n&&this.checkServiceFiles()}catch(e){this.handleServiceError("onFileSequenceChanged",e)}}}},18007:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addServiceFileToContext=t.addMetadataToContext=t.getSchemaNamespaces=void 0;const a=n(75764),o=n(65049),r=n(99038),i=n(41810);function s(e,t){let n=e.namespace;if(!n){n=function(e,t){let n=e.split(".");n.pop();const o=n.join("."),r=o.indexOf("\\")>-1?"\\":"/";n=o.split(r).filter((e=>!!e)).map((e=>e.replace(new RegExp("\\.","g"),"")));let i=1;n.indexOf(a.DirName.Webapp)>-1?i=n.indexOf(a.DirName.Webapp)+1:n.length>3&&(i=n.length-3),n=n.slice(i);let s=n.join(".");const l=t.filter((e=>e.name)).reduce(((e,t)=>(e[t.name]=!0,e)),{});let p=0;const c=s;for(;l[s];)s=c+ ++p;return{type:"namespace",name:s,nameRange:null}}(t,e.namespace?[e.namespace,...e.references]:[...e.references])}return n}var l;t.getSchemaNamespaces=s,t.addMetadataToContext=function(e){const t=e.metadata;t.visitMetadataElements((function(n){if((!n.isComplexType||n.isAnnotatable)&&(n.structuredType&&((0,o.addNavPropToNavSourceMap)(e,n,t.fileUri),(0,o.addNavPropPathToPathExpressions)(e,n,t.fileUri)),(0,o.addPathToPathExpressions)(e,n,t.fileUri),n.path.indexOf("(")>0)){const a=(0,o.removeActionFunctionSignatureFromPath)(n.path);n.structuredType&&((0,o.addNavPropToNavSourceMap)(e,n,t.fileUri,a),(0,o.addNavPropPathToPathExpressions)(e,n,t.fileUri,a)),(0,o.addPathToPathExpressions)(e,n,t.fileUri,a)}})),[...t.getNamespaces()].forEach((n=>{e.namespaceFileUriMap.metadata=e.namespaceFileUriMap.metadata||{},e.namespaceFileUriMap.metadata[n]=t.fileUri}))},t.addServiceFileToContext=function(e,t,n){const a=s(t.content,t.uri);e.fileCache[t.uri]={serviceFile:t,namespace:a.name},t.uri!==e.metadata.fileUri&&(0,r.removeOutdatedCacheContent)(e,t.uri),e.annotationFileSequence.includes(t.uri)||(n>=0?(e.metadata.isCds||t.uri===e.metadata.fileUri||n++,e.annotationFileSequence.splice(n,0,t.uri)):e.annotationFileSequence.push(t.uri));for(let n=e.annotationFileSequence.findIndex((e=>e===t.uri));n<e.annotationFileSequence.length;n++){const t=e.annotationFileSequence[n],a=e.fileCache[t]?.serviceFile?.content;if(a){const n=a?.references||[],o=(0,i.getAllNamespacesAndReferences)(a.namespace,n),s=(0,i.getAliasInformation)(o,e.metadata.getNamespaces());(0,r.addAnnotationFileToContext)(e,a,s,t)}}},function(e){e.Vocabulary="vocabulary",e.Other="other",e.Schema="schema"}(l||(l={}))},83554:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addMetadataToContext=t.addServiceFileToContext=t.removePathFromObject=t.addPathToObject=t.getAbstractTypeName=t.removeOutdatedCacheContent=void 0;var a=n(99038);Object.defineProperty(t,"removeOutdatedCacheContent",{enumerable:!0,get:function(){return a.removeOutdatedCacheContent}});var o=n(65049);Object.defineProperty(t,"getAbstractTypeName",{enumerable:!0,get:function(){return o.getAbstractTypeName}}),Object.defineProperty(t,"addPathToObject",{enumerable:!0,get:function(){return o.addPathToObject}}),Object.defineProperty(t,"removePathFromObject",{enumerable:!0,get:function(){return o.removePathFromObject}});var r=n(18007);Object.defineProperty(t,"addServiceFileToContext",{enumerable:!0,get:function(){return r.addServiceFileToContext}}),Object.defineProperty(t,"addMetadataToContext",{enumerable:!0,get:function(){return r.addMetadataToContext}})},65049:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addNavPropToNavSourceMap=t.addNavPropPathToPathExpressions=t.getTypeOfCollection=t.getAbstractTypeName=t.addPathToPathExpressions=t.removeActionFunctionSignatureFromPath=t.removePathFromObject=t.addPathToObject=void 0;const a=n(54993),o=n(72926),r=n(6853),i=n(5819),s=n(41810);function l(e,t,n){if("object"==typeof e){const a=t.split("/"),o=a.length-1;let r=e;a.forEach(((e,t)=>{if(e){if(r[e]){if(t===o)if("object"==typeof r[e])r[e].$Self=n||!0;else{let t=r[e];"object"==typeof n?(("boolean"==typeof t||n.$Self&&"boolean"!=typeof n.$Self)&&(t=n.$Self||!0),r[e]=Object.assign({},n,{$Self:t})):("boolean"==typeof t||n&&"boolean"!=typeof n)&&(r[e]=n||!0)}}else r[e]=t===o?n||!0:{};t<o&&"object"!=typeof r[e]&&(r[e]={$Self:r[e]}),r=r[e]}}))}}function p(e,t){let n="";const s=(0,a.convertValueTypeFromString)(t);if(s.asCollection)n=c(e,s.name);else if(t===o.EdmType.EntityType||t===o.EdmType.ComplexType||t===o.EdmType.PrimitiveType)n=t;else if(t.startsWith("Edm."))n=o.EdmType.PrimitiveType;else{const s=(0,r.getVocabularyType)(e,t);if(s&&s.kind)switch(s.kind){case i.Edm.COMPLEX_TYPE_KIND:n=o.EdmType.ComplexType;break;case i.Edm.TYPE_DEFINITION_KIND:case i.Edm.ENUM_TYPE_KIND:n=o.EdmType.PrimitiveType}else{const i=(0,r.lookupMetadataService)(e,t);i&&(n=i.edmPrimitiveType?o.EdmType.PrimitiveType:(0,a.getValueTypeForMetadataElement)(i).name)}}return n}function c(e,t){let n="";if(t===o.EdmType.EntityType)n=o.EdmType.EntityTypeCollection;else if(t.startsWith("Edm."))n=o.EdmType.NonEntityTypeCollection;else{if((0,r.getVocabularyType)(e,t))n=o.EdmType.NonEntityTypeCollection;else{const a=(0,r.lookupMetadataService)(e,t);n=a&&a.isEntityType?o.EdmType.EntityTypeCollection:o.EdmType.NonEntityTypeCollection}}return n}t.addPathToObject=l,t.removePathFromObject=function(e,t){if(t&&"object"==typeof e){const n=t.split("/"),a=[];let o=e;if(n.forEach((e=>{e&&"object"==typeof o&&null!==o?(a.push(Object.keys(o).length),o=o[e]||null):o=null})),null!==o){let t=0;a.forEach(((e,n)=>{e>1&&(t=n)}));let o=e;n.slice(0,t).forEach((e=>{"object"==typeof o&&o[e]&&"object"==typeof o[e]&&(o=o[e])})),delete o[n[t]]}return o}},t.removeActionFunctionSignatureFromPath=function(e){const t=e.split("("),n=e.split(")");return t.length>1&&n.length>1?t.shift()+n.pop():e},t.addPathToPathExpressions=function(e,t,n,o){const r=o||t.path;t.isAnnotatable&&(e.pathExpressions.targetPath[n]=e.pathExpressions.targetPath[n]||{},l(e.pathExpressions.targetPath[n],r,r));const i=(0,a.getValueTypeForMetadataElement)(t);if(i.name){const t=(0,a.convertValueTypeToString)(i);e.completionOnly||(e.pathExpressions.path[n]=e.pathExpressions.path[n]||{}),e.pathExpressions.pathCc[n]=e.pathExpressions.pathCc[n]||{},e.pathExpressions.propertyPathCc[n]=e.pathExpressions.propertyPathCc[n]||{};const o=(0,s.resolveName)(i.name);("Edm"===o.namespace||e.vocabularies.getVocabularies().has(o.namespace))&&(e.completionOnly||(e.pathExpressions.path[n][t]=e.pathExpressions.path[n][t]||{},l(e.pathExpressions.path[n][t],r)),e.pathExpressions.pathCc[n][t]=e.pathExpressions.pathCc[n][t]||{},l(e.pathExpressions.pathCc[n][t],r));const c=p(e,t);c&&(c!==t&&(e.completionOnly||(e.pathExpressions.path[n][c]=e.pathExpressions.path[n][c]||{},l(e.pathExpressions.path[n][c],r)),e.pathExpressions.pathCc[n][c]=e.pathExpressions.pathCc[n][c]||{},l(e.pathExpressions.pathCc[n][c],r)),e.pathExpressions.propertyPathCc[n][c]=e.pathExpressions.propertyPathCc[n][c]||{},l(e.pathExpressions.propertyPathCc[n][c],r))}},t.getAbstractTypeName=p,t.getTypeOfCollection=c,t.addNavPropPathToPathExpressions=function(e,t,n,a){let r="";if(t.isEntityType?r=t.isCollectionValued?o.EdmType.EntityTypeCollection:o.EdmType.EntityType:t.isComplexType&&(r=t.isCollectionValued?o.EdmType.NonEntityTypeCollection:o.EdmType.ComplexType),r){const o=a||t.path;e.completionOnly||(e.pathExpressions.path[n]=e.pathExpressions.path[n]||{},e.pathExpressions.path[n][r]=e.pathExpressions.path[n][r]||{},l(e.pathExpressions.path[n][r],o,t.structuredType)),e.pathExpressions.pathCc[n]=e.pathExpressions.pathCc[n]||{},e.pathExpressions.pathCc[n][r]=e.pathExpressions.pathCc[n][r]||{},l(e.pathExpressions.pathCc[n][r],o,t.structuredType)}},t.addNavPropToNavSourceMap=function(e,t,n,a){const o=(a||t.path).split("/"),r=o.pop(),i=o.join("/"),s=t.structuredType;e.navigationSourceMap[n]=e.navigationSourceMap[n]||{},e.navigationSourceMap[n][i]=e.navigationSourceMap[n][i]||{},e.navigationSourceMap[n][i][s]=e.navigationSourceMap[n][i][s]||{},e.navigationSourceMap[n][i][s][r]={isCollection:t.isCollectionValued}}},22464:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSplitAnnotationKeys=void 0;const a=n(41810),o=(e=[])=>e.some((e=>e.type===a.ELEMENT_TYPE&&["Annotation","PropertyValue","Record"].includes(e.name)));const r=new class VisitElement{visit(e,t,n,o,r,i){e.type===a.ELEMENT_TYPE&&this[e.name]&&this[e.name](e,t,n,o,r,i)}Annotation(e,t,n,r,i,s){const l=e.attributes.Term&&e.attributes.Term.value||"",p=(0,a.resolveName)(l,r);if(!n.vocabularies.getTerm(p.qName))return;const c=e.attributes.Qualifier&&e.attributes.Qualifier.value||"";let u,m=`${s&&"Record"!==s.name?"$Element":""}@${p.qName}`;if(m=c?`${m}#${c}`:m,t[m]){if(o(e.content)){t[m].$Self||(t[m]={$Self:t[m]||new Set});t[m].$Self.add(i)}else{const e=t[m];e.add&&e.add(i)}u=t[m]}else{const n=new Set;n.add(i),u=o(e.content)?t[m]={$Self:n}:t[m]=n}for(let t=0;e.content?.length>t;t++){const o=e.content[t];o.type===a.ELEMENT_TYPE&&"Collection"===o.name||this.visit(o,u,n,r,i,e)}}Record(e,t,n,a,o){const r=e.attributes;if(r&&r.Type&&r.Type.valueRange)if(t.$Type){t.$Type.add(o)}else t.$Type=(new Set).add(o);for(let r=0;e.content?.length>r;r++)this.visit(e.content[r],t,n,a,o,e)}PropertyValue(e,t,n,a,r){const i=e.attributes;let s="",l=t;if(i&&i.Property){if(s=i.Property.value,t[s])if(o(e.content)){t[s].$Self.add(r),l=t[s]}else{t[s].add(r)}else{const n=new Set;n.add(r),o(e.content)?(t[s]={$Self:n},l=t[s]):t[s]=n}}for(let o=0;e.content?.length>o;o++){const i=e.content[o];"Record"!==i.name&&"Annotation"!==i.name||(l=t[s]),this.visit(e.content[o],l,n,a,r,e)}}};t.addSplitAnnotationKeys=(e,t,n,a,o)=>{if(!a.supportSplit)return;a.splitAnnotationKeys[t]||(a.splitAnnotationKeys[t]={});const i=a.splitAnnotationKeys[t];for(let t=0;n.length>t;t++)r.visit(n[t],i,a,o,e,null);0===Object.keys(a.splitAnnotationKeys[t]).length&&delete a.splitAnnotationKeys[t]}},99038:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAnnotationFileToContext=t.removeOutdatedCacheContent=void 0;const a=n(41810),o=n(54993),r=n(35504),i=n(65049),s=n(72926),l=n(6853),p=n(85727),c=n(33261),u=n(22464),m=n(61625);function d(e,t,n,o,i,s){const l=[],p=o.attributes?.Term?.value||"";if(y(o,l,e,s,n,{term:p}),0===l.length)return;const c=(0,r.resolvePath)(i,s),u=t.startsWith(a.GHOST_FILENAME_PREFIX)?t.substring(1):t;l.forEach((t=>{let o="",i="";t.absolutePath?t.absolutePath.indexOf("//")>0?[o,i]=t.absolutePath.split("//"):i=t.absolutePath:(o=c,i=t.value);const l=(0,r.resolvePath)(i,s),[p,m]=l.split("@");!function(e,t,n,o,r,i,s){if(!t)return;let l=o?(0,a.getPathBaseMetadataElement)(e.metadata,o):null;const p=t.split("/"),c=r.split("/");for(const[t,a]of p.entries()){const o=l?`${l?.structuredType||l?.path}/${a}`:a;if(l=e.metadata.getMetadataElement(o),!l)break;const p=c[t],u=r.search(new RegExp(`\\b${p}\\b`)),{line:m,character:d}=i.start,y={range:{start:{line:m,character:d+u},end:{line:m,character:d+u+p.length}},uri:n},g=y.range.start.line+","+y.range.start.character,f=l.path;e.metadataReferenceLocations[s]=e.metadataReferenceLocations[s]||{},e.metadataReferenceLocations[s][f]=e.metadataReferenceLocations[s][f]||new Map,e.metadataReferenceLocations[s][f].set(g,y)}}(e,p,u,o,t.value,t.valueRange,n),function(e,t,n,a,o,r,i){if(o){const s=t.startsWith("/")?t:t?a+"//"+t:a,l={range:r.termCastRange,uri:n},p=o.split("/")[0];if(!l?.range)return;const c=l.range.start.line+","+l.range.start.character;e.referenceLocations[i]=e.referenceLocations[i]||{},e.referenceLocations[i][p]=e.referenceLocations[i][p]||{},e.referenceLocations[i][p][s]=e.referenceLocations[i][p][s]||new Map,e.referenceLocations[i][p][s].set(c,l)}}(e,p,u,c,m,t,n)}))}function y(e,t,n,o,r,i){"LabeledElement"===e.name&&function(e,t,n,o){const r=(0,a.getElementAttributeValue)(e,"Name");if(!r)return;const i=n.currentFileNamespace;t.labeledElements[o]=t.labeledElements[o]||{},t.labeledElements[o][i]=t.labeledElements[o][i]||{countMap:new Map,upperCaseMap:new Map};const{upperCaseMap:s,countMap:l}=t.labeledElements[o][i];s.set(r.toUpperCase(),r),l.set(r,(l.get(r)||0)+1)}(e,n,o,r);const s={...i};if(i?.term.endsWith("ValueList")&&!s.collectionRootEntityType){const o=function(e){if("Record"!==e.name)return;const t=e.content.find((e=>e.type===a.ELEMENT_TYPE&&"PropertyValue"===e.name&&"CollectionPath"===e.attributes.Property?.value));if(t)return h(t)}(e);s.collectionRootEntityType=function(e,t,n){if(!t?.value)return"";const a=function(e){for(const[t,n]of e.getRootMetadataElements())if(e.getEdmTargetKinds(t).includes("EntityContainer"))return n}(e.metadata)?.name||"",o=e.metadata.getMetadataElement(`${a}/${t.value}`);if(a&&o)return t.absolutePath=`${a}//${t.value}`,n.push(t),o.structuredType;const r=[...e.metadata.getRootMetadataElements().keys()].find((e=>e.endsWith(t.value)));r&&(t.absolutePath=r,n.push(t));return r||""}(n,o,t)}i?.term.endsWith("SideEffects")&&"PropertyValue"===e.name&&"TargetProperties"===e.attributes.Property?.value&&function(e,t){(e.content.find((e=>e.type===a.ELEMENT_TYPE&&"Collection"===e.name))?.content||[]).filter((e=>e.type===a.ELEMENT_TYPE&&"String"===e.name)).forEach((e=>{const n=e?(0,a.getSingleTextNode)(e):null;n?.text&&n?.range&&t.push({value:n.text,valueRange:n.range})}))}(e,t),function(e,t){Object.keys(e.attributes||{}).filter((e=>e.indexOf("Path")>=0)).map((t=>e.attributes[t])).filter((e=>!!e.value&&!!e.valueRange)).forEach((e=>{t.push({value:e.value,valueRange:e.valueRange,termCastRange:e.value.indexOf("@")>=0?g(e.value,e.valueRange)||e.valueRange:null})}))}(e,t),function(e,t,n,o,r,i){(e.content||[]).filter((e=>e.type===a.ELEMENT_TYPE)).forEach((e=>{if(e.name?.indexOf("Path")>=0){const n=(0,a.getSingleTextNode)(e);if(n?.text&&n?.range){let e=null;if(n.text.indexOf("@")>=0){const t=n.text.split("/").findIndex((e=>e.indexOf("@")>=0));e=(t>=0&&n.fragmentRanges?n.fragmentRanges[t]:g(n.text,n.range))||n.range}t.push({value:n.text,valueRange:n.range,termCastRange:e})}}else y(e,t,n,o,r,i)}))}(e,t,n,o,r,s),function(e,t,n){const o=new Map([["DataFieldForAction","Action"],["DataFieldWithAction","Action"],["ValueListParameterInOut","ValueListProperty"],["ValueListParameterIn","ValueListProperty"],["ValueListParameterOut","ValueListProperty"],["ValueListParameterDisplayOnly","ValueListProperty"],["ValueListParameterFilterOnly","ValueListProperty"],["ValueListParameterConstant","ValueListProperty"]]),r=(e.attributes.Type?.value||"").split(".").pop();if("Record"!==e.name||!o.has(r))return;const i=o.get(r),s=e.content.find((e=>e.type===a.ELEMENT_TYPE&&"PropertyValue"===e.name&&e.attributes.Property?.value===i));if(!s)return;const l=h(s);if(!l.value)return;"Action"===i?l.absolutePath=l.value:n&&(l.absolutePath=`${n}//${l.value}`);t.push(l)}(e,t,i?.collectionRootEntityType)}function g(e,t){const n=e.slice(e.indexOf("@")),a=n.indexOf("/")>=0?n.slice(n.indexOf("/")):"";if(t)return{start:{line:t.start.line,character:t.start.character+e.indexOf("@")},end:{line:t.end.line,character:t.end.character-a.length}}}function f(e,t,n,u,d,y){function g(n,r,s,p,c){const u=(0,o.convertValueTypeToString)(s);p[u]=p[u]||{},(0,i.addPathToObject)(p[u],r);const m=(0,i.getAbstractTypeName)(e,u);if(m&&m!==s.name&&(p[m]=p[m]||{},(0,i.addPathToObject)(p[m],r)),!c)if(s.asCollection){if("Annotation"===n.name);else if("Collection"===n.name){let o=0;(n.content||[]).forEach((n=>{if(n.type===a.ELEMENT_TYPE)if("Annotation"===n.name)f(e,t,n,r,d);else{const e=Object.assign({},s);e.asCollection=!1,g(n,r+"/"+String(o++),e,p)}}))}}else{let o=null;if(s.name.startsWith("Edm.")||(o=(0,l.getVocabularyType)(e,s.name)),o&&"ComplexType"===o.kind){let o=s.name;if("Record"===n.name&&(0,a.getElementAttribute)(n,"Type")&&(o=n.attributes.Type.value||o,o=(0,a.resolveName)(o,d.aliasMapVocabulary).qName),"Annotation"===n.name||"Record"===n.name){const l=e.vocabularies.getComplexType(o),c=l&&l.properties||new Map,m={};c.forEach((e=>m[e.name]=e.type)),(n.content||[]).forEach((n=>{if("Annotation"===n.name)f(e,t,n,r,d);else if("PropertyValue"===n.name){const t=(0,a.getElementAttributeValue)(n,"Property")||"";if(t){let a=c.get(t);if(t&&!a&&e.supportSplit){const n=[...e.vocabularies.getDerivedTypeNames(s.name)];for(let o=0;o<n.length&&!a;o++)a=e.vocabularies.getComplexTypeProperty(n[o],t)}if(a){delete m[t];const e={name:a.type,asCollection:a.isCollection};g(n,r+"/"+t,e,p)}}}})),e.supportSplit||Object.keys(m).forEach((t=>{const n=m[t];p[n]=p[n]||{},(0,i.addPathToObject)(p[n],r+"/"+t);const a=(0,i.getAbstractTypeName)(e,u);a&&a!==s.name&&(p[a]=p[a]||{},(0,i.addPathToObject)(p[a],r))}))}}}}const h=n.attributes.Term&&n.attributes.Term.value||"",T=(0,a.resolveName)(h,d.aliasMapVocabulary),P=e.vocabularies.getTerm(T.qName);if(!P||T.namespace===e.vocabularies.cdsVocabulary.namespace)return;const E=(0,m.getValueTypeFromTerm)(e,P,!0),v=n.attributes.Qualifier&&n.attributes.Qualifier.value||"";e.completionOnly||(e.pathExpressions.annotationPath[t]=e.pathExpressions.annotationPath[t]||{},e.pathExpressions.annotationPath[t][T.qName]=e.pathExpressions.annotationPath[t][T.qName]||{},e.pathExpressions.annotationPath[t][s.cacheKeyAnyTermName]=e.pathExpressions.annotationPath[t][s.cacheKeyAnyTermName]||{}),y&&(e.pathExpressions.annotationPathCc[t]=e.pathExpressions.annotationPathCc[t]||{},e.pathExpressions.annotationPathCc[t][T.qName]=e.pathExpressions.annotationPathCc[t][T.qName]||{},e.pathExpressions.annotationPathCc[t][s.cacheKeyAnyTermName]=e.pathExpressions.annotationPathCc[t][s.cacheKeyAnyTermName]||{});let b="/",_="";if(!e.completionOnly||y){const t=(0,r.lookupTarget)(e,u,d).metadataElement,n=t?t.targetKinds:[];n.includes("NavigationProperty")&&(!n.includes("Property")||(P.appliesTo||[]).length&&!P.appliesTo.includes(p.PROPERTY_KIND))&&(b=""),_=u+b+"@"+T.qName+(v?"#"+v:"")}if(e.completionOnly||((0,i.addPathToObject)(e.pathExpressions.annotationPath[t][T.qName],_),(0,i.addPathToObject)(e.pathExpressions.annotationPath[t][s.cacheKeyAnyTermName],_)),y&&b&&((0,i.addPathToObject)(e.pathExpressions.annotationPathCc[t][T.qName],_),(0,i.addPathToObject)(e.pathExpressions.annotationPathCc[t][s.cacheKeyAnyTermName],_)),e.completionOnly||(e.pathExpressions.path[t]=e.pathExpressions.path[t]||{}),y&&(e.pathExpressions.pathCc[t]=e.pathExpressions.pathCc[t]||{}),"AggregatedPropertyType"===E.name.split(".").pop()){(0,c.getVirtualProperties)(n).forEach((n=>{const a=u+b+n;e.completionOnly||(e.pathExpressions.path[t][s.EdmType.VirtualProperty]=e.pathExpressions.path[t][s.EdmType.VirtualProperty]||{},(0,i.addPathToObject)(e.pathExpressions.path[t][s.EdmType.VirtualProperty],a)),y&&(e.pathExpressions.pathCc[t][s.EdmType.VirtualProperty]=e.pathExpressions.pathCc[t][s.EdmType.VirtualProperty]||{},(0,i.addPathToObject)(e.pathExpressions.pathCc[t][s.EdmType.VirtualProperty],a),e.pathExpressions.propertyPathCc[t]=e.pathExpressions.propertyPathCc[t]||{},e.pathExpressions.propertyPathCc[t][s.EdmType.VirtualProperty]=e.pathExpressions.propertyPathCc[t][s.EdmType.VirtualProperty]||{},(0,i.addPathToObject)(e.pathExpressions.propertyPathCc[t][s.EdmType.VirtualProperty],a))}))}let A=!1,C=!!s.primitiveTypeMap[E.name]||!!s.pathTypeMap[E.name];C||(C="EnumType"===e.vocabularies.getType(E.name)?.kind),(n.content||[]).forEach((n=>{if(n.type===a.ELEMENT_TYPE)if("Annotation"===n.name){if(!e.completionOnly){const a=u+"/@"+T.qName;f(e,t,n,a,d)}}else A||(A=!0,e.completionOnly||g(n,_,E,e.pathExpressions.path[t]),y&&b&&!C&&g(n,_,E,e.pathExpressions.pathCc[t],!0))})),A||(e.completionOnly||g(n,_,E,e.pathExpressions.path[t]),y&&b&&!C&&g(n,_,E,e.pathExpressions.pathCc[t],!0))}function h(e){if(e.attributes.String){const t=e.attributes.String;return{value:t?.value,valueRange:t?.valueRange}}{const t=e.content.find((e=>e.type===a.ELEMENT_TYPE&&"String"===e.name)),n=t?(0,a.getSingleTextNode)(t):null;return{value:n?.text,valueRange:n?.range}}}t.removeOutdatedCacheContent=function(e,t){delete e.navigationSourceMap[t],delete e.pathExpressions.targetPath[t],[e.labeledElements,e.referenceLocations,e.metadataReferenceLocations,e.pathExpressions.annotationPath,e.pathExpressions.path,e.pathExpressions.pathCc,e.pathExpressions.annotationPathCc,e.pathExpressions.propertyPathCc].forEach((e=>{Object.keys(e).filter((e=>e.split("|").includes(t))).forEach((t=>{delete e[t]}))}))},t.addAnnotationFileToContext=function(e,t,n,o){return t.targets.forEach((t=>{const r={};r[o]=!0;const i=t.name.split("/").filter((e=>!!e)).map((t=>{let o=t;if(o.indexOf(".")>0){const t=(0,a.resolveName)(o,n.aliasMapMetadata),i=e.namespaceFileUriMap.metadata[t.namespace];r[i]=!0,o=t.qName}return o})),s=i.length?i.join("/"):"",l=Object.keys(r).join("|");t.terms.forEach((t=>{s&&(f(e,l,t,s,n,!0),d(e,o,l,t,s,n))})),e.supportSplit?(0,u.addSplitAnnotationKeys)(o,s,t.terms,e,n.aliasMap):function(e,t,n,o){const{name:r,nameRange:i}=n,s=r.split("/"),l=s.map((e=>(0,a.getSegmentWithoutAlias)(o,e)));let p=null;const c={};c[t]=!0;for(const[n,u]of l.entries()){if(!u)continue;const l=s[n];if(u.includes(".")){const t=(0,a.resolveName)(u,o.aliasMapMetadata);c[e.namespaceFileUriMap.metadata[t?.namespace||""]]=!0}const m=r.search(new RegExp(`\\b${l}\\b`)),{line:d,character:y}=i.start,g={range:{start:{line:d,character:y+m},end:{line:d,character:y+m+l.length}},uri:t},f=p?`${p.structuredType||p.path}/${u}`:u;if(p=e.metadata.getMetadataElement(f),!p)break;const h=g.range.start.line+","+g.range.start.character,T=p.path,P=Object.keys(c).join("|");e.metadataReferenceLocations[P]=e.metadataReferenceLocations[P]||{},e.metadataReferenceLocations[P][T]=e.metadataReferenceLocations[P][T]||new Map,e.metadataReferenceLocations[P][T].set(h,g)}}(e,o,t,n)})),e}},27246:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNameCasePathValueDiagnostic=t.createUnusedNamespaceDiagnostic=t.createUnknownMetadataDiagnostic=t.createUnknownVocabularyDiagnostic=t.createWarningDiagnostic=t.createErrorDiagnosticWithRule=t.createErrorDiagnostic=void 0;var a=n(7331);Object.defineProperty(t,"createErrorDiagnostic",{enumerable:!0,get:function(){return a.createErrorDiagnostic}}),Object.defineProperty(t,"createErrorDiagnosticWithRule",{enumerable:!0,get:function(){return a.createErrorDiagnosticWithRule}}),Object.defineProperty(t,"createWarningDiagnostic",{enumerable:!0,get:function(){return a.createWarningDiagnostic}});var o=n(44605);Object.defineProperty(t,"createUnknownVocabularyDiagnostic",{enumerable:!0,get:function(){return o.createUnknownVocabularyDiagnostic}}),Object.defineProperty(t,"createUnknownMetadataDiagnostic",{enumerable:!0,get:function(){return o.createUnknownMetadataDiagnostic}});var r=n(10885);Object.defineProperty(t,"createUnusedNamespaceDiagnostic",{enumerable:!0,get:function(){return r.createUnusedNamespaceDiagnostic}});var i=n(26729);Object.defineProperty(t,"createNameCasePathValueDiagnostic",{enumerable:!0,get:function(){return i.createNameCasePathValueDiagnostic}})},26729:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNameCasePathValueDiagnostic=void 0;const a=n(7331),o=n(86337),r=n(41810);t.createNameCasePathValueDiagnostic=function(e,t,n){const i=o.i18n.t("0_is_unknown_Do_you_mean_1",{unknown:e,known:t}),s=(0,a.createErrorDiagnosticWithRule)(r.NAME_CASE_ISSUE_PATH_VALUE,i,n);return s.data={wrong:e,correct:t},s}},44605:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUnknownMetadataDiagnostic=t.createUnknownVocabularyDiagnostic=void 0;const a=n(7331),o=n(86337),r=n(41810);t.createUnknownVocabularyDiagnostic=function(e,t,n,i){let s="";s=e===t?o.i18n.t("Unknown_Vocabulary_Do_you_mean_0_namespace",{namespace:t}):o.i18n.t("Unknown_Vocabulary_Do_you_mean_alias_0_from_1_namespace",{alias:e,namespace:t});const l=(0,a.createErrorDiagnosticWithRule)(r.NO_UNDEFINED_NAMESPACE_TYPE,s,n,void 0),p=i.getVocabulary(t);return t&&p&&(l.data={namespace:p.namespace,alias:p.defaultAlias,referenceUri:p.defaultUri}),l},t.createUnknownMetadataDiagnostic=function(e,t,n){const i=o.i18n.t("Unknown_Namespace_Do_you_mean_Metadata_namespace_0",{namespace:e}),s=(0,a.createErrorDiagnosticWithRule)(r.NO_UNDEFINED_NAMESPACE_TYPE,i,t);return e&&(s.data={namespace:e,referenceUri:n}),s}},10885:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUnusedNamespaceDiagnostic=void 0;const a=n(26290),o=n(72307),r=n(86337),i=n(41810);t.createUnusedNamespaceDiagnostic=(e,t)=>{const n=(0,a.getUsedNamespaces)(e,t.targets),s=(0,a.getUnusedNamespaces)(e,n),l=[];return s.forEach(((e,n)=>{const a=((e,t)=>{let n="";return n=e===t?r.i18n.t("Unused_namespace_0",{namespace:e}):r.i18n.t("Unused_namespace_0_with_alias_1",{namespace:e,alias:t}),n})(n,e),s=((e,t)=>{const n=e.find((e=>e.name===t));return n&&n.nameRange})(t.references,n);l.push({message:a,range:s,severity:o.DiagnosticSeverity.Information,rule:i.NO_UNUSED_NAMESPACE_TYPE,data:{alias:e,namespace:n}})})),l}},7331:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createErrorDiagnosticWithRule=t.createWarningDiagnostic=t.createErrorDiagnostic=void 0;const a=n(72307);t.createErrorDiagnostic=(e,t)=>({severity:a.DiagnosticSeverity.Error,range:t,message:e});t.createWarningDiagnostic=(e,t)=>({severity:a.DiagnosticSeverity.Warning,range:t,message:e});t.createErrorDiagnosticWithRule=(e,n,a,o)=>Object.assign({},(0,t.createErrorDiagnostic)(n,a),{rule:e,data:o})},86337:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initI18n=t.i18n=void 0;const o=a(n(74865)),r=a(n(87334));t.i18n=o.default.createInstance(),t.initI18n=async function(){await t.i18n.init({resources:{en:{translation:r.default}},lng:"en",fallbackLng:"en",joinArrays:"\n\n"})}},53308:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.replaceWithDefaultAlias=t.getSplitStructureType=t.getSplitStructurePropertyValue=t.getSplitStructurePropertySources=t.i18n=t.initI18n=t.CompletionItemCategory=t.CompletionItemType=t.completeAnnotationValue=t.resolvePathToCursorContext=t.getPathSegments=t.getPathTargetInElement=t.hasValueAsSingleNonRecordChildElement=t.getAvailableEntitySetProperties=t.SNIPPET_FINAL_TABSTOP_ID=t.Snippet=t.Edm=t.getStandardAggregationMethods=t.primitiveValueConstantExpressionMap=t.primitiveTypeMap=t.dynamicExpressionSignatureMap=t.dynamicExpressionSpecialMap=t.PropertyNamesSpecial=t.AnnotationServiceImpl=void 0;var r=n(94368);Object.defineProperty(t,"AnnotationServiceImpl",{enumerable:!0,get:function(){return r.AnnotationServiceImpl}});var i=n(72926);Object.defineProperty(t,"PropertyNamesSpecial",{enumerable:!0,get:function(){return i.PropertyNamesSpecial}}),Object.defineProperty(t,"dynamicExpressionSpecialMap",{enumerable:!0,get:function(){return i.dynamicExpressionSpecialMap}}),Object.defineProperty(t,"dynamicExpressionSignatureMap",{enumerable:!0,get:function(){return i.dynamicExpressionSignatureMap}}),Object.defineProperty(t,"primitiveTypeMap",{enumerable:!0,get:function(){return i.primitiveTypeMap}}),Object.defineProperty(t,"primitiveValueConstantExpressionMap",{enumerable:!0,get:function(){return i.primitiveValueConstantExpressionMap}}),Object.defineProperty(t,"getStandardAggregationMethods",{enumerable:!0,get:function(){return i.getStandardAggregationMethods}}),o(n(45077),t);var s=n(5819);Object.defineProperty(t,"Edm",{enumerable:!0,get:function(){return s.Edm}});var l=n(78120);Object.defineProperty(t,"Snippet",{enumerable:!0,get:function(){return l.Snippet}}),Object.defineProperty(t,"SNIPPET_FINAL_TABSTOP_ID",{enumerable:!0,get:function(){return l.SNIPPET_FINAL_TABSTOP_ID}}),o(n(26853),t);var p=n(54993);Object.defineProperty(t,"getAvailableEntitySetProperties",{enumerable:!0,get:function(){return p.getAvailableEntitySetProperties}}),Object.defineProperty(t,"hasValueAsSingleNonRecordChildElement",{enumerable:!0,get:function(){return p.hasValueAsSingleNonRecordChildElement}});var c=n(61625);Object.defineProperty(t,"getPathTargetInElement",{enumerable:!0,get:function(){return c.getPathTargetInElement}}),Object.defineProperty(t,"getPathSegments",{enumerable:!0,get:function(){return c.getPathSegments}});var u=n(75224);Object.defineProperty(t,"resolvePathToCursorContext",{enumerable:!0,get:function(){return u.resolvePathToCursorContext}});var m=n(35504);Object.defineProperty(t,"completeAnnotationValue",{enumerable:!0,get:function(){return m.completeAnnotationValue}});var d=n(36712);Object.defineProperty(t,"CompletionItemType",{enumerable:!0,get:function(){return d.CompletionItemType}}),Object.defineProperty(t,"CompletionItemCategory",{enumerable:!0,get:function(){return d.CompletionItemCategory}});var y=n(86337);Object.defineProperty(t,"initI18n",{enumerable:!0,get:function(){return y.initI18n}}),Object.defineProperty(t,"i18n",{enumerable:!0,get:function(){return y.i18n}});var g=n(94872);Object.defineProperty(t,"getSplitStructurePropertySources",{enumerable:!0,get:function(){return g.getSplitStructurePropertySources}}),Object.defineProperty(t,"getSplitStructurePropertyValue",{enumerable:!0,get:function(){return g.getSplitStructurePropertyValue}}),Object.defineProperty(t,"getSplitStructureType",{enumerable:!0,get:function(){return g.getSplitStructureType}}),o(n(51429),t);var f=n(84204);Object.defineProperty(t,"replaceWithDefaultAlias",{enumerable:!0,get:function(){return f.replaceWithDefaultAlias}})},68751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeComplexAnnotationSnippet=void 0;const a=n(78120),o=n(36712),r=n(61625),i=n(75224),s=n(35504),l=n(6853),p=n(41810),c=n(72926),u=n(20810),m=n(85727),d=n(13273),y=e=>t=>{t.setTabstopForQualifier&&(e?t.snippet.setAttributeAsFinalTabStop():t.snippet.setAttributeAsTabStop())},g=y(!1),f=y(!0);t.completeComplexAnnotationSnippet=(e,t,n,y,h=!1,T)=>{const P=[],E=t.useSnippets;h&&(0,i.adjustEmbeddedAnnotationCursorContext)(t,n,e.annotation,e.elementContext.parentElement,e,y);const{targetKinds:v,targetType:b,targetTypeAssocKey:_}=(0,s.getTargetInfoFromCursorContext)(e,t,n);if(v.length){(0,s.getTermsForCompletion)(t,v,b,_,n,T).forEach((i=>{const T=i.term,b=(0,r.getValueTypeFromTerm)(t,T),_=(0,l.getVocabularyType)(t,T.type),A={...e,embeddedIn:null,embeddedType:"",annotation:{name:"Annotation",nameRange:null,type:p.ELEMENT_TYPE,attributes:{Term:{name:"Term",nameRange:null,type:p.ATTRIBUTE_TYPE,value:i.name,valueRange:null}},content:[]}},C=new a.Snippet("Annotation",E).setAttribute("Term",i.name).addMandatoryAttributesWithTabStops();A.annotation=C.generic,A.path="$['content'][0]['text']";const N=(0,s.getAnnotationCompletionContext)(t,A,n,y,!0);t.vocabularies.cdsVocabulary.reverseNameMap.has(i.name)&&(i.name=t.vocabularies.cdsVocabulary.reverseNameMap.get(i.name),i.truncatedName=i.name,C.setAttribute("Term",i.name)),N.valueType.asCollection=!1;const I={useSnippets:E,type:N.valueType,valueHandlingContext:N.valueHandlingContext},{omitValueAttribute:S,setTabstopForQualifier:x}=((e,t,n,a)=>{const o=n.term,r=e.vocabularies.cdsVocabulary.namespace===n.namespace,i=[o.type,a?.underlyingType].includes(c.EdmType.Boolean),s=i&&!0===o.defaultValue,l=t.includes("EntityType"),p=l?[m.ENTITY_TYPE_KIND]:[];return{omitValueAttribute:s,setTabstopForQualifier:!i&&l&&!r&&(o.appliesTo||p).includes(m.ENTITY_TYPE_KIND)}})(t,v,i,_),O={snippet:C,snippetContext:I,embedded:h,omitValueAttribute:S,setTabstopForQualifier:x};if(N.resolvedTerm)if(b.asCollection){g(O);const e=(0,u.createCollectionSnippet)(I,_,C.getNextTabStopId(),!0);C.appendContent(e)}else if("ComplexType"===_?.kind){g(O);const e=(0,u.createRecordSnippets)(I,_,!1,C.getNextTabStopId(),!1,!0)[0].snippet;C.appendContent(e)}else(e=>{const t=e.snippet,n=(0,u.getElementNamesProvidingValue)(e.snippetContext);(0,d.removeDynamicExpressionsFromMap)(n);const a=Object.keys(n);1===a.length?(e.omitValueAttribute||t.setAttribute(a[0],t.getTabStopText(e.setTabstopForQualifier?t.getNextTabStopId():0)),f(e)):2===a.length&&a.includes("Path")?(e.omitValueAttribute||t.setAttribute(a.filter((e=>"Path"!==e))[0],t.getTabStopText(e.setTabstopForQualifier?t.getNextTabStopId():0)),f(e)):e.embedded?t.setAttributeAsFinalTabStop():(g(e),t.appendFinalTabStopToContent())})(O);else(D=O).embedded?D.snippet.setAttributeAsFinalTabStop():(g(D),D.snippet.appendFinalTabStopToContent());var D;P.push(((e,t)=>{const n=e.toCompletionItem(null,null,o.CompletionItemCategory.Annotation);return n.name=t.name,n.text=t.truncatedName||t.name,n.insertText=t.name,n.filterText=t.name,t.term.deprecated&&(n.deprecated=t.term.deprecated),n.sorting={isUIVocabulary:"com.sap.vocabularies.UI.v1"===t.namespace},n.sorting.isAlias=t.term.name!==t.name,n.data.documentation=t.documentation,n})(C,i))}))}return P}},5346:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSnippetsForFunctionParameter=t.getSnippetsForApplyContent=t.getApplyFunctionSnippets=void 0;const a=n(78120),o=n(36712),r=n(75224),i=n(72926),s=n(41810),l=n(6853),p=n(38775),c=n(20810),u=n(61625),m=n(13273),d=n(26125);function y(e){return(0,r.getFunctionNamesForValueType)(e.type,e.valueHandlingContext).map((t=>{const n=new a.Snippet("Apply",e.useSnippets).setAttribute("Function",t);let o=n.getNextTabStopId();const r=i.functionSignatures.get(t),s=Array.isArray(r)?r[0]:r;for(let t=0;t<s.parameters.length&&s.parameters[t].isMandatory;t++){const a=g(e,s.parameters[t],o,t===s.parameters.length-1,!0);if(!a)break;o=a[0].snippet.getNextTabStopId(),n.appendContent(a[0].snippet)}return"odata.concat"===t&&(n.appendContent(`$${o}`),n.appendFinalTabStopToContent()),0===(n.generic.content||[]).length&&n.appendFinalTabStopToContent(),{name:t,snippet:n}}))}function g(e,t,n,o,i,s){const u=function(e,t){let n;return n=Array.isArray(e.type)?t?e.type.find((e=>"object"==typeof e&&e.useInSnippet)):e.type[0]:e.type,n}(t,i);if(u){const t=(0,r.convertParameterTypeToValueType)(u),d=(0,l.getVocabularyType)(e.valueHandlingContext.context,t.name);if("object"==typeof u&&"LabeledElement"===u.kind){return[{name:s,snippet:(0,p.createLabeledElementSnippet)({...e,type:t},d,s,n,o)}]}if(t.asCollection){return[{name:null,snippet:(0,c.createCollectionSnippet)({...e,type:{...t,asCollection:!1}},d,n,o)}]}return"ComplexType"===d?.kind?void 0:i?function(e,t,n,o){const r=(0,c.getElementNamesProvidingValue)({...e,type:t});(0,m.removeDynamicExpressionsFromMap)(r),Object.keys(r).length>1&&delete r.Path;if(1===Object.keys(r).length){const t=new a.Snippet(Object.keys(r)[0],e.useSnippets,n);return t.appendTabStopToContent(o?0:t.getNextTabStopId()),[{name:null,snippet:t}]}return}(e,t,n,o):function(e,t,n){const o=(0,c.getElementNamesProvidingValue)({...e,type:t}),r=[];return Object.keys(o).forEach((o=>{if("Apply"===o)r.push(...y({...e,type:t}));else{const t=new a.Snippet(o,e.useSnippets,n).appendFinalTabStopToContent();r.push({name:null,snippet:t})}})),r}(e,t,n)}}t.getApplyFunctionSnippets=function(e){const t=[];return t.push(...y(e).map((e=>{const t=e.snippet.toCompletionItem(`"${e.name}"`,!1,o.CompletionItemCategory.Apply);return t.documentation={kind:d.MarkupKind.Markdown,value:((0,r.getFunctionDocumentation)(e.name)||[]).join("\n")},t}))),t},t.getSnippetsForApplyContent=function(e,t,n){const a=[],l=(0,u.getPathTargetInElement)(n,t),p=l.isWhitespacePosition?l.beforeSubNodeIndex:(0,u.getChildElementPosition)(l.nodeIndex,t,!0),c=(0,s.getElementAttributeValue)(t,"Function");if(i.functionSignatures.get(c)){const n=(0,r.getFunctionParameterDefinitions)(c,p)[0];if(n){const l=n.type,p=Array.isArray(l)?l[0]:l;"object"==typeof p&&"LabeledElement"===p.kind&&a.push(...function(e,t,n,a){const o=[],i={...e.valueHandlingContext,nodeContext:{}},l=(0,r.findTemplateParameterIndex)(n)[0];if(void 0!==l){const n=(0,r.getTemplateVariableNames)(t,l),p=(t.content||[]).filter((e=>e.type===s.ELEMENT_TYPE&&"LabeledElement"===e.name)),c=n.filter((e=>!p.find((t=>(0,s.getElementAttributeValue)(t,"Name")===e))));c&&c.forEach((t=>{const n=g({...e,valueHandlingContext:i},a,1,!0,!1,t)[0];o.push(n.snippet.toCompletionItem(`"${t}"`,!1))}))}return o}(e,t,c,n)),0===a.length&&a.push(...function(e,t){const n={...e.valueHandlingContext,nodeContext:{}};return g({...e,valueHandlingContext:n},t,1,!0,!1).map((e=>{const t=e.snippet.toCompletionItem("Apply"===e.snippet.generic.name?`"${e.name}"`:null,!1);switch("Apply"===e.snippet.generic.name&&(t.documentation={kind:d.MarkupKind.Markdown,value:((0,r.getFunctionDocumentation)(e.name)||[]).join("\n")}),e.snippet.generic.name){case"Path":t.category=o.CompletionItemCategory.Path;break;case"Apply":t.category=o.CompletionItemCategory.Apply}return i.dynamicExpressionSignatureMap.has(e.snippet.generic.name)&&(t.category=o.CompletionItemCategory.DynamicExpressionName),t}))}(e,n))}}return a},t.createSnippetsForFunctionParameter=g},20810:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCollectionSnippet=t.createRecordSnippets=t.recordSnippets=t.createPropertyValueSnippet=t.getElementNamesProvidingValue=void 0;const a=n(78120),o=n(72926),r=n(41810),i=n(75224),s=n(36712),l=n(35504),p=n(6853),c=n(13273);function u(e){const t=(0,i.getPropertyNamesProvidingValueForType)(e.valueHandlingContext,e.type);return Object.keys(t).forEach((e=>{t[e]&&!e.startsWith("@")&&"Record"!==e||delete t[e]})),t||{}}function m(e,t,n=!0,r=1,i=!1,s=d,l=y,m=u){const g=(0,p.getVocabularyType)(e.valueHandlingContext.context,t.type),f=(0,p.getValueTypeForComplexTypeProperty)(e.valueHandlingContext.context,e.type.name,t.name);"ComplexType"===g?.kind&&g?.isAbstract&&(f.name=g.name),f.asCollection=!1;const h=new a.Snippet("PropertyValue",e.useSnippets,r).setAttribute("Property",t.name).addMandatoryAttributesWithTabStops();if(t.isCollection){const t=l({...e,type:f},g,h.getNextTabStopId(),n,i);h.appendContent(t),h.tabStopId=t.getNextTabStopId()}else if(i||"ComplexType"!==g?.kind){!function(e,t,n,a){(0,c.removeDynamicExpressionsFromMap)(t);const o=Object.keys(t);1===o.length?n||e.setAttribute(o[0],e.getTabStopText(a?0:e.getNextTabStopId())):2===o.length&&o.includes("Path")?n||e.setAttribute(o.filter((e=>"Path"!==e))[0],e.getTabStopText(a?0:e.getNextTabStopId())):a?e.setAttributeAsFinalTabStop():e.setAttributeAsTabStop(e.getNextTabStopId())}(h,m({...e,type:f})||{},[t.type,g?.underlyingType].includes(o.EdmType.Boolean)&&!0===t.defaultValue,n)}else{const t=s({...e,type:f},g,!1,h.tabStopId,!0,n);1===t.length?(h.appendContent(t[0].snippet),h.tabStopId=t[0].snippet.getNextTabStopId()):n?h.appendFinalTabStopToContent():h.appendNextTabStopToContent()}return h}function d(e,t,n=!1,o=1,s=!1,l=!1,p=m){const c=e.valueHandlingContext,u=(0,r.resolveName)(e.type.name),d={},y=e.type.name.split(".").pop(),g=c.aliasInfo.reverseAliasMap[u.namespace];let f=[];return t.isAbstract?((0,i.getPossibleTypes)(c.context,e.type,d),f=Object.keys(d[u.namespace]||{})):f.push(y),f.map((t=>{const r={name:`${g||u.namespace}.${t}`,asCollection:!1},m=new a.Snippet("Record",e.useSnippets,o).addMandatoryAttributesWithTabStops();!function(e,t,n,a){a?n&&"UI.DataField"!==t.name&&e.setAttribute("Type",t.name):e.setAttribute("Type",t.name)}(m,r,Object.keys(d[u.namespace]||{}).length>0,e.valueHandlingContext.context.omitRedundantTypesInSnippets);const y=(0,i.getPropertyDescriptorsForRecord)(c,r),f=n?[...y.all.filter((e=>y.mandatory.includes(e))),...y.all.filter((e=>!y.mandatory.includes(e)))]:y.mandatory;let h=m.getNextTabStopId();const T=f.map(((t,n)=>{const a=p({...e,type:y.resolvedRecordType},t,l&&n===f.length-1,h,s);return h=a.getNextTabStopId(),a}));return m.tabStopId=h,T.length?m.appendContent(T):l?m.appendFinalTabStopToContent():m.appendNextTabStopToContent(),{recordTypeName:t,snippet:m,resolvedTypeName:`${u.namespace}.${t}`}}))}function y(e,t,n,o,r=!1,i=d,s=m,l=u){const p=e.useSnippets,y=new a.Snippet("Collection",p,n).addMandatoryAttributesWithTabStops();if(t&&"ComplexType"===t.kind)if(t&&!r){const n=i({type:e.type,useSnippets:p,valueHandlingContext:e.valueHandlingContext},t,!1,y.tabStopId,!0,o,s);1===n.length?(y.appendContent(n[0].snippet),o||(y.tabStopId=n[0].snippet.getNextTabStopId())):g(y,o)}else g(y,o);else{const t=l(e)||{};(0,c.removeDynamicExpressionsFromMap)(t),function(e,t,n,o){let r;const i=Object.keys(t);1===i.length?r=i[0]:2===i.length&&i.includes("Path")&&(r=i.filter((e=>"Path"!==e))[0]);if(r){const t=new a.Snippet(r,n,e.getNextTabStopId());g(t,o),e.appendContent(t),e.tabStopId=t.getNextTabStopId()}else g(e,o)}(y,t,p,o)}return y}function g(e,t){t?e.appendFinalTabStopToContent():e.appendNextTabStopToContent()}t.getElementNamesProvidingValue=u,t.createPropertyValueSnippet=m,t.recordSnippets=function(e,t,n=!1,a=m){return d(e,t,n,1,!1,!0,a).map((t=>{const a=e.valueHandlingContext.context.vocabularies.getDocumentation(t.resolvedTypeName,void 0,e.valueHandlingContext.aliasInfo);(0,l.appendNameToDocumentationAndTruncate)(t.resolvedTypeName,a,e.valueHandlingContext.context,!0,e.valueHandlingContext.aliasInfo,"Type");const o=t.snippet.toCompletionItem(`Record ${n?"(full) ":""}"${t.recordTypeName}"`,n,s.CompletionItemCategory.ValueElement,!0);return o.data.documentation=a,o}))},t.createRecordSnippets=d,t.createCollectionSnippet=y},42729:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.snippetsForDynamicExpressionsForAnyType=t.snippetsForDynamicExpressionParameters=void 0;const a=n(36712),o=n(72926),r=n(20810),i=n(43269),s=n(53308),l=n(61625),p=n(75224),c=n(54993),u=n(5346);function m(e){const t={};(0,p.addDynamicExpressionsForAnyType)(t);const n=Object.keys(t).filter((e=>!["Apply","LabeledElement"].includes(e))).map((n=>new s.Snippet(n,e.useSnippets).addMandatoryAttributesWithTabStops().appendFinalTabStopToContent().toCompletionItem(null,null,t[n])));return t.Apply&&n.push(...(0,u.getApplyFunctionSnippets)(e)),n}function d(e){return[(0,r.createCollectionSnippet)(e,null,1,!0).toCompletionItem(),new s.Snippet("Path",e.useSnippets).appendFinalTabStopToContent().toCompletionItem(null,null,a.CompletionItemCategory.Path),...m(e)]}function y(e,t,n,a){(e||[]).forEach((e=>{(0,i.snippetsForElementsProvidingValue)({...t,type:e,valueHandlingContext:n}).forEach((e=>{a.findIndex((t=>t.name===e.name))<0&&a.push(e)}))}))}t.snippetsForDynamicExpressionParameters=function(e,t,n,a){const s=[],u=(0,l.getPathTargetInElement)(n,t),m=(0,l.getChildElementPosition)(u.nodeIndex,t,!0),g=o.dynamicExpressionSignatureMap.get(t.name),f=g&&g.parameters[m],h={...e.valueHandlingContext,nodeContext:{comparisonOperator:g.metadata?.comparisonOperator,strictEqualityComparison:g.metadata?.strictEqualityComparison}};if(f){const n=f.type,u=(0,p.convertDynamicExpressionTypeToValueType)(n);if(u.name===o.EdmType.Untyped&&(u.name=o.EdmType.PrimitiveType),"object"==typeof n&&n.constraints?.compatibleWithRequestedType)s.push(...function(e,t){return e.type.asCollection?d({...e,type:{...e.type,asCollection:!1}}):t?[...(0,r.recordSnippets)(e,t),...(0,r.recordSnippets)(e,t,!0),...(0,i.snippetsForElementsProvidingValue)(e)]:(0,i.snippetsForElementsProvidingValue)(e)}(e,a));else if("object"==typeof n&&void 0!==n.constraints?.comparableTypeParameterIndex){const a=(0,l.getChildElementForPosition)(n.constraints?.comparableTypeParameterIndex,t);s.push(...function(e,t,n,a){const o=(0,p.getComparableTypes)((0,p.getTypesForElement)(e.valueHandlingContext,a,e.valueHandlingContext.pathBase));if(n.asCollection)return t.nodeContext.restrictedTypes=o,d({...e,type:{...n,asCollection:!1},valueHandlingContext:t});{const n=[];return y((0,p.adjustComparableTypes)(t,o.map((e=>(0,c.convertValueTypeFromString)(e)))),e,t,n),n}}(e,h,u,a))}else{if(u.asCollection)return d({...e,type:{...u,asCollection:!1},valueHandlingContext:h});y((0,p.adjustComparableTypes)(h,[u]),e,h,s)}}return s},t.snippetsForDynamicExpressionsForAnyType=m},70153:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleSnippets=void 0;const a=n(36712),o=n(6853),r=n(78120),i=n(75224),s=n(72926),l=n(20810),p=n(43269),c=n(35504),u=n(26125),m=n(42729),d=n(5346);t.handleSnippets=function e(t,n,y,g){const f=t.context.useSnippets,h={valueHandlingContext:t,type:n,useSnippets:t.context.useSnippets};if("Apply"===y.name)return(0,d.getSnippetsForApplyContent)(h,y,g);if([...s.dynamicExpressionSignatureMap.keys()].includes(y.name)){const e=(0,o.getVocabularyType)(t.context,n.name),a="ComplexType"===e?.kind?e:void 0;return(0,m.snippetsForDynamicExpressionParameters)(h,y,g,a)}if(n?.asCollection){if(t.nodeContext?.dataFieldValueProperty)return[];const s={...n,asCollection:!1};if("Collection"!==y.name){const e=(0,o.getVocabularyType)(t.context,n.name);return[(0,l.createCollectionSnippet)({...h,type:s},e,1,!0).toCompletionItem(),new r.Snippet("Path",f).appendFinalTabStopToContent().toCompletionItem(null,null,a.CompletionItemCategory.Path)]}{const n=(0,i.adjustRequestedTypes)([s],t),a=[];return n.forEach((n=>a.push(...e(t,n,y,g)))),a}}return!n?.name||n.name.startsWith("Edm.")&&n.name!==s.EdmType.PrimitiveType?n?.name&&n.name.startsWith("Edm.")?[...s.dynamicExpressionSignatureMap.keys()].includes(y.name)?(0,m.snippetsForDynamicExpressionParameters)(h,y,g):(0,p.snippetsForElementsProvidingValue)(h):[]:function(e,t,n,d,y){const g=(0,o.getVocabularyType)(t.context,d.name);if("ComplexType"!==g?.kind)return[...s.dynamicExpressionSignatureMap.keys()].includes(n.name)?(0,m.snippetsForDynamicExpressionParameters)(e,n,y):(0,p.snippetsForElementsProvidingValue)(e);{const o=g;if(["Collection","Annotation"].includes(n.name))return[...(0,l.recordSnippets)(e,o),...(0,l.recordSnippets)(e,o,!0),...(0,p.snippetsForElementsProvidingValue)(e)];if("Record"===n.name)return function(e,t,n,o){const s=(0,i.getPropertyDescriptorsForRecord)(t,o,n);e.type=s.resolvedRecordType;let p=1;const m=[];s.notProvided.forEach(((t,n)=>{const a=(0,l.createPropertyValueSnippet)(e,t,n===s.notProvided.length-1,p);p=a.getNextTabStopId(),m.push(a.generic)}));const d={name:"Remaining Properties...",text:"Remaining Properties...",category:a.CompletionItemCategory.ValueElementSet,data:m,type:a.CompletionItemType.Snippet,sorting:{isNotMandatory:!0}},y=[];if(s.isOpenType){const t=new r.Snippet("PropertyValue",e.useSnippets,p);t.setAttribute("Property",t.getPlaceHolderText({id:t.getNextTabStopId(),value:"Enter property name"})).appendFinalTabStopToContent();const n=t.toCompletionItem("Property",!0,a.CompletionItemCategory.ValueElement,!0);n.documentation={kind:u.MarkupKind.Markdown,value:"**Description:** Open complex type property template\n"},y.push(n)}return[...m.length?[d]:[],...s.dollarTypeAllowed?[{name:"$CdsRecordType$",text:"$CdsRecordType$"}]:[],...s.notProvided.map((n=>{const o=t.context.vocabularies.getDocumentation(s.resolvedRecordType.name,n.name,e.valueHandlingContext.aliasInfo);(0,c.appendNameToDocumentationAndTruncate)(n.name,o,t.context,!0,e.valueHandlingContext.aliasInfo);const r=(0,l.createPropertyValueSnippet)(e,n,!1,void 0).toCompletionItem(`Property "${n.name}"`,!1,a.CompletionItemCategory.ValueElement,!0);return r.data.documentation=o,r})),...y]}(e,t,n,d);if("PropertyValue"===n.name)return[...(0,l.recordSnippets)(e,o),...(0,l.recordSnippets)(e,o,!0),...(0,p.snippetsForElementsProvidingValue)(e)];if([...s.dynamicExpressionSignatureMap.keys()].includes(n.name))return(0,m.snippetsForDynamicExpressionParameters)(e,n,y,o)}return[]}(h,t,y,n,g)}},38775:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLabeledElementSnippet=void 0;const a=n(78120),o=n(20810);t.createLabeledElementSnippet=function(e,t,n,r=1,i=!1){const s=new a.Snippet("LabeledElement",e.useSnippets,r);if(n&&s.setAttribute("Name",n),s.addMandatoryAttributesWithTabStops(),e.type.asCollection){const n=(0,o.createCollectionSnippet)({...e,type:{...e.type,asCollection:!1}},t,r,i);s.tabStopId=n.getNextTabStopId(),s.appendContent(n)}else t&&"ComplexType"===t.kind||s.setAttributeAsTabStop(i?0:s.getNextTabStopId());return s}},43269:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.snippetsForElementsProvidingValue=void 0;const a=n(78120),o=n(5346),r=n(72926),i=n(75224),s=n(72307),l=n(20810);t.snippetsForElementsProvidingValue=function(e){const t=(0,l.getElementNamesProvidingValue)(e),n=Object.keys(t).filter((e=>!["Apply","LabeledElement"].includes(e))).map((n=>{const o=new a.Snippet(n,e.useSnippets).addMandatoryAttributesWithTabStops();"If"===n?o.appendNextTabStopToContent().appendNextTabStopToContent():[...r.dynamicExpressionSignatureMap.keys()].filter((e=>r.dynamicExpressionSignatureMap.get(e).metadata?.comparisonOperator)).includes(n)&&o.appendNextTabStopToContent();const l=o.appendFinalTabStopToContent().toCompletionItem(null,null,t[n]);return r.dynamicExpressionSignatureMap.has(n)&&(l.documentation={kind:s.MarkupKind.Markdown,value:((0,i.getDynamicExpressionDocumentation)(n)||[]).join("\n")}),l}));return t.Apply&&n.push(...(0,o.getApplyFunctionSnippets)(e)),n}},78120:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Snippet=t.SNIPPET_FINAL_TABSTOP_ID=void 0;const a=n(36712),o=n(26853),r=n(72926);t.SNIPPET_FINAL_TABSTOP_ID=0;class Snippet extends o.SnippetBase{constructor(e,t,n=1,a){super(e,t,n,a),this.metadata=r.dynamicExpressionSpecialMap[e]}addMandatoryAttributesWithTabStops(){return(this.metadata&&this.metadata.mandatoryAttributes||[]).forEach((e=>{this.generic.attributes[e]||this.setAttribute(e,this.getTabStopText(this.getNextTabStopId()))})),this}addEmptyAttributesWithTabStops(){return this.addMandatoryAttributesWithTabStops(),(this.metadata&&this.metadata.optionalAttributes||[]).forEach((e=>{if(!this.generic.attributes[e]){const t=this.getNextTabStopId(),n=this.getNextTabStopId();this.setAttribute(this.getPlaceHolderText({id:n,value:`${e}="${this.getTabStopText(t)}"`}))}})),this}toCompletionItem(e,t=!1,n,o=!1){const r=`${o?"":this.generic.name} ${e||""}`.trim(),i={text:r,name:r,insertText:r,filterText:r,category:n||a.CompletionItemCategory.ValueElement,data:this.generic,type:a.CompletionItemType.Snippet};return t&&(i.sorting={isNotMandatory:!0}),i}appendContent(e){return Array.isArray(e)||(e=[e]),e.forEach((e=>{"string"==typeof e?this.generic.content.push(this.generateTextNode(e)):this.generic.content.push(e.generic)})),this}appendTabStopToContent(e){return super.appendTabStopToContent(e)}appendFinalTabStopToContent(){return super.appendFinalTabStopToContent()}appendNextTabStopToContent(){return super.appendNextTabStopToContent()}setAttribute(e,t){return super.setAttribute(e,t)}setAttributeAsTabStop(e){return super.setAttributeAsTabStop(e)}setAttributeAsFinalTabStop(){return super.setAttributeAsFinalTabStop()}setAttributeWithPlaceholderValue(e,t){return super.setAttributeWithPlaceholderValue(e,t)}}t.Snippet=Snippet},13273:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeDynamicExpressionsFromMap=void 0;const a=n(72926);t.removeDynamicExpressionsFromMap=function(e){e&&(delete e.Apply,[...a.dynamicExpressionSignatureMap.keys()].forEach((t=>delete e[t])))}},61818:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStandardAggregationMethods=t.dynamicExpressionSpecialMap=t.unsupportedDynamicExpressionMap=t.dynamicExpressionSignatureMap=t.functionSignatures=t.dynamicExpressionDocumentations=t.comparisonOperatorDescription=t.functionDocumentations=t.LABELED_ELEMENT_KIND=t.TEMPLATE_KIND=t.pathTypeMap=t.pathExpressionMap=t.primitiveTypeMap=t.primitiveValueConstantExpressionMap=void 0;const a=n(86337),o=n(37750);function r(e,n,a,o,r){return n&&(t.primitiveValueConstantExpressionMap[n]||(t.primitiveValueConstantExpressionMap[n]={supportedTypes:{},defaultType:""}),t.primitiveValueConstantExpressionMap[n].supportedTypes[e]=!0,o&&(t.primitiveValueConstantExpressionMap[n].defaultType=o)),{name:e,constantExpressionName:n,compatibleTypeGroup:r,strictEqualityComparable:a}}function i(e,n,a,o,r){return a&&(t.pathExpressionMap[a]||(t.pathExpressionMap[a]={supportedTypes:{},defaultType:null,isInstancePath:!1}),t.pathExpressionMap[a].supportedTypes[e]=!0,t.pathExpressionMap[a].defaultType=r),{name:e,defaultExpressionName:a,isAbstract:n,validNonAbstractPathTypes:o}}let s;t.primitiveValueConstantExpressionMap={},t.primitiveTypeMap={"Edm.Binary":r(o.EdmType.Binary,"Binary",!1,o.EdmType.Binary),"Edm.Boolean":r(o.EdmType.Boolean,"Bool",!0,o.EdmType.Boolean),"Edm.Byte":r(o.EdmType.Byte,"Int",!1,o.EdmType.Int64,"numeric"),"Edm.Date":r(o.EdmType.Date,"Date",!1,o.EdmType.Date,"time"),"Edm.DateTimeOffset":r(o.EdmType.DateTimeOffset,"DateTimeOffset",!1,o.EdmType.DateTimeOffset,"time"),"Edm.Decimal":r(o.EdmType.Decimal,"Decimal",!1,o.EdmType.Decimal,"numeric"),"Edm.Double":r(o.EdmType.Double,"Float",!1,o.EdmType.Double,"numeric"),"Edm.Duration":r(o.EdmType.Duration,"Duration",!1,o.EdmType.Duration),"Edm.Guid":r(o.EdmType.Guid,"Guid",!0,o.EdmType.Guid),"Edm.Int16":r(o.EdmType.Int16,"Int",!1,null,"numeric"),"Edm.Int32":r(o.EdmType.Int32,"Int",!1,null,"numeric"),"Edm.Int64":r(o.EdmType.Int64,"Int",!1,null,"numeric"),"Edm.SByte":r(o.EdmType.SByte,"Int",!1,null,"numeric"),"Edm.Single":r(o.EdmType.Single,"Float",!1,null,"numeric"),"Edm.Stream":r(o.EdmType.Stream,"",!1,""),"Edm.String":r(o.EdmType.String,"String",!1,o.EdmType.String),"Edm.TimeOfDay":r(o.EdmType.TimeOfDay,"TimeOfDay",!1,o.EdmType.TimeOfDay,"time")},t.pathExpressionMap={Path:{supportedTypes:null,defaultType:null,isInstancePath:!0}},t.pathTypeMap={"Edm.AnnotationPath":i(o.EdmType.AnnotationPath,!1,"AnnotationPath"),"Edm.ModelElementPath":i(o.EdmType.ModelElementPath,!0,"ModelElementPath",[o.EdmType.PropertyPath,o.EdmType.NavigationPropertyPath,o.EdmType.AnnotationPath]),"Edm.NavigationPropertyPath":i(o.EdmType.NavigationPropertyPath,!1,"NavigationPropertyPath"),"Edm.PropertyPath":i(o.EdmType.PropertyPath,!1,"PropertyPath"),"Edm.AnyPropertyPath":i(o.EdmType.AnyPropertyPath,!0,o.EdmType.PropertyPath,[o.EdmType.PropertyPath,o.EdmType.NavigationPropertyPath])},t.TEMPLATE_KIND="Template",t.LABELED_ELEMENT_KIND="LabeledElement",t.functionDocumentations=(new Map).set("odata.concat",{description:"The odata.concat function takes two or more expressions as arguments. Each argument MUST evaluate to a primitive or enumeration type. It returns a value of type Edm.String that is the concatenation of the literal representations of the results of the argument expressions"}).set("odata.fillUriTemplate",{description:"The odata.fillUriTemplate client-side function takes two or more expressions as arguments and returns a value of type Edm.String.",note:"The first argument MUST be of type Edm.String and specifies a URI template according to [RFC6570], the other arguments MUST be labeled element expressions. Each labeled element expression specifies the template parameter name in its Name attribute and evaluates to the template parameter value."}).set("odata.uriEncode",{description:"The odata.uriEncode client-side function takes one argument of primitive type and returns the URL-encoded OData literal that can be used as a key value in OData URLs or in the query part of OData URLs."}).set("odata.matchesPattern",{description:"The odata.matchesPattern client-side function takes two argument of type Edm.String and returns a boolean value.",note:"The function returns true if the second expression evaluates to a regular expression and the result of the first argument matches that regular expression, using syntax and semantics of ECMAScript regular expressions"}),t.comparisonOperatorDescription="All comparison expressions are represented as an element that MUST contain two child expressions that evaluate to comparable values.",t.dynamicExpressionDocumentations=(new Map).set("Eq",{description:"Comparison operator - Equal"}).set("Ne",{description:"Comparison operator - Not equal"}).set("Gt",{description:"Comparison operator - Greater than"}).set("Ge",{description:"Comparison operator - Greater than or equal"}).set("Lt",{description:"Comparison operator - Less than"}).set("Le",{description:"Comparison operator - Less than or equal"}).set("In",{description:"Comparison operator - Is a member of collection"}).set("If",{description:"Logical if"}).set("And",{description:"Logical and"}).set("Or",{description:"Logical or"}).set("Not",{description:"logical not"}),t.functionSignatures=(new Map).set("odata.concat",{parameters:[{isMandatory:!0,type:o.EdmType.PrimitiveType,isVariadic:!0}],resultType:o.EdmType.String}).set("odata.fillUriTemplate",{parameters:[{isMandatory:!0,type:{kind:t.TEMPLATE_KIND,name:o.EdmType.String}},{isMandatory:!0,type:[{kind:t.LABELED_ELEMENT_KIND,name:o.EdmType.PrimitiveType,useInSnippet:!0}],isVariadic:!0}],resultType:o.EdmType.String}).set("odata.uriEncode",{parameters:[{isMandatory:!0,type:o.EdmType.PrimitiveType}],resultType:o.EdmType.String}).set("odata.matchesPattern",{parameters:[{isMandatory:!0,type:o.EdmType.String},{isMandatory:!0,type:o.EdmType.String}],resultType:o.EdmType.Boolean}),t.dynamicExpressionSignatureMap=(new Map).set("If",{parameters:[{type:o.EdmType.Boolean,isMandatory:!0},{type:{name:o.EdmType.Untyped,constraints:{compatibleWithRequestedType:!0}},isMandatory:!0},{type:{name:o.EdmType.Untyped,constraints:{compatibleWithRequestedType:!0,optionalWithInParent:["Collection"]}},isMandatory:!0}],resultType:{name:o.EdmType.Untyped,constraints:{compatibleWithRequestedType:!0}}}).set("Not",{parameters:[{type:o.EdmType.Boolean,isMandatory:!0}],resultType:o.EdmType.Boolean}).set("And",{parameters:[{type:o.EdmType.Boolean,isMandatory:!0},{type:o.EdmType.Boolean,isMandatory:!0}],resultType:o.EdmType.Boolean}).set("Or",{parameters:[{type:o.EdmType.Boolean,isMandatory:!0},{type:o.EdmType.Boolean,isMandatory:!0}],resultType:o.EdmType.Boolean}).set("Eq",{parameters:[{type:{name:o.EdmType.Untyped,constraints:{noComplexTypeSupported:!0,noEnumTypeSupported:!0,noCollectionsSupported:!0}},isMandatory:!0},{type:{name:o.EdmType.Untyped,constraints:{comparableTypeParameterIndex:0,noComplexTypeSupported:!0,noCollectionsSupported:!0}},isMandatory:!0}],resultType:o.EdmType.Boolean,metadata:{comparisonOperator:!0,strictEqualityComparison:!0}}),t.dynamicExpressionSignatureMap.set("Ne",t.dynamicExpressionSignatureMap.get("Eq")).set("Gt",{...t.dynamicExpressionSignatureMap.get("Eq"),metadata:{comparisonOperator:!0}}).set("Ge",t.dynamicExpressionSignatureMap.get("Gt")).set("Lt",t.dynamicExpressionSignatureMap.get("Gt")).set("Le",t.dynamicExpressionSignatureMap.get("Gt")),t.dynamicExpressionSignatureMap.set("In",{parameters:[{type:{name:o.EdmType.PrimitiveType,constraints:{noEnumTypeSupported:!0}},isMandatory:!0},{type:{name:o.EdmType.PrimitiveType,isCollection:!0,constraints:{comparableTypeParameterIndex:0}},isMandatory:!0}],resultType:o.EdmType.Boolean,metadata:{comparisonOperator:!0,strictEqualityComparison:!0}}),t.unsupportedDynamicExpressionMap={Cast:{"@Type":"$DerivedFrom($RequestedType)",$1:"$CastableTo(@Type)"},IsOf:{$ResultType:"Boolean","@Type":"$AnyType",$1:"$AnyType"},LabeledElementReference:{$NoAnnotationsAllowed:!0,"#Text":"$LabeledElementFor($RequestedType)"},Null:{},UrlRef:{$1:"String"},Has:{$ResultType:"Boolean",$1:"$EnumType",$2:"$EnumMember($Type1)"},Add:{$ResultType:"$Numeric",$1:"$Numeric",$2:"$Numeric"},Sub:{$ResultType:"$Numeric",$1:"$Numeric",$2:"$Numeric"},Neg:{$ResultType:"$Numeric",$1:"$Numeric"},Mul:{$ResultType:"$Numeric",$1:"$Numeric",$2:"$Numeric"},Div:{$ResultType:"$Numeric",$1:"$Numeric",$2:"$Numeric"},DivBy:{$ResultType:"$Numeric",$1:"$Numeric",$2:"$Numeric"},Mod:{$ResultType:"$Numeric",$1:"$Numeric",$2:"$Numeric"}},t.dynamicExpressionSpecialMap={Annotations:{hasAttributes:!0,mandatoryAttributes:["Target"],structured:!0},Annotation:{hasAttributes:!0,mandatoryAttributes:["Term"],optionalAttributes:["Qualifier"],valueAttributes:!0,structured:!0},Collection:{hasAttributes:!1,multipleValuesAllowed:!0,structured:!0,noAnnotationsAllowed:!0},Record:{hasAttributes:!0,optionalAttributes:["Type"],multipleValuesAllowed:!0,structured:!0},PropertyValue:{hasAttributes:!0,mandatoryAttributes:["Property"],valueAttributes:!0,structured:!0},Apply:{hasAttributes:!0,mandatoryAttributes:["Function"],valueAttributes:!1,structured:!0,multipleValuesAllowed:!0},LabeledElement:{hasAttributes:!0,mandatoryAttributes:["Name"],valueAttributes:!0,structured:!0}},t.getStandardAggregationMethods=function(){return s||(s=(new Map).set("sum",a.i18n.t("Sum")).set("min",a.i18n.t("Minimum")).set("max",a.i18n.t("Maximum")).set("average",a.i18n.t("Average")).set("countdistinct",a.i18n.t("CountDistinct"))),s}},72926:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(37750),t),o(n(61818),t)},37750:(e,t)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyNamesSpecial=t.cacheKeyAnyTermName=t.EdmType=void 0,function(e){e.Binary="Edm.Binary",e.Boolean="Edm.Boolean",e.Byte="Edm.Byte",e.Date="Edm.Date",e.DateTimeOffset="Edm.DateTimeOffset",e.Decimal="Edm.Decimal",e.Double="Edm.Double",e.Duration="Edm.Duration",e.Guid="Edm.Guid",e.Int16="Edm.Int16",e.Int32="Edm.Int32",e.Int64="Edm.Int64",e.SByte="Edm.SByte",e.Single="Edm.Single",e.Stream="Edm.Stream",e.String="Edm.String",e.TimeOfDay="Edm.TimeOfDay",e.PrimitiveType="Edm.PrimitiveType",e.ComplexType="Edm.ComplexType",e.EntityType="Edm.EntityType",e.Untyped="Edm.Untyped",e.EntityTypeCollection="Edm.EntityTypeCollection",e.NonEntityTypeCollection="Edm.NonEntityTypeCollection",e.AnnotationPath="Edm.AnnotationPath",e.AnyPropertyPath="Edm.AnyPropertyPath",e.ModelElementPath="Edm.ModelElementPath",e.NavigationPropertyPath="Edm.NavigationPropertyPath",e.PropertyPath="Edm.PropertyPath",e.VirtualProperty="Edm.VirtualProperty",e.PrimitiveCollection="Edm.PrimitiveCollection"}(n||(t.EdmType=n={})),t.cacheKeyAnyTermName="Impl.AnyTerm",function(e){e.CollectionPath="CollectionPath",e.Parameters="Parameters",e.LocalDataProperty="LocalDataProperty",e.ValueListProperty="ValueListProperty",e.TargetProperties="TargetProperties",e.Template="Template"}(a||(t.PropertyNamesSpecial=a={}))},45077:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5819:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Edm=void 0,function(e){let t,n,a,o;!function(e){e.Action="Action",e.ActionImport="ActionImport",e.Annotation="Annotation",e.Apply="Apply",e.Cast="Cast",e.Collection="Collection",e.ComplexType="ComplexType",e.EntityContainer="EntityContainer",e.EntitySet="EntitySet",e.EntityType="EntityType",e.EnumType="EnumType",e.Function="Function",e.FunctionImport="FunctionImport",e.If="If",e.Include="Include",e.IsOf="IsOf",e.LabeledElement="LabeledElement",e.Member="Member",e.NavigationProperty="NavigationProperty",e.Null="Null",e.OnDelete="OnDelete",e.Parameter="Parameter",e.Property="Property",e.PropertyValue="PropertyValue",e.Record="Record",e.Reference="Reference",e.ReferentialConstraint="ReferentialConstraint",e.ReturnType="ReturnType",e.Schema="Schema",e.Singleton="Singleton",e.Term="Term",e.TypeDefinition="TypeDefinition",e.UrlRef="UrlRef"}(t=e.SymbolicValue||(e.SymbolicValue={})),e.TERM_KIND="Term",e.TYPE_DEFINITION_KIND="TypeDefinition",e.COMPLEX_TYPE_KIND="ComplexType",e.ENUM_TYPE_KIND="EnumType",e.ACTION_KIND="Action",e.FUNCTION_KIND="Function",e.ENTITY_TYPE_KIND="EntityType",e.ENTITY_CONTAINER_KIND="EntityContainer",e.SINGLETON_KIND="Singleton",e.ENTITY_SET_KIND="EntitySet",e.ACTION_IMPORT_KIND="ActionImport",e.FUNCTION_IMPORT_KIND="FunctionImport",e.ASSOCIATION_SET_KIND="AssociationSet",e.ASSOCIATION_KIND="Association",function(e){e.Name="Name"}(n=e.AssociationAttributes||(e.AssociationAttributes={})),function(e){e.End="End"}(a=e.AssociationChild||(e.AssociationChild={})),function(e){e.Role="Role",e.Type="Type",e.Multiplicity="Multiplicity"}(o=e.EndAttributes||(e.EndAttributes={}))}(n||(t.Edm=n={}))},36712:(e,t)=>{"use strict";var n,a,o;Object.defineProperty(t,"__esModule",{value:!0}),t.ACTION_FUNCTION_NAME_OBJECT_TYPE=t.CompletionItemType=t.CommitCharacter=t.CompletionItemCategory=void 0,function(e){e.Term="Term",e.EnumerationMember="EnumerationMember",e.EntityContainer="EntityContainer",e.EntitySet="EntitySet",e.EntityType="EntityType",e.NavigationProperty="NavigationProperty",e.ComplexType="ComplexType",e.Property="Property",e.Function="Function",e.FunctionImport="FunctionImport",e.Parameter="Parameter",e.ReturnType="ReturnType",e.Action="Action",e.ActionImport="ActionImport",e.OwnNamespace="OwnNamespaceName",e.VocabularyNamespace="VocabularyNamespace",e.MetadataNamespace="MetadataNamespaceName",e.ConstantExpressionName="ConstantExpressionName",e.DynamicExpressionName="DynamicExpressionName",e.ValueElement="ValueElement",e.ValueElementSet="ValueElementSet",e.PathKind="PathKind",e.Annotation="Annotation",e.Path="Path",e.Qualifier="Qualifier",e.Apply="Apply",e.Unknown="Unknown"}(n||(t.CompletionItemCategory=n={})),function(e){e.Dot=".",e.ForwardSlash="/"}(a||(t.CommitCharacter=a={})),function(e){e.Regular="Regular",e.Snippet="Snippet"}(o||(t.CompletionItemType=o={})),t.ACTION_FUNCTION_NAME_OBJECT_TYPE="ACTION_FUNCTION_NAME"},35504:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePath=t.getPathValueForStringProperty=t.getPathValueForGotoDefForValueList=t.getAllNamespacesAndReferences=t.findVirtualPropertyReferences=t.findVirtualPropertyLocations=t.appendNameToDocumentationAndTruncate=t.getMessageUniqueQualifier=t.checkQualifierForSimpleIdentifier=t.isQualifierInvalid=t.isValidNamespace=t.lookupTerm=t.lookupTarget=t.hoverAnnotationValue=t.checkAnnotationValue=t.getResolvedUntypedValueTypes=t.completeAnnotationValue=t.getAnnotationCompletionContext=t.hoverTarget=t.hoverTermTrusted=t.hoverTerm=t.completeTerm=t.getTermsForCompletion=t.getTargetInfoFromCursorContext=t.getAliasQualifiedNameDefVoc=t.getTargetTypeAssocKey=t.getAffectedRange=t.completeTarget=t.isInitialSegment=void 0;const o=n(72307),r=n(61625),i=n(26853),s=n(36712),l=n(54993),p=n(72926),c=n(41810),u=n(75224),m=n(32217),d=n(27246),y=n(86337),g=a(n(68405)),f=a(n(19206)),h=n(51429);function T(e,t,n){const a=(0,c.getElementAttributeValue)(t.annotation,"Term")||"",o=(0,c.resolveName)(a,n.aliasMapVocabulary);return e.vocabularies.getTerm(o.qName)}function P(e,t,n){let a="";if(n.isEntityType&&t.includes("Property")&&t.includes("NavigationProperty")){const t=(e.getMetadataElement(n.structuredType)?.keys||[])[0];if(t){const o=n.structuredType+"/"+t;a=e.getMetadataElement(o)?.edmPrimitiveType||""}}return a}function E(e,t){const n=(0,c.resolveName)(e);return n&&t[n.namespace]?t[n.namespace]+"."+n.name:e}function v(e,t,n,a,o,r){const i=[];let s=e.vocabularies.getTermsForTargetKinds(t,n);if(t.includes("NavigationProperty")&&t.includes("Property")&&a){(e.vocabularies.getTermsForTargetKinds(["Property"],a)||[]).forEach((e=>{s.includes(e)||s.push(e)}))}const l=Object.assign({},o.reverseAliasMap);return e.vocabularies.getVocabularies().forEach((e=>{l[e.namespace]||(l[e.namespace]=e.defaultAlias)})),r&&(s=s.filter((e=>r.includes(e)))),s.forEach((t=>{const n=e.vocabularies.getTerm(t),a=E(t,l),r=(0,c.resolveName)(t).namespace,s=e.vocabularies.getDocumentation(n.name,void 0,o),p=N(a,s,e,!0,o);i.push({term:n,name:a,namespace:r,documentation:s,truncatedName:p})})),i}function b(e,t,n,a,o){const i=_(e,t.targetPath,n).metadataElement,s=T(e,t,n),l={resolvedTarget:i,resolvedTerm:s,valueType:void 0,valueHandlingContext:void 0,resolvedCursorContext:void 0};if(i){l.valueType=(0,r.getValueTypeFromTerm)(e,s,!0);const p=(0,c.getElementAttributeValue)(t.annotation,"Qualifier"),m=s?i.path+"/@"+s.name+(p?"#"+p:""):"";if(l.valueHandlingContext={context:e,aliasInfo:n,pathBase:(0,c.getPathBaseMetadataElement)(e.metadata,t.targetPath,n),targetTermQualifier:m},e.supportSplit){t.fileUri&&(l.valueHandlingContext.currentFileUri=t.fileUri);const e=t.targetPath.split("/").map((e=>(0,c.getSegmentWithoutAlias)(n,e))).join("/");l.valueHandlingContext.currentStructureProperty={targetPath:e,term:s.name,qualifier:(0,c.getElementAttributeValue)(t.annotation,"Qualifier"),propertyPathSegments:o?null:[]}}l.resolvedCursorContext=(0,u.resolve)(l.valueHandlingContext,l.valueType,t.annotation,t.path,a)}return l}function _(e,t,n){const a={metadataElement:null,errorMessage:"",resolvedPath:t,resolvedPathWithoutAlias:"",caseIssue:null,isCollection:!1},o=t.split("/"),r=o.map((e=>(0,c.getSegmentWithoutAlias)(n,e)));if(a.resolvedPathWithoutAlias=r.join("/"),({mdElement:a.metadataElement,pathIsToMany:a.isCollection}=(0,l.getMdElementWithCardinalityForMdPath)(a.resolvedPathWithoutAlias,e.metadata)),a.metadataElement)return a;const i={context:e,aliasInfo:n},s=(0,u.getPathInfo)(i,r,[],[],!0);if(s.validPath&&"string"==typeof s.value&&(a.resolvedPath=t,a.metadataElement=e.metadata.getMetadataElement(s.value),a.isCollection=s.isCollection),s.caseIssues){const e=o[s.invalidSegmentIndex];s.caseIssues.wrong=e,a.caseIssue=s.caseIssues}else a.metadataElement||(e.supportSplit||Object.keys(n.aliasMapMetadata).length?s.invalidSegmentIndex>=0&&s.invalidSegmentIndex<r.length?(a.errorMessage=y.i18n.t("Invalid_target_check_0",{segment:o[s.invalidSegmentIndex]}),a.resolvedPath=o.slice(0,s.invalidSegmentIndex).join("/")):(a.errorMessage=y.i18n.t("Invalid_target_0",{target:t}),a.resolvedPath=""):(a.errorMessage=y.i18n.t("No_namespace_or_Invalid_namespace_defined"),a.resolvedPath=""));return a}t.isInitialSegment=function(e){return 1===(e||"").split("/").length},t.completeTarget=function(e,t,n){const a=[],r=t.split("/");r.pop();const i=r.map((e=>(0,c.getSegmentWithoutAlias)(n,e))),s={context:e,aliasInfo:n},l=(0,u.getPathInfo)(s,i,[],[],!1);return l.validPath&&l.nextPossibleSegments.forEach((t=>{let r=t.name;if(r.includes(".")){let e=r;e=(0,c.toAliasQualifiedName)(e,n),r=e}if(r){const i=l.value?l.value+"/"+t.name:t.name,s=e.metadata.getEdmTargetKinds(i).filter((e=>"Collection"!==e)),p=[];let c=r;r.includes(".")&&!r.includes("@")?c=N(r,p,e,!1,n):N(r,p,e,!1,null,"Item");let m="";s.length&&(p.push(`**Target Kind:** ${s[0]} \n`),m=s[0]),a.push({text:c,filterText:r,insertText:r,name:r,commitCharacters:t.usages===u.SegmentUsage.asLastSegmentOnly?[]:["/"],commitCharacterRequired:t.usages===u.SegmentUsage.asIntermediateSegmentOnly,category:m,documentation:{kind:o.MarkupKind.Markdown,value:p.join("\n\n")}})}})),a},t.getAffectedRange=function(e,t){let n=t.position.character-t.startString.length,a=t.position.character+t.remainingString.length;const o=e&&e.length?e[0]:"",r=t.startString.split(o||"/");if(r.length>1){const e=r.pop();n=t.position.character-e.toString().length}if(o){const e=t.remainingString.split(o);if(e.length>1){const n=e.slice(0,1);a=t.position.character+n.toString().length}}return{start:{line:t.position.line,character:n},end:{line:t.position.line,character:a}}},t.getTargetTypeAssocKey=P,t.getAliasQualifiedNameDefVoc=E,t.getTargetInfoFromCursorContext=function(e,t,n){let a,o=[],r="",i="";if(e.embeddedIn)o=[e.embeddedIn],r=e.embeddedType,a=e.embeddedApplicableTerms;else{const a=_(t,e.targetPath,n).metadataElement;a&&(o=a.targetKinds,r=(0,l.convertValueTypeToString)((0,l.getValueTypeForMetadataElement)(a)),i=P(t.metadata,o,a))}return{targetKinds:o,targetType:r,targetTypeAssocKey:i,applicableTermsConstraint:a}},t.getTermsForCompletion=v,t.completeTerm=function(e,t,n,a,r,i){return v(e,t,n,a,r,i).map((t=>{e.vocabularies.cdsVocabulary.reverseNameMap.has(t.name)&&(t.name=e.vocabularies.cdsVocabulary.reverseNameMap.get(t.name),t.truncatedName=t.name);const n={name:t.name,text:t.truncatedName||t.name,id:t.term.name,filterText:t.name,insertText:t.name,deprecated:!!t.term.deprecated,sorting:{},category:s.CompletionItemCategory.Term,documentation:{kind:o.MarkupKind.Markdown,value:t.documentation.join("\n")}};return n.sorting.isUIVocabulary="com.sap.vocabularies.UI.v1"===t.namespace,n.sorting.isAlias=t.term.name!==t.name,n}))},t.hoverTerm=function(e,t,n){const a=(0,c.resolveName)(t.attribute.value,n.aliasMap),r=a.namespace,i=a.name,s=r&&i?`${r}.${i}`:"",l=e.vocabularies.getDocumentation(s,void 0,n);return{contents:{kind:o.MarkupKind.Markdown,value:l.join("\n")},range:t.attribute.valueRange}},t.hoverTermTrusted=function(e,t,n,a){const o=(0,i.getWebappUri)(t);let r=o.substr(0,o.lastIndexOf("/webapp"));r=g.default.parse(r).fsPath;const s=(0,c.resolveName)(n.attribute.value,a.aliasMap),l=[],p=e.vocabularies.getDefaultAlias(s.namespace)+"."+s.name,u=f.default[p],m=(e,t)=>g.default.parse(`command:sap.ux.help.openGuidedDevelopmentToTheSide?${encodeURIComponent(JSON.stringify({projectParameters:{rootPath:r,appId:""},filterParameters:{guideId:e,searchTerm:t},source:"annotation-lsp"}))}`);for(let e=0;e<u.length;e++){0===e&&l.push("**Fiori Guides:**");const t=u[e];if(l.push(`\n[${t.guideTitle}](${m(t.guideId)})`),2===e){l.push(`\n[More...](${m("",p)})`);break}}return l},t.hoverTarget=function(e,t,n){let a="",r=[];const i=t.name.split("/");return i.length>1?i.forEach(((t,o,r)=>{let i;if(0===o)a=(0,c.resolveName)(t,n.aliasMapMetadata).qName,i=e.metadata.getMetadataElement(a);else{const n=a+"/"+t;i=e.metadata.getMetadataElement(n),a=r.length-1!==o&&i.structuredType?i.structuredType:a+"/"+t}})):a=(0,c.resolveName)(t.name,n.aliasMapMetadata).qName,r=e.metadata.getEdmTargetKinds(a),{contents:{kind:o.MarkupKind.Markdown,value:r.length?`**Target Kind:** ${r[0]} \n`:void 0},range:t.nameRange}},t.getAnnotationCompletionContext=b,t.completeAnnotationValue=function(e,t,n,a,o,i){const{resolvedTarget:p,resolvedTerm:c,valueHandlingContext:m,resolvedCursorContext:d}=b(e,t,a,o);if(!p||!c&&!t.embeddedIn)return[];const y=[],g=(0,u.adjustRequestedTypes)(d.types.map((e=>(0,l.convertValueTypeFromString)(e))),m,!0).map((e=>(0,l.convertValueTypeToString)(e))),f={};d.typeOfAlreadyProvidedValue&&!d.alreadyProvidedValueIsAfter||(g||[]).forEach((e=>{const t=(0,l.convertValueTypeFromString)(e);t.facets=d.facets,t.constraints=d.constraints,function(e,t,a){const o=(0,l.convertValueTypeToString)(e),r=t.fixElementName?", fixElementName: "+t.fixElementName:"",i=`CC for element: ${t.element.name}, type: ${o}, path: ${t.path}, startString: ${n}${r}`;a.info(i)}(t,d,o);(0,u.completeValue)(m,t,d.element,n,d.path,d.fixElementName).forEach((e=>{f[e.name]||(f[e.name]=e)}))}));const h=t.elementContext;if(h.parentElement&&!h.attributeArea&&(0,u.isAnnotationAllowed)(h.parentElement)){const e=function(e,t,n,a,o){const i=(0,r.getPathTargetInElement)(t.path,t.element);if(!(i.isTextSubNode||i.textNode||i.isWhitespacePosition))return i.isElementSubNodeName||i.isName?[{name:"Annotation",text:"Annotation",category:s.CompletionItemCategory.Annotation}]:[];if(o)return o(e,n.context,n.aliasInfo,a,!0,t?.constraints?.applicableTerms)}(t,d,m,o,i);e.forEach((e=>{f[e.name]||(f[e.name]=e)}))}return Object.keys(f).forEach((e=>{y.push(f[e])})),y},t.getResolvedUntypedValueTypes=function(e){const t=[];return e.forEach((e=>{if(e.name===p.EdmType.Untyped&&e.constraints?.derivedTypeConstraints?.length){const n=e.constraints.derivedTypeConstraints.map((t=>{const n=(0,l.convertValueTypeFromString)(t);return n.constraints={...e.constraints,derivedTypeConstraints:void 0},n.facets=e.facets,n}));t.push(...n)}else if(e.name===p.EdmType.AnyPropertyPath)for(const n of[p.EdmType.PropertyPath,p.EdmType.NavigationPropertyPath])t.push({...e,name:n});else t.push(e)})),t},t.checkAnnotationValue=function(e,t,n,a,i,s,p,m,d,g,f,h){let T=[];const E=(0,c.getElementAttributeValue)(t,"Term"),v=(0,c.getElementAttribute)(t,"Qualifier");m.registerTerm(E,v&&v.value);try{if(v&&v.value&&C(v.value)){const e=y.i18n.t("Qualifier_0_should_be_of_type_SimpleIdentifier",{qualifier:v.value});T.push({message:e,severity:o.DiagnosticSeverity.Error,range:v.valueRange})}let b=[],_="",N="";f&&f.length?(b=f,_=h):(b=a.targetKinds,_=(0,l.convertValueTypeToString)((0,l.getValueTypeForMetadataElement)(a)),N=P(e.metadata,b,a));const I=A(e,b,_,N,t,E,s,g);if(I.diagnostic)T.push(I.diagnostic);else{const a=(0,c.resolveName)(I.object.name,s.aliasMapVocabulary).qName;let l=`${i}[${a}]`;if(v&&v.value&&(l=`${l}[${v.value}]`),p.has(l)){const n=y.i18n.t("Enter_a_unique_qualifier_for_0",{term:e.vocabularies.cdsVocabulary.reverseNameMap.get(E)||E});T.push({message:n,severity:o.DiagnosticSeverity.Error,range:v?v.valueRange:t.nameRange,rule:c.IGNORE_DUPLICATE})}else p.set(l,!0);const g=(0,r.getValueTypeFromTerm)(e,I.object),f={context:e,aliasInfo:s,pathBase:n};e.supportSplit&&(f.currentStructureProperty={targetPath:i,term:a,qualifier:(0,c.getElementAttributeValue)(t,"Qualifier"),propertyPathSegments:[]});const h=(0,u.checkValue)(f,[g],t,null,m,d);T=T.concat(h)}}catch(e){const t=`AnnotationService: error checking term "${m.getPath()}": ${e}`;d.error(t)}return T},t.hoverAnnotationValue=function(e,t,n,a,o){let i=null;const s=_(e,t.targetPath,n).metadataElement,p=T(e,t,n);if(!s||!p)return i;const m=(0,r.getValueTypeFromTerm)(e,p),d=(0,c.getPathBaseMetadataElement)(e.metadata,t.targetPath,n),y={context:e,aliasInfo:n,pathBase:d};if(e.supportSplit){t.fileUri&&(y.currentFileUri=t.fileUri);const e=t.targetPath.split("/").map((e=>(0,c.getSegmentWithoutAlias)(n,e))).join("/");y.currentStructureProperty={targetPath:e,term:p.name,qualifier:(0,c.getElementAttributeValue)(t.annotation,"Qualifier"),propertyPathSegments:[]}}const g=(0,u.resolve)(y,m,t.annotation,t.path,o);return g.typeOfAlreadyProvidedValue&&!g.alreadyProvidedValueIsAfter||(g.types||[]).forEach((e=>{const t=(0,l.convertValueTypeFromString)(e);t.facets=g.facets,t.constraints=g.constraints,i=(0,u.hoverValue)(y,t,g.element,g.path,a)})),i},t.lookupTarget=_;function A(e,t,n,a,o,r,i,s){const l={},p=(0,c.resolveName)(r,i.aliasMapVocabulary);let u,g="";const f=(e=>e.attributes&&e.attributes.Term?e.attributes.Term.valueRange:e.nameRange)(o),h=p.namespace||i.aliasMap[r]||p.name;if(!r){const e=y.i18n.t("Invalid_Term");return l.diagnostic=(0,d.createErrorDiagnostic)(e,f),l}const T=e.vocabularies.getVocabularyNamespace(h),P=(0,c.resolveName)(r);g=P.namespace||P.name;const{termApplicability:E,xmlDocNamespaceOrAlias:v}=function(e,t,n){const{targetKinds:a,targetType:o,targetTypeAssocKey:r,supportedVocabularyNamespace:i,termValue:s,resolvedTerm:l,applicableTermsConstraint:p}=n;let c=null;const u=l.namespace?l.namespace:t.aliasMap[s];let d;if(!t.aliasMapVocabulary[i])return c=m.TermApplicability.UnSupportedVocabulary,i&&(c=m.TermApplicability.UnknownVocabulary,d=function(e,t,n){return t===e||t.startsWith(e)?e:n.namespace||t.split(".")[0]}(i,s,l)),{termApplicability:c,xmlDocNamespaceOrAlias:d};const y=l.namespace?l.qName:e.vocabularies.getVocabulary(u)?.namespace;return c=e.vocabularies.checkTermApplicability(y,a,o),c===m.TermApplicability.TypeNotApplicable&&r&&["Property","NavigationProperty"].every((e=>a.includes(e)))&&e.vocabularies.checkTermApplicability(y,["Property"],r)===m.TermApplicability.Applicable&&(c=m.TermApplicability.Applicable),c===m.TermApplicability.Applicable&&p?.length&&!p.includes(l.qName)&&(c=m.TermApplicability.NotInApplicableTermsConstraint),{termApplicability:c,xmlDocNamespaceOrAlias:d}}(e,i,{targetKinds:t,targetType:n,targetTypeAssocKey:a,supportedVocabularyNamespace:T,termValue:r,resolvedTerm:p,applicableTermsConstraint:s}),b=e.vocabularies.cdsVocabulary.reverseNameMap.get(r)||r;switch(E){case m.TermApplicability.UnknownVocabulary:l.diagnostic=(0,d.createUnknownVocabularyDiagnostic)(v,T,f,e.vocabularies);break;case m.TermApplicability.UnknownTerm:{const t=p.alias?`${p.alias}.${p.name}`:p.name,n=y.i18n.t("Annotation_0_is_not_available_in_vocabulary_1",{term:t,vocabulary:T});l.diagnostic=(0,d.createErrorDiagnosticWithRule)(c.UNKNOWN_TERM,n,f,{name:p.name,alias:p.alias,namespace:p.namespace,isVocabulary:Boolean(e.vocabularies.getVocabularyNamespace(p.name)),caseCheck:{value:p.name,lookupPath:["vocabularies",T],isNamespacedValue:!0}});break}case m.TermApplicability.TermNotApplicable:if(u=e.vocabularies.getTerm(p.qName),u&&u.appliesTo){const e=y.i18n.t("Term_0_cannot_be_applied_for_target_kind_1_It_can_be_applied_to_2",{term:b,wrong:t.join(", "),correct:u.appliesTo.join(", ")});l.diagnostic=(0,d.createWarningDiagnostic)(e,f),l.diagnostic.rule="term-not-applicable",l.diagnostic.data={name:r,wrong:t.join(", "),correct:u.appliesTo.join(", ")}}break;case m.TermApplicability.NotInApplicableTermsConstraint:if(u=e.vocabularies.getTerm(p.qName),u){const e=y.i18n.t("Term_0_is_not_in_applicable_term_constraint_allowed_terms_are_1",{term:b});l.diagnostic=(0,d.createWarningDiagnostic)(e,f),l.diagnostic.rule=c.NOT_IN_APPLICABLE_TERMS_CONSTRAINT,l.diagnostic.data={name:r}}break;case m.TermApplicability.TypeNotApplicable:if(u=e.vocabularies.getTerm(p.qName),u&&u.constraints?.requiresType){const e=(0,c.toAliasQualifiedName)(u.constraints.requiresType,i),t=y.i18n.t("Term_0_cannot_be_applied_to_this_element_It_can_be_applied_to_1_of_type_2",{term:r,elements:u.appliesTo.join(", "),type:e});l.diagnostic=(0,d.createErrorDiagnostic)(t,f)}break;case m.TermApplicability.Applicable:l.object=e.vocabularies.getTerm(p.qName);break;case m.TermApplicability.UnSupportedVocabulary:{const e=y.i18n.t("Unsupported_Vocabulary_0",{vocabulary:g});l.diagnostic=(0,d.createErrorDiagnosticWithRule)(c.UN_SUPPORTED_VOCABULARY,e,f,{name:p.name});break}}return l}function C(e){return void 0!==e&&!(0,l.isValidSimpleIdentifier)(e)}function N(e,t,n,a,o,r="Name"){let i=e;if(e)if(o){const s=(0,c.resolveName)(e,o.aliasMap);let l=s.alias,p=s.namespace;if(p===n.vocabularies.cdsVocabulary.namespace){const e=n.vocabularies.cdsVocabulary.reverseNameMap.get(l+"."+s.name);e&&t.unshift(`**${r}:** ${e}\n`)}else{let o=s.name,c=l||p;const u=RegExp(/[\s\S]{0,100}((com\.sap\.vocabularies)|(Org\.OData))\.[a-zA-Z0-9]{0,100}\.[vV]\d[\s\S]{0,500}/).test(e);if(!c&&!u&&e.includes(".")){const t=e.split(".");c=t.shift(),o=t.join(".")}const m=(c||"").length;if(u)e.includes("com.sap.vocabularies.")?i=e.replace(".sap.vocabularies.","..."):e.includes("Org.OData.")&&(i=e.replace(".OData.","..."));else if(m>12){const e=n.vocabularies.getVocabularies();let t=!1;e.forEach((e=>{e.defaultAlias===c&&(t=!0)})),t&&a||(i=`${c.slice(0,3)}...${c.slice(m-3,m)}.${o}`)}!l&&a&&n.vocabularies.getVocabularies().forEach((t=>{(u?e.includes(t.namespace):t.defaultAlias===c)&&(l=t.defaultAlias,p=t.namespace)})),l&&t.unshift(`**Alias:** ${l}\n`),p&&t.unshift(`**Namespace:** ${p}\n`),t.unshift(`**${r}:** ${l||p?o:e}\n`)}}else t.unshift(`**${r}:** ${e}\n`);return i}function I(e,t,n){let a="";const{annotation:o,targetPath:r}=t,i=(0,h.extractValueListPropertiesFromAnnotation)(o)?.collectionPath;if(i){const t=(0,l.getMdElementPathForEntitySet)(e,i,r);a=t?"/"+t+"/"+n:""}return a}t.lookupTerm=A,t.isValidNamespace=function(e){return void 0!==e&&!0===/^[a-zA-Z_][\w]*(\.[a-zA-Z_][\w]*)*$/.test(e)},t.isQualifierInvalid=C,t.checkQualifierForSimpleIdentifier=function(e){const t=[];if(e&&e.value&&C(e.value)){const n=y.i18n.t("Qualifier_0_should_be_of_type_SimpleIdentifier",{qualifier:e.value});t.push({message:n,severity:o.DiagnosticSeverity.Error,range:e.valueRange})}return t},t.getMessageUniqueQualifier=function(e,t,n){return{message:y.i18n.t("Enter_a_unique_qualifier_for_0",{term:t}),severity:o.DiagnosticSeverity.Error,range:n?n.valueRange:e.nameRange}},t.appendNameToDocumentationAndTruncate=N,t.findVirtualPropertyLocations=function(e,t,n){let a,r;const i=[];if(t)for(let s=e.annotationFileSequence.length-1;s>=0;s--){r=e.annotationFileSequence[s];const l=e.fileCache[r].serviceFile,p="com.sap.vocabularies.Analytics.v1.AggregatedProperties";({elements:a}=(0,u.findElementsForPath)(e,l.content,t,p)),r=r&&r.startsWith(c.GHOST_FILENAME_PREFIX)?r.substr(c.GHOST_FILENAME_PREFIX.length):r,r&&a&&a.length&&a.filter((e=>!!e.range)).forEach((e=>{((e.content||[]).find((e=>e.type===c.ELEMENT_TYPE&&"Collection"===e.name)).content||[]).filter((e=>e.type===c.ELEMENT_TYPE&&"Record"===e.name)).filter((e=>(e.content||[]).filter((e=>e.type===c.ELEMENT_TYPE&&"PropertyValue"===e.name&&"Name"===(0,c.getElementAttributeValue)(e,"Property"))).filter((e=>{if((0,c.getElementAttributeValue)(e,"String")===n)return!0;const t=(e.content||[]).find((e=>e.type===c.ELEMENT_TYPE&&"String"===e.name));return!(!t||(0,c.getSingleTextNode)(t)?.text!==n)||void 0})).length)).forEach((e=>i.push(o.Location.create(r,e.range))))}))}return i.length?1===i.length?i[0]:i:null},t.findVirtualPropertyReferences=function(e,t,n,a){const r=[];return n&&a&&e.annotationFileSequence.forEach((i=>{const s=e.fileCache[i]?.serviceFile;if(s){const l=(0,u.findRangesForPropertyPath)(e,t,s.content,n,a),p=i.startsWith(c.GHOST_FILENAME_PREFIX)?i.substr(c.GHOST_FILENAME_PREFIX.length):i;r.push(...l.map((e=>o.Location.create(p,e))))}})),r},t.getAllNamespacesAndReferences=function(e,t){const n=[];return e?.name&&n.push(e),t?.length&&n.push(...t),n},t.getPathValueForGotoDefForValueList=I,t.getPathValueForStringProperty=function(e,t,n,a,i,s){let p="",m=!1,d=!1;if(-1!==t.indexOf("{@i18n>"))p=t;else if(n.applyContext&&function(e,t){const n=(0,c.getElementAttributeValue)(e.applyContext.apply,"Function")||"",a=(0,u.findTemplateParameterIndex)(n)[0];if(a<0)return!1;const o=(0,r.getPathTargetInElement)(e.applyContext.path,e.applyContext.apply),i=o?.element&&o.nodeIndex;return(0,r.getChildElementPosition)(i,e.applyContext.apply)===a&&"String"===o.element.name&&t.isTextSubNode&&!!t.textNode&&!!t.textNode.range}(n,a)){const e=(0,u.getTemplateVariablePositions)(a.textNode.text,a.textNode.range),t=o.Position.create(a.textNode.range.start.line,a.textNode.range.start.character+i.length),n=[...e.keys()].find((n=>e.get(n).find((e=>(0,c.positionContained)(e,t)))));n&&(p=n,m=!0)}else if(s.endsWith("Action"))p="/"+t,d=!0;else if((0,h.isTargetPropertiesOfSideEffectsPath)(s))p=t;else if((0,h.isAnnotationPathOfCollectionPathProperty)(s)){const a=n.targetPath,o=(0,l.getMdElementPathForEntitySet)(e,t,a);o&&(p="/"+o)}else(0,h.isAnnotationPathOfValueListProperty)(s)&&(p=I(e,n,t));return{pathValue:p,isTemplateVariable:m,isActionName:d}},t.resolvePath=function(e,t){return e.split("/").map((e=>(0,c.getSegmentWithoutAlias)(t,e))).join("/")}},52679:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckTrace=void 0;const a=n(41810);t.CheckTrace=class CheckTrace{constructor(){this.path="",this.pathStack=[]}getPath(){return this.path}addTokensToPath(e){const t=Array.isArray(e)?e:[e];return this.path+="["+t.join("=")+"]",this}registerTarget(e){return this.addTokensToPath(["Target",e])}registerTerm(e,t){return this.addTokensToPath(["Term",e+(t?"#"+t:"")])}registerElement(e,t){switch(e.name){case"Collection":this.addTokensToPath("Collection").addTokensToPath(t+"");break;case"Record":{const t=(0,a.getElementAttributeValue)(e,"Type")||"<unknown>";this.addTokensToPath(["Record",t]);break}case"PropertyValue":{const t=(0,a.getElementAttributeValue)(e,"Property")||"<unknown>";this.addTokensToPath(["PropertyValue",t]);break}default:this.addTokensToPath(e.name)}return this}push(){this.pathStack.push(this.path)}pop(){this.pathStack.length?this.path=this.pathStack.pop():this.path=""}}},54993:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adjustApplicableTermsConstraint=t.getCompatibleTypesData=t.expandWithCompatibleTypes=t.hasValueAsSingleNonRecordChildElement=t.getMdElementPathForEntitySet=t.getAvailableEntitySetProperties=t.getHintForCaseIssues=t.isValidSimpleIdentifier=t.isEmptyText=t.isMatchingPath=t.getMdElementWithCardinalityForMdPath=t.getMdElementForMdPath=t.getValueTypeForMetadataElement=t.convertValueTypeFromString=t.convertValueTypeToString=t.getLabeledElementsCaseCheckMap=t.managedProperties=t.commonNodeModulePath=void 0;const a=n(71017),o=n(41810),r=n(86337),i=n(72926);function s(e){const t=new Map;return Object.keys(e).forEach((n=>{const a=e[n];Object.keys(a||{}).forEach((e=>{t.set(e.toUpperCase(),a[e].upperCaseMap)}))})),t}function l(e,t){return p(e,t).mdElement}function p(e,t){const n=e.split("/").filter((e=>!!e));if(n.length<3)return{mdElement:t.getMetadataElement(n.join("/")),pathIsToMany:!1};const a=[...n],o=a.splice(0,2);let r=t.getMetadataElement(o.join("/")),i=!1;for(const e of a){if(r?.structuredType){r.isCollectionValued&&(i=!0);const n=`${r.structuredType}/${e}`;r=t.getMetadataElement(n)}else r=void 0;if(!r)break}return{mdElement:r,pathIsToMany:i}}t.commonNodeModulePath=(0,a.join)("node_modules","@sap","cds","common.cds"),t.managedProperties=["createdAt","createdBy","modifiedAt","modifiedBy"],t.getLabeledElementsCaseCheckMap=s,t.convertValueTypeToString=function(e){return e&&e.asCollection?"Collection("+e.name+")":e.name||""},t.convertValueTypeFromString=function(e){const t={name:(e=e||"").trim()};return t.asCollection=e.startsWith("Collection("),t.asCollection&&(t.name=t.name.slice(11,-1)),t},t.getValueTypeForMetadataElement=function(e){let t="";return e.edmPrimitiveType?t=e.edmPrimitiveType:e.isEntityType?t=i.EdmType.EntityType:e.isComplexType&&(t=i.EdmType.ComplexType),t?{name:t,asCollection:e.isCollectionValued}:{name:""}},t.getMdElementForMdPath=l,t.getMdElementWithCardinalityForMdPath=p,t.isMatchingPath=function(e,t,n,a){const r=l(n,e.metadata);if(!r)return!1;const i=(0,o.getPathBaseMetadataElement)(e.metadata,r.path);if(!i)return!1;if(!a)return t.includes(i.path)||t.includes(i.structuredType);const s=!a.endsWith("/"),p=l(i.path+"/"+a,e.metadata);return!!p&&(s?t.includes(p.path):t.includes(p.path)||t.includes(p.structuredType))},t.isEmptyText=function(e){return 0===(e||"").replace(/[\n\t\s]/g,"").length},t.isValidSimpleIdentifier=function(e){return!!e&&!0===/^[A-Za-z_]\w{0,127}$/.test(e)},t.getHintForCaseIssues=function(e,t,n){let a="",o=null;if(t&&t.lookupPath?.length)switch(t.lookupPath[0]){case"vocabularies":o=e.vocabularies.upperCaseNameMap;break;case"functions":o=new Map,[...i.functionSignatures.keys()].forEach((e=>{o.set(e.toUpperCase(),e)}));break;case"labeledElements":o=s(e.labeledElements)}if(o){const e=[...t.lookupPath.slice(1),t.value];if(t.isNamespacedValue){const t=e.pop(),n=e.pop()+"."+t;e.push(n)}e.forEach((e=>{if("$TYPE"===e.toUpperCase())return void(o="$Type");const t=e.toUpperCase();o=o&&"string"!=typeof o?o.get(t):null})),t.isNamespacedValue&&"string"==typeof o&&(o=o.split(".").pop()),t.isNamespacedValue&&"object"==typeof o&&(o=o.get("$Self"),o=o.split(".").pop())}return o&&"string"==typeof o&&t.value.toUpperCase()===o.toUpperCase()&&(t.proposedValue=t.isNamespacedValue?`${n.alias??n.namespace}.${o}`:o,a=r.i18n.t("Did_you_mean_0",{proposedValue:t.proposedValue})),a},t.getAvailableEntitySetProperties=function(e,n){const a=new Map,r=new Map;let s="";if([...e.getRootMetadataElements().keys()].filter((t=>e.getEdmTargetKinds(t).includes("EntityContainer"))).forEach((e=>{r.set((0,o.resolveName)(e).namespace,e),s=e})),1===r.size&&s&&!e.isCds)for(const t of e.getNamespaces())r.set(t,s);for(const o of r.values()){const r=e.getMetadataElement(o);(r?.content??[]).filter((t=>(!n||t.name!==n)&&e.getEdmTargetKinds(r.path+"/"+t.name).includes("EntitySet")&&!t.name.endsWith("_texts"))).forEach((n=>{const o=e.getMetadataElement(r.name+"/"+n.name);if(o?.structuredType){const n=new Map,r=e.getMetadataElement(o?.structuredType);for(const e of r.content){const a=i.primitiveTypeMap[e.edmPrimitiveType];!(t.managedProperties.includes(e.name)&&e?.location?.uri===t.commonNodeModulePath)&&a?.constantExpressionName&&n.set(e.name,a.constantExpressionName)}a.set(o.path,n)}}))}return{entitySetPropertyMap:a,serviceNameSpaceMap:r}},t.getMdElementPathForEntitySet=function(e,t,n){const[,a]=[...e.getRootMetadataElements().entries()].find((([n,a])=>{const o=e.getEdmTargetKinds(n).includes("EntityContainer"),r=(a?.content??[]).find((e=>e.name===t));return o&&("entitySet"===r?.kind||"EntitySet"===r?.kind)}))??[void 0,void 0];if(a)return`${a.path}/${t}`;const r=(0,o.resolveName)(n.split("/")[0])?.namespace;return e.getMetadataElement(`${r}.${t}`)?`${r}.${t}`:[...e.getRootMetadataElements().keys()].find((e=>e===t||e.endsWith(`.${t}`)))||""};function c(e,t){const n=i.primitiveTypeMap[t.name];let a=e.compatiblePrimitiveTypesMap?.[t.name];if(!a){const e=i.primitiveTypeMap[t.name]?.constantExpressionName;a=Object.keys(i.primitiveTypeMap).filter((n=>n!==t.name&&i.primitiveTypeMap[n].constantExpressionName===e))}const o=a.map((e=>({...t,name:e})));return e.compatiblePrimitiveTypesMap||(e.compatiblePrimitiveTypesMap={}),e.compatiblePrimitiveTypesMap[t.name]=a,{compatibleTypes:o,primitiveType:n}}t.hasValueAsSingleNonRecordChildElement=e=>{let t,n=0;const a=(e?.content||[]).filter((e=>e.type===o.ELEMENT_TYPE));for(const e of a)if("Annotation"===e.name)n++;else{if("Record"===e.name||"PropertyValue"===e.name||t)return{result:!1};t=e}return t?{result:!0,embeddedAnnotationsCount:n,singleValueElement:t}:{result:!1}},t.expandWithCompatibleTypes=function(e,t){const n=[...t];return t.forEach((t=>{const{compatibleTypes:a}=c(e,t);if(a.length){const e=a.filter((e=>!n.find((t=>t.name===e.name&&!!t.asCollection==!!e.asCollection))));n.push(...e)}})),n},t.getCompatibleTypesData=c,t.adjustApplicableTermsConstraint=function(e,t){if(!e)return;const n=t?.applicableTerms;n?(e.constraints=e.constraints??{},e.constraints.applicableTerms=n):e.constraints?.applicableTerms&&delete e.constraints.applicableTerms}},84204:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNamespaceAndAlias=t.replaceWithDefaultAlias=t.getGuessedQualifiedName=void 0;const a=n(41810);t.getGuessedQualifiedName=function(e,t){let n="";const a=t.reverseAliasMap,o=e.indexOf("@");o>=0&&(e=e.slice(o+1));const r=e.trim().split("."),i=r.pop(),s=r.join(".").toUpperCase();for(const e in a)if(s===e.toUpperCase()||s===a[e].toUpperCase()){n=o>=0?`@${e}.${i}`:`${e}.${i}`;break}return n},t.replaceWithDefaultAlias=function(e,t,n){const o=(0,a.resolveName)(e,t.aliasMap);if(o&&o.namespace){e=n.getVocabularies().get(o.namespace).defaultAlias+"."+o.name}return e},t.getNamespaceAndAlias=function(e,t,n){let a;if(e&&(a=t.reverseAliasMap[e],!a)){const t=n.vocabularies.getVocabularies().get(e);a=t?t.defaultAlias:null}return[a,e].filter((e=>!!e))}},26290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUnusedNamespaces=t.getUsedNamespaces=void 0;const a=n(41810),o=n(72926),r=(e,t,n)=>{function i(n){(n||"").split("/").filter((e=>e.indexOf("@")>=0)).forEach((n=>{const o=n.indexOf("@"),r=(0,a.resolveName)(n.substr(o+1),e);r.namespace&&t.add(r.namespace)}))}for(let s=0;n.length>s;s++){const l=n[s],p=l.attributes;p&&Object.keys(p).forEach((n=>{const r=p[n].value;if(o.pathExpressionMap[n])i(r);else{const n=(0,a.resolveName)(r,e);n.namespace&&t.add(n.namespace)}}));const c=[];(l.content||[]).forEach((n=>{if(n.type===a.ELEMENT_TYPE)c.push(n);else if(n.type===a.TEXT_TYPE)if(o.pathExpressionMap[l.name])i(n.text);else{const o=(0,a.resolveName)(n.text,e);o.namespace&&t.add(o.namespace)}})),c.length&&r(e,t,c)}};t.getUsedNamespaces=(e,t)=>{const n=new Set;n.add(e.currentFileNamespace);const o=e.aliasMapVocabulary;return t.forEach((e=>{const t=e.name,i=(0,a.resolveName)(t,o);i.namespace&&n.add(i.namespace),r(o,n,e.terms)})),n};t.getUnusedNamespaces=(e,t)=>{const n=new Map;return Object.keys(e.aliasMapVocabulary).forEach((a=>{!t.has(a)&&e.reverseAliasMap[a]&&n.set(a,e.reverseAliasMap[a])})),n}},61625:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDataFieldValueProperty=t.isTemplateProperty=t.isConnectedFieldsRecord=t.isSideEffectsRecord=t.getValueTypeFromTerm=t.getFullyQualifiedNameByAttribute=t.createElementFromAttribute=t.getChildElementForPosition=t.getChildElementPosition=t.getPathTargetInElement=t.getEmptyPathTargetInElement=t.buildPathFromSegments=t.getPathSegments=void 0;const a=n(41810),o=n(72926),r=n(6853);function i(e){const t=(e||"$").substring(1);let n=[];if(t){n=t.split("][");const e=n.length-1;n[0]=n[0].substring(1),n[e]=n[e].substring(0,n[e].length-1)}const a=[];return n.forEach((e=>{let t;t=0===e.indexOf("'")?e.substring(1,e.length-1):parseInt(e,10),a.push(t)})),a}function s(e){const t=[];return e.forEach((e=>{t.push("string"==typeof e?"'"+e+"'":String(e))})),e.length?"$["+t.join("][")+"]":"$"}function l(){return{isName:!1,isAttributeName:!1,isAttributeValue:!1,attribute:null,isSubNode:!1,nodeIndex:-1,isTextSubNode:!1,textNode:null,isElementSubNode:!1,isElementSubNodeName:!1,isWhitespacePosition:!1,beforeSubNodeIndex:-1,element:null,remainingPathForElement:""}}function p(e){return e.startsWith("com.sap.vocabularies.UI.v1.ConnectedFieldsType")}t.getPathSegments=i,t.buildPathFromSegments=s,t.getEmptyPathTargetInElement=l,t.getPathTargetInElement=function(e,t){const n={isName:!1,isAttributeName:!1,isAttributeValue:!1,attribute:null,isSubNode:!1,nodeIndex:-1,isTextSubNode:!1,textNode:null,isElementSubNode:!1,isElementSubNodeName:!1,isWhitespacePosition:!1,beforeSubNodeIndex:-1,element:null,remainingPathForElement:""},o=i(e);if(o.length&&"name"===o[0])n.isName=!0;else if(o.length>1&&"attributes"===o[0])n.isAttributeName="name"===o[2],n.isAttributeValue="value"===o[2],n.attribute=t?t.attributes[o[1]]:null;else if(o.length>1&&"content"===o[0]){if(n.isSubNode=!0,"number"==typeof o[1]&&(n.nodeIndex=o[1],t&&t.content.length>n.nodeIndex&&t.content[n.nodeIndex])){const e=t.content[n.nodeIndex];e.type===a.ELEMENT_TYPE?(n.isElementSubNode=!0,n.element=e,n.remainingPathForElement=s(o.slice(2)),o.length>2&&"name"===o[2]&&(n.isElementSubNodeName=!0)):e.type===a.TEXT_TYPE&&(n.isTextSubNode=!0,n.textNode=e)}}else 1===o.length&&"string"==typeof o[0]&&o[0].startsWith("$")&&(n.isWhitespacePosition=!0,n.beforeSubNodeIndex=parseInt(o[0].substr(1),10));return n},t.getChildElementPosition=function(e,t,n=!1){let o=-1;for(let r=0;r<=e;r++){const i=t.content[r];if(i)if(i.type===a.ELEMENT_TYPE){"Annotation"!==i.name&&o++}else n&&i.type===a.TEXT_TYPE&&r===e&&o++}return o},t.getChildElementForPosition=function(e,t){let n=-1,o=null;return t.content.forEach((t=>{if(!o&&t.type===a.ELEMENT_TYPE){const a=t;"Annotation"!==a.name&&(n++,n===e&&(o=a))}})),o},t.createElementFromAttribute=function(e){const t={type:a.TEXT_TYPE,text:e.value,range:e.valueRange};return{type:a.ELEMENT_TYPE,name:e.name,nameRange:e.nameRange,attributes:{},content:[t],contentRange:e.valueRange}},t.getFullyQualifiedNameByAttribute=function(e,t,n){let o="";if(e&&e.attributes&&e.attributes[n]&&e.attributes[n].value){const r=e.attributes[n].value,i=r.split(".").pop()||"";o=`${(0,a.resolveName)(r,t).namespace}.${i}`}return o},t.getValueTypeFromTerm=function(e,t,n){if(!t)return{name:"Edm.String",asCollection:!1};const{facets:a,constraints:o}=(0,r.getFacetsAndConstraints)(e,t),i={name:t.type,asCollection:!!t.isCollection};if(n&&!t.type.startsWith("Edm.")){const n=e.vocabularies.getType(t.type),a=(0,r.getBuiltInTypeViaUnderlyingType)(e,n,!0);a&&a!==t.type&&(i.name=a)}return Object.keys(a).length&&(i.facets=a),Object.keys(o).length&&(i.constraints=o),i},t.isSideEffectsRecord=function(e){return e.startsWith("com.sap.vocabularies.Common.v1.SideEffectsType")},t.isConnectedFieldsRecord=p,t.isTemplateProperty=function(e,t){return p(e)&&t===o.PropertyNamesSpecial.Template},t.isDataFieldValueProperty=function(e,t){return e.startsWith("com.sap.vocabularies.UI.v1.DataField")&&"Value"===t}},94872:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findReferencedMdElementByPosition=t.getSplitStructureType=t.getSplitStructurePropertyValue=t.getSplitStructurePropertySources=t.rangeContained=void 0;const a=n(41810);function o(e,t,n){if(!e.supportSplit||!t||!t.propertyPathSegments)return{fileUris:null,nestedProperties:null};const a="@"+t.term+(t.qualifier?"#"+t.qualifier:"");let o=e.splitAnnotationKeys&&e.splitAnnotationKeys[t.targetPath]&&e.splitAnnotationKeys[t.targetPath][a];if(o){(n?[...t.propertyPathSegments,"$Type"]:t.propertyPathSegments).forEach((e=>{o=o&&e&&o[e]?o[e]:null}))}if(o){const e=o.$Self||o,t={};return o instanceof Set||Object.keys(o).forEach((e=>{"$Self"!==e&&(t[e]=o[e].$Self||o[e])})),{fileUris:e,nestedProperties:t}}return{fileUris:null,nestedProperties:null}}function r(e,t,n,r,i=!1){if(!e.supportSplit||!t||!t.propertyPathSegments)return null;let s=null,l=null;if(r||(r=o(e,t,n).fileUris),!r||0===r.size)return null;for(let o=e.annotationFileSequence.length-1;o>=0&&!l&&!s;o--)if(r.has(e.annotationFileSequence[o])){const r=e.fileCache[e.annotationFileSequence[o]].serviceFile.content,p=(0,a.getAllNamespacesAndReferences)(r?.namespace,r.references),c=(0,a.getAliasInformation)(p,e.metadata.getNamespaces()),u=n?[...t.propertyPathSegments,"$Type"]:t.propertyPathSegments,m=[];r.targets.filter((e=>{const n=e.name.split("/").map((e=>(0,a.getSegmentWithoutAlias)(c,e))).join("/");return t.targetPath===n})).forEach((e=>{m.push(...e.terms.filter((e=>{const n=(0,a.getElementAttributeValue)(e,"Term"),o=(0,a.resolveName)(n,c.aliasMap).qName,r=(0,a.getElementAttributeValue)(e,"Qualifier");return t.term===o&&(t.qualifier===r||!t.qualifier&&!r)})))})),m.sort(((e,t)=>e.range&&t.range&&(0,a.isBefore)(e.range.start,t.range.start,!0)?1:-1)).forEach((e=>{if(l||s)return;let t=e;u.forEach((e=>{if(t)if(e.includes("@")){if(e.startsWith("@")&&(t=(t.content||[]).find((e=>e.type===a.ELEMENT_TYPE&&"Record"===e.name))),t){const[n,o]=e.split("@").pop().split("#"),r=(t.content||[]).filter((e=>e.type===a.ELEMENT_TYPE&&"Annotation"===e.name)).find((e=>{const t=(0,a.resolveName)((0,a.getElementAttributeValue)(e,"Term")??"",c.aliasMap).qName,r=(0,a.getElementAttributeValue)(e,"Qualifier")??"";return t===n&&r===(o??"")}));t=r}}else{const n=(t.content||[]).find((e=>e.type===a.ELEMENT_TYPE&&"Record"===e.name));if(n)if("$Type"===e){t=null;const e=(0,a.getElementAttribute)(n,"Type");l=e&&(e.valueRange||i)?e.value:null,l&&(l=(0,a.resolveName)(l,c.aliasMap).qName)}else t=(n.content||[]).find((t=>t.type===a.ELEMENT_TYPE&&"PropertyValue"===t.name&&e===(0,a.getElementAttributeValue)(t,"Property")))}})),t?.content?.some((e=>e.type===a.ELEMENT_TYPE&&"Annotation"!==e.name))||(t=null),t&&(s=t)}))}return l||s}t.rangeContained=function(e,t){return(0,a.isBefore)(e.start,t.start,!0)&&(0,a.isBefore)(t.end,e.end,!0)},t.getSplitStructurePropertySources=o,t.getSplitStructurePropertyValue=r,t.getSplitStructureType=function(e,t,n=!1){return r(e,t,!0,null,n)},t.findReferencedMdElementByPosition=function(e,t,n){let o="";for(const r of Object.keys(e.metadataReferenceLocations)){for(const i of Object.keys(e.metadataReferenceLocations[r])){if(e.metadata.getMetadataElementLocations(i).some((e=>e.uri===t&&(0,a.positionContained)(e.range,n)))){o=i;break}}if(!o)break}return(e.metadata.getMetadataElement(o)?.content||[]).find((e=>t===e.location?.uri&&(0,a.positionContained)(e.location.range,n)))?.path||o}},51429:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAnnotationPathOfValueListProperty=t.isAnnotationPathOfCollectionPathProperty=t.isTargetPropertiesOfSideEffectsPath=t.extractValueListPropertiesFromAnnotation=t.getValueListPropertyPathValue=t.getValueListLocalDataPropertyPath=t.getValueListCollectionPathValue=t.isValueListProperty=t.isCollectionPathProperty=t.isValueListParameterRecord=t.isCommonValueListRecord=t.VALUE_LIST_PARAM_IN_OUT=void 0;const a=n(53308),o=n(41810),r=n(33261);function i(e){return"com.sap.vocabularies.Common.v1.ValueListType"===e}function s(e){return e.startsWith("com.sap.vocabularies.Common.v1.ValueListParameter")}function l(e){let t;const n=(0,r.getRecordPropertyElement)(e,a.PropertyNamesSpecial.CollectionPath);if(n){const e=(0,o.getElementAttribute)(n,"String");if(e)t=e.value;else{const e=(0,o.elementsWithName)("String",n);e.length&&(t=(0,o.getSingleTextNode)(e[0])?.text)}}return t}function p(e){let t;const n=(0,r.getRecordPropertyElement)(e,a.PropertyNamesSpecial.LocalDataProperty);if(n){const e=(0,o.getElementAttribute)(n,"PropertyPath");if(e)t=e.value;else{const e=(0,o.elementsWithName)("PropertyPath",n);e.length&&(t=(0,o.getSingleTextNode)(e[0])?.text)}}return t}function c(e){let t;const n=(0,r.getRecordPropertyElement)(e,a.PropertyNamesSpecial.ValueListProperty);if(n){const e=(0,o.getElementAttribute)(n,"String");if(e)t=e.value;else{const e=(0,o.elementsWithName)("String",n);e.length&&(t=(0,o.getSingleTextNode)(e[0])?.text)}}return t}t.VALUE_LIST_PARAM_IN_OUT="inOut",t.isCommonValueListRecord=i,t.isValueListParameterRecord=s,t.isCollectionPathProperty=function(e,t){return i(e)&&t===a.PropertyNamesSpecial.CollectionPath},t.isValueListProperty=function(e,t){return s(e)&&t===a.PropertyNamesSpecial.ValueListProperty},t.getValueListCollectionPathValue=l,t.getValueListLocalDataPropertyPath=p,t.getValueListPropertyPathValue=c,t.extractValueListPropertiesFromAnnotation=function(e){const n={collectionPath:null,parameters:[]};try{const i=(0,o.elementsWithName)("Record",e)[0];if(i){n.collectionPath=l(i);const e=(0,r.getRecordPropertyElement)(i,a.PropertyNamesSpecial.Parameters);if(e){const a=(0,o.elementsWithName)("Collection",e)[0];a&&(0,o.elementsWithName)("Record",a).forEach((e=>{const a=(0,o.getElementAttributeValue)(e,"Type")??"";if(a){const o=c(e);a.indexOf("ValueListParameter")>=0&&n.parameters.push({type:t.VALUE_LIST_PARAM_IN_OUT,localDataProperty:p(e),valueListProperty:o})}}))}}}catch(e){}return n},t.isTargetPropertiesOfSideEffectsPath=function(e){return RegExp(/@[\w.]+\.SideEffects\/TargetProperties/).test(e)||RegExp(/@[\w.]+\.SideEffects#[\w.]+\/TargetProperties/).test(e)},t.isAnnotationPathOfCollectionPathProperty=function(e){return RegExp(/@[\w.]+\.ValueList\/CollectionPath/).test(e)||RegExp(/@[\w.]+\.ValueList#[\w.]+\/CollectionPath/).test(e)},t.isAnnotationPathOfValueListProperty=function(e){return RegExp(/@[\w.]+\.ValueList\/Parameters\/ValueListProperty/).test(e)||RegExp(/@[\w.]+\.ValueList#[\w.]+\/Parameters\/ValueListProperty/).test(e)}},33261:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVirtualPropertyRecordByPosition=t.getVirtualProperties=t.getPropertyStringValue=t.getRecordPropertyElement=void 0;const a=n(41810);t.getRecordPropertyElement=(e,t)=>(e?.content??[]).find((e=>e.type===a.ELEMENT_TYPE&&"PropertyValue"===e.name&&(0,a.getElementAttributeValue)(e,"Property")===t));t.getPropertyStringValue=e=>{let t;if(e){const n=(0,a.getElementAttribute)(e,"String");if(t=n&&n.value,!t&&""!==t){t=((e.content??[]).find((e=>e.type===a.ELEMENT_TYPE&&"String"===e.name))?.content??[]).find((e=>e.type===a.TEXT_TYPE))?.text}}return(t??"").trim()};t.getVirtualProperties=e=>{const n=[],o=(e.content??[]).find((e=>e.type===a.ELEMENT_TYPE&&"Collection"===e.name));return o&&(o.content??[]).filter((e=>e.type===a.ELEMENT_TYPE)).forEach((e=>{const a=(0,t.getRecordPropertyElement)(e,"Name"),o=(0,t.getPropertyStringValue)(a);o&&n.push(o)})),n};t.getVirtualPropertyRecordByPosition=(e,t)=>{let n;const o=(e.content??[]).find((e=>e.type===a.ELEMENT_TYPE&&"Collection"===e.name));return o&&(o.content??[]).filter((e=>e.type===a.ELEMENT_TYPE)).forEach((e=>{(0,a.positionContained)(e.range,t)&&(n=e)})),n}},30151:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDynamicExpressionDocumentation=t.convertDynamicExpressionTypeToValueType=t.convertDynamicExpressionTypeToString=t.getComparableTypes=t.resolveDynamicExpressionTypes=t.getAllowedTypesForDynamicExp=t.getTypeOfPathExpression=t.getTypesForElement=t.addDynamicExpressionsForAnyType=t.generateUnsupportedElementWarning=t.checkDynamicExpression=t.checkValueForVariantType=t.addDynamicExpressionsWithType=void 0;const a=n(72307),o=n(36712),r=n(72926),i=n(41810),s=n(61625),l=n(54993),p=n(86337),c=n(35504),u=n(60895),m=n(46449),d=n(12668);function y(e,t,n,o,i,s=!0){let c=[];const u=function(e,t,n){const a=[];return n.length&&(0,l.expandWithCompatibleTypes)(e,t).forEach((e=>{e.asCollection||n.find((t=>t===e.name))?a.push(e):e.name===r.EdmType.PrimitiveType?a.push(...Object.keys(r.primitiveTypeMap).filter((e=>n.find((t=>t===e)))).map((t=>({...e,name:t})))):n.find((e=>e===r.EdmType.PrimitiveType))&&r.primitiveTypeMap[e.name]&&a.push(e)})),a}(e,t,n),m=0===u.length,d=e=>e.message+`${e.range.start.line},${e.range.start.character}:${e.range.end.line},${e.range.end.character}`;let y;0===u.length&&u.push(...t);for(const e of u){const t=i(e);if(!t.length){c=[],y=[];break}y=y||t,c.push(...t.filter((e=>!c.find((t=>d(t)===d(e))))))}return t.length>1&&m&&(c=s?function(e,t,n){const o=e.filter((e=>e.severity!==a.DiagnosticSeverity.Error)),r=e.find((e=>e.severity===a.DiagnosticSeverity.Error));if(r){const e=t.map((e=>(0,l.convertValueTypeToString)(e))).join(", ");o.push({...r,range:n||r.range,message:p.i18n.t("Invalid_value_for_types_0",{types:e})})}return o}(c,t,o):y),c}t.addDynamicExpressionsWithType=function(e,t){const n=!!r.primitiveTypeMap[e.name],a=(t,a)=>e.name===t||e.name===r.EdmType.PrimitiveType&&a||t===r.EdmType.PrimitiveType&&n;r.dynamicExpressionSignatureMap.forEach(((n,i)=>{const s=n.resultType,l=!!r.primitiveTypeMap["object"==typeof s?s.name:s];let p=!1;"object"==typeof s?s.constraints?s.name===r.EdmType.Untyped&&s.constraints.compatibleWithRequestedType&&(p=!0):!!e.asCollection==!!s.isCollection&&(p=a(s.name,l)):p=s===r.EdmType.Untyped||!e.asCollection&&a(s,l),p&&(t[i]=o.CompletionItemCategory.DynamicExpressionName)}))},t.checkValueForVariantType=y;function g(e,t,n,o,r,s,u,m,d,g){return n.content.forEach((f=>{if(!(e=>e.some((e=>e.severity===a.DiagnosticSeverity.Error)))(g)&&f.type===i.ELEMENT_TYPE)if("Annotation"!==f.name){d++;const e=f,t=o?.parameters[d];if(t)m.push({node:e,parameter:t});else{const t=p.i18n.t("Unknown_child_element_0",{element:f.name});g.push({message:t,severity:a.DiagnosticSeverity.Error,range:e.nameRange})}}else{const a=f,o=[n.name];t.length&&t[0].asCollection&&o.push("Collection"),g.push(...y(e.context,t,[],a.range,(t=>{const n=(0,l.convertValueTypeToString)(t);return(0,c.checkAnnotationValue)(e.context,a,e.pathBase,null,"",e.aliasInfo,u,r,s,t?.constraints?.applicableTerms,o,n)})))}})),{messages:g,childElementIndex:d}}function f(e,t,n,o,r,c,u,m,d,g,f,P){const E=e.node;let v=!0;const _={...n,nodeContext:n.nodeContext?{...n.nodeContext}:null},A=b(_,t,c,r,f);v&&(v=A.keepFacetsAndConstraints);const C=A.possibleTypes;if(E.type===i.ATTRIBUTE_TYPE&&E.name===e.parameter.name){const e=(0,i.resolveName)(E.value,n.aliasInfo.aliasMap);if(!C.filter((t=>t===e.qName)).length){const e=p.i18n.t("Invalid_type_0",{type:E.value});P.push({message:e,severity:a.DiagnosticSeverity.Error,range:E.valueRange})}}else{let e=null;e=E.type===i.ELEMENT_TYPE?E:(0,s.createElementFromAttribute)(E);const t=C.map((e=>({...(0,l.convertValueTypeFromString)(e),facets:v?o[0].facets:null,constraints:v?o[0].constraints:null})));P.push(...function(e,t,n,o,r,i,s,l){if("Record"===n.name&&e.nodeContext?.noComplexTypeSupported||"Collection"===n.name&&e.nodeContext?.noCollectionsSupported||"EnumMember"===n.name&&e.nodeContext?.noEnumTypeSupported&&!t.find((t=>!t.name.startsWith("Edm")&&"EnumType"===e.context.vocabularies.getType(t.name)?.kind)))return[h(e,n)];const c=T(e,n,e.pathBase),u=e.nodeContext?.strictEqualityComparison&&"Null"===n.name,m=y(e.context,t,c,n.range,(t=>{if(e.nodeContext?.strictEqualityComparison&&"Null"===n.name)return[];const o=r(e,t);if(!Object.keys(o).includes(n.name)){return[{message:p.i18n.t("Element_not_allowed_here_0",{element:n.name}),severity:a.DiagnosticSeverity.Error,range:n.nameRange||n.range,rule:"record-collection-path-not-allowed",data:{name:n.name,type:t}}]}return[]}));if(m.length&&!u)return m;return i(e,t,n,o,s,l)}(_,t,e,r,u,m,d,g))}}function h(e,t){return{message:p.i18n.t("Element_0_and_its_child_elements_are_not_validated_by_current_version_of_XML_annotation_language_server",{element:t.name}),severity:a.DiagnosticSeverity.Information,range:e.context.supportSplit?t.contentRange:t.nameRange,rule:i.NO_VALIDATION_FOR_SUBNODES,data:e.context.supportSplit?{name:t.content[0].name}:{name:""}}}function T(e,t,n){let a=[];if(t)if(r.primitiveValueConstantExpressionMap[t.name])a.push(r.primitiveValueConstantExpressionMap[t.name].defaultType);else if(r.pathExpressionMap[t.name]){const n=(0,i.getSingleTextNode)(t)?.text,o=v(n||"",e);o&&a.push(o)}else if(r.dynamicExpressionSignatureMap.has(t.name))a=function(e,t,n,a){const o=r.dynamicExpressionSignatureMap.get(t.name).resultType,i="object"==typeof o?o.name:o;if(r.primitiveTypeMap[i])a.push(i);else if(i===r.EdmType.Untyped&&"If"===t.name){const o=(0,s.getChildElementForPosition)(1,t);a.push(...T(e,o,n));const r=(0,s.getChildElementForPosition)(2,t);r&&(T(e,r,n)||[]).forEach((e=>{a.includes(e)||a.push(e)}))}return a}(e,t,n,a);else if("Apply"===t.name){const e=(0,i.getElementAttributeValue)(t,"Function");e&&a.push(...(0,m.getFunctionResultTypes)(e).map((e=>(0,l.convertValueTypeToString)(e))))}else"EnumMember"===t.name&&(a=function(e,t,n){const a=(0,i.getSingleTextNode)(t);if(a){const t=a.text.split(" ").filter((e=>!!e)),[o,r]=(0,d.getEnumValueSegments)(t[0].trim());if(o&&r){const t=(0,i.resolveName)(o+r.replace("/",""),e.aliasInfo.aliasMap);"EnumType"===e.context.vocabularies.getType(t.qName)?.kind&&n.push(t.qName)}}return n}(e,t,a));return a}function P(e,t,n,a){let o=t.properties.get(a);if(!o&&t.isAbstract){const t=e.context.vocabularies.getDerivedTypeNames(n.name);for(const n of[...t.keys()]){const t=e.context.vocabularies.getType(n);if("ComplexType"===t?.kind&&t.properties.has(a)){o=t.properties.get(a);break}}}if(o)return n={name:o.type,asCollection:o.isCollection,constraints:o.constraints,facets:o.facets}}function E(e){let t;const n=e.underlyingType||e;return t="string"==typeof n?{name:n}:{name:n.name,asCollection:!1,constraints:n.constraints,facets:n.facets},t}function v(e,t){const{segments:n}=(0,u.determineSegmentsFromPath)(e,t),{targetPathSegments:a,embeddedSegments:o,termQualifier:r}=function(e){let t="";const n=[],a=[];return(e||[]).forEach((e=>{if(t)a.push(e);else{const a=e.indexOf("@");a<0?n.push(e):t=e.slice(a+1)}})),{targetPathSegments:n,embeddedSegments:a,termQualifier:t}}(n),p=a.join("/"),m=(0,c.lookupTarget)(t.context,p,t.aliasInfo)?.metadataElement;if(!r)return m?.edmPrimitiveType;{const e=(0,i.resolveName)(r.split("#").shift(),t.aliasInfo.aliasMapVocabulary),n=t.context.vocabularies.getTerm(e.qName);if(!n||e.namespace===t.context.vocabularies.cdsVocabulary.namespace)return;let a=(0,s.getValueTypeFromTerm)(t.context,n);if(!o.length)return(0,l.convertValueTypeToString)(a);if(a=function(e,t,n){for(let a=0;a<t.length;a++){const o=t[a];if(n.asCollection&&!isNaN(Number(o))){n.asCollection=!1;continue}const r=e.context.vocabularies.getType(n.name);if(!r)return;if("ComplexType"===r.kind){if(!(n=P(e,r,n,o)))return}else if("EnumType"===r.kind)n={name:r.name,asCollection:!1};else{if(a!==t.length-1)return;n=E(r)}}return n}(t,o,a),a)return(0,l.convertValueTypeToString)(a)}}t.checkDynamicExpression=function(e,t,n,o,r,i,s,c,u,m){let d=[];const y=e=>e.some((e=>e.severity===a.DiagnosticSeverity.Error)),h=[],T=new Map;let P=-1;const E=g(e,t,n,r,u,m,T,h,P,d);if(d=E.messages,P=E.childElementIndex,!y(d)){const a=i(t,e).map((e=>(0,l.convertValueTypeToString)(e))),o=h.some((e=>"Null"===e.node.name));e.nodeContext.nullExpressionParameterFound=e.nodeContext.nullExpressionParameterFound||o,h.forEach(((o,i)=>{f(o,i,e,t,n,r,s,c,u,m,a,d)}))}const v=r.parameters[P+1];if(v&&!y(d)){const e="object"==typeof v.type?v.type.constraints:null;if(v.isMandatory&&!(e?.optionalWithInParent||[]).includes(o?.name)){const e=p.i18n.t("Missing_mandatory_child_element_0_on_position_1",{elementName:n.name,position:String(P+2)});d.push({message:e,severity:a.DiagnosticSeverity.Error,range:n.nameRange})}}return d},t.generateUnsupportedElementWarning=h,t.addDynamicExpressionsForAnyType=function(e){return r.dynamicExpressionSignatureMap.forEach(((t,n)=>{const a=t.resultType;("object"==typeof a?a.name===r.EdmType.Untyped&&a.constraints.compatibleWithRequestedType:a===r.EdmType.Untyped)&&(e[n]=o.CompletionItemCategory.DynamicExpressionName)})),e},t.getTypesForElement=T,t.getTypeOfPathExpression=v,t.getAllowedTypesForDynamicExp=function(e,t,n,a,o){let r,i=[],l=!0;const p=(0,s.getPathTargetInElement)(a,n);if(p.isElementSubNode&&(r=(0,s.getChildElementPosition)(p.nodeIndex,n)),r>-1){const a=b(e,r,t,n,o);l&&(l=a.keepFacetsAndConstraints),i=a.possibleTypes}return{allowedTypes:i,completionItems:[],keepFacetsAndConstraints:l}};function b(e,t,n,a,o){let i=[],p=!1;const c=n.parameters[t];return"object"==typeof c.type?({valueHandlingContext:e,possibleTypes:i,keepFacetsAndConstraints:p}=function(e,t,n,a,o){let i=[],p=!1;const c=t.type,u=c.constraints?.comparableTypeParameterIndex;if(u>=0){e.nodeContext={nullExpressionParameterFound:e.nodeContext?.nullExpressionParameterFound,nestedNodesMessages:e.nodeContext?.nestedNodesMessages};const t=n.parameters[u],a=(0,s.getChildElementForPosition)(u,o);i="Null"===a.name?[r.EdmType.PrimitiveType]:_(T(e,a,e.pathBase)),c.isCollection&&(e.nodeContext.restrictedTypes=i,i=[A(c.name===r.EdmType.Untyped?{...c,name:r.EdmType.PrimitiveType}:c)]),p=!("object"!=typeof t.type||!t.type.constraints?.compatibleWithRequestedType)}else c.constraints?.compatibleWithRequestedType?(i=a,p=!0):c.name===r.EdmType.Untyped||c.name===r.EdmType.PrimitiveType?(i.push((0,l.convertValueTypeToString)({name:r.EdmType.PrimitiveType,asCollection:c.isCollection})),e.nodeContext={nullExpressionParameterFound:e.nodeContext?.nullExpressionParameterFound,nestedNodesMessages:e.nodeContext?.nestedNodesMessages}):(i.push(A(c.name===r.EdmType.Untyped?{...c,name:r.EdmType.PrimitiveType}:c)),e.nodeContext={nullExpressionParameterFound:e.nodeContext?.nullExpressionParameterFound,nestedNodesMessages:e.nodeContext?.nestedNodesMessages});return Object.keys(e.nodeContext).forEach((t=>void 0===e.nodeContext[t]&&delete e.nodeContext[t])),((e,t)=>{"object"==typeof t.type&&(e.nodeContext={...e.nodeContext||{},noComplexTypeSupported:e.nodeContext?.noComplexTypeSupported||t.type.constraints?.noComplexTypeSupported,noEnumTypeSupported:e.nodeContext?.noEnumTypeSupported||t.type.constraints?.noEnumTypeSupported,noCollectionsSupported:e.nodeContext?.noCollectionsSupported||t.type.constraints?.noCollectionsSupported})})(e,t),{valueHandlingContext:e,possibleTypes:i,keepFacetsAndConstraints:p}}(e,c,n,o,a)):(e.nodeContext={nullExpressionParameterFound:e.nodeContext?.nullExpressionParameterFound,nestedNodesMessages:e.nodeContext?.nestedNodesMessages},c.type===r.EdmType.Untyped||c.type===r.EdmType.PrimitiveType?i.push(r.EdmType.PrimitiveType):i.push(c.type)),n.metadata?.comparisonOperator&&(e.nodeContext={...e.nodeContext||{},comparisonOperator:!0,strictEqualityComparison:!!n.metadata.strictEqualityComparison}),Object.keys(e.nodeContext).forEach((t=>("nullExpressionParameterFound"===t||"nestedNodesMessages"===t)&&void 0===e.nodeContext[t]&&delete e.nodeContext[t])),{possibleTypes:i,keepFacetsAndConstraints:p}}function _(e){const t=new Set;return e.forEach((e=>{if(!t.has(e)){if((0,l.convertValueTypeFromString)(e).asCollection)t.add(e);else{const n=r.primitiveTypeMap[e]?.compatibleTypeGroup;r.primitiveTypeMap[e]?.compatibleTypeGroup?Object.keys(r.primitiveTypeMap).filter((e=>r.primitiveTypeMap[e].compatibleTypeGroup===n)).forEach((e=>t.add(e))):t.add(e)}}})),[...t.keys()]}function A(e){return(0,l.convertValueTypeToString)(C(e))}function C(e){return"object"==typeof e?{name:e.name,asCollection:e.isCollection}:{name:e}}t.resolveDynamicExpressionTypes=b,t.getComparableTypes=_,t.convertDynamicExpressionTypeToString=A,t.convertDynamicExpressionTypeToValueType=C,t.getDynamicExpressionDocumentation=function(e){const t=r.dynamicExpressionSignatureMap.get(e),n=r.dynamicExpressionDocumentations.get(e),a=t.metadata?.comparisonOperator;if(!t||!n)return null;let o=[];o.push(`**Name:** ${e} \n`),o.push(`**Description:** ${n.description} \n`),a&&o.push(r.comparisonOperatorDescription+"\n"),o=function(e,t){return(e||[]).forEach(((e,n)=>{let a="";const o=Array.isArray(e.type)?e.type[0]:e.type,i="object"==typeof o?o:null;let s="string"==typeof o?o:i.name;s===r.EdmType.Untyped&&(s=r.EdmType.PrimitiveType),i&&(isNaN(i.constraints?.comparableTypeParameterIndex)||(s="comparable with argument in position "+(i.constraints?.comparableTypeParameterIndex+1)),i.constraints?.compatibleWithRequestedType&&(s="compatible with the type expected by the surrounding element or expression"),i.isCollection&&(s="Collection("+s+")")),a+="Type: "+s,e?.isMandatory&&(a+=". Mandatory"),i?.constraints?.optionalWithInParent&&(a+=` (optional if parent element is ${i?.constraints?.optionalWithInParent.join(" or ")})`),t.push(`**Argument ${n+1}:** ${a} \n`)})),t}(t?.parameters,o);const i=(0,m.convertParameterTypeToValueType)(t.resultType);return i.name===r.EdmType.Untyped&&"object"==typeof t.resultType&&t.resultType.constraints?.compatibleWithRequestedType?o.push("**ReturnType:** compatible with the type expected by the surrounding element or expression \n"):o.push(`**ReturnType:** ${(0,l.convertValueTypeToString)(i)} \n`),n.note&&o.push(`**Note:** ${n.note} \n`),o}},12668:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enumHover=t.handleEnumValue=t.getEnumValueSegments=void 0;const a=n(72307),o=n(36712),r=n(84204),i=n(86337),s=n(41810);t.getEnumValueSegments=e=>(new RegExp(/((?:\w{1,127}\.)+)(\w{1,127}\/)?(\w{1,127})?/g).exec(e)||[null,null,null,null]).splice(1,3);const l=(e,n,a,o)=>(e||"").split(" ").filter((e=>!!e)).map((e=>{const[r,i,s]=(0,t.getEnumValueSegments)(e.trim()),l=(n.values||[]).find((e=>o.map((e=>e+".")).includes(r)&&a+"/"===i&&e.name===s)),p={text:e,prefix:r,type:i,name:s,enumMember:l};if(!l&&r&&i&&s){const e=o.map((e=>(e+".").toUpperCase())),t=(n.values||[]).find((t=>e.includes(r.toUpperCase())&&(a+"/").toUpperCase()===i.toUpperCase()&&t.name.toUpperCase()===s.toUpperCase()));if(p.caseInsensitiveEnumMember=t,t){let n=e.find((e=>e===r.toUpperCase()));n=o.find((e=>e.length===n.length-1));const i=`${n}.${a}/${t.name}`;p.correctText=i}}return p})),p=(e,t,n)=>({start:{line:e.start.line,character:e.start.character+t},end:{line:e.start.line,character:e.start.character+t+n}});const c=(e,t,n,o,c)=>{const u=e.context.vocabularies.getType(t.name),m=e.context,d=(0,s.resolveName)(t.name,e.aliasInfo.aliasMap).namespace,y=(0,r.getNamespaceAndAlias)(d,e.aliasInfo,m),g=t.name.substring(t.name.lastIndexOf(".")+1),f={},h=[];if(u){const e=u.isFlags,t=l(n,u,g,y),r=t.reduce(function(e,t,n){return(a,o,r)=>{const i=!!o.enumMember,s=!!o.caseInsensitiveEnumMember;let l,p=e.indexOf(o.text);e=e.slice(p+o.text.length),0!==r&&(p=a[r-1].offset+a[r-1].text.length+p),i?l=o.enumMember.experimental:s&&(l=o.caseInsensitiveEnumMember.experimental);const c={index:r,isValid:i,isCaseIssue:s,deprecated:{isDeprecated:t.deprecated,description:t.deprecatedDescription},experimental:{type:t.experimental,value:l},offset:p,isDuplicate:!1,text:o.text,correctText:o.correctText};return i&&(n[o.text]=n[o.text]?n[o.text]+1:1),a.push(c),a}}(n,u,f),[]);if(t.length>0)r.forEach(function(e,t,n,o){return r=>{if(r.isCaseIssue){let n=i.i18n.t("Invalid_enum_value_0",{value:r.text});n=`${n}. ${i.i18n.t("Did_you_mean_0",{proposedValue:r.correctText})}`,n=n.replace(/&#x2F;/g,"/");const l=e?e[r.index]:p(t,r.offset,r.text.length),c={severity:a.DiagnosticSeverity.Error,message:n,range:l,rule:s.INVALID_ENUM_MEMBER_TYPE,data:{caseCheck:{value:r.text,proposedValue:r.correctText,lookupPath:["vocabularies",r.text],isNamespacedValue:!1}}};o.push(c)}if(!r.isValid&&!r.isCaseIssue){let n=i.i18n.t("Invalid_enum_value_0",{value:r.text});n=n.replace(/&#x2F;/g,"/");const l=e?e[r.index]:p(t,r.offset,r.text.length),c={severity:a.DiagnosticSeverity.Error,message:n,range:l,rule:s.INVALID_ENUM_MEMBER_TYPE,data:{value:r.text}};o.push(c)}if(r.isValid&&n[r.text]>1){const n=i.i18n.t("Duplicate_enum_value");o.push({message:n,severity:a.DiagnosticSeverity.Warning,range:e?e[r.index]:p(t,r.offset,r.text.length)})}if(r.deprecated.isDeprecated){const n=r.deprecated.description?": "+r.deprecated.description:"",s=i.i18n.t("Enum_value_is_deprecated_0",{deprecationDescription:n});o.push({message:s,severity:a.DiagnosticSeverity.Warning,range:e?e[r.index]:p(t,r.offset,r.text.length)})}if(r.experimental.type||r.experimental.value){const n=r.experimental.type?"type: "+r.experimental.type:"value: "+r.experimental.value,s=i.i18n.t("Experimental_0",{info:n});o.push({message:s,severity:a.DiagnosticSeverity.Information,range:e?e[r.index]:p(t,r.offset,r.text.length)})}}}(c,o,f,h));else{const e=i.i18n.t("Enum_value_required");h.push({message:e,severity:a.DiagnosticSeverity.Error,range:o})}if(!e&&r.length>1){const e=i.i18n.t("Multiple_enum_values_not_allowed");h.push({message:e,severity:a.DiagnosticSeverity.Error,range:o})}}return h};t.handleEnumValue=function(e,t,n,a,r,i,l){return r?((e,t,n,a,r)=>{const i=e.context.vocabularies.getType(t.name),l=(0,s.resolveName)(t.name,e.aliasInfo.aliasMap),c=l.namespace,u=l.name,m=[];if(i){const t=((e,t,n)=>{const a=(t||"").length;let o="",r="",i=a;for(;i>0&&n.test(t.substr(i-1,1));)o=t.substr(i-1,1)+o,i--;for(i=a;n.test(e.substr(i,1));)r+=e.substr(i,1),i++;return{completionOffset:a,tokenOffset:a-o.length,tokenHead:o,tokenTail:r}})(n,r,new RegExp(/[./\w]/)),l=t.tokenHead+t.tokenTail,d=n.split(" ").filter((e=>e!==l)),y=[];d.forEach((t=>{const n=(0,s.resolveName)(t,e.aliasInfo.aliasMap).qName;y.push(n)})),i.values.forEach((n=>{const r=`${c}.${u}`,d=`${c}.${u}/${n.name}`,g=(0,s.toAliasQualifiedName)(d,e.aliasInfo),f=t.tokenHead.toUpperCase();let h=g;if(!g.toUpperCase().startsWith(f)&&d.toUpperCase().startsWith(f)&&(h=d),!y.includes(d)){const e=a?p(a,t.tokenOffset,l.length):null,s={id:r,name:h,text:h,category:o.CompletionItemCategory.EnumerationMember,detail:n.description||"",deprecated:!!i.deprecated,affectedRange:e};m.push(s)}}))}return m})(e,t,n,a,i):c(e,t,n,a,l)},t.enumHover=function(e,t,n,o,i){let c;const u=e.context.vocabularies.getType(t.name),m=(0,s.resolveName)(t.name,e.aliasInfo.aliasMap),d=m.namespace,y=t.name,g=(0,r.getNamespaceAndAlias)(d,e.aliasInfo,e.context);if(u){const t=l(n,u,m.name,g);for(const r of t){const t=r.name.split("/").pop(),s=n.toString().indexOf(r.text),l=p(o,s,r.text.length);if(i.line===l.start.line&&i.character>l.start.character&&i.character<l.end.character&&r.enumMember){c={contents:{kind:a.MarkupKind.Markdown,value:e.context.vocabularies.getDocumentation(y,t,e.aliasInfo).join("\n")},range:l};break}}}return c}},46449:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTemplateVariableLocations=t.checkApplyFunctionProperty=t.checkApplyFunctionMandatoryParameters=t.checkFunctionNameForValueType=t.isSupportedFunction=t.getFunctionDocumentation=t.convertParameterTypeToValueType=t.findTemplateParameterIndex=t.getTemplateTextNode=t.getTemplateVariablePositions=t.getTemplateVariableNames=t.handleTemplateVariableCompletion=t.getFunctionParameterTypeDefinitions=t.getFunctionParameterDefinitions=t.isParameterOfSpecificKind=t.isParameterOfStringTemplateKind=t.getFunctionResultTypes=t.getPropertyNamesProvidingFunctionParameters=t.getFunctionNamesForValueType=t.handleFunctionName=void 0;const a=n(72307),o=n(41810),r=n(53308),i=n(72926),s=n(36712),l=n(54993),p=n(61625),c=n(6853);function u(e,t){const n={...e};if(!n.name.startsWith("Edm.")&&t){const e=t.context,a=e.vocabularies.getType(n.name),o=a?(0,c.getBuiltInTypeViaUnderlyingType)(e,a,!0):"";o&&o!==n.name&&(n.name=o)}return[...i.functionSignatures].filter((e=>m(e[0]).some((e=>{let t=e.name===n.name;return t||e.name!==i.EdmType.PrimitiveType||(t=!!i.primitiveTypeMap[n.name]),t||n.name!==i.EdmType.PrimitiveType||(t=!!i.primitiveTypeMap[e.name]),t=t&&!!n.asCollection==!!e.asCollection,t})))).map((e=>e[0]))}function m(e){const t=i.functionSignatures.get(e),n=[];if(t){(Array.isArray(t)?t:[t]).forEach((e=>{n.push(E(e.resultType))}))}return n}function d(e,t,n){const a=(0,o.getElementAttributeValue)(e,"Function")||"";if(!i.functionSignatures.has(a))return!1;const r=y(a,t)[0];if(!r)return!1;const s=r&&Array.isArray(r.type)?r.type[0]:r.type;return"object"==typeof s&&s.kind===n&&(n!==i.TEMPLATE_KIND||s.name===i.EdmType.String)}function y(e,t){const n=[],a=i.functionSignatures.get(e);return a&&(Array.isArray(a)?a:[a]).forEach((e=>{let a;const o=e.parameters.find((e=>e.isVariadic));t<e.parameters.length?a=e.parameters[t]:o&&(a=o),n.push(a||null)})),n}function g(e,t){const n=[],a=i.functionSignatures.get(e);return a&&(Array.isArray(a)?a:[a]).forEach((e=>{const a=[];let o;const r=e.parameters.find((e=>e.isVariadic));t<e.parameters.length?o=e.parameters[t]:r&&(o=r),o&&a.push(...Array.isArray(o.type)?o.type:[o.type]),n.push(a)})),n}function f(e,t){let n=[];const a=T(e,t)?.text;return a&&(n=(a.match(/({\w*})/g)||[]).map((e=>e.replace(/[{}]/g,"")))),n}function h(e,t){const n=new Map,o=t?.start.line,r=t?.start.character;if(e){(e.match(/({\w*})/g)||[]||[]).forEach((i=>{const s=i.replace(/[{}]/g,"");if(n.set(s,[]),t){let t=0;for(;t>=0;)if(t=e.indexOf(i,t),t>=0){const e=a.Range.create(a.Position.create(o,r+t+1),a.Position.create(o,r+t+i.length-1));n.get(s).push(e),t+=i.length}}}))}return n}function T(e,t){const n=(0,p.getChildElementForPosition)(t,e);if("String"===n?.name)return(n.content||[]).find((e=>e.type===o.TEXT_TYPE))}function P(e){const t=[],n=i.functionSignatures.get(e);return n&&(Array.isArray(n)?n:[n]).forEach((e=>{t.push(e.parameters.findIndex((e=>{const t=Array.isArray(e.type)?e.type[0]:e.type;return"object"==typeof t&&t.kind===i.TEMPLATE_KIND})))})),t}function E(e){return"string"==typeof e?(0,l.convertValueTypeFromString)(e):{name:e.name,asCollection:e.isCollection}}function v(e){const t=i.functionSignatures.get(e),n=i.functionDocumentations.get(e);if(!t||!n)return null;let a=[];a.push(`**Name:** ${e} \n`),a.push(`**Description:** ${n.description} \n`),n.note&&a.push(`**Note:** ${n.note} \n`);const o=i.functionSignatures.get(e);a=function(e,t){return(e||[]).forEach(((e,n)=>{let a="";const o=Array.isArray(e.type)?e.type[0]:e.type,r="object"==typeof o?o:null;let i="string"==typeof o?o:r.name;r&&r.isCollection&&(i="Collection("+i+")"),a+="Type: "+i,e?.isMandatory&&(a+=". Mandatory"),e?.isVariadic&&(a+=". Variadic"),r?.kind&&(a+=". Kind: "+r?.kind),t.push(`**Argument ${n+1}:** ${a} \n`)})),t}((o&&Array.isArray(o)?o[0]:o)?.parameters,a);const r=m(e)[0];return r&&a.push(`**ReturnType:** ${(0,l.convertValueTypeToString)(r)} \n`),a}function b(e,t,n,i){const s=T(t,i),l=s?.text,p=l?h(l,s.range):new Map;let c=[];if(l)if(p.size)if(p.has("")){const e=p.get("")[0];e&&(e.start.character--,e.end.character++),c.push({message:r.i18n.t("Template_value_0_variables_must_no_be_empty",{templateText:l,interpolation:{escapeValue:!1}}),severity:a.DiagnosticSeverity.Error,range:e||n.contentRange||n.range})}else c=function(e,t,n,i,s){const l=new Set;(t.content||[]).filter((e=>e.type===o.ELEMENT_TYPE&&"LabeledElement"===e.name)).forEach((e=>l.add((0,o.getElementAttributeValue)(e,"Name"))));for(const t of i){const o=t[0],i=t[1].length?t[1]:[n.contentRange||n.range];if(!l.has(o)){let t=null;l.forEach((n=>{n.toUpperCase()===o.toUpperCase()&&(t={value:o,lookupPath:["labeledElements",e.aliasInfo.currentFileNamespace]})})),i.forEach((e=>{const i={message:r.i18n.t("Template_variable_0_not_defined",{varName:o}),severity:a.DiagnosticSeverity.Error,range:e||n.contentRange||n.range};t&&(i.data={caseCheck:t}),s.push(i)}))}}return s}(e,t,n,p,c);else c.push({message:r.i18n.t("Template_value_0_contains_no_variables",{templateText:l,interpolation:{escapeValue:!1}}),severity:a.DiagnosticSeverity.Error,range:n.contentRange||n.range});else c.push({message:r.i18n.t("Template_must_not_be_empty"),severity:a.DiagnosticSeverity.Error,range:n.range||n.nameRange});return c}t.handleFunctionName=function(e,t){return u(t,e).map((e=>({name:e,text:e,category:s.CompletionItemCategory.ValueElement,documentation:{kind:a.MarkupKind.Markdown,value:v(e).join("\n")}})))},t.getFunctionNamesForValueType=u,t.getPropertyNamesProvidingFunctionParameters=function(e,t,n,a){const r=[],l=(0,o.getElementAttributeValue)(n,"Function");if(l){const n=i.functionSignatures.get(l);n&&(Array.isArray(n)?n:[n]).forEach((n=>{let o;const i=n.parameters.find((e=>e.isVariadic));a>=0&&(a<n.parameters.length?o=n.parameters[a]:i&&(o=i),o&&r.push(function(e,t,n){let a={};if(n){(Array.isArray(n.type)?n.type:[n.type]).forEach((n=>{const o="object"==typeof n?n.name:n;"object"==typeof n&&"LabeledElement"===n.kind?a.LabeledElement=s.CompletionItemCategory.ValueElement:a={...a,...t(e,{name:o,asCollection:"object"==typeof n&&n.isCollection})}}))}return a}(e,t,o)))}))}return r},t.getFunctionResultTypes=m,t.isParameterOfStringTemplateKind=function(e,t){return d(e,(0,p.getChildElementPosition)(t,e),i.TEMPLATE_KIND)},t.isParameterOfSpecificKind=d,t.getFunctionParameterDefinitions=y,t.getFunctionParameterTypeDefinitions=g,t.handleTemplateVariableCompletion=function(e,t,n){const r=(e.content||[]).filter((e=>e.type===o.ELEMENT_TYPE&&"LabeledElement"===e.name)),i={};r.forEach((e=>{const t=(0,o.getElementAttributeValue)(e,"Name");t&&(i[t]=!0)}));const l=(t.content||[]).find((e=>e.type===o.TEXT_TYPE)),p={...l.range.start,character:l.range.start.character+n.length},c=h(l.text,l.range),u=[].concat(...c.values()).find((e=>(0,o.positionContained)(e,p)));return Object.keys(i).map((e=>{const t=u?e:`{${e}}`;return{name:t,text:t,filterText:t,affectedRange:u||a.Range.create(p,p),category:s.CompletionItemCategory.ValueElement}}))},t.getTemplateVariableNames=f,t.getTemplateVariablePositions=h,t.getTemplateTextNode=T,t.findTemplateParameterIndex=P,t.convertParameterTypeToValueType=E,t.getFunctionDocumentation=v,t.isSupportedFunction=function(e){if("Apply"!==e.name)return!1;const t=(0,o.getElementAttributeValue)(e,"Function");return!t||(!!i.functionSignatures.has(t)||[...i.functionSignatures.keys()].findIndex((e=>e.toUpperCase()===t.toUpperCase()))>=0)},t.checkFunctionNameForValueType=function(e,t,n){const o=[],s=t.value;if(i.functionSignatures.has(s)){if(!u(e,n).includes(s)){const n=r.i18n.t("Function_0_not_allowed_here_required_result_type_1",{functionName:s,resultType:(0,l.convertValueTypeToString)(e)});o.push({message:n,severity:a.DiagnosticSeverity.Error,range:t.valueRange,rule:"odata-function-wrong-return-type",data:{name:s,type:e}})}}else{const e=r.i18n.t("Unknown_Function_0",{functionName:s}),n={value:s,lookupPath:["functions"]};o.push({message:e,severity:a.DiagnosticSeverity.Error,data:{caseCheck:n},range:t.valueRange})}return o},t.checkApplyFunctionMandatoryParameters=function(e,t){const n=[],s=(0,o.getElementAttributeValue)(e,"Function");let l=i.functionSignatures.get(s);if(Array.isArray(l)&&(l=l[0]),!l)return n;const p=t.filter((e=>e.type===o.ELEMENT_TYPE));return(l.parameters||[]).forEach(((t,o)=>{t.isMandatory&&!p[o]&&n.push({message:r.i18n.t("Function_Parameter_index_0_not_provided",{functionName:s,index:o+1}),severity:a.DiagnosticSeverity.Error,range:e.contentRange||e.range})})),n},t.checkApplyFunctionProperty=function(e,t,n,s,l,p,c){let u=[];if(n?.type!==o.ELEMENT_TYPE||s<0)return u;const m=(0,o.getElementAttributeValue)(t,"Function"),d=g(m,s),h=d?.length>0?d[0]:null,T=h?.length>0?h[0]:null;if(!T)return u;const P="object"==typeof T?T.kind:"";if(P===i.TEMPLATE_KIND&&"String"===n.name)u=b(e,t,n,s);else if(P===i.LABELED_ELEMENT_KIND){const e=f(t,0),i=(0,o.getElementAttribute)(n,"Name"),s=i&&i.value?i.value:"";s&&!e.includes(s)&&u.push({message:r.i18n.t("Labeled_element_0_not_used_in_template",{name:s}),severity:a.DiagnosticSeverity.Warning,range:i.valueRange||i.range||n.range})}const v=y(m,s),_=v?.length>0?v[0]:null,A=!!_&&_.isMandatory,C=E(T);return C&&(A&&(C.facets=C.facets||{},C.facets.isNullable=!1),u.push(...l(e,[C],n,t,p,c))),u},t.getTemplateVariableLocations=function(e){const t=(0,p.getPathTargetInElement)(e.applyContext.path,e.applyContext.apply);if("LabeledElement"!==t.element?.name)return;if(function(e){return!e.element&&(e.isName||e.attribute&&(e.isAttributeName||e.isAttributeValue)&&"Name"===e.attribute.name)}((0,p.getPathTargetInElement)(t.remainingPathForElement,t.element))){const n=(0,o.getElementAttributeValue)(t.element,"Name");if(!n)return[];const r=P((0,o.getElementAttributeValue)(e.applyContext.apply,"Function")||"")[0];if(r>0)return[];const i=T(e.applyContext.apply,r);if(!i)return[];const s=h(i.text,i.range);if(!s.get(n))return[];const l=e.fileUri;return s.get(n).map((e=>a.Location.create(l,e)))}}},928:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hoverValue=t.completeValue=t.checkStrictComparableTypes=t.adjustComparableTypes=t.isAnnotationAllowed=t.findTypeForPropertyName=t.adjustRequestedTypes=t.getPropertyNamesProvidingValueForType=void 0;const a=n(72307),o=n(36712),r=n(54993),i=n(61625),s=n(6853),l=n(41810),p=n(72926),c=n(12668),u=n(60895),m=n(24928),d=n(30151),y=n(70153),g=n(3524),f=n(86337),h=n(94872),T=n(46449),P=n(79269),E=n(20319),v=n(35504);function b(e,n,a,r){const s=p.dynamicExpressionSpecialMap[a.name],c=s&&[...s.mandatoryAttributes||[],...s.optionalAttributes||[]]||[],{propNames:u,currentAttrName:m}=function(e,n,a,r,s,l){let p="",c={};if(r.isAttributeName)s&&s.valueAttributes&&(c=(0,t.getPropertyNamesProvidingValueForType)(e,n)),s&&s.hasAttributes&&l.forEach((e=>{c["@"+e]="Qualifier"===e?o.CompletionItemCategory.Qualifier:o.CompletionItemCategory.ValueElement})),p=r.attribute.name;else if("Record"===a.name)c.PropertyValue=o.CompletionItemCategory.ValueElement;else if("Apply"===a.name){const n=(0,i.getChildElementPosition)(r.nodeIndex,a);c=(0,T.getPropertyNamesProvidingFunctionParameters)(e,t.getPropertyNamesProvidingValueForType,a,n)[0]}else c=(0,t.getPropertyNamesProvidingValueForType)(e,n);return{propNames:c,currentAttrName:p}}(e,n,a,r,s,c),{completionAllowed:d,attrNamesPresent:y,valueAttrNames:g,valueAttributeChange:f}=function(e,t,n,a,o){const r=Object.keys(e.attributes),i=r.filter((e=>t["@"+e])),s=i.filter((e=>!o.includes(e)));let p=-1;e.content.forEach(((e,n)=>{p<0&&e.type===l.ELEMENT_TYPE&&t[e.name]&&(p=n)}));let c=!0,u=!1;return n.isAttributeName&&s.length>0?(u=s.includes(n.attribute.name),c=u||o.includes(n.attribute.name)||o.some((e=>!i.includes(e)))):n.isElementSubNodeName&&(p>-1||s.length)&&(s.length||(!a||!a.multipleValuesAllowed)&&p>-1&&n.nodeIndex>p)&&(c=!1),{completionAllowed:c,attrNamesPresent:r,valueAttrNames:s,valueAttributeChange:u}}(a,u,r,s,c);return d?Object.keys(u).filter(function(e,t,n,a,o,r,i){return s=>{let l=!1;if(e[s])if(t.isAttributeName){if(s.startsWith("@")){const e=s.slice(1);l=(e===n||!a.includes(e))&&(0===o.length||r.includes(e)||i)}}else l=!s.startsWith("@");return l}}(u,r,m,y,g,c,f)).map((e=>r.isAttributeName?e.slice(1):e)).map((e=>({text:e,name:e,affectedRange:r.isAttributeName?r.attribute.nameRange:r.element.nameRange,category:u[e]||u["@"+e]}))):[]}function _(e,n,o,r,s,d){let y=[];const f=(0,E.extractProperty)(r,o);return y="Record"===o.name&&"PropertyValue"===f.name?(0,m.handleRecordPropertyValue)(e,n,o,d):"Apply"===o.name&&"Function"===f.name?(0,T.handleFunctionName)(e,n):"Apply"===o.name&&"LabeledElement"===f.name?(0,P.handleLabeledElementNameValue)(o,d):"Apply"===o.name&&"object"==typeof f.value&&f.value.type===l.ELEMENT_TYPE&&"String"===f.name&&(0,i.getPathTargetInElement)(r.remainingPathForElement,r.element).isTextSubNode&&(0,T.isParameterOfStringTemplateKind)(o,r.nodeIndex)?(0,T.handleTemplateVariableCompletion)(o,f.value,s):p.dynamicExpressionSpecialMap[o.name]&&((p.dynamicExpressionSpecialMap[o.name].mandatoryAttributes||[]).includes(f.name)||(p.dynamicExpressionSpecialMap[o.name].optionalAttributes||[]).includes(f.name))?function(e,t,n,a){let o=[];if("Record"===t.name&&"Type"===n.name&&!e.nodeContext?.noComplexTypeSupported&&(o=(0,m.handleRecordType)(e,a),n.valueRange))for(const e of o)e.affectedRange=n.valueRange;return o}(e,o,f,n):function(e,n,o,r,i){let s=[];if("Bool"===r.name)s.push({text:"true",name:"true",affectedRange:r.valueRange}),s.push({text:"false",name:"false",affectedRange:r.valueRange});else if(p.primitiveValueConstantExpressionMap[r.name])"String"===r.name&&n.constraints&&n.constraints.isLanguageDependent?e.context.i18n.forEach((e=>{s.push({name:`{@i18n>${e.key.value}}`,text:`{@i18n>${e.key.value}}`,insertText:`{@i18n>${e.key.value}}`,documentation:{kind:a.MarkupKind.Markdown,value:(0,g.geI18ntDocumentation)(e)}})})):n.constraints&&n.constraints.allowedValues?s=(0,E.handleAllowedValueConstraint)(n,r.valueRange):e.nodeContext?.sideEffectsTargetProperties&&"String"===r.name&&(e.nodeContext.allowWildCardInPath=!0,s=(0,u.completePathExpressions)(e,{...n,name:p.EdmType.PropertyPath},"PropertyPath",i));else if("EnumMember"===r.name)s=(0,c.handleEnumValue)(e,n,r.value,r.valueRange,!0,i);else if(p.pathExpressionMap[r.name])s=(0,u.completePathExpressions)(e,n,r.name,i);else if("Collection"===r.name){const a=Object.assign({},n);a.asCollection=!1;const o=(0,t.getPropertyNamesProvidingValueForType)(e,a);Object.keys(o).filter((e=>!e.startsWith("@"))).forEach((e=>s.push({text:e,name:e,category:o[e]})))}else p.primitiveValueConstantExpressionMap[o.name];return s}(e,n,o,f,s),y}t.getPropertyNamesProvidingValueForType=(e,t)=>{const n={};if(!t.asCollection&&p.pathTypeMap[t.name]&&p.pathTypeMap[t.name].defaultExpressionName?(n[p.pathTypeMap[t.name].defaultExpressionName]=o.CompletionItemCategory.PathKind,n["@"+p.pathTypeMap[t.name].defaultExpressionName]=o.CompletionItemCategory.PathKind):(n.Path=o.CompletionItemCategory.Path,n["@Path"]=o.CompletionItemCategory.Path),t.asCollection)e.nodeContext?.dataFieldValueProperty||(n.Collection=o.CompletionItemCategory.ValueElement);else{const a=(0,s.getVocabularyType)(e.context,t.name);if(a&&"ComplexType"===a.kind)n.Record=o.CompletionItemCategory.ValueElement;else if(t.name===p.EdmType.PrimitiveType||t.name===p.EdmType.Untyped)Object.keys(p.primitiveValueConstantExpressionMap).forEach((e=>{n[e]=o.CompletionItemCategory.ValueElement,n["@"+e]=o.CompletionItemCategory.ValueElement})),(0,d.addDynamicExpressionsWithType)((0,r.convertValueTypeFromString)(p.EdmType.PrimitiveType),n);else if(p.pathTypeMap[t.name]){const e=p.pathTypeMap[t.name].defaultExpressionName;n[e]=o.CompletionItemCategory.PathKind,n["@"+e]=o.CompletionItemCategory.PathKind}else(0,E.handleNonStructuredValue)(e,t,a,n)}return(0,T.getFunctionNamesForValueType)(t,e).length&&(n.Apply=o.CompletionItemCategory.Apply),(0,d.addDynamicExpressionsForAnyType)(n)},t.completeValue=function(e,n,a,r,s,l){const c=["Annotation","Collection","Record","PropertyValue","Apply","LabeledElement"];c.push(...p.dynamicExpressionSignatureMap.keys());const u=(0,i.getPathTargetInElement)(s,a);return u.isName?function(e,n,a,r){if(r)return[{text:r,name:r,category:o.CompletionItemCategory.ValueElement}];{const o=(0,t.getPropertyNamesProvidingValueForType)(e,n);return Object.keys(o).filter((e=>!e.startsWith("@"))).map((e=>({text:e,name:e,affectedRange:a.nameRange,category:o[e]})))}}(e,n,a,l):(u.isTextSubNode||u.isWhitespacePosition)&&c.includes(a.name)?(0,y.handleSnippets)(e,n,a,s):u.isAttributeName||u.isElementSubNodeName?b(e,n,a,u):_(e,n,a,u,r,s)};function A(e,t){if(e.nodeContext?.comparisonOperator&&!e.nodeContext?.strictEqualityComparison){return t.reduce(((e,t)=>(t.asCollection?e.push(t):t.name===p.EdmType.PrimitiveType?e.push(...Object.keys(p.primitiveTypeMap).filter((e=>!p.primitiveTypeMap[e].strictEqualityComparable)).map((e=>({...t,name:e})))):p.primitiveTypeMap[t.name]&&p.primitiveTypeMap[t.name].strictEqualityComparable||e.push(t),e)),[])}return t}t.adjustRequestedTypes=(e,t,n=!1)=>{let a=[];if(t.nodeContext?.restrictedTypes){const n=t.nodeContext.restrictedTypes.map((e=>t.context.vocabularies.getType(e)));a=e.reduce(((e,a)=>(a.asCollection||t.nodeContext.restrictedTypes.includes(a.name)||n.find((e=>e&&(0,E.convertType)(e,t)===a.name))?e.push(a):a.name===p.EdmType.PrimitiveType&&(e.push(...n.filter((e=>"EnumType"===e?.kind)).map((e=>({name:e.name})))),e.push(...Object.keys(p.primitiveTypeMap).filter((e=>t.nodeContext.restrictedTypes.includes(e)||n.find((n=>n&&(0,E.convertType)(n,t)===e)))).map((e=>({...a,name:e}))))),e)),a)}else a.push(...e);return a=(0,v.getResolvedUntypedValueTypes)(a),n&&(a=A(t,a)),a=(0,r.expandWithCompatibleTypes)(t.context,a),a},t.findTypeForPropertyName=function(e,t,n){let a="";if(p.primitiveValueConstantExpressionMap[t])a=p.primitiveValueConstantExpressionMap[t].defaultType;else if(p.pathExpressionMap[t])if("Path"===t&&n){n.startsWith("/")||(n=e.pathBase.path+"/"+n);const t=(0,v.lookupTarget)(e.context,n,e.aliasInfo);if(t&&t.metadataElement){const e=(0,r.getValueTypeForMetadataElement)(t.metadataElement);e.name&&(a=(0,r.convertValueTypeToString)(e))}}else a=p.pathExpressionMap[t].defaultType;return a},t.hoverValue=function(e,t,n,o,r){let s;const u=(0,i.getPathTargetInElement)(o,n),y=(0,E.extractProperty)(u,n);if("Record"===n.name&&"Type"===y.name)s=(0,m.hoverRecordType)(e,u);else if("PropertyValue"===y.name)s=function(e,t,n,o){let r;const s=(0,i.getPathTargetInElement)(o,n),p=(0,i.getPathTargetInElement)(s.remainingPathForElement,s.element);if(p.attribute&&p.isAttributeValue&&"Property"===p.attribute.name){let o=(0,h.getSplitStructureType)(e.context,e.currentStructureProperty);o||(o=n.attributes.Type&&n.attributes.Type.value?n.attributes.Type.value:t.name);const i=e.aliasInfo,s=i.aliasMap,c=`${(0,l.resolveName)(o,s).namespace}.${o.split(".").pop()||""}`;r={contents:{kind:a.MarkupKind.Markdown,value:e.context.vocabularies.getDocumentation(c,p.attribute.value,i).join("\n")},range:p.attribute.valueRange}}return r}(e,t,n,o);else if("EnumMember"===y.name)s=(0,c.enumHover)(e,t,y.value,y.valueRange,r);else if("Function"===y.name){const e=(0,T.getFunctionDocumentation)(y.value);e?.length&&(s={contents:{kind:a.MarkupKind.Markdown,value:e.join("\n")},range:y.valueRange})}else if(p.dynamicExpressionSignatureMap.has(y.name)){const e=(0,d.getDynamicExpressionDocumentation)(y.name);e?.length&&(s={contents:{kind:a.MarkupKind.Markdown,value:e.join("\n")},range:y.valueRange})}return s},t.isAnnotationAllowed=function(e){if(e&&e.name){const t=p.dynamicExpressionSpecialMap[e.name];return!(t&&t.noAnnotationsAllowed||p.pathExpressionMap[e.name]||"EnumMember"===e.name||p.primitiveValueConstantExpressionMap[e.name])}return!1},t.adjustComparableTypes=A,t.checkStrictComparableTypes=function(e,t,n){if(e.nodeContext?.comparisonOperator&&!e.nodeContext?.strictEqualityComparison){const o=t.filter((t=>{const n=e.context.vocabularies.getType(t),a=n&&(0,E.convertType)(n,e)||t;return p.primitiveTypeMap[a]&&p.primitiveTypeMap[a].strictEqualityComparable}));if(o.length)return[{message:f.i18n.t("The_value_of_types_0_is_for_strict_comparison_only",{types:o.join(", ")}),range:n,severity:a.DiagnosticSeverity.Warning,rule:"invalid-type"}]}return[]}},45054:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkValue=void 0;n(22037);const a=n(72307),o=n(75224),r=n(41810),i=n(86337),s=n(72926),l=n(36712),p=n(35504),c=n(54993),u=n(61625),m=n(51429),d=n(30151),y=n(12668),g=n(46449),f=n(928),h=n(20319),T=n(60895),P=n(24928);function E(e,t,n,l,p){let c=[],m=[];({properties:m,messages:c}=function(e,t,n){const o=[],r=[];return Object.keys(e.attributes||{}).forEach((s=>{const l=e.attributes[s];let p=!0;if(p=t?t.hasAttributes&&[...t.mandatoryAttributes||[],...t.optionalAttributes||[],...t.valueAttributes&&n["@"+s]?[s]:[]].includes(s):n["@"+s],p)r.push(l);else{const e=i.i18n.t("Attribute_not_allowed_here_0",{attribute:s});o.push({message:e,severity:a.DiagnosticSeverity.Error,range:l.nameRange,rule:"attribute-not-allowed-here",data:{name:s}})}})),{properties:r,messages:o}}(t,n,l));let d=!1;if(n){const e=(n.mandatoryAttributes||[]).filter((e=>!t.attributes[e]));if(e.length){const n=i.i18n.t("Attributes_required_0",{attribute:e.join(",")});c.push({message:n,severity:a.DiagnosticSeverity.Error,range:t.range})}}return(t.content||[]).filter((e=>!!e.type)).forEach(((n,y)=>{let h;if("Apply"===t.name){if(d=!s.functionSignatures.has((0,r.getElementAttributeValue)(t,"Function")),h={},n.type===r.ELEMENT_TYPE){const n=(0,u.getChildElementPosition)(y,t);h=(0,g.getPropertyNamesProvidingFunctionParameters)(e,o.getPropertyNamesProvidingValueForType,t,n)[0]||{}}}else h=l;if(n.type===r.ELEMENT_TYPE){const e=n;if(h[e.name])m.push(e);else if(s.unsupportedDynamicExpressionMap[e.name]){const e=i.i18n.t("Element_0_and_its_subElements_are_not_validated_by_XML_annotation_language_server",{element:t.name});c.push({message:e,severity:a.DiagnosticSeverity.Information,range:t.nameRange})}else if("Annotation"===e.name&&(0,f.isAnnotationAllowed)(t))"Annotation"===e.name&&m.push(e);else if(!d){const t=i.i18n.t("Element_not_allowed_here_0",{element:e.name});c.push({message:t,severity:a.DiagnosticSeverity.Error,range:e.nameRange||e.range,rule:"record-collection-path-not-allowed",data:{name:e.name,type:p}})}}})),{properties:m,messages:c}}t.checkValue=(e,n,f,v,b,_)=>{const A=(0,o.adjustRequestedTypes)(n,e);try{const C=A.some((e=>e.facets&&!1===e.facets.isNullable&&!e.asCollection&&!s.pathTypeMap[e.name])),N=[],I=s.pathExpressionMap[f.name],S=s.primitiveValueConstantExpressionMap[f.name],x=s.dynamicExpressionSpecialMap[f.name],O=s.dynamicExpressionSignatureMap.get(f.name);if(S||"EnumMember"===f.name||I){const t=(0,h.checkSingleTextNode)(f,N);if(!t&&C){if("String"!==f.name){const e=i.i18n.t("Value_required_in_node_0",{element:f.name});N.push({message:e,severity:a.DiagnosticSeverity.Error,range:f.nameRange,rule:"value-required",data:{name:f.name}})}else if(e.nodeContext?.sideEffectsTargetProperties){const e=i.i18n.t("Empty_property_path_as_string");N.push({message:e,severity:a.DiagnosticSeverity.Error,range:f.nameRange})}}else!function(e,t,n,a,r,i,l){const p=a?a.text:"",u=a?a.multilineType:null,m=a?a.range:t.nameRange||t.contentRange;if("String"===t.name&&e.nodeContext?.sideEffectsTargetProperties){const a={name:"PropertyPath",nameRange:t.nameRange,value:p,isStringValue:!0,valueRange:m};e.nodeContext.allowWildCardInPath=!0,l.push(...(0,d.checkValueForVariantType)(e.context,[{...n[0],name:s.EdmType.PropertyPath}],[],a.valueRange,(t=>(0,T.checkPathExpressions)(e,t,a)))),e.nodeContext.allowWildCardInPath=!1}else if(r){const a=(0,d.getTypesForElement)(e,t,e.pathBase);l.push(...(0,o.checkStrictComparableTypes)(e,a,t.range)),l.push(...(0,d.checkValueForVariantType)(e.context,n,a,t.range,(n=>(0,h.checkPrimitiveValue)(e,n,t.name,p,m,u)),!e.nodeContext?.dataFieldValueProperty))}else if("EnumMember"===t.name){const o=a?.fragmentRanges,r=(0,d.getTypesForElement)(e,t,e.pathBase),i=(0,c.expandWithCompatibleTypes)(e.context,[{name:s.EdmType.Int16}]).map((e=>e.name)),u=n.filter((e=>!i.includes(e.name)));l.push(...(0,d.checkValueForVariantType)(e.context,u,r,m,(t=>(0,y.handleEnumValue)(e,t,p,m,!1,"",o))))}else if(i){const a={name:t.name,nameRange:t.nameRange,value:p,isStringValue:!0,valueRange:m},r=(0,d.getTypeOfPathExpression)(p,e);l.push(...(0,o.checkStrictComparableTypes)(e,[r],m)),l.push(...(0,d.checkValueForVariantType)(e.context,n,r?[r]:[],a.valueRange,(t=>(0,T.checkPathExpressions)(e,t,a)),!e.nodeContext?.dataFieldValueProperty))}}(e,f,A,t,S,I,N)}else if(x)N.push(...function(e,n,y,f,T,v,b){const _=(0,d.getTypesForElement)(e,y,e.pathBase);return(0,d.checkValueForVariantType)(e.context,(0,o.adjustRequestedTypes)(n,e),_,y.range,(n=>{let _=[],A={};if("Record"===y.name)A.PropertyValue=l.CompletionItemCategory.ValueElement;else if("Apply"===y.name);else{const t="Collection"!==y.name?n:{name:n.name,asCollection:!1};if(n.asCollection){(0,o.adjustRequestedTypes)([t],e).forEach((t=>{A={...A,...(0,o.getPropertyNamesProvidingValueForType)(e,t)}}))}else A=(0,o.getPropertyNamesProvidingValueForType)(e,t)}let C=0,N=null;if((0,h.hasUnsupportedDynamicExpression)(y,e))_.push((0,d.generateUnsupportedElementWarning)(e,y)),T=!1;else{const{properties:l,messages:T}=E(e,y,f,A,n);_.push(...T);let I=null;"Record"===y.name?(I=(0,P.checkAndExtractTypeForRecord)(e,n,y,_),(0,c.adjustApplicableTermsConstraint)(n,I?.constraints)):"Apply"===y.name&&(N=l),({messages:_,valueCount:C}=function(e,n,l,y,f,T,E,v,b,_){let A="",C="";const N=new Map;let I=-1,S=0;return f.forEach(((f,x)=>{let O=[],D=!1;if(f.type===r.ATTRIBUTE_TYPE?({providesValue:D,firstValuePath:C,propertyMessages:O}=function(e,t,n,a,o,r){r.push(...(0,d.checkValueForVariantType)(e.context,[n],[],t.valueRange,(n=>{const{messages:o,providesValue:r}=(0,h.checkAttributeValue)(e,t,n);return a=a||r,o}),!e.nodeContext?.dataFieldValueProperty)),a&&"Path"===t.name&&!o&&(o=t.value);return{providesValue:a,firstValuePath:o,propertyMessages:r}}(e,f,y,D,C,O)):f.type===r.ELEMENT_TYPE&&({messages:_,propertyMessages:O,providesValue:D,applyFunctionParameterIndex:I}=function(e,n,a,i,l,d,y,f,h,T,E,v=new Map,b,_,A,C){T.push();const N=a;if("Annotation"===a.name){const t=[n.name];i.asCollection&&t.push("Collection");let a=(0,c.convertValueTypeToString)(i);"Record"===n.name&&(0,r.getElementAttribute)(n,"Type")?a=(0,u.getFullyQualifiedNameByAttribute)(n,e.aliasInfo.aliasMap,"Type"):l&&(a=(0,o.findTypeForPropertyName)(e,l,d)||a),C=(0,p.checkAnnotationValue)(e.context,N,e.pathBase,null,"",e.aliasInfo,v,T,E,i.constraints?.applicableTerms,t,a)}else if("Collection"===n.name){b=!0;const a=function(e,n,a,r,i,s,l){const p=(0,o.adjustRequestedTypes)([{...r,asCollection:!1}],e).map((e=>({name:e.name,asCollection:!1,facets:r.facets,constraints:r.constraints})));s.registerElement(n,i),s.push(),s.registerElement(a);let c=e;e.currentStructureProperty&&(c={...e,currentStructureProperty:{...e.currentStructureProperty,propertyPathSegments:null}});const u=(0,t.checkValue)(c,p,a,n,s,l);return s.pop(),u}(e,n,N,i,y,T,E);C=C.concat(a)}else if("Record"===n.name&&"PropertyValue"===a.name){if(f){b=!0;const o=function(e,n,a,o,i,l,p){const c=e.nodeContext?{...e.nodeContext,dataFieldValueProperty:!1}:{};let d={...e,nodeContext:c};const y=(0,r.getElementAttributeValue)(i,"Property");if(e.currentStructureProperty&&e.currentStructureProperty.propertyPathSegments){const t=[...e.currentStructureProperty.propertyPathSegments,y];d={aliasInfo:e.aliasInfo,context:e.context,pathBase:e.pathBase,currentFileUri:e.currentFileUri,currentStructureProperty:{targetPath:e.currentStructureProperty.targetPath,term:e.currentStructureProperty.term,qualifier:e.currentStructureProperty.qualifier,propertyPathSegments:t}}}if((0,m.isCommonValueListRecord)(o.name)&&y===s.PropertyNamesSpecial.Parameters){const e=(0,m.getValueListCollectionPathValue)(n);d.nodeContext={valueListProps:{currentEntitySetName:e}}}if((0,m.isValueListParameterRecord)(o.name)){const t=(0,m.getValueListLocalDataPropertyPath)(n);e.nodeContext?.valueListProps&&(d.nodeContext={...e.nodeContext},d.nodeContext.valueListProps.currentLocalDataPropertyPath=t)}(0,u.isSideEffectsRecord)(o.name)&&y===s.PropertyNamesSpecial.TargetProperties&&(d.nodeContext={sideEffectsTargetProperties:!0});(0,u.isDataFieldValueProperty)(o.name,y)&&(d.nodeContext={dataFieldValueProperty:!0,noCollectionsSupported:!0});return(0,P.checkPropertyValueElement)(d,a,o,t.checkValue,l,p)}(e,n,N,f,a,T,E);C=C.concat(o)}}else"Apply"===n.name?(a.type===r.ELEMENT_TYPE&&++_,A.push(...(0,g.checkApplyFunctionProperty)({...e,nodeContext:{}},n,a,_,t.checkValue,T,E))):h[a.name]&&(b=!0,"Collection"!==a.name&&T.registerElement(a),C=(0,t.checkValue)(e,[i],N,n,T,E));return T.pop(),{messages:A,propertyMessages:C,providesValue:b,applyFunctionParameterIndex:_}}(e,n,f,y,A,C,x,E,v,T,b,N,D,I,_,O)),D&&(A=A||f.name,S++),!l.multipleValuesAllowed&&S>1){const e=i.i18n.t("No_additional_value_possible_Value_provided_already_via_0",{property:A});_.push({message:e,severity:a.DiagnosticSeverity.Error,range:f.nameRange})}else _.push(...O)})),{messages:_,valueCount:S}}(e,y,f,n,l,v,I,A,b,_))}return"Apply"===y.name&&N?_.push(...(0,g.checkApplyFunctionMandatoryParameters)(y,N)):0===C&&T&&(_=function(e,t,n,o,s){if(0===n&&o){let n=t.name;if(e.context.supportSplit&&"PropertyValue"===t.name){n=(0,r.getElementAttributeValue)(t,"Property")||n}const o=i.i18n.t("Value_required_for_0",{element:n}),l=t.nameRange||t.contentRange||t.range;s.push({message:o,severity:a.DiagnosticSeverity.Error,range:l})}return s}(e,y,C,T,_)),_}),!e.nodeContext?.dataFieldValueProperty)}(e,A,f,x,C,b,_));else if(O){const n={...e,nodeContext:{...e.nodeContext??{},nullExpressionParameterFound:!1,ignoreValueType:!1,nestedNodesMessages:[]}},a=(0,d.checkDynamicExpression)(n,A,f,v,O,o.adjustRequestedTypes,o.getPropertyNamesProvidingValueForType,t.checkValue,b,_).filter((e=>!("incomplete-path-with-type"===e.rule&&["Eq","Ne"].includes(f.name)&&n.nodeContext.nullExpressionParameterFound)));a.push(...n.nodeContext.nestedNodesMessages),e.nodeContext?.nullExpressionParameterFound?(e.nodeContext.nestedNodesMessages=e.nodeContext.nestedNodesMessages??[],e.nodeContext.nestedNodesMessages.push(...a)):N.push(...a)}else if("Null"===f.name&&e.nodeContext?.strictEqualityComparison);else{const e=i.i18n.t("Element_not_allowed_here_0",{element:f.name});N.push({message:e,severity:a.DiagnosticSeverity.Error,range:f.nameRange||f.range,rule:"record-collection-path-not-allowed",data:{name:f.name,type:n[0]}})}return N}catch(e){let t=A.map((e=>(0,c.convertValueTypeToString)(e))).join(", ");t=`AnnotationService: error checking element "${f.name}" for types "${t}", path to element: ${b.getPath()}`,_.error(t)}}},20319:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertType=t.hasUnsupportedDynamicExpression=t.checkSingleTextNode=t.checkAttributeValue=t.handleAllowedValueConstraint=t.extractProperty=t.handleNonStructuredValue=t.getPrimitiveType=t.isAllowedValue=t.replaceAliasByName=t.checkPrimitiveValue=void 0;const a=n(3524),o=n(41810),r=n(72307),i=n(86337),s=n(72926),l=n(26853),p=n(36712),c=n(6853),u=n(30151),m=n(12668),d=n(46449),y=n(79269),g=n(60895),f=n(53981);function h(e,t,n,p,u,m){let d=[];const y=(0,c.getVocabularyType)(e.context,t.name),g=y?(0,c.getBuiltInTypeViaUnderlyingType)(e.context,y):t.name,h=s.primitiveValueConstantExpressionMap[n];if(s.primitiveTypeMap[g]&&h.supportedTypes&&!h.supportedTypes[g]){const a=(0,o.toAliasQualifiedName)(t.name,e.aliasInfo),s=i.i18n.t("underlying_type_0",{type:g}),l=g!==t.name?s:"",p=i.i18n.t("0_cannot_provide_value_for_type_1_2",{expression:n,aliasedName:a,underlyingType:l});d.push({message:p,severity:r.DiagnosticSeverity.Error,range:u})}if("String"===n&&t.constraints&&t.constraints.isLanguageDependent)d=function(e,t,n,o,s){const p="missing-i18n-key",c=e.context.i18n,u=c&&!c.length&&!(0,l.i18nFileExists)();if(-1!==t.indexOf("{@i18n>")||-1!==t.indexOf("{@i18n&gt;")){const e=(0,a.extractI18nKey)(t);if(!c.filter((t=>t.key.value===e)).length){const e={message:u?i.i18n.t("Text_key_is_not_available"):i.i18n.t("Text_key_is_not_available_in_i18Properties_file"),severity:r.DiagnosticSeverity.Warning,data:{value:t},rule:p,range:o};n&&(e.data.multilineType=n),s.push(e)}}else if(t.trim().length){const e=c.filter((e=>e.value.value===t));if(e.length){const a=e[0].key.value,l=`{@i18n>${e[0].key.value}}`;let c=i.i18n.t("Text_key_0_for_value_1_is_available_in_i18nProperties_file_Consider_substituting_1_by_2",{key:a,value:t,substitute:l});c=c.replace("&gt;",">");const u={message:c,severity:r.DiagnosticSeverity.Warning,data:{value:t},rule:p,range:o};n&&(u.data.multilineType=n),s.push(u)}else{const e={message:u?i.i18n.t("Text_key_0_is_not_available",{value:t}):i.i18n.t("Text_key_or_value_for_0_is_not_available_in_i18nProperties_file",{value:t}),severity:r.DiagnosticSeverity.Warning,data:{value:t},rule:p,range:o};n&&(e.data.multilineType=n),s.push(e)}}return s}(e,p,m,u,d);else if(t.constraints&&t.constraints.allowedValues){if(!P(t,p=T(p,e.aliasInfo.aliasMap))){const e=i.i18n.t("Value_not_allowed_Use_the_code_completion_to_select_one_of_the_allowed_values");d.push({message:e,severity:r.DiagnosticSeverity.Warning,range:u})}}else!function(e,t,n,a,s,l,p){const c=E(t,n);if(!f.ValidationPrimitiveType.isValid(c,a,s.facets)){let n=i.i18n.t("Invalid_value_for_primitive_type_0",{type:t});s.facets&&void 0!==s.facets.precision&&(n=i.i18n.t("Value_0_not_allowed_due_to_restrictions_defined_in_vocabulary_Provide_a_value_with_precision_1",{value:a,precision:String(s.facets.precision)})),t!==s.name&&(n=`${n} (${(0,o.toAliasQualifiedName)(s.name,e.aliasInfo)})`);const c={message:n,severity:r.DiagnosticSeverity.Error,range:l,rule:o.INVALID_PRIMITIVE_TYPE,data:{name:t}};p.push(c)}}(e,g,n,p,t,u,d);return d}function T(e,t){if(e.includes("(")&&e.includes(")")){const n=e.indexOf("("),a=e.lastIndexOf(")"),o=e.substring(0,n),r=e.substring(n+1,a),i=e.substring(a+1)||"",s=r.split(",").map((e=>e.trim())).map((e=>T(e,t)));e=`${T(o,t)}(${s.join(",")})${i}`}else if(e.includes(".")){const[n,a]=e.split("."),o=t[n];o&&(e=`${o}.${a}`)}return e}function P(e,t){return e.constraints.allowedValues.filter((e=>e.value.toString()===t.toString())).length>0}function E(e,t){let n;if(["Edm.Binary","Edm.Boolean","Edm.Byte","Edm.Date","Edm.DateTimeOffset","Edm.Decimal","Edm.Double","Edm.Duration","Edm.Guid","Edm.Int16","Edm.Int32","Edm.Int64","Edm.SByte","Edm.Single","Edm.Stream","Edm.String","Edm.TimeOfDay"].indexOf(e)>=0)n=e;else if("Edm.PrimitiveType"===e)switch(t){case"Bool":n="Edm.Boolean";break;case"Float":n="Edm.Decimal";break;case"Int":n="Edm.Int64";break;default:n=`Edm.${t}`}return n}t.checkPrimitiveValue=h,t.replaceAliasByName=T,t.isAllowedValue=P,t.getPrimitiveType=E,t.handleNonStructuredValue=function(e,t,n,a){n&&"EnumType"===n.kind&&(a.EnumMember=p.CompletionItemCategory.ValueElement,a["@EnumMember"]=p.CompletionItemCategory.ValueElement);let o=t.name;n&&(o=(0,c.getBuiltInTypeViaUnderlyingType)(e.context,n)||o);const r=s.primitiveTypeMap[o]||null;r&&r.constantExpressionName&&(a[r.constantExpressionName]=p.CompletionItemCategory.ValueElement,a["@"+r.constantExpressionName]=p.CompletionItemCategory.ValueElement),(0,u.addDynamicExpressionsWithType)(Object.assign({},t,{name:o}),a),(0,d.getFunctionNamesForValueType)({name:o},e).length&&(a.Apply=p.CompletionItemCategory.Apply)},t.extractProperty=function(e,t){let n="",a=null,o=!1,r=null,i=null;return e.isAttributeValue?(n=e.attribute.name,a=e.attribute.value,o=!0,r=e.attribute.valueRange,i=e.attribute.nameRange):e.isElementSubNode?(n=e.element.name,a=e.element,r=e.element.range,i=e.element.nameRange):e.isTextSubNode?(n=t.name,a=e.textNode.text,o=!0,r=e.textNode.range):e.isName&&(n=t.name,a=t,r=t.range,i=t.nameRange),{name:n,value:a,isStringValue:o,valueRange:r,nameRange:i}},t.handleAllowedValueConstraint=function(e,t){const n=[];return e.constraints.allowedValues.forEach((e=>{if("object"==typeof e&&e.value.kind===p.ACTION_FUNCTION_NAME_OBJECT_TYPE){if(e.value.forCompletion){const a=e.value,o=[`**Namespace:** ${a.namespace}\n`];a.entityContainer&&o.push(`**Entity Container:** ${a.entityContainer}\n`),o.push(`**Name:** ${a.name}\n`),o.push(`**Kind:** ${a.targetKind}\n`);const i=`${a.name}${"ActionImport"===a.targetKind||"FunctionImport"===a.targetKind?" ("+a.targetKind+")":""}`;n.push({insertText:a.toString(),filterText:a.toString(),name:i,text:i,category:p.CompletionItemCategory.Action,affectedRange:t,documentation:{kind:r.MarkupKind.Markdown,value:o.join("\n")}})}}else{const t=[`**Value:** ${e.value}\n`];t.push(`**Description:** ${e.description}\n`),e.longDescription&&t.push(`**Long Description:** ${e.longDescription}\n`),n.push({insertText:`${e.value}`,name:`${e.value}`,text:`${e.value}`,documentation:{kind:r.MarkupKind.Markdown,value:t.join("\n")}})}})),n},t.checkAttributeValue=function(e,t,n){let a=[],o=!1;if(s.primitiveValueConstantExpressionMap[t.name])o=!0,a=h(e,n,t.name,t.value,t.valueRange);else if("EnumMember"===t.name)o=!0,a=(0,m.handleEnumValue)(e,n,t.value,t.valueRange);else if(s.pathExpressionMap[t.name]){o=!0;const r={name:t.name,nameRange:t.nameRange,value:t.value,isStringValue:!0,valueRange:t.valueRange};a=(0,g.checkPathExpressions)(e,n,r)}else({Target:!0,Term:!0,Qualifier:!0,Type:!0,Property:!0,Function:!0,Name:!0})[t.name]&&("Type"===t.name||"Property"===t.name||("Function"===t.name?a=(0,d.checkFunctionNameForValueType)(n,t,e):"Name"===t.name&&(a=(0,y.checkLabeledElementName)(e,t))));return{messages:a,providesValue:o}},t.checkSingleTextNode=function(e,t){let n=null;Object.keys(e.attributes||{}).forEach((n=>{const a=e.attributes[n],o=i.i18n.t("Attribute_not_allowed_here_0",{attribute:a.name});t.push({message:o,severity:r.DiagnosticSeverity.Error,range:a.nameRange,rule:"attribute-not-allowed-here",data:{name:a.name}})}));const a="String"===e.name&&1===e.content.filter((e=>e.type===o.TEXT_TYPE)).length;return e.content.forEach((s=>{if(s.type===o.ELEMENT_TYPE){const n=s,a=i.i18n.t("Element_0_not_allowed_below_element_1",{element0:n.name,element1:e.name});t.push({message:a,severity:r.DiagnosticSeverity.Error,range:n.nameRange})}else if(s.type===o.TEXT_TYPE){const o=s;if(a||o.text&&o.text.trim())if(n){const n=i.i18n.t("Additional_text_nodes_ignored_in_element_0",{element:e.name});t.push({message:n,severity:r.DiagnosticSeverity.Warning,range:o.range})}else n=o}})),n},t.hasUnsupportedDynamicExpression=function(e,t){t.context.supportSplit&&(s.unsupportedDynamicExpressionMap.EdmJson={$ResultType:"void"});let n=!1;return(e.content||[]).forEach((e=>{if(e.type===o.ELEMENT_TYPE){const t=e;(s.unsupportedDynamicExpressionMap[t.name]||"Apply"===t.name&&!(0,d.isSupportedFunction)(t))&&(n=!0)}})),n},t.convertType=function(e,t){const n=(0,c.getVocabularyType)(t.context,e.name);let a=(n?(0,c.getBuiltInTypeViaUnderlyingType)(t.context,n):"")||e.name;return e.asCollection&&(a="Collection("+a+")"),a}},75224:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePathToCursorContext=t.resolve=t.adjustEmbeddedAnnotationCursorContext=t.getPropertyDescriptorsForRecord=t.getPossibleTypes=t.completePathExpressions=t.checkPathExpressions=t.SegmentUsage=t.getPathInfo=t.findRangesForPropertyPath=t.findElementsForPath=t.determineSegmentsFromPath=t.checkValue=t.checkStrictComparableTypes=t.findTypeForPropertyName=t.isAnnotationAllowed=t.hoverValue=t.getPropertyNamesProvidingValueForType=t.completeValue=t.adjustRequestedTypes=t.adjustComparableTypes=t.getTemplateVariablePositions=t.getTemplateVariableLocations=t.getTemplateVariableNames=t.getFunctionParameterDefinitions=t.getFunctionNamesForValueType=t.getFunctionDocumentation=t.findTemplateParameterIndex=t.convertParameterTypeToValueType=t.getTypesForElement=t.getDynamicExpressionDocumentation=t.getComparableTypes=t.convertDynamicExpressionTypeToValueType=t.addDynamicExpressionsForAnyType=void 0;var a=n(30151);Object.defineProperty(t,"addDynamicExpressionsForAnyType",{enumerable:!0,get:function(){return a.addDynamicExpressionsForAnyType}}),Object.defineProperty(t,"convertDynamicExpressionTypeToValueType",{enumerable:!0,get:function(){return a.convertDynamicExpressionTypeToValueType}}),Object.defineProperty(t,"getComparableTypes",{enumerable:!0,get:function(){return a.getComparableTypes}}),Object.defineProperty(t,"getDynamicExpressionDocumentation",{enumerable:!0,get:function(){return a.getDynamicExpressionDocumentation}}),Object.defineProperty(t,"getTypesForElement",{enumerable:!0,get:function(){return a.getTypesForElement}});var o=n(46449);Object.defineProperty(t,"convertParameterTypeToValueType",{enumerable:!0,get:function(){return o.convertParameterTypeToValueType}}),Object.defineProperty(t,"findTemplateParameterIndex",{enumerable:!0,get:function(){return o.findTemplateParameterIndex}}),Object.defineProperty(t,"getFunctionDocumentation",{enumerable:!0,get:function(){return o.getFunctionDocumentation}}),Object.defineProperty(t,"getFunctionNamesForValueType",{enumerable:!0,get:function(){return o.getFunctionNamesForValueType}}),Object.defineProperty(t,"getFunctionParameterDefinitions",{enumerable:!0,get:function(){return o.getFunctionParameterDefinitions}}),Object.defineProperty(t,"getTemplateVariableNames",{enumerable:!0,get:function(){return o.getTemplateVariableNames}}),Object.defineProperty(t,"getTemplateVariableLocations",{enumerable:!0,get:function(){return o.getTemplateVariableLocations}}),Object.defineProperty(t,"getTemplateVariablePositions",{enumerable:!0,get:function(){return o.getTemplateVariablePositions}});var r=n(928);Object.defineProperty(t,"adjustComparableTypes",{enumerable:!0,get:function(){return r.adjustComparableTypes}}),Object.defineProperty(t,"adjustRequestedTypes",{enumerable:!0,get:function(){return r.adjustRequestedTypes}}),Object.defineProperty(t,"completeValue",{enumerable:!0,get:function(){return r.completeValue}}),Object.defineProperty(t,"getPropertyNamesProvidingValueForType",{enumerable:!0,get:function(){return r.getPropertyNamesProvidingValueForType}}),Object.defineProperty(t,"hoverValue",{enumerable:!0,get:function(){return r.hoverValue}}),Object.defineProperty(t,"isAnnotationAllowed",{enumerable:!0,get:function(){return r.isAnnotationAllowed}}),Object.defineProperty(t,"findTypeForPropertyName",{enumerable:!0,get:function(){return r.findTypeForPropertyName}}),Object.defineProperty(t,"checkStrictComparableTypes",{enumerable:!0,get:function(){return r.checkStrictComparableTypes}});var i=n(45054);Object.defineProperty(t,"checkValue",{enumerable:!0,get:function(){return i.checkValue}});var s=n(60895);Object.defineProperty(t,"determineSegmentsFromPath",{enumerable:!0,get:function(){return s.determineSegmentsFromPath}}),Object.defineProperty(t,"findElementsForPath",{enumerable:!0,get:function(){return s.findElementsForPath}}),Object.defineProperty(t,"findRangesForPropertyPath",{enumerable:!0,get:function(){return s.findRangesForPropertyPath}}),Object.defineProperty(t,"getPathInfo",{enumerable:!0,get:function(){return s.getPathInfo}}),Object.defineProperty(t,"SegmentUsage",{enumerable:!0,get:function(){return s.SegmentUsage}}),Object.defineProperty(t,"checkPathExpressions",{enumerable:!0,get:function(){return s.checkPathExpressions}}),Object.defineProperty(t,"completePathExpressions",{enumerable:!0,get:function(){return s.completePathExpressions}});var l=n(24928);Object.defineProperty(t,"getPossibleTypes",{enumerable:!0,get:function(){return l.getPossibleTypes}}),Object.defineProperty(t,"getPropertyDescriptorsForRecord",{enumerable:!0,get:function(){return l.getPropertyDescriptorsForRecord}});var p=n(14169);Object.defineProperty(t,"adjustEmbeddedAnnotationCursorContext",{enumerable:!0,get:function(){return p.adjustEmbeddedAnnotationCursorContext}}),Object.defineProperty(t,"resolve",{enumerable:!0,get:function(){return p.resolve}}),Object.defineProperty(t,"resolvePathToCursorContext",{enumerable:!0,get:function(){return p.resolvePathToCursorContext}})},79269:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkLabeledElementName=t.handleLabeledElementNameValue=void 0;const a=n(72307),o=n(41810),r=n(53308),i=n(54993),s=n(46449);t.handleLabeledElementNameValue=function(e,t){let n=[];const a=(0,r.getPathTargetInElement)(t,e),i=(0,r.getPathTargetInElement)(a.remainingPathForElement,a.element);if(i.attribute&&i.isAttributeName)n=[{text:"Name",name:"Name",affectedRange:i.attribute.nameRange}];else if(i.attribute&&i.isAttributeValue&&"Name"===i.attribute.name){const t=(0,o.getElementAttributeValue)(e,"Function");if("odata.fillUriTemplate"===t){const a=(0,s.getTemplateVariableNames)(e,(0,s.findTemplateParameterIndex)(t)[0]),r=(e.content||[]).filter((e=>e.type===o.ELEMENT_TYPE&&"LabeledElement"===e.name));n=a.filter((e=>e===i.attribute.value||!r.find((t=>(0,o.getElementAttributeValue)(t,"Name")===e)))).map((e=>({text:e,name:e,affectedRange:i.attribute.valueRange})))}}return n},t.checkLabeledElementName=function(e,t){const n=[],o=t.value||"";if(o)if((0,i.isValidSimpleIdentifier)(o)){let i=0;const s=e.aliasInfo.currentFileNamespace;Object.keys(e.context.labeledElements).forEach((t=>{e.context.labeledElements[t][s]&&(i+=e.context.labeledElements[t][s].countMap.get(o)||0)})),i>1&&n.push({message:r.i18n.t("Labeled_element_name_0_must_be_unique_within_namespace_2",{name:o,namespace:s}),severity:a.DiagnosticSeverity.Error,range:t.valueRange||t.range})}else n.push({message:r.i18n.t("Labeled_element_name_0_should_be_of_type_SimpleIdentifier",{name:o}),severity:a.DiagnosticSeverity.Error,range:t.valueRange||t.range});else n.push({message:r.i18n.t("Labeled_element_must_have_a_name"),severity:a.DiagnosticSeverity.Error,range:t.nameRange});return n}},60895:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findRangesForPropertyPath=t.findElementsForPath=t.checkPathExpressions=t.completePathExpressions=t.determineSegmentsFromPath=t.getPathInfo=t.SegmentUsage=void 0;const a=n(72307),o=n(41810),r=n(72926),i=n(84204),s=n(6853),l=n(83554),p=n(54993),c=n(27246),u=n(35504),m=n(86337);function d(e,t,n){let a,o=!0;return(e||[]).forEach(((r,s)=>{if(s===e.length-1&&"*"===r&&t.nodeContext?.allowWildCardInPath&&o){const e="object"==typeof n&&Object.keys(n).filter((e=>!e.includes("@")&&"$Self"!==e)).find((e=>"object"!=typeof n[e]&&!!n[e]||!0===n[e].$Self));n=e?n[e]:void 0,o=!!n}else n[r]?n=n[r]:(o=!1,t.aliasInfo&&(a=function(e,t,n){let a;const o=(0,i.getGuessedQualifiedName)(t,e.aliasInfo),r=Object.keys(n);if(o){const e=r.find((e=>e.toUpperCase()===o.toUpperCase()));n[e]&&(a={correct:e,wrong:t},n=n[e])}else if(!t.includes(".")){const e=r.find((e=>e.toUpperCase()===t.toUpperCase()));n[e]&&(a={correct:e,wrong:t},n=n[e])}return a}(t,r,n)))})),{pathFound:o,caseIssues:a,currentObject:n}}function y(e,t,n,a){let o,r=!1,i=e;if(i&&(({pathFound:r,caseIssues:o,currentObject:i}=d(t,a,i)),r)){const e="object"==typeof i?i:{$Self:i};Object.keys(e).forEach((t=>{n[t]&&n[t].$Self||(n[t]=JSON.parse(JSON.stringify(e[t])))}))}return{pathFound:r,caseIssues:o}}function g(e,t,n,a,o,r,i){let s,l=!1,p=!1;return Object.keys(e).forEach((c=>{if(!p)for(let u=0;u<t.length&&!p;u++){const m=t[u]?e[c][t[u]]:e[c];if(m){const e=y(m,n,r,i);l=l||e.pathFound,s=e.caseIssues?e.caseIssues:s,a&&(p=o?!!r.$Self:Object.keys(r).length>0)}}})),{found:l,caseIssues:s}}function f(e,t,n){let a,o="",r=!1;const i=[...t],s=i.pop(),l=i.join("/"),p=e.context.navigationSourceMap;return Object.keys(p||{}).forEach((e=>{Object.keys(p[e][l]||{}).forEach((t=>{if(!o)if(p[e][l][t][s])r=!!p[e][l][t][s].isCollection,r&&!n||(o=t);else{const o=Object.keys(p[e][l][t]).find((e=>e.toUpperCase()===s.toUpperCase()));p[e][l][t][o]&&(r=!!p[e][l][t][o].isCollection,r&&!n||(a={wrong:s,correct:o}))}}))})),{schemaChildByNav:o,isCollection:r,schemaChildByNavCaseIssue:a}}function h(e,t,n,a,o){let r="",i="";for(const s of Object.keys(e[t]||{}))if(!a[s]){if(s===n)r=Object.keys(e[t][s])[0],i=n;else if(o<=3){const l={};l[t]=!0,({navigationPath:r,navigationTargetType:i}=h(e,s,n,Object.assign(l,a),o+1)),r&&(r+=Object.keys(e[t][s])[0]+"/")}if(r)break}return{navigationPath:r,navigationTargetType:i}}function T(e,t,n,a,o,r){let i=!1;if(1===a.length&&""===a[0]){const o=e.context.navigationSourceMap;Object.keys(o||{}).forEach((s=>{Object.keys(o[s][t]||{}).forEach((p=>{Object.keys(o[s][t][p]||{}).forEach((t=>{if(t){const o={};g(n,a,[p],!1,!1,o,e),(0,l.addPathToObject)(r,t,o),i=!0}}))}))}))}else{const s=e.context.navigationSourceMap,p={};Object.keys(s||{}).forEach((e=>{Object.keys(s[e]).forEach((t=>{Object.keys(s[e][t]||{}).forEach((n=>{Object.keys(s[e][t][n]).forEach((a=>{if(!s[e][t][n][a].isCollection||o){const o=[t,n,a].join("/"),r=s[e][t][n][a];(0,l.addPathToObject)(p,o,r)}}))}))}))}));const c={};g(n,a,[],!1,!1,c,e),Object.keys(p[t]||{}).forEach((e=>{let n=!1,a="",o="";if(e===t);else if(c[e])n=!0;else for(const r of Object.keys(c)){const i={};if(i[t]=!0,i[e]=!0,({navigationPath:a,navigationTargetType:o}=h(p,e,r,i,0)),a){n=!0;break}}n&&Object.keys(p[t][e]).forEach((t=>{if(t){if("object"==typeof c[e])Object.keys(c[e]).forEach((n=>{const a=c[e][n];(0,l.addPathToObject)(r,[t,n].join("/"),a)}));else if(a){const e=[t,a.split("/")].join("/");(0,l.addPathToObject)(r,e,o)}i=!0}}))}))}return i}var P;function E(e,t,n,a,o,i=0){const s={value:!0,nextPossibleSegments:[],validPath:!0,invalidSegmentIndex:-1,caseIssues:void 0,isCollection:!1},p=n.includes(r.EdmType.VirtualProperty),c=2===n.length&&n.includes(r.EdmType.EntityType)&&n.includes(r.EdmType.EntityTypeCollection);let u="";u=o?n.length?"path":a.length?"annotationPath":"targetPath":p?"propertyPathCc":n.length?"pathCc":a.length?"annotationPathCc":"targetPath";const m=n.every((e=>e.startsWith("Collection(")&&"Collection(Edm.ComplexType)"!==e)),d=c||p||!u.startsWith("path")||m||n.includes(r.EdmType.PrimitiveCollection),y=e.context.pathExpressions[u],h=n.length?function(e,t){return t?e.map((e=>e.startsWith("Collection(")?e.slice("Collection(".length,e.length-1):e)):e}(n,m):a.length?a:[""];let E;const v=e.targetTermQualifier&&("pathCc"===u||"annotationPathCc"===u),b=new Map;let _;try{if(v&&(_=JSON.stringify(y),Object.keys(y).forEach((t=>{h.forEach((n=>{if(!y[t][n])return;const a=(0,l.removePathFromObject)(y[t][n],e.targetTermQualifier);null!==a&&b.set(t,(b.get(t)||new Map).set(n,a))}))}))),0===t.length)E={},g(y,h,[],o,o,E,e);else if(t[0].indexOf(".")<0&&e.context.metadata&&e.context.metadata.getMetadataElement&&!e.context.metadata.getMetadataElement(t[0]))s.invalidSegmentIndex=0;else{const n=[[]];for(let a=0;a<t.length;a++){const r=t.length-1===a,l=!r;n.forEach((e=>e.push(t[a]))),E={};const p=[];for(let t=0;t<n.length;t++){const c=n[t],{schemaChildByNav:u,schemaChildByNavCaseIssue:m,isCollection:P}=f(e,c,d||a<i);if(u&&n.push([u]),r&&o&&E.$Self||l&&Object.keys(E).length)break;const{found:v,caseIssues:b}=g(y,h,c,l,o,E,e);let _=!1;c.length&&(!v||r&&!l)&&(_=T(e,c.join("/"),y,h,d||a<i-1,E)),v||_||p.push(t),b&&(s.caseIssues=b),m&&(s.caseIssues=m),u&&P&&(s.isCollection=!0)}if(0===Object.keys(E).length){s.invalidSegmentIndex=a;break}let c=p.length;for(;c--;)n.splice(p[c],1)}}s.invalidSegmentIndex<0?(s.value=E.$Self,o&&(s.validPath=!!E.$Self),Object.keys(E).forEach((e=>{if("$Self"!==e){const t=("object"==typeof E[e]?Object.keys(E[e]):[]).some((e=>"$Self"!==e));let n=P.asLastOrIntermediateSegment;E[e].$Self||(n=P.asIntermediateSegmentOnly),t||(n=P.asLastSegmentOnly),s.nextPossibleSegments.push({name:e,kind:E[e].$Kind,usages:n})}})),e.nodeContext?.allowWildCardInPath&&s.nextPossibleSegments.some((e=>e.usages===P.asLastSegmentOnly))&&s.nextPossibleSegments.push({name:"*",kind:void 0,usages:P.asLastSegmentOnly})):s.validPath=!1,v&&b.forEach(((t,n)=>{t.forEach(((t,a)=>{y[n][a]=y[n][a]||{},(0,l.addPathToObject)(y[n][a],e.targetTermQualifier,t)}))}))}catch(t){_&&(e.context.pathExpressions[u]=JSON.parse(_))}return s}function v(e,t,n){const a=[];let o=[];const i=(0,p.convertValueTypeToString)(t),l=e.context.vocabularies.getDerivedTypeNames(t.name),c=e.context.vocabularies.getType(t.name);if(c&&"TypeDefinition"===c.kind&&c.underlyingType&&l.add(c.underlyingType),"Path"===n){a.push(i);const n=(0,s.getVocabularyType)(e.context,t.name);n&&"EnumType"===n.kind||[r.EdmType.Decimal,r.EdmType.Double].includes(t.name)?Object.keys(r.primitiveTypeMap).filter((e=>"Int"===r.primitiveTypeMap[e].constantExpressionName)).forEach((e=>a.push((0,p.convertValueTypeToString)({name:e,asCollection:t.asCollection})))):l.forEach((e=>{a.push((0,p.convertValueTypeToString)({name:e,asCollection:t.asCollection}))})),"EnumType"===n?.kind&&a.push(r.EdmType.String)}else{(r.pathTypeMap[i]&&r.pathTypeMap[i].validNonAbstractPathTypes||[i]||[]).forEach((e=>{switch(e){case r.EdmType.PropertyPath:a.push(r.EdmType.PrimitiveType,r.EdmType.ComplexType,r.EdmType.NonEntityTypeCollection,r.EdmType.VirtualProperty);break;case r.EdmType.NavigationPropertyPath:a.push(r.EdmType.EntityType,r.EdmType.EntityTypeCollection);break;case r.EdmType.AnnotationPath:t.constraints&&t.constraints.allowedTerms.length>0&&(o=o.concat(t.constraints.allowedTerms)),o.length||o.push(r.cacheKeyAnyTermName)}}))}return{types:a,terms:o}}function b(e,t,n){let a=e,r=0;e.startsWith("/")||(a="/"+t.pathBase.path,a+=e?`/${e}`:"",r=t.pathBase.path.split("/").length),a=a.slice(1);const i=a.split("/"),s=n&&e?i.pop():"";return{segments:i.map((e=>(0,o.getSegmentWithoutAlias)(t.aliasInfo,e))),originalSegments:i,lastSegment:s,baseSegmentsCount:r}}function _(e){return e.isEntityType||e.isComplexType||e.name.includes("(")}function A(e,t,n,r,i,s,l){if(e.validPath)return[];const u=[];if(e.invalidSegmentIndex>=0){const d=t[e.invalidSegmentIndex];let y=n.valueRange;const g=d+(e.invalidSegmentIndex<r.length-1?"/":""),f=n.value.indexOf(g);if(f>0&&(y=JSON.parse(JSON.stringify(n.valueRange)),y.start.character+=f),e.caseIssues){let t=e.caseIssues.correct;if(t.includes(".")&&d.toUpperCase()!==t.toUpperCase()){const e=t.replace("@","").trim(),n=(0,o.toAliasQualifiedName)(e,i.aliasInfo);t=d.includes("@")?`@${n}`:n}y.end.character=y.start.character+d.length;const n=(0,c.createNameCasePathValueDiagnostic)(d,t,y);n.data.caseCheck={lookupPath:[],value:d,isNamespacedValue:!1,proposedValue:t},u.push(n)}else{let r="";const c=String(n.value).split("@"),{metadataType:g,vocabularyType:f}=I(i,c),h=f||g;if(""===t[e.invalidSegmentIndex]||t.join("/").indexOf("@")<0&&h)u.push(l.compatibleTypes.length?{message:N(n,h,[s,...l.compatibleTypes].map((e=>(0,p.convertValueTypeToString)(e))),l.expressionName,s.asCollection),severity:a.DiagnosticSeverity.Error,range:y,rule:"incomplete-path-with-compatible-types",data:{pathValue:String(n.value),abstractName:h,expectedType:s.name,expressionName:l.expressionName,isCollection:s.asCollection}}:{message:C(n,h,(0,p.convertValueTypeToString)(s)),severity:a.DiagnosticSeverity.Error,range:y,rule:"incomplete-path-with-type",data:{pathValue:String(n.value),abstractName:h,expectedType:s.name}});else if(e.invalidSegmentIndex>=0){r=m.i18n.t("path_does_not_exist");const e=d&&!i.context.supportSplit?m.i18n.t("Check_0",{segment:d}):"",t=e?`${r} ${e}`:`${r}`;u.push({message:t,severity:a.DiagnosticSeverity.Error,range:y,rule:o.INVALID_PATH_EXPRESSION,data:{name:n.name,value:d}})}}}else if(!n.value&&e.hasNextPossibleSegments)if(i.nodeContext?.sideEffectsTargetProperties){const e=m.i18n.t("Empty_property_path_as_string");u.push({message:e,severity:a.DiagnosticSeverity.Error,range:n.valueRange})}else{const e=m.i18n.t("path-value_is_required",{element:n.name});u.push({message:e,severity:a.DiagnosticSeverity.Error,range:n.valueRange,rule:"value-required",data:{name:n.name}})}else if(-1===e.invalidSegmentIndex&&e.hasNextPossibleSegments)if(i.context.supportSplit){const e=String(n.value).split("@"),{metadataType:t,vocabularyType:o}=I(i,e),r=o||t||"unknown";u.push(l.compatibleTypes.length?{message:N(n,r,[s,...l.compatibleTypes].map((e=>(0,p.convertValueTypeToString)(e))),l.expressionName,s.asCollection),severity:a.DiagnosticSeverity.Error,range:n.valueRange,rule:"incomplete-path-with-compatible-types",data:{pathValue:String(n.value),abstractName:r,expectedType:s.name,expressionName:l.expressionName,isCollection:s.asCollection}}:{message:C(n,r,(0,p.convertValueTypeToString)(s)),severity:a.DiagnosticSeverity.Error,range:n.valueRange,rule:"incomplete-path-with-type",data:{pathValue:String(n.value),abstractName:r,expectedType:s.name}})}else{const e=m.i18n.t("Incomplete0_Add_slash_and_select_the_next_segment",{path:n.name});u.push({message:e,severity:a.DiagnosticSeverity.Error,range:n.valueRange,rule:"incomplete-expression-forward-slash",data:{name:n.name}})}else{const e=m.i18n.t("Invalid_path_for_0_expression",{expression:n.name});u.push({message:e,severity:a.DiagnosticSeverity.Error,range:n.valueRange})}return u}function C(e,t,n){return m.i18n.t("Path_0_leads_to_1_The_path_should_lead_to_type_2",{value:String(e.value),abstractType:t||"unknown",typeExpected:n}).split("&#x2F;").join("/")}function N(e,t,n,a,o){return m.i18n.t(o?"Path_0_leads_to_1_The_path_should_lead_to_a_collection_representing_2":"Path_0_leads_to_1_The_path_should_lead_to_type_representing_2_3",{value:String(e.value),abstractType:t||"unknown",expressionName:a,typeExpected:n[0]}).split("&#x2F;").join("/")}function I(e,t){let n="",a="",r="",i="",s="",c=[];const m=e.context.supportSplit;if(t[0]){r=0===t[0].indexOf("/")?t[0].substr(1,t[0].length):`${e.pathBase.path}/${t[0]}`;const a=(0,u.lookupTarget)(e.context,r.replace(/\/$/,""),e.aliasInfo);a.metadataElement&&(n=function(e,t,n){let a="";const o=(0,p.getValueTypeForMetadataElement)(t);if(o.name){const t=(0,p.convertValueTypeToString)(o);a=t.startsWith("Edm.")?t:(0,l.getAbstractTypeName)(e.context,t)}a=a||t?.kind,n&&(a=`Collection(${a})`);return a}(e,a.metadataElement,a.isCollection)),r=a.metadataElement?.structuredType||a.metadataElement?.path}const d=t.shift().split("/"),y=t.join("@")?t.join("@").split("/"):t;n=m&&!d[d.length-1]&&y.length<1?"unknown":n;for(let t=0;t<y.length;t++){let n=y[t];const l=e.aliasInfo.aliasMapVocabulary,p=y.length;if(c=t===p-1?y.slice(1,p):y.slice(1,t+1),n&&(0===t||n.startsWith("@"))){n=n.startsWith("@")?n.substr(1):n;const t=(0,o.resolveName)(n,l)?.qName||"";[i,s]=t.split("#"),a=e.context.vocabularies.getTerm(i)?.type||"Edm.String"}else if(n&&isNaN(parseInt(y[t])))a=a.startsWith("Edm")?a:e.context.vocabularies.getComplexTypeProperty(a,n)?.type||"Edm.String";else if(!n&&m){a="unknown";break}if(!a.startsWith("Edm")){const t=e.context.vocabularies.getType(a);if(t&&"ComplexType"===t.kind&&t.isAbstract){a=S(e,r||e.pathBase.path,i,s,c)||a}}}return{vocabularyType:a,metadataType:n}}function S(e,t,n,a,r){let i="";for(let s=0;s<e.context.annotationFileSequence.length;s++){const l=e.context.annotationFileSequence[s],p=e.context.fileCache[l],{annotationFound:c,elements:u}=x(e.context,p.serviceFile.content,t,n,a||"",r.filter((e=>e)));if(c&&"Record"===u[0].name){i=u[0]?.attributes?.Type?.value,i=(0,o.resolveName)(i,e.aliasInfo.aliasMap).qName;break}}return i}function x(e,t,n,a,r,i){const s=[];let l=!1;return t.targets.forEach((p=>{const c=(0,o.getAllNamespacesAndReferences)(t?.namespace,t.references),m=(0,o.getAliasInformation)(c,e.metadata.getNamespaces()),d=p.name.split("/").filter((e=>!!e)).map((e=>{let t=e;return t.indexOf(".")>0&&(t=(0,o.resolveName)(t,m.aliasMapMetadata).qName),t})),y=d.length?d.join("/"):"",g=(0,u.lookupTarget)(e,y,m);g.metadataElement&&g.metadataElement.path===n&&p.terms.forEach((e=>{const t=(0,o.getElementAttributeValue)(e,"Qualifier");let n=(0,o.getElementAttributeValue)(e,"Term");if(n=(0,o.resolveName)(n,m.aliasMap).qName,n===a&&(void 0===r||!t&&!r||t===r)){const t=function(e,t,n){let a=e;return(t||[]).forEach((e=>{if(a)if(0===e.indexOf("@")){const[t,r]=e.slice(1).split("#"),i=(a.content||[]).filter((e=>{if(e.type!==o.ELEMENT_TYPE||"Annotation"!==e.name)return!1;{let a=(0,o.getElementAttributeValue)(e,"Term");a=(0,o.resolveName)(a,n.aliasMap).qName;const i=(0,o.getElementAttributeValue)(e,"Qualifier");return t===a&&(!r&&!i||r===i)}}));a=i&&i.length?i[0]:null}else if(RegExp("^\\d+$").test(e)){const t=parseInt(e,10);let n;n="Collection"===a.name?[a]:(a.content||[]).filter((e=>e.type===o.ELEMENT_TYPE&&"Collection"===e.name)),a=null;const r=n&&n.length?n[0]:null;if(r){let e=-1;(r.content||[]).forEach((n=>{n.type===o.ELEMENT_TYPE&&++e,a||e!==t||(a=n)}))}}else{let t;t="Record"===a.name?[a]:(a.content||[]).filter((e=>e.type===o.ELEMENT_TYPE&&"Record"===e.name));const n=((t&&t.length?t[0].content:[])||[]).filter((t=>t.type===o.ELEMENT_TYPE&&"PropertyValue"===t.name&&(0,o.getElementAttributeValue)(t,"Property")===e));a=n&&n.length?n[0]:null}})),a}(e,i||[],m);t&&(l=!0,s.push(t))}}))})),{annotationFound:l,elements:s}}!function(e){e.asLastSegmentOnly="Last",e.asIntermediateSegmentOnly="Intermediate",e.asLastOrIntermediateSegment="LastOrIntermediate"}(P||(t.SegmentUsage=P={})),t.getPathInfo=E,t.determineSegmentsFromPath=b,t.completePathExpressions=function(e,t,n,r){const i=[],s=(r||"").trim();if(e.context.supportSplit&&s.startsWith("/"))return[];const{segments:l,baseSegmentsCount:p}=b(s,e,!0),{types:c,terms:d}=v(e,t,n),y=Object.assign({},e.aliasInfo.reverseAliasMap);e.context.vocabularies.getVocabularies().forEach((e=>{y[e.namespace]||(y[e.namespace]=e.defaultAlias)}));const g=E(e,l,c,d,!1,p);return g.validPath&&g.nextPossibleSegments.forEach((t=>{let r=t.name;if(r.includes(".")){const t=r.indexOf("@")+1;if(t){let e=r.slice(t);e=(0,u.getAliasQualifiedNameDefVoc)(e,y),r=r.slice(0,t)+e}else r=(0,o.toAliasQualifiedName)(r,e.aliasInfo)}const s=[];let l;if(r.includes(".")){const t=r.indexOf("@"),n=t>=0?r.slice(t+1):r;l=(0,u.appendNameToDocumentationAndTruncate)(n,s,e.context,!0,e.aliasInfo),l=r.replace(n,l)}else"*"===r?(l=(0,u.appendNameToDocumentationAndTruncate)(r,s,e.context,!1,null,"Item"),s.push(`**Description:** ${m.i18n.t("Wildcard_path_segment_description")}`)):l=(0,u.appendNameToDocumentationAndTruncate)(r,s,e.context,!1,null,"Item");r&&i.push({text:l,filterText:r,name:r,insertText:r,commitCharacters:t.usages===P.asLastSegmentOnly?[]:["/"],commitCharacterRequired:t.usages===P.asIntermediateSegmentOnly,category:t.kind,sorting:{isAnnotationPath:"AnnotationPath"===n},documentation:{kind:a.MarkupKind.Markdown,value:s.join("\n")}})})),i},t.checkPathExpressions=function(e,t,n){const i=[],s=r.pathExpressionMap[n.name];if(s.supportedTypes&&!s.supportedTypes[t.name]){const r=(0,o.toAliasQualifiedName)(t.name,e.aliasInfo),s=m.i18n.t("Element_0_cannot_provide_type_1",{element:n.name,type:r});i.push({message:s,severity:a.DiagnosticSeverity.Error,range:n.nameRange})}else{const a=(n.value||"").trim();if(e.context.supportSplit&&a.startsWith("/"))return[];const{segments:s,originalSegments:l,baseSegmentsCount:u}=b(a,e),d=function(e,t,n){if(t.name!==r.EdmType.NavigationPropertyPath&&t.name!==r.EdmType.PropertyPath)return null;if(t.constraints?.requiresType)return null;if(!n.length||!n[n.length-1])return null;const a=(0,p.getMdElementForMdPath)(n.join("/"),e.context.metadata);if(!a)return null;const o=t.name===r.EdmType.NavigationPropertyPath&&a.isEntityType||t.name===r.EdmType.PropertyPath&&function(e){return!e.isEntityType&&!e.name.includes("(")}(a);return{validPath:o,hasNextPossibleSegments:_(a),invalidSegmentIndex:-1,caseIssues:void 0,isCollection:a.isCollectionValued}}(e,t,s);if(d){const{compatibleTypes:a,primitiveType:o}=(0,p.getCompatibleTypesData)(e.context,t);return i.push(...A(d,l,n,s,e,t,{compatibleTypes:a,expressionName:o?.constantExpressionName})),i}s.filter((e=>e.indexOf("@")>=0)).forEach((t=>{const a=t.indexOf("@"),r=(0,o.resolveName)(t.substr(a+1),e.aliasInfo.aliasMap),s=r.qName,l=e.context.vocabularies.getVocabularyNamespace(s);if(l&&l!==r.namespace){const o=n.value.indexOf(t),p={start:{line:n.valueRange.start.line,character:n.valueRange.start.character+o+a+1},end:{line:n.valueRange.start.line,character:n.valueRange.start.character+o+t.length}},u=s.startsWith(l)?l:r.namespace?r.namespace:s.split(".")[0];i.push((0,c.createUnknownVocabularyDiagnostic)(u,l,p,e.context.vocabularies))}}));const y=e.context.metadataUri;if(y&&a.startsWith("/")&&s&&s[0]){const t=(0,o.resolveName)(s[0],e.aliasInfo.aliasMap);if(t&&!t.namespace){const t=(0,o.resolveName)(s[0]).namespace;if(e.context.metadata.getNamespaces().has(t)){const e={start:{line:n.valueRange.start.line,character:n.valueRange.start.character+1},end:{line:n.valueRange.start.line,character:n.valueRange.start.character+s[0].length+1}};i.push((0,c.createUnknownMetadataDiagnostic)(t,e,y))}}}if(i.length)return i;const{types:g,terms:f}=v(e,t,n.name),h=E(e,s,g,f,!0,u),T=e.context.vocabularies.getType(t.name),P="EnumType"===T?.kind?m.i18n.t("numeric_primitive_value"):T?.underlyingType?T?.underlyingType:t.name,C={...t,name:P},{compatibleTypes:N,primitiveType:I}=(0,p.getCompatibleTypesData)(e.context,C);i.push(...A({...h,hasNextPossibleSegments:!!h?.nextPossibleSegments.length},l,n,s,e,C,{compatibleTypes:N,expressionName:I?.constantExpressionName}))}return i},t.findElementsForPath=x,t.findRangesForPropertyPath=function(e,t,n,a,r){const i=e=>{const t=[];return(e.content||[]).filter((e=>e.type===o.ELEMENT_TYPE)).forEach((e=>{const n=(0,o.getElementAttribute)(e,"PropertyPath"),a=n?.value;a&&a.includes(r)&&t.push({type:o.ELEMENT_TYPE,name:"PropertyPath",nameRange:e.nameRange,content:[{type:o.TEXT_TYPE,text:a,range:n.valueRange}]}),"PropertyPath"===e.name&&(0,o.getSingleTextNode)(e)?.text.includes(r)?t.push(e):t.push(...i(e))})),t},s=[];return n.targets.forEach((n=>{const l=(0,o.getPathBaseMetadataElement)(e.metadata,n.name,t),p={context:e,aliasInfo:t,pathBase:l},c=[];n.terms.forEach((e=>{const t=(0,o.getElementAttribute)(e,"PropertyPath"),n=t?.value;n&&n.includes(r)?c.push({type:o.ELEMENT_TYPE,name:"PropertyPath",nameRange:t.nameRange,content:[{type:o.TEXT_TYPE,text:n,range:t.valueRange}]}):c.push(...i(e))}));const m=c.reduce(((n,i)=>{const s=(0,o.getSingleTextNode)(i),{segments:l}=b(s.text,p),c=l.lastIndexOf(r);if(c>-1){const o=l.slice(0,c).join("/"),i=(0,u.lookupTarget)(e,o,t)?.metadataElement;if(i&&(a===i.name||a===i.structuredType)){const e=s.text.lastIndexOf(r),t=s.range.start.character+e;n.push({start:{...s.range.start,character:t},end:{...s.range.start,character:t+r.length}})}}return n}),[]);s.push(...m)})),s}},53981:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationPrimitiveType=t.ValidationPrimitiveTypeImpl=void 0;class ValidationPrimitiveTypeImpl{constructor(){ValidationPrimitiveTypeImpl.pattern=this.getRegexPattern()}static getInstance(){return ValidationPrimitiveTypeImpl.instance||(ValidationPrimitiveTypeImpl.instance=new ValidationPrimitiveTypeImpl),ValidationPrimitiveTypeImpl.instance}isValid(e,t,n){let a;const o=this.getRegexPattern(),r=e.slice(4);return"object"!=typeof t&&(a=this.isExactMatch(t,o[r]),!0===a&&["Edm.Byte","Edm.Date","Edm.DateTimeOffset","Edm.Int16","Edm.Int32","Edm.Int64","Edm.SByte"].includes(e)&&(a=this.isValidRange(e,t)),a&&n&&n.precision>=0&&(a=this.isValidPrecision(e,t,n.precision)),a)}getRegexPattern(){let e=ValidationPrimitiveTypeImpl.pattern;if(!e){e={};const t="[0-9]",n=`${t}{3}`,a=`(${t}|${"[a-fA-F]"})`,o=`${a}{4}`,r=`${a}{8}`,i=`${a}{12}`,s="[1-9]",l=`[0-5]${t}`,p="([+-]|%2B)",c=`(${"[a-zA-Z]"}|${t}|-|_)`,u=`${c}{4}`,m=`${`${c}{2}`}(A|E|I|M|Q|U|Y|c|g|k|o|s|w|0|4|8)(=)?`,d=`${c}(A|Q|g|w)(==)?`;e.Binary=`(${u})*(${m}|${d})?`,e.Boolean="true|false";const y="(NaN|-INF|INF)";e.Decimal=`${p}?${t}{1,}([.]{1}${t}{1,})?(e(${p})?${t}{1,})?|${y}`,e.Double=e.Decimal,e.Single=e.Decimal;const g='[^"]';e.String=`${g}*`;const f=`-?(0${n}|${s}${n})`,h=`(0${s}|1[0-2])`,T=`(0${s}|[12]${t}|3[01])`,P=`([01]${t}|2[0-3])`,E=l,v=l,b=`${t}{1,12}`;e.Date=`${f}-${h}-${T}`,e.DateTimeOffset=`${f}-${h}-${T}T${P}:${E}(:${v}(.${b})?)?(Z|${p}${P}:${E})`,e.Duration=`${p}?P(${t}{1,}D)?(T(${t}{1,}H)?(${t}{1,}M)?(${t}{1,}([.]{1}${t}{1,})?S)?)?`,e.Guid=`${r}-${o}-${o}-${o}-${i}`,e.Byte=`${t}{1,3}`,e.SByte=`${p}?${t}{1,3}`,e.Int16=`${p}?${t}{1,5}`,e.Int32=`${p}?${t}{1,10}`,e.Int64=`${p}?${t}{1,19}`,e.TimeOfDay=`${P}:${E}(:${v}(.${b})?)?`}return e}isExactMatch(e,t){return RegExp(`^(${t})$`).test(e)}isValidRange(e,t){let n,a,o=!1;if("Edm.Int64"===e?a=BigInt(t):["Edm.Byte","Edm.Int16","Edm.Int32","Edm.SByte"].includes(e)&&(n=parseInt(t)),"Edm.Byte"===e&&0<=n&&n<=255&&(o=!0),"Edm.Date"===e&&(o=this.isValidDayOfMonth(t)),"Edm.DateTimeOffset"===e){const e=t.slice(0,10);o=this.isValidDayOfMonth(e)}return"Edm.Int16"===e&&-32768<=n&&n<=32767&&(o=!0),"Edm.Int32"===e&&-2147483648<=n&&n<=2147483647&&(o=!0),"Edm.Int64"===e&&BigInt("-9223372036854775808")<=a&&a<=BigInt("9223372036854775807")&&(o=!0),"Edm.SByte"===e&&-128<=n&&n<=127&&(o=!0),o}isValidPrecision(e,t,n){let a;return["Edm.DateTimeOffset","Edm.Duration","Edm.TimeOfDay"].includes(e)&&-1!==t.indexOf(".")?a=t.split(".")[1].replace(/[^0-9]+/g,"").length:"Edm.Decimal"===e&&(a=t.toString().replace(".","").length),!(a>n)}isValidDayOfMonth(e){let t=!1;const[n,a,o]=e.split("-").map((e=>parseInt(e)));return[4,6,9,11].includes(a)&&o>30||2===a&&(n%4>0||n%100==0&&n%400>0)&&o>28||2===a&&(n%400==0||n%4==0&&n%100>0)&&o>29||(t=!0),t}}t.ValidationPrimitiveTypeImpl=ValidationPrimitiveTypeImpl,t.ValidationPrimitiveType=ValidationPrimitiveTypeImpl.getInstance()},24928:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllowedActionFunctionNames=t.isActionNameProperty=t.checkPropertyValueElement=t.checkAndExtractTypeForRecord=t.checkDuplicateSiblings=t.resolveRecordTypeName=t.resolveRecordType=t.handleRecordPropertyValue=t.getPropertyDescriptorsForRecord=t.handleRecordType=t.hoverRecordType=t.getPossibleTypes=void 0;const a=n(72307),o=n(36712),r=n(54993),i=n(61625),s=n(84204),l=n(41810),p=n(6853),c=n(27246),u=n(86337),m=n(94872),d=n(51429),y=n(33261);function g(e,t){const n=e.vocabularies.getType(t);return!(!n||!n.isAbstract)}function f(e,t){return!e||!e.derivedTypeConstraints||e.derivedTypeConstraints.includes(t)}function h(e,t,n){const a=e.vocabularies.getDerivedTypeNames(t.name);n=n||{},a.forEach((e=>{f(t.constraints,e)&&function(e,t){const n=(0,l.resolveName)(e);(t=t||{})[n.namespace]=t[n.namespace]||{},t[n.namespace][n.name]=!0}(e,n)}))}function T(e,t,n){n||(n={name:"Record",type:l.ELEMENT_TYPE,nameRange:null,attributes:{Type:{name:"Type",type:l.ATTRIBUTE_TYPE,nameRange:null,value:t.name,valueRange:{start:{line:0,character:0},end:{line:0,character:0}}}},content:[]});const a=E(e,[t&&t.name||""],n)||t,o=e.context.vocabularies.getComplexType(a.name),r=o?Array.from(o.properties.values()):[],i=r.filter((e=>(0,p.isMandatoryProperty)(e)&&!e.isCollection)),s=(0,m.getSplitStructurePropertySources)(e.context,e.currentStructureProperty).nestedProperties;let c=[],u=[],d=!!e.context.supportSplit;s?(c=r.filter((t=>{let n=!1;return s[t.name]&&e.currentFileUri&&s[t.name].has(e.currentFileUri)&&(n=!0),n})),u=i.filter((e=>!s[e.name])),d=!1,s.$Type?e.currentFileUri&&!s.$Type.has(e.currentFileUri)&&(d=!0):d=!0):(c=r.filter((e=>(n.content||[]).filter((e=>e.type===l.ELEMENT_TYPE&&"PropertyValue"===e.name)).find((t=>(0,l.getElementAttributeValue)(t,"Property")===e.name)))),u=i.filter((e=>!c.find((t=>t.name===e.name)))));const y=r.filter((e=>!c.find((t=>t.name===e.name))));return{resolvedRecordType:a,all:r,mandatory:i,missingMandatory:u,notProvided:y,existing:c,dollarTypeAllowed:d,isOpenType:!!o?.isOpenType}}function P(e,t,n){let a;const o=(0,l.getElementAttribute)(n,"Type");let r=o&&o.valueRange?o.value:"";if(r)a=(0,l.resolveName)(r,e.aliasInfo.aliasMap).qName;else if(a=(0,m.getSplitStructureType)(e.context,e.currentStructureProperty),!a)if(r=o?o.value:"",r)a=(0,l.resolveName)(r,e.aliasInfo.aliasMap).qName;else{const n=t.filter((t=>{if(t.startsWith("Collection(")||t.startsWith("Edm."))return!1;{const n=(0,p.getVocabularyType)(e.context,t);return!!n&&"ComplexType"===n.kind}}));a=n.length?n[0]:""}return a}function E(e,t,n){const a=P(e,t,n);return(0,p.getVocabularyType)(e.context,a)?{name:a,asCollection:!1}:null}function v(e,t,n,o=!1){const r={},i={},s=[],c=(e,t,n)=>{e[t]||(e[t]=[]),e[t].push(n)};return(n.content||[]).forEach((n=>{if(n.type===l.ELEMENT_TYPE){if((0,l.getSingleTextNode)(n))c(i,n.name,n);else{r[n.name]||(r[n.name]={});const a=r[n.name];if("PropertyValue"===n.name){const r=(0,l.getElementAttributeValue)(n,"Property"),i=(0,p.getValueTypeForComplexTypeProperty)(e.context,t&&t.name||"",r);(o||i&&i.name)&&c(a,r,n)}else c(a,"",n)}}})),Object.keys(r).forEach((e=>{Object.keys(r[e]).filter((t=>t&&r[e][t].length>1)).forEach((t=>{r[e][t].forEach((e=>{const t=u.i18n.t("Duplicate_element");s.push({message:t,severity:a.DiagnosticSeverity.Warning,range:e.range,rule:l.IGNORE_DUPLICATE})}))}))})),s}function b(e,t,n){return"Action"===t&&["UI.DataFieldForAction","UI.DataFieldWithAction"].map((e=>(0,l.resolveName)(e,n).qName)).includes(e)}function _(e){const t=function(e){const t=[],n=[...e.getRootMetadataElements().keys()],a=[l.ACTION_KIND,l.FUNCTION_KIND,l.ACTION_IMPORT_KIND,l.FUNCTION_IMPORT_KIND];return n.forEach((n=>{const o=e.getMetadataElement(n),r=e.getEdmTargetKinds(n),i=r.find((e=>a.includes(e)));if(i)t.push({kind:i,name:o.name});else if(r.includes(l.ENTITY_CONTAINER_KIND)){[...(o.content??[]).map((e=>e.name))].forEach((o=>{const r=`${n}/${o}`,i=e.getEdmTargetKinds(r).find((e=>a.includes(e)));i&&t.push({kind:i,name:r})}))}})),t}(e);return t.reduce(((e,t)=>{if(t.name.includes("/")){const[n,a]=t.name.split("/"),[r]=a.split("("),{namespace:i,name:s}=(0,l.resolveName)(n),p={kind:o.ACTION_FUNCTION_NAME_OBJECT_TYPE,name:a,namespace:i,entityContainer:s,targetKind:t.kind,toString:()=>t.name};e.push(p,{...p,forCompletion:!0,name:r,toString:()=>`${n}/${r}`})}else{const{namespace:n,name:a}=(0,l.resolveName)(t.name),[r]=a.split("("),i={kind:o.ACTION_FUNCTION_NAME_OBJECT_TYPE,name:a,namespace:n,targetKind:t.kind,toString:()=>t.name};e.push(i,{...i,forCompletion:!0,name:r,toString:()=>`${n}.${r}`})}return e}),[]).map((e=>({value:e,description:"",longDescription:""})))}t.getPossibleTypes=h,t.hoverRecordType=function(e,t){const n=e.aliasInfo,o=n.aliasMap,r=`${(0,l.resolveName)(t.attribute.value,o).namespace}.${t.attribute.value.split(".").pop()}`;return{contents:{kind:a.MarkupKind.Markdown,value:e.context.vocabularies.getDocumentation(r,void 0,n).join("\n")},range:t.attribute.valueRange}},t.handleRecordType=function(e,t,n){return n?function(e,t,n,o){const r=[];let i,p;const c=(0,l.resolveName)(t.name),m={},d=t.name.split(".").pop();if((0,l.getElementAttribute)(n,"Type")){const y=(0,l.resolveName)(n.attributes.Type.value,o.aliasMap),f=(0,s.getNamespaceAndAlias)(y.namespace,o,e);if(g(e,t.name)){h(e,t,m);const n=Object.keys(m[c.namespace]);p=f.includes(y.namespace),i=n.includes(y.name)}else p=f.includes(y.namespace),i=[d].includes(y.name);if(!p||!i){const e=u.i18n.t("Invalid_type_0",{type:n.attributes.Type.value});r.push({message:e,severity:a.DiagnosticSeverity.Error,range:n.attributes.Type.valueRange})}}else if(g(e,t.name)){const e=u.i18n.t("Does_not_conform_to_OData_Specification_Type_attribute_for_record_element_is_missing");r.push({message:e,severity:a.DiagnosticSeverity.Error,range:n.nameRange})}return r}(e.context,t,n,e.aliasInfo):function(e,t,n){const a=[],r={};let i;return g(e,t.name)?h(e,t,r):(i=(0,l.resolveName)(t.name),r[i.namespace]={},r[i.namespace][i.name]=!0),Object.keys(r).forEach((e=>{Object.keys(r[e]).forEach((t=>{const r=`${e}.${t}`,i=(0,l.toAliasQualifiedName)(r,n),s={name:i,text:i,id:r,category:o.CompletionItemCategory.ComplexType};a.push(s)}))})),a}(e.context,t,e.aliasInfo)},t.getPropertyDescriptorsForRecord=T,t.handleRecordPropertyValue=function(e,t,n,a){let r=[];const s=(0,i.getPathTargetInElement)(a,n),l=(0,i.getPathTargetInElement)(s.remainingPathForElement,s.element);if(l.attribute&&l.isAttributeName)r=[{text:"Property",name:"Property",affectedRange:l.attribute.nameRange}];else if(l.attribute&&l.isAttributeValue&&"Property"===l.attribute.name&&"Record"===n.name){const a=T(e,t,n),i=a.notProvided,s=a.existing.find((e=>e.name===l.attribute.value));s&&i.push(s),r=i.map((e=>({text:e.name,name:e.name,affectedRange:l.attribute.valueRange,category:o.CompletionItemCategory.Property,id:a.resolvedRecordType.name}))),a.dollarTypeAllowed&&r.push({name:"$CdsRecordType$",text:"$CdsRecordType$"})}return r},t.resolveRecordTypeName=P,t.resolveRecordType=E,t.checkDuplicateSiblings=v,t.checkAndExtractTypeForRecord=function(e,t,n,o){let i=null;const s=(0,l.getElementAttribute)(n,"Type"),d=(0,m.getSplitStructureType)(e.context,e.currentStructureProperty);if(!g(e.context,t.name)||d||s&&s.value)if(s&&s.value||d){let m="";m=s&&s.valueRange&&s.value?s.value:d||s.value;const y=(0,l.resolveName)(m,e.aliasInfo.aliasMap),h=y.qName,T=(0,p.getVocabularyType)(e.context,h),P=s?s.valueRange:n.range||n.nameRange;if(T){const n=(0,l.toAliasQualifiedName)(h,e.aliasInfo);let s=!0;if(t&&t.constraints&&(s=f(t.constraints,h)),s)if(g(e.context,h)){const e=u.i18n.t("Record_Type_0_must_not_be_abstract",{recordType:n});o.push({message:e,severity:a.DiagnosticSeverity.Error,range:P})}else if(function(e,t,n){let a=!1,o=n;do{if(a=o===t,!a){const t=(0,p.getVocabularyType)(e,o);o=t&&"ComplexType"===t.kind&&t.baseType}}while(!a&&o);return a}(e.context,t.name,h))i={...(0,r.convertValueTypeFromString)(h),facets:t.facets,constraints:t.constraints};else{const r=(0,l.toAliasQualifiedName)(t.name,e.aliasInfo),i=u.i18n.t("Record_Type_0_must_be_derived_from_1",{recordType:n,element:r});o.push({message:i,severity:a.DiagnosticSeverity.Error,range:P})}else{const e=u.i18n.t("Record_type_0_not_allowed_due_to_restrictions_defined_in_vocabulary_Use_the_code_completion_to_select_one_of_the_allowed_values",{recordType:m});o.push({message:e,severity:a.DiagnosticSeverity.Error,range:P})}}else{const t=e.context.vocabularies.getVocabularyNamespace(h);if(t&&t!==y.namespace){const n=t===h||h.startsWith(t)?t:y.namespace?y.namespace:h.split(".")[0],a=(0,c.createUnknownVocabularyDiagnostic)(n,t,P,e.context.vocabularies);o.push(a)}else{const e=u.i18n.t("Unknown_Type_0",{type:m});let t;y.namespace&&(t={value:y.name,lookupPath:["vocabularies",y.namespace],isNamespacedValue:!0});const n=m.split(".")[0],a=(0,c.createErrorDiagnosticWithRule)(l.INVALID_TYPE_TYPE,e,P,{alias:n,name:m,caseCheck:t});o.push(a)}}}else i=t;else{const r=(0,l.toAliasQualifiedName)(t.name,e.aliasInfo);if(s){if(!s.value){const e=u.i18n.t("Missing_required_value_for_Type_Type_0_is_abstract",{type:r});o.push({message:e,severity:a.DiagnosticSeverity.Error,range:s.valueRange,rule:l.MISSING_REQUIRED_VALUE_FOR_ATTRIBUTE})}}else{const e=u.i18n.t("Missing_required_attribute_Type_Type_0_is_abstract",{type:r});o.push({message:e,severity:a.DiagnosticSeverity.Error,range:n.nameRange?n.nameRange:n.range,rule:l.MISSING_REQUIRED_ATTRIBUTE})}}if(i){const s=e.context.vocabularies.getType(t.name);(0,r.adjustApplicableTermsConstraint)(i,s?.constraints);const l=T(e,i,n);if(l.missingMandatory.length){const t=u.i18n.t("Mandatory_properties_not_provided_0",{properties:l.missingMandatory.map((e=>e.name)).join(",")});o.push({message:t,severity:e.context.supportSplit?a.DiagnosticSeverity.Warning:a.DiagnosticSeverity.Error,range:n.nameRange?n.nameRange:n.range})}o.push(...v(e,i,n,l.isOpenType))}return i},t.checkPropertyValueElement=function(e,t,n,o,s,c){let m=[];if(n){s.registerElement(t);const g=(0,l.getElementAttribute)(t,"Property"),f=g?g.value:"",h=f?(0,p.getValueTypeForComplexTypeProperty)(e.context,n&&n.name,f):null;if(f&&0!==(n.constraints?.openPropertyTypeConstraints||[]).length||h&&h.name){b(n.name,f,e.aliasInfo.aliasMap)&&(h.constraints=h.constraints||{},h.constraints.allowedValues=_(e.context.metadata));const p=e.context.serviceNamespaceMap?.get((0,l.resolveName)((e.pathBase?.path||"").split("/")[0])?.namespace);if(p&&(0,d.isCollectionPathProperty)(n.name,f)){h.constraints=h.constraints||{};const t=e.context.availableEntitySetPropertyMap??new Map;h.constraints.allowedValues=[...t.keys()].filter((e=>e.split("/")[0]===p)).map((e=>{const t=e.split("/").pop();return{value:t,description:t,longDescription:""}}))}if(p&&(0,d.isValueListProperty)(n.name,f)&&((0,y.getPropertyStringValue)(t)||"").indexOf("/")<0&&(h.constraints=h.constraints||{},e.nodeContext?.valueListProps&&e.nodeContext.valueListProps.currentEntitySetName)){const t=(e.context.availableEntitySetPropertyMap??new Map).get(p+"/"+e.nodeContext.valueListProps.currentEntitySetName);h.constraints.allowedValues=t?[...t.keys()].map((e=>({value:e,description:e,longDescription:""}))):[]}if(!h?.name&&(n.constraints?.openPropertyTypeConstraints||[]).length){const i=n.constraints.openPropertyTypeConstraints[0];m=o(e,[(0,r.convertValueTypeFromString)(i)],t,null,s,c),(0,r.isValidSimpleIdentifier)(f)||m.push({message:u.i18n.t("Property_name_0_should_be_of_type_SimpleIdentifier",{propertyName:f}),severity:a.DiagnosticSeverity.Error,range:g.valueRange})}else(0,i.isTemplateProperty)(n.name,f)&&(h.constraints=h.constraints||{},h.constraints.isLanguageDependent=!1),m=o(e,[h],t,null,s,c)}else if(g&&g.value){if(g.value.toUpperCase()!=="$Type".toUpperCase()){let t;if(e.context.supportSplit&&"com.sap.vocabularies.Common.v1.ValueListType"===n.name&&"entity"===g.value)t={message:u.i18n.t("Invalid_Entity_Property"),severity:a.DiagnosticSeverity.Warning,range:g.valueRange};else{t={message:u.i18n.t("Invalid_Property_0",{property:g.value}),severity:a.DiagnosticSeverity.Error,range:g.valueRange,data:{caseCheck:{value:g.value,lookupPath:["vocabularies",n.name]}}}}m.push(t)}}else if(g){const e=u.i18n.t("Missing_value_for_Property");m.push({message:e,severity:a.DiagnosticSeverity.Error,range:g.nameRange})}}return m},t.isActionNameProperty=b,t.getAllowedActionFunctionNames=_},14169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adjustEmbeddedAnnotationCursorContext=t.resolvePathToCursorContext=t.resolve=t.resolveCursorContextForApply=t.resolveCursorContextForLabeledElement=void 0;const a=n(61625),o=n(72926),r=n(6853),i=n(54993),s=n(24928),l=n(928),p=n(41810),c=n(46449),u=n(30151),m=n(51429),d=n(33261),y=n(35504);function g(e,t,n){let a=!1;const o=t.element;return o||t.isSubNode||t.isTextSubNode?(o&&(n.element=o,n.path=t.remainingPathForElement),a=!0,e.nodeContext={},a):a}function f(e,t,n){let r=!1;const i=t.element;if(!i||t.isTextSubNode||t.isElementSubNodeName||t.isName)return r;{const s=(0,p.getElementAttributeValue)(n.element,"Function")||"",l=(0,a.getChildElementPosition)(t.nodeIndex,n.element,!0),u=(0,c.getFunctionParameterTypeDefinitions)(s,l)[0],m=(0,a.getPathTargetInElement)(t.remainingPathForElement,i);if(i){if("LabeledElement"===i.name){const e=(0,p.getElementAttribute)(i,"Name");if(m.attribute&&(m.isAttributeValue||m.isAttributeName)&&("Name"===m.attribute.name||!m.attribute.name&&!e))return!1}else if((0,c.isParameterOfStringTemplateKind)(n.element,t.nodeIndex)&&"String"===i.name&&m.isTextSubNode)return n.types=[o.EdmType.String],!1;n.element=i,n.path=t.remainingPathForElement}return l>-1&&u&&(n.types=u.map((e=>{let t;return t="object"==typeof e?e.isCollection?`Collection(${e.name})`:e.name:e,t}))),r=!0,e.nodeContext={},r}}function h(e,t,n,r,s){const l={element:n,parentElement:null,path:r,types:[(0,i.convertValueTypeToString)(t)],typeOfAlreadyProvidedValue:"",alreadyProvidedValueIsAfter:!1,facets:t.facets,constraints:t.constraints,entitySetProperties:null};let p=!1,c=!0;do{l.parentElement=l.element,l.fixElementName="";const t=(0,a.getPathTargetInElement)(l.path,l.element),n=o.dynamicExpressionSpecialMap[l.element.name];if(n){const a=l.element;if("Annotation"===l.element.name?(p=P(e,t,l),c||(l.fixElementName=null),c=!1):"Collection"===l.element.name?(e.currentStructureProperty&&(e.currentStructureProperty.propertyPathSegments=null),p=_(e,t,l)):"Record"===l.element.name?p=b(e,t,l):"PropertyValue"===l.element.name?p=v(e,t,l):"Apply"===l.element.name?p=f(e,t,l):"LabeledElement"===l.element.name&&(p=g(e,t,l)),p||t.isTextSubNode){const o=T(e,n,a,t.nodeIndex,s);l.typeOfAlreadyProvidedValue=o.providedValueType,l.alreadyProvidedValueIsAfter=o.valueIsAfterIndex,p=!(l.typeOfAlreadyProvidedValue&&!l.alreadyProvidedValueIsAfter)&&!t.isTextSubNode}}else p=!!o.dynamicExpressionSignatureMap.has(l.element.name)&&E(e,t,l)}while(p&&l.types&&l.types.length);return l}function T(e,t,n,a,r){let s,c,u="",m=!1;Object.keys(n.attributes||{}).forEach((e=>{s||(t.mandatoryAttributes||[]).includes(e)||(t.optionalAttributes||[]).includes(e)||(s=e,"Path"===s&&(c=n.attributes[e].value))}));const d=n.content[a].name;if(s){const e=`No CC for element "${d}": value already provided by attribute!`;r.info(e)}else if(!t||!t.multipleValuesAllowed){for(let e=0;e<n.content.length&&!s&&!u;e++){const t=n.content[e];if(t.type!==p.ELEMENT_TYPE||"Annotation"!==t.name){if(!(t.type===p.TEXT_TYPE&&(0,i.isEmptyText)(t.text)))if(m=e>=a,t.type===p.ELEMENT_TYPE){if(s=t.name,"Path"===s){const e=t.content.filter((e=>e.type===p.TEXT_TYPE&&!(0,i.isEmptyText)(e.text)));c=e.length?e[0].text:""}}else u="Edm.UnknownType"}}if(s&&!m){const e=`No CC for element "${d}": value already provided by previous node`;r.info(e)}}if(s&&(u=(0,l.findTypeForPropertyName)(e,s,c),u=u||"Edm.UnknownType"),!u&&"Record"===n.name&&"PropertyValue"===d){const t=n.content[a];if(t.content&&t.content.length){return T(e,o.dynamicExpressionSpecialMap[d],t,0,r)}}return{providedValueType:u,valueIsAfterIndex:m}}function P(e,t,n){let a=!1;return e.nodeContext={},t.element?(n.element=t.element,n.path=t.remainingPathForElement,a=!0):n.fixElementName="Annotation",a}function E(e,t,n){let a,r=!1;return t.isElementSubNode&&t.element&&(o.dynamicExpressionSignatureMap.has(n.element.name)&&(a=(0,u.getAllowedTypesForDynamicExp)(e,o.dynamicExpressionSignatureMap.get(n.element.name),n.element,n.path,n.types)),a.allowedTypes.length&&(n.types=a.allowedTypes,a.keepFacetsAndConstraints||(n.facets={},n.constraints={}),n.element=t.element,n.path=t.remainingPathForElement,r=!0)),r}function v(e,t,n){let a=!1;return t.isElementSubNode&&t.element?(n.element=t.element,n.path=t.remainingPathForElement,a=!0,e.nodeContext={valueListProps:e.nodeContext?.valueListProps,sideEffectsTargetProperties:e.nodeContext?.sideEffectsTargetProperties,dataFieldValueProperty:e.nodeContext?.dataFieldValueProperty}):n.fixElementName="PropertyValue",a}function b(e,t,n){const l=(0,s.resolveRecordTypeName)(e,n.types,n.element),c=n.element;if(!l)return!1;const u=e.context.vocabularies.getComplexType(l);u?.constraints?.applicableTerms?(n.constraints=n.constraints??{},n.constraints.applicableTerms=u.constraints.applicableTerms):n.constraints?.applicableTerms&&delete n.constraints.applicableTerms;const g=t.element;if(!g||"PropertyValue"!==g.name)return!1;const f=(0,a.getPathTargetInElement)(t.remainingPathForElement,g);if(f.isName||f.attribute&&"Property"===f.attribute.name)return!1;let h=null;const T=(0,p.getElementAttributeValue)(g,"Property");T&&(h=(0,r.getValueTypeForComplexTypeProperty)(e.context,l,T));let P=!1;return h?.name?(!function(e,t,n,r){const{propValueElement:l,propertyType:c,propTypeName:u}=n,g=(0,i.convertValueTypeToString)(c);r.types=[g],r.facets=c.facets,r.constraints=c.constraints,(c.name===o.EdmType.Untyped||c.name===o.EdmType.AnyPropertyPath)&&(r.types=(0,y.getResolvedUntypedValueTypes)([{...c,constraints:r.constraints}]).map((e=>(0,i.convertValueTypeToString)(e))),r.constraints={...r.constraints||{},derivedTypeConstraints:void 0});r.element=l,r.path=t.remainingPathForElement,e.currentStructureProperty?.propertyPathSegments&&e.currentStructureProperty?.propertyPathSegments.push(u);!function(e,t,n){const{recordType:r,recordElement:i,propValueElement:l,propTypeName:c}=t,u=e.context.serviceNamespaceMap?.get((0,p.resolveName)((e.pathBase?.path||"").split("/")[0])?.namespace);u&&"com.sap.vocabularies.Common.v1.ValueListType"===r?function(e,t,n,a,r){e.nodeContext={};const i=(0,m.getValueListCollectionPathValue)(n);if(e.nodeContext.valueListProps={currentEntitySetName:i},a===o.PropertyNamesSpecial.CollectionPath){const n=[...(e.context.availableEntitySetPropertyMap??new Map).keys()].filter((e=>e.split("/")[0]===t)).map((e=>{const t=e.split("/").pop();return{value:t,description:t,longDescription:""}}));r.constraints=r.constraints||{},r.constraints.allowedValues=n}}(e,u,i,c,n):u&&r.startsWith("com.sap.vocabularies.Common.v1.ValueListParameter")&&((0,d.getPropertyStringValue)(l)||"").indexOf("/")<0?function(e,t,n,a){const r=e.nodeContext.valueListProps;if(e.nodeContext={},n===o.PropertyNamesSpecial.ValueListProperty&&r&&r.currentEntitySetName){a.constraints=a.constraints||{};const n=(e.context.availableEntitySetPropertyMap??new Map).get(t+"/"+r.currentEntitySetName)||new Map;a.constraints.allowedValues=[...n.keys()].map((e=>({value:e,description:e,longDescription:""})))}}(e,u,c,n):"com.sap.vocabularies.Common.v1.SideEffectsType"===r&&"TargetProperties"===c?e.nodeContext={sideEffectsTargetProperties:!0}:(0,a.isDataFieldValueProperty)(r,c)?e.nodeContext={dataFieldValueProperty:!0}:e.nodeContext={};(0,s.isActionNameProperty)(r,c,e.aliasInfo.aliasMap)&&(n.constraints=n.constraints||{},n.constraints.allowedValues=(0,s.getAllowedActionFunctionNames)(e.context.metadata))}(e,n,r)}(e,t,{recordElement:c,recordType:l,propValueElement:g,propertyType:h,propTypeName:T},n),P=!0):T&&u.isOpenType&&n.constraints.openPropertyTypeConstraints?.length&&(!function(e,t,n,a,o){o.types=o.constraints.openPropertyTypeConstraints,o.facets=void 0,o.constraints=void 0,o.element=a,o.path=t.remainingPathForElement,e.currentStructureProperty?.propertyPathSegments&&e.currentStructureProperty?.propertyPathSegments.push(n);e.nodeContext={}}(e,t,T,g,n),P=!0),P}function _(e,t,n){let a=!1;if(t.isElementSubNode&&t.element){const e=n.types.map((e=>(0,i.convertValueTypeFromString)(e))).filter((e=>e.asCollection&&!!e.name));n.types=e.map((e=>e.name)),n.element=t.element,n.path=t.remainingPathForElement,a=!0}return a}function A(e,t){return"attributes"===e||"content"===e||e.toString().startsWith("$")&&"object"==typeof t}function C(e,t,n){e.elementContext.parentElement=t,e.elementContext.path="$",e.elementContext.attributeArea="attributes"===n}function N(e,t){const n=t;e.targetPath=n?.name||""}function I(e,t,n,a){"name"===t?e.targetPath="":""===t?e.targetPath=null:"terms"!==t||e.targetPath?3===a.length&&"string"==typeof t&&t.startsWith("$")&&(e.path="$['"+t+"']"):e.targetPath=null}function S(e,t){e.annotation=t,e.path="$"}function x(e,t,n,a,o,r){e&&t&&"Annotation"===t.name&&n.annotation!==t&&D(a,o,t,e,n,r)}function O(e,t,n){const a="string"==typeof e?"['"+e+"']":"["+e+"]";n.path+=a,n.elementContext.path+=a,n.applyContext&&(n.applyContext.path+=a),"Apply"===t?.name&&(n.applyContext={apply:t,path:n.elementContext.path})}function D(e,t,n,o,r,i){const s=(0,p.getPathBaseMetadataElement)(e.metadata,r.targetPath,t),l=(0,p.getElementAttributeValue)(r.annotation,"Term")||"",c=(0,p.resolveName)(l,t.aliasMapVocabulary),u=e.vocabularies.getTerm(c.qName),m=h({context:e,aliasInfo:t,pathBase:s},(0,a.getValueTypeFromTerm)(e,u),r.annotation,r.path,i);let d=m.typeOfAlreadyProvidedValue;"Record"===m.element.name&&(0,p.getElementAttribute)(m.element,"Type")?d=(0,a.getFullyQualifiedNameByAttribute)(m.element,t.aliasMap,"Type"):"Edm.UnknownType"===d&&m.types.length>0&&(d=m.types[0]),r.annotation=n,r.embeddedIn=o.name,r.embeddedType=d,r.embeddedApplicableTerms=m.constraints?.applicableTerms,r.path="$"}t.resolveCursorContextForLabeledElement=g,t.resolveCursorContextForApply=f,t.resolve=h,t.resolvePathToCursorContext=function(e,t,n,o,r){const i={targetPath:"",embeddedIn:"",embeddedType:"",annotation:null,path:"",newTarget:!1,elementContext:{path:"",parentElement:null,attributeArea:!1}},s=(0,a.getPathSegments)(o);let l=t,p=null,c=null;for(let t=0;t<s.length;t++){const a=s[t];A(a,p)&&(c=p,p=l,C(i,p,a)),l=l[a],1===t?N(i,l):2===t?I(i,a,l,s):3===t?S(i,l):t>=4&&(x(c,p,i,e,n,r),O(a,p,i))}return i},t.adjustEmbeddedAnnotationCursorContext=D},6853:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMandatoryProperty=t.lookupMetadataService=t.getBuiltInTypeViaUnderlyingType=t.getValueTypeForComplexTypeProperty=t.getFacetsAndConstraints=t.getVocabularyElementByKind=t.getVocabularyType=void 0;const a=n(5819);var o=a.Edm.TERM_KIND;function r(e,t){return t.startsWith("Edm.")?null:e.vocabularies.getType(t)}function i(e,t){const n=Object.assign({},t.facets||{}),o=Object.assign({},t.constraints||{}),i=r(e,t.type);return i&&i.kind===a.Edm.TYPE_DEFINITION_KIND&&(Object.keys(i.facets||{}).forEach((e=>{n[e]||(n[e]=i.facets[e])})),Object.keys(i.constraints||{}).forEach((e=>{o[e]||(o[e]=i.constraints[e])}))),{facets:n,constraints:o}}function s(e){return!(e.facets||{}).isNullable&&void 0===e.defaultValue}t.getVocabularyType=r,t.getVocabularyElementByKind=function(e,t,n){return n===o?e.vocabularies.getTerm(t):e.vocabularies.getType(t)},t.getFacetsAndConstraints=i,t.getValueTypeForComplexTypeProperty=function(e,t,n){const a={name:"",asCollection:!1},o=e.vocabularies.getComplexTypeProperty(t||"",n);if(o){a.name=o.type,a.asCollection=!!o.isCollection;const{facets:t,constraints:n}=i(e,o);Object.keys(n).length&&(a.constraints=n),Object.keys(t).length&&(a.facets=t),s(o)&&(a.facets=a.facets||{},a.facets.isNullable=!1)}return a},t.getBuiltInTypeViaUnderlyingType=function(e,t,n){let o="";if(t.kind===a.Edm.TYPE_DEFINITION_KIND||t.kind===a.Edm.ENUM_TYPE_KIND&&!n){let n=t;for(o=n.underlyingType||"";o&&!o.startsWith("Edm.");)n=r(e,n.underlyingType),o=n.underlyingType||"";o||t.kind!==a.Edm.ENUM_TYPE_KIND||(o="Edm.Int32")}return o},t.lookupMetadataService=function(e,t){let n;return t.startsWith("Edm.")||(n=e.metadata.getMetadataElement(t)),n},t.isMandatoryProperty=s},26853:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(39415),t),o(n(24785),t),o(n(73872),t)},24785:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SnippetBase=t.SNIPPET_FINAL_TABSTOP_ID=void 0;const a=n(41810);t.SNIPPET_FINAL_TABSTOP_ID=0;t.SnippetBase=class SnippetBase{constructor(e,t,n=1,o){this.useSnippetSyntax=t,this.tabStopId=n,this.generic=(0,a.createElementNode)({name:e,content:[],attributes:{},...o&&{namespaceAlias:o}})}getNextTabStopId(){const e=this.tabStopId;return this.tabStopId++,e}appendContent(e){return Array.isArray(e)||(e=[e]),e.forEach((e=>{"string"==typeof e?this.generic.content.push(this.generateTextNode(e)):this.generic.content.push(e.generic)})),this}appendTabStopToContent(e){return this.appendContent(this.getTabStopText(e)),this}appendFinalTabStopToContent(){return this.appendTabStopToContent(0)}appendNextTabStopToContent(){return this.appendTabStopToContent(this.getNextTabStopId()),this}setAttribute(e,t){return this.generic.attributes[e]=this.generateAttribute(e,t),this}setAttributeAsTabStop(e){return this.useSnippetSyntax&&this.setAttribute(this.getTabStopText("number"==typeof e?e:this.getNextTabStopId())),this}setAttributeAsFinalTabStop(){return this.setAttributeAsTabStop(0)}setAttributeWithPlaceholderValue(e,t){return this.generic.attributes[e]=this.generateAttribute(e,this.getPlaceHolderText(t)),this}getTabStopText(e){return this.useSnippetSyntax?"$"+(e||0):""}getPlaceHolderText(e,t=" "){const n=(e.nested||[]).map((e=>this.getPlaceHolderText(e,t))).join(t);return this.useSnippetSyntax?`\${${e.id}:${e.value}${n}}`:`${e.value}${n}`}getChoicesText(e){return this.useSnippetSyntax?`\${|${Array.isArray(e)?e.join(","):e}|}`:""}generateTextNode(e){return(0,a.createTextNode)(e)}generateAttribute(e,t){return(0,a.createAttributeNode)(e,t)}}},95205:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},68732:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},39415:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(95205),t),o(n(68732),t)},92270:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getI18nEntries=t.i18nFileExists=t.getI18nUri=t.setI18nUri=void 0;const a=n(57147),o=n(3524),r=n(58034),i=new Map;let s=!0;t.setI18nUri=(e,t)=>{i.set(e,t)};t.getI18nUri=e=>i.get(e);t.i18nFileExists=()=>s;t.getI18nEntries=async(e,n)=>{const i=(0,r.getWebappUri)(e),l=n["sap.ui5"].models["@i18n"];let p=[i,l&&l.uri].join("/");(0,t.setI18nUri)(e,p),p=(0,r.getPath)(p);const c=await(async e=>{s=!0;try{return(await a.promises.readFile(e)).toString("utf8")}catch(e){return s=!1,console.log(e),""}})(p);return(0,o.loadPropertiesTexts)(c??"",p)}},73872:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(22536),t),o(n(92270),t),o(n(58034),t),o(n(50279),t),o(n(49494),t)},22536:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},58034:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getUri=t.getWebappUri=t.getPath=void 0;const o=a(n(68405)),r=n(71017),i=n(75764);t.getPath=function(e){return o.default.parse(e).fsPath};t.getWebappUri=function(e){const n=(0,t.getPath)(e).split(i.DirName.Webapp);n.pop();const a=(0,r.join)(...n,i.DirName.Webapp);return o.default.file(a).toString()};t.getUri=function(e,n){const a=(0,t.getPath)(e),i=(0,r.join)(a,n);return o.default.file(i).toString()}},49494:(e,t)=>{"use strict";function n(e,t,n){const a={annotationFiles:[]},o=e.apps[n||Object.keys(e.apps)[0]],r=o?.services[t];let i="";if(r?.local&&(a.metadataXmlFileUri=r.local,a.annotationFiles.push({fileUri:a.metadataXmlFileUri,readonly:!0})),r?.annotations?.local&&(i=r.annotations.local),o?.annotations?.[t])for(const[,e]of o.annotations[t].entries()){const t=e,n=t===i;a.annotationFiles.push({fileUri:t,readonly:n})}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.getFileProperties=t.getProjectFiles=void 0,t.getProjectFiles=n,t.getFileProperties=function(e,t,a,o){const r=n(e,t,o),i=r.annotationFiles.find((e=>e&&e.fileUri===a||e.fileUri.replace(/\\/g,"/")===a.replace(/\\/g,"/")));if(i){const e=!r.metadataXmlFileUri||r.metadataXmlFileUri===a.replace(/\\/g,"/"),t=i.fileUri.endsWith(".csn");return{readOnly:i.readonly||t,containsMetadata:e}}}},50279:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyTextEdits=void 0;const a=n(41810);function o(e,t){return e.newText===t.newText&&(e.range.start.line===t.range.start.line&&(e.range.start.character===t.range.start.character&&(e.range.end.line===t.range.end.line&&e.range.end.character===t.range.end.character)))}t.applyTextEdits=function(e,t,n){function r(e){return n.has(e.start.line+";"+e.start.character)&&e.start.line===e.end.line&&e.start.character+1===e.end.character}(n=n||new Map).forEach((e=>{const n="\n"+" ".repeat(e.range.start.character);t.push({range:{start:{line:e.range.end.line,character:e.range.end.character-2},end:{line:e.range.end.line,character:e.range.end.character-1}},newText:`>${n}</`+e.name})})),t.sort(((e,t)=>{let n=e.range,o=t.range;return r(n)&&(n=JSON.parse(JSON.stringify(n)),++n.start.character,++n.end.character),r(o)&&(o=JSON.parse(JSON.stringify(o)),++o.start.character,++o.end.character),(0,a.isBefore)(n.start,o.start)?-1:(0,a.isBefore)(o.start,n.start)?1:(0,a.isBefore)(n.end,o.end)?-1:(0,a.isBefore)(o.end,n.end)?1:0}));const i=e.split("\n"),s=[];i.forEach(((e,t)=>{""===e.trim()&&s.push(t)}));let l=[];const p=new Set;let c;for(let e=t.length-1;e>=0;e--){const n=t[e];if(c&&o(n,c))continue;let a=n.newText;if(a.startsWith("using from '")){if(p.has(a))continue;p.add(a)}if(0===a.indexOf("\n")){const e=a.split("\n"),t=[];for(let n=1;n<e.length;n++)t.push("\n",e[n]);a=String.prototype.concat.apply("",t)}let r="";if(e===t.length-1){const e=n.range.start.character,t=i[n.range.start.line].substring(0,e);t.trim().length>0&&t.endsWith(";")&&(r="\n")}i[n.range.start.line]=i[n.range.start.line].substring(0,n.range.start.character)+r+a+i[n.range.end.line].substring(n.range.end.character);const l=n.range.end.line-n.range.start.line;if(l>0){for(let e=n.range.start.line+l;e>=n.range.start.line;e--){const t=s.findIndex((t=>t===e));t>=0&&s.splice(t,1)}i.splice(n.range.start.line+1,l);for(let e=0;e<s.length;e++)s[e]>n.range.start.line+l&&(s[e]-=l)}c=n}l=[...s];let u=[];return i.forEach(((e,t)=>{if(""!==e.trim())l=function(e,t,n){const a=(n.match(/\n/g)||[]).length;return e.map((e=>e>t&&a?e+a:e))}(l,t,i[t]),u.push(i[t]);else{if(""!==e.trim()||!s.includes(t))return void(l=function(e,t){return e.map((e=>e>t?e-1:e))}(l,t));u.push(i[t])}})),u=function(e,t,n){const a=t.join("\n");if(e.trim().startsWith("<"))for(let e=(t=a.split("\n")).length-1;e>=0;e--)n.includes(e)||""!==t[e].trim()||t.splice(e,1);return t}(e,u,l),u.join("\n")}},60386:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationChangeNotifier=void 0;const a=n(17676),o=n(89832),r=n(20576),i=n(91996);class AnnotationChangeNotifier{static onChanged(e,t,n,s,l){const p=AnnotationChangeNotifier.getCacheKey(e,t,s);let c=AnnotationChangeNotifier.instanceCache.get(p);if(!c){let l,u;n===r.ServiceType.EDMX?(l=new a.XmlDomainAdapter,u=l.getManifestUris(e)):l=new o.CdsDomainAdapter;const m=[...l.getFileSelectors(),...u||[]];c=new i.Notifier(e,t,n,s),c.subscribeToFSEvents(m),AnnotationChangeNotifier.instanceCache.set(p,c)}return c.onFileChanged(l)}static dispose(e,t,n){const a=AnnotationChangeNotifier.getCacheKey(e,t,n),o=AnnotationChangeNotifier.instanceCache.get(a);o&&(o.dispose(),AnnotationChangeNotifier.instanceCache.delete(a))}}t.AnnotationChangeNotifier=AnnotationChangeNotifier,AnnotationChangeNotifier.instanceCache=new Map,AnnotationChangeNotifier.getCacheKey=(e,t,n)=>n?`${n}/${t}@${e.root}`:`${t}@${e.root}`},31373:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationServiceImpl=t.MessageOriginator=void 0;const o=n(71017),r=n(28033),i=n(32217),s=n(26853),l=n(41810),p=n(53308),c=n(92719),u=n(99864),m=n(37054),d=n(97765),y=n(20576),g=n(82392),f=n(64206),h=n(83237),T=n(42394),P=n(91400),E=n(34799),v=n(68047),b=n(29208),_=n(33461),A=n(74448),C=n(98879),N=n(24825),I=n(83407),S=a(n(85767));var x;!function(e){e.GenericComponent="GenericComponent",e.Adapter="Adapter"}(x||(t.MessageOriginator=x={}));function O(e,t,n,a,o){for(const r of a.terms){const a=r.attributes.Qualifier?.value,i=r.attributes.Term.value,s=a?`#${a}`:"",p=`${n.path}/@${i}${s}`;if(r.range&&(F(e,o,p),R(e,o,p,r),"Analytics.AggregatedProperties"===i)){const e=r.content.find((e=>e.type===l.ELEMENT_TYPE&&"Collection"===e.name));if(!e)continue;D(t,o,n,e)}}}function D(e,t,n,a){for(const o of a.content)if(o.type===l.ELEMENT_TYPE&&"Record"===o.name){const a=o.content.find((e=>e.type===l.ELEMENT_TYPE&&"PropertyValue"===e.name&&"Name"===e.attributes.Property?.value));if(a){const o=a.content.find((e=>e.type===l.ELEMENT_TYPE&&"String"===e.name));if(o){const a=o.content.find((e=>e.type===l.TEXT_TYPE));e.set(`${n.path}/${a.text}`,t)}}}}function R(e,t,n,a){for(const o of a.content)"element"===o.type&&("Annotation"===o.name?U(e,t,n,o):"Record"===o.name?V(e,t,n,o):"Collection"===o.name&&M(e,t,n,o))}function M(e,t,n,a){const o=a.content.filter((e=>e.type===l.ELEMENT_TYPE));for(let a=0;a<o.length;a++){const r=o[a],i=`${n}/${a.toString()}`;if(r.range){F(e,t,i);for(const n of r.content)"element"===n.type&&R(e,t,i,n)}}}function V(e,t,n,a){for(const o of a.content){if("element"!==o.type||"PropertyValue"!==o.name)continue;const r=o.attributes.Property?.value,i=`${n}/${r??""}`;if(a.range){F(e,t,i);for(const n of o.content)"element"===n.type&&R(e,t,i,n)}}}function U(e,t,n,a){const o=a.attributes.Qualifier?.value,r=o?`#${o}`:"",i=`${n}@${a.attributes.Term.value}${r}`;a.range&&(F(e,t,i),R(e,t,i,a))}function F(e,t,n){const a=e.get(n),o=t.startsWith(l.GHOST_FILENAME_PREFIX)?t.substring(1):t;a?a.push(o):e.set(n,[o])}function w(e,t){const n=[];if(t){const a=e.get(t);a&&n.push(a[0])}return n}t.AnnotationServiceImpl=class AnnotationServiceImpl{constructor(e,t,n,a,o,r){this.getCompileErrors=()=>{const e=new Map;return this.cdsArtifacts&&this.cdsArtifacts.compileMessagesMap.forEach(((t,n)=>{t.hasSyntaxErrors&&e.set(n,t.messages.filter((e=>e.severity===l.DiagnosticSeverity.Error)).map((e=>e.message)))})),e},this.origProject=e,this.serviceName=t,this.serviceType=n,r?.appName&&this.origProject.apps[r.appName]?this.appName=r.appName:this.origProject.apps[""]?this.appName="":this.appName=Object.keys(this.origProject.apps)[0]||"",this.project=this.copyProjectData(this.origProject),this.domainAdapter=a,this.metadataService=o,this.vocabularyAPI=new i.VocabularyService,this.fileSystemFiles=new Map,this.suppressMessages=!1,this.messageCache=new Map,this.messageHandler=r?.messageHandler,this.collectedChanges=new Map,this.diagnosticsHandler=(e,t,n=x.GenericComponent)=>{if(!this.suppressMessages&&(t=this.interceptDiagnostics(e,t))&&this.messageHandler){this.messageCache.has(e)||this.messageCache.set(e,new Map);const a=this.messageCache.get(e);if(a.set(n,t),this.genericAnnotationService.getOpenedFiles().has(e)){const t=[],n=this.genericAnnotationService.fileCache[e];if(n&&n.serviceFile){const e=n.serviceFile.content;a.forEach((n=>{t.push(...(0,f.convertMessages)(e,this.genericAnnotationService.context,n))}))}this.messageHandler(e,t)}}},this.domainAdapter.setDiagnosticsHandler(((e,t)=>{this.diagnosticsHandler(e,t,x.Adapter)})),this.genericAnnotationService=new p.AnnotationServiceImpl(this.diagnosticsHandler.bind(this),!1,this.metadataService,"",c.uxLogger,{supportSplit:this.domainAdapter.isSplitSupported()})}getGenericAnnotationService(){return this.genericAnnotationService}collectChanges(e,t,n){const a=this.collectedChanges.get(e)||{textEdits:[],selfClosed:new Map};if(a.textEdits.push(...t),n)for(const[e,t]of n)a.selfClosed.set(e,t);this.collectedChanges.set(e,a)}initializeGenericComponent({annotationFiles:e,metadataXmlFile:t}){this.genericAnnotationService=new p.AnnotationServiceImpl(this.diagnosticsHandler.bind(this),!1,this.metadataService,"",c.uxLogger,{supportSplit:this.domainAdapter.isSplitSupported()});const n=[],a=t?.relativeUri||e[0]?.relativeUri||"",o=this.serviceType===y.ServiceType.CDS?(0,u.getMetadataElementsFromMap)(this.cdsArtifacts.metadataElementMap):[];e.forEach((e=>{const r=this.serviceType===y.ServiceType.CDS||e.relativeUri===t?.relativeUri,i=this.domainAdapter.toServiceFile(e.relativeUri,e.fileContent,r,this.project,this.serviceName,this.cdsArtifacts);this.serviceType===y.ServiceType.EDMX&&e.relativeUri===a&&o.push(...i.content.metadataElements||[]),n.push(i)}));const r=this.cdsArtifacts?.cdsCompilerFacade;if(r){const{propagationMap:t,sourceUris:a}=r.getPropagatedTargetMap(this.serviceName),o=r.getMetadata(),i=e.filter((e=>a.has(e.relativeUri))).map((e=>{const n=this.domainAdapter.toServiceFile(e.relativeUri,e.fileContent,!0,this.project,this.serviceName,this.serviceType===y.ServiceType.CDS?{...this.cdsArtifacts,propagationMap:t,metadataElementMap:o}:null);return n.uri=l.GHOST_FILENAME_PREFIX+n.uri,n}));n.splice(0,0,...i.filter((e=>e.content.targets.length>0)))}this.metadataService.import(o,a),this.genericAnnotationService.loadService(n)}getChangeableAnnotationFile(e){const t=(0,s.getFileProperties)(this.project,this.serviceName,e,this.appName);return!t||t.readOnly||this.serviceType===y.ServiceType.CDS&&this.cdsArtifacts.compileMessagesMap.has(e)&&this.cdsArtifacts.compileMessagesMap.get(e).hasSyntaxErrors?null:this.getAnnotationFile(e)}copyProjectData(e){const t={};return Object.keys(e.apps).forEach((n=>{const a=e.apps[n],o={};Object.keys(a.annotations).forEach((e=>{const t=a.annotations[e];o[e]=t}));const r={};Object.keys(a.services).forEach((e=>{const t=a.services[e];r[e]={uri:t.uri,local:t.local},t.annotations&&(r[e].annotations={uri:t.annotations.uri,local:t.annotations.local})})),t[n]={annotations:o,services:r}})),{root:e.root,apps:t,type:e.type}}async adaptProjectData(e){if(this.serviceType===y.ServiceType.CDS){const t=await(0,r.getCdsRoots)(this.origProject.root,e??!1),n=S.default.resolve(t,{skipModelCache:!0}).map((e=>(0,o.relative)(this.origProject.root,e)));this.cdsArtifacts=await(0,u.getCdsArtifacts)(this.project,this.serviceName,n,this.fileSystemFiles),this.project.apps[this.appName]=this.project.apps[this.appName]||{manifest:"",changes:"",mainService:"",services:{}};const a=this.cdsArtifacts.fileSequence.filter((e=>!this.fileSystemFiles.has(e)));if(a?.length){const e=await(0,g.readFilesForSelectors)(this.origProject,a);for(const t of e)this.fileSystemFiles.set(t.fileUri,{fileContent:t.fileContent,fileUri:t.fileUri,isDirty:!1})}this.project.apps[this.appName].services[this.serviceName]=this.project.apps[this.appName].services[this.serviceName]||{},this.project.apps[this.appName].annotations={},this.project.apps[this.appName].annotations[this.serviceName]=this.cdsArtifacts.fileSequence}}async prepare(e){await this.adaptProjectData(e),this.serviceType===y.ServiceType.CDS&&this.metadataService.setUriMap(this.cdsArtifacts.cdsCompilerFacade.getUriMap());const t=[],n=new Set,{annotationFiles:a,metadataXmlFileUri:o}=(0,s.getProjectFiles)(this.project,this.serviceName,this.appName);let r;if(a.filter((e=>!!e?.fileUri&&this.fileSystemFiles.has(e.fileUri))).forEach((e=>{const a=this.fileSystemFiles.get(e.fileUri);n.has(a.fileUri)||(n.add(a.fileUri),t.push({relativeUri:a.fileUri,fileContent:a.fileContent||""}))})),o&&this.fileSystemFiles.has(o)){const e=this.fileSystemFiles.get(o);r={relativeUri:e.fileUri,fileContent:e.fileContent||""}}return{annotationFiles:t,metadataXmlFile:r}}addAvailableNamespaces(e,t,n=new Set){if(!n.has(e)){n.add(e);const a=this.getAnnotationFileInternal(e);if(a){a.references.filter((e=>!!e?.uri)).forEach((e=>{const a=(0,o.relative)(this.project.root,e.uri);t.set(e.name+"|"+a,{uri:e.uri,name:e.name,type:"reference"}),this.addAvailableNamespaces(a,t,n)}))}}}getMissingRefs(e,t,n,a,o){const r=new Set,i=(0,_.getPathsInTarget)(n,this.metadataService,a,o),s=new Map;this.addAvailableNamespaces(t,s);const l=[...s.values()],p=[...this.genericAnnotationService.annotationFileSequence].map((e=>this.genericAnnotationService.fileCache[e].serviceFile.content)),{definitionIndex:c,virtualProperties:u}=function(e,t){const n=new Map,a=new Map;for(const o of t.reverse())for(const t of o.targets){const r=e.getMetadataElement(t.name);r&&O(n,a,r,t,o.uri)}return{definitionIndex:n,virtualProperties:a}}(this.metadataService,p);for(const e of i){const n=w(c,this.checkMetadataDefinitions(t,a,l,r,u,e));if(!this.hasMissingUri(n,t,l))continue;const o=n[0],i=(0,h.toUnifiedUri)(o),s=this.getCrossAppFolder(i);if(s&&e.forOverriding){const e=`Aborted to avoid cross app using statement in '${t}' pointing to '${s}'`;throw new C.ApiError(e,C.ApiErrorCode.General)}s||r.add(o)}return r}hasMissingUri(e,t,n){if(0===e.length)return!1;for(const a of e)if(a===t||(0,_.isAvailable)(this.project,n,a))return!1;return!0}getCrossAppFolder(e){let t="";return(0,I.isSubDirectory)((0,h.toUnifiedUri)(`${this.appName}/`),e)||Object.keys(this.project?.apps||{}).forEach((n=>{(0,I.isSubDirectory)((0,h.toUnifiedUri)(`${n}/`),e)&&(t=n)})),t}checkMetadataDefinitions(e,t,n,a,o,r){const i=r.path.indexOf("@"),s=i>=0?r.path.substring(0,Math.max(0,i-1)):r.path,l=(0,f.resolvePath)(s,t),p=l.split("/"),c=o.get(l);c&&a.add(c);const u=this.checkSegments(e,n,a,p);if(-1!==i){const e=r.path.slice(i-1);return`${r.forOverriding?l:u}${e}`}}checkSegments(e,t,n,a){let o;for(const r of a){let a=null;if(a=o?this.metadataService.getMetadataElement(o+"/"+r):this.metadataService.getMetadataElement(r),!a)break;if(o=a.path,a.importUri===e||(0,_.isAvailable)(this.project,t,a.importUri,a.originalName)||n.add(a.importUri),this.metadataService.getEdmTargetKinds(o).includes("NavigationProperty")){const e=this.metadataService.getMetadataElement(a.structuredType);o=e?e.path:""}}return o}async getTextEditForMissingRefs(e,t,n){const a=[];for(const n of[...e]){const e=await(0,A.toReferenceUri)(this.project,t,n);a.push(this.domainAdapter.serializeReference({namespace:"",referenceUri:e}))}let o=a.join("\n");const r=((0,l.getAllNamespacesAndReferences)(n.namespace,n.references)||[]).reduce(((e,t)=>(t.uriRange&&!(0,l.isBefore)(t.uriRange.end,e)&&(e=(0,d.copyPosition)(t.uriRange.end)),e)),{line:0,character:0});if(0===r.line&&0===r.character)o+="\n\n";else{const e=this.fileSystemFiles.get(t).fileContent.split("\n");r.character=e[r.line].length,o="\n"+o,r.line===e.length-1&&(o+="\n\n")}return{range:{start:r,end:r},newText:o}}async setFiles(e,t){(e||[]).forEach((e=>{this.fileSystemFiles.set(e.fileUri,Object.assign(e,{isDirty:!1}))})),this.initializeGenericComponent(await this.prepare(t))}setMessageHandler(e){this.messageHandler=e}getAliasInformation(e){return(0,l.getAliasInformation)(e,this.genericAnnotationService.context.metadata.getNamespaces())}getAnnotationFileInternal(e){return this.genericAnnotationService.fileCache[e]&&this.genericAnnotationService.fileCache[e].serviceFile.content}interceptDiagnostics(e,t){let n={suppressDiagnostics:!1,quickFixTextEdits:[]};if(this.fileSystemFiles.has(e)){const a=this.getAnnotationFileInternal(e);a&&(n=this.domainAdapter.interceptDiagnostics(a,t),this.quickFixTextEdits=n.quickFixTextEdits)}return n.suppressDiagnostics?null:t}async updateFileContent(e,t,n){const a=(0,s.getFileProperties)(this.project,this.serviceName,e,this.appName),i=this.fileSystemFiles.get(e);if(i&&a&&!a.readOnly)if(i.fileContent=t,i.isDirty=!0,"Cap"===this.project.type&&n?.updateOnly){const e=await(0,r.getCdsRoots)(this.origProject.root),t=S.default.resolve(e,{skipModelCache:!0}).map((e=>(0,o.relative)(this.origProject.root,e)));this.cdsArtifacts=await(0,u.getCdsArtifacts)(this.project,this.serviceName,t,this.fileSystemFiles),this.cdsArtifacts.compileMessagesMap=this.cdsArtifacts.cdsCompilerFacade.getCompilerErrors(this.project)}else{this.initializeGenericComponent(await this.prepare());const t=this.genericAnnotationService.fileCache[e].serviceFile.content;this.genericAnnotationService.onFileChanged(e,t)}}addCommentsToRangeCds(e,t){const n=(0,A.toAbsoluteUri)(this.project,e),a=this.cdsArtifacts.cdsCompilerFacade.getTokensForUri(n);return(0,_.addCommentsCds)(a,t)}async getFileContent(e){return this.fileSystemFiles.get(e).fileContent}async changeFile(e,t,n){const a="Update rejected due to changes leading to compile errors",o=this.fileSystemFiles.get(e),r=o.fileContent,i=(0,s.applyTextEdits)(o.fileContent,t,n?.selfClosed);this.quickFixTextEdits=[];try{await this.updateFileContent(e,i,n);let t=this.getCompileErrors();if(t.size)throw new C.ApiError(a,C.ApiErrorCode.CompileError,t);if(this.quickFixTextEdits.length){const r=(0,s.applyTextEdits)(o.fileContent,this.quickFixTextEdits);if(await this.updateFileContent(e,r,n),t=this.getCompileErrors(),t.size)throw new C.ApiError(a,C.ApiErrorCode.CompileError,t)}}catch(t){throw await this.updateFileContent(e,r,n),t instanceof C.ApiError?t:new C.ApiError(`Applying updates has failed. ${t}`)}}getMetadataService(){return this.metadataService}getAnnotationFiles(e){return this.getConvertedAnnotationFiles(!1,e).filter((t=>e||!t.fileUri.startsWith(l.GHOST_FILENAME_PREFIX)))}getAnnotationFileUris(){return this.genericAnnotationService.annotationFileSequence.filter((e=>!e.startsWith(l.GHOST_FILENAME_PREFIX))).map((e=>({fileUri:e,type:(0,s.getFileProperties)(this.project,this.serviceName,e,this.appName).readOnly?y.AnnotationFileType.Readonly:y.AnnotationFileType.Changeable})))}getConvertedAnnotationFiles(e,t){return this.genericAnnotationService.annotationFileSequence.map((n=>{const a=(0,s.getFileProperties)(this.project,this.serviceName,n.startsWith(l.GHOST_FILENAME_PREFIX)?n.slice(1):n,this.appName).readOnly?y.AnnotationFileType.Readonly:y.AnnotationFileType.Changeable,o=this.getAnnotationFileInternal(n),r=(0,l.getAllNamespacesAndReferences)(o.namespace,o.references),i=this.getAliasInformation(r);return{fileUri:n,type:a,content:(0,f.convertTargetsFromInternal)(o.targets,i,n,this.genericAnnotationService,e,t)}}))}getConvertedAnnotations(){this.metadataServiceOutput||(this.metadataServiceOutput={version:"2.0",identification:"metadataFile",schema:(0,b.convertMetaDataToAvtSchema)(this.metadataService),references:[]});const e=this.metadataServiceOutput,t=this.getConvertedAnnotationFiles(!0),n=t.filter((e=>!e.fileUri.startsWith(l.GHOST_FILENAME_PREFIX))),a=[...this.genericAnnotationService.context.annotationFileSequence].reverse();[...n].sort(((e,t)=>a.indexOf(e.fileUri)-a.indexOf(t.fileUri))).forEach((e=>{const n={},a=[],o=t.find((t=>t.fileUri===l.GHOST_FILENAME_PREFIX+e.fileUri))?.content??[];[...e.content,...o].forEach((e=>{const t=e.annotations.reduce(((t,a)=>{const o=`${e.target}@${a.term}#${a.qualifier??""}`;return n[o]||(n[o]=!0,t.push(a)),t}),[]);e.annotations=t,t.length&&a.push(e)})),e.content=a}));const o=e.references;return n.forEach((t=>{e.schema.annotations[t.fileUri]=t.content;const n=this.getAnnotationFileInternal(t.fileUri),a=(0,l.getAllNamespacesAndReferences)(n.namespace,n.references),r=this.getAliasInformation(a);Object.keys(r.aliasMap).forEach((e=>{e===r.aliasMap[e]||o.find((t=>t.alias===e))||o.push({uri:"",alias:e,namespace:r.aliasMap[e]})}))})),(0,v.convert)(e)}getAnnotationFile(e){let t=null;const n=(0,s.getFileProperties)(this.project,this.serviceName,e,this.appName);if(n){const a=n.readOnly?y.AnnotationFileType.Readonly:y.AnnotationFileType.Changeable,o=this.getAnnotationFileInternal(e),r=(0,l.getAllNamespacesAndReferences)(o.namespace,o.references),i=this.getAliasInformation(r);t={fileUri:e,type:a,content:(0,f.convertTargetsFromInternal)(o.targets,i,e,this.genericAnnotationService,!1)}}return t}enableMessagesForAnnotationFiles(e){(e||[]).forEach((e=>this.genericAnnotationService.onFileOpened(e)))}disableMessagesForAnnotationFiles(e){(e||[]).forEach((e=>this.genericAnnotationService.onFileClosed(e)))}getMessagesForAnnotationFiles(e,t){const n=new Map;return this.genericAnnotationService.annotationFileSequence.forEach((a=>{if(e.includes(a)){const e=this.getAnnotationFileInternal(a);let o=this.genericAnnotationService.check(e,a);t&&(o=o.filter((e=>e.rule===t))),n.set(a,o)}})),n}async setConvertedAnnotationsForTarget(e,t,n,a){const o=this.getConvertedAnnotations();if(a||(a=t[0].__source),!this.getChangeableAnnotationFile(a))return null;const r=t.map((e=>(0,v.revertTermToGenericType)(o.references,e)));await this.setAnnotationsForTarget(a,e,r,n)}changeAnnotationForTarget(e,t,n,a){if(!this.getChangeableAnnotationFile(e))throw new C.ApiError(`File '${e}' not changeable`,C.ApiErrorCode.General);const o=this.getAnnotationFileInternal(e),r=this.fileSystemFiles.get(e).fileContent,i=(0,l.getAllNamespacesAndReferences)(o.namespace,o.references),s=this.getAliasInformation(i),p=(0,m.addAllVocabulariesToAliasInformation)(s,this.vocabularyAPI.getVocabularies());let c;if(o.targets.filter((e=>(0,f.resolvePath)(e.name,s)===t)).forEach((e=>{c||(c=e.terms.find((e=>{const t=(0,l.getElementAttributeValue)(e,"Qualifier"),a=(0,l.resolveName)((0,l.getElementAttributeValue)(e,"Term"),s.aliasMap).qName;return n.term===a&&(!t&&!n.qualifier||t===n.qualifier)})))})),!c){const e=`${t}/${n.term}`+n.qualifier?`#${n.qualifier}`:"";throw new C.ApiError(`Term '${e}' does not exist`,C.ApiErrorCode.General)}const u=(a||[]).map((e=>{const{content:t,changeType:n,pointer:a,moveFromPointer:o}=e;if(t?.type===E.MOD_TYPE_PRIMITIVE){const e=t;e.expressionType&&N.expressionNames[e.expressionType]&&(e.value=this.domainAdapter.serializePrimitiveValue(e.expressionType,String(e.value)))}return{kind:n,pointer:a,moveFromPointer:o,content:t}})),d=new Map,g=(0,h.convertModificationsToTextEdits)(r,c,d,p,u,this.domainAdapter,(t=>this.serviceType===y.ServiceType.EDMX?(0,h.addComments)(o,r,t):this.serviceType===y.ServiceType.CDS?this.addCommentsToRangeCds(e,t):void 0).bind(this));return this.collectChanges(e,g,d),null}async setAnnotationsForTarget(e,t,n,a,o,r){const i=r?n.filter((e=>e.value||e.record||e.collection)):[...n];if(0===i.length)return this.deleteAnnotationsForTarget(e,t,n,o);const s=this.getChangeableAnnotationFile(e);if(!s)return null;let p;const c=this.getAnnotationFileInternal(e),u=this.fileSystemFiles.get(e).fileContent,d=(0,l.getAllNamespacesAndReferences)(c.namespace,c.references),g=this.getAliasInformation(d),P=(0,m.addAllVocabulariesToAliasInformation)(g,this.vocabularyAPI.getVocabularies()),E=[],v=new Map;if(this.serviceType===y.ServiceType.CDS){const o=n.reduce(((e,t)=>e.set((0,h.getKey)(t),t)),new Map),r=new Set;c.targets.filter((e=>e.name===t)).forEach((t=>{const n=[];t.terms.forEach(((e,t)=>{let i=!1;if(a)i=!0;else{const t=(0,l.resolveName)((0,l.getElementAttributeValue)(e,"Term"),P.aliasMapVocabulary).qName,n=(0,l.getElementAttributeValue)(e,"Qualifier"),a=t+(n?"#"+n:"");i=o.has(a),i&&r.add(a)}i&&n.push(t)})),E.push(...(0,_.getTextEditsToDeleteAnnotations)(this.project,e,t,c,n,this.cdsArtifacts.cdsCompilerFacade))}));const s=(0,f.convertTargetAnnotationsToInternal)({target:t,annotations:i},P),p=this.getMissingRefs(c,e,s,P,r);if(p.size>0){const t=await this.getTextEditForMissingRefs(p,e,c);E.push(t)}const m=u.split("\n"),d=this.addCommentsToRangeCds(e),y=d?.start??{line:m.length-1,character:m[m.length-1].length},g=this.replacePathBaseWithOriginalName(t),T=function(e,t,n){const a=e=>{const t=e.split("/").shift();return(0,l.parseIdentifier)(t)};if(e===t)return n;{const{namespaceOrAlias:e,name:o}=a(t);return[[e,n.split("/").shift().slice(-o.length)].join("."),...n.split("/").slice(1)].join("/")}}(t,s.name,g??t);s.name=T;const v=!d&&m[m.length-1].trim().length>0;E.push({newText:(v?"\n":"")+this.domainAdapter.serializeTarget(s),range:{start:y,end:y}})}else{const e=s.content.filter((e=>e.target===t))[0];if(e){const o=n.reduce(((e,t)=>e.set((0,h.getKey)(t),t)),new Map);a&&e.annotations.forEach(((t,n)=>{o.has((0,h.getKey)(t))||E.push({range:e.origins[n],newText:""})}));const i=e.annotations.reduce(((e,t)=>e.set((0,h.getKey)(t),t)),new Map),s=c.targets.filter((e=>(0,f.resolvePath)(e.name,g)===t))[0];n.forEach((t=>{const n=i.get((0,h.getKey)(t));if(n)if(!r||t.value||t.record||t.collection){const e=[];(0,T.collectAnnotationModifications)("",n,t,e,P);const a=s.terms.filter((e=>{const n=(0,l.getElementAttributeValue)(e,"Qualifier"),a=(0,l.resolveName)((0,l.getElementAttributeValue)(e,"Term"),g.aliasMap).qName;return t.term===a&&(!n&&!t.qualifier||n===t.qualifier)}))[0];E.push(...(0,h.convertModificationsToTextEdits)(u,a,v,P,e,this.domainAdapter))}else{const n=e.annotations.findIndex((e=>e.term===t.term&&(!e.qualifier&&t.qualifier||e.qualifier===t.qualifier)));n>-1&&E.push({range:e.origins[n],newText:""})}else if(s.terms.length){const e=s.terms[s.terms.length-1];E.push({newText:this.domainAdapter.serializeElement((0,f.convertAnnotationToInternal)(t,P),s.range.start.character),range:{start:e.range.end,end:e.range.end}})}else{const n={target:e.target,annotations:[t],origins:[]},a=c.namespace.range.start.character;E.push({newText:this.domainAdapter.serializeTarget((0,f.convertTargetAnnotationsToInternal)(n,P),a),range:s.range})}}))}else{const e={target:t,annotations:n};let a;const o=c.namespace;if(p=o.range.start.character,c?.targets?.length){a=c.targets[c.targets.length-1].range.end}else a=o?.contentRange?.start;a&&E.push({newText:this.domainAdapter.serializeTarget((0,f.convertTargetAnnotationsToInternal)(e,P),p),range:{start:a,end:a}})}}return o?(this.collectChanges(e,E,v),null):(await this.changeFile(e,E,{selfClosed:v}),this.getAnnotationFile(e))}async deleteAnnotationsForTarget(e,t,n,a){if(!this.getChangeableAnnotationFile(e))return null;const o=this.getAnnotationFileInternal(e),r=this.fileSystemFiles.get(e).fileContent,i=(0,l.getAllNamespacesAndReferences)(o.namespace,o.references),s=this.getAliasInformation(i),p=[],c=n.reduce(((e,t)=>e.add((0,h.getKey)(t))),new Set);return o.targets.filter((e=>(0,f.resolvePath)(e.name,s)===t)).forEach((t=>{const n=[];let a=!0;const i=[];if(t.terms.forEach(((e,t)=>{const p=(0,l.getElementAttributeValue)(e,"Term"),u={term:(0,l.resolveName)(p,s.aliasMap).qName,qualifier:(0,l.getElementAttributeValue)(e,"Qualifier")};if(c.has((0,h.getKey)(u)))if(this.serviceType===y.ServiceType.CDS)i.push(t);else{const t=(0,h.addComments)(o,r,e.range);n.push({range:t,newText:""})}else a=!1})),this.serviceType===y.ServiceType.CDS)p.push(...(0,_.getTextEditsToDeleteAnnotations)(this.project,e,t,o,i,this.cdsArtifacts.cdsCompilerFacade));else if(a){const e=(0,h.addComments)(o,r,t.range);p.push({range:e,newText:""})}else p.push(...n)})),a?(this.collectChanges(e,p),null):(await this.changeFile(e,p),this.getAnnotationFile(e))}async save(){for(const[e,t]of this.collectedChanges)await this.changeFile(e,t.textEdits,{selfClosed:t.selfClosed,updateOnly:!0});this.collectedChanges=new Map;const e=new Map;this.fileSystemFiles.forEach(((t,n)=>{if(t.isDirty){const a=(0,s.getFileProperties)(this.project,this.serviceName,n,this.appName);a&&!a.readOnly&&e.set(n,t.fileContent)}}));const t=await(0,g.saveFiles)(this.project.root,e);return t.done&&this.fileSystemFiles.forEach(((e,t)=>{e.isDirty=!1})),{...t,files:e.size}}saveLegacy(){return this.save()}getAnnotation(e,t,n){let a=null,o="";return this.getConvertedAnnotationFiles(!0).forEach((r=>{n&&r.fileUri===n||(r.content||[]).filter((t=>t.target===e)).forEach((e=>{(e.annotations||[]).forEach((e=>{e.term===t.term&&((e.qualifier||t.qualifier)&&e.qualifier!==t.qualifier||(a=e,o=r.fileUri))}))}))})),{annotation:a,fileUri:o}}getAvailableValues(e,t,n,a,o){let r=[];const i=this.genericAnnotationService.fileCache[e];if(i&&i.serviceFile){const e=i.serviceFile.content,s=(0,l.getAllNamespacesAndReferences)(e.namespace,e.references),u=(0,l.getAliasInformation)(s,this.genericAnnotationService.context.metadata.getNamespaces()),m=(0,h.findAnnotationElement)(e,t,u,n),d=m?(0,P.convertPathInAnnotationToInternal)(m,a):"";if(m&&d){const e={targetPath:t,newTarget:!1,embeddedIn:"",embeddedType:"",annotation:m,path:d,elementContext:{parentElement:null,attributeArea:!1}};r=(0,p.completeAnnotationValue)(this.genericAnnotationService.context,e,o,u,c.uxLogger).filter((e=>!e.type||e.type!==p.CompletionItemType.Snippet)).filter((e=>"/"!==e.text)).map((e=>{e.text=(0,l.getSegmentWithoutAlias)(u,e.text),e.insertText&&(e.insertText=(0,l.getSegmentWithoutAlias)(u,e.insertText));const t={value:e.insertText||e.text,text:e.text};return e.commitCharacters&&e.commitCharacters.includes("/")?e.commitCharacterRequired?t.segmentUsage=y.SegmentUsage.asIntermediateSegmentOnly:t.segmentUsage=y.SegmentUsage.asLastOrIntermediateSegment:t.value.indexOf("/")<0&&o&&o.indexOf("/")>=0&&(t.segmentUsage=y.SegmentUsage.asLastSegmentOnly),t.segmentUsage&&(t.isSegment=!0),t})).filter((e=>{const t=o&&o.indexOf("/")>=0?o.split("/").pop():"",n=e.isSegment?t:o||"";return e.value.toUpperCase().startsWith(n.toUpperCase())}))}}return r}getNextPathSegments(e,t,n){return this.genericAnnotationService.getNextPathSegments(e,t,n)}getMergedAnnotations(e=!1){const t=new Map;this.getConvertedAnnotationFiles(!0,e).forEach((e=>{e.content.filter((e=>e.target.indexOf("@")<0)).forEach((e=>{let n;t.has(e.target)?n=t.get(e.target):(n=new Map,t.set(e.target,n)),e.annotations.forEach((e=>{const t=e.term+(e.qualifier?"#"+e.qualifier:"");n.set(t,e)}))}))}));const n=[];return t.forEach(((e,t)=>{const a=[];e.forEach((e=>{a.push(e)})),a.sort(((e,t)=>{const n=e.term+(e.qualifier?"#"+e.qualifier:""),a=t.term+(t.qualifier?"#"+t.qualifier:"");return n<a?-1:n>a?1:0}));const o={target:t,annotations:a};n.push(o)})),n.sort(((e,t)=>e.target<t.target?-1:e.target>t.target?1:0)),n}serializeTarget(e,t){const n=t?this.getAnnotationFileInternal(t):null;let a=null;if(n){const e=(0,l.getAllNamespacesAndReferences)(n.namespace,n.references);a=this.getAliasInformation(e)}if(!a){const e=[...this.metadataService.getNamespaces()].map((e=>({name:e})));a=(0,l.getAliasInformation)(e,this.genericAnnotationService.context.metadata.getNamespaces()),a=(0,m.addAllVocabulariesToAliasInformation)(a,this.vocabularyAPI.getVocabularies())}return this.domainAdapter.serializeTarget((0,f.convertTargetAnnotationsToInternal)(e,a))}getNewAnnotationFileContent(e){if("Edmx"===this.project.type){const e=this.appName||Object.keys(this.project.apps)[0],t=`${this.project.apps[e].services[this.serviceName].uri}$metadata`,n=[...this.metadataService.getNamespaces()][0],a={},o={};a[`${n}`]=`${n}`,a.Metadata=`${n}`,o[n]="Metadata";const r={aliasMap:a,aliasMapMetadata:a,aliasMapVocabulary:{},currentFileNamespace:this.getUniqueNamespace(n),reverseAliasMap:o};return this.domainAdapter.getNewAnnotationFile(r,t,this.vocabularyAPI.getVocabularies()).fileContent}{const t=this.cdsArtifacts.cdsCompilerFacade.getFileName(this.serviceName);let n=(0,o.relative)((0,o.dirname)(e),(0,o.join)(this.project.root,(0,o.dirname)(t))).replace(/\\/g,"/");return n=(0,o.join)(n,(0,o.basename)(t,".cds")),n=n.split(o.sep).join("/"),`using ${this.serviceName} as service from '${n}';\n`}}getUniqueNamespace(e){const t=Object.keys(this.genericAnnotationService.fileCache),n=new Set;t.forEach((e=>{const t=this.genericAnnotationService.fileCache[e].namespace;t&&n.add(t)}));let a=`${e}.annotations`,o=0;for(;[...n].includes(a)&&(++o,a=`${a}${o}`,[...n].includes(a)););return a}replacePathBaseWithOriginalName(e){const t=e.split("/"),n=t.shift();return[this.metadataService.getMetadataElement(n)?.originalName??n,...t].join("/")}}},46576:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiErrorMessageHandler=t.AnnotationServiceFactoryImpl=void 0;const a=n(72307),o=n(6164),r=n(20576),i=n(82392),s=n(53308),l=n(17676),p=n(89832),c=n(34799),u=n(98879);t.AnnotationServiceFactoryImpl=class AnnotationServiceFactoryImpl{async getAnnotationService(e,t,n,a){let m,d,y;if(await(0,s.initI18n)(),n===r.ServiceType.EDMX){let n;if(await(0,l.initI18n)(),d=new l.XmlDomainAdapter,y=d.getManifestUris(e),y.length){const a=await(0,i.readFilesForSelectors)(e,y);n=d.getODataVersionFromManifest(a[0].fileContent,t)}else n="2.0";m=new o.MetadataService({ODataVersion:n})}else await(0,p.initI18n)(),d=new p.CdsDomainAdapter,m=new o.MetadataService;const g=new c.AnnotationServiceImpl(e,t,n,d,m,a),f=d.getFileSelectors(),h=await(0,i.readFilesForSelectors)(e,f);await g.setFiles(h,a?.clearResolveCache);const T=g.getCompileErrors();if(T.size)throw new u.ApiError(`Errors compiling CDS project ${e.root} - annotation API cannot be used (service ${t})`,u.ApiErrorCode.CompileError,T);return g}};t.apiErrorMessageHandler=(e,t)=>{let n,o;if(t.forEach((e=>{const t=(e.messages||[]).find((e=>e.severity===a.DiagnosticSeverity.Error));t&&(o=t.text,n=e.target)})),o)throw new u.ApiError(`Error (file '${e}' path '${n}'): ${o}`,u.ApiErrorCode.General)}},51933:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AppGeneratorHelper=t.getAppGeneratorHelper=t.APP_GEN_NEW_ANNOTATION_API_FEATURE=void 0;const o=a(n(57147)),r=n(57310),i=n(28033),s=n(71017),l=n(98879),p=n(36697),c=n(78263),u=n(68047),m=n(6157),d=n(37054),y=n(37705),g=n(58259),f=(0,s.join)("node_modules","@sap","cds","common.cds"),h=["createdAt","createdBy","modifiedAt","modifiedBy"];t.APP_GEN_NEW_ANNOTATION_API_FEATURE="sap.ux.appGenerator.testBetaFeatures.newAnnotationAPI",t.getAppGeneratorHelper=function(e,n,a){return(0,y.isFeatureEnabled)(t.APP_GEN_NEW_ANNOTATION_API_FEATURE)?new AppGeneratorHelper(e,n,a):new g.AppGeneratorHelperLegacy(e,n,a)};class AppGeneratorHelper{constructor(e,t,n){this.project=e,this.serviceName=t,this.appName=n}async startApiUsage(e=!1,t=!0){let n="",a=await d.FioriAnnotationService.createService(this.project,this.serviceName,this.appName,o.default);if(e){const{fileUri:o,isNewFile:r}=await this.getToBeChangedFileUri(a);if(n=o,r){const o=await this.startApiUsage(e,t);n=o.fileUri,a=o.annotationService}}return t&&await a.sync(),{annotationService:a,fileUri:n,projectType:this.project.type}}isHidden(e){let t=!1;return e&&!e.qualifier&&(e.value?e.value&&("Bool"===e.value.type&&!1!==e.value.Bool?t=!0:"Path"===e.value.type&&(t=!1)):t=!0),t}getEntityTypeName(e,t){return(0,p.getEntityTypeNameByEntitySet)(e.getMetadataService(),t)}async getToBeChangedFileUri(e){let t=!1,n="";if("Cap"===this.project?.type){const a=new p.CDSFileCreateHelper(e,this.appName,this.project);n=a.getChangeableFileUri(),n||(n=await a.createCDSFile(),t=!0,this.project=(await(0,i.createProjectProvider)(this.project.root)).project)}else{const a=new p.EdmxFileCreateHelper(e,this.appName,this.project,this.serviceName);n=a.getChangeableFileUri(),n||(n=await a.createEdmxFile(),t=!0,this.project=(await(0,i.createProjectProvider)(this.project.root)).project)}return{fileUri:n,isNewFile:t}}generateFieldGroup(e,t){const n=this.getDataFieldRecordCollection(e,t),a={term:"com.sap.vocabularies.UI.v1.FieldGroup",qualifier:"",record:{type:"com.sap.vocabularies.UI.v1.FieldGroupType",propertyValues:[{name:c.FIELD_GROUP_PROP_NAME_DATA,value:{type:"Collection",Collection:n}}]}},o=Object.keys(e?.annotations.UI||{}).filter((e=>e.startsWith("FieldGroup#"))).map((e=>e.split("#")[1])),r=(0,p.generateId)(o,"GeneratedGroup1");return a.qualifier=r||"",a}getDataFieldRecordCollection(e,t,n=!1){const a=[...e.entityProperties],o=[],r=this.project.type;let i=[];n&&(e.keys.forEach((e=>e.isKey?i.push(e.name):void 0)),e.annotations.Common?.SemanticKey?.forEach((e=>e.value?i.push(e.value):void 0)),i=Array.from(new Set([...i])),i.forEach((e=>{const t=a.map((e=>e.name)).indexOf(e),n=a.splice(t,1);a.unshift(n[0])})));for(const s of a){let a=`${e.fullyQualifiedName}/${s.name}`,u=s;const m=t.getMetadataElement(a);if(!p.draftSpecificFields.includes(s.name)){if("Cap"===r){if(this.isPropertyFromCommonNodeModule(s.name,m?.location?.uri))continue;if(s.name.split("_").length>1){const t=m?.originalName.split(".").pop();a=`${e.fullyQualifiedName}/${t}`;const n=e.navigationProperties.by_name(t);n&&(u=n.targetType)}}const t=m?.edmPrimitiveType,p=m?.isCollectionValued;if(!u)throw new l.ApiError(`Path target not found: ${a}`);const d=u.annotations;if("Edm.Guid"!==t&&t?.startsWith("Edm")&&!p){const e=d.Common?.Label,t=d.UI?.Hidden,n=this.isHidden(t),a=d?.title,r=e||a;if(!n){const e={type:"com.sap.vocabularies.UI.v1.DataField",propertyValues:[]};r||e.propertyValues.push({name:c.DATA_FIELD_PROP_NAME_LABEL,value:{type:"String",String:s.name}}),e.propertyValues.push({name:c.DATA_FIELD_PROP_NAME_VALUE,value:{type:"Path",Path:s.name}}),o.push(e)}}if(n&&o.length>=Math.max(i.length,5))break}}return o}isPropertyFromCommonNodeModule(e,t){return!(!e||!t)&&(h.includes(e)&&t.endsWith(f))}async doGenerateDefaultFacets(e){let t;try{const{annotationService:t}=await this.startApiUsage();await t.sync();const n=(0,u.convert)(t.getSchema()),a=this.getEntityTypeName(t,e),o=this.findEntityTypeAnnotations(n,a);if(!o)throw new l.ApiError(`Can not find annotations for entitySet: ${e}`,l.ApiErrorCode.General);return!o.UI.Facets}catch(e){t=e instanceof l.ApiError?e:new l.ApiError(`Reading sections failed. ${e}`)}if(t)throw t}async generateDefaultFacets(e,t){let n;try{const{annotationService:n}=await this.startApiUsage(!0),a=(0,u.convert)(n.getSchema()),o=a.entitySets.by_name(t)?.entityTypeName;if(!o)throw new l.ApiError(`Entity set not found: ${t}`,l.ApiErrorCode.General);const i=a.entityTypes.by_name(o),p=i?.annotations.UI?.Facets;if(p)throw new l.ApiError(`Facet already exist in entitySet: ${t}`,l.ApiErrorCode.General);const d=n.getMetadataService(),y=this.generateFieldGroup(i,d),g={term:"com.sap.vocabularies.UI.v1.Facets",collection:[]},f={type:"com.sap.vocabularies.UI.v1.ReferenceFacet",propertyValues:[{name:c.FACETS_PROP_NAME_ID,value:{type:"String",String:"GeneratedFacet1"}},{name:c.FACETS_PROP_NAME_LABEL,value:{type:"String",String:"General Information"}},{name:c.FACETS_PROP_NAME_TARGET,value:{type:"AnnotationPath",AnnotationPath:`@${y.term}#${y.qualifier}`}}]};g.collection.push(f);const h=(0,r.pathToFileURL)((0,s.join)(this.project.root,e)).toString(),T=[{uri:h,kind:m.ChangeType.InsertAnnotation,content:{target:o,type:"annotation",value:y}},{uri:h,kind:m.ChangeType.InsertAnnotation,content:{target:o,type:"annotation",value:g}}];n.edit(T),await n.save()}catch(e){throw n=e instanceof l.ApiError?e:new l.ApiError(`Generating sections failed. ${e}`),n}}async doGenerateDefaultLineItem(e){let t;try{const{annotationService:t}=await this.startApiUsage(),n=this.getEntityTypeName(t,e),a=(0,u.convert)(t.getSchema()),o=this.findEntityTypeAnnotations(a,n);if(!o)throw`Can not find annotations for entitySet ${e}`;const r=o.UI?.LineItem;return!r}catch(e){t=e instanceof l.ApiError?e:new l.ApiError(`Reading LineItem failed. ${e}`)}if(t)throw t}async generateDefaultLineItem(e,t){let n;try{const{annotationService:n}=await this.startApiUsage(!0);await n.sync();const a=(0,u.convert)(n.getSchema()),o=this.getEntityTypeName(n,t),i=this.findEntityTypeAnnotations(a,o);if(!i)throw new l.ApiError(`Can not find entitySet: ${t}`,l.ApiErrorCode.General);const p=i.UI?.LineItem;if(p)throw new l.ApiError(`LineItem already exist in entitySet: ${t}`,l.ApiErrorCode.General);const c=n.getMetadataService(),d=a.entityTypes.by_name(o),y=this.generateLineItem(d,c),g={uri:(0,r.pathToFileURL)((0,s.join)(this.project.root,e)).toString(),kind:m.ChangeType.InsertAnnotation,content:{target:o,type:"annotation",value:y}};n.edit(g),await n.save()}catch(e){throw n=e instanceof l.ApiError?e:new l.ApiError(`Generating LineItem failed. ${e}`),n}}generateLineItem(e,t){return{term:"com.sap.vocabularies.UI.v1.LineItem",qualifier:"",collection:[...this.getDataFieldRecordCollection(e,t,!0)]}}findEntityTypeAnnotations(e,t){return e.entityTypes.by_fullyQualifiedName(t)?.annotations}async canGenerateValueHelps(e){let t;try{const{annotationService:t,projectType:n}=await this.startApiUsage();if("Cap"!==n)return!1;const a=this.getEntityTypeName(t,e),o=(0,u.convert)(t.getSchema()),r=o.entityTypes.by_name(a);return!!r.navigationProperties.find((e=>(0,g.canGenerateValueListAnnotationForNavigationProperty)(o,r,e,t.getMetadataService())))}catch(e){t=e instanceof l.ApiError?e:new l.ApiError(`Reading LineItem failed. ${e}`)}if(t)throw t}async generateValueHelps(e,t){let n;try{const{annotationService:n,projectType:a}=await this.startApiUsage();if("Cap"!==a)throw"Value Help generation is not supported for the current project type";const o=this.getEntityTypeName(n,t),r=(0,u.convert)(n.getSchema()),i=r.entityTypes.by_name(o),s=i.navigationProperties.filter((e=>(0,g.canGenerateValueListAnnotationForNavigationProperty)(r,i,e,n.getMetadataService())));await this.generateValueList(e,s,n)}catch(e){throw n=e instanceof l.ApiError?e:new l.ApiError(`Generating ValueList failed. ${e}`),n}}async generateValueList(e,t,n){let a;const o=n.getMetadataService();try{t.forEach((t=>{const a=(0,p.getEntitySetNameByEntityType)(o,t.targetTypeName,""),{record:i,key:l}=this.getValueListParameterInOut(t,o),u={term:"com.sap.vocabularies.Common.v1.ValueList",record:{type:"com.sap.vocabularies.Common.v1.ValueListType",propertyValues:[{name:c.VALUE_LIST_PROP_NAME_COLLECTION_PATH,value:{type:p.ExpressionType.String,String:a}},{name:c.VALUE_LIST_PROP_NAME_PARAMETERS,value:{type:p.ExpressionType.Collection,Collection:[i,...this.getValueListParameterDisplayOnly(o,t.targetType,l).slice(0,4)]}}]}},d=[{uri:(0,r.pathToFileURL)((0,s.join)(this.project.root,e)).toString(),kind:m.ChangeType.InsertAnnotation,content:{target:t.fullyQualifiedName,type:"annotation",value:u}}];n.edit(d)})),await n.save()}catch(e){throw a=e instanceof l.ApiError?e:new l.ApiError(`Generating sections failed. ${e}`),a}}getValueListParameterInOut(e,t){const n=t.getMetadataElement(e.fullyQualifiedName),{elementName:a,key:o}=(0,p.getLocalDataPropertyName)(t,n);return{record:{type:"com.sap.vocabularies.Common.v1.ValueListParameterInOut",propertyValues:[{name:c.VALUE_LIST_PROP_NAME_LOCAL_DATA_PROPERTY,value:{type:p.ExpressionType.PropertyPath,PropertyPath:a}},{name:c.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY,value:{type:"String",String:o}}]},key:o}}getValueListParameterDisplayOnly(e,t,n){const a=t.name;return e.getMetadataElement(a).content.filter((e=>{const a=t.entityProperties.by_name(e.name)?.annotations.UI?.Hidden,o=this.isHidden(a);return!(e.name===n||e.isEntityType||e.isCollectionValued||e.isComplexType||o||"Edm.Guid"===e.edmPrimitiveType||p.draftSpecificFields.includes(e.name)||this.isPropertyFromCommonNodeModule(e.name,e.location?.uri))})).map((e=>({type:"com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly",propertyValues:[{name:c.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY,value:{type:"String",String:e.name}}]})))}}t.AppGeneratorHelper=AppGeneratorHelper},58259:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValueListAlreadyExist=t.canGenerateValueListAnnotationForNavigationProperty=t.AppGeneratorHelperLegacy=void 0;const a=n(28033),o=n(71017),r=n(46576),i=n(98879),s=n(36697),l=n(78263),p=n(20576),c=(0,o.join)("node_modules","@sap","cds","common.cds"),u=["createdAt","createdBy","modifiedAt","modifiedBy"];function m(e,t,n,a){if(n.isCollection)return!1;const o=a.getMetadataElement(n.fullyQualifiedName),{elementName:r,key:i}=(0,s.getLocalDataPropertyName)(a,o);if(!i||!t.entityProperties.by_name(r))return!1;if(!(0,s.getEntitySetNameByEntityType)(a,n.targetTypeName,""))return!1;return!d(e.entityTypes.by_name(n.targetTypeName),n)}function d(e,t){const n=t.annotations.Common?.ValueList,a=e.annotations?.["cds.odata"]?.valuelist;return!!n||!!a}t.AppGeneratorHelperLegacy=class AppGeneratorHelperLegacy{constructor(e,t,n){this.project=e,this.serviceName=t,this.appName=n}async startApiUsage(e=!1){let t="";const n=new r.AnnotationServiceFactoryImpl;let a=await n.getAnnotationService(this.project,this.serviceName,"Cap"===this.project?.type?p.ServiceType.CDS:p.ServiceType.EDMX,{appName:this.appName,messageHandler:r.apiErrorMessageHandler,clearResolveCache:!0});if(e){const{fileUri:n,isNewFile:o}=await this.getToBeChangedFileUri(a);if(t=n,o){const n=await this.startApiUsage(e);t=n.fileUri,a=n.annotationService}}return{annotationService:a,fileUri:t,projectType:this.project.type}}isHidden(e){let t=!1;return e&&!e.qualifier&&(e.value?e.value&&("Bool"===e.value.type&&!1!==e.value.Bool?t=!0:"Path"===e.value.type&&(t=!1)):t=!0),t}getEntityTypeName(e,t){return(0,s.getEntityTypeNameByEntitySet)(e.getMetadataService(),t)}async getToBeChangedFileUri(e){let t=!1,n="";if("Cap"===this.project?.type){const o=new s.CDSFileCreateHelper(e,this.appName,this.project);n=o.getChangeableFileUri(),n||(n=await o.createCDSFile(),t=!0,this.project=(await(0,a.createProjectProvider)(this.project.root)).project)}else{const o=new s.EdmxFileCreateHelper(e,this.appName,this.project,this.serviceName);n=o.getChangeableFileUri(),n||(n=await o.createEdmxFile(),t=!0,this.project=(await(0,a.createProjectProvider)(this.project.root)).project)}return{fileUri:n,isNewFile:t}}generateFieldGroup(e,t,n){const a=this.getDataFieldRecordCollection(e,t,n),o={term:"com.sap.vocabularies.UI.v1.FieldGroup",qualifier:"",record:{type:"com.sap.vocabularies.UI.v1.FieldGroupType",propertyValues:[{name:l.FIELD_GROUP_PROP_NAME_DATA,value:{type:"Collection",Collection:a}}]}},r=Object.keys(e?.annotations?.UI||{}).filter((e=>e.startsWith("FieldGroup#"))).map((e=>e.split("#")[1])),i=(0,s.generateId)(r,"GeneratedGroup1");return o.qualifier=i||"",o}getDataFieldRecordCollection(e,t,n,a=!1){const o=[...e.entityProperties],r=[],i=this.project.type;let p=[];a&&(e.keys.forEach((e=>e.isKey?p.push(e.name):void 0)),e.annotations.Common?.SemanticKey?.forEach((e=>e.value?p.push(e.value):void 0)),p=Array.from(new Set([...p])),p.forEach((e=>{const t=o.map((e=>e.name)).indexOf(e),n=o.splice(t,1);o.unshift(n[0])})));for(const c of o){let o=`${e.fullyQualifiedName}/${c.name}`;const u=n.getMetadataElement(o);if(!s.draftSpecificFields.includes(c.name)){if("Cap"===i){if(this.isPropertyFromCommonNodeModule(c.name,u?.location?.uri))continue;if(c.name.split("_").length>1){const t=u?.originalName.split(".").pop(),a=n.getMetadataElement(`${e.fullyQualifiedName}/${t}`);a&&(o=a.path)}}const s=u?.edmPrimitiveType,m=u?.isCollectionValued;if("Edm.Guid"!==s&&s?.startsWith("Edm")&&!m){const e=t.getAnnotation(o,{term:"com.sap.vocabularies.Common.v1.Label"}).annotation,n=t.getAnnotation(o,{term:"com.sap.vocabularies.UI.v1.Hidden"}).annotation,a=this.isHidden(n),i=t.getAnnotation(o,{term:"title"}).annotation,s=e||i;if(!a){const e={type:"com.sap.vocabularies.UI.v1.DataField",propertyValues:[]};s||e.propertyValues.push({name:l.DATA_FIELD_PROP_NAME_LABEL,value:{type:"String",String:c.name}}),e.propertyValues.push({name:l.DATA_FIELD_PROP_NAME_VALUE,value:{type:"Path",Path:c.name}}),r.push(e)}}if(a&&r.length>=Math.max(p.length,5))break}}return r}isPropertyFromCommonNodeModule(e,t){return!(!e||!t)&&(u.includes(e)&&t.endsWith(c))}async doGenerateDefaultFacets(e){let t;try{const{annotationService:t}=await this.startApiUsage(),n=this.getEntityTypeName(t,e),a={term:"com.sap.vocabularies.UI.v1.Facets"};return!t.getAnnotation(n,a).annotation}catch(e){t=e instanceof i.ApiError?e:new i.ApiError(`Reading sections failed. ${e}`)}if(t)throw t}async generateDefaultFacets(e,t){let n;try{const{annotationService:n}=await this.startApiUsage(!0),a=this.getEntityTypeName(n,t),o={term:"com.sap.vocabularies.UI.v1.Facets"};if(n.getAnnotation(a,o).annotation)throw new i.ApiError(`Facet already exist in entitySet: ${t}`,i.ApiErrorCode.General);const r=n.getMetadataService(),s=n.getConvertedAnnotations().entityTypes.find((e=>e.name===a)),p=this.generateFieldGroup(s,n,r),c={term:"com.sap.vocabularies.UI.v1.Facets",collection:[]},u={type:"com.sap.vocabularies.UI.v1.ReferenceFacet",propertyValues:[{name:l.FACETS_PROP_NAME_ID,value:{type:"String",String:"GeneratedFacet1"}},{name:l.FACETS_PROP_NAME_LABEL,value:{type:"String",String:"General Information"}},{name:l.FACETS_PROP_NAME_TARGET,value:{type:"AnnotationPath",AnnotationPath:`@${p.term}#${p.qualifier}`}}]};c.collection.push(u),await n.setAnnotationsForTarget(e,a,[p,c],!1),await n.save()}catch(e){throw n=e instanceof i.ApiError?e:new i.ApiError(`Generating sections failed. ${e}`),n}}async doGenerateDefaultLineItem(e){let t;try{const{annotationService:t}=await this.startApiUsage(),n=this.getEntityTypeName(t,e),a={term:"com.sap.vocabularies.UI.v1.LineItem"};return!t.getAnnotation(n,a).annotation}catch(e){t=e instanceof i.ApiError?e:new i.ApiError(`Reading LineItem failed. ${e}`)}if(t)throw t}async generateDefaultLineItem(e,t){let n;try{const{annotationService:n}=await this.startApiUsage(!0),a=this.getEntityTypeName(n,t),o={term:"com.sap.vocabularies.UI.v1.LineItem"};if(n.getAnnotation(a,o).annotation)throw new i.ApiError(`LineItem already exist in entitySet: ${t}`,i.ApiErrorCode.General);const r=n.getMetadataService(),s=n.getConvertedAnnotations().entityTypes.find((e=>e.name===a)),l=this.generateLineItem(s,n,r);await n.setAnnotationsForTarget(e,a,[l],!1),await n.save()}catch(e){throw n=e instanceof i.ApiError?e:new i.ApiError(`Generating LineItem failed. ${e}`),n}}generateLineItem(e,t,n){return{term:"com.sap.vocabularies.UI.v1.LineItem",qualifier:"",collection:[...this.getDataFieldRecordCollection(e,t,n,!0)]}}async canGenerateValueHelps(e){let t;try{const{annotationService:t,projectType:n}=await this.startApiUsage();if("Cap"!==n)return!1;const a=this.getEntityTypeName(t,e),o=t.getConvertedAnnotations(),r=o.entityTypes.by_name(a);return!!r.navigationProperties.find((e=>m(o,r,e,t.getMetadataService())))}catch(e){t=e instanceof i.ApiError?e:new i.ApiError(`Reading ValueList failed. ${e}`)}if(t)throw t}async generateValueHelps(e,t){let n;try{const{annotationService:n,projectType:a}=await this.startApiUsage(!0);if("Cap"!==a)throw"Value Help generation is not supported for the current project type";const o=n.getConvertedAnnotations(),r=this.getEntityTypeName(n,t),i=o.entityTypes.by_name(r),s=i.navigationProperties.filter((e=>m(o,i,e,n.getMetadataService())));await this.generateValueList(e,s,n)}catch(e){throw n=e instanceof i.ApiError?e:new i.ApiError(`Generating ValueList failed. ${e}`),n}}async generateValueList(e,t,n){let a;const o=n.getMetadataService();try{for(const a of t){const t=(0,s.getEntitySetNameByEntityType)(o,a.targetTypeName,""),{record:r,key:i}=this.getValueListParameterInOut(a,o),p={term:"com.sap.vocabularies.Common.v1.ValueList",record:{type:"com.sap.vocabularies.Common.v1.ValueListType",propertyValues:[{name:l.VALUE_LIST_PROP_NAME_COLLECTION_PATH,value:{type:s.ExpressionType.String,String:t}},{name:l.VALUE_LIST_PROP_NAME_PARAMETERS,value:{type:s.ExpressionType.Collection,Collection:[r,...this.getValueListParameterDisplayOnly(n,a.targetTypeName,i).slice(0,4)]}}]}};await n.setAnnotationsForTarget(e,a.fullyQualifiedName,[p],!1)}await n.save()}catch(e){throw a=e instanceof i.ApiError?e:new i.ApiError(`Generating sections failed. ${e}`),a}}getValueListParameterInOut(e,t){const n=t.getMetadataElement(e.fullyQualifiedName),{elementName:a,key:o}=(0,s.getLocalDataPropertyName)(t,n);return{record:{type:"com.sap.vocabularies.Common.v1.ValueListParameterInOut",propertyValues:[{name:l.VALUE_LIST_PROP_NAME_LOCAL_DATA_PROPERTY,value:{type:s.ExpressionType.PropertyPath,PropertyPath:a}},{name:l.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY,value:{type:"String",String:o}}]},key:o}}getValueListParameterDisplayOnly(e,t,n){return e.getMetadataService().getMetadataElement(t).content.filter((t=>{const a=e.getAnnotation(t.path,{term:"com.sap.vocabularies.UI.v1.Hidden"}).annotation,o=this.isHidden(a);return!(t.name===n||t.isEntityType||t.isCollectionValued||t.isComplexType||o||"Edm.Guid"===t.edmPrimitiveType||s.draftSpecificFields.includes(t.name)||this.isPropertyFromCommonNodeModule(t.name,t.location?.uri))})).map((e=>({type:"com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly",propertyValues:[{name:l.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY,value:{type:"String",String:e.name}}]})))}},t.canGenerateValueListAnnotationForNavigationProperty=m,t.isValueListAlreadyExist=d},98879:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ApiError=t.ApiErrorCode=void 0,function(e){e[e.General=1]="General",e[e.CompileError=2]="CompileError",e[e.ComplexityViolation=3]="ComplexityViolation",e[e.LocalAnnotationFileNotFound=4]="LocalAnnotationFileNotFound"}(n||(t.ApiErrorCode=n={}));class ApiError extends Error{constructor(e,t,a){super(e),this.messageMap=a??new Map,this.errorCode=t??n.General}toString(e=!1){let t=super.toString();if(e){t+=`. Error code: ${this.errorCode}. ${this.messageMap.size>0?"Other messages:":""}`;for(const e of this.messageMap.keys())t+=`\n[${e}]:`,this.messageMap.get(e)?.forEach((e=>t+=`\n- ${e}`))}return t}getExtendedMessage(){let e=this.message;if(this.messageMap.size>0){e+=". Other messages:";for(const t of this.messageMap.keys())e+=`\n[${t}]:`,this.messageMap.get(t)?.forEach((t=>e+=`\n- ${t}`))}return e}}t.ApiError=ApiError},46298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiErrorCode=void 0;var a=n(98879);Object.defineProperty(t,"ApiErrorCode",{enumerable:!0,get:function(){return a.ApiErrorCode}})},70704:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initI18n=t.i18n=void 0;const o=a(n(30909)),r=a(n(82403));t.i18n=o.default.createInstance(),t.initI18n=async function(){await t.i18n.init({resources:{en:{translation:r.default}},lng:"en",fallbackLng:"en",joinArrays:"\n\n"})}},34799:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.initI18n=void 0,o(n(20576),t),o(n(31373),t),o(n(82392),t),o(n(46576),t),o(n(60386),t),o(n(51933),t),o(n(58259),t),o(n(46298),t),o(n(36697),t);var r=n(70704);Object.defineProperty(t,"initI18n",{enumerable:!0,get:function(){return r.initI18n}})},93356:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LcapFioriAnnotationService=void 0;const a=n(37054),o=n(78411);class LcapFioriAnnotationService extends a.FioriAnnotationService{async sync(){await super.sync();const{annotationFiles:e}=this.adapter.getCompiledService();this.genericAnnotationService=(0,o.initializeGenericComponent)(e,this.getMetadataService(),this.serviceName)}getGenericAnnotationService(){return this.genericAnnotationService}getNextPathSegments(e,t,n){return this.genericAnnotationService.getNextPathSegments(e,t,n)}changeAnnotationForTarget(){throw new Error("Method not implemented.")}setAnnotationsForTarget(){throw new Error("Method not implemented.")}saveLegacy(){throw new Error("Method not implemented.")}}t.LcapFioriAnnotationService=LcapFioriAnnotationService},78411:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeGenericComponent=void 0;const a=n(53308),o=n(92719);t.initializeGenericComponent=function(e,t,n){const r=new a.AnnotationServiceImpl((()=>{}),!1,t,"",o.uxLogger,{supportSplit:t.isCds}),i=e.map((e=>({content:e,serviceName:n,uri:e.uri})));return r.loadService(i),r}},258:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getValueFromExpression=t.getValueFromRecord=t.getPathCheckedValueFromRecord=t.getValueFromCollection=t.getPathCheckedValueFromAnnotation=t.getValueFromAnnotation=void 0;const a=n(4317),o=n(68459),r=n(98879);function i(e,t){if(!e)return null;const n=e.origin;if(t===o.ExpressionType.Collection&&e.collection)return{collection:e.collection,collectionOrigins:e.collectionOrigins,range:n};if(t===o.ExpressionType.Record&&e.record)return{record:e.record,range:n};if(t===o.ExpressionType.Record||t===o.ExpressionType.Collection)return{tooComplexReason:o.TooComplexReason.ConstantExpressionExpected,range:n};{const{tooComplexReason:a,value:o,multilineType:r}=l(e.value,t);return a?{tooComplexReason:a,range:n}:r?{value:o,range:n,multilineType:r}:{value:o,range:n}}}function s(e,t,n){if(!e)return null;const a=e.propertyValues.findIndex((e=>e.name===t)),r=a>-1?e.propertyValues[a]:null;if(!r||!r.value)return null;const i=e.propertyValuesOrigins?.[a],s=r.annotations;if(r.value.type===n){if(r.value.type===o.ExpressionType.Collection){const e=r.value;return{collection:e.Collection,collectionOrigins:e.collectionOrigins,range:i,propIndex:a,annotations:s}}if(r.value.type===o.ExpressionType.Record)return{record:r.value.Record,range:i,propIndex:a,annotations:s};{const e=r.value.multilineType;return e?{value:r.value[n],multilineType:e,range:i,propIndex:a,annotations:s}:{value:r.value[n],range:i,propIndex:a,annotations:s}}}return{tooComplexReason:n.endsWith("Path")?o.TooComplexReason.PathExpected:o.TooComplexReason.ConstantExpressionExpected,range:i,propIndex:a}}function l(e,t){if(e||t!==o.ExpressionType.Bool){if(e?.type===o.ExpressionType.Null)return{value:null};if(e?.type===t){const n=e.multilineType;return{value:e[t],multilineType:n}}return e?.type===o.ExpressionType.Unknown?{tooComplexReason:o.TooComplexReason.UnknownExpression}:t.endsWith("Path")?{tooComplexReason:o.TooComplexReason.PathExpected}:{tooComplexReason:o.TooComplexReason.ConstantExpressionExpected}}return{value:!0}}t.getValueFromAnnotation=i,t.getPathCheckedValueFromAnnotation=function(e,t,n){let r=null;const s=i(e,t);if(!s?.tooComplexReason&&n?.context&&t===o.ExpressionType.Path){const{value:e,range:t}=s,i=(0,a.makeInvalidPathTooComplex)(n.context,o.ExpressionType.Path,e,n?.target,{range:t,fileUri:n.fileUri},n.allowedPathsOptions);(0,a.isTooComplex)(i)&&(r={tooComplexReason:i.tooComplexLocations.pop().reason,range:t,value:e})}return{...r,...s}},t.getValueFromCollection=function(e,t,n,a){if(!e)return null;const i=e[n];if(!i)throw new r.ApiError(`Index ${n} does not exist`);const s=t?.[n];return"string"==typeof i&&a===o.ExpressionType.String||"number"==typeof i&&a===o.ExpressionType.Int||"boolean"==typeof i&&a===o.ExpressionType.Bool?{value:i,range:s}:"object"==typeof i&&i.type===a?{value:i[a],range:s}:"object"==typeof i&&a===o.ExpressionType.Record&&i.type!==o.ExpressionType.Path?{record:i,range:s}:{tooComplexReason:a.endsWith("Path")?o.TooComplexReason.PathExpected:o.TooComplexReason.ConstantExpressionExpected,range:s}},t.getPathCheckedValueFromRecord=function(e,t,n,r){let i=null;const l=s(e,t,n),{tooComplexReason:p,propIndex:c}=l;if(!p&&c>=0&&n===o.ExpressionType.Path){const t=e.propertyValues[l.propIndex];if(t.value.type===n){const{range:e}=l,n=(0,a.makeInvalidPathTooComplex)(r.context,o.ExpressionType.Path,t.value[t.value.type],r?.target,{range:e,fileUri:r.fileUri},r.allowedPathsOptions);(0,a.isTooComplex)(n)&&(i={tooComplexReason:n.tooComplexLocations.pop().reason,range:e,value:t.value[t.value.type]})}}return{...i,...l}},t.getValueFromRecord=s,t.getValueFromExpression=l},68459:(e,t)=>{"use strict";var n,a,o,r,i,s,l,p,c,u,m,d,y,g,f,h,T;function P(e){return[t.UI_NODE_TYPE_SECTION,e].join("/")}function E(e){return[t.UI_NODE_TYPE_COLUMN,e].join("/")}function v(e){return[t.UI_NODE_TYPE_DATA_POINT,e].join("/")}Object.defineProperty(t,"__esModule",{value:!0}),t.getFullColumnNodeType=t.getFullSectionNodeType=t.NODE_PROPERTIES=t.SelectionFieldProperties=t.AnalyticalChartProperties=t.ChartProperties=t.ConnectedFieldsProperties=t.ContactProperties=t.ColumnProperties=t.ListProperties=t.ViewsProperties=t.NavigationProperties=t.ActionProperties=t.FormFieldProperties=t.SectionProperties=t.VisualizationType=t.NavigationNodeSubType=t.ChartNodeSubType=t.ColumnType=t.SectionType=t.UI_NODE_TYPE_MACROS=t.UI_NODE_TYPE_VISUAL_FILTER=t.UI_NODE_TYPE_VISUAL_FILTERS=t.UI_NODE_TYPE_FILTER_FIELD=t.UI_NODE_TYPE_FILTER_FIELDS=t.UI_NODE_TYPE_COLUMN=t.UI_NODE_TYPE_LIST=t.UI_NODE_TYPE_VIEWS=t.UI_NODE_TYPE_NAVIGATION=t.UI_NODE_TYPE_ANALYTICAL_CHART=t.UI_NODE_TYPE_DATA_POINT=t.UI_NODE_TYPE_CONTACT=t.UI_NODE_TYPE_CHART=t.UI_NODE_TYPE_ACTION=t.UI_NODE_TYPE_CONNECTED_FIELDS=t.UI_NODE_TYPE_FORM_FIELD=t.UI_NODE_TYPE_SECTION=t.UI_NODE_TYPE_HEADER_SECTIONS=t.UI_NODE_TYPE_FORM=t.UI_NODE_TYPE_PAGE_ACTIONS=t.UI_NODE_TYPE_HEADER_INFO=t.UI_PROP_TYPE_TABLE=t.UI_PROP_TYPE_MULTIPLE_DEPENDENT_ENUMS=t.UI_PROP_TYPE_DEPENDENT_ENUM=t.UI_PROP_TYPE_MULTIPLE_ENUMS=t.UI_PROP_TYPE_DECIMAL=t.UI_PROP_TYPE_NUMBER=t.UI_PROP_TYPE_ENUM=t.UI_PROP_TYPE_BOOL=t.UI_PROP_TYPE_STRING=void 0,t.TooComplexReason=t.ExpressionType=t.FieldType=t.FieldRestriction=t.ChartType=t.INPUT_PARAM_FILTER_FIELD_DATA_TYPE=t.ANY_NON_INITIAL_VALUE=t.ENUM_VALUE_NEW=t.ENUM_VALUE_NULL=t.ENUM_VALUE_NONE=t.ENUM_VALUE_NOT_APPLICABLE=t.UI_PROP_NAME_SV_PATH_KIND=t.SelectionVariantPathKind=t.UI_PROP_NAME_PV_PATH_KIND=t.PresentationVariantPathKind=t.SUBNODE_TYPES=t.getFullDataPointNodeType=void 0,t.UI_PROP_TYPE_STRING="string",t.UI_PROP_TYPE_BOOL="bool",t.UI_PROP_TYPE_ENUM="enum",t.UI_PROP_TYPE_NUMBER="number",t.UI_PROP_TYPE_DECIMAL="decimal",t.UI_PROP_TYPE_MULTIPLE_ENUMS="multipleEnums",t.UI_PROP_TYPE_DEPENDENT_ENUM="dependentEnum",t.UI_PROP_TYPE_MULTIPLE_DEPENDENT_ENUMS="multipleDependentEnums",t.UI_PROP_TYPE_TABLE="table",t.UI_NODE_TYPE_HEADER_INFO="headerInfo",t.UI_NODE_TYPE_PAGE_ACTIONS="pageActions",t.UI_NODE_TYPE_FORM="form",t.UI_NODE_TYPE_HEADER_SECTIONS="headerSections",t.UI_NODE_TYPE_SECTION="section",t.UI_NODE_TYPE_FORM_FIELD="formField",t.UI_NODE_TYPE_CONNECTED_FIELDS="connectedFields",t.UI_NODE_TYPE_ACTION="action",t.UI_NODE_TYPE_CHART="chart",t.UI_NODE_TYPE_CONTACT="contact",t.UI_NODE_TYPE_DATA_POINT="dataPoint",t.UI_NODE_TYPE_ANALYTICAL_CHART="analyticalChart",t.UI_NODE_TYPE_NAVIGATION="navigation",t.UI_NODE_TYPE_VIEWS="views",t.UI_NODE_TYPE_LIST="list",t.UI_NODE_TYPE_COLUMN="column",t.UI_NODE_TYPE_FILTER_FIELDS="filterFields",t.UI_NODE_TYPE_FILTER_FIELD="filterField",t.UI_NODE_TYPE_VISUAL_FILTERS="visualFilters",t.UI_NODE_TYPE_VISUAL_FILTER="visualFilter",t.UI_NODE_TYPE_MACROS="macros",function(e){e.Collection="Collection",e.FieldGroup="FieldGroup",e.Identification="Identification",e.Table="Table",e.Other="Other",e.Progress="Progress",e.Chart="Chart",e.AnalyticalChart="analyticalChart"}(n||(t.SectionType=n={})),function(e){e.Basic="Basic",e.Rating="Rating",e.Progress="Progress"}(a||(t.ColumnType=a={})),function(e){e.Column="Column",e.HeaderSection="HeaderSection"}(o||(t.ChartNodeSubType=o={})),function(e){e.Table="Table",e.Section="Section"}(r||(t.NavigationNodeSubType=r={})),function(e){e.Basic="Basic",e.Progress="Progress",e.Rating="Rating"}(i||(t.VisualizationType=i={})),function(e){e.Label="label",e.Hidden="hidden",e.HideByProperty="hideByProperty"}(s||(t.SectionProperties=s={})),function(e){e.Path="path",e.Label="label",e.Type="type",e.Restriction="restriction",e.Text="text",e.TextArrangement="textArrangement",e.EntitySet="entitySet",e.EntitySetProperty="entitySetProperty",e.ValueDescriptionProperty="valueDescriptionProperty",e.AsDropDown="asDropDown",e.ValueHelpLabel="valueHelpLabel"}(l||(t.FormFieldProperties=l={})),function(e){e.Action="action",e.Label="label"}(p||(t.ActionProperties=p={})),function(e){e.Label="label",e.Importance="importance"}(c||(t.NavigationProperties=c={})),u||(t.ViewsProperties=u={}),function(e){e.Variant="variant"}(m||(t.ListProperties=m={})),function(e){e.Path="path",e.Label="label",e.Importance="importance",e.Text="text",e.TextArrangement="textArrangement",e.ValueHelpLabel="valueHelpLabel",e.Hidden="hidden",e.HideByProperty="hideByProperty"}(d||(t.ColumnProperties=d={})),function(e){e.Path="path",e.Label="label",e.Importance="importance",e.Hidden="hidden",e.HideByProperty="hideByProperty"}(y||(t.ContactProperties=y={})),function(e){e.Label="label"}(g||(t.ConnectedFieldsProperties=g={})),function(e){e.Label="label",e.Importance="importance",e.Hidden="hidden",e.HideByProperty="hideByProperty"}(f||(t.ChartProperties=f={})),function(e){e.Variant="variant"}(h||(t.AnalyticalChartProperties=h={})),function(e){e.Label="label",e.ValueHelpLabel="valueHelpLabel"}(T||(t.SelectionFieldProperties=T={})),t.NODE_PROPERTIES={[t.UI_NODE_TYPE_SECTION]:s,[t.UI_NODE_TYPE_FORM_FIELD]:l,[t.UI_NODE_TYPE_ACTION]:p,[t.UI_NODE_TYPE_NAVIGATION]:p,[t.UI_NODE_TYPE_VIEWS]:u,[t.UI_NODE_TYPE_LIST]:m,[t.UI_NODE_TYPE_COLUMN]:d,[t.UI_NODE_TYPE_CONTACT]:y,[t.UI_NODE_TYPE_FILTER_FIELD]:T,[t.UI_NODE_TYPE_CONNECTED_FIELDS]:g},t.getFullSectionNodeType=P,t.getFullColumnNodeType=E,t.getFullDataPointNodeType=v;const b=["FieldGroup","Table","Identification","Collection","Progress","analyticalChart"].map(P),_=["Basic","Rating","Progress"].map(E);var A,C,N,I,S,x,O;t.SUBNODE_TYPES=new Map([[t.UI_NODE_TYPE_MACROS,new Set([...b,t.UI_NODE_TYPE_FILTER_FIELDS,t.UI_NODE_TYPE_LIST,t.UI_NODE_TYPE_ANALYTICAL_CHART,t.UI_NODE_TYPE_FORM_FIELD,t.UI_NODE_TYPE_CHART])],[t.UI_NODE_TYPE_HEADER_INFO,new Set],[t.UI_NODE_TYPE_PAGE_ACTIONS,new Set([t.UI_NODE_TYPE_ACTION,t.UI_NODE_TYPE_NAVIGATION])],[t.UI_NODE_TYPE_FORM,new Set(b)],[t.UI_NODE_TYPE_HEADER_SECTIONS,new Set([P("FieldGroup"),v("Basic"),v("Progress"),v("Rating"),P("Chart")])],[P("FieldGroup"),new Set([t.UI_NODE_TYPE_ACTION,t.UI_NODE_TYPE_FORM_FIELD,t.UI_NODE_TYPE_CONTACT,t.UI_NODE_TYPE_NAVIGATION,t.UI_NODE_TYPE_CONNECTED_FIELDS])],[P("Identification"),new Set([t.UI_NODE_TYPE_ACTION,t.UI_NODE_TYPE_FORM_FIELD,t.UI_NODE_TYPE_CONTACT,t.UI_NODE_TYPE_CONNECTED_FIELDS])],[P("Table"),new Set([..._,t.UI_NODE_TYPE_ACTION,t.UI_NODE_TYPE_CHART,t.UI_NODE_TYPE_CONTACT,t.UI_NODE_TYPE_NAVIGATION])],[P("Collection"),new Set(b)],[t.UI_NODE_TYPE_VIEWS,new Set([t.UI_NODE_TYPE_LIST,t.UI_NODE_TYPE_ANALYTICAL_CHART])],[t.UI_NODE_TYPE_LIST,new Set([..._,t.UI_NODE_TYPE_ACTION,t.UI_NODE_TYPE_CHART,t.UI_NODE_TYPE_CONTACT,t.UI_NODE_TYPE_NAVIGATION])],[t.UI_NODE_TYPE_FILTER_FIELDS,new Set([t.UI_NODE_TYPE_FILTER_FIELD])],[t.UI_NODE_TYPE_VISUAL_FILTERS,new Set([t.UI_NODE_TYPE_VISUAL_FILTER])],[t.UI_NODE_TYPE_ANALYTICAL_CHART,new Set]]),function(e){e.None="None",e.SPV="SPV",e.PV="PV",e.SPV_PV="SPV_PV"}(A||(t.PresentationVariantPathKind=A={})),t.UI_PROP_NAME_PV_PATH_KIND="pvPathKind",function(e){e.None="None",e.SPV="SPV",e.SV="SV",e.SPV_SV="SPV_SV"}(C||(t.SelectionVariantPathKind=C={})),t.UI_PROP_NAME_SV_PATH_KIND="svPathKind",t.ENUM_VALUE_NOT_APPLICABLE="",t.ENUM_VALUE_NONE="None",t.ENUM_VALUE_NULL="Null",t.ENUM_VALUE_NEW="New",t.ANY_NON_INITIAL_VALUE="*",t.INPUT_PARAM_FILTER_FIELD_DATA_TYPE="filterFieldDataType",function(e){e.Bullet="Bullet",e.Area="Area",e.Donut="Donut",e.Line="Line",e.Bar="Bar",e.Column="Column",e.Pie="Pie",e.HeatMap="HeatMap",e.VerticalBullet="VerticalBullet",e.BarStacked="BarStacked",e.ColumnStacked="ColumnStacked",e.BarStacked100="BarStacked100",e.ColumnStacked100="ColumnStacked100",e.Waterfall="Waterfall",e.HorizontalWaterfall="HorizontalWaterfall"}(N||(t.ChartType=N={})),function(e){e.NotApplicable="",e.Base="None",e.Mandatory="Mandatory",e.Optional="Optional",e.ReadOnly="ReadOnly"}(I||(t.FieldRestriction=I={})),function(e){e.NotApplicable="",e.Base="None",e.InputField="InputField",e.TextArea="TextArea",e.ValueHelp="ValueHelp"}(S||(t.FieldType=S={})),function(e){e.String="String",e.Bool="Bool",e.Decimal="Decimal",e.Date="Date",e.DateTimeOffset="DateTimeOffset",e.Float="Float",e.Guid="Guid",e.Int="Int",e.Path="Path",e.PropertyPath="PropertyPath",e.AnnotationPath="AnnotationPath",e.NavigationPropertyPath="NavigationPropertyPath",e.EnumMember="EnumMember",e.Collection="Collection",e.Record="Record",e.Unknown="Unknown",e.Null="Null"}(x||(t.ExpressionType=x={})),function(e){e.UnsupportedType="UnsupportedType",e.UnsupportedTerm="UnsupportedTerm",e.UnsupportedNumericValue="UnsupportedNumericValue",e.UnsupportedEnumValue="UnsupportedEnumValue",e.UnsupportedMacroName="UnsupportedMacroName",e.UnsupportedMacroPath="UnsupportedMacroPath",e.MultipleMatchingEnumValues="MultipleMatchingEnumValues",e.PathExpected="PathExpected",e.ConstantExpressionExpected="ConstantExpressionExpected",e.NoEntryInCollection="NoEntryInCollection",e.MissingEntryInCollection="MissingEntryInCollection",e.NonUniqueEntryInCollection="NonUniqueEntryInCollection",e.NoValidPath="NoValidPath",e.UnsupportedDynamicPropertyPath="UnsupportedDynamicPropertyPath",e.NoValidAnnoCombination="NoValidAnnoCombination",e.NoValidPropertyCombination="NoValidPropertyCombination",e.CdsBasePropertyOverride="CdsBasePropertyOverride",e.MissingProperty="MissingProperty",e.UnsupportedProperty="UnsupportedProperty",e.SplitAnnotation="SplitAnnotation",e.CollectionWithSingleValueExpected="CollectionWithSingleValueExpected",e.UnsupportedValue="UnsupportedValue",e.UnsupportedPath="UnsupportedPath",e.UnsupportedConstantExpression="UnknownConstantExpression",e.UnknownAction="UnknownAction",e.UnknownExpression="UnknownExpression",e.AnalyticsNotEnabled="AnalyticsNotEnabled",e.VirtualPropertiesNotSupported="VirtualPropertiesNotSupported",e.EmptyEmbeddedCollection="EmptyEmbeddedCollection",e.MultilineString="MultilineString",e.NoValidAnnotationPath="NoValidAnnotationPath",e.CustomViewInMultiViewLR="CustomViewInMultiViewLR",e.UnsupportedDataType="UnsupportedDataType",e.WrongConnectedFieldsTemplate="WrongConnectedFieldsTemplate"}(O||(t.TooComplexReason=O={}))},4317:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEnumBaseValueDiffers=t.isWithBase=t.isTooComplex=t.getIncludedExpressionTypes=t.getAllowedTypes=t.getAnnotationIndexKey=t.getExistingQualifiers=t.resolveMetadataElement=t.resolvePath=t.resolveRelativeAnnotationPath=t.makeInvalidPathTooComplex=t.getFormattedText=t.excludeValueFromList=t.buildTooComplexNode=t.getNoValidPathMessage=t.buildTooComplex=t.toRealFileUri=t.getLocations=t.getAllLocations=t.getLocation=void 0;const a=n(61818),o=n(41810),r=n(68459),i=n(70704);function s(e){return{fileUri:e.fileUri,range:e.annotation.origin}}function l(e){return(e||"").startsWith("!")?e.substring(1):e}function p(e,t,n,a,o){const r=l(n);return{tooComplex:!0,tooComplexLocations:[{fileUri:r,range:t,reason:e,message:c(e,o,n.endsWith(".cds"))}],locations:a?.length?a:[{fileUri:r,range:t}]}}function c(e,t,n){let a;if(!t)return a;switch(n&&(t=t.replace("/",".")),e){case r.TooComplexReason.NoValidPath:a={text:i.i18n.t("InvalidPath",{value:t,interpolation:{escapeValue:!1}}),wrongValue:t};break;case r.TooComplexReason.NoValidAnnotationPath:a={text:i.i18n.t("InvalidAnnotationPath",{value:t,interpolation:{escapeValue:!1}}),wrongValue:t};break;case r.TooComplexReason.UnsupportedDataType:a={text:i.i18n.t("UnsupportedDataType",{value:t,interpolation:{escapeValue:!1}}),wrongValue:t};break;case r.TooComplexReason.UnsupportedValue:a={text:i.i18n.t("UnsupportedValue",{value:t,interpolation:{escapeValue:!1}}),wrongValue:t}}return a}function u(e){if(e.startsWith("@")){const{term:t,qualifier:n,valuePath:a}=m(`dummyTarget/${e}`);return{relativePath:"",term:t,qualifier:n,valuePath:a}}{const{target:t,term:n,qualifier:a,valuePath:o}=m(e);return{relativePath:t,term:n,qualifier:a,valuePath:o}}}function m(e){e.startsWith("/")&&(e=e.slice(1));const[t,...n]=e.split("/@"),a=n.join("/@"),o=a.indexOf("#");if(o>-1){const e=a.substring(0,o),n=a.substring(o+1),r=n.indexOf("/");return{target:t,term:e,qualifier:(r>-1?n.substring(0,r):n)||"",valuePath:r>-1?n.substring(r):"/"}}{const e=a,n=e.indexOf("/");return{target:t,term:n>-1?e.substring(0,n):e,qualifier:"",valuePath:n>-1?e.substring(n):"/"}}}function d(e,t,n=!1){if(!t.includes("/"))return e.getMetadataElement(t);const a=t.split("/");let o=null;for(let t=0;t<a.length;t++){const r=a[t];if(o){const i=o.path;if(o=e.getMetadataElement(i+"/"+r),e.isCds&&a.length-1===t&&n){if(r.split("_").length>1){const t=o?.originalName.split(".").pop();if(t!==r){const n=e.getMetadataElement(`${i}/${t}`);if(n){o=n;break}}}}o?.structuredType&&(o=e.getMetadataElement(o.structuredType))}else o=e.getMetadataElement(r);if(!o)break}return o}function y(e,t,n,a){const o=Object.keys(e).filter((e=>e.startsWith(`${t}/@${n}#`))).map((e=>e.split("#").pop()));return a&&e[`${t}/@${n}`]&&o.unshift(""),o}function g(e,t,n){let a=(e?.startsWith("/")?e.slice(1):e)+"/@"+t;return n&&(a+="#"+n),a}function f(e){const t=[],n=new Set(e?.allowedTypes||new Set);if(n.has(r.ExpressionType.Collection)&&(t.push("Edm.PrimitiveCollection"),n.delete(r.ExpressionType.Collection)),n?.size){const a=new Set,o=e.ignoreIncludedTypes?new Map:h();for(const e of n){a.add(e);for(const t of o.get(e)||new Set)a.add(t)}for(const e of a)t.push(...T(e))}else if(e?.suppressedTypes?.size){const n=new Set;for(const t of e.suppressedTypes)T(t).forEach((e=>n.add(e)));t.push(...Object.keys(a.primitiveTypeMap).filter((e=>!n.has(e))))}else t.push("Edm.PrimitiveType");return t.sort()}function h(){const e=new Map;return e.set(r.ExpressionType.Decimal,new Set([r.ExpressionType.Int])),e.set(r.ExpressionType.Float,new Set([r.ExpressionType.Int])),e.set(r.ExpressionType.Unknown,new Set([r.ExpressionType.Bool,r.ExpressionType.Decimal,r.ExpressionType.Float,r.ExpressionType.Int,r.ExpressionType.String])),e}function T(e){switch(e){case r.ExpressionType.Int:return["Edm.Int16","Edm.Int32","Edm.Int64","Edm.SByte","Edm.Byte"];case r.ExpressionType.Float:return["Edm.Single","Edm.Double"];default:return a.primitiveValueConstantExpressionMap[e]?[a.primitiveValueConstantExpressionMap[e].defaultType]:[]}}function P(e){return!0===e?.tooComplex}t.getLocation=s,t.getAllLocations=function(e){return[...e.app||[],...e.base||[]].map((e=>s(e)))},t.getLocations=function(e){const t=[];for(const n of e||[])n?.top&&(n.isSplit?[...n?.base||[],...n?.app||[]].filter((e=>{return e.fileUri===n.top.fileUri&&!((t=e.annotation).annotations?.length&&!t.record&&!t.collection&&!t.value);var t})).forEach((e=>t.push(s(e)))):t.push(s(n.top)));return t},t.toRealFileUri=l,t.buildTooComplex=p,t.getNoValidPathMessage=c,t.buildTooComplexNode=function(e,t,n,a,o,r){const i=l(n),s=c(e,r,i.endsWith(".cds"));return{...a,tooComplex:!0,tooComplexLocations:[{fileUri:i,range:t,reason:e,message:s}],locations:o?.length?o:[{fileUri:i,range:t}]}},t.excludeValueFromList=function(e,t){let n="";const a=e.findIndex((e=>e.value===t&&e.value!==r.ENUM_VALUE_NONE));return a>-1&&(n=e[a].text||"",e.splice(a,1)),n},t.getFormattedText=function(e){if(e)return"TextSeparate"===e?"ID Only":e.split(/(?=[A-Z])/).join(" ")},t.makeInvalidPathTooComplex=function(e,t,n,i,s,l){if(!e||!n||"string"!=typeof n||n===r.ENUM_VALUE_NONE)return null;if(!t.endsWith("Path"))return null;const c=i.top.target,m=(0,o.getPathBaseMetadataElement)(e.metadataService,c).name,h=u(n).relativePath;if(!h)return null;const T=`${m}/${h}`,P=d(e.metadataService,T);if(!P)return function(e,t){const n=t.split("/"),a=n.pop(),o=d(e.metadataService,n.join("/"))?.path;if(!o)return!1;return function(e,t){e.entityTypeDynamicProperties||(e.entityTypeDynamicProperties=new Map);if(!e.entityTypeDynamicProperties.has(t)){const n=y(e.annotationIndex,t,"com.sap.vocabularies.Analytics.v1.AggregatedProperties",!0),a=new Set;e.entityTypeDynamicProperties.set(t,a);for(const o of n){const n=g(t,"com.sap.vocabularies.Analytics.v1.AggregatedProperties",o),i=e.annotationIndex[n].top.annotation?.collection||[];for(const e of i){const t=e.propertyValues.find((e=>"Name"===e.name))?.value;t?.type===r.ExpressionType.String&&a.add(t.String)}}}return e.entityTypeDynamicProperties.get(t)}(e,o).has(a)}(e,T)?p(r.TooComplexReason.UnsupportedDynamicPropertyPath,s.range,s.fileUri):p(r.TooComplexReason.NoValidPath,s.range,s.fileUri,void 0,n);if(!l)return null;const E=f(l);if(E.includes("Edm.PrimitiveType")){if(!Object.keys(a.primitiveTypeMap).includes(P.edmPrimitiveType))return p(r.TooComplexReason.UnsupportedDataType,s?.range,s?.fileUri,void 0,n)}else if(!E.includes(P.edmPrimitiveType))return p(r.TooComplexReason.UnsupportedDataType,s?.range,s?.fileUri,void 0,n);return null},t.resolveRelativeAnnotationPath=u,t.resolvePath=m,t.resolveMetadataElement=d,t.getExistingQualifiers=y,t.getAnnotationIndexKey=g,t.getAllowedTypes=f,t.getIncludedExpressionTypes=h,t.isTooComplex=P,t.isWithBase=function(e){const t=e;return!P(t)&&(t.type===r.UI_PROP_TYPE_ENUM?void 0!==t.baseValue||void 0!==t.baseTooComplex:void 0!==t.useBase)},t.isEnumBaseValueDiffers=function(e,t){return!P(e)&&!e.baseTooComplex&&e.baseValue&&e.baseValue.value&&e.baseValue.value!==(void 0!==t?t:e.value)}},23635:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(68459),t),o(n(17513),t),o(n(4317),t),o(n(258),t),o(n(13783),t),o(n(3361),t)},69922:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsAnalyticalChart=t.names=void 0;const a=n(68459);t.names={type:"type",title:"title",measures:"measures",measuresColumns:{property:"property",label:"label",aggregatableProperty:"aggregatableProperty",aggregationMethod:"aggregationMethod",showAsDefault:"showAsDefault"},dimensions:"dimensions",dimensionsColumns:{property:"property",label:"label",showAsDefault:"showAsDefault",text:"text",textArrangement:"textArrangement"}},t.uiPropertyDefinitionsAnalyticalChart=[{name:t.names.type,type:a.UI_PROP_TYPE_ENUM,label:"ChartType",tooltip:"AnalyticalChartTypeTooltip"},{name:t.names.title,type:a.UI_PROP_TYPE_STRING,label:"Title",tooltip:"ChartTitleTooltip",optional:!0},{name:t.names.measures,type:a.UI_PROP_TYPE_TABLE,label:"Measures",tooltip:"MeasuresTooltip",rowTitleTemplate:"&{{MeasureRowTitle}} {{ROW_NUMBER}}",addNewRowTitle:"MeasureAddNewRowTitle",columns:[{name:t.names.measuresColumns.property,type:a.UI_PROP_TYPE_STRING,label:"Name",defaultValue:"",tooltip:"MeasureNameTooltip"},{name:t.names.measuresColumns.label,type:a.UI_PROP_TYPE_STRING,label:"Label",optional:!0,defaultValue:"",tooltip:"MeasureLabelTooltip"},{name:t.names.measuresColumns.aggregatableProperty,type:a.UI_PROP_TYPE_STRING,label:"Property",isKeyColumn:!0,tooltip:"MeasurePropertyTooltip"},{name:t.names.measuresColumns.aggregationMethod,type:a.UI_PROP_TYPE_STRING,dominatingColumnName:t.names.measuresColumns.aggregatableProperty,label:"AggregationMethod",tooltip:"MeasureAggregationMethodTooltip"},{name:t.names.measuresColumns.showAsDefault,type:a.UI_PROP_TYPE_BOOL,label:"ShowAsDefault",inRowHeader:!0,defaultValue:!0,tooltip:"MeasureShowAsDefaultTooltip"}]},{name:t.names.dimensions,type:a.UI_PROP_TYPE_TABLE,label:"Dimensions",tooltip:"DimensionsTooltip",rowTitleTemplate:"&{{Dimension}} {{ROW_NUMBER}}",columns:[{name:t.names.dimensionsColumns.property,type:a.UI_PROP_TYPE_ENUM,label:"Property",isKeyColumn:!0},{name:t.names.dimensionsColumns.label,type:a.UI_PROP_TYPE_STRING,label:"Label",optional:!0},{name:t.names.dimensionsColumns.showAsDefault,type:a.UI_PROP_TYPE_BOOL,label:"ShowAsDefault",inRowHeader:!0},{name:t.names.dimensionsColumns.text,type:a.UI_PROP_TYPE_ENUM,label:"Text",optional:!0,defaultValue:a.ENUM_VALUE_NONE,dependency:[{name:t.names.dimensionsColumns.property,value:"*",reevaluateOnChange:!0}]},{name:t.names.dimensionsColumns.textArrangement,type:a.UI_PROP_TYPE_ENUM,label:"TextArrangement",optional:!0,defaultValue:a.ENUM_VALUE_NOT_APPLICABLE,allowedValues:[],dependency:[{name:t.names.dimensionsColumns.text,value:"*",reevaluateOnChange:!0}]}]}]},53717:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsBasicDataPointValue=t.names=void 0;const a=n(68459);t.names={value:"value"},t.uiPropertyDefinitionsBasicDataPointValue=[{name:t.names.value,type:a.UI_PROP_TYPE_ENUM,label:"Value",tooltip:"DataPointValueTooltip",optional:!0}]},34674:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsChart=t.UI_PROPERTY_CHART_TYPE=t.names=void 0;const a=n(68459);t.names={chartType:"chartType",value:"value",valueToN:"valueToN",values:"values",dimension:"dimension",targetValue:"targetValue",targetValueRadial:"targetValueRadial",targetValueToN:"targetValueToN",maximumValueType:"maximumValueType",maximumValuePath:"maximumValuePath",maximumValueDecimal:"maximumValueDecimal",minimumValueType:"minimumValueType",minimumValuePath:"minimumValuePath",minimumValueDecimal:"minimumValueDecimal",forecastValue:"forecastValue",criticalitySource:"criticalitySource",criticality:"criticality",improvementDirection:"improvementDirection",deviationLowValue:"deviationLowValue",toleranceLowValue:"toleranceLowValue",deviationHighValue:"deviationHighValue",toleranceHighValue:"toleranceHighValue",criticalitySourceRadial:"criticalitySourceRadial",criticalityRadial:"criticalityRadial",improvementDirectionRadial:"improvementDirectionRadial",deviationLowValueRadial:"deviationLowValueRadial",toleranceLowValueRadial:"toleranceLowValueRadial",deviationHighValueRadial:"deviationHighValueRadial",toleranceHighValueRadial:"toleranceHighValueRadial"},t.UI_PROPERTY_CHART_TYPE=t.names.chartType,t.uiPropertyDefinitionsChart=[{name:t.UI_PROPERTY_CHART_TYPE,type:a.UI_PROP_TYPE_ENUM,label:"ChartType",tooltip:"ChartTypeTooltip"},{name:t.names.value,type:a.UI_PROP_TYPE_ENUM,label:"ChartValue",tooltip:"ChartValueTooltip",dependency:[{name:t.UI_PROPERTY_CHART_TYPE,value:["Bullet","Donut"]}]},{name:t.names.valueToN,type:a.UI_PROP_TYPE_ENUM,label:"Measure",tooltip:"ChartValueTooltip",dependency:[{name:t.UI_PROPERTY_CHART_TYPE,value:["Area"]}]},{name:t.names.values,type:a.UI_PROP_TYPE_MULTIPLE_ENUMS,label:"Measures",tooltip:"ChartValuesTooltip",dependency:[{name:t.UI_PROPERTY_CHART_TYPE,value:["Line"]}]},{name:t.names.dimension,type:a.UI_PROP_TYPE_ENUM,label:"Dimension",tooltip:"DimensionTooltip",dependency:[{name:t.UI_PROPERTY_CHART_TYPE,value:["Area","Line"]}]},{name:t.names.targetValue,type:a.UI_PROP_TYPE_ENUM,optional:!0,label:"TargetValue",tooltip:"TargetValueTooltip",dependency:[{name:t.UI_PROPERTY_CHART_TYPE,value:["Bullet"]}]},{name:t.names.targetValueRadial,type:a.UI_PROP_TYPE_ENUM,optional:!1,label:"TargetValue",tooltip:"TargetValueTooltip",dependency:[{name:t.UI_PROPERTY_CHART_TYPE,value:["Donut"]}]},{name:t.names.targetValueToN,optional:!0,type:a.UI_PROP_TYPE_ENUM,label:"TargetValue",tooltip:"TargetValueTooltip",dependency:[{name:t.UI_PROPERTY_CHART_TYPE,value:["Area"]}]},{name:t.names.maximumValueType,type:a.UI_PROP_TYPE_ENUM,label:"MaximumValueType",tooltip:"MaximumValueTypeTooltip",dependency:[{name:t.UI_PROPERTY_CHART_TYPE,value:["Bullet"]}]},{name:t.names.maximumValuePath,type:a.UI_PROP_TYPE_ENUM,label:"MaximumValue",tooltip:"MaximumValuePathTooltip",dependency:[{name:t.names.maximumValueType,value:["Path"]}]},{name:t.names.maximumValueDecimal,type:a.UI_PROP_TYPE_DECIMAL,label:"MaximumValue",tooltip:"MaximumValueTooltip",dependency:[{name:t.names.maximumValueType,value:["Decimal"]}]},{name:t.names.minimumValueType,type:a.UI_PROP_TYPE_ENUM,label:"MinimumValueType",tooltip:"MinimumValueTypeTooltip",dependency:[{name:t.UI_PROPERTY_CHART_TYPE,value:["Bullet"]}]},{name:t.names.minimumValuePath,type:a.UI_PROP_TYPE_ENUM,label:"MinimumValue",tooltip:"MinimumValuePathTooltip",dependency:[{name:t.names.minimumValueType,value:["Path"]}]},{name:t.names.minimumValueDecimal,type:a.UI_PROP_TYPE_DECIMAL,label:"MinimumValue",tooltip:"MinimumValueTooltip",dependency:[{name:t.names.minimumValueType,value:["Decimal"]}]},{name:t.names.forecastValue,type:a.UI_PROP_TYPE_ENUM,optional:!0,label:"ForecastValue",tooltip:"ForecastValueTooltip",dependency:[{name:t.names.chartType,value:["Bullet"]}]},{name:t.names.criticalitySource,type:a.UI_PROP_TYPE_ENUM,optional:!0,label:"CriticalitySource",tooltip:"CriticalitySourceTooltip",dependency:[{name:t.names.chartType,value:["Bullet","Area"]}]},{name:t.names.criticality,type:a.UI_PROP_TYPE_ENUM,label:"CriticalityValue",tooltip:"CriticalityValueTooltip",dependency:[{name:t.names.criticalitySource,value:["Criticality"]}]},{name:t.names.improvementDirection,type:a.UI_PROP_TYPE_ENUM,label:"ImprovementDirection",tooltip:"ImprovementDirectionTooltip",dependency:[{name:t.names.criticalitySource,value:["CriticalityCalculation"]}],semanticGroup:"CriticalityCalculation"},{name:t.names.deviationLowValue,type:a.UI_PROP_TYPE_ENUM,label:"DeviationLowValue",tooltip:"DeviationLowValueTooltip",dependency:[{name:t.names.improvementDirection,value:["Maximize","Target"]}],semanticGroup:"CriticalityCalculation"},{name:t.names.toleranceLowValue,type:a.UI_PROP_TYPE_ENUM,label:"ToleranceLowValue",tooltip:"ToleranceLowValueTooltip",dependency:[{name:t.names.improvementDirection,value:["Maximize","Target"]}],semanticGroup:"CriticalityCalculation"},{name:t.names.deviationHighValue,type:a.UI_PROP_TYPE_ENUM,label:"DeviationHighValue",tooltip:"DeviationHighValueTooltip",dependency:[{name:t.names.improvementDirection,value:["Minimize","Target"]}],semanticGroup:"CriticalityCalculation"},{name:t.names.toleranceHighValue,type:a.UI_PROP_TYPE_ENUM,label:"ToleranceHighValue",tooltip:"ToleranceHighValueTooltip",dependency:[{name:t.names.improvementDirection,value:["Minimize","Target"]}],semanticGroup:"CriticalityCalculation"},{name:t.names.criticalitySourceRadial,type:a.UI_PROP_TYPE_ENUM,optional:!0,label:"CriticalitySource",tooltip:"CriticalitySourceTooltip",dependency:[{name:t.UI_PROPERTY_CHART_TYPE,value:["Donut"]}]},{name:t.names.criticalityRadial,type:a.UI_PROP_TYPE_ENUM,label:"CriticalityValue",tooltip:"CriticalityValueTooltip",dependency:[{name:t.names.criticalitySourceRadial,value:["Criticality"]}]},{name:t.names.improvementDirectionRadial,type:a.UI_PROP_TYPE_ENUM,label:"ImprovementDirection",tooltip:"ImprovementDirectionTooltip",dependency:[{name:t.names.criticalitySourceRadial,value:["CriticalityCalculation"]}],semanticGroup:"CriticalityCalculation"},{name:t.names.deviationLowValueRadial,type:a.UI_PROP_TYPE_ENUM,label:"DeviationLowValue",tooltip:"DeviationLowValueTooltip",dependency:[{name:t.names.improvementDirectionRadial,value:["Maximize"]}],semanticGroup:"CriticalityCalculation"},{name:t.names.toleranceLowValueRadial,type:a.UI_PROP_TYPE_ENUM,label:"ToleranceLowValue",tooltip:"ToleranceLowValueTooltip",dependency:[{name:t.names.improvementDirectionRadial,value:["Maximize"]}],semanticGroup:"CriticalityCalculation"},{name:t.names.deviationHighValueRadial,type:a.UI_PROP_TYPE_ENUM,label:"DeviationHighValue",tooltip:"DeviationHighValueTooltip",dependency:[{name:t.names.improvementDirectionRadial,value:["Minimize"]}],semanticGroup:"CriticalityCalculation"},{name:t.names.toleranceHighValueRadial,type:a.UI_PROP_TYPE_ENUM,label:"ToleranceHighValue",tooltip:"ToleranceHighValueTooltip",dependency:[{name:t.names.improvementDirectionRadial,value:["Minimize"]}],semanticGroup:"CriticalityCalculation"}]},29191:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsContact=t.names=void 0;const a=n(68459);t.names={fullName:"fullName",title:"title",photo:"photo",role:"role",org:"org",tel:"tel",telColumns:{uri:"uri",type:"type",preferred:"preferred"},email:"email",emailColumns:{address:"address",type:"type",preferred:"preferred"},adr:"adr",adrColumns:{street:"street",locality:"locality",region:"region",code:"code",country:"country",type:"type"}},t.uiPropertyDefinitionsContact=[{name:t.names.fullName,type:a.UI_PROP_TYPE_ENUM,label:"Contact",tooltip:"ContactTooltip"},{name:t.names.title,type:a.UI_PROP_TYPE_ENUM,label:"JobTitle",tooltip:"JobTitleTooltip",optional:!0},{name:t.names.photo,type:a.UI_PROP_TYPE_ENUM,label:"Photo",tooltip:"PhotoTooltip",optional:!0},{name:t.names.role,type:a.UI_PROP_TYPE_ENUM,label:"Role",tooltip:"RoleTooltip",optional:!0},{name:t.names.org,type:a.UI_PROP_TYPE_ENUM,label:"Department",tooltip:"DepartmentTooltip",optional:!0},{name:t.names.tel,type:a.UI_PROP_TYPE_TABLE,label:"PhoneList",tooltip:"PhoneListTooltip",rowTitleTemplate:"&{{Phone}} {{ROW_NUMBER}}",addNewRowTitle:"PhoneAddNewRowTitle",optional:!0,columns:[{name:t.names.telColumns.uri,type:a.UI_PROP_TYPE_ENUM,label:"Phone",optional:!0},{name:t.names.telColumns.type,type:a.UI_PROP_TYPE_ENUM,label:"PhoneType",optional:!0,defaultValue:"work"},{name:t.names.telColumns.preferred,type:a.UI_PROP_TYPE_BOOL,label:"Preferred",inRowHeader:!0}]},{name:t.names.email,type:a.UI_PROP_TYPE_TABLE,label:"EmailList",tooltip:"EmailListTooltip",rowTitleTemplate:"&{{Email}} {{ROW_NUMBER}}",addNewRowTitle:"EmailAddNewRowTitle",optional:!0,columns:[{name:t.names.emailColumns.address,type:a.UI_PROP_TYPE_ENUM,label:"Email",optional:!0},{name:t.names.emailColumns.type,type:a.UI_PROP_TYPE_ENUM,defaultValue:"work",label:"PhoneType"},{name:t.names.emailColumns.preferred,type:a.UI_PROP_TYPE_BOOL,label:"Preferred",inRowHeader:!0}]},{name:t.names.adr,type:a.UI_PROP_TYPE_TABLE,label:"Address",tooltip:"AddressTooltip",rowTitleTemplate:"&{{Address}} {{ROW_NUMBER}}",addNewRowTitle:"AddressAddNewRowTitle",optional:!0,columns:[{name:t.names.adrColumns.street,type:a.UI_PROP_TYPE_ENUM,label:"Street",optional:!0},{name:t.names.adrColumns.locality,type:a.UI_PROP_TYPE_ENUM,label:"City",optional:!0},{name:t.names.adrColumns.region,type:a.UI_PROP_TYPE_ENUM,label:"Region",optional:!0},{name:t.names.adrColumns.code,type:a.UI_PROP_TYPE_ENUM,label:"PostalCode",optional:!0},{name:t.names.adrColumns.country,type:a.UI_PROP_TYPE_ENUM,label:"Country",optional:!0},{name:t.names.adrColumns.type,type:a.UI_PROP_TYPE_ENUM,defaultValue:"work",label:"PhoneType"}]}]},12185:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsActionCriticality=t.uiPropertyDefinitionsCriticality=t.names=void 0;const a=n(68459);t.names={criticality:"criticality",criticalityRepresentation:"criticalityRepresentation",actionCriticality:"actionCriticality"},t.uiPropertyDefinitionsCriticality=[{name:t.names.criticality,type:a.UI_PROP_TYPE_ENUM,label:"Criticality",tooltip:"CriticalityTooltipField",optional:!0},{name:t.names.criticalityRepresentation,type:a.UI_PROP_TYPE_ENUM,label:"CriticalityRepresentation",tooltip:"CriticalityRepresentationTooltip",optional:!0,dependency:[{name:"criticality",value:a.ANY_NON_INITIAL_VALUE}]}],t.uiPropertyDefinitionsActionCriticality=[{name:t.names.actionCriticality,type:a.UI_PROP_TYPE_ENUM,label:"Criticality",tooltip:"ActionCriticalityTooltipField",optional:!0}]},54638:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsDisplayOnDemand=t.names=void 0;const a=n(68459);t.names={displayOnDemand:"displayOnDemand"},t.uiPropertyDefinitionsDisplayOnDemand=[{name:t.names.displayOnDemand,type:a.UI_PROP_TYPE_BOOL,allowedValues:[{value:"true",text:"SectionDisplayedOnDemand"},{value:"false",text:"SectionDisplayedAlways"}],optional:!0,label:"DisplayOnDemand",tooltip:"DisplayOnDemandTooltip"}]},60047:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsDataPointValue=t.names=void 0;const a=n(68459);t.names={value:"value"},t.uiPropertyDefinitionsDataPointValue=[{name:t.names.value,type:a.UI_PROP_TYPE_ENUM,label:"Value",tooltip:"DataPointValueTooltip",optional:!0}]},16288:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsGrouping=t.names=t.UI_PROP_NAME_PREFIX_GROUPING=void 0;const a=n(68459);t.UI_PROP_NAME_PREFIX_GROUPING="grouping";const o=[a.PresentationVariantPathKind.SPV,a.PresentationVariantPathKind.PV,a.PresentationVariantPathKind.SPV_PV];t.names={};const r={property:"property",label:"label",text:"text",textArrangement:"textArrangement"};function i(e){return[{name:`${t.UI_PROP_NAME_PREFIX_GROUPING}${e}`,dependency:[{name:a.UI_PROP_NAME_PV_PATH_KIND,value:e}],type:a.UI_PROP_TYPE_TABLE,label:"Grouping",tooltip:"GroupingTooltip",rowTitleTemplate:"&{{GroupingRowTitle}} {{ROW_NUMBER}}",addNewRowTitle:"GroupingAddNewRowTitle",optional:!0,columns:[{name:r.property,type:a.UI_PROP_TYPE_ENUM,label:"GroupProperty",isKeyColumn:!0},{name:r.label,type:a.UI_PROP_TYPE_STRING,label:"Label",optional:!0,defaultValue:"",dependency:[{name:r.property,value:"*",reevaluateOnChange:!0}]},{name:r.text,type:a.UI_PROP_TYPE_ENUM,label:"Text",optional:!0,defaultValue:a.ENUM_VALUE_NONE,dependency:[{name:r.property,value:"*",reevaluateOnChange:!0}]},{name:r.textArrangement,type:a.UI_PROP_TYPE_ENUM,label:"TextArrangement",optional:!0,defaultValue:a.ENUM_VALUE_NOT_APPLICABLE,allowedValues:[],dependency:[{name:r.text,value:"*",reevaluateOnChange:!0}]}]}]}o.forEach((e=>{const n=`${t.UI_PROP_NAME_PREFIX_GROUPING}${e}`;t.names[n]=n,t.names[`${n}Columns`]=r})),t.uiPropertyDefinitionsGrouping=[...i(a.PresentationVariantPathKind.SPV),...i(a.PresentationVariantPathKind.PV),...i(a.PresentationVariantPathKind.SPV_PV)]},95863:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsHeaderInfo=t.names=void 0;const a=n(68459);t.names={typeName:"typeName",typeNamePlural:"typeNamePlural",title:"title",descriptionType:"descriptionType",descriptionPath:"descriptionPath",descriptionString:"descriptionString",imageUrl:"imageUrl",initials:"initials",typeImageUrl:"typeImageUrl"},t.uiPropertyDefinitionsHeaderInfo=[{name:t.names.typeName,type:a.UI_PROP_TYPE_STRING,label:"TypeName",tooltip:"TypeNameTooltip"},{name:t.names.typeNamePlural,type:a.UI_PROP_TYPE_STRING,label:"TypeNamePlural",tooltip:"TypeNamePluralTooltip"},{name:t.names.title,type:a.UI_PROP_TYPE_ENUM,optional:!0,label:"Title",tooltip:"TitleTooltip"},{name:t.names.descriptionType,type:a.UI_PROP_TYPE_ENUM,optional:!0,label:"DescriptionType",tooltip:"DescriptionTypeTooltip"},{name:t.names.descriptionPath,type:a.UI_PROP_TYPE_ENUM,label:"Description",tooltip:"DescriptionPathTooltip",dependency:[{name:t.names.descriptionType,value:a.ExpressionType.Path}]},{name:t.names.descriptionString,type:a.UI_PROP_TYPE_STRING,label:"Description",tooltip:"DescriptionStringTooltip",dependency:[{name:t.names.descriptionType,value:a.ExpressionType.String}]},{name:t.names.imageUrl,type:a.UI_PROP_TYPE_ENUM,optional:!0,label:"Image",tooltip:"ImageTooltip"},{name:t.names.initials,type:a.UI_PROP_TYPE_ENUM,optional:!0,label:"Initials",tooltip:"InitialsTooltip"},{name:t.names.typeImageUrl,type:a.UI_PROP_TYPE_STRING,optional:!0,label:"Icon URL",tooltip:"TypeImageUrlTooltip"}]},3361:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readUIPropertyDefinitions=t.getUIPropertyDefinitionsGeneric=t.getUIPropertyDefinitions=t.UIPropertyDefinitionsGroup=t.uiPropertyNames=t.UI_PROP_NAME_PREFIX_SELECTION=t.UI_PROP_NAME_PREFIX_GROUPING=t.UI_PROP_NAME_PREFIX_SORTING=void 0;const a=n(68459),o=n(70704),r=n(20945),i=n(135),s=n(71052),l=n(95863),p=n(34674),c=n(12185),u=n(89254),m=n(29191),d=n(69922),y=n(54638),g=n(44006),f=n(97535),h=n(34792),T=n(16288),P=n(61082),E=n(53717),v=n(67639),b=n(60047),_=n(19777),A=n(63653),C=n(93729);var N=n(34792);Object.defineProperty(t,"UI_PROP_NAME_PREFIX_SORTING",{enumerable:!0,get:function(){return N.UI_PROP_NAME_PREFIX_SORTING}});var I=n(16288);Object.defineProperty(t,"UI_PROP_NAME_PREFIX_GROUPING",{enumerable:!0,get:function(){return I.UI_PROP_NAME_PREFIX_GROUPING}});var S,x=n(61082);function O(e,n,r){switch(n){case a.UI_NODE_TYPE_LIST:return M([e.get(S.text),e.get(S.sorting),e.get(S.grouping),e.get(S.selection)]);case a.UI_NODE_TYPE_SECTION:if(["FieldGroup","Identification"].includes(r))return e.get(S.displayOnDemand);break;case a.UI_NODE_TYPE_DATA_POINT:switch(r){case"Progress":return M([e.get(S.labelAndDescription),e.get(S.dataPointValue),e.get(S.targetValue),e.get(S.tooltip)]);case"Rating":{const t=M([e.get(S.labelAndDescription),e.get(S.dataPointValue),e.get(S.ratingTarget),e.get(S.tooltip)]);return delete t.propertyMap.description,t.propertyNames=t.propertyNames.filter((e=>!["description"].includes(e))),t}default:{const t=M([e.get(S.labelAndDescription),e.get(S.basicDataPointValue),e.get(S.criticality),e.get(S.measures),e.get(S.tooltip)]);return delete t.propertyMap.description,delete t.propertyMap.criticalityRepresentation,t.propertyNames=t.propertyNames.filter((e=>!["description","criticalityRepresentation"].includes(e))),t}}case a.UI_NODE_TYPE_COLUMN:if("Basic"===r){const n=M([e.get(S.criticality),e.get(S.measures),e.get(S.valueHelp),e.get(S.semanticObject)]);return n.propertyMap[t.uiPropertyNames.criticality.criticality]={...n.propertyMap[t.uiPropertyNames.criticality.criticality]},n.propertyMap[t.uiPropertyNames.criticality.criticality].tooltip=o.i18n.t("CriticalityTooltipColumn"),n}if("Progress"===r)return M([e.get(S.dataPointValue),e.get(S.targetValue),e.get(S.tooltip)]);if("Rating"===r)return M([e.get(S.dataPointValue),e.get(S.tooltip)]);break;case a.UI_NODE_TYPE_HEADER_INFO:return e.get(S.headerInfo);case a.UI_NODE_TYPE_CHART:{const t=e.get(S.chart);if("HeaderSection"===r){return M([t,e.get(S.labelAndDescription)])}return M([t])}case a.UI_NODE_TYPE_ANALYTICAL_CHART:return M([e.get(S.text),e.get(S.analyticalChart),e.get(S.sorting)]);case a.UI_NODE_TYPE_VISUAL_FILTER:{const n=M([e.get(S.analyticalChart),e.get(S.sorting),e.get(S.selection),e.get(S.measures),e.get(S.numberFormatting)]);return function(e){delete e.propertyMap[t.uiPropertyNames.analyticalChart.title],e.propertyNames=e.propertyNames.filter((e=>![t.uiPropertyNames.analyticalChart.title].includes(e))),e.propertyMap[t.uiPropertyNames.analyticalChart.measures]&&(e.propertyMap[t.uiPropertyNames.analyticalChart.measures]={...e.propertyMap[t.uiPropertyNames.analyticalChart.measures]},e.propertyMap[t.uiPropertyNames.analyticalChart.measures].addNewRowTitle="",e.propertyMap[t.uiPropertyNames.analyticalChart.measures].tooltip=o.i18n.t("VisualFilterMeasuresTooltip"));e.propertyMap[t.uiPropertyNames.analyticalChart.type]&&(e.propertyMap[t.uiPropertyNames.analyticalChart.type]={...e.propertyMap[t.uiPropertyNames.analyticalChart.type]},e.propertyMap[t.uiPropertyNames.analyticalChart.type].tooltip=o.i18n.t("VisualFilterChartTypeTooltip"));e.propertyMap[t.uiPropertyNames.analyticalChart.dimensions]&&(e.propertyMap[t.uiPropertyNames.analyticalChart.dimensions]={...e.propertyMap[t.uiPropertyNames.analyticalChart.dimensions]},e.propertyMap[t.uiPropertyNames.analyticalChart.dimensions].tooltip=o.i18n.t("VisualFilterDimensionsTooltip"));e.propertyMap.sortingPV&&(e.propertyMap.sortingPV={...e.propertyMap.sortingPV},e.propertyMap.sortingPV.label=o.i18n.t("VisualFilterSortOrder"),e.propertyMap.sortingPV.tooltip=o.i18n.t("VisualFilterSortOrderTooltip"));e.propertyMap.selectionSV&&(e.propertyMap.selectionSV={...e.propertyMap.selectionSV},e.propertyMap.selectionSV.label=o.i18n.t("VisualFilterSelection"),e.propertyMap.selectionSV.tooltip=o.i18n.t("VisualFilterSelectionTooltip"),e.propertyMap.selectionSV.addNewRowTitle=o.i18n.t("VisualFilterSelectionAddRow"))}(n),n}case a.UI_NODE_TYPE_FORM_FIELD:return M([e.get(S.criticality),e.get(S.measures),e.get(S.valueHelp),e.get(S.semanticObject)]);case a.UI_NODE_TYPE_CONTACT:return e.get(S.contact);case a.UI_NODE_TYPE_FILTER_FIELD:return e.get(S.valueHelp);case a.UI_NODE_TYPE_NAVIGATION:if("Section"===r){const t=M([e.get(S.navigation)]);return delete t.propertyMap.requiresContext,t.propertyNames=t.propertyNames.filter((e=>!["requiresContext"].includes(e))),t}return e.get(S.navigation);case a.UI_NODE_TYPE_ACTION:return e.get(S.actionCriticality)}return{propertyNames:[],propertyMap:{}}}let D;function R(){function e(e,t){const n={propertyNames:[],propertyMap:{}};e.forEach((e=>{n.propertyNames.push(e.name),n.propertyMap[e.name]=function(e){const t=o.i18n.t.bind(o.i18n),n=(e,n,a)=>{e[n]&&(e[n]=a?a(e[n]):t(e[n]))};n(e,"label"),n(e,"tooltip"),n(e,"addNewRowTitle"),n(e,"rowTitleTemplate",(e=>function(e,t){let n=e;if(n){const e=n.match(/&{{\S+}}/g);if(e&&e.length>0){const a=e?.map((e=>{const[n,a]=e.match(/&{{(\S+)}}/)??[null,null];return n===e&&a?t(a):""}));e.forEach(((e,t)=>{a[t]&&(n=n.replace(e,a[t]))}))}}return n}(e,t)));for(const t of e.allowedValues||[])n(t,"text");for(const t of e.columns||[]){n(t,"label"),n(t,"tooltip");for(const e of t.allowedValues||[])n(e,"text")}return e}(e)})),D.set(t,n)}return D||(D=new Map,e(r.uiPropertyDefinitionsLabelAndDescription,S.labelAndDescription),e(i.uiPropertyDefinitionsTargetValue,S.targetValue),e(s.uiPropertyDefinitionsTooltip,S.tooltip),e(l.uiPropertyDefinitionsHeaderInfo,S.headerInfo),e(p.uiPropertyDefinitionsChart,S.chart),e(c.uiPropertyDefinitionsCriticality,S.criticality),e(c.uiPropertyDefinitionsActionCriticality,S.actionCriticality),e(u.uiPropertyDefinitionsMeasures,S.measures),e(m.uiPropertyDefinitionsContact,S.contact),e(y.uiPropertyDefinitionsDisplayOnDemand,S.displayOnDemand),e(g.uiPropertyDefinitionsRatingTarget,S.ratingTarget),e(d.uiPropertyDefinitionsAnalyticalChart,S.analyticalChart),e(f.uiPropertyDefinitionsText,S.text),e(h.uiPropertyDefinitionsSorting,S.sorting),e(T.uiPropertyDefinitionsGrouping,S.grouping),e(P.uiPropertyDefinitionsSelection,S.selection),e(E.uiPropertyDefinitionsBasicDataPointValue,S.basicDataPointValue),e(b.uiPropertyDefinitionsDataPointValue,S.dataPointValue),e(v.uiPropertyDefinitionsNumberFormatting,S.numberFormatting),e(_.uiPropertyDefinitionsValueHelp,S.valueHelp),e(A.uiPropertyDefinitionsNavigation,S.navigation),e(C.uiPropertyDefinitionsSemanticObject,S.semanticObject),D)}function M(e){const t=e.shift(),n={propertyNames:[...t.propertyNames],propertyMap:{}};for(const e of Object.keys(t.propertyMap))n.propertyMap[e]=t.propertyMap[e];for(const t of e){n.propertyNames.push(...t.propertyNames);for(const e of Object.keys(t.propertyMap))n.propertyMap[e]=t.propertyMap[e]}return n}Object.defineProperty(t,"UI_PROP_NAME_PREFIX_SELECTION",{enumerable:!0,get:function(){return x.UI_PROP_NAME_PREFIX_SELECTION}}),t.uiPropertyNames={labelAndDescription:r.names,targetValue:i.names,headerInfo:l.names,chart:p.names,criticality:c.names,measures:u.names,contact:m.names,tooltip:s.names,displayOnDemand:y.names,ratingTarget:g.names,analyticalChart:d.names,text:f.names,sorting:h.names,grouping:T.names,selection:P.names,basicDataPointValue:E.names,dataPointValue:b.names,numberFormatting:v.names,valueHelp:_.names,navigation:A.names,semanticObject:C.names},function(e){e.labelAndDescription="labelAndDescription",e.targetValue="targetValue",e.headerInfo="headerInfo",e.chart="chart",e.actionCriticality="actionCriticality",e.criticality="criticality",e.measures="measures",e.contact="contact",e.tooltip="tooltip",e.displayOnDemand="displayOnDemand",e.ratingTarget="ratingTarget",e.analyticalChart="analyticalChart",e.text="text",e.sorting="sorting",e.grouping="grouping",e.selection="selection",e.basicDataPointValue="basicDataPointValue",e.dataPointValue="dataPointValue",e.numberFormatting="numberFormatting",e.valueHelp="valueHelp",e.navigation="navigation",e.semanticObject="semanticObject"}(S||(t.UIPropertyDefinitionsGroup=S={})),t.getUIPropertyDefinitions=function(e,t){return O(R(),e,t)},t.getUIPropertyDefinitionsGeneric=O,t.readUIPropertyDefinitions=R},20945:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsLabelAndDescription=t.names=void 0;const a=n(68459);t.names={title:"title",description:"description"},t.uiPropertyDefinitionsLabelAndDescription=[{name:t.names.title,type:a.UI_PROP_TYPE_STRING,label:"Label",tooltip:"LabelTooltip",optional:!0},{name:t.names.description,type:a.UI_PROP_TYPE_STRING,label:"Description",tooltip:"DescriptionTooltip",optional:!0}]},89254:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsMeasures=t.names=void 0;const a=n(68459);t.names={measuresType:"measuresType",currencyType:"currencyType",currencyString:"currencyString",currencyProperty:"currencyProperty",unitType:"unitType",unitString:"unitString",unitProperty:"unitProperty"},t.uiPropertyDefinitionsMeasures=[{name:t.names.measuresType,type:a.UI_PROP_TYPE_ENUM,label:"MeasuresType",tooltip:"MeasuresTypeTooltip",optional:!0,dependency:[{name:"dataType",value:[a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float]}]},{name:t.names.currencyType,type:a.UI_PROP_TYPE_ENUM,label:"ExpressionType",tooltip:"CurrencyTypeTooltip",defaultValue:a.ExpressionType.Path,dependency:[{name:t.names.measuresType,value:"Org.OData.Measures.V1.ISOCurrency"}]},{name:t.names.currencyString,type:a.UI_PROP_TYPE_STRING,label:"Currency",tooltip:"CurrencyStringTooltip",dependency:[{name:t.names.currencyType,value:a.ExpressionType.String}]},{name:t.names.currencyProperty,type:a.UI_PROP_TYPE_ENUM,label:"Currency",tooltip:"CurrencyPropertyTooltip",dependency:[{name:t.names.currencyType,value:a.ExpressionType.Path}]},{name:t.names.unitType,type:a.UI_PROP_TYPE_ENUM,label:"ExpressionType",tooltip:"UnitTypeTooltip",defaultValue:a.ExpressionType.Path,dependency:[{name:t.names.measuresType,value:"Org.OData.Measures.V1.Unit"}]},{name:t.names.unitString,type:a.UI_PROP_TYPE_STRING,label:"Unit",tooltip:"UnitStringTooltip",defaultValue:"%",dependency:[{name:t.names.unitType,value:a.ExpressionType.String}]},{name:t.names.unitProperty,type:a.UI_PROP_TYPE_ENUM,label:"Unit",tooltip:"UnitPropertyTooltip",dependency:[{name:t.names.unitType,value:a.ExpressionType.Path}]}]},63653:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsNavigation=t.names=void 0;const a=n(68459);t.names={semanticObjectName:"semanticObjectName",semanticObjectAction:"semanticObjectAction",mapping:"mapping",mappingColumns:{type:"type",semanticObjectProperty:"semanticObjectProperty",localProperty:"localProperty"},requiresContext:"requiresContext"},t.uiPropertyDefinitionsNavigation=[{name:t.names.semanticObjectName,type:a.UI_PROP_TYPE_STRING,label:"SemanticObjectName",tooltip:"SemanticObjectNameTooltip",optional:!1},{name:t.names.semanticObjectAction,type:a.UI_PROP_TYPE_STRING,label:"SemanticObjectAction",tooltip:"SemanticObjectActionTooltip",optional:!1},{name:t.names.mapping,type:a.UI_PROP_TYPE_TABLE,label:"Mapping",tooltip:"MappingTooltip",rowTitleTemplate:"&{{SemanticMapTitle}} {{ROW_NUMBER}}",addNewRowTitle:"SemanticMapAddNewRowTitle",columns:[{name:t.names.mappingColumns.semanticObjectProperty,type:a.UI_PROP_TYPE_STRING,label:"SemanticObjectProperty",defaultValue:"",tooltip:"SemanticObjectPropertyTooltip"},{name:t.names.mappingColumns.localProperty,type:a.UI_PROP_TYPE_ENUM,label:"LocalProperty",tooltip:"LocalPropertyTooltip"}]},{name:t.names.requiresContext,type:a.UI_PROP_TYPE_BOOL,label:"RequiresContext",tooltip:"RequiresContextTooltip",optional:!0,allowedValues:[{value:"true",text:"ContextRequired"},{value:"false",text:"ContextNotRequired"}]}]},67639:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsNumberFormatting=t.names=void 0;const a=n(68459);t.names={scaleFactor:"scaleFactor",digits:"digits"},t.uiPropertyDefinitionsNumberFormatting=[{name:t.names.scaleFactor,type:a.UI_PROP_TYPE_ENUM,label:"ScaleFactor",tooltip:"ScaleFactorTooltip",optional:!0,allowedValues:[{value:"1000",text:"ScaleFactorKilo"},{value:"1000000",text:"ScaleFactorMillion"},{value:"1000000000",text:"ScaleFactorBillion"},{value:"1000000000000",text:"ScaleFactorTera"}]},{name:t.names.digits,type:a.UI_PROP_TYPE_ENUM,label:"Digits",tooltip:"DigitsTooltip",optional:!0,allowedValues:[{value:"1"},{value:"2"}]}]},44006:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsRatingTarget=t.names=void 0;const a=n(68459);t.names={targetValue:"targetValue"},t.uiPropertyDefinitionsRatingTarget=[{name:t.names.targetValue,type:a.UI_PROP_TYPE_NUMBER,label:"TargetValueLabel",tooltip:"TargetValueIntegerTooltip",defaultValue:5}]},61082:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsSelection=t.names=t.UI_PROP_NAME_PREFIX_SELECTION=void 0;const a=n(68459);t.UI_PROP_NAME_PREFIX_SELECTION="selection";const o=[a.SelectionVariantPathKind.SPV,a.SelectionVariantPathKind.SV,a.SelectionVariantPathKind.SPV_SV];t.names={};const r={property:"property",sign:"sign",option:"option",low:"low",high:"high"};function i(e){return[{name:`${t.UI_PROP_NAME_PREFIX_SELECTION}${e}`,dependency:[{name:a.UI_PROP_NAME_SV_PATH_KIND,value:e}],type:a.UI_PROP_TYPE_TABLE,label:"SelectOptions",tooltip:"SelectOptionsTooltip",optional:!0,rowTitleTemplate:"Filter {{ROW_NUMBER}}: &<COLUMN_VALUE:property>",addNewRowTitle:"SelectionOptionAddNewRowTitle",columns:[{name:r.property,type:a.UI_PROP_TYPE_ENUM,label:"SelectionProperty",inRowHeader:!0},{name:r.sign,type:a.UI_PROP_TYPE_ENUM,label:"SelectOptionSign",defaultValue:"I"},{name:r.option,type:a.UI_PROP_TYPE_ENUM,label:"SelectOptionOption",defaultValue:"EQ"},{name:r.low,type:a.UI_PROP_TYPE_STRING,label:"SelectOptionValue"},{name:r.high,optional:!0,type:a.UI_PROP_TYPE_STRING,label:"SelectOptionHighValue"}]}]}o.forEach((e=>{const n=`${t.UI_PROP_NAME_PREFIX_SELECTION}${e}`;t.names[n]=n,t.names[`${n}Columns`]=r})),t.uiPropertyDefinitionsSelection=[...i(a.SelectionVariantPathKind.SPV),...i(a.SelectionVariantPathKind.SV),...i(a.SelectionVariantPathKind.SPV_SV)]},93729:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsSemanticObject=t.names=void 0;const a=n(68459);t.names={semanticObject:"semanticObject",semanticObjectPropertyName:"semanticObjectPropertyName"},t.uiPropertyDefinitionsSemanticObject=[{name:t.names.semanticObject,type:a.UI_PROP_TYPE_STRING,label:"SemanticObjectName",tooltip:"SemanticObjectTooltip",optional:!0,dependency:[{name:"dataType",value:[a.ExpressionType.Guid,a.ExpressionType.Int,a.ExpressionType.String]}]},{name:t.names.semanticObjectPropertyName,type:a.UI_PROP_TYPE_STRING,label:"SemanticObjectPropertyName",tooltip:"SemanticObjectPropertyNameTooltip",optional:!0,dependency:[{name:t.names.semanticObject,value:"*"}]}]},34792:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsSorting=t.names=t.UI_PROP_NAME_PREFIX_SORTING=void 0;const a=n(68459);t.UI_PROP_NAME_PREFIX_SORTING="sorting";const o=[a.PresentationVariantPathKind.SPV,a.PresentationVariantPathKind.PV,a.PresentationVariantPathKind.SPV_PV];t.names={};const r={property:"property",descending:"descending"};function i(e){return[{name:`${t.UI_PROP_NAME_PREFIX_SORTING}${e}`,dependency:[{name:a.UI_PROP_NAME_PV_PATH_KIND,value:e}],type:a.UI_PROP_TYPE_TABLE,label:"SortOrder",tooltip:"SortOrderTooltip",rowTitleTemplate:"&{{SortOrderRowTitle}} {{ROW_NUMBER}}",addNewRowTitle:"SortOrderAddNewRowTitle",optional:!0,columns:[{name:r.property,type:a.UI_PROP_TYPE_ENUM,label:"SortProperty",isKeyColumn:!0},{name:r.descending,type:a.UI_PROP_TYPE_ENUM,label:"SortDirection",defaultValue:"false",allowedValues:[{value:"false",text:"Ascending"},{value:"true",text:"Descending"}]}]}]}o.forEach((e=>{const n=`${t.UI_PROP_NAME_PREFIX_SORTING}${e}`;t.names[n]=n,t.names[`${n}Columns`]=r})),t.uiPropertyDefinitionsSorting=[...i(a.PresentationVariantPathKind.SPV),...i(a.PresentationVariantPathKind.PV),...i(a.PresentationVariantPathKind.SPV_PV)]},135:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsTargetValue=t.names=void 0;const a=n(68459);t.names={targetValueType:"targetValueType",targetValuePath:"targetValuePath",targetValueDecimal:"targetValueDecimal",criticality:"criticality"},t.uiPropertyDefinitionsTargetValue=[{name:t.names.targetValueType,type:a.UI_PROP_TYPE_ENUM,label:"TargetValueTypeLabel",tooltip:"TargetValueTypeTooltip"},{name:t.names.targetValuePath,type:a.UI_PROP_TYPE_ENUM,label:"TargetValueLabel",tooltip:"TargetValuePathTooltip",dependency:[{name:t.names.targetValueType,value:[a.ExpressionType.Path]}]},{name:t.names.targetValueDecimal,type:a.UI_PROP_TYPE_DECIMAL,label:"TargetValueLabel",tooltip:"TargetValueDecimalTooltip",defaultValue:100,dependency:[{name:t.names.targetValueType,value:[a.ExpressionType.Decimal]}]},{name:t.names.criticality,type:a.UI_PROP_TYPE_ENUM,label:"Criticality",tooltip:"CriticalityTooltip",optional:!0}]},97535:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsText=t.names=void 0;const a=n(68459);t.names={text:"text"},t.uiPropertyDefinitionsText=[{name:t.names.text,type:a.UI_PROP_TYPE_STRING,label:"ViewLabel",tooltip:"ViewLabelTooltip",optional:!0}]},71052:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsTooltip=t.names=void 0;const a=n(68459);t.names={tooltipType:"tooltipType",tooltipString:"tooltipString",tooltipPath:"tooltipPath"},t.uiPropertyDefinitionsTooltip=[{name:t.names.tooltipType,type:a.UI_PROP_TYPE_ENUM,label:"TooltipType",optional:!0,tooltip:"TooltipTypeTooltip"},{name:t.names.tooltipString,type:a.UI_PROP_TYPE_STRING,label:"TooltipString",tooltip:"TooltipStringTooltip",dependency:[{name:t.names.tooltipType,value:[a.ExpressionType.String]}]},{name:t.names.tooltipPath,type:a.UI_PROP_TYPE_ENUM,label:"TooltipPath",tooltip:"TooltipPathTooltip",dependency:[{name:t.names.tooltipType,value:[a.ExpressionType.Path]}]}]},19777:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uiPropertyDefinitionsValueHelp=t.names=void 0;const a=n(68459);t.names={valueHelpLabel:"valueHelpLabel",resultList:"resultList",resultListColumns:{valueListProperty:"valueListProperty",type:"type",localDataProperty:"localDataProperty"},resultListSorting:"resultListSorting",resultListSortingColumns:{property:"property",descending:"descending"}},t.uiPropertyDefinitionsValueHelp=[{name:t.names.valueHelpLabel,type:a.UI_PROP_TYPE_STRING,label:"Label",tooltip:"ValueHelpLabelTooltip",optional:!0,semanticGroup:"ValueHelp"},{name:t.names.resultList,type:a.UI_PROP_TYPE_TABLE,label:"ValueHelpResultList",tooltip:"ValueHelpResultListTooltip",addNewRowTitle:"ValueHelpResultListAddNewRowTitle",optional:!0,columns:[{name:t.names.resultListColumns.valueListProperty,type:a.UI_PROP_TYPE_STRING,label:"ValueListProperty",tooltip:"ValueListPropertyTooltip"},{name:t.names.resultListColumns.type,type:a.UI_PROP_TYPE_ENUM,label:"ValueListDependency",tooltip:"ValueListDependencyTooltip"},{name:t.names.resultListColumns.localDataProperty,type:a.UI_PROP_TYPE_ENUM,label:"ValueListLocalValue",tooltip:"ValueListLocalValueTooltip",dependency:[{name:t.names.resultListColumns.type,value:["com.sap.vocabularies.Common.v1.ValueListParameterIn","com.sap.vocabularies.Common.v1.ValueListParameterOut","com.sap.vocabularies.Common.v1.ValueListParameterInOut"]}]}],semanticGroup:"ValueHelp"},{name:t.names.resultListSorting,type:a.UI_PROP_TYPE_TABLE,label:"ValueHelpResultListSorting",tooltip:"SortOrderTooltip",rowTitleTemplate:"&{{SortOrderRowTitle}} {{ROW_NUMBER}}",addNewRowTitle:"SortOrderAddNewRowTitle",optional:!0,columns:[{name:t.names.resultListSortingColumns.property,type:a.UI_PROP_TYPE_ENUM,label:"SortProperty",isKeyColumn:!0},{name:t.names.resultListSortingColumns.descending,type:a.UI_PROP_TYPE_ENUM,label:"SortDirection",defaultValue:"false",allowedValues:[{value:"false",text:"Ascending"},{value:"true",text:"Descending"}]}],semanticGroup:"ValueHelp"}]},13783:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTextArrangementSyncActions=t.getTextArrangementValueFromLayer=t.getTextAndTextArrangement=t.excludeBaseLayerValues=t.UI_PROP_NAME_TEXT=t.UI_PROP_NAME_TEXT_ARRANGEMENT=void 0;const a=n(68459),o=n(70704),r=n(4317),i=n(258);function s(e,t,n){const o={};function s(e,t){const n={value:null};e.origin&&(n.location={fileUri:t,range:e.origin});const{tooComplexReason:o,value:s,range:l}=(0,i.getValueFromAnnotation)(e,a.ExpressionType.EnumMember);return o?n.tooComplex=(0,r.buildTooComplex)(o,l,t,n.location?[n.location]:[]):n.value=null===s?null:s.split("/").pop()||"",n}const l={top:t?.top,app:t?.app[0],base:t?.base[0]}[n],p=function(e){let t;const n=(e||[]).find((e=>(t=(e.annotation.annotations||[]).find((e=>"com.sap.vocabularies.UI.v1.TextArrangement"===e.term&&!e.qualifier)),!!t)));return t?{foundAnnotation:t,fileUri:n.fileUri}:void 0}(function(e,t){if(!e)return;const n=e=>[...e.filter((t=>t.fileUri===e[0].fileUri))].reverse();switch(t){case"top":return n(e.app).concat(n(e.base));case"app":return n(e.app);default:return n(e.base)}}(e,n)),c=l?.annotation;return p&&(o.embedded=s(p.foundAnnotation,p.fileUri)),c&&(o.separate=s(c,l.fileUri)),o}function l(e){return e.location?[e.location]:[]}function p(e){if(!(0,r.isTooComplex)(e)){let t=e.value;return t===a.ENUM_VALUE_NONE&&(0,r.isEnumBaseValueDiffers)(e,a.ENUM_VALUE_NONE)&&(t=e.baseValue?.value),t}}function c(e,t,n=!0){return n&&(0,r.isEnumBaseValueDiffers)(e,a.ENUM_VALUE_NONE)&&t===e.baseValue?.value?t=a.ENUM_VALUE_NONE:(e.baseTooComplex||e.baseValue&&e.baseValue?.value!==a.ENUM_VALUE_NONE)&&t===a.ENUM_VALUE_NONE&&(t=a.ENUM_VALUE_NULL),(e.value===t||e.allowedValues.length>0&&!e.allowedValues.find((e=>e.value===t)))&&(t=a.ENUM_VALUE_NOT_APPLICABLE),t}t.UI_PROP_NAME_TEXT_ARRANGEMENT="textArrangement",t.UI_PROP_NAME_TEXT="text",t.excludeBaseLayerValues=function(e,n){if(e&&!(0,r.isTooComplex)(e)&&!(0,r.isTooComplex)(n)){let o,i;(0,r.isEnumBaseValueDiffers)(e)&&e.baseValue?.value!==a.ENUM_VALUE_NONE&&(e.action&&(o=e.action.changedProperties.find((e=>e.propertyName===t.UI_PROP_NAME_TEXT))?.value,i=e.action.changedProperties.find((e=>e.propertyName===t.UI_PROP_NAME_TEXT_ARRANGEMENT))?.value),o&&o===e.baseValue?.value||(0,r.excludeValueFromList)(e.allowedValues,e.baseValue?.value??"")),n&&(0,r.isEnumBaseValueDiffers)(n)&&n.baseValue?.value!==a.ENUM_VALUE_NONE&&(e.action&&(i=e.action.changedProperties.find((e=>e.propertyName===t.UI_PROP_NAME_TEXT_ARRANGEMENT))?.value),!i&&n.action&&(i=n.action.changedProperties.find((e=>e.propertyName===t.UI_PROP_NAME_TEXT_ARRANGEMENT))?.value),i&&i===n.baseValue?.value||(0,r.excludeValueFromList)(n.allowedValues,n.baseValue?.value??""))}},t.getTextAndTextArrangement=function(e,t,n,p=!0,c){const u=n?n.isCdsProject:c;let m;const d={tooComplex:!1,type:a.UI_PROP_TYPE_ENUM,allowedValues:[],value:a.ENUM_VALUE_NONE,baseValue:{value:a.ENUM_VALUE_NONE}};e&&(d.locations=(0,r.getLocations)([e]));const y={tooComplex:!1,value:a.ENUM_VALUE_NOT_APPLICABLE,baseValue:{value:a.ENUM_VALUE_NONE,text:(0,r.getFormattedText)(a.ENUM_VALUE_NONE)},type:a.UI_PROP_TYPE_ENUM,allowedValues:[]};let g;t&&(y.locations=(0,r.getLocations)([t]));let f=!1;const h=s(e,t,"app"),T=s(e,t,"base"),P=!h.separate||h.embedded&&null!==h.embedded.value?h.embedded:h.separate;if(e?.app.length>0){const t=e.top.fileUri,{tooComplexReason:o,range:s,value:l}=(0,i.getPathCheckedValueFromAnnotation)(e.top.annotation,a.ExpressionType.Path,{fileUri:t,context:n,allowedPathsOptions:{allowedTypes:new Set([a.ExpressionType.String])},target:e});o?m=(0,r.buildTooComplex)(o,s,t,[],l):d.value=l,P?P.tooComplex?(g=P.tooComplex,f=!0):(y.value=P.value,y.locations=P.location?[P.location]:[]):y.value=a.ENUM_VALUE_NONE}const E=u||0===e?.app.length;if(e?.base.length>0){d.value===a.ENUM_VALUE_NONE&&(y.value=a.ENUM_VALUE_NONE);const t=(v=e.base).find((e=>e.annotation.value&&e.fileUri===v[0].fileUri))||v[0],{tooComplexReason:o,value:s}=(0,i.getPathCheckedValueFromAnnotation)(t.annotation,a.ExpressionType.Path,{fileUri:t.fileUri,context:n,allowedPathsOptions:{allowedTypes:new Set([a.ExpressionType.String])},target:e});o?(d.baseTooComplex=!0,delete d.baseValue):d.baseValue={value:s};const p=e=>{e.tooComplex?(y.baseTooComplex=!0,delete y.baseValue):y.baseValue={value:e.value,text:(0,r.getFormattedText)(e.value)}};T.embedded&&E&&(p(T.embedded),h.embedded||(y.value=a.ENUM_VALUE_NONE,y.locations=l(T.embedded))),!T.separate||T.embedded&&null!==h.embedded?.value||(T.embedded||p(T.separate),P!==h.separate&&function(e,t){return t.separate&&!e.separate&&(!t.embedded&&!e.embedded||null===e.embedded?.value)}(h,T)&&(y.value=a.ENUM_VALUE_NONE,y.locations=l(T.separate)))}var v;null===y.value&&(y.value=a.ENUM_VALUE_NULL),f||(y.allowedValues=["TextFirst","TextLast","TextSeparate","TextOnly"].map((e=>({value:e,text:(0,r.getFormattedText)(e)}))),function(e){return e.baseTooComplex||e.baseValue&&e.baseValue.value!==a.ENUM_VALUE_NONE}(y)&&E&&y.allowedValues.unshift({value:a.ENUM_VALUE_NULL,text:a.ENUM_VALUE_NONE}),p&&(0,r.isEnumBaseValueDiffers)(y)&&(0,r.excludeValueFromList)(y.allowedValues,y.baseValue.value),y.allowedValues.unshift({value:a.ENUM_VALUE_NONE,text:(0,r.getFormattedText)(a.ENUM_VALUE_NONE)})),y.value&&(y.text=(0,r.getFormattedText)(y.value));const b=void 0!==g?g:y;return e?.readonly&&(d.readonly=!0,d.readonlyTooltip=e.readonlyTooltip,y.readonly=!0,y.locations=y.locations||d.locations,y.value!==a.ENUM_VALUE_NONE||y.baseValue?.value&&y.baseValue.value!==a.ENUM_VALUE_NONE?y.readonlyTooltip=e.readonlyTooltip:y.readonlyTooltip=o.i18n.t("ReadonlyTooltipAnnoParentChangeInSiblingApp",{appName:e.readonlyAppName})),m&&!(0,r.isTooComplex)(b)&&b.value===a.ENUM_VALUE_NONE&&b.baseValue.value===a.ENUM_VALUE_NONE&&(b.locations=m.tooComplexLocations||m.locations),{text:m||d,textArrangement:b}},t.getTextArrangementValueFromLayer=s,t.getTextArrangementSyncActions=function(e,n,o,i){if((0,r.isTooComplex)(e.valueHelpText)||(0,r.isTooComplex)(e.text))return;const s={},l=e.nodeId,u=p(e.valueHelpText),m=p(e.text),d=p(e.textArrangement),y=p(e.valueHelpTextArrangement),g=!(0,r.isTooComplex)(e.textArrangement)&&o===y,f=!(0,r.isTooComplex)(e.valueHelpTextArrangement)&&i===d;let h=null,T=null;if(m!==a.ENUM_VALUE_NONE){const e=m.split("/");1===e.length?(h="",T=m):(h=e.shift(),T=e.join("/"))}const P=function(e,n,o,r,i){const{text:s,valueHelpText:l,textProp:p,valueHelpTextProp:u}=e,{textFieldName:m,textAssocName:d,isTextBaseValuePossible:y,isVHTextBaseValuePossible:g}=i;let f=!1,h=l===a.ENUM_VALUE_NONE;if(s===a.ENUM_VALUE_NONE&&l===a.ENUM_VALUE_NONE)f=!0;else if(s!==a.ENUM_VALUE_NONE&&l===a.ENUM_VALUE_NONE){const e=c(u,m,g);if(r.includes(d)&&e!==a.ENUM_VALUE_NOT_APPLICABLE){h=e===a.ENUM_VALUE_NONE;const t={nodeId:o,propertyName:"valueHelpText",value:e};n.valueHelpText={changedProperties:[t]}}}else if(s===a.ENUM_VALUE_NONE&&l!==a.ENUM_VALUE_NONE){if(r.length){let e=r[0]?r[0]+"/"+l:l;if(e=c(p,e,y),e!==a.ENUM_VALUE_NOT_APPLICABLE){const t={nodeId:o,propertyName:"text",value:e};n.text={changedProperties:[t]}}}}else{const e=r.map((e=>e?e+"/"+l:l));if(e.length)if(e.includes(s))f=!0;else{let i=c(p,e[0],y);if(i!==a.ENUM_VALUE_NOT_APPLICABLE){const e={nodeId:o,propertyName:t.UI_PROP_NAME_TEXT,value:i};n.text={changedProperties:[e]}}if(i=c(u,m,g),r.includes(d)&&i!==a.ENUM_VALUE_NOT_APPLICABLE){h=i===a.ENUM_VALUE_NONE;const e={nodeId:o,propertyName:"valueHelpText",value:i};n.valueHelpText={changedProperties:[e]}}}}return{inSync:f,isVHTextFromBase:h}}({text:m,valueHelpText:u,textProp:e.text,valueHelpTextProp:e.valueHelpText},s,l,n,{textFieldName:T,isVHTextBaseValuePossible:f,textAssocName:h,isTextBaseValuePossible:g});if((P.inSync||s.text||s.valueHelpText)&&!(0,r.isTooComplex)(e.textArrangement)&&!(0,r.isTooComplex)(e.valueHelpTextArrangement)){!function(e,n,o,{inSync:r,isVHTextFromBase:i}){const{textArrangement:s,valueHelpTextArrangement:l,valueHelpTextArrangementBase:p,textArrangementProp:u,valueHelpTextArrangementProp:m}=e;if(l!==a.ENUM_VALUE_NONE){const e=c(u,l);if(e!==a.ENUM_VALUE_NOT_APPLICABLE&&(s!==l||e===a.ENUM_VALUE_NONE)){const a={nodeId:o,propertyName:t.UI_PROP_NAME_TEXT_ARRANGEMENT,value:e};n.text?n.text.changedProperties.push(a):r&&(n.textArrangement={changedProperties:[a]})}}if(s!==a.ENUM_VALUE_NONE){let e;if(e=i&&s===p?a.ENUM_VALUE_NONE:c(m,s),e!==a.ENUM_VALUE_NOT_APPLICABLE&&(s!==l||e===a.ENUM_VALUE_NONE)){const t={nodeId:o,propertyName:"valueHelpTextArrangement",value:e};n.valueHelpText?n.valueHelpText.changedProperties.push(t):r&&(n.valueHelpTextArrangement={changedProperties:[t]})}}}({textArrangement:d,valueHelpTextArrangement:y,valueHelpTextArrangementBase:i,textArrangementProp:e.textArrangement,valueHelpTextArrangementProp:e.valueHelpTextArrangement},s,l,P)}return s}},17513:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},83407:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CDSFileCreateHelper=t.getWritableFileFromApp=t.isSubDirectory=void 0;const o=a(n(85767)),r=n(57147),i=n(71017),s=n(98879),l=n(83237),p=n(13740),c=n(28033),u=n(37054),m=n(57310);function d(e,t){const n=(0,i.relative)(e,t);return n&&!n.startsWith("..")&&!(0,i.isAbsolute)(n)}t.isSubDirectory=d;const y="services.cds",g=["index.cds",y];function f(e,t,n){const a=(0,l.toUnifiedUri)(t);return n.length>1?e.reverse().find((e=>{const t=(0,l.toUnifiedUri)(e);return(0,i.dirname)(t)===a||d(a,t)&&"app"===(0,i.dirname)(t)&&!g.includes((0,i.basename)(e))})):e.reverse().find((e=>d(a,(0,l.toUnifiedUri)(e))||"app"===(0,i.dirname)(e)&&!g.includes((0,i.basename)(e))))}t.getWritableFileFromApp=f;async function h(e,t,n){const a=await r.promises.readFile(e,{encoding:"utf8"}),i=""!==a?o.default.parse(a):void 0;if(!Array.isArray(i?.requires)||void 0===i.requires.find((e=>e===n))){const n=a.endsWith("\n")||""===a?"":"\n",o=`${a}${n}${t}\n`;await r.promises.writeFile(e,o)}}t.CDSFileCreateHelper=class CDSFileCreateHelper{constructor(e,t,n){this.appName=t,this.annotationService=e,this.project=n}async createCDSFile(){const e=(0,i.join)(this.appName,"annotations").split(i.sep),t=(0,i.join)(this.project.root,...e)+".cds",n=this.annotationService instanceof u.FioriAnnotationService?this.annotationService.getInitialFileContent(t):this.annotationService.getNewAnnotationFileContent(t);try{await(0,p.createAnnotationFile)(this.project.root,this.appName,t,n)}catch{throw new s.ApiError("Failed to create new annotation file")}const a=`./${e.slice(1).join("/")}`,o=`using from '${a}';`,l=`${e.join(i.sep)}.cds`;for(const e of g)try{const t=(0,i.join)(this.project.root,"app",e);return await h(t,o,a),l}catch(t){if("ENOENT"!==t.code)throw new s.ApiError(`Failed to update ${e} file`)}try{await r.promises.writeFile((0,i.join)(this.project.root,"app",y),`${o}\n`)}catch{throw new s.ApiError("Failed to create services.cds file")}finally{await(0,c.getCdsRoots)(this.project.root,!0)}return l}getChangeableFileUri(){if(this.annotationService instanceof u.FioriAnnotationService){const e=this.annotationService.getAllFiles().map((e=>(0,m.fileURLToPath)(e.uri))),t=r.realpathSync.native(this.project.root),n=f(e,(0,i.join)(t,this.appName),Object.keys(this.project.apps));return(0,m.pathToFileURL)(n).toString()}return f(this.annotationService.getAnnotationFileUris().map((e=>e.fileUri)),this.appName,Object.keys(this.project.apps))}}},13740:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAnnotationFile=void 0;const a=n(28033),o=n(57147),r=n(71017),i=n(98879);t.createAnnotationFile=async function(e,t,n,s=""){let l=(0,r.relative)((0,r.join)(e,t),n).replace(/\\/g,"/");if(!await(0,a.fileExists)(n)){await o.promises.writeFile(n,s).catch((()=>{throw new i.ApiError("Failed to create new annotation file at "+n)}));await(0,a.fileExists)(n)||(l="")}return l}},83282:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EdmxFileCreateHelper=void 0;const a=n(28033),o=n(75764),r=n(71017),i=n(98879),s=n(13740),l=n(37054);t.EdmxFileCreateHelper=class EdmxFileCreateHelper{constructor(e,t,n,a){this.annotationService=e,this.appName=t,this.project=n,this.serviceName=a}async createEdmxFile(){const e=await(0,a.createProjectProvider)(this.project.root),t=(0,r.join)("annotations","annotations.xml");await(0,a.isDirectory)((0,r.join)(this.project.root,o.DirName.Webapp,"annotations")).catch((e=>(0,a.createDirectory)((0,r.join)(this.project.root,o.DirName.Webapp,"annotations"))));const n=(0,r.join)(o.DirName.Webapp,t),p=(0,r.join)(this.project.root,n),c=this.annotationService instanceof l.FioriAnnotationService?this.annotationService.getInitialFileContent(p):this.annotationService.getNewAnnotationFileContent();if(await(0,s.createAnnotationFile)(this.project.root,this.appName,p,c)){const n=await e.readManifest(this.appName),a=n["sap.app"].dataSources;(a[this.serviceName].settings.annotations=[]).push("annotation");const r=t.replace(/\\/g,"/");a.annotation={type:o.DataSourceType.ODataAnnotation,uri:r,settings:{localUri:r}},await e.updateManifest(n,this.appName).catch((e=>{throw new i.ApiError("Failed to update manifest file")}))}return n}getChangeableFileUri(){if(this.annotationService instanceof l.FioriAnnotationService){const e=this.annotationService.getAllFiles().filter((e=>!e.isReadOnly));return e.length>0?e[e.length-1].uri:void 0}{const e=this.annotationService.getAnnotationFileUris().filter((e=>1===e.type));return e.length>0?e[e.length-1].fileUri:void 0}}}},12534:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EdmxFileCreateHelper=t.CDSFileCreateHelper=void 0;var a=n(83407);Object.defineProperty(t,"CDSFileCreateHelper",{enumerable:!0,get:function(){return a.CDSFileCreateHelper}});var o=n(83282);Object.defineProperty(t,"EdmxFileCreateHelper",{enumerable:!0,get:function(){return o.EdmxFileCreateHelper}})},76089:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTextOrTextArrangementColumn=t.getTextAndTextArrangementAnnoForCell=t.getPropertyToUIPropTypeMap=t.buildGenericUIProperties=void 0;const a=n(70704),o=n(78263),r=n(46163),i=n(35586),s=n(2010),l=n(57321),p=n(79760),c=n(41810),u=n(53308),m=n(95207),d=n(23635);function y(e,t,n,a){if(![d.UI_PROP_TYPE_ENUM,d.UI_PROP_TYPE_MULTIPLE_ENUMS].includes(t.type))return{};if(t.allowedValues){const o=[...t.allowedValues];return t.valueType===r.ValueType.ExpressionType&&n.value!==d.ExpressionType.Path&&function(e,t,n,a){const o=a.findIndex((e=>e.value===d.ExpressionType.Path));if(o>-1){const r=e.uiPropertyDefinitions,i=(0,p.buildRevertedDependency)(r).get(n)?.get(d.ExpressionType.Path)?.[0]?.name;if(i){const n=r.propertyMap[i]?.allowedPathsOptions,s=(0,p.getAllowedPaths)(e.context,e.layeredAnnotation.top.target,e.relativePath,r,t,{...n,toManyAssociationsOnly:!1});s.allowedValues?.length||s.allowedValuesTree?.nodes?.length||a.splice(o,1)}}}(e,a,t.name,o),{allowedValues:o}}const{context:o,uiPropertyDefinitions:i,layeredAnnotation:s,relativePath:c}=e;if(t.allowedPathsOptions){const e=n.resolvedPathContext?.layeredAnnotation?.top.target||n.creationTarget||s.top.target,r={...t.allowedPathsOptions,toManyAssociationsOnly:!1};return(0,p.getAllowedPaths)(o,e,c,i,a,r,n.value)}if(!t.allowedAnnotationPathsOptions)return{};const{term:u,textPath:m}=t.allowedAnnotationPathsOptions,y=s.top.target,g=(0,d.getExistingQualifiers)(o.annotationIndex,y,u,!0),f=[];for(const e of g){const t=(0,d.getAnnotationIndexKey)(y,u,e),n=o.annotationIndex[t],a={valueExpressionType:d.ExpressionType.String},i=(0,l.resolveValuePath)(o,n,m,r.ValueType.ExpressionValue,a);if(!i.tooComplex){const t=`@${u}`+(e?`#${e}`:"");f.push({value:t,text:i.value})}}return{allowedValues:f}}function g(e,t,n,o,s,l){const{uiPropertyDefinitions:c}=e,u=c.propertyMap[t];let m;switch(u.type){case d.UI_PROP_TYPE_ENUM:m=function(e,t,n,o,s){const l=o.value;let c=function(e,t,n,a){let o;if(a)if(n.isBase)o=d.ENUM_VALUE_NONE;else if(n.value){const a=n.value,r=function(e,t,n){let a="";if(n===d.ENUM_VALUE_NONE)return a;if(e.allowedAnnotationPathsOptions&&t.allowedValues?.find((e=>e.value===n)))return a;if(!e.allowedPathsOptions?.deepPathsSupported&&t.allowedValues?.find((e=>e.value===n)))return a;if(e.allowedPathsOptions?.deepPathsSupported&&(0,i.getValueHelpNodeByPath)(t.allowedValuesTree.nodes,n))return a;a=[d.ExpressionType.Decimal,d.ExpressionType.Int].includes(e.valueExpressionType)?d.TooComplexReason.UnsupportedNumericValue:e.valueExpressionType===d.ExpressionType.EnumMember?d.TooComplexReason.UnsupportedEnumValue:e.valueExpressionType===d.ExpressionType.AnnotationPath?d.TooComplexReason.NoValidAnnotationPath:d.TooComplexReason.UnsupportedPath;return a}(e,t,a);if(r){const e=n.locations[0];return(0,d.buildTooComplex)(r,e?.range,e?.fileUri,void 0,a)}o=a}else o=t?.allowedValues?.length||t?.allowedValuesTree?.nodes?.length?e.defaultValue||d.ENUM_VALUE_NONE:d.ENUM_VALUE_NOT_APPLICABLE;else o=e.defaultValue||d.ENUM_VALUE_NOT_APPLICABLE;return o}(t,n,o,s);if((0,d.isTooComplex)(c))return c;(function(e,t,n,a,o,i){let s=!1;const l=function(e,t,n){const a=e.uiPropertyDefinitions.propertyMap[t],o=n.allowedValues;let i=a.type!==d.UI_PROP_TYPE_MULTIPLE_ENUMS&&a.optional;i&&(i=function(e,t,n){const{context:a,layeredAnnotation:o}=e,i=e.uiPropertyDefinitions.propertyMap[t],s={currentUINodePath:e.currentUINodePath||""},l=(i.annotationValuePaths||[]).map(((e,t)=>{const n=0===t?(0,p.getEffectiveValuePath)(e.path,s):e.path;return{...e,path:n}})),{targetAnnotation:c,tooComplex:u}=(0,p.resolveAnnotationValuePaths)(a,o,l,i.optional);if(u||!c)return!1;let m=!0;const d=c.top.annotation;let y=i.valuePath;i.annotationValuePaths?.length||(y=y.replace(r.CURRENT_UI_NODE_PATH,e.currentUINodePath||""));switch(i.valueType){case r.ValueType.PropertyName:for(const e of n){const t=y+e.value;if(!(0,p.getValuePathForRemoval)(a,d,t)){m=!1;break}}break;case r.ValueType.AnnotationName:break;default:m=!!(0,p.getValuePathForRemoval)(a,d,y)}return m}(e,t,o));const s=(0,p.traversesCollection)(a.valuePath,e.currentUINodePath);i&&e.context.isCdsProject&&!s&&(i=function(e,t,n){const{context:a,layeredAnnotation:o}=e,i=e.uiPropertyDefinitions.propertyMap[t];let s=!0;const l={currentUINodePath:e.currentUINodePath,forBaseValue:!0},c=(0,p.getUIPropertyValue)(a,o,i,l);if(c.tooComplex||c.value&&c.value!==d.ENUM_VALUE_NONE)if(i.valueType===r.ValueType.PropertyName)for(const e of n){const t={...c.resolvedPathContext,lastPropertyNameSegment:e.value};if(t.record.propertyValues.find((t=>t.name===e.value&&t.value.type!==d.ExpressionType.Null))&&!(0,p.cdsNullApplicable)(a,t)){s=!1;break}}else(0,p.cdsNullApplicable)(a,c.resolvedPathContext)||(s=!1);return s}(e,t,o));return i}(e,t.name,n);(l||i===d.ENUM_VALUE_NONE&&o)&&(n?.allowedValues?.length||n?.allowedValuesTree?.nodes?.length||i!==d.ENUM_VALUE_NOT_APPLICABLE||(s=!0),_(n));a.isBase&&(a.tooComplex||a.value&&a.value!==d.ENUM_VALUE_NONE)&&t.optional&&(!e.context.isCdsProject||l)&&_(n,d.ENUM_VALUE_NULL,d.ENUM_VALUE_NONE);return s})(e,t,n,o,s,c)&&(c=d.ENUM_VALUE_NONE);const u=o.isBase&&!o.tooComplex&&l?l:d.ENUM_VALUE_NONE;let m="";if(c===d.ENUM_VALUE_NONE&&u&&c!==u)if(t.allowedPathsOptions?.deepPathsSupported){(0,i.removeValueHelpNodeByPath)(n.allowedValuesTree?.nodes,u);const{node:e}=(0,i.getValueHelpNodeByPath)(n.allowedValuesTree?.nodes,d.ENUM_VALUE_NONE);e.text=`${u} (${a.i18n.t("BaseLayer")})`}else{const e=(0,d.excludeValueFromList)(n.allowedValues,u);e&&(m=e)}if(c===d.ENUM_VALUE_NONE&&o.isBase&&o.tooComplex&&t.allowedPathsOptions?.deepPathsSupported){const{node:e}=(0,i.getValueHelpNodeByPath)(n.allowedValuesTree?.nodes,d.ENUM_VALUE_NONE);e.text=`${a.i18n.t("Complex")} (${a.i18n.t("BaseLayer")})`}return{tooComplex:!1,type:d.UI_PROP_TYPE_ENUM,value:c,baseValue:m?{value:u,text:m}:{value:u},baseTooComplex:o.isBase&&!!o.tooComplex,allowedValues:n.allowedValues,allowedValuesTree:n.allowedValuesTree}}(e,u,s,o,n);break;case d.UI_PROP_TYPE_MULTIPLE_ENUMS:m=function(e,t,n,a,o){let r,i=[];Array.isArray(n?.value)&&(i=n.value.map(((t,a)=>function(e,t,n,a,o){if([d.ExpressionType.PropertyPath,d.ExpressionType.Path].includes(e.valueExpressionType)){const r=(0,d.makeInvalidPathTooComplex)(t.context,d.ExpressionType.Path,a,n.resolvedPathContext?.layeredAnnotation,n.collectionValuesLocations[o],e.allowedPathsOptions);return r||a}return a}(e,o,n,t,a))));r=t?.allowedValues?.length||t?.allowedValuesTree?.nodes?.length?n.isBase||i.length?i:a?[]:e.defaultValue?[e.defaultValue]:[]:i.length?i:[d.ENUM_VALUE_NOT_APPLICABLE];const s=n.isBase&&!n.tooComplex?n.value:[];return{tooComplex:!1,type:d.UI_PROP_TYPE_MULTIPLE_ENUMS,values:r,useBase:!!n.isBase,baseValues:s.map((e=>({value:e}))),baseTooComplex:n.isBase&&!!n.tooComplex,allowedValues:t.allowedValues,allowedValuesTree:t.allowedValuesTree}}(u,s,o,n,e);break;case d.UI_PROP_TYPE_NUMBER:m=function(e,t){let n=t.isBase?0:t.value;"number"!=typeof n&&"number"==typeof e.defaultValue&&(n=e.defaultValue);return{tooComplex:!1,type:d.UI_PROP_TYPE_NUMBER,value:n,useBase:t.isBase,baseValue:t.isBase&&!t.tooComplex?t.value:0,baseTooComplex:t.isBase&&!!t.tooComplex}}(u,o);break;case d.UI_PROP_TYPE_DECIMAL:m=function(e,t){let n=t.isBase?0:t.value;"number"!=typeof n&&"number"==typeof e.defaultValue&&(n=e.defaultValue);return{tooComplex:!1,type:d.UI_PROP_TYPE_DECIMAL,value:n,useBase:t.isBase,baseValue:t.isBase&&!t.tooComplex?t.value:0,baseTooComplex:t.isBase&&!!t.tooComplex}}(u,o);break;case d.UI_PROP_TYPE_STRING:m=function(e,t){const n=t.isBase?"":null!==t.value?t.value:null,a=t.isBase&&!t.tooComplex?t.value:"";return{tooComplex:!1,type:d.UI_PROP_TYPE_STRING,value:n,useBase:t.isBase,baseValue:{value:a},baseTooComplex:t.isBase&&!!t.tooComplex,isLanguageDependent:e.isLanguageDependent??!0}}(u,o);break;case d.UI_PROP_TYPE_BOOL:m=function(e,t){const n=t.value,a=!t.isBase&&(e.invertBoolean?!n:n);let o;t.isBase&&!t.tooComplex&&(o=t.value,e.invertBoolean&&(o=!o));return{tooComplex:!1,type:d.UI_PROP_TYPE_BOOL,value:a,useBase:t.isBase,baseValue:!(!t.isBase||t.tooComplex)&&o,baseTooComplex:t.isBase&&!!t.tooComplex}}(u,o);break;case d.UI_PROP_TYPE_TABLE:m=function(e,t,n,a){const{columns:o,allowedValuesMap:i}=function(e,t,n,a){const o=[],r={},i=function(e,t,n,a){const o=new Map;a.get(t.name);for(const r of t.columns.filter(E)){const t=v(r.allowedPathsOptions);if(o.has(t))o.get(t).columns.add(r.name);else{const i=y(e,r,n,a);if(i.allowedValues?.length||i.allowedValuesTree?.nodes?.length){const e=new Set([r.name]),n=`allowedValuesList${o.size}`;o.set(t,{columns:e,allowedValuesResult:i,key:n})}}}return o}(e,t,n,a);for(const s of t.columns.filter((e=>!e.hidden))){const t={name:s.name,type:s.type};if(s.defaultValue&&(t.default=s.defaultValue),s.isLanguageDependent&&(t.isLanguageDependent=s.isLanguageDependent),o.push(t),s.type===d.UI_PROP_TYPE_ENUM&&!S(s)){if(t.allowedValues=[],E(s))b(t,s,i,r);else{const o=y(e,s,n,a);t.allowedValues=o.allowedValues,t.allowedValuesTree=o.allowedValuesTree}s.optional&&_(t)}}return{columns:o,allowedValuesMap:r}}(e,t,n,a),s={tooComplex:!1,type:d.UI_PROP_TYPE_TABLE,columns:o,rows:[],allowedValuesMap:i};let l=null;if(t.rowCallback){const{context:n,layeredAnnotation:a}=e;l={context:n,baseEntityType:a.top.target,uiPropDef:t,propertyMap:P(n,a)}}const p=new Map,c=n.value===d.ENUM_VALUE_NONE?[]:n.value||[];if(t.valueType===r.ValueType.AnnotationQualifiers)for(const[a,o]of c.entries()){const r=e.context.annotationIndex[o],i=f({...e,layeredAnnotation:r},a,n,t,s,p,l);s.rows.push(i)}else for(const a of c){const{key:o,range:r}=JSON.parse(a),{tooComplexRow:i,rowData:c}=h(e,n,t,s,r,o,p),u={key:o,data:i||c};t.rowCallback&&t.rowCallback(l,u),s.rows.push(u)}for(const[e,t]of p.entries()){const n=o.find((t=>t.name===e));n.allowedValues=n.allowedValues.filter((e=>!t.has(e.value)))}return s}(e,u,o,l);break;default:(0,i.throwError)(`Not yet implemented: generating UIProperties of type '${u.type}'`)}return(0,d.isTooComplex)(m)||(o.locations&&(m.locations=o.locations),u.readonly?m.readonly=u.readonly:u.readonlyIfBaseValue&&o.isBase&&n&&(m.readonly=!0,m.readonlyTooltip=o.resolvedPathContext?.layeredAnnotation?.readonlyTooltip||""),m.readonly&&u.readonlyTooltip&&!m.readonlyTooltip&&(m.readonlyTooltip=a.i18n.t(u.readonlyTooltip)),n||(m.baseTooComplex&&(m.baseTooComplex=!1),m.useBase&&(m.useBase=!1))),m}function f(e,t,n,o,r,s,l){const p=`${t}`,{layeredAnnotation:c,context:u}=e,{tooComplexRow:m,rowData:d}=h(e,n,o,r,c.top.annotation.origin,p,s),y={key:p,data:m||d};if(o.rowCallback&&o.rowCallback(l,y),c.base.length)y.deletionDisabled=!0,y.deletionDisabledTooltip=a.i18n.t("DeletionDisablesTooltipBaseAnnotation");else if(c.readonlyAppName)y.deletionDisabled=!0,y.deletionDisabledTooltip=a.i18n.t("DeletionDisablesTooltipDifferentAppAnnotation",{appName:c.readonlyAppName});else{const{fileUri:e,target:t,annotation:n}=c.top,o=(0,i.getReferences)(u,e,t,n.term,n.qualifier);if(1===o?.length){const{term:e,qualifier:t}=o[0];y.deletionDisabled=!0,y.deletionDisabledTooltip=a.i18n.t("DeletionDisablesTooltipAnnotationInUseOnce",{annoPath:`@${e}`+(t?`#${t}`:"")})}else o?.length>1&&(y.deletionDisabled=!0,y.deletionDisabledTooltip=a.i18n.t("DeletionDisablesTooltipAnnotationInUse"))}return y}function h(e,t,n,a,o,r,i){const s={location:{range:o,fileUri:t?.locations?.[0]?.fileUri||e.layeredAnnotation.top.fileUri},cells:{}};let l;for(const o of n.columns){let p;p=S(o)?N(e,n,o,t,r):A(e,t,n,o,a,r),o.hidden&&(0,d.isTooComplex)(p)&&("adr"!==n.name||"type"!==o.name)||(0,d.isTooComplex)(p)&&p.tooComplexLocations?.[0]?.reason===d.TooComplexReason.UnsupportedDynamicPropertyPath?l=p:o.hidden||(s.cells[o.name]=T(p,o,s)),o.isKeyColumn&&o.type===d.UI_PROP_TYPE_ENUM&&!(0,d.isTooComplex)(p)&&(i.set(o.name,i.get(o.name)||new Set),i.get(o.name).add(p.value),p.allowedValues=[{value:p.value}])}return{tooComplexRow:l,rowData:s}}function T(e,t,n){let o=e;for(const e of t.dependency||[]){if("label"===t.name&&(0,d.isTooComplex)(n.cells[e.name])&&n.cells[e.name].tooComplexLocations.filter((e=>e.reason===d.TooComplexReason.NoValidPath)).length){o={value:"",readonly:!0,readonlyTooltip:a.i18n.t("ReadonlyTooltipLabelOnInvalidPath")};break}if(e.reevaluateOnChange)continue;const r=Array.isArray(e.value)?e.value:[e.value],i=n.cells[e.name];if((0,d.isTooComplex)(i)||!r.includes(i.value)){o={value:"",hidden:!0};break}}return o}function P(e,t){const n=(0,c.getPathBaseMetadataElement)(e.metadataService,t.top.target),a=new Map;return n.content.forEach((e=>{if(!e?.edmPrimitiveType)return;const t=u.primitiveTypeMap[e.edmPrimitiveType]?.constantExpressionName;let n=d.UI_PROP_TYPE_STRING;switch(t){case d.ExpressionType.String:n=d.UI_PROP_TYPE_STRING;break;case d.ExpressionType.Bool:n=d.UI_PROP_TYPE_BOOL;break;case d.ExpressionType.Int:n=d.UI_PROP_TYPE_NUMBER;break;case d.ExpressionType.Decimal:case d.ExpressionType.Float:n=d.UI_PROP_TYPE_DECIMAL}a.set(e.name,n)})),a}function E(e){return e.type===d.UI_PROP_TYPE_ENUM&&!!e.allowedPathsOptions}function v(e){const t={...e};return e.allowedTypes?.size&&(t.allowedTypes=[...e.allowedTypes]),e.suppressedTypes?.size&&(t.suppressedTypes=[...e.suppressedTypes]),JSON.stringify(t)}function b(e,t,n,a){const o=v(t.allowedPathsOptions),r=n.get(o);1===r?.columns.size?(e.allowedValues=r.allowedValuesResult.allowedValues,e.allowedValuesTree=r.allowedValuesResult.allowedValuesTree):r?.columns.size>1&&(e.allowedValues=[],t.allowedPathsOptions?.deepPathsSupported&&(e.allowedValuesTree={id:r.allowedValuesResult.allowedValuesTree.id,nodes:[]}),e.allowedValuesKey=r.key,a[r.key]||(a[r.key]=r.allowedValuesResult))}function _(e,t=d.ENUM_VALUE_NONE,n){if(e.allowedValuesTree?.id)e.allowedValuesTree.nodes.unshift(function(e=d.ENUM_VALUE_NONE,t){const n={value:e,selectable:!0,expandable:!1,subnodes:[]};t&&(n.text=t);return n}(t,n));else{const a={value:t};n&&(a.text=n),e.allowedValues.unshift(a)}}function A(e,t,n,o,s,l){const{context:c,layeredAnnotation:u}=e,[m,y]=l.split("/").map((e=>parseInt(e,10))),g=n.valueType===r.ValueType.AnnotationQualifiers?"":`${n.valuePath}/${m}`,f={currentUINodePath:e.currentUINodePath||"",collectionEntryPath:g,indexEmbedded:n.flatteningPropName?y:-1},h=t?.resolvedPathContext?.layeredAnnotation||u,T=(0,p.getUIPropertyValue)(c,h,o,f),P=s.columns.find((e=>e.name===o.name));let E;if(T.tooComplex)E=T.tooComplex;else if(o.type===d.UI_PROP_TYPE_ENUM)E=function(e,t,n,a,o){let r,s=n?.allowedValues||t.allowedValues||[];n?.allowedValuesKey&&(s=[...s,...a.allowedValuesMap[n.allowedValuesKey]?.allowedValues||[]]);const l=Array.isArray(o.value);if(l){const e=function(e,t,n){let a,o="",r=!1;for(const t of e)n.find((e=>e.value===t))&&(o?(r=!0,o=""):o=t);o?a=o:r?a=(0,d.buildTooComplex)(d.TooComplexReason.MultipleMatchingEnumValues,t?.range,t?.fileUri):o||(a=d.ENUM_VALUE_NONE);return a}(o.value,o.locations[0],s);r=(0,d.isTooComplex)(e)?e:{value:e}}else r=function(e,t,n,a,o,r){let s;const l=o.value;if(!t?.allowedPathsOptions?.deepPathsSupported&&r.find((e=>e.value===l)))s={value:o.value};else if(t?.allowedPathsOptions?.deepPathsSupported){let t=n?.allowedValuesTree,r=t?.nodes||[];n?.allowedValuesKey&&(t=a.allowedValuesMap[n.allowedValuesKey]?.allowedValuesTree,r=[...r,...t?.nodes||[]]),l&&l!==d.ENUM_VALUE_NONE&&(0,i.expandValueHelpTreeForPath)(e.context,t,l),(0,i.getValueHelpNodeByPath)(r,l)&&(s={value:o.value})}return s}(e,t,n,a,o,s);if(r||l)return r;let p;if(t.valueExpressionType===d.ExpressionType.EnumMember&&t.optional){const n=t.allowedValuesPrefix.split("/")[0];p=e.context.vocabularyService.getType(n)}if(p?.isFlags&&t.optional)return{value:d.ENUM_VALUE_NONE};return function(e,t){let n=d.TooComplexReason.MissingProperty;e.value!==d.ENUM_VALUE_NONE&&(n=t.valueExpressionType===d.ExpressionType.EnumMember?d.TooComplexReason.UnsupportedEnumValue:t.allowedValues?d.TooComplexReason.UnsupportedValue:d.TooComplexReason.UnsupportedPath);const a=e.locations[0];return n===d.TooComplexReason.UnsupportedValue?(0,d.buildTooComplex)(n,a?.range,a?.fileUri,[],e.value):(0,d.buildTooComplex)(n,a?.range,a?.fileUri)}(o,t)}(e,o,P,s,T);else if(o.type===d.UI_PROP_TYPE_BOOL&&1===o.allowedValues?.length){const e=o.allowedValues[0].value;E=Array.isArray(T.value)?{value:!!T.value.find((t=>t===e))}:{value:T.value===e}}else Array.isArray(T.value)?(0,i.throwError)(`Not supported: multiple values per table cell (index: ${m}, column: '${o.name}', table property '${n.name}')`):E={value:T.value};if((0,d.isTooComplex)(E))return E;T.resolvedPathContext?.layeredAnnotation?.readonly?(E.readonly=!0,E.readonlyTooltip=T.resolvedPathContext?.layeredAnnotation?.readonlyTooltip):T.multilineType&&(E.readonly=!0,E.readonlyTooltip=a.i18n.t("ReadonlyTooltipMultilineText"));const v=function(e,t,n){if(!(0,d.isTooComplex)(e)&&(t.annotationValuePaths?.length||t.isLanguageDependent)&&n.locations?.length)return n.locations[0]}(E,o,T);return v&&(E.location=v),E}function C(e,t,n,o,l){const c=t.name,u={currentUINodePath:e.currentUINodePath},{context:m,layeredAnnotation:f}=e,h=(0,p.getUIPropertyValue)(m,f,t,u);if(l&&(n[c]=(0,s.checkTooComplex)(e,c,h),n[c]))return n[c];const T=g(e,c,l,h,y(e,t,h,o),o);return t.hidden||(n[c]=T),(0,d.isTooComplex)(T)||(!T.readonly&&t.valueType!==r.ValueType.AnnotationName&&h.resolvedPathContext?.layeredAnnotation?.readonly&&(T.readonly=!0,!function(e,t){if((0,d.isTooComplex)(t))return!1;if(![r.ValueType.ExpressionType,r.ValueType.ExpressionValue].includes(e.valueType))return!1;if(!e.valuePath)return!1;return(0,i.isEnumStringOrTablePropWithoutValue)(t)}(t,T)?T.readonlyTooltip=h.resolvedPathContext?.layeredAnnotation?.readonlyTooltip:T.readonlyTooltip=a.i18n.t("ReadonlyTooltipAnnoParentChangeInSiblingApp",{appName:h.resolvedPathContext?.layeredAnnotation?.readonlyAppName})),!T.readonly&&h.multilineType&&(T.readonly=!0,T.readonlyTooltip=a.i18n.t("ReadonlyTooltipMultilineText")),o.set(c,l?function(e){let t=(0,p.getPlainValue)(e);(t===d.ENUM_VALUE_NONE||e.useBase)&&e.baseValue&&(t=e.baseValue.value);return t}(T):void 0)),T}function N(e,t,n,o,r){const{context:i,layeredAnnotation:s}=e,l=o?.resolvedPathContext?.layeredAnnotation||s,p=r.split("/").map((e=>parseInt(e,10)))[0],c=`${t.valuePath}/${p}`,{textAnno:u,textArrangementAnno:y,mdElement:g,tooComplexData:f}=I(i,l,c,n);if(f)return f;const h=!!n.allowedPathsOptions?.directPropertiesOnly,{text:T,textArrangement:P}=(0,m.getText)(u,y,i,g,!1,h);return function(e,t){if((0,d.isTooComplex)(e))return e;const n={value:e.value,type:e.type};e.allowedValues?n.allowedValues=e.allowedValues:e.allowedValuesTree&&(n.allowedValuesTree=e.allowedValuesTree);e.readonly&&(n.readonly=e.readonly,n.readonlyTooltip=e.readonlyTooltip);e?.baseValue&&(n.baseValue=e.baseValue);e?.baseTooComplex&&(n.baseTooComplex=!0);e.locations?.length&&(n.location=e.locations[0]);e.value===d.ENUM_VALUE_NOT_APPLICABLE&&(t?(n.readonly=!0,n.readonlyTooltip=t):n.hidden=!0);return n}(n.valuePath.indexOf("com.sap.vocabularies.UI.v1.TextArrangement")<0?T:P,n.name===d.UI_PROP_NAME_TEXT_ARRANGEMENT?a.i18n.t("ReadOnlyTooltipTextArrangement_NotApplicable"):"")}function I(e,t,n,a){const r=a.valuePath.split("/@")[0],i=r?`${n}/${r}`:n,{tooComplexResult:s,valueExpressionType:l,annoValuePathResult:u}=(0,p.resolveAnnotationValuePath)(e,t,{path:i});if(s)return{tooComplexData:s.tooComplex};if(l!==d.ExpressionType.Path&&l!==d.ExpressionType.PropertyPath){const e=u.locations[0];return{tooComplexData:{tooComplex:!0,tooComplexLocations:[{fileUri:e.fileUri,range:e.range,reason:d.TooComplexReason.PathExpected}]}}}const m=`${(0,c.getPathBaseMetadataElement)(e.metadataService,t.top.target).name}/${u.value}`,y=(0,d.resolveMetadataElement)(e.metadataService,m,!0),g=y.path;return{textAnno:e.annotationIndex[(0,d.getAnnotationIndexKey)(g,"com.sap.vocabularies.Common.v1.Text")],textArrangementAnno:e.annotationIndex[(0,d.getAnnotationIndexKey)(g,o.CDS_TERM_NAME_TEXT_ARRANGEMENT)],targetPath:g,mdElement:y}}function S(e){return 1===e.annotationValuePaths?.length&&"com.sap.vocabularies.Common.v1.Text"===e.annotationValuePaths[0].term&&""===e.annotationValuePaths[0].path}t.buildGenericUIProperties=function(e,t,n){const{context:o,uiPropertyDefinitions:r}=e,i={},s=new Map(t);for(const t of r.propertyNames){const o=r.propertyMap[t];if(!o.annotationValuePaths?.length&&null===o.valuePath)continue;const{applicable:l,readonlyPropName:c}=(0,p.isApplicable)(t,r,s);if(!l&&!e.includeNonApplicableProperties)continue;let u=e;if(o.annotationRole&&n?.has(o.annotationRole)){const e=n.get(o.annotationRole);u={...u,layeredAnnotation:e}}const m=C(u,o,i,s,l);if(!(0,d.isTooComplex)(m)&&c){const e=r.propertyMap[c].label||c;m.readonly=!0,m.readonlyTooltip=a.i18n.t("ReadOnlyTooltipDominatingPropInitial",{propertyLabel:e})}}return i},t.getPropertyToUIPropTypeMap=P,t.getTextAndTextArrangementAnnoForCell=I,t.isTextOrTextArrangementColumn=S},18996:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectPropertyChangesInDiff=void 0;const a=n(46163),o=n(78263),r=n(35586),i=n(57321),s=n(20980),l=n(79760),p=n(76089),c=n(9029),u=n(95207),m=n(23635);function d(e,t,n,p,c,u,d){const{context:T,currentUINodePath:P,layeredAnnotation:E}=e,b={currentUINodePath:P,collectionEntryPath:u,indexEmbedded:d},A=(t.annotationValuePaths||[]).map(((e,t)=>{const n=0===t?(0,l.getEffectiveValuePath)(e.path,b):e.path;return{...e,path:n}})),{targetAnnotation:C,tooComplex:N,creationTarget:I,creationTerm:S}=(0,l.resolveAnnotationValuePaths)(T,E,A,t.optional);if(N&&(0,r.throwError)(`Cannot resolve annotationValuePaths for update of property ${t.name} `),!p&&!C)return[];const x=I||C?.top?.target||E.top.target,O=t.annotationValuePaths?.[0]?.creationCallback,D={target:x,term:S},R=function(e,t,n,a){let r,i=e;!i&&a?r=a():!i&&n?r={term:n}:i&&i.top?.annotation?.term!==o.CDS_TERM_NAME_TITLE||(r={term:"com.sap.vocabularies.Common.v1.Label"});if(r){const e={fileUri:"",target:t,annotation:r};i={base:[],app:[e],top:e,isSplit:!1,readonly:!1}}return i}(C,x,S,O?()=>O(T,c,E,D):null),{target:M,annotation:V}=R.top,U=(0,m.getAnnotationIndexKey)(M,V.term,V.qualifier);let F=c.get(U);if(null===F)return[];if("com.sap.vocabularies.Common.v1.Label"===V.term&&!p)return function(e,t,n,a){e.set(t,null),"com.sap.vocabularies.Common.v1.Label"!==n.term||n.qualifier||e.set((0,m.getAnnotationIndexKey)(a,o.CDS_TERM_NAME_TITLE),null)}(c,U,V,M),[];F=F||{},c.set(U,F);let w=t.valuePath.split(`/${a.INDEX_SEGMENT}`).pop();w=t.annotationValuePaths?.length?w:(0,l.getEffectiveValuePath)(w,b);const L={context:T,targetAnnotation:R,valuePath:w,uiPropDef:t,uiProp:n,changedValue:p,annotationsDiff:c,annotationDiff:F,targetChanges:[]};switch(t.valueType){case a.ValueType.ExpressionValue:!function(e){const{valuePath:t,changedValue:n,context:o,targetAnnotation:i,uiPropDef:p,annotationDiff:c}=e,u=i.top.annotation;let d=t;null===n&&(d=(0,l.getValuePathForRemoval)(o,u,d));if(null===d)return;switch(p.type){case m.UI_PROP_TYPE_TABLE:!function(e,t){const{changedValue:n,uiPropDef:a,annotationDiff:o,uiProp:i}=e,l=a;let p=n;const c=i.rows;0===p.length&&l.optional&&v(o,`${t}`,null);const u=!!l.columns.find((e=>!e.annotationValuePaths?.length&&""===e.valuePath));u&&v(o,`${t}/${s.IS_PRIMITIVE_COLLECTION}`,null);if(l.flatteningPropName){const e=l.columns.filter((e=>e.valuePath.indexOf(l.flatteningPropName)<0)).map((e=>e.name));!function(e,t){const n=e.findIndex((e=>!e.key)),a=n>=0?f(e[n],t):"";if(a){let o=-1;for(const[n,r]of e.entries())r.key&&f(r,t)===a&&(o=n);const i=o>=0?o+1:e.length;i!==n&&(0,r.moveInCollection)(e,n,i)}}(p,e),p=function(e,t){const n=[];let a="",o=-1,r=null;for(const i of e){const e=f(i,t);let[s,l]=i.key?i.key.split("/").map((e=>parseInt(e,10))):[-1,-1];s>-1||(a&&e===a?(s=o,l=-1):(s=-1,l=-1)),a===e&&s===o||(r={key:`${s}`,cells:i.cells,nested:[]},n.push(r),a=e,o=s),r.nested.push({key:`${l}`,cells:i.cells})}return n}(p,e)}for(const[n,a]of p.entries()){const r=a.key?parseInt(a.key,10):-1,i=`${t}/${n}`;u||v(o,`${i}/${s.PREVIOUS_INDEX_PROPERTY_NAME}`,{type:m.ExpressionType.Int,Int:r});if(h(e,y(r,c),a,i,r<0),a.nested?.length){g(e,`${i}/${l.flatteningPropName}`,a,c,o,r)}}}(e,d);break;case m.UI_PROP_TYPE_MULTIPLE_ENUMS:{const e=Array.isArray(n)?n:[n];v(c,d.replace(a.INDEX_SEGMENT,s.IS_PRIMITIVE_COLLECTION),null);for(const[t,n]of e.entries()){const e=_(p.valueExpressionType,n);v(c,d.replace(a.INDEX_SEGMENT,`${t}`),e)}break}default:{let e=n;p.valueExpressionType===m.ExpressionType.EnumMember&&p.allowedValuesPrefix?e=function(e,t,n){let a=n||"";const o=e.allowedValuesPrefix,i=o.split("/")[0];t.vocabularyService.getType(i)?.isFlags?e.type===m.UI_PROP_TYPE_BOOL?("boolean"==typeof n&&1===e.allowedValues?.length?a=o+e.allowedValues[0].value:(0,r.throwError)("Inconsistent change of EnumMember via boolean UI Property"),a=(n?"+":"-")+a):(null!==n&&(a="+"+o+String(a)),e.allowedValues.filter((e=>e.value!==n)).forEach((e=>{a+=" -"+o+e.value}))):a=null===n?null:o+String(a);return a}(p,o,n):p.type===m.UI_PROP_TYPE_BOOL&&p.invertBoolean&&(e=!n),p.invertBoolean&&!0===e&&(e=null),p.type===m.UI_PROP_TYPE_ENUM&&p.valueExpressionType===m.ExpressionType.Bool&&(e="true"===e);v(c,d,_(p.valueExpressionType,e))}}}(L);break;case a.ValueType.PropertyName:!function(e){const{valuePath:t,changedValue:n,context:a,targetAnnotation:o,uiPropDef:r,annotationDiff:i}=e,s=o.top.annotation;for(const e of r.allowedValues){if(e.value===n)continue;let o=t+e.value;o=(0,l.getValuePathForRemoval)(a,s,o),null!==o&&v(i,o,null)}}(L);break;case a.ValueType.AnnotationName:!function(e){const{valuePath:t,changedValue:n,context:a,targetAnnotation:o,uiPropDef:r,annotationsDiff:s}=e,l={valueExpressionType:r.valueExpressionType,allowedValues:r.allowedValues,optional:r.optional},p=(0,i.resolveValuePath)(a,o,t,r.valueType,l);if(!(0,m.isTooComplex)(p)&&!p.isBase&&p.resolvedPathContext?.resultTargetPath)for(const e of r.allowedValues){const t=p.resolvedPathContext.resultTargetPath,o=(0,m.getAnnotationIndexKey)(t,e.value),r=s.get(o)||{},i=e.value===n?r:null;if(s.set(o,i),null!==i){const n={target:t,fileUri:"",annotation:{term:e.value}};a.annotationIndex[o]={isSplit:!1,readonly:!1,top:n,app:[n],base:[]}}}}(L)}return L.targetChanges}function y(e,t){let n=null;if(e>-1){const a=t.find((t=>parseInt(t.key.split("/")[0])===e));n=(0,m.isTooComplex)(a.data)?null:a.data}return n}function g(e,t,n,a,o,r){for(const[i,l]of n.nested.entries()){const n=parseInt(l.key,10),p=`${t}/${i}`;v(o,`${p}/${s.PREVIOUS_INDEX_PROPERTY_NAME}`,{type:m.ExpressionType.Int,Int:n});let c=null;if(n>-1){const e=a.find((e=>e.key===`${r}/${n}`));if(!e)continue;c=(0,m.isTooComplex)(e.data)?null:e.data}h(e,c,l,p,n<0,!0)}}function f(e,t){return t.map((t=>e?.cells?.[t]||"")).join("|")}function h(e,t,n,a,o,r){if(!o&&(!t||(0,l.isEmptyNewRow)(n)))return;const i=e.uiPropDef;let c=null;if(i.rowCallback){const{context:t,targetAnnotation:a}=e,o={context:t,baseEntityType:a.top.target,uiPropDef:i,propertyMap:(0,p.getPropertyToUIPropTypeMap)(t,a)},r={};for(const e of Object.keys(n.cells)){const t=n.cells[e];r[e]={value:t}}c={key:n.key,data:{location:null,cells:r}},i.rowCallback(o,c)}const u=[];for(const l of i.columns){const i=t?.cells[l.name];if((0,m.isTooComplex)(i)&&!l.annotationValuePaths?.length&&""===l.valuePath){const t={type:m.ExpressionType.String,String:s.IS_TOO_COMPLEX};v(e.annotationDiff,a,t);continue}if(P(l,r,i,u))continue;const{cellChanged:d,removeCell:y,newCellValue:g}=T(l.name,i,n,c,u);!d&&l.annotationValuePaths?.length||((0,p.isTextOrTextArrangementColumn)(l)?A(e,a,g,l):E(e,a,g,o,l,y))}}function T(e,t,n,a,r){const i=t,s=(0,o.getCell)(a,e);let l=!1,p=n.cells[e];s?.hidden?(p=null,l=t&&!i.hidden):s?.type&&!t&&""===p&&(p=(0,c.getInitialValueForUiPropType)(s?.type));let u=!1;return i?.value===p||i?.hidden&&!p||(u=!0,r.push(e)),{cellChanged:u,newCellValue:p,removeCell:l}}function P(e,t,n,o){const r=e.valuePath.split("/").includes(a.INDEX_SEGMENT);return!!(!r&&t||r&&!t)||(!!(0,m.isTooComplex)(n)||!!e.dependency?.find((e=>e.reevaluateOnChange&&o.find((t=>e.name===t)))))}function E(e,t,n,a,o,r){let i;if(o.hidden){if(!a||!o.defaultValue)return;i=o.defaultValue}else i=n;if(void 0!==i&&(null!==i||r)&&(o.type===m.UI_PROP_TYPE_ENUM&&i===m.ENUM_VALUE_NONE&&(i=null),!a||null!==i)){const{context:n,targetAnnotation:a,annotationsDiff:r,uiProp:s}=e;d({context:n,layeredAnnotation:a,uiPropertyDefinitions:null},o,s,i,r,t)}}function v(e,t,n){const a=t.split("/").filter((e=>!!e));if(0===a.length&&null!==n)return Object.keys(e).forEach((t=>delete e[t])),e.type=n.type,void(e[n.type]=n[n.type]);const o=a.length-1;let r=e;for(const[e,t]of a.entries())if(!t.startsWith("@")&&t.includes("."))r[s.TYPE_PROPERTY_NAME]=t;else{if(r[t])e===o&&null!==n&&(r[t]=b(r[t],n));else{if(null===r[t]&&null===n)break;r[t]=e===o?n:{}}e<o&&(r=r[t])}}function b(e,t){return e?.type===m.ExpressionType.EnumMember&&t.type===m.ExpressionType.EnumMember&&/[+-]/.test(t.EnumMember||"")?e.EnumMember+=" "+t.EnumMember:e=t,e}function _(e,t){if(!e||null===t)return null;let n;switch(e){case m.ExpressionType.Unknown:{let e=m.ExpressionType.String;return"boolean"==typeof t?e=m.ExpressionType.Bool:"number"==typeof t&&(e=Number.isInteger(t)?m.ExpressionType.Int:m.ExpressionType.Decimal),{type:e,[e]:t}}case m.ExpressionType.AnnotationPath:case m.ExpressionType.EnumMember:case m.ExpressionType.Path:case m.ExpressionType.PropertyPath:case m.ExpressionType.NavigationPropertyPath:case m.ExpressionType.String:n=String(t);break;case m.ExpressionType.Decimal:case m.ExpressionType.Int:n="number"==typeof t?t:parseInt(t,10);break;case m.ExpressionType.Bool:n="boolean"==typeof t?t:"true"===t;break;default:(0,r.throwError)("no valid expression type")}return{type:e,[e]:n}}function A(e,t,n,a){const{context:o,targetAnnotation:r}=e,{textAnno:i,textArrangementAnno:s,targetPath:l,tooComplexData:c}=(0,p.getTextAndTextArrangementAnnoForCell)(o,r,t,a);if(c)return;let m;a.valuePath.indexOf("com.sap.vocabularies.UI.v1.TextArrangement")<0?({targetChanges:m}=(0,u.changeTextReusable)(i,s,l,n)):i&&(m=(0,u.changeTextArrangementReusable)(i,s,n,e.context)),e.targetChanges.push(...m||[])}t.collectPropertyChangesInDiff=d},9690:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildChangesEmbeddedAnnotation=void 0;const a=n(20576),o=n(35586),r=n(9029);t.buildChangesEmbeddedAnnotation=function(e,t,n,i){e.record||(0,o.throwError)("Not supported: embedded annotations outside records");const[s,l]=t.slice(1).split("#"),p=e.record.annotations||[],c=(e.recordOriginal.annotations||[]).findIndex((e=>(0,o.annotationMatch)(e,{term:s,qualifier:l})));if(c<0)return void i.push(...function(e,t,n,o,r){const i=[],s={term:t,value:o};n&&(s.qualifier=n);r.push(s),e.record.annotations||(e.record.annotations=r);return i.push({annotation:null,changeType:a.ChangeType.Insert,content:{type:a.MOD_TYPE_ANNOTATION,value:s},pointer:`${e.path}/record/annotations/${r.length-1}`}),i}(e,s,l,n,p));const u=p.findIndex((e=>(0,o.annotationMatch)(e,{term:s,qualifier:l}))),m=(e.recordBase?.annotations||[]).findIndex((e=>(0,o.annotationMatch)(e,{term:s,qualifier:l}))),d=`/record/annotations/${c}`;if(null===n)i.push(...function(e,t,n,o){const r=[];n>=0?(e.record.annotations[t].value={type:"Null"},r.push({annotation:null,changeType:a.ChangeType.Update,content:{type:a.MOD_TYPE_EXPRESSION,value:{type:"Null"}},pointer:`${e.path}/${o}/value/`})):(e.record.annotations.splice(t,1),r.push({annotation:null,changeType:a.ChangeType.Delete,pointer:`${e.path}/${o}`}));return r}(e,u,m,d));else if((0,r.isPrimitiveExpression)(n)){const a=function(e,t){e.record||(0,o.throwError)("Not yet supported: embedded annotations outside records");const[n,a]=t.slice(1).split("/"),r=(e.record.annotations||[]).findIndex((e=>(0,o.annotationMatch)(e,{term:n,qualifier:a}))),i=e.record.annotations[r],s=e.isAnnotation?"/record":"";return{path:`${e.path}${s}/annotations/${r}`,value:i.value,isAnnotation:!0}}(e,t);i.push(...(0,r.getChangesForChangedPrimitiveExpression)(a,n))}else(0,o.throwError)("Not supported: embedded annotations with non primitive type")}},9029:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInitialValueForUiPropType=t.getInitialValueForExpressionType=t.getPlainValueForComparison=t.groupAndSortChanges=t.getChangesForChangedPrimitiveExpression=t.isEmptyRecord=t.isPrimitiveExpression=t.isCollectionExpression=t.isPrimitiveCollectionExpression=void 0;const a=n(20576),o=n(23635),r=n(20980),i=n(46163);function s(e){return!("string"==typeof e)&&e?.type&&"string"==typeof e.type&&!e.type.includes(".")}t.isPrimitiveCollectionExpression=function(e){return"object"==typeof e&&Object.keys(e).includes(r.IS_PRIMITIVE_COLLECTION)},t.isCollectionExpression=function(e){if("object"!=typeof e)return!1;const t=Object.keys(e);return!(t.length<=0||!/^[0-9]*$/.test(t.join("")))&&!t.find((t=>!e[t][r.PREVIOUS_INDEX_PROPERTY_NAME]))},t.isPrimitiveExpression=s,t.isEmptyRecord=function(e,t){if(null===e||s(e))return!1;if(Object.keys(e||{}).find((t=>t!==r.TYPE_PROPERTY_NAME&&null!==e[t])))return!1;const n=(t?.Record?.propertyValues||[]).filter((e=>!!e.value&&e.value.type!==o.ExpressionType.Null)).map((e=>e.name)),a=new Set(n);return Object.keys(e||{}).forEach((e=>{a.delete(e)})),0===a.size},t.getChangesForChangedPrimitiveExpression=function(e,t){const n=[],o=e.isCollectionEntry?"":"/value";return e.value.type!==t.type?(n.push({annotation:null,changeType:a.ChangeType.Update,content:{type:a.MOD_TYPE_EXPRESSION,value:t},pointer:`${e.path}${o}/`}),e.value.type=t.type,e.value[t.type]=t[t.type]):e.value[t.type]!==t[t.type]&&(n.push({annotation:null,changeType:a.ChangeType.Update,content:{type:a.MOD_TYPE_PRIMITIVE,value:t[t.type],expressionType:t.type},pointer:`${e.path}${o}/${t.type}`}),e.value[t.type]=t[t.type]),n},t.groupAndSortChanges=function(e){e.sort(((e,t)=>t.changeType.localeCompare(e.changeType)||e.pointer.localeCompare(t.pointer)));const t=[];let n;for(const o of e){let e=!0;if(e&&n?.changeType!==a.ChangeType.Delete&&(e=!1),e&&o.changeType!==a.ChangeType.Delete&&(e=!1),e){const t=n.pointer.split("/"),a=t.pop(),r=o.pointer.split("/"),i=r.pop();t.join("/")!==r.join("/")&&(e=!1),!e||/^[0-9]*$/.test(a)&&/^[0-9]*$/.test(i)||(e=!1),e&&parseInt(a,10)+1!==parseInt(i,10)&&(e=!1)}if(e){const e=t[t.length-1],n=e.pointer.split("/");let a=n.pop();if(a.indexOf("-")>0){const[e,t]=a.split("-");a=[e,String(parseInt(t,10)+1)].join("-")}else{a=[a,o.pointer.split("/").pop()].join("-")}e.pointer=[...n,a].join("/")}else t.push(o);n=o}return t},t.getPlainValueForComparison=function(e){let t;if(e&&!(0,o.isTooComplex)(e))if(e.type===o.UI_PROP_TYPE_MULTIPLE_ENUMS)t=(0,i.getNonTooComplexValues)(e.values);else if(e.type===o.UI_PROP_TYPE_ENUM||e.type===o.UI_PROP_TYPE_DEPENDENT_ENUM)t=e.value;else if(e.type===o.UI_PROP_TYPE_STRING){const n=e;t=n.useBase?n.baseValue.value:n.value}else if(e.type===o.UI_PROP_TYPE_NUMBER){const n=e;t=n.useBase?n.baseValue:n.value}else if(e.type===o.UI_PROP_TYPE_DECIMAL){const n=e;t=n.useBase?n.baseValue:n.value}else if(e.type===o.UI_PROP_TYPE_BOOL){const n=e;t=n.useBase?n.baseValue:n.value}else e.type,o.UI_PROP_TYPE_TABLE;return t},t.getInitialValueForExpressionType=function(e){let t=null;return[o.ExpressionType.Int,o.ExpressionType.Decimal,o.ExpressionType.Float].includes(e)?t=0:e===o.ExpressionType.String?t="":e===o.ExpressionType.Bool&&(t=!1),t},t.getInitialValueForUiPropType=function(e){switch(e){case o.UI_PROP_TYPE_BOOL:return!1;case o.UI_PROP_TYPE_NUMBER:case o.UI_PROP_TYPE_DECIMAL:return 0;case o.UI_PROP_TYPE_STRING:return""}return""}},23493:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkProvidedPropertyValue=void 0;const a=n(35586),o=n(79760),r=n(23635);function i(e,t,n,i){const l=i,p=l.rows,c=n;c.forEach((e=>{e.key&&!p.find((t=>t.key===e.key))&&(0,a.throwError)(`Unknown key ${e.key} (table property '${t.name}')`)})),c.length||t.optional||(0,a.throwError)(`At least single row expected for mandatory table property '${t.name}'`);const u=c.filter((e=>!e.key));u.length>1&&(0,a.throwError)(`At most single row can be added at a time (table property '${t.name}', added rows count: ${u.length})`);const m=p.filter((e=>!c.find((t=>t.key===e.key))));if(m.length>1){const e=m.map((e=>e.key)).join(",");(0,a.throwError)(`At most single row can be deleted at a time (table property '${t.name}', deleted rows ${e})`)}t.flatteningPropName&&u.length>0&&m.length>0&&(0,a.throwError)(`Table property '${t.name} uses flattening': no support for insertion and deletion at the same time`);const d=c.filter((e=>""!==e.key)).map((e=>parseInt(e.key,10))),y=d.sort(((e,t)=>e-t));if(d.join(",")!==y.join(",")){const e=d.join(",");(0,a.throwError)(`Reordering not supported (table property '${t.name}', row sequence ${e})`)}!function(e,t,n,i,l){const p=new Set;for(const e of n?.columns||[])p.add(e.name);const c=new Map;t.columns.filter((e=>e.isKeyColumn)).forEach((e=>c.set(e.name,new Set)));for(const[u,m]of l.entries()){const l=i.findIndex((e=>e.key===m.key)),d=(l>-1?i[l]:null)?.data;if(!(0,o.isEmptyNewRow)(m))if((0,r.isTooComplex)(d)||(0,o.isEmptyNewRow)(m))(0,a.throwError)(`Mismatching too complex rows (property '${t.name}', row ${u})`);else{s({context:e,uiPropDef:t,uiPropTable:n,oldRowData:d,newRow:m},u,c,p)}}}(e,t,l,p,c)}function s(e,t,n,o){const{uiPropTable:r,uiPropDef:i,newRow:s}=e;for(const o of r?.columns||[]){const r=l(e,t,o);if(n.has(o.name)&&null!==r){const e=n.get(o.name);e.has(r)&&(0,a.throwError)(`Key column '${o.name}' has duplicate value '${r}'`),e.add(r)}}const p=Object.keys(s.cells).find((e=>!o.has(e)));p&&(0,a.throwError)(`Column '${p}' not allowed for table property '${i.name}' (row ${t})`)}function l(e,t,n){const{context:o,uiPropTable:i,uiPropDef:s,newRow:l,oldRowData:c}=e,u=l.cells[n.name],m=c&&!(0,r.isTooComplex)(c)?c.cells[n.name]:void 0;if((0,r.isTooComplex)(m)){if(null===u||n.type===r.UI_PROP_TYPE_ENUM&&u===r.ENUM_VALUE_NOT_APPLICABLE)return u;(0,a.throwError)(`Column '${n.name}' was too complex (property '${s.name}', row ${t})`)}const{type:d,hidden:y,readonly:g,value:f}=m||{};if(y||g&&!f&&n.name===r.UI_PROP_NAME_TEXT_ARRANGEMENT)return null;null==u&&(0,a.throwError)(`Column '${n.name}' missing for table property '${s.name}' (row ${t})`);const h=s.columns.find((e=>e.name===n.name));if(void 0===m&&u===n.default)return null;if(void 0===m&&(h.dependency||[]).find((e=>!0===e.reevaluateOnChange)))return null;const T=function(e,t,n,a){const o=e.allowedValues?[...e.allowedValues]:[];t?.allowedValues?.length&&o.unshift(...t?.allowedValues||[]);let i;n.allowedPathsOptions?.deepPathsSupported&&(i={id:e.allowedValuesTree?.id||"",nodes:[...e.allowedValuesTree.nodes]});n.type===r.UI_PROP_TYPE_ENUM&&e.allowedValuesKey&&(o.push(...a.allowedValuesMap[e.allowedValuesKey].allowedValues||[]),n.allowedPathsOptions?.deepPathsSupported&&i.nodes.push(...a.allowedValuesMap[e.allowedValuesKey].allowedValuesTree.nodes));return{allowedValues:o,allowedValuesTree:i}}(n,m,h,i);return p(o,h,u,{tooComplex:!1,type:d||h.type,value:m,allowedValues:T.allowedValues,allowedValuesTree:T.allowedValuesTree}),u}function p(e,t,n,o){switch(!(0,r.isTooComplex)(o)&&o?.type?o.type:t.type){case r.UI_PROP_TYPE_BOOL:(0,a.throwIf)("boolean"!=typeof n,`Boolean value expected for changed property '${t.name}', got '${typeof n}'`);break;case r.UI_PROP_TYPE_NUMBER:case r.UI_PROP_TYPE_DECIMAL:(0,a.throwIf)("number"!=typeof n,`Number value expected for changed property '${t.name}', got '${typeof n}'`),(0,a.throwIf)(t.allowedConstantsOptions?.initialNotAllowed&&!n,`Value ${n} not allowed`);break;case r.UI_PROP_TYPE_ENUM:case r.UI_PROP_TYPE_DEPENDENT_ENUM:case r.UI_PROP_TYPE_STRING:(0,a.throwIf)("string"!=typeof n,`String value expected for changed property '${t.name}', got '${typeof n}'`);break;case r.UI_PROP_TYPE_MULTIPLE_ENUMS:(0,a.throwIf)(!Array.isArray(n),`Array of strings expected for changed property '${t.name}', got '${typeof n}'`),(0,a.throwIf)(!n.length&&!t.optional,`At least single value expected for mandatory property '${t.name}' (type: multiple enum values)`);break;case r.UI_PROP_TYPE_TABLE:i(e,t,n,o)}if([r.UI_PROP_TYPE_ENUM,r.UI_PROP_TYPE_MULTIPLE_ENUMS].includes(t.type)){const i=o,s=t.type===r.UI_PROP_TYPE_ENUM?[n]:n;if(!i)return;for(const n of s){let o=!1;o=t.allowedPathsOptions?.deepPathsSupported?!(0,a.expandValueHelpTreeForPath)(e,i.allowedValuesTree,n).errorMessage:!!i.allowedValues.find((e=>e.value===n)),(0,a.throwIf)(!o,`Value '${n}' not allowed for enum property '${t.name}'`)}}}t.checkProvidedPropertyValue=p},46163:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.getUIPropertyDefinitions=t.getDummyRange=t.getUnitsCurrenciesDummyAnnotation=t.getNonTooComplexValues=t.resolveAnnotationValuePath=t.getEffectiveValuePath=t.getPropValueMap=t.getChangedPropertiesMap=t.updateGenericUIProperties=t.buildGenericUIProperties=void 0;var r=n(76089);Object.defineProperty(t,"buildGenericUIProperties",{enumerable:!0,get:function(){return r.buildGenericUIProperties}});var i=n(68850);Object.defineProperty(t,"updateGenericUIProperties",{enumerable:!0,get:function(){return i.updateGenericUIProperties}});var s=n(79760);Object.defineProperty(t,"getChangedPropertiesMap",{enumerable:!0,get:function(){return s.getChangedPropertiesMap}}),Object.defineProperty(t,"getPropValueMap",{enumerable:!0,get:function(){return s.getPropValueMap}}),Object.defineProperty(t,"getEffectiveValuePath",{enumerable:!0,get:function(){return s.getEffectiveValuePath}}),Object.defineProperty(t,"resolveAnnotationValuePath",{enumerable:!0,get:function(){return s.resolveAnnotationValuePath}}),Object.defineProperty(t,"getNonTooComplexValues",{enumerable:!0,get:function(){return s.getNonTooComplexValues}}),Object.defineProperty(t,"getUnitsCurrenciesDummyAnnotation",{enumerable:!0,get:function(){return s.getUnitsCurrenciesDummyAnnotation}}),Object.defineProperty(t,"getDummyRange",{enumerable:!0,get:function(){return s.getDummyRange}}),o(n(20980),t);var l=n(6126);Object.defineProperty(t,"getUIPropertyDefinitions",{enumerable:!0,get:function(){return l.getUIPropertyDefinitions}})},57321:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveValuePathSpecial=t.resolveValuePath=t.getExpressionFromCollectionEntry=t.getExpressionFromAnnotation=t.getValuePathForSteps=t.getStepsForValuePath=t.StepType=void 0;const a=n(41810),o=n(75764),r=n(23635),i=n(46163),s=n(35586);var l;!function(e){e.recordProperty="recordProperty",e.collectionEntry="collectionEntry",e.collectArray="collectArray",e.embeddedAnnotation="embeddedAnnotation"}(l||(t.StepType=l={}));class PathEvaluator{constructor(){this.observers=[],this.reducersMap=new Map,this.registerReducers=e=>{e.forEach((e=>this.reducersMap.set(e.type,e)))},this.registerObservers=e=>{e.forEach((e=>this.observers.push(e)))},this.evaluate=(e,t,n)=>{let a={expression:e,range:t},o=!1;for(const[e,t]of n.entries()){const r=this.reducersMap.get(t.type),{expression:i,range:s}=a;a=r.reduce(i,s,t);for(const e of this.observers)e.observe(t,i,a);if(a.propertyNotFound){o=e===n.length-1;break}if(a.tooComplex)break}return a.propertyNotFound?{...a,notFoundPropertyWasLast:o}:a}}}t.getStepsForValuePath=e=>{const t=[],n=e.split("/").filter((e=>!!e));let a="";for(const e of n)if(/^[0-9]*$/.test(e))t.push({type:l.collectionEntry,index:parseInt(e,10)});else if(e===i.INDEX_SEGMENT)t.push({type:l.collectArray});else if(e.startsWith("@")){const[n,a]=e.substring(1).split("#");t.push({type:l.embeddedAnnotation,term:n,qualifier:a})}else if(e.includes("."))a=e;else{const n={type:l.recordProperty,propertyName:e};a&&(n.recordType=a,a=""),t.push(n)}return t};t.getValuePathForSteps=e=>{const t=[];for(const n of e||[])switch(n.type){case l.collectionEntry:t.push(String(n.index));break;case l.recordProperty:n.recordType&&t.push(n.recordType),t.push(n.propertyName);break;case l.collectArray:t.push(i.INDEX_SEGMENT)}return t.join("/")};class RecordPropertyReducer{constructor(){this.type=l.recordProperty,this.reduce=(e,t,n)=>{if("Record"!==e.type)return{tooComplex:r.TooComplexReason.ConstantExpressionExpected,range:t};if(n.recordType&&e.Record.type&&n.recordType!==e.Record.type)return{tooComplex:r.TooComplexReason.UnsupportedType,range:t};const a=e.Record.propertyValues,o=a.findIndex((e=>e.name===n.propertyName));if(o<0)return{propertyNotFound:!0,range:t};{const t=e.Record.propertyValuesOrigins[o];return{expression:a[o].value,range:t}}}}}class CollectionEntryReducer{constructor(){this.type=l.collectionEntry,this.reduce=(e,t,n)=>{if("Collection"!==e.type)return{tooComplex:r.TooComplexReason.ConstantExpressionExpected,range:t};const a=e.Collection[n.index];if(a){const t=e.collectionOrigins[n.index];return{expression:c(a),range:t}}return{tooComplex:r.TooComplexReason.NoEntryInCollection,range:t}}}}class CollectArrayReducer{constructor(){this.type=l.collectArray,this.reduce=(e,t,n)=>{const a=[];if("Collection"!==e.type)return{tooComplex:r.TooComplexReason.ConstantExpressionExpected,range:t};for(const[t,n]of e.Collection.entries())a.push({expression:c(n),range:e.collectionOrigins[t]});return{expressions:a,range:t}}}}class EmbeddedAnnotationReducer{constructor(){this.type=l.embeddedAnnotation,this.reduce=(e,t,n)=>{if("Record"===e.type){const a=(e.Record.annotations||[]).find((e=>(0,s.annotationMatch)(e,n)));if(a){const e=a.origin;return{expression:p(a),range:e}}return{propertyNotFound:!0,range:t}}(0,s.throwError)("Not supported: embedded annotations outside records")}}}class ResolvedPathContextObserver{constructor(){this.lastPropertyNameSegmentFound=!1,this.observe=(e,t,n)=>{if(n.tooComplex!==r.TooComplexReason.ConstantExpressionExpected&&n.tooComplex!==r.TooComplexReason.UnsupportedType)switch(e.type){case l.collectArray:break;case l.collectionEntry:this.lastCollectionIndex=e.index;break;case l.recordProperty:this.lastCollectionIndex=void 0,this.lastRecord=t.Record,this.lastPropertyNameSegment=e.propertyName,this.lastPropertyNameSegmentFound=this.lastRecord.propertyValues.findIndex((t=>t.name===e.propertyName))>=0;break;case l.embeddedAnnotation:this.lastCollectionIndex=void 0,this.lastRecord=t.Record,this.lastPropertyNameSegment=`@${e.term}${e.qualifier?"#"+e.qualifier:""}`,this.lastPropertyNameSegmentFound=this.lastRecord.annotations?.findIndex((t=>(0,s.annotationMatch)(t,e)))>=0}}}}class CurrentJsonPointerObserver{constructor(){this.isAnnotationContext=!0,this.isCollectionEntryContext=!1,this.currentJsonPointer="",this.pointerToLastRecord="",this.getCollectionSegment=()=>this.isAnnotationContext?"/collection":"/Collection",this.getRecordSegment=()=>this.isAnnotationContext?"/record":this.isCollectionEntryContext?"":"/Record",this.observe=(e,t,n)=>{switch(e.type){case l.collectArray:this.currentJsonPointer+=this.getCollectionSegment(),this.isAnnotationContext=!1;break;case l.collectionEntry:this.currentJsonPointer+=this.getCollectionSegment(),this.currentJsonPointer+=`/${e.index}`,this.isCollectionEntryContext=!0,this.isAnnotationContext=!1;break;case l.recordProperty:if(n.expression){this.currentJsonPointer+=this.getRecordSegment(),this.pointerToLastRecord=this.currentJsonPointer;const n=t.Record.propertyValues.findIndex((t=>t.name===e.propertyName));n>=0&&(this.currentJsonPointer+=`/propertyValues/${n}/value`)}this.isAnnotationContext=!1;break;case l.embeddedAnnotation:if(n.expression){this.currentJsonPointer+=this.getRecordSegment(),this.pointerToLastRecord=this.currentJsonPointer;const n=(t.Record.annotations||[]).findIndex((t=>(0,s.annotationMatch)(t,e)));n>=0&&(this.currentJsonPointer+=`/annotations/${n}`)}this.isAnnotationContext=!0}}}}function p(e){const{value:t,record:n,collection:a,collectionOrigins:o}=e;return t||(n?{type:"Record",Record:n}:a?{type:"Collection",Collection:a,collectionOrigins:o}:{type:r.ExpressionType.Bool,Bool:!0})}function c(e){const t=[r.ExpressionType.Path,r.ExpressionType.PropertyPath,r.ExpressionType.NavigationPropertyPath,r.ExpressionType.AnnotationPath];return"string"==typeof e?{type:"String",String:e}:t.includes(e.type)?e:{type:"Record",Record:e}}function u(e,t,n,a){let o;const i=(0,r.getIncludedExpressionTypes)().get(n.valueExpressionType);if(!e)return{value:r.ENUM_VALUE_NONE};let s=n.valueExpressionType;e.type!==s&&i?.has(e.type)&&(s=e.type);const{tooComplexReason:l,value:p,multilineType:c}=(0,r.getValueFromExpression)(e,s);if(l)throw{tooComplex:(0,r.buildTooComplex)(l,t,a)};switch(s){case r.ExpressionType.EnumMember:o=p.split(" ").map((e=>e.split("/").pop())),1===o.length&&(o=o[0]);break;case r.ExpressionType.Collection:o=function(e,t,n){function a(a,o,i){const s=i.propertyValues.findIndex((e=>e.name===t.flatteningPropName)),l=i.propertyValues[s]?.value;if(l?.type!==r.ExpressionType.Collection||!l?.Collection?.length){const t=e.collectionOrigins[o];throw{tooComplex:(0,r.buildTooComplex)(r.TooComplexReason.EmptyEmbeddedCollection,t,n)}}{const e=l.collectionOrigins;for(const[t,n]of e.entries())a.push(JSON.stringify({key:`${o}/${t}`,range:n}))}}let o;if(t.flatteningPropName&&e.type===r.ExpressionType.Collection){o=[];for(const[t,n]of(e.Collection||[]).entries())a(o,t,n)}else o=(e.collectionOrigins||[]).map(((e,t)=>JSON.stringify({key:`${t}`,range:e})));return o}(e,n,a);break;default:o=p}return{value:o,multilineType:c}}function m(e,t,n,a,o){if("/.."===n)return{value:a===i.ValueType.ExpressionType?r.ExpressionType.Path:""};if(n.startsWith("@")&&a===i.ValueType.AnnotationQualifiers){const{term:a}=(0,r.resolveRelativeAnnotationPath)(n),o=t.top.target;return{value:(0,r.getExistingQualifiers)(e.annotationIndex,o,a,!0).map((e=>(0,r.getAnnotationIndexKey)(o,a,e)))}}return(o?.forBaseValue?t.base?.[0]:t.top)?void 0:{isBase:o?.forBaseValue}}function d(e,t){const n=[];return e?.length&&n.push(...e.map((e=>({range:e.range,fileUri:t})))),n}t.getExpressionFromAnnotation=p,t.getExpressionFromCollectionEntry=c,t.resolveValuePath=function(e,n,s,l,c){const y=m(e,n,s,l,c);if(y)return y;let g=c?.forBaseValue||!n?.app?.length;const f=c?.forBaseValue?n.base?.[0]:n.top,h=f.fileUri,T=p(f.annotation),P=f.annotation.origin,E=new PathEvaluator;E.registerReducers([new RecordPropertyReducer,new CollectionEntryReducer,new CollectArrayReducer,new EmbeddedAnnotationReducer]);const v=new ResolvedPathContextObserver,b=new CurrentJsonPointerObserver;E.registerObservers([v,b]);const _=E.evaluate(T,P,(0,t.getStepsForValuePath)(s)),{tooComplex:A,propertyNotFound:C,notFoundPropertyWasLast:N,range:I}=_,S=C&&n.isSplit?(0,r.getAllLocations)(n):null;if(A)return{tooComplex:(0,r.buildTooComplex)(A,I,h)};if(C&&!N&&!c.optional)return{tooComplex:(0,r.buildTooComplex)(r.TooComplexReason.MissingProperty,I,h,S)};const{expression:x,expressions:O}=_,D=JSON.parse(JSON.stringify(I)),R=S||(D?[{fileUri:h,range:D}]:[]),M={layeredAnnotation:n,lastPropertyNameSegment:v.lastPropertyNameSegment,lastPropertyNameSegmentFound:v.lastPropertyNameSegmentFound,record:v.lastRecord,collectionMemberIndex:v.lastCollectionIndex,pointerToRecord:b.pointerToLastRecord};if(C&&!N&&c.optional)return{isBase:g,value:null,locations:R,resolvedPathContext:M};let V,U,F,w;try{switch(l){case i.ValueType.ExpressionType:V=function(e,t){let n;const a=e?.type;if(a)if(t.allowedValues&&!t.allowedValues.find((e=>e.value===a))){const e=(0,r.getIncludedExpressionTypes)();for(const o of t.allowedValues)if(e.has(o.value)&&e.get(o.value).has(a)){n=o.value;break}n=n||r.ENUM_VALUE_NONE}else n=a;else n=r.ENUM_VALUE_NONE;return n}(x,c);break;case i.ValueType.PropertyName:case i.ValueType.RecordType:V=l===i.ValueType.PropertyName?function(e,t,n,a){let o;if("Record"!==e.type)throw{tooComplex:(0,r.buildTooComplex)(r.TooComplexReason.ConstantExpressionExpected,t,a)};const i=e.Record,s=(i?.propertyValues||[]).filter((e=>e.value.type&&e.value.type!==r.ExpressionType.Null)).map((e=>e.name)),l=(n?.allowedValues||[]).find((e=>s.includes(e.value)));if(l){o=l.value;const e=i?.propertyValues.findIndex((e=>e.name===l.value));e>=0&&({start:t.start,end:t.end}=i.propertyValuesOrigins[e])}else o=r.ENUM_VALUE_NONE;return o}(x,D,c,h):function(e,t,n){if("Record"!==e.type)throw{tooComplex:(0,r.buildTooComplex)(r.TooComplexReason.ConstantExpressionExpected,t,n)};return e.Record?.type||r.ENUM_VALUE_NONE}(x,D,h),M.record=x.Record,M.collectionMemberIndex=void 0,M.pointerToRecord=b.currentJsonPointer+b.getRecordSegment();break;case i.ValueType.ExpressionValue:if(O)V=function(e,t,n){const a=[];for(let o=0;o<e.length;o++){const i=t.valueExpressionType,s=(0,r.getValueFromExpression)(e[o].expression,i);if(s.tooComplexReason)throw{tooComplex:(0,r.buildTooComplex)(s.tooComplexReason,e[o].range,n)};a.push(s.value)}return a}(O,c,h);else{({value:V,multilineType:U}=u(x,D,c,h));const t=(0,r.makeInvalidPathTooComplex)(e,c.valueExpressionType,V,n,{fileUri:h,range:D},c.allowedPathsOptions);if(t)return{isBase:g,tooComplex:t}}break;case i.ValueType.AnnotationName:({resultValue:V,resultLocation:F,resultIsBase:g,resultTargetPath:w}=function(e,t,n,o,i,s){let l,p,c=!1,u="";if(n?.type===r.ExpressionType.Path)u=n.Path;else{if(n?.type!==r.ExpressionType.PropertyPath)throw{tooComplex:(0,r.buildTooComplex)(r.TooComplexReason.PathExpected,o,s)};u=n.PropertyPath}let m=(0,a.getPathBaseMetadataElement)(e.metadataService,t.top.target)?.name;m&&(m=u?`${m}/${u}`:m,m=(0,r.resolveMetadataElement)(e.metadataService,m,!0).path);for(const t of i.allowedValues){const n=(0,r.getAnnotationIndexKey)(m,t.value),a=e.annotationIndex[n],o=a?.top;if(o){if(l)throw{tooComplex:{tooComplex:!0,tooComplexLocations:[p,{fileUri:o.fileUri,range:o.annotation.origin}].map((e=>({...e,reason:r.TooComplexReason.NoValidAnnoCombination})))}};p={fileUri:o.fileUri,range:o.annotation.origin},c=!a.app?.length,l=t.value}}return{resultValue:l||r.ENUM_VALUE_NONE,resultLocation:p,resultIsBase:c,resultTargetPath:m}}(e,n,x,D,c,h)),F&&R.splice(0,o.location.length-1,F),w&&(M.resultTargetPath=w)}if(void 0!==V)return{isBase:g,value:V,multilineType:U,locations:R,resolvedPathContext:M,collectionValuesLocations:d(O,h)}}catch(e){if(e.tooComplex)return{...e,isBase:g,value:null,locations:R,resolvedPathContext:M};throw e}},t.resolveValuePathSpecial=m},56248:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.additionalPropertiesAnalyticalChart=t.extendedPropertiesAnalyticalChart=void 0;const a=n(20980),o=n(23635);t.extendedPropertiesAnalyticalChart=new Map([[o.uiPropertyNames.analyticalChart.type,e=>({...e,valuePath:"/ChartType",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.EnumMember,allowedValues:[{value:"Bar",text:"ChartTypeBar"},{value:"Column",text:"ChartTypeColumn"},{value:"Line",text:"ChartTypeLine"},{value:"Pie",text:"ChartTypePie"},{value:"Donut",text:"ChartTypeRadial"},{value:"HeatMap",text:"ChartTypeHeatMap"},{value:"Bullet",text:"ChartTypeBullet"},{value:"VerticalBullet",text:"ChartTypeVerticalBullet"},{value:"BarStacked",text:"ChartTypeBarStacked"},{value:"ColumnStacked",text:"ChartTypeColumnStacked"},{value:"BarStacked100",text:"ChartTypeBarStacked100"},{value:"ColumnStacked100",text:"ChartTypeColumnStacked100"},{value:"Waterfall",text:"ChartTypeWaterfall"},{value:"HorizontalWaterfall",text:"ChartTypeHorizontalWaterfall"}],allowedValuesPrefix:"com.sap.vocabularies.UI.v1.ChartType/",columns:[]})],[o.uiPropertyNames.analyticalChart.title,e=>({...e,isLanguageDependent:!0,valuePath:"/Title",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.String,columns:[]})]]);const r=e=>[{name:o.uiPropertyNames.analyticalChart.measuresColumns.property,type:o.UI_PROP_TYPE_STRING,isKeyColumn:!0,valuePath:e||"",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.PropertyPath},{name:o.uiPropertyNames.analyticalChart.measuresColumns.label,type:o.UI_PROP_TYPE_STRING,optional:!0,isLanguageDependent:!0,annotationValuePaths:[{path:e||"",term:"com.sap.vocabularies.Common.v1.Label"}],valuePath:"",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.String,defaultValue:"",dependency:[{name:"property",value:"*",reevaluateOnChange:!0}]}],i=()=>[{name:o.uiPropertyNames.analyticalChart.measuresColumns.property,type:o.UI_PROP_TYPE_STRING,isKeyColumn:!0,valuePath:"",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.PropertyPath}];t.additionalPropertiesAnalyticalChart=[{name:"availableMeasures",type:o.UI_PROP_TYPE_TABLE,annotationValuePaths:[{path:"/..",term:"Org.OData.Aggregation.V1.ApplySupported"}],valuePath:"/AggregatableProperties",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.Collection,columns:r("/Property")},{name:"availableDimensions",type:o.UI_PROP_TYPE_TABLE,annotationValuePaths:[{path:"/..",term:"Org.OData.Aggregation.V1.ApplySupported"}],valuePath:"/GroupableProperties",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.Collection,columns:[...r(),{name:"text",type:o.UI_PROP_TYPE_ENUM,optional:!0,defaultValue:o.ENUM_VALUE_NONE,dependency:[{name:"property",value:"*",reevaluateOnChange:!0}],annotationValuePaths:[{path:"",term:"com.sap.vocabularies.Common.v1.Text"}],valuePath:"",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.Path,allowedPathsOptions:{directPropertiesOnly:!0,allowedTypes:new Set([o.ExpressionType.String])}},{name:"textArrangement",type:o.UI_PROP_TYPE_ENUM,optional:!0,defaultValue:o.ENUM_VALUE_NOT_APPLICABLE,allowedValues:[],dependency:[{name:"text",value:"*",reevaluateOnChange:!0}],annotationValuePaths:[{path:"",term:"com.sap.vocabularies.Common.v1.Text"}],valuePath:"/@com.sap.vocabularies.UI.v1.TextArrangement",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.EnumMember,allowedValuesPrefix:"com.sap.vocabularies.UI.v1.TextArrangementType/"}]},{name:"defaultMeasures",type:o.UI_PROP_TYPE_TABLE,optional:!0,valuePath:"/Measures",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.Collection,columns:i()},{name:"defaultDimensions",type:o.UI_PROP_TYPE_TABLE,valuePath:"/Dimensions",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.Collection,columns:i()},{name:"availableDynamicMeasures",type:o.UI_PROP_TYPE_TABLE,annotationValuePaths:[{path:"/.."}],valuePath:"@com.sap.vocabularies.Analytics.v1.AggregatedProperty",valueType:a.ValueType.AnnotationQualifiers,columns:[{name:o.uiPropertyNames.analyticalChart.measuresColumns.property,type:o.UI_PROP_TYPE_STRING,valuePath:"/Name",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.String},{name:o.uiPropertyNames.analyticalChart.measuresColumns.label,type:o.UI_PROP_TYPE_STRING,optional:!0,isLanguageDependent:!0,valuePath:"/@com.sap.vocabularies.Common.v1.Label",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.String,defaultValue:""},{name:o.uiPropertyNames.analyticalChart.measuresColumns.aggregatableProperty,type:o.UI_PROP_TYPE_STRING,valuePath:"/AggregatableProperty",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.PropertyPath},{name:o.uiPropertyNames.analyticalChart.measuresColumns.aggregationMethod,type:o.UI_PROP_TYPE_STRING,valuePath:"/AggregationMethod",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.String}]},{name:"defaultDynamicMeasures",type:o.UI_PROP_TYPE_TABLE,optional:!0,valuePath:"/DynamicMeasures",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.Collection,columns:[{name:o.uiPropertyNames.analyticalChart.measuresColumns.property,type:o.UI_PROP_TYPE_STRING,annotationValuePaths:[{path:"",term:"com.sap.vocabularies.Analytics.v1.AggregatedProperty"}],valuePath:"/Name",valueType:a.ValueType.ExpressionValue,valueExpressionType:o.ExpressionType.String}]}]},61403:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesBasicDPValue=void 0;const a=n(23635),o=n(20980);t.extendedPropertiesBasicDPValue=new Map([[a.uiPropertyNames.basicDataPointValue.value,e=>({...e,valuePath:"/Value",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,readonly:!0,readonlyTooltip:"ReadonlyTooltipDataPointValue",allowedPathsOptions:{deepPathsSupported:!0,suppressedTypes:new Set([a.ExpressionType.Unknown,a.ExpressionType.Bool])},columns:[]})]])},43843:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UI_PROPERTY_CHART_TYPE=t.extendedPropertiesChart=void 0;const a=n(23635),o=n(20980),r=n(96859);t.extendedPropertiesChart=new Map([[a.uiPropertyNames.chart.chartType,e=>({...e,readonly:!0,readonlyTooltip:"ReadonlyTooltipMicroChartType",valuePath:"/ChartType",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.EnumMember,allowedValues:[{value:"Area",text:"ChartTypeArea"},{value:"Bullet",text:"ChartTypeBullet"},{value:"Line",text:"ChartTypeLine"},{value:"Donut",text:"ChartTypeRadial"}],allowedValuesPrefix:"com.sap.vocabularies.UI.v1.ChartType/",columns:[]})],[a.uiPropertyNames.chart.value,e=>({...e,readonly:!0,readonlyTooltip:"ReadonlyTooltipMicroChartValue",valuePath:"/Measures/0",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.PropertyPath,allowedPathsOptions:{deepPathsSupported:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float])},columns:[]})],[a.uiPropertyNames.chart.valueToN,e=>({...e,readonly:!0,readonlyTooltip:"ReadonlyTooltipMicroChartValue",valuePath:"/Measures/0",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.PropertyPath,allowedPathsOptions:{allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float]),toManyAssociationsOnly:!0},columns:[]})],[a.uiPropertyNames.chart.values,e=>({...e,valuePath:`/Measures/${o.INDEX_SEGMENT}`,valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.PropertyPath,allowedPathsOptions:{allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float]),toManyAssociationsOnly:!0,deepPathsSupported:!1,directPropertiesOnly:!0},handler:new r.UiPropertyHandlerChart,columns:[]})],[a.uiPropertyNames.chart.dimension,e=>({...e,valuePath:"/Dimensions/0",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.PropertyPath,allowedPathsOptions:{allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float]),toManyAssociationsOnly:!0,deepPathsSupported:!1,directPropertiesOnly:!0},columns:[]})],[a.uiPropertyNames.chart.targetValue,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/TargetValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float])},columns:[]})],[a.uiPropertyNames.chart.targetValueRadial,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/TargetValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float])},columns:[]})],[a.uiPropertyNames.chart.targetValueToN,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/TargetValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{toManyAssociationsOnly:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float])},columns:[]})],[a.uiPropertyNames.chart.maximumValueType,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/MaximumValue",valueType:o.ValueType.ExpressionType,allowedValues:[{value:"Path",text:"DecimalProperty"},{value:"Decimal",text:"DecimalNumber"}],columns:[]})],[a.uiPropertyNames.chart.maximumValuePath,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/MaximumValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Decimal])},columns:[]})],[a.uiPropertyNames.chart.maximumValueDecimal,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/MaximumValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Decimal,columns:[]})],[a.uiPropertyNames.chart.minimumValueType,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/MinimumValue",valueType:o.ValueType.ExpressionType,allowedValues:[{value:"Path",text:"DecimalProperty"},{value:"Decimal",text:"DecimalNumber"}],columns:[]})],[a.uiPropertyNames.chart.minimumValuePath,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/MinimumValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Decimal])},columns:[]})],[a.uiPropertyNames.chart.minimumValueDecimal,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/MinimumValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Decimal,columns:[]})],[a.uiPropertyNames.chart.forecastValue,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/ForecastValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float])},columns:[]})],[a.uiPropertyNames.chart.criticalitySource,e=>({...e,optional:!0,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/",valueType:o.ValueType.PropertyName,allowedValues:[{value:"Criticality",text:"Property"},{value:"CriticalityCalculation",text:"Calculation"}],columns:[]})],[a.uiPropertyNames.chart.criticality,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/Criticality",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Int])},columns:[]})],[a.uiPropertyNames.chart.improvementDirection,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/CriticalityCalculation/ImprovementDirection",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.EnumMember,allowedValues:["Minimize","Maximize","Target"].map((e=>({value:e,text:e}))),allowedValuesPrefix:"com.sap.vocabularies.UI.v1.ImprovementDirectionType/",columns:[]})],[a.uiPropertyNames.chart.deviationLowValue,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/CriticalityCalculation/DeviationRangeLowValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float])},columns:[]})],[a.uiPropertyNames.chart.toleranceLowValue,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/CriticalityCalculation/ToleranceRangeLowValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float])},columns:[]})],[a.uiPropertyNames.chart.deviationHighValue,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/CriticalityCalculation/DeviationRangeHighValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float])},columns:[]})],[a.uiPropertyNames.chart.toleranceHighValue,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/CriticalityCalculation/ToleranceRangeHighValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float])},columns:[]})],[a.uiPropertyNames.chart.criticalitySourceRadial,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/",valueType:o.ValueType.PropertyName,allowedValues:[{value:"Criticality",text:"Property"},{value:"CriticalityCalculation",text:"Calculation"}],columns:[]})],[a.uiPropertyNames.chart.criticalityRadial,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/Criticality",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Int])},columns:[]})],[a.uiPropertyNames.chart.improvementDirectionRadial,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/CriticalityCalculation/ImprovementDirection",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.EnumMember,allowedValues:["Minimize","Maximize"].map((e=>({value:e,text:e}))),allowedValuesPrefix:"com.sap.vocabularies.UI.v1.ImprovementDirectionType/",columns:[]})],[a.uiPropertyNames.chart.deviationLowValueRadial,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/CriticalityCalculation/DeviationRangeLowValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float])},columns:[]})],[a.uiPropertyNames.chart.toleranceLowValueRadial,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/CriticalityCalculation/ToleranceRangeLowValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float])},columns:[]})],[a.uiPropertyNames.chart.deviationHighValueRadial,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/CriticalityCalculation/DeviationRangeHighValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float])},columns:[]})],[a.uiPropertyNames.chart.toleranceHighValueRadial,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint"}],valuePath:"/CriticalityCalculation/ToleranceRangeHighValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float])},columns:[]})]]),t.UI_PROPERTY_CHART_TYPE="chartType"},31368:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesContact=void 0;const a=n(23635),o=n(20980),r="com.sap.vocabularies.Communication.v1.ContactInformationType",i="com.sap.vocabularies.Communication.v1.PhoneType";t.extendedPropertiesContact=new Map([[a.uiPropertyNames.contact.fullName,e=>({...e,readonly:!0,readonlyTooltip:"ReadonlyTooltipContactFullName",valuePath:"/fn",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,allowedTypes:new Set([a.ExpressionType.String])},columns:[]})],[a.uiPropertyNames.contact.title,e=>({...e,valuePath:"/title",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,allowedTypes:new Set([a.ExpressionType.String])},columns:[]})],[a.uiPropertyNames.contact.photo,e=>({...e,valuePath:"/photo",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,allowedTypes:new Set([a.ExpressionType.String])},columns:[]})],[a.uiPropertyNames.contact.role,e=>({...e,valuePath:"/role",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,allowedTypes:new Set([a.ExpressionType.String])},columns:[]})],[a.uiPropertyNames.contact.org,e=>({...e,valuePath:"/org",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,allowedTypes:new Set([a.ExpressionType.String])},columns:[]})],[a.uiPropertyNames.contact.tel,e=>({...e,valuePath:"/tel",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Collection,columns:[{...e.columns[0],valuePath:"/com.sap.vocabularies.Communication.v1.PhoneNumberType/uri",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,allowedTypes:new Set([a.ExpressionType.String])}},{...e.columns[1],valuePath:"/com.sap.vocabularies.Communication.v1.PhoneNumberType/type",defaultValue:"work",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.EnumMember,allowedValues:[{value:"work",text:"Work"},{value:"cell",text:"Mobil"},{value:"fax",text:"Fax"}],allowedValuesPrefix:`${i}/`},{...e.columns[2],valuePath:"/com.sap.vocabularies.Communication.v1.PhoneNumberType/type",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.EnumMember,allowedValues:[{value:"preferred"}],allowedValuesPrefix:`${i}/`}]})],[a.uiPropertyNames.contact.email,e=>({...e,valuePath:"/email",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Collection,columns:[{...e.columns[0],valuePath:"/com.sap.vocabularies.Communication.v1.EmailAddressType/address",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,allowedTypes:new Set([a.ExpressionType.String])}},{...e.columns[1],hidden:!0,valuePath:"/com.sap.vocabularies.Communication.v1.EmailAddressType/type",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.EnumMember,allowedValues:[{value:"work"}],allowedValuesPrefix:`${r}/`},{...e.columns[2],valuePath:"/com.sap.vocabularies.Communication.v1.EmailAddressType/type",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.EnumMember,allowedValues:[{value:"preferred"}],allowedValuesPrefix:`${r}/`}]})],[a.uiPropertyNames.contact.adr,e=>({...e,valuePath:"/adr",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Collection,columns:[{...e.columns[0],valuePath:"/com.sap.vocabularies.Communication.v1.AddressType/street",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,allowedTypes:new Set([a.ExpressionType.String])}},{...e.columns[1],valuePath:"/com.sap.vocabularies.Communication.v1.AddressType/locality",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,allowedTypes:new Set([a.ExpressionType.String])}},{...e.columns[2],valuePath:"/com.sap.vocabularies.Communication.v1.AddressType/region",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,allowedTypes:new Set([a.ExpressionType.String])}},{...e.columns[3],valuePath:"/com.sap.vocabularies.Communication.v1.AddressType/code",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,allowedTypes:new Set([a.ExpressionType.String])}},{...e.columns[4],valuePath:"/com.sap.vocabularies.Communication.v1.AddressType/country",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,allowedTypes:new Set([a.ExpressionType.String])}},{...e.columns[5],hidden:!0,valuePath:"/com.sap.vocabularies.Communication.v1.AddressType/type",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.EnumMember,allowedValues:[{value:"work"}],allowedValuesPrefix:`${r}/`}]})]])},93163:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesActionCriticality=t.extendedPropertiesCriticality=void 0;const a=n(23635),o=n(20980);t.extendedPropertiesCriticality=new Map([[a.uiPropertyNames.criticality.criticality,e=>({...e,valuePath:`${o.CURRENT_UI_NODE_PATH}/Criticality`,valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Int])},columns:[]})],[a.uiPropertyNames.criticality.criticalityRepresentation,e=>({...e,valuePath:`${o.CURRENT_UI_NODE_PATH}/CriticalityRepresentation`,valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.EnumMember,allowedValues:[{value:"WithIcon",text:"CriticalityRepresentationWithIcon"},{value:"WithoutIcon",text:"CriticalityRepresentationWithoutIcon"}],allowedValuesPrefix:"com.sap.vocabularies.UI.v1.CriticalityRepresentationType/",columns:[]})]]);t.extendedPropertiesActionCriticality=new Map([[a.uiPropertyNames.criticality.actionCriticality,e=>({...e,valuePath:`${o.CURRENT_UI_NODE_PATH}/Criticality`,valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.EnumMember,allowedValues:[{value:"Positive",text:"ActionCriticalityPositive"},{value:"Negative",text:"ActionCriticalityNegative"}],allowedValuesPrefix:"com.sap.vocabularies.UI.v1.CriticalityType/",columns:[]})]])},36002:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesDisplayOnDemand=void 0;const a=n(23635),o=n(20980);t.extendedPropertiesDisplayOnDemand=new Map([[a.uiPropertyNames.displayOnDemand.displayOnDemand,e=>({...e,valuePath:`${o.CURRENT_UI_NODE_PATH}/@com.sap.vocabularies.UI.v1.PartOfPreview`,valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Bool,invertBoolean:!0,columns:[]})]])},64024:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesDataPointValue=void 0;const a=n(23635),o=n(20980);t.extendedPropertiesDataPointValue=new Map([[a.uiPropertyNames.dataPointValue.value,e=>({...e,valuePath:"/Value",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,readonly:!0,readonlyTooltip:"ReadonlyTooltipDataPointValue",allowedPathsOptions:{deepPathsSupported:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float])},columns:[]})]])},87619:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesGrouping=t.UI_PROP_NAME_PREFIX_GROUPING=void 0;const a=n(23635),o=n(20980);function r(e){const{valuePath:t,annotationValuePaths:n}=function(e){switch(e){case a.PresentationVariantPathKind.SPV:return{valuePath:"/PresentationVariant/GroupBy"};case a.PresentationVariantPathKind.PV:return{valuePath:"/GroupBy"};case a.PresentationVariantPathKind.SPV_PV:return{valuePath:"/GroupBy",annotationValuePaths:[{path:"/PresentationVariant",term:"com.sap.vocabularies.UI.v1.PresentationVariant"}]}}}(e);return e=>({...e,annotationRole:o.AnnotationRole.configuredAnnotation,annotationValuePaths:n,valuePath:t,valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Collection,columns:[{...e.columns[0],valuePath:"",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.PropertyPath,allowedPathsOptions:{directPropertiesOnly:!0}},{...e.columns[1],isLanguageDependent:!0,annotationValuePaths:[{path:"",term:"com.sap.vocabularies.Common.v1.Label"}],valuePath:"",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String},{...e.columns[2],annotationValuePaths:[{path:"",term:"com.sap.vocabularies.Common.v1.Text"}],valuePath:"",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,defaultValue:a.ENUM_VALUE_NONE,allowedPathsOptions:{allowedTypes:new Set([a.ExpressionType.String])}},{...e.columns[3],annotationValuePaths:[{path:"",term:"com.sap.vocabularies.Common.v1.Text"}],valuePath:"/@com.sap.vocabularies.UI.v1.TextArrangement",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.EnumMember,allowedValues:[],allowedValuesPrefix:"com.sap.vocabularies.UI.v1.TextArrangementType/"}]})}t.UI_PROP_NAME_PREFIX_GROUPING="grouping";const i=[a.PresentationVariantPathKind.SPV,a.PresentationVariantPathKind.PV,a.PresentationVariantPathKind.SPV_PV];t.extendedPropertiesGrouping=new Map,i.forEach((e=>{const n=`${t.UI_PROP_NAME_PREFIX_GROUPING}${e}`;t.extendedPropertiesGrouping.set(n,r(e))}))},39409:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesHeaderInfo=void 0;const a=n(23635),o=n(20980);t.extendedPropertiesHeaderInfo=new Map([[a.uiPropertyNames.headerInfo.typeName,e=>({...e,valuePath:"/TypeName",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,columns:[]})],[a.uiPropertyNames.headerInfo.typeNamePlural,e=>({...e,valuePath:"/TypeNamePlural",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,columns:[]})],[a.uiPropertyNames.headerInfo.title,e=>({...e,valuePath:"/Title/com.sap.vocabularies.UI.v1.DataField/Value",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,suppressedTypes:new Set([a.ExpressionType.Bool])},columns:[]})],[a.uiPropertyNames.headerInfo.descriptionType,e=>({...e,valuePath:"/Description/com.sap.vocabularies.UI.v1.DataField/Value",valueType:o.ValueType.ExpressionType,allowedValues:[{value:a.ExpressionType.Path,text:"Property"},{value:a.ExpressionType.String,text:"Text"}],columns:[]})],[a.uiPropertyNames.headerInfo.descriptionPath,e=>({...e,valuePath:"/Description/com.sap.vocabularies.UI.v1.DataField/Value",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,suppressedTypes:new Set([a.ExpressionType.Bool])},columns:[]})],[a.uiPropertyNames.headerInfo.descriptionString,e=>({...e,valuePath:"/Description/com.sap.vocabularies.UI.v1.DataField/Value",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,isLanguageDependent:!0,columns:[]})],[a.uiPropertyNames.headerInfo.imageUrl,e=>({...e,valuePath:"/ImageUrl",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{allowedTypes:new Set([a.ExpressionType.String])},columns:[]})],[a.uiPropertyNames.headerInfo.initials,e=>({...e,valuePath:"/Initials",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{allowedTypes:new Set([a.ExpressionType.String])},columns:[]})],[a.uiPropertyNames.headerInfo.typeImageUrl,e=>({...e,valuePath:"/TypeImageUrl",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,isLanguageDependent:!1,columns:[]})]])},6126:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUIPropertyDefinitions=void 0;const a=n(23635),o=n(70704),r=n(93457),i=n(50639),s=n(26944),l=n(39409),p=n(43843),c=n(93163),u=n(79127),m=n(31368),d=n(56248),y=n(36002),g=n(69879),f=n(51573),h=n(14896),T=n(87619),P=n(31371),E=n(61403),v=n(64024),b=n(98343),_=n(75447),A=n(74588),C=n(53650);let N;function I(e,t,n){const a=[];for(const n of e.propertyNames)if(t.has(n)){const o=t.get(n),r=e.propertyMap[n];a.push(o(r))}return n?.length&&a.push(...n),a}t.getUIPropertyDefinitions=function(e,t){return(0,a.getUIPropertyDefinitionsGeneric)(function(){function e(e,t){const n={propertyNames:[],propertyMap:{}};e.forEach((e=>{n.propertyNames.push(e.name),n.propertyMap[e.name]=function(e){const t=o.i18n.t.bind(o.i18n),n=(e,n,a)=>{e[n]&&(e[n]=a?a(e[n]):t(e[n]))};for(const t of e.allowedValues||[])n(t,"text");for(const t of e.columns||[])for(const e of t.allowedValues||[])n(e,"text");return e}(e)})),N.set(t,n)}if(N)return N;const t=new Map([[a.UIPropertyDefinitionsGroup.analyticalChart,{extendedProperties:d.extendedPropertiesAnalyticalChart,additionalProperties:d.additionalPropertiesAnalyticalChart}],[a.UIPropertyDefinitionsGroup.criticality,{extendedProperties:c.extendedPropertiesCriticality}],[a.UIPropertyDefinitionsGroup.actionCriticality,{extendedProperties:c.extendedPropertiesActionCriticality}],[a.UIPropertyDefinitionsGroup.chart,{extendedProperties:p.extendedPropertiesChart}],[a.UIPropertyDefinitionsGroup.sorting,{extendedProperties:h.extendedPropertiesSorting}],[a.UIPropertyDefinitionsGroup.labelAndDescription,{extendedProperties:r.extendedPropertiesLabelAndDescription}],[a.UIPropertyDefinitionsGroup.targetValue,{extendedProperties:i.extendedPropertiesTargetValue}],[a.UIPropertyDefinitionsGroup.tooltip,{extendedProperties:s.extendedPropertiesTooltip}],[a.UIPropertyDefinitionsGroup.headerInfo,{extendedProperties:l.extendedPropertiesHeaderInfo}],[a.UIPropertyDefinitionsGroup.measures,{extendedProperties:u.extendedPropertiesMeasures}],[a.UIPropertyDefinitionsGroup.contact,{extendedProperties:m.extendedPropertiesContact}],[a.UIPropertyDefinitionsGroup.displayOnDemand,{extendedProperties:y.extendedPropertiesDisplayOnDemand}],[a.UIPropertyDefinitionsGroup.ratingTarget,{extendedProperties:g.extendedPropertiesRatingTarget}],[a.UIPropertyDefinitionsGroup.text,{extendedProperties:f.extendedPropertiesText}],[a.UIPropertyDefinitionsGroup.grouping,{extendedProperties:T.extendedPropertiesGrouping}],[a.UIPropertyDefinitionsGroup.selection,{extendedProperties:P.extendedPropertiesSelection}],[a.UIPropertyDefinitionsGroup.basicDataPointValue,{extendedProperties:E.extendedPropertiesBasicDPValue}],[a.UIPropertyDefinitionsGroup.dataPointValue,{extendedProperties:v.extendedPropertiesDataPointValue}],[a.UIPropertyDefinitionsGroup.numberFormatting,{extendedProperties:b.extendedPropertiesNumberFormatting}],[a.UIPropertyDefinitionsGroup.valueHelp,{extendedProperties:_.extendedPropertiesValueHelp}],[a.UIPropertyDefinitionsGroup.navigation,{extendedProperties:A.extendedPropertiesNavigation}],[a.UIPropertyDefinitionsGroup.semanticObject,{extendedProperties:C.extendedPropertiesSemanticObject}]]),n=(0,a.readUIPropertyDefinitions)();N=new Map;for(const[a,o]of t){e(I(n.get(a),o.extendedProperties,o.additionalProperties),a)}return N}(),e,t)}},93457:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesLabelAndDescription=void 0;const a=n(23635),o=n(20980);t.extendedPropertiesLabelAndDescription=new Map([[a.uiPropertyNames.labelAndDescription.title,e=>({...e,isLanguageDependent:!0,valuePath:"/Title",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,columns:[]})],[a.uiPropertyNames.labelAndDescription.description,e=>({...e,isLanguageDependent:!0,valuePath:"/Description",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,columns:[]})]])},79127:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesMeasures=void 0;const a=n(23635),o=n(20980);t.extendedPropertiesMeasures=new Map([[a.uiPropertyNames.measures.measuresType,e=>({...e,annotationRole:o.AnnotationRole.unitsCurrencies,readonlyIfBaseValue:!0,readonlyTooltip:"ReadonlyTooltipMeasureUnitOnBase",valuePath:`${o.CURRENT_UI_NODE_PATH}/Value`,valueType:o.ValueType.AnnotationName,allowedValues:[{value:"Org.OData.Measures.V1.ISOCurrency",text:"Currency"},{value:"Org.OData.Measures.V1.Unit",text:"Unit"}],columns:[]})],[a.uiPropertyNames.measures.currencyType,e=>({...e,annotationRole:o.AnnotationRole.unitsCurrencies,readonlyIfBaseValue:!0,readonlyTooltip:"ReadonlyTooltipMeasureUnitOnBase",annotationValuePaths:[{path:`${o.CURRENT_UI_NODE_PATH}/Value`,term:"Org.OData.Measures.V1.ISOCurrency"}],valuePath:"",valueType:o.ValueType.ExpressionType,allowedValues:[{value:a.ExpressionType.Path,text:"StringProperty"},{value:a.ExpressionType.String,text:"StringValue"}],columns:[]})],[a.uiPropertyNames.measures.currencyString,e=>({...e,annotationRole:o.AnnotationRole.unitsCurrencies,readonlyIfBaseValue:!0,readonlyTooltip:"ReadonlyTooltipMeasureUnitOnBase",annotationValuePaths:[{path:`${o.CURRENT_UI_NODE_PATH}/Value`,term:"Org.OData.Measures.V1.ISOCurrency"}],valuePath:"",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,isLanguageDependent:!1,allowedConstantsOptions:{initialNotAllowed:!0},columns:[]})],[a.uiPropertyNames.measures.currencyProperty,e=>({...e,annotationRole:o.AnnotationRole.unitsCurrencies,readonlyIfBaseValue:!0,readonlyTooltip:"ReadonlyTooltipMeasureUnitOnBase",annotationValuePaths:[{path:`${o.CURRENT_UI_NODE_PATH}/Value`,term:"Org.OData.Measures.V1.ISOCurrency"}],valuePath:"",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{allowedTypes:new Set([a.ExpressionType.String])},columns:[]})],[a.uiPropertyNames.measures.unitType,e=>({...e,annotationRole:o.AnnotationRole.unitsCurrencies,readonlyIfBaseValue:!0,readonlyTooltip:"ReadonlyTooltipMeasureUnitOnBase",annotationValuePaths:[{path:`${o.CURRENT_UI_NODE_PATH}/Value`,term:"Org.OData.Measures.V1.Unit"}],valuePath:"",valueType:o.ValueType.ExpressionType,allowedValues:[{value:a.ExpressionType.Path,text:"StringProperty"},{value:a.ExpressionType.String,text:"StringValue"}],columns:[]})],[a.uiPropertyNames.measures.unitString,e=>({...e,annotationRole:o.AnnotationRole.unitsCurrencies,readonlyIfBaseValue:!0,readonlyTooltip:"ReadonlyTooltipMeasureUnitOnBase",annotationValuePaths:[{path:`${o.CURRENT_UI_NODE_PATH}/Value`,term:"Org.OData.Measures.V1.Unit"}],valuePath:"",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,isLanguageDependent:!1,allowedConstantsOptions:{initialNotAllowed:!0},columns:[]})],[a.uiPropertyNames.measures.unitProperty,e=>({...e,annotationRole:o.AnnotationRole.unitsCurrencies,readonlyIfBaseValue:!0,readonlyTooltip:"ReadonlyTooltipMeasureUnitOnBase",annotationValuePaths:[{path:`${o.CURRENT_UI_NODE_PATH}/Value`,term:"Org.OData.Measures.V1.Unit"}],valuePath:"",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{allowedTypes:new Set([a.ExpressionType.String])},columns:[]})]])},74588:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesNavigation=void 0;const a=n(23635),o=n(20980);t.extendedPropertiesNavigation=new Map([[a.uiPropertyNames.navigation.semanticObjectName,e=>({...e,isLanguageDependent:!1,valuePath:`${o.CURRENT_UI_NODE_PATH}/SemanticObject`,valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,columns:[]})],[a.uiPropertyNames.navigation.semanticObjectAction,e=>({...e,isLanguageDependent:!1,valuePath:`${o.CURRENT_UI_NODE_PATH}/Action`,valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,columns:[]})],[a.uiPropertyNames.navigation.mapping,e=>({...e,valuePath:`${o.CURRENT_UI_NODE_PATH}/Mapping`,optional:!0,valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Collection,columns:[{...e.columns[0],valuePath:"/com.sap.vocabularies.Common.v1.SemanticObjectMappingType/SemanticObjectProperty",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String},{...e.columns[1],valuePath:"/com.sap.vocabularies.Common.v1.SemanticObjectMappingType/LocalProperty",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.PropertyPath,allowedPathsOptions:{directPropertiesOnly:!0}}]})],[a.uiPropertyNames.navigation.requiresContext,e=>({...e,valuePath:`${o.CURRENT_UI_NODE_PATH}/RequiresContext`,valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Bool,defaultValue:!1,columns:[]})]])},98343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesNumberFormatting=void 0;const a=n(23635),o=n(20980),r=n(91310);t.extendedPropertiesNumberFormatting=new Map([[a.uiPropertyNames.numberFormatting.digits,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint",creationCallback:r.dataPointCreationCallback}],valuePath:"/ValueFormat/NumberOfFractionalDigits",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Int,columns:[]})],[a.uiPropertyNames.numberFormatting.scaleFactor,e=>({...e,annotationValuePaths:[{path:"/MeasureAttributes/0/DataPoint",term:"com.sap.vocabularies.UI.v1.DataPoint",creationCallback:r.dataPointCreationCallback}],valuePath:"/ValueFormat/ScaleFactor",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Decimal,columns:[]})]])},69879:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesRatingTarget=void 0;const a=n(23635),o=n(20980);t.extendedPropertiesRatingTarget=new Map([[a.uiPropertyNames.ratingTarget.targetValue,e=>({...e,valuePath:"/TargetValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Int,allowedConstantsOptions:{initialNotAllowed:!0},columns:[]})]])},31371:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesSelection=void 0;const a=n(20980),o=n(70704),r=n(48263),i=n(23635),s=(e,t)=>{const{value:n,type:a}=e;if(null==n)return null;let o=!0;if(a===i.UI_PROP_TYPE_BOOL&&"boolean"==typeof n||a===i.UI_PROP_TYPE_NUMBER&&"number"==typeof n&&Number.isInteger(n)||a===i.UI_PROP_TYPE_DECIMAL&&"number"==typeof n?o=!1:a&&a!==i.UI_PROP_TYPE_STRING||"string"!=typeof n||(o=!1),o){return{tooComplex:o,tooComplexLocations:[{...e.location||t,reason:i.TooComplexReason.UnsupportedConstantExpression}]}}return null},l=(e,t)=>{if((0,i.isTooComplex)(t.data))return;if((0,i.isTooComplex)(t.data.cells.property))return t.data=t.data.cells.property,void(t.rowTitle=o.i18n.t("SelectionRowTitleUnsupportedPath"));const n=parseInt(t.key,10)<0,a=(0,r.getCellValue)(t,"option"),l=(0,r.getCell)(t,"low");"BT"!==a&&"NB"!==a||(l.title=o.i18n.t("SelectOptionLowValue"));const{uiPropDef:p,propertyMap:c}=e,u=t.data.location,m=(0,r.getCellValue)(t,"property");if(null===m)return;const d=c.get(m);d!==p.columns.find((e=>"low"===e.name)).type&&(l.type=d),n||(t.data.cells.low=s(l,u)||l);const y=(0,r.getCell)(t,"high");if(!y)return;const g=p.columns.find((e=>"high"===e.name));d!==g.type&&(y.type=d);const f=!["BT","NB"].includes(a);f!==!!g.hidden&&(y.hidden=f,y.value=(e=>{switch(e){case i.UI_PROP_TYPE_BOOL:return!1;case i.UI_PROP_TYPE_NUMBER:case i.UI_PROP_TYPE_DECIMAL:return 0;case i.UI_PROP_TYPE_STRING:return""}return""})(y.type)),n||y.hidden||(t.data.cells.high=s(y,u)||y)};function p(e){const{valuePath:t,annotationValuePaths:n}=function(e){switch(e){case i.SelectionVariantPathKind.SPV:return{valuePath:"/SelectionVariant/SelectOptions"};case i.SelectionVariantPathKind.SV:return{valuePath:"/SelectOptions"};case i.SelectionVariantPathKind.SPV_SV:return{valuePath:"/SelectOptions",annotationValuePaths:[{path:"/SelectionVariant",term:"com.sap.vocabularies.UI.v1.SelectionVariant"}]}}}(e);return e=>({...e,annotationRole:a.AnnotationRole.svAnnotation,annotationValuePaths:n,valuePath:t,flatteningPropName:"Ranges",rowCallback:l,valueType:a.ValueType.ExpressionValue,valueExpressionType:i.ExpressionType.Collection,columns:[{...e.columns[0],valuePath:"/com.sap.vocabularies.UI.v1.SelectOptionType/PropertyName",valueType:a.ValueType.ExpressionValue,valueExpressionType:i.ExpressionType.PropertyPath,allowedPathsOptions:{directPropertiesOnly:!0,noHiddenFilter:!0,allowedTypes:new Set([i.ExpressionType.Decimal,i.ExpressionType.Int,i.ExpressionType.Float,i.ExpressionType.Bool,i.ExpressionType.String])}},{...e.columns[1],valuePath:`/com.sap.vocabularies.UI.v1.SelectOptionType/Ranges/${a.INDEX_SEGMENT}/Sign`,valueType:a.ValueType.ExpressionValue,valueExpressionType:i.ExpressionType.EnumMember,allowedValues:[{value:"I",text:"SelectOptionSignInclude"},{value:"E",text:"SelectOptionSignExclude"}],allowedValuesPrefix:"com.sap.vocabularies.UI.v1.SelectionRangeSignType/"},{...e.columns[2],valuePath:`/com.sap.vocabularies.UI.v1.SelectOptionType/Ranges/${a.INDEX_SEGMENT}/Option`,valueType:a.ValueType.ExpressionValue,valueExpressionType:i.ExpressionType.EnumMember,allowedValues:[{value:"EQ",text:"SelectOptionEQ"},{value:"BT",text:"SelectOptionBT"},{value:"CP",text:"SelectOptionCP"},{value:"LE",text:"SelectOptionLE"},{value:"GE",text:"SelectOptionGE"},{value:"NE",text:"SelectOptionNE"},{value:"NB",text:"SelectOptionNB"},{value:"NP",text:"SelectOptionNP"},{value:"GT",text:"SelectOptionGT"},{value:"LT",text:"SelectOptionLT"}],allowedValuesPrefix:"com.sap.vocabularies.UI.v1.SelectionRangeOptionType/"},{...e.columns[3],valuePath:`/com.sap.vocabularies.UI.v1.SelectOptionType/Ranges/${a.INDEX_SEGMENT}/Low`,valueType:a.ValueType.ExpressionValue,valueExpressionType:i.ExpressionType.Unknown},{...e.columns[4],valuePath:`/com.sap.vocabularies.UI.v1.SelectOptionType/Ranges/${a.INDEX_SEGMENT}/High`,valueType:a.ValueType.ExpressionValue,valueExpressionType:i.ExpressionType.Unknown}]})}const c=[i.SelectionVariantPathKind.SPV,i.SelectionVariantPathKind.SV,i.SelectionVariantPathKind.SPV_SV];t.extendedPropertiesSelection=new Map,c.forEach((e=>{const n=`${i.UI_PROP_NAME_PREFIX_SELECTION}${e}`;t.extendedPropertiesSelection.set(n,p(e))}))},53650:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesSemanticObject=void 0;const a=n(23635),o=n(20980),r=n(95207);t.extendedPropertiesSemanticObject=new Map([[a.uiPropertyNames.semanticObject.semanticObject,e=>({...e,isLanguageDependent:!1,readonlyIfBaseValue:!0,readonlyTooltip:"SemanticObjectOnBaseReadonlyTooltip",annotationValuePaths:[{path:`${o.CURRENT_UI_NODE_PATH}/Value`,term:"com.sap.vocabularies.Common.v1.SemanticObject"}],valuePath:"",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,columns:[]})],[a.uiPropertyNames.semanticObject.semanticObjectPropertyName,e=>({...e,isLanguageDependent:!1,readonlyIfBaseValue:!0,readonlyTooltip:"SemanticObjectOnBaseReadonlyTooltip",annotationValuePaths:[{path:`${o.CURRENT_UI_NODE_PATH}/Value`,term:"com.sap.vocabularies.Common.v1.SemanticObjectMapping",creationCallback:r.semanticObjectMappingCreationCallback}],valuePath:"/0/SemanticObjectProperty",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,columns:[]})]])},14896:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesSorting=void 0;const a=n(20980),o=n(35586),r=n(23635);function i(e){const{valuePath:t,annotationValuePaths:n}=function(e){switch(e){case r.PresentationVariantPathKind.SPV:return{valuePath:"/PresentationVariant/SortOrder"};case r.PresentationVariantPathKind.PV:return{valuePath:"/SortOrder"};case r.PresentationVariantPathKind.SPV_PV:return{valuePath:"/SortOrder",annotationValuePaths:[{path:"/PresentationVariant",term:"com.sap.vocabularies.UI.v1.PresentationVariant"}]}}}(e);return e=>({...e,annotationRole:a.AnnotationRole.configuredAnnotation,annotationValuePaths:n,valuePath:t,valueType:a.ValueType.ExpressionValue,valueExpressionType:r.ExpressionType.Collection,columns:[{...e.columns[0],isKeyColumn:!1,optional:!0,valuePath:"/com.sap.vocabularies.Common.v1.SortOrderType/Property",valueType:a.ValueType.ExpressionValue,valueExpressionType:r.ExpressionType.PropertyPath,allowedPathsOptions:{directPropertiesOnly:!0,suppressedTypes:new Set([r.ExpressionType.Guid])}},{name:o.PROP_NAME_DYNAMIC_PROPERTY,type:r.UI_PROP_TYPE_ENUM,optional:!0,valuePath:"/com.sap.vocabularies.Common.v1.SortOrderType/DynamicProperty",valueType:a.ValueType.ExpressionValue,valueExpressionType:r.ExpressionType.AnnotationPath,allowedAnnotationPathsOptions:{term:"com.sap.vocabularies.Analytics.v1.AggregatedProperty",textPath:"/Name"}},{...e.columns[1],valuePath:"/com.sap.vocabularies.Common.v1.SortOrderType/Descending",valueType:a.ValueType.ExpressionValue,valueExpressionType:r.ExpressionType.Bool}]})}const s=[r.PresentationVariantPathKind.SPV,r.PresentationVariantPathKind.PV,r.PresentationVariantPathKind.SPV_PV];t.extendedPropertiesSorting=new Map,s.forEach((e=>{const n=`${r.UI_PROP_NAME_PREFIX_SORTING}${e}`;t.extendedPropertiesSorting.set(n,i(e))}))},50639:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesTargetValue=void 0;const a=n(23635),o=n(20980);t.extendedPropertiesTargetValue=new Map([[a.uiPropertyNames.targetValue.targetValueType,e=>({...e,valuePath:"/TargetValue",valueType:o.ValueType.ExpressionType,allowedValues:[{value:a.ExpressionType.Path,text:"NumericProperty"},{value:a.ExpressionType.Decimal,text:"ConstantNumber"}],columns:[]})],[a.uiPropertyNames.targetValue.targetValuePath,e=>({...e,valuePath:"/TargetValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Decimal,a.ExpressionType.Int,a.ExpressionType.Float]),excludeValuePropertyNames:["value"]},columns:[]})],[a.uiPropertyNames.targetValue.targetValueDecimal,e=>({...e,valuePath:"/TargetValue",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Decimal,allowedConstantsOptions:{initialNotAllowed:!0},columns:[]})],[a.uiPropertyNames.targetValue.criticality,e=>({...e,valuePath:"/Criticality",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.Int])},columns:[]})]])},51573:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesText=void 0;const a=n(23635),o=n(20980);t.extendedPropertiesText=new Map([[a.uiPropertyNames.text.text,e=>({...e,isLanguageDependent:!0,valuePath:"/Text",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,annotationRole:o.AnnotationRole.configuredAnnotation,columns:[]})]])},26944:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesTooltip=void 0;const a=n(23635),o=n(20980);t.extendedPropertiesTooltip=new Map([[a.uiPropertyNames.tooltip.tooltipType,e=>({...e,valuePath:"/@com.sap.vocabularies.Common.v1.QuickInfo",valueType:o.ValueType.ExpressionType,allowedValues:[{value:a.ExpressionType.String,text:"StringOption"},{value:a.ExpressionType.Path,text:"StringProperty"}],columns:[]})],[a.uiPropertyNames.tooltip.tooltipString,e=>({...e,valuePath:"/@com.sap.vocabularies.Common.v1.QuickInfo",isLanguageDependent:!0,valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,columns:[]})],[a.uiPropertyNames.tooltip.tooltipPath,e=>({...e,valuePath:"/@com.sap.vocabularies.Common.v1.QuickInfo",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Path,allowedPathsOptions:{deepPathsSupported:!0,ignoreHidden:!0,allowedTypes:new Set([a.ExpressionType.String])},columns:[]})]])},75447:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedPropertiesValueHelp=void 0;const a=n(23635),o=n(20980);t.extendedPropertiesValueHelp=new Map([[a.uiPropertyNames.valueHelp.valueHelpLabel,e=>({...e,annotationValuePaths:[{path:`${o.CURRENT_UI_NODE_PATH}/Value`,term:"com.sap.vocabularies.Common.v1.ValueList"}],isLanguageDependent:!0,valuePath:"/Label",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String,columns:[]})],[a.uiPropertyNames.valueHelp.resultList,e=>({...e,annotationValuePaths:[{path:`${o.CURRENT_UI_NODE_PATH}/Value`,term:"com.sap.vocabularies.Common.v1.ValueList"}],valuePath:"/Parameters",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Collection,columns:[{...e.columns[0],valuePath:"/ValueListProperty",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.String},{...e.columns[1],valuePath:"",defaultValue:"com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly",valueType:o.ValueType.RecordType,allowedValues:[{value:"com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly",text:"ValueListParameterNone"},{value:"com.sap.vocabularies.Common.v1.ValueListParameterIn",text:"ValueListParameterIn"},{value:"com.sap.vocabularies.Common.v1.ValueListParameterOut",text:"ValueListParameterOut"},{value:"com.sap.vocabularies.Common.v1.ValueListParameterInOut",text:"ValueListParameterInOut"}]},{...e.columns[2],valuePath:"/LocalDataProperty",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.PropertyPath,allowedPathsOptions:{deepPathsSupported:!0,ignoreIncludedTypes:!0,ignoreHidden:!0}}]})],[a.uiPropertyNames.valueHelp.resultListSorting,e=>({...e,annotationRole:o.AnnotationRole.configuredAnnotation,valuePath:"/SortOrder",optional:!0,valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Collection,columns:[{...e.columns[0],isKeyColumn:!1,valuePath:"/com.sap.vocabularies.Common.v1.SortOrderType/Property",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.PropertyPath,allowedPathsOptions:{directPropertiesOnly:!0,suppressedTypes:new Set([a.ExpressionType.Guid])}},{...e.columns[1],optional:!0,valuePath:"/com.sap.vocabularies.Common.v1.SortOrderType/Descending",valueType:o.ValueType.ExpressionValue,valueExpressionType:a.ExpressionType.Bool}]})]])},2010:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkTooComplex=void 0;const a=n(23635),o=n(46163),r=n(79760);t.checkTooComplex=function(e,t,n){const{uiPropertyDefinitions:i}=e,s=i.propertyMap[t];if(n&&!n.isBase&&n.tooComplex)return n.tooComplex;if(n.value===a.ENUM_VALUE_NONE&&!s.optional)return{tooComplex:!0,tooComplexLocations:n.locations?.map((e=>({...e,reason:a.TooComplexReason.MissingProperty})))};if(n&&!n.tooComplex&&"string"==typeof n.value&&n.value!==a.ENUM_VALUE_NONE&&s.allowedValues&&!s.allowedValues.find((e=>e.value===n.value)))return{tooComplex:!0,tooComplexLocations:n.locations?.map((e=>({...e,reason:a.TooComplexReason.UnsupportedEnumValue})))};const l=function(e,t,n){if(n.isBase&&n.tooComplex)return null;const{context:i,uiPropertyDefinitions:s}=e,l=s.propertyMap[t];if((0,r.traversesCollection)(l.valuePath,e.currentUINodePath))return null;let p=[];if(!n.resolvedPathContext)return null;const{collectionMemberIndex:c,record:u}=n.resolvedPathContext;i.isCdsProject&&!n.isBase&&(void 0===c||c<0)&&u&&(p=l.valueType===o.ValueType.PropertyName?function(e,t,n){const{context:o,uiPropertyDefinitions:i,layeredAnnotation:s,currentUINodePath:l}=e,p=i.propertyMap[t],c={currentUINodePath:l,forBaseValue:!0},u=(0,r.getUIPropertyValue)(o,s,p,c);if(u.tooComplex)return u.tooComplex.tooComplexLocations||[];if(!u.value||u.value===a.ENUM_VALUE_NONE)return[];if(n.value===a.ENUM_VALUE_NONE)for(const e of p.allowedValues){const t={...u.resolvedPathContext,lastPropertyNameSegment:e.value},i=!!t.record.propertyValues.find((t=>t.name===e.value&&t.value.type!==a.ExpressionType.Null)),s=!!n.resolvedPathContext.record.propertyValues.find((t=>t.name===e.value&&t.value.type===a.ExpressionType.Null));if(i&&(!(0,r.cdsNullApplicable)(o,t)||!s))return u.locations||[]}else{const e=p.allowedValues.findIndex((e=>e.value===n.value)),t=p.allowedValues.findIndex((e=>e.value===u.value));if(e<=t)return[];for(let a=t;a<e;a++){const e=p.allowedValues[a].value;if(!n.resolvedPathContext.record.propertyValues.find((t=>t.name===e)))return u.locations||[]}}return[]}(e,t,n):function(e,t,n){const{context:a,uiPropertyDefinitions:o,layeredAnnotation:i,currentUINodePath:s}=e,l=o.propertyMap[t],{lastPropertyNameSegment:p,record:c,pointerToRecord:u}=n.resolvedPathContext,m=[];if(p&&!c.propertyValues.find((e=>e.name===p))){const e={currentUINodePath:s,forBaseValue:!0},t=(0,r.getUIPropertyValue)(a,i,l,e),n=t.resolvedPathContext;if(n)if(n.pointerToRecord.length>u.length)m.push(...t.locations);else if(n.pointerToRecord===u){const e=n.record.propertyValues.findIndex((e=>e.name===p));e>=0&&m.push({fileUri:i.base[0].fileUri,range:t.resolvedPathContext.record.propertyValuesOrigins[e]})}}return m}(e,t,n));if(0===p.length)return null;return p.push(...n.locations),{tooComplex:!0,tooComplexLocations:p.map((e=>({...e,reason:a.TooComplexReason.CdsBasePropertyOverride})))}}(e,t,n);return l||void 0}},20980:(e,t)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationRole=t.IS_TOO_COMPLEX=t.DUMMY_TERM=t.IS_PRIMITIVE_COLLECTION=t.PREVIOUS_INDEX_PROPERTY_NAME=t.TYPE_PROPERTY_NAME=t.ValueType=t.CURRENT_UI_NODE_PATH=t.INDEX_SEGMENT=void 0,t.INDEX_SEGMENT="$$INDEX",t.CURRENT_UI_NODE_PATH="$$CURRENT_UI_NODE_PATH",function(e){e.AnnotationName="AnnotationName",e.AnnotationQualifiers="AnnotationQualifiers",e.PropertyName="PropertyName",e.ExpressionType="ExpressionType",e.ExpressionValue="ExpressionValue",e.RecordType="RecordType"}(n||(t.ValueType=n={})),t.TYPE_PROPERTY_NAME="$Type",t.PREVIOUS_INDEX_PROPERTY_NAME="$PreviousIndex",t.IS_PRIMITIVE_COLLECTION="$IsPrimitiveCollection",t.DUMMY_TERM="$DummyTerm",t.IS_TOO_COMPLEX="$IsTooComplex",function(e){e.configuredAnnotation="configuredAnnotation",e.svAnnotation="svAnnotation",e.unitsCurrencies="unitsCurrencies"}(a||(t.AnnotationRole=a={}))},68850:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateGenericUIProperties=void 0;const a=n(61818),o=n(32217),r=n(20576),i=n(46163),s=n(78263),l=n(35586),p=n(18996),c=n(9690),u=n(9029),m=n(23493),d=n(20980),y=n(79760),g=n(23635);function f(e,t,n,a,o,r){const s=[];let c=a.get(t.name);void 0===c&&(c=function(e,t,n,a){const{context:o,uiPropertyDefinitions:r,layeredAnnotation:i}=e;let s;return t.dependency?.forEach((e=>{if(a.has(e.name)){const{applicable:p}=(0,y.isApplicable)(t.name,r,a);if(!p&&n)s=null;else if(p&&!n&&!t.optional){const n=r.propertyMap[e.name],p=function(e,t,n,a,o,r){const i=(0,u.getInitialValueForExpressionType)(a),s=new Map,p=(0,y.buildRevertedDependency)(t).get(n.name)?.get(a);if(p)for(const c of p){if(c.optional||void 0!==o.get(c.name))continue;let p=c.defaultValue;if(void 0===p&&[g.UI_PROP_TYPE_ENUM,g.UI_PROP_TYPE_MULTIPLE_ENUMS].includes(c.type))if(c.allowedValues?.length)p=c.allowedValues[0].value;else if(c.allowedPathsOptions){const{allowedValues:n,allowedValuesTree:a}=(0,y.getAllowedPaths)(e,r,"",t,o,c.allowedPathsOptions);p=n?.[0]?.value||a?.nodes?.[0]?.value||g.ENUM_VALUE_NONE}p=p??i,void 0===p?(0,l.throwError)(`No default path found for new expression type '${a}'('${n.name}=>${c.name}')`):s.set(c.name,p)}return s}(o,r,n,a.get(n.name),a,i.top.target);p?.has(t.name)&&(s=p.get(t.name))}}})),s}(e,t,n,o));const m=(0,u.getPlainValueForComparison)(n);void 0!==c&&c!==m&&(t.type===g.UI_PROP_TYPE_ENUM&&[g.ENUM_VALUE_NONE,g.ENUM_VALUE_NULL].includes(c)&&(c=null),t.valueType!==i.ValueType.ExpressionType&&s.push(...(0,p.collectPropertyChangesInDiff)(e,t,n,c,r)));const d=function(e,t){let n=e;if((0,g.isTooComplex)(t))return n;if(!t)return n;void 0===n&&(n=(0,y.getPlainValue)(t));if(t.type===g.UI_PROP_TYPE_ENUM&&n===g.ENUM_VALUE_NONE){const e=t;e.baseTooComplex||e.baseValue.value===g.ENUM_VALUE_NONE||(n=e.baseValue.value)}return n}(c,n);return void 0!==d&&o.set(t.name,d),s}function h(e,t,n,a){if(a=a||[],(0,u.isPrimitiveExpression)(n))return a.push(...(0,u.getChangesForChangedPrimitiveExpression)(t,n)),a;if((0,u.isPrimitiveCollectionExpression)(n))return a.push(...function(e,t){const n=[],a=Object.keys(t).filter((e=>e!==d.IS_PRIMITIVE_COLLECTION)).sort(((e,t)=>parseInt(e,10)-parseInt(t,10))).map((e=>parseInt(e,10))),o=e.isAnnotation?"collection/":"Collection/";for(const i of a){const a=t[String(i)];if(e.collectionOriginal[i]){if(a.type===g.ExpressionType.String&&a.String===d.IS_TOO_COMPLEX)continue;const t={isCollectionEntry:!0,value:e.collectionOriginal[i],path:`${e.path}/${o}${i}`};n.push(...(0,u.getChangesForChangedPrimitiveExpression)(t,a))}else n.push({annotation:null,changeType:r.ChangeType.Insert,content:{type:r.MOD_TYPE_EXPRESSION,value:a},pointer:`${e.path}/${o}${e.collectionOriginal.length}`})}for(let t=a.length;t<e.collectionOriginal.length;t++)n.push({annotation:null,changeType:r.ChangeType.Delete,pointer:`${e.path}/${o}${t}`});return n}(t,n)),a;if((0,u.isCollectionExpression)(n)){const{done:e,changes:o}=function(e,t){const n=Object.keys(t),a=[];let o=!1;const i=e.isAnnotation?"collection":"Collection";if(e.collectionOriginal.length>n.length){for(let s=0;s<e.collectionOriginal.length;s++)if(!n.find((e=>t[e][d.PREVIOUS_INDEX_PROPERTY_NAME].Int===s))){const t=s;e.collection.splice(t,1),a.push({annotation:null,changeType:r.ChangeType.Delete,pointer:`${e.path}/${i}/${t}`}),o=!0;break}}else if(e.collectionOriginal.length<n.length){for(const s of n)if(t[s][d.PREVIOUS_INDEX_PROPERTY_NAME].Int<0){const n=P(t[s]),l=parseInt(s,10);e.collection.splice(l,0,n);const p={type:r.MOD_TYPE_RECORD,value:n};a.push({annotation:null,changeType:r.ChangeType.Insert,content:p,pointer:`${e.path}/${i}/${l}`}),o=!0;break}}else if(e.collectionOriginal.length===n.length){const s=[];let p=!1;for(const e of n)t[e][d.PREVIOUS_INDEX_PROPERTY_NAME].Int>=0?s.push(String(t[e][d.PREVIOUS_INDEX_PROPERTY_NAME].Int)):p=!0;if(!p){const t=[];for(let n=0;n<e.collectionOriginal.length;n++)t.push(String(n));const{found:n,range:p,insertBeforeIndex:c}=(0,l.findSingleMove)(t,s);if(n){const t=p.to-p.from+1;let n=`${p.from}`;t>1&&(n+=`-${p.to}`),a.push({changeType:r.ChangeType.Move,pointer:`${e.path}/${i}/${c}`,moveFromPointer:`${e.path}/${i}/${n}`,annotation:null}),o=!0}}}return{changes:a,done:o}}(t,n);if(a.push(...o),e)return}return Object.keys(n).forEach((o=>{if(o===d.TYPE_PROPERTY_NAME||o===d.PREVIOUS_INDEX_PROPERTY_NAME)return;const i=n[o];if(/^[0-9]*$/.test(o)){const n=function(e,t){const n=parseInt(t,10),a=(e.isAnnotation?"collection":"Collection")+`/${n}`,o=e.collection[n],r=e.collectionOriginal[n],i="object"!=typeof o||(0,u.isPrimitiveExpression)(o)?null:o,s="object"==typeof o&&(0,u.isPrimitiveExpression)(o)?o:null;return{type:i?.type||e?.type,isMandatory:!1,path:`${e.path}/${a}`,recordOriginal:"object"!=typeof r||(0,u.isPrimitiveExpression)(r)?null:r,record:i,value:s,isCollectionEntry:!0}}(t,o);h(e,n,i,a)}else o.startsWith("@")?(0,c.buildChangesEmbeddedAnnotation)(t,o,i,a):function(e,t,n,a,o){const i=t.recordOriginal.propertyValues.findIndex((e=>e.name===n)),s=t.isCollectionEntry?"":t.isAnnotation?"record/":"Record/";if(i<0)return void o.push(...function(e,t,n,a){if(null===n)return[];const o=[],i=e.recordOriginal.propertyValues.length,s=`${a}propertyValues/${i}`;let l;if((0,u.isPrimitiveExpression)(n)){let e=!1;n.type===g.ExpressionType.EnumMember&&/[-+]/.test(n.EnumMember)&&(n.EnumMember=_("",n.EnumMember),e=!n.EnumMember),e||(l={name:t,value:n})}else l=(0,u.isCollectionExpression)(n)||(0,u.isPrimitiveCollectionExpression)(n)?{name:t,value:{type:"Collection",Collection:E(n)}}:{name:t,value:{type:"Record",Record:P(n)}};if(l){e.record.propertyValues.push(l);const t={type:r.MOD_TYPE_PROP_VALUE,value:l};o.push({annotation:null,changeType:r.ChangeType.Insert,content:t,pointer:`${e.path}/${s}`})}return o}(t,n,a,s));const p=t.record.propertyValues.findIndex((e=>e.name===n)),c=t.recordBase?.propertyValues?.findIndex((e=>e.name===n)),m=t.record.propertyValues[p].value,d=`${s}propertyValues/${i}`,y=e.vocabularyService.getComplexTypeProperty(t.type,n);let f=y&&!y?.isCollection&&!y?.facets?.isNullable;t.isMandatory&&!t.record.propertyValues.find((e=>e.name!==n))&&(f=!0);const v=[["contentNeeded",f&&y?.isCollection&&null===a],["changesForRemoved",!f&&(null===a||(0,u.isEmptyRecord)(a,m))],["removalOfMandatory",f&&null===a],["primitiveProperty",(0,u.isPrimitiveExpression)(a)],["insideCollection",m?.type===g.ExpressionType.Collection],["changeRecord",m?.type===g.ExpressionType.Record]].find((e=>e[1]))?.[0];switch(v){case"contentNeeded":{const e={type:g.ExpressionType.Collection,Collection:[]};o.push({annotation:null,changeType:r.ChangeType.Update,content:{type:r.MOD_TYPE_EXPRESSION,value:e},pointer:`${t.path}/${d}/value/`});break}case"changesForRemoved":o.push(...T(t,p,c,m,d));break;case"removalOfMandatory":(0,l.throwError)(`Cannot remove mandatory property '${n}' (path: '${t.path}'`);break;case"primitiveProperty":o.push(...function(e,t,n,a,o,i){const s=[];if(a.type===o.type){let l=a[a.type];const p=o[o.type];if(a.type===g.ExpressionType.EnumMember&&/[-+]/.test(String(l))&&(l=_(o[o.type],String(l)),!l&&p))return T(e,t,n,o,i);l!==p&&(o[o.type]=l,s.push({annotation:null,changeType:r.ChangeType.Update,content:{type:r.MOD_TYPE_PRIMITIVE,value:l,expressionType:a.type},pointer:`${e.path}/${i}/value/${a.type}`}))}else e.record.propertyValues[t].value=a,s.push({annotation:null,changeType:r.ChangeType.Update,content:{type:r.MOD_TYPE_EXPRESSION,value:a},pointer:`${e.path}/${i}/value/`});return s}(t,p,c,a,m,d));break;case"insideCollection":h(e,{path:`${t.path}/${d}/value`,isMandatory:t.isMandatory,collectionOriginal:t.recordOriginal.propertyValues[i].value.Collection,collection:t.record.propertyValues[p].value.Collection,isCollectionEntry:!0},a,o);break;case"changeRecord":h(e,{type:y?.type,isMandatory:f,path:`${t.path}/${d}/value`,recordOriginal:t.recordOriginal.propertyValues[i].value.Record,record:t.record.propertyValues[p].value.Record,recordBase:t.recordBase?.propertyValues?.[c]?.value?.Record},a,o);break;default:{let e;e=(0,u.isCollectionExpression)(a)?{type:"Collection",Collection:E(a)}:{type:"Record",Record:P(a)},t.record.propertyValues[p].value=e,o.push({annotation:null,changeType:r.ChangeType.Update,content:{type:r.MOD_TYPE_EXPRESSION,value:e},pointer:`${t.path}/${d}/value/`})}}}(e,t,o,i,a)})),a}function T(e,t,n,a,o){const i=[];if(n>=0)if(a.type===g.ExpressionType.Record)for(const[t,n]of a.Record.propertyValues.entries())n.value={type:"Null"},i.push({annotation:null,changeType:r.ChangeType.Update,content:{type:r.MOD_TYPE_EXPRESSION,value:{type:"Null"}},pointer:`${e.path}/${o}/value/Record/propertyValues/${t}/value/`});else e.record.propertyValues[t].value={type:"Null"},i.push({annotation:null,changeType:r.ChangeType.Update,content:{type:r.MOD_TYPE_EXPRESSION,value:{type:"Null"}},pointer:`${e.path}/${o}/value/`});else e.record.propertyValues.splice(t,1),i.push({annotation:null,changeType:r.ChangeType.Delete,pointer:`${e.path}/${o}`});return i}function P(e){const t=[];let n;Object.keys(e).forEach((a=>{const{recordType:o,value:r}=function(e,t){let n,a;const o=e[t];t===d.PREVIOUS_INDEX_PROPERTY_NAME||("string"==typeof o?t===d.TYPE_PROPERTY_NAME&&(n=o):(0,u.isPrimitiveExpression)(o)?o.type===g.ExpressionType.EnumMember&&/[+-]/.test(o.EnumMember)?(o.EnumMember=_("",o.EnumMember),a=o.EnumMember?{name:t,value:o}:void 0):a={name:t,value:o}:a=(0,u.isCollectionExpression)(o)?{name:t,value:{type:"Collection",Collection:E(o)}}:{name:t,value:{type:g.ExpressionType.Record,Record:P(o)}});return{value:a,recordType:n}}(e,a);r&&t.push(r),n=n||o}));const a={propertyValues:t};return n&&(a.type=n),a}function E(e){const t=[],n=Object.keys(e).filter((e=>e!==d.IS_PRIMITIVE_COLLECTION)).map((e=>parseInt(e,10))).sort(((e,t)=>e-t));for(const a of n){const n=e[a];(0,u.isPrimitiveExpression)(n)?t.push(n):t.push(P(n))}return t}function v(e,t,n,r,i){t.annotation?t.annotation&&!t.annotation.term&&(t.annotation.term=r===s.CDS_TERM_NAME_TITLE?`${o.CDS_VOCABULARY_NAMESPACE}.Title`:r,i&&(t.annotation.qualifier=i),t.annotation.record&&function(e,t,n){"/record"!==n&&(0,l.throwError)("Not yet supported: Adding mandatory properties to embedded record");const o=t.record,r=e.vocabularyService.getTerm(t.term)?.type,i=r?e.vocabularyService.getComplexType(r):null;for(const[e,t]of i?.properties||new Map){if(!(0,y.isMandatoryProperty)(t))continue;if(o.propertyValues.find((t=>t.name===e)))continue;if(!t.type.startsWith("Edm."))continue;const n=a.primitiveTypeMap[t.type]?.constantExpressionName,r={type:n};r[n]=(0,u.getInitialValueForExpressionType)(n),o.propertyValues.push({name:e,value:r})}}(e,t.annotation,"/record")):t.annotation=n?.top?.annotation}function b(e,t,n){const{collection:a,record:o,value:r}=e?.top?.annotation||{};let i;if(null===t)i=function(e){if(e?.top?.annotation&&e?.app?.length)return[{annotation:{term:""}}]}(e);else if([!r,!o,!a].every((e=>e)))i=function(e){if((0,u.isPrimitiveExpression)(e))return[{annotation:{term:"",value:e}}];if((0,u.isCollectionExpression)(e))return[{annotation:{term:"",collection:E(e)}}];return[{annotation:{term:"",record:P(e)}}]}(t);else{const s={type:o?.type||n.vocabularyService.getTerm(e.top.annotation.term)?.type,path:"",collection:a,record:o,value:r,collectionOriginal:a?JSON.parse(JSON.stringify(a)):a,recordOriginal:o?JSON.parse(JSON.stringify(o)):o,recordBase:n.isCdsProject&&e?.base[0]?.annotation?.record||null,isAnnotation:!0};i=h(n,s,t)}return i}function _(e,t){const n=e?e.split(" "):[],a=t?t.split(" "):[];for(const e of a)if(e.startsWith("+")){const t=e.substring(1);n.includes(t)||n.push(t)}else if(e.startsWith("-")){const t=e.substring(1),a=n.indexOf(t);a>-1&&n.splice(a,1)}return n.join(" ")}t.updateGenericUIProperties=function(e,t,n,a){const{context:o,uiPropertyDefinitions:r}=e;for(const[e,a]of n){const n=r.propertyMap[e];n&&(0,m.checkProvidedPropertyValue)(o,n,a,t[e])}const i=new Map,s=new Map,p=[];for(const o of r.propertyNames){const l=r.propertyMap[o],c=t[o];let u=e;if(l.annotationRole&&a?.has(l.annotationRole)){const e=a.get(l.annotationRole);u={...u,layeredAnnotation:e}}p.push(...f(u,l,c,n,s,i))}return p.push(...function(e,t){const n=[];for(const[a,o]of t){const t=e.annotationIndex[a],r=b(t,o,e);if(!r?.length)continue;const i=(0,u.groupAndSortChanges)(r),{target:s,term:p,qualifier:c}=(0,l.splitAnnotationIndexKey)(a);if(p!==d.DUMMY_TERM){for(const n of i)v(e,n,t,p,c);n.push({targetPath:s,changes:i})}}return n}(o,i)),p}},79760:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyNewRow=t.getUnitsCurrenciesDummyAnnotation=t.getDummyRange=t.resolveAnnotationValuePath=t.resolveAnnotationValuePaths=t.cdsNullApplicable=t.getValuePathForRemoval=t.isMandatoryProperty=t.getChangedPropertiesMap=t.getNonTooComplexValues=t.getPlainValue=t.getPropValueMap=t.buildRevertedDependency=t.traversesCollection=t.isApplicable=t.getLayeredAnnotationForAnnotationPath=t.getEffectiveValuePath=t.getUIPropertyValueCore=t.getUIPropertyValue=t.getAllowedPaths=void 0;const a=n(61818),o=n(32217),r=n(78263),i=n(46163),s=n(35586),l=n(57321),p=n(20980),c=n(41810),u=n(23635);function m(e,t,n,a){const{valuePath:o,type:r,valueType:s,valueExpressionType:p}=n,c=n.annotationValuePaths?.length?o:d(o,a),m={valueExpressionType:p,flatteningPropName:n.flatteningPropName,allowedValues:n.allowedValues,optional:n.optional,forBaseValue:!!a?.forBaseValue,allowedPathsOptions:n.allowedPathsOptions},y=(0,l.resolveValuePath)(e,t,c,s,m),g=y.value===u.ENUM_VALUE_NONE&&!y.resolvedPathContext?.lastPropertyNameSegmentFound,f=s===i.ValueType.ExpressionValue&&o.indexOf("@")>0&&n.invertBoolean;return y.value=function(e,t,n,a,o){let r=e;switch(t){case u.UI_PROP_TYPE_STRING:a&&(r="");break;case u.UI_PROP_TYPE_BOOL:a&&(r=o);break;case u.UI_PROP_TYPE_ENUM:n===u.ExpressionType.Bool?r=a?"false":String(!!e):[u.ExpressionType.Decimal,u.ExpressionType.Int].includes(n)&&(r="number"==typeof e?e.toString():e)}return r}(y.value,r,p,g,f),y}function d(e,t){let n=e;return t?.collectionEntryPath&&(n=t.collectionEntryPath+n),void 0!==t?.currentUINodePath&&(n=n.replace(i.CURRENT_UI_NODE_PATH,t?.currentUINodePath)),t?.indexEmbedded>=0&&(n=n.replace(i.INDEX_SEGMENT,String(t?.indexEmbedded))),n}function y(e,t,n){const a=e.value,[o,r]=a.split("@"),[i,s]=r.split("#"),l=t+(o?"/"+o.slice(0,-1):""),p=(0,u.getAnnotationIndexKey)(l,i,s),c=n.annotationIndex[p];if(c)return{annotation:c};{const{fileUri:t,range:n}=e?.locations[0]||{};return{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.NoValidAnnotationPath,n,t)}}}function g(e,t,n,a){let o=!0,r="";if(n)if(e.value!==u.ANY_NON_INITIAL_VALUE||a?.type===u.UI_PROP_TYPE_ENUM&&n===u.ENUM_VALUE_NONE)if(a&&a.type!==u.UI_PROP_TYPE_ENUM)(0,s.throwError)("TODO: not yet supported: dynamic dominating props with non ENUM type");else{o=!!(Array.isArray(e.value)?e.value:[e.value]).find((e=>e===n))}else o=!0;else r=t&&e.value===u.ANY_NON_INITIAL_VALUE&&a.type===u.UI_PROP_TYPE_STRING?e.name:"",o=!!r;return{readonlyPropName:r,applicable:o}}function f(e){switch(e.type){case u.UI_PROP_TYPE_MULTIPLE_ENUMS:case u.UI_PROP_TYPE_MULTIPLE_DEPENDENT_ENUMS:return h(e.values);case u.UI_PROP_TYPE_TABLE:return(e.rows||[]).map((e=>{const t=e.data;if((0,u.isTooComplex)(t))return{key:e.key,cells:null};{const n={};for(const e of Object.keys(t.cells)){const a=t.cells[e];(0,u.isTooComplex)(a)?n[e]=null:n[e]=a.value}return{key:e.key,cells:n}}}));default:return e.value}}function h(e){return e.map((e=>(0,u.isTooComplex)(e)?"":e))}function T(e){return!(e.facets&&e.facets.isNullable||void 0!==e.defaultValue||e.isCollection||e.type?.startsWith("Edm.")&&e.type?.endsWith("Path"))}function P(e,t,n){let a,o;({currentComplexType:o,currentExpression:a}=t);const{vocabularyService:r}=t;if(e.type===l.StepType.collectionEntry&&"Collection"!==a?.type)return!1;if(e.type===l.StepType.recordProperty&&("Record"!==a?.type||!o))return!1;if(e.type===l.StepType.embeddedAnnotation&&"Record"!==a?.type)return!1;if(e.type===l.StepType.collectArray)return!1;switch(e.type){case l.StepType.collectionEntry:{const t=a.Collection;n.push({step:e,hasSiblings:t.length>1}),a=(0,l.getExpressionFromCollectionEntry)(t[e.index]);break}case l.StepType.recordProperty:{e.recordType&&(o=r.getComplexType(e.recordType));const t=a.Record,i=o.properties.get(e.propertyName);let s=t.annotations?.length>0;s||(s=!!t.propertyValues?.find((t=>t.name!==e.propertyName))),n.push({step:e,propertyType:i,hasSiblings:s});const l=t.propertyValues?.find((t=>t.name===e.propertyName));if(a=l?.value,o.isOpenType){if(l){const e="Record"===l.value.type?l.value.Record.type:void 0;o=r.getComplexType(e)}}else o=r.getComplexType(i.type);break}case l.StepType.embeddedAnnotation:{const t=(a.Record.annotations||[]).find((t=>(0,s.annotationMatch)(t,e)));n.push({step:e}),a=t.value;break}}return t.currentComplexType=o,t.currentExpression=a,!0}function E(e,t,n,a){let o=t;for(const t of n){const n=b(e,o,t);if(n.tooComplexResult)return n.tooComplexResult;if(null===n.valueExpressionType)return{targetAnnotation:null};const{valueExpressionType:r,annoValuePathResult:i}=n,s=_(r,o.top.target,i,e,t);if(s.tooComplex)return{isBase:i.isBase,tooComplex:s.tooComplex};if("/.."!==t.path||t.term||(s.annotation=o),!s.annotation){const{creationTarget:e,creationTerm:t}=s;return{...v(i,a),creationTarget:e,creationTerm:t}}o=s.annotation}return{targetAnnotation:o}}function v(e,t){if(t)return{isBase:e.isBase};{const t=e.locations,{range:n,fileUri:a}=t[t.length-1]||{range:null,fileUri:null},o=e?.value.indexOf("@")>=0?e?.value:"",r=o?u.TooComplexReason.NoValidAnnotationPath:u.TooComplexReason.NoValidPath,i=(0,u.buildTooComplex)(r,n,a,t,o);return{isBase:e.isBase,tooComplex:i}}}function b(e,t,n){const a=(0,l.resolveValuePath)(e,t,n.path,i.ValueType.ExpressionType,{optional:!!n.creationCallback});if(a?.tooComplex)return{tooComplexResult:{isBase:a.isBase,tooComplex:a.tooComplex}};const o=a.value;if(null===o)return{valueExpressionType:o};const r={valueExpressionType:o},s=(0,l.resolveValuePath)(e,t,n.path,i.ValueType.ExpressionValue,r);return s?.tooComplex?{tooComplexResult:{isBase:s.isBase,tooComplex:s.tooComplex}}:{valueExpressionType:o,annoValuePathResult:s}}function _(e,t,n,a,o){let i,s,l=!1,p="",m="";if(e===u.ExpressionType.AnnotationPath||n.value.includes("@"))({annotation:i,tooComplex:s}=y(n,t,a));else if(e===u.ExpressionType.Path||e===u.ExpressionType.PropertyPath){let e=(0,c.getPathBaseMetadataElement)(a.metadataService,t)?.path+(n.value?`/${n.value}`:"");e=(0,u.resolveMetadataElement)(a.metadataService,e,!0).path;const s=(0,u.getAnnotationIndexKey)(e,o.term);if(i=a.annotationIndex[s],!i&&"com.sap.vocabularies.Common.v1.Label"===o.term){const t=(0,u.getAnnotationIndexKey)(e,r.CDS_TERM_NAME_TITLE);i=a.annotationIndex[t],l=!0}i||(p=e,m=o.term)}return o.term&&i&&i.top.annotation.term!==o.term&&!l&&(s=(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedTerm,i.top.annotation.origin,i.top.fileUri)),{annotation:i,creationTarget:p,creationTerm:m,tooComplex:s}}function A(){return{start:{line:0,character:0},end:{line:0,character:10}}}t.getAllowedPaths=function(e,t,n,a,o,r,i){const l=(0,c.getPathBaseMetadataElement)(e.metadataService,t),p=function(e,t,n,a){const o=[];for(const r of e?.excludeValuePropertyNames||[]){if(!t.has(r))continue;const e=t.get(r),i=Array.isArray(e)?e:[e];for(let e of i)"string"==typeof e&&(n&&!a.propertyMap[r]&&e.startsWith(`${n}/`)&&(e=e.substring(`${n}/`.length)),o.push(e))}return o}(r,o,n,a);if(r?.deepPathsSupported){const t={...r,expandFirstLevel:!0},n=i?Array.isArray(i)?i:[i]:[];(n.length||p.length)&&(t.expandToPaths=new Set([...n,...p]));const a=(0,s.getPathValueHelpTree)(e,l,t);for(const e of p)(0,s.removeValueHelpNodeByPath)(a.nodes,e);return{allowedValuesTree:a}}{const t=function(e,t,n){let a=[],o=[];if(n.toManyAssociationsOnly)o=(0,s.getAvailableManyAssociationPathsForEntity)(e.metadataService,t);else{const r=(0,s.getAvailableFieldPathsForEntity)(e,t,n);a=r.fieldPaths,o=r.associations}if(n.directPropertiesOnly)return a;for(const r of o){const o=e.metadataService.getMetadataElement(t.name+"/"+r);if(o?.structuredType){const t=e.metadataService.getMetadataElement(o?.structuredType);a.push(...(0,s.getAvailableFieldPathsForEntity)(e,t,n).fieldPaths.map((e=>r+"/"+e)))}}return a}(e,l,r);for(const e of p){const n=t.findIndex((t=>t===e));n>-1&&t.splice(n,1)}return{allowedValues:t.map((e=>({value:e})))}}},t.getUIPropertyValue=function(e,t,n,a){const o=(n.annotationValuePaths||[]).map(((e,t)=>{const n=0===t?d(e.path,a):e.path;return{...e,path:n}})),{targetAnnotation:r,creationTarget:i,tooComplex:s,isBase:l}=E(e,t,o,n.optional);return s?{tooComplex:s,isBase:l,creationTarget:i}:r?m(e,r,n,a):{isBase:!1,creationTarget:i,value:n.type===u.UI_PROP_TYPE_ENUM?u.ENUM_VALUE_NONE:"",resolvedPathContext:{lastPropertyNameSegment:"",lastPropertyNameSegmentFound:!1,pointerToRecord:"",record:null,layeredAnnotation:null}}},t.getUIPropertyValueCore=m,t.getEffectiveValuePath=d,t.getLayeredAnnotationForAnnotationPath=y,t.isApplicable=function(e,t,n){let a=!0,o="";const r=t.propertyMap[e];for(const e of r?.dependency||[]){if(!a)break;const r=n.get(e.name),i=t.propertyMap[e.name];({readonlyPropName:o,applicable:a}=g(e,n.has(e.name),r,i))}return{applicable:a,readonlyPropName:o}},t.traversesCollection=function(e,t){return(e||"").replace(i.CURRENT_UI_NODE_PATH,t||"").split("/").filter((e=>!!e)).some((e=>/^[0-9]*$/.test(e)))},t.buildRevertedDependency=function(e){const t=new Map;for(const n of e.propertyNames){const a=e.propertyMap[n];for(const e of a.dependency||[]){t.set(e.name,t.get(e.name)||new Map);const n=Array.isArray(e.value)?e.value:[e.value],o=t.get(e.name);for(const e of n)o.has(e)||o.set(e,[]),o.get(e).push(a)}}return t},t.getPropValueMap=function(e){const t=new Map;return Object.keys(e).forEach((n=>{const a=e[n];!(0,u.isTooComplex)(a)&&(0,r.isUiProperty)(a)&&t.set(n,f(a))})),t},t.getPlainValue=f,t.getNonTooComplexValues=h,t.getChangedPropertiesMap=function(e){const t=new Map;for(const n of e)t.set(n.propertyName,n.value);return t},t.isMandatoryProperty=T,t.getValuePathForRemoval=function(e,t,n){const a=(0,l.getStepsForValuePath)(n)||[];if(a.length<2)return n;const o=function(e,t,n){const a=e.vocabularyService,o=a.getTerm(t.term),r={currentExpression:(0,l.getExpressionFromAnnotation)(t),currentComplexType:a.getComplexType(o.type),vocabularyService:a},i=[];for(const e of n)if(!P(e,r,i))break;return i}(e,t,a);let r=-1;for(let e=o.length-1;e>=0;e--){const t=o[e];if(!T(t.propertyType)){r=e;break}if(t.hasSiblings)break}if(r<0)return null;{const e=o.map((e=>e.step));return(0,l.getValuePathForSteps)(e)}},t.cdsNullApplicable=function(e,t){if(!t.lastPropertyNameSegment||!t.layeredAnnotation?.top?.annotation?.record)return!1;let n=[];if("/record"!==t.pointerToRecord){const e=(t.pointerToRecord.replace("/record","/value/Record")+"/propertyValues/").split("/value/Record/propertyValues/").filter((e=>""!==e));if(e.some((e=>!/^[0-9]*$/.test(e))))return!1;n=e.map((e=>parseInt(e,10)))}if(t.lastPropertyNameSegment.startsWith("@"))return!0;const r=e.vocabularyService,i=t.layeredAnnotation?.top?.annotation,s=i.record.type||r.getTerm(i.term).type;let l=r.getComplexType(s),p=i.record;if(!s)return!1;for(const e of n){let t=!1;if(p&&p.propertyValues[e]?.value.type===u.ExpressionType.Record){const n=p.propertyValues[e]?.value.Record,a=p.propertyValues[e]?.name;if(l&&l.properties.has(a)){const e=l.properties.get(a),i=n.type||e.type;r.getType(i)?.kind===o.COMPLEX_TYPE_KIND&&(l=r.getComplexType(i),p=n,t=!0)}}t||(p=null,l=null)}const m=t.lastPropertyNameSegment;if(!l||!l.properties.has(m))return!1;const d=l.properties.get(m);if(T(d))return!1;if(a.primitiveTypeMap[d.type]||d.type===c.EdmType.PrimitiveType)return!0;const y=r.getType(d.type);return[o.TYPE_DEFINITION_KIND,o.ENUM_TYPE_KIND].includes(y?.kind)},t.resolveAnnotationValuePaths=E,t.resolveAnnotationValuePath=b,t.getDummyRange=A,t.getUnitsCurrenciesDummyAnnotation=function(e,t){const n=t?.range||{start:{line:0,character:0},end:{line:0,character:10}},a=t?.fileUri||"dummyFileUri";let o="",i="";if(e.includes("/")){const t=e.split("/");o=t.shift(),i=t.join("/")}const s={type:u.ExpressionType.Path,Path:i},l={annotation:{term:p.DUMMY_TERM,record:{propertyValues:[{name:r.DATA_FIELD_PROP_NAME_VALUE,value:s}],propertyValuesOrigins:[n]},origin:{start:{line:0,character:0},end:{line:0,character:10}}},fileUri:a,target:o};return{app:[l],base:[],top:l,isSplit:!1,readonly:!0}},t.isEmptyNewRow=function(e){return null===e.cells||0===Object.keys(e.cells).length}},36697:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalDataPropertyName=t.getEntitySetNameByEntityType=t.getEntityTypeNameByEntitySet=t.generateId=t.draftSpecificFields=t.PageAnnotationHelperCP=t.PageAnnotationHelperOP=t.PageAnnotationHelperLR=t.EdmxFileCreateHelper=t.CDSFileCreateHelper=void 0;var r=n(12534);Object.defineProperty(t,"CDSFileCreateHelper",{enumerable:!0,get:function(){return r.CDSFileCreateHelper}}),Object.defineProperty(t,"EdmxFileCreateHelper",{enumerable:!0,get:function(){return r.EdmxFileCreateHelper}});var i=n(50943);Object.defineProperty(t,"PageAnnotationHelperLR",{enumerable:!0,get:function(){return i.PageAnnotationHelperLR}});var s=n(15381);Object.defineProperty(t,"PageAnnotationHelperOP",{enumerable:!0,get:function(){return s.PageAnnotationHelperOP}});var l=n(63251);Object.defineProperty(t,"PageAnnotationHelperCP",{enumerable:!0,get:function(){return l.PageAnnotationHelperCP}}),o(n(78263),t),o(n(23635),t);var p=n(35586);Object.defineProperty(t,"draftSpecificFields",{enumerable:!0,get:function(){return p.draftSpecificFields}}),Object.defineProperty(t,"generateId",{enumerable:!0,get:function(){return p.generateId}}),Object.defineProperty(t,"getEntityTypeNameByEntitySet",{enumerable:!0,get:function(){return p.getEntityTypeNameByEntitySet}}),Object.defineProperty(t,"getEntitySetNameByEntityType",{enumerable:!0,get:function(){return p.getEntitySetNameByEntityType}}),Object.defineProperty(t,"getLocalDataPropertyName",{enumerable:!0,get:function(){return p.getLocalDataPropertyName}})},6950:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageAnnotationHelper=void 0;const a=n(32217),o=n(28033),r=n(34799),i=n(46576),s=n(98879),l=n(20576),p=n(91400),c=n(12534),u=n(78263),m=n(91310),d=n(35586),y=n(83237),g=n(83407),f=n(46163),h=n(70773),T=n(57962),P=n(41810),E=n(23635);let v;t.PageAnnotationHelper=class PageAnnotationHelper{constructor(e,t){let n;try{this.project=e.project,this.serviceName=e.serviceName,this.appName=e.appName,t.configuration&&this.checkConfiguration(t.configuration),this.pageContext={...t,configuration:t.configuration||new Map},this.startApiUsageDone=!1}catch(e){n=e instanceof s.ApiError?e:new s.ApiError(`Creation of PageAnnotationHelper failed: ${e}`)}n&&this.throwException(n)}throwException(e){throw e instanceof s.ApiError&&(e.message=e.getExtendedMessage()),e}checkConfiguration(e){e.has(E.UI_NODE_TYPE_ANALYTICAL_CHART)&&!e.has(E.UI_NODE_TYPE_LIST)&&(0,d.throwError)("Inconsistent Configuration for ALP: missing configuration for UI.LineItem ('secondary')")}async getProjectContext(e=!1){v||(await(0,r.initI18n)(),v=!0);const t=new i.AnnotationServiceFactoryImpl;let n=await t.getAnnotationService(this.project,this.serviceName,"Cap"===this.project?.type?l.ServiceType.CDS:l.ServiceType.EDMX,{appName:this.appName,messageHandler:i.apiErrorMessageHandler});const{fileUri:o,isNew:s}=await this.getToBeChangedFileUri(n,e);this.toBeChangedFileUri=o,s&&(n=await t.getAnnotationService(this.project,this.serviceName,"Cap"===this.project?.type?l.ServiceType.CDS:l.ServiceType.EDMX,{appName:this.appName,messageHandler:i.apiErrorMessageHandler}));const p=n.getMetadataService();return{annotationService:n,metadataService:p,vocabularyService:new a.VocabularyService,annotationIndex:(0,d.buildAnnotationIndexLegacy)(n,function(e){const t=(0,y.toUnifiedUri)(e),n={isAppLayerFile:t===(0,y.toUnifiedUri)(this.toBeChangedFileUri),isSiblingAppFile:!1,siblingAppName:""};if(n.isAppLayerFile)return n;if((0,g.isSubDirectory)((0,y.toUnifiedUri)(this.appName),t))return n;for(const e of Object.keys(this.project?.apps||{}))if((0,g.isSubDirectory)((0,y.toUnifiedUri)(`${e}/`),t))return n.isSiblingAppFile=!0,n.siblingAppName=e.split("/").pop().split("\\").pop(),n;return n}.bind(this)),isCdsProject:p.isCds}}async startApiUsage(e){return(!this.projectContext||e?.refresh||!this.toBeChangedFileUri&&e?.toWrite)&&(this.projectContext=await this.getProjectContext(e?.toWrite)),this.startApiUsageDone=!0,{...this.projectContext,pageContext:this.pageContext,pageBase:(0,d.resolvePageBase)(this.projectContext.metadataService,this.pageContext),entitySetProperties:null,actions:null,toManyAssociations:null,parentNodes:[],selectable:{actionsUsed:new Map([["",new Set]]),formFieldsUsed:new Map([["",new Set]]),formConnectedFieldsUsed:new Map([["",new Set]]),identificationSection:!1}}}async setTargetAnnotations(e,t,n){const a=e.annotationService,o=new Map,r=new Map;n.forEach((t=>{const n=t.targetPath;t.changes.forEach((t=>{const a=(0,E.getAnnotationIndexKey)(n,t.annotation.term,t.annotation.qualifier);if(!e.annotationIndex[a]?.isSplit&&e.annotationIndex[a]?.app?.length&&t.changeType)r.set(a,r.get(a)||[]),r.get(a).push(t);else{o.set(n,o.get(n)||new Map);o.get(n).set(a,t.annotation)}}))}));for(const[e,n]of r){const r=n[0].annotation,i={term:r.term,qualifier:r.qualifier},s=e.split("/@")[0];if(o.get(s)?.get(e))continue;const c=n.map((e=>{const{annotation:t,changeType:n,pointer:a,moveFromPointer:o}=e;let r=e.content;return!r&&[l.ChangeType.Insert,l.ChangeType.Update].includes(n)&&(r=(0,p.getModContentForPath)(t,a)),{changeType:n,pointer:a,moveFromPointer:o,content:r}}));await a.changeAnnotationForTarget(t,s,i,c)}for(const[e,n]of o){const o=[...n.values()];await a.setAnnotationsForTarget(t,e,o,!1,!0,!0)}const i=await a.saveLegacy();e.pageContext.logFileUpdate&&i.files&&e.pageContext.logFileUpdate(`${this.project.root}/${this.toBeChangedFileUri}`)}async getAnnotationFileUri(){return this.toBeChangedFileUri||this.startApiUsageDone||await this.startApiUsage({toWrite:!1}),this.toBeChangedFileUri}async createNewAnnotationFile(){return this.toBeChangedFileUri||await this.startApiUsage({toWrite:!0}),this.toBeChangedFileUri}async getValueHelpNodeSubnodes(e,t){let n;try{const n=await this.startApiUsage();return(0,d.getValueHelpNodeSubnodes)(n,e,t)}catch(a){const o=`getValueHelpNodeSubnodes (treeId: ${e}, nodeId: ${t}) failed: ${a}`;n=a instanceof s.ApiError?a:new s.ApiError(o)}n&&this.throwException(n)}async getToBeChangedFileUri(e,t=!1){let n=!1,a="";if("Cap"===this.project?.type){const r=new c.CDSFileCreateHelper(e,this.appName,this.project);a=r.getChangeableFileUri(),!a&&t&&(a=await r.createCDSFile(),n=!0,this.project=(await(0,o.createProjectProvider)(this.project.root)).project)}else{const r=new c.EdmxFileCreateHelper(e,this.appName,this.project,this.serviceName);a=r.getChangeableFileUri(),!a&&t&&(a=await r.createEdmxFile(),n=!0,this.project=(await(0,o.createProjectProvider)(this.project.root)).project)}return{fileUri:a,isNew:n}}checkUINodesForDeletion(e,t,n){for(const a of e){const{uiNode:e,parentUINode:o}=(0,d.resolveNodeId)(a,t,n);if(e.tooComplex&&!(e.tooComplexLocations||[]).find((e=>e.reason===E.TooComplexReason.CustomViewInMultiViewLR||!!e.message)))throw new s.ApiError(`Node ${a} too complex - no deletion`);if(1!==a.length&&(0,E.isTooComplex)(o))throw new d.ApiComplexityError(`ParentNode of ${a} too complex - no deletion`,o)}}checkCreationParameters(e,t,n,a,o){let r;for(const i of n){const n=(0,h.getNodeInfoFromCreationParams)(i);r=r||this.getCreateUINodeOptionsInternal(e,t,n,a,o),(0,h.checkCreationParameter)(r,i,e)}}getEntityTypeForParentNode(e,t,n){if(t?.macroNodeId&&t?.annotationPath){const{target:n}=(0,E.resolvePath)(t.annotationPath),a=(0,P.getPathBaseMetadataElement)(e.metadataService,n);return a?.structuredType||a?.name||""}const a=t?.nodeId;let o="";const r=(0,d.getRootNodeConfig)(e,E.UI_NODE_TYPE_VIEWS);if(e.pageContext.type===u.PAGE_TYPE_LR&&r.configured&&a?.length>1){const t=n[a[0]];if(!(0,E.isTooComplex)(t)&&t.nodeType===E.UI_NODE_TYPE_VIEWS){const{target:t}=(0,E.resolvePath)(r.configuredPaths[a[1]]||"");o=e.metadataService.getMetadataElement(t)?.structuredType||""}}return o}getCreateUINodeOptionsInternal(e,t,n,a,o,r){return(0,h.getCreateUINodeOptionsInternal)(e,t,n,a,o,r)}changeUIPropertiesForNode(e,t,n,a,o,r){let i;switch((0,E.isTooComplex)(a)?"":a.nodeType){case E.UI_NODE_TYPE_PAGE_ACTIONS:i=a.identification;break;case E.UI_NODE_TYPE_LIST:i=a.lineItems;break;default:i=a.referencedAnnotation}switch(t.nodeType){case E.UI_NODE_TYPE_HEADER_INFO:return{targetChanges:(0,m.changeUIPropertyHeaderInfo)(e,t,n,(0,f.getChangedPropertiesMap)(r))};case E.UI_NODE_TYPE_SECTION:return{targetChanges:(0,m.changeUIPropertySection)(e,t,n,o,(0,f.getChangedPropertiesMap)(r))};case E.UI_NODE_TYPE_FORM_FIELD:return{targetChanges:(0,m.changeUIPropertyFormField)(e,t,n,a,(0,m.getFieldPropertiesForChange)(r))};case E.UI_NODE_TYPE_CONNECTED_FIELDS:return{targetChanges:(0,m.changeUIPropertyConnectedFields)(t,n,a,(0,m.getConnectedFieldsPropertiesForChange)(r))};case E.UI_NODE_TYPE_ACTION:return{targetChanges:(0,m.changeUIPropertyAction)(e,t,n,i,(0,m.getActionPropertiesForChange)(r))};case E.UI_NODE_TYPE_NAVIGATION:return{targetChanges:(0,m.changeUIPropertyNavigation)(e,t,n,i,(0,m.getNavigationPropertiesForChange)(r,t.nodeSubType))};case E.UI_NODE_TYPE_COLUMN:return{targetChanges:(0,m.changeUIPropertyColumn)(e,t,n,a.lineItems,(0,m.getColumnPropertiesForChange)(r,t.columnType))};case E.UI_NODE_TYPE_CHART:return{targetChanges:(0,m.changeUIPropertyChart)(e,t,n,i,o,(0,f.getChangedPropertiesMap)(r))};case E.UI_NODE_TYPE_CONTACT:return{targetChanges:(0,m.changeUIPropertyContact)(e,t,n,i,(0,f.getChangedPropertiesMap)(r))};case E.UI_NODE_TYPE_DATA_POINT:return{targetChanges:(0,m.changeUIPropertyDataPoint)(e,t,n,o,(0,f.getChangedPropertiesMap)(r))};case E.UI_NODE_TYPE_LIST:return(0,m.changeUIPropertyList)(e,t,n,a,(0,f.getChangedPropertiesMap)(r));case E.UI_NODE_TYPE_ANALYTICAL_CHART:return(0,m.changeUIPropertyAnalyticalChart)(e,t,n,a,o,(0,f.getChangedPropertiesMap)(r));case E.UI_NODE_TYPE_FILTER_FIELD:return{targetChanges:(0,m.changeUIPropertyFilterField)(e,t,n,a,(0,m.getFilterFieldPropertiesForChange)(r))};case E.UI_NODE_TYPE_VISUAL_FILTER:return{targetChanges:(0,m.changeUIPropertyVisualFilter)(e,t,n,(0,f.getChangedPropertiesMap)(r))}}return{targetChanges:[]}}finalize(e,t,n,a){if(!(0,E.isTooComplex)(e)){e.nodeType===E.UI_NODE_TYPE_PAGE_ACTIONS?(0,m.finalizePageActionsNode)(e,t):e.nodeType===E.UI_NODE_TYPE_SECTION?(0,m.finalizeSectionNode)(e,t,n):e.nodeType===E.UI_NODE_TYPE_FORM_FIELD?(0,m.finalizeFieldNode)(e,t,a):e.nodeType===E.UI_NODE_TYPE_CONNECTED_FIELDS?(0,m.finalizeConnectedFieldsNode)(e,t,a):e.nodeType===E.UI_NODE_TYPE_ACTION?(0,m.finalizeActionNode)(e,t,a):e.nodeType===E.UI_NODE_TYPE_NAVIGATION?(0,m.finalizeNavigationNode)(e,t,a):e.nodeType===E.UI_NODE_TYPE_CONTACT?(0,m.finalizeContactNode)(e,t,a):e.nodeType===E.UI_NODE_TYPE_VISUAL_FILTERS&&(0,m.finalizeVisualFiltersNode)(e,t);for(const a of e.subnodes||[])this.finalize(a,t,n,e)}}async changeUIPropertiesInternal(e,t){const{uiNodesInternal:n,uiNodes:a}=this.getUiNodesInternal(t),o=[],r=new Map;for(const t of e){const{nodeId:e,propertyName:i}=t,{uiNode:s}=(0,d.resolveNodeId)(e,a,n);(0,d.throwIf)(s.tooComplex,`Node ${e} too complex - no property change`),(0,d.throwIf)(!s[i]&&!s.uiProperties,`Unknown property ${i} in node ${e}`),s[i]&&s[i].tooComplex&&(0,d.throwIf)(!["valueHelpText","valueHelpTextArrangement"].includes(i),`Property ${i} in node ${e} too complex`);const l=JSON.stringify(e);r.get(l)||(r.set(l,[]),o.push(e)),r.get(l).push(t)}const i=[],s=new Map;for(const e of o){const o=(0,d.resolveNodeId)(e,a,n),{targetChanges:l,configChanges:p}=this.changeUIPropertiesForNode(t,o.uiNode,o.uiNodeInternal,o.parentUINodeInternal,o.rootUINodeInternal,r.get(JSON.stringify(e)));i.push(...l);for(const[e,t]of p?.entries()||[])s.set(e,t)}return i.length&&await this.setTargetAnnotations(t,this.toBeChangedFileUri,i),s}setPageConfiguration(e,t){let n;try{this.checkConfiguration(e),this.pageContext.configuration=e,t?.contextPath&&(this.pageContext.contextPath=t.contextPath),t?.entitySetName&&(this.pageContext.entitySetName=t.entitySetName),void 0!==t?.macros&&(this.pageContext.macros=t.macros)}catch(e){n=e instanceof s.ApiError?e:new s.ApiError(`Set Page Configuration Failed: ${e}`)}n&&this.throwException(n)}async getUINodes(){let e;try{const e=await this.startApiUsage({refresh:!0}),{uiNodes:t}=this.getUiNodesInternal(e),n=e.pageContext.type===u.PAGE_TYPE_LR&&!t.some((e=>!(0,E.isTooComplex)(e)&&e.nodeType===E.UI_NODE_TYPE_VISUAL_FILTERS));return{nodes:t,dialogsContext:(0,d.getDialogsContext)(e,n)}}catch(t){e=t instanceof s.ApiError?t:new s.ApiError(`Reading UI Nodes failed: ${t}`)}e&&this.throwException(e)}async getUIProperties(e){let t;try{const t=await this.startApiUsage();t.includeNonApplicablePropertiesForNode=e;const{uiNodes:n}=this.getUiNodesInternal(t),{uiNode:a}=(0,d.resolveNodeId)(e,n);return a.uiProperties||null}catch(n){t=n instanceof s.ApiError?n:new s.ApiError(`Reading UI Properties for ${e} failed: ${n}`)}t&&this.throwException(t)}async changeUIProperties(e){let t;try{if(!await this.getAnnotationFileUri())throw new d.ApiLocalAnnotationFileMissing("Missing local annotation file to write changes");const t=await this.startApiUsage({toWrite:!0});return t.omitConversionToExternalPropDef=!0,await this.changeUIPropertiesInternal(e,t)}catch(e){t=e instanceof s.ApiError?e:new s.ApiError(`Changing properties failed: ${e}`)}t&&this.throwException(t)}async getCreateUINodeOptions(e,t,n){let a;try{const a=await this.startApiUsage(),{uiNodesInternal:o,uiNodes:r}=this.getUiNodesInternal(a),i=(t=t||(0,d.getRootNodeIdForCreation)(r,e.nodeType))?(0,d.resolveNodeId)(t,r,o).uiNode:null;t&&((0,E.isTooComplex)(i)?(0,d.throwError)(`Parent ${t} too complex for creation of UI Node`):function(e,t){return e.nodeType!==E.UI_NODE_TYPE_ANALYTICAL_CHART||!(t||[]).includes(`${E.UI_NODE_TYPE_SECTION}/analyticalChart`)}(e,i.allowedSubnodeTypes)&&!(i.allowedSubnodeTypes||[]).some((t=>t.startsWith(e.nodeType)))&&(0,d.throwError)(`Creation of node with type ${e.nodeType} not supported in parent node (type ${i.nodeType})`));const s=this.getEntityTypeForParentNode(a,i,r)||a.pageBase.entityTypeName;return this.getCreateUINodeOptionsInternal(a,s,e,t,i,n)}catch(t){const n=`${e.nodeType}`+e.subNodeType?`/${e.subNodeType}`:"";a=t instanceof s.ApiError?t:new s.ApiError(`Adding node (type '${n}') failed. ${t}`)}a&&this.throwException(a)}async createUINode(e,t){let n;try{if(!await this.getAnnotationFileUri())throw new d.ApiLocalAnnotationFileMissing("Missing local annotation file to write changes");const n=await this.startApiUsage({toWrite:!0}),{uiNodesInternal:a,uiNodes:o}=this.getUiNodesInternal(n);t&&((0,d.isSameNodeId)(t,[0])||(0,d.isSameNodeId)(t,[1]))&&t[0]>=o.length&&(t=null);const r=e[0]?.nodeType;let i,s;(t=t||(0,d.getRootNodeIdForCreation)(o,r,e[0]))&&(({uiNodeInternal:s,uiNode:i}=(0,d.resolveNodeId)(t,o,a)),(0,d.throwIf)((0,E.isTooComplex)(i),`Parent ${t} too complex for creation of UI Node`));const l=this.getEntityTypeForParentNode(n,i,o)||n.pageBase.entityTypeName;e.findIndex((e=>e.nodeType!==r))>=0&&(0,d.throwError)("createUINode: only single nodeType allowed in creationParameters"),this.checkCreationParameters(n,l,e,t,i);const p={uiNodes:o,uiNodesInternal:a,parentUINode:i,parentUINodeInternal:s},c=(0,h.createUINode)(n,l,e,t,p);return c.targetChanges.length&&await this.setTargetAnnotations(n,this.toBeChangedFileUri,c.targetChanges),c.configChanges}catch(e){n=e instanceof s.ApiError?e:new s.ApiError(`Adding fields to section failed. ${e}`)}n&&this.throwException(n)}async deleteUINode(e){const t=Array.isArray(e[0])?e.sort():[e],n=(0,d.buildRangeArray)(t);let a;try{if(!await this.getAnnotationFileUri())throw new d.ApiLocalAnnotationFileMissing("Missing local annotation file to write changes");const e=await this.startApiUsage({toWrite:!0}),{uiNodesInternal:a,uiNodes:o}=this.getUiNodesInternal(e);this.checkUINodesForDeletion(t,o,a);const r=[],i=new Map;for(const t of n.reverse()){const n=(0,h.deleteUINodeRange)(e,t,o,a);r.push(...n.targetChanges),[...n.configChanges?.keys()||[]].forEach((e=>i.set(e,n.configChanges.get(e))))}return r.length&&await this.setTargetAnnotations(e,this.toBeChangedFileUri,r),i}catch(t){const n=JSON.stringify(e);a=t instanceof s.ApiError?t:new s.ApiError(`Deleting UI Node ${n} failed: ${t}`)}a&&this.throwException(a)}async moveUINode(e,t,n){let a;const o=Array.isArray(e[0])?e.sort():[e],r=(0,d.buildRangeArray)(o);try{if(!await this.getAnnotationFileUri())throw new d.ApiLocalAnnotationFileMissing("Missing local annotation file to write changes");const a=await this.startApiUsage({toWrite:!0}),{uiNodesInternal:o,uiNodes:i}=this.getUiNodesInternal(a),{uiNode:s}=(0,d.resolveNodeId)(t.slice(0,t.length-1),i);(0,E.isTooComplex)(s)||(t[t.length-1]=Math.min(t[t.length-1],s?.subnodes?.length||0));const l=[];for(const a of r)this.processNodeRangeMove(a,o,i,e,t,l,n);l.length&&await this.setTargetAnnotations(a,this.toBeChangedFileUri,l)}catch(t){const n=JSON.stringify(e);a=t instanceof s.ApiError?t:new s.ApiError(`Moving UI Node ${n} failed: ${t}`)}a&&this.throwException(a)}processNodeRangeMove(e,t,n,a,o,r,i){const{fromIndex:s,toIndex:l,count:p}=(0,d.resolveNodeIdRange)(e),{parentUINode:c,parentUINodeInternal:u,uiNode:y,rootUINodeInternal:g}=(0,d.resolveNodeId)(e.from,n,t);if((0,E.isTooComplex)(c))throw new d.ApiComplexityError(`Move source UINode '${a}' too complex`,c);(0,d.throwIf)(c.nodeType===E.UI_NODE_TYPE_VISUAL_FILTERS,"Moving visual filters is not supported"),(0,d.throwIf)(!(0,d.haveSameParent)(e.from,o),`Cannot move between different nodes (node type "${c.nodeType}")`);const f=o[o.length-1];if(i?.toggleInline&&c.nodeType===E.UI_NODE_TYPE_LIST)(0,d.throwIf)((0,m.isSemanticButtonUINode)(y)&&y.inline.value,"Actions with criticality not supported in table headers"),r.push(...(0,d.moveWithInlineToggle)(u,p,s,f,i));else if(s<=f&&f<=l+1);else{const t={nodeType:y.nodeType,parentUINode:c,parentUINodeInternal:u,rootUINodeInternal:g,nodeIdRange:e,targetChanges:r,options:i};r.push(...(0,d.moveUINodeSameParent)(t,f))}}async cleanUpAnnotationFiles(e,t=!1){let n;try{const n=[],a=await this.getAnnotationFileUri();if(t&&!a)throw new d.ApiLocalAnnotationFileMissing("No annotations to remove as local annotation file is not defined.");let o=await this.startApiUsage({toWrite:!0});const r=await(0,T.getDeletionChanges)({appName:this.appName,project:this.project,serviceName:this.serviceName},o,this.toBeChangedFileUri,e);for(const[e,a]of r.entries()){const r=(0,T.getDeleteAnnotationList)(o,this.toBeChangedFileUri,a.changes);r.length&&n.push({targetValue:a.targetPath,annotationList:r}),t&&(e>0&&(o=await this.startApiUsage({refresh:!0,toWrite:!0})),await this.setTargetAnnotations(o,this.toBeChangedFileUri,[a]))}return n}catch(e){n=e instanceof s.ApiError?e:new s.ApiError(`Cleaning Unreferenced Annotation Failed. ${e}`)}n&&this.throwException(n)}}},63251:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageAnnotationHelperCP=void 0;const a=n(56890),o=n(23635),r=n(91310);class PageAnnotationHelperCP extends a.PageAnnotationHelper{getUiNodesInternal(e){const t=[],n=[],a=(0,r.loadUiNodeInternalMacros)(e.pageContext.macros||[],e,[0]);if(a){const i=(0,o.isTooComplex)(a)?a:(0,r.convertUiNodeInternalMacros)(a,e);n.push(a),t.push(i)}return{uiNodesInternal:n,uiNodes:t}}}t.PageAnnotationHelperCP=PageAnnotationHelperCP},70773:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getValuesFromAllSubSets=t.getCreateUINodeOptionsInternal=t.deleteUINodeRange=t.createUINode=t.checkCreationParameter=t.getNodeInfoFromCreationParams=void 0;const a=n(23635),o=n(78263),r=n(91310),i=n(35586);function s(e,t,n){return e===o.PAGE_TYPE_OP&&[a.UI_NODE_TYPE_SECTION,a.UI_NODE_TYPE_DATA_POINT,a.UI_NODE_TYPE_ANALYTICAL_CHART].includes(n)}function l(e,t,n,o,r){const{uiNodes:s,uiNodesInternal:l,parentUINode:p,parentUINodeInternal:c}=r,u=n[0].nodeType,m=(p?.nodeType||"")===a.UI_NODE_TYPE_SECTION?c:null;m&&"Collection"!==p?.sectionType&&(0,i.throwError)(`Parent ${p.nodeId} needs SectionType 'Collection' to create subsection`);const d=o?[o[0]]:(0,i.getRootNodeIdForCreation)(s,u,n[0]);return{targetChanges:I(e,u,t,n,d?(0,i.resolveNodeId)(d,s,l).rootUINodeInternal:null,m)}}function p(e,t,n){return t===a.UI_NODE_TYPE_PAGE_ACTIONS&&[a.UI_NODE_TYPE_ACTION,a.UI_NODE_TYPE_NAVIGATION].includes(n)}function c(e,t,n,a,o){return{targetChanges:(0,r.insertPageAction)(o.parentUINodeInternal,n)}}function u(e,t,n){return(t===a.UI_NODE_TYPE_LIST||e===o.PAGE_TYPE_LR)&&[a.UI_NODE_TYPE_COLUMN,a.UI_NODE_TYPE_ACTION,a.UI_NODE_TYPE_CHART,a.UI_NODE_TYPE_CONTACT,a.UI_NODE_TYPE_NAVIGATION].includes(n)}function m(e,t,n,i,s){const{uiNodesInternal:l,parentUINodeInternal:p}=s,c=p||S(l,a.UI_NODE_TYPE_LIST),u=e.pageContext.type===o.PAGE_TYPE_OP?(0,a.resolvePath)(p.annotationPath).target:t;return{targetChanges:(0,r.appendToList)(e,c,u,n)}}function d(e,t,n){return e===o.PAGE_TYPE_OP&&[a.UI_NODE_TYPE_ACTION,a.UI_NODE_TYPE_FORM_FIELD,a.UI_NODE_TYPE_COLUMN,a.UI_NODE_TYPE_CONTACT,a.UI_NODE_TYPE_NAVIGATION].includes(n)}function y(e,t,n,a,o){const{parentUINode:s,parentUINodeInternal:l}=o,p=n[0].nodeType;return s||(0,i.throwError)(`Parent section node is needed for node creation (node type "${p}")`),"Collection"===s.sectionType&&(0,i.throwError)(`Parent ${s.nodeId} is GroupSection: only Sections can be added`),{targetChanges:(0,r.insertDataField)(e,s,l,n)}}function g(e,t,n){return e===o.PAGE_TYPE_OP&&n===a.UI_NODE_TYPE_CONNECTED_FIELDS}function f(e,t,n,a,o){const{parentUINode:s,parentUINodeInternal:l}=o,p=n[0].nodeType;return s||(0,i.throwError)(`Parent section node is needed for node creation (node type "${p}")`),{targetChanges:(0,r.insertConnectedFields)(e,l,n)}}function h(e,t,n){return e===o.PAGE_TYPE_OP&&n===a.UI_NODE_TYPE_CHART}function T(e,t,n,a,o){const{parentUINode:i,parentUINodeInternal:s}=o;return{targetChanges:(0,r.getTargetChangesForChartNode)(e,i,s,t,n)}}function P(e,t,n){return n===a.UI_NODE_TYPE_FILTER_FIELD}function E(e,t,n,o,s){const{uiNodes:l,uiNodesInternal:p}=s,c=o?(0,i.resolveNodeId)(o,l,p).uiNodeInternal:S(p,a.UI_NODE_TYPE_FILTER_FIELDS);return{targetChanges:(0,r.appendToFilterFields)(e,c,t,n)}}function v(e,t,n){return n===a.UI_NODE_TYPE_VISUAL_FILTER}function b(e,t,n,o,i){const s=n[0],l=(0,r.createUINodeVisualFilter)(e,t,s);return l.targetChanges.push(...function(e,t,n,o){const{uiNodesInternal:i}=o;let s=[];const l=i.filter((e=>e.nodeType===a.UI_NODE_TYPE_FILTER_FIELDS))[0];if(!function(e,t){let n=!1;return(e?.subnodes??[]).forEach((e=>{e.propertyPath===t&&(n=!0)})),n}(l,n.filterField)&&!l?.readonly){const o={nodeType:a.UI_NODE_TYPE_FILTER_FIELD,path:n.filterField};s=(0,r.appendToFilterFields)(e,l,t,[o])}return s}(e,t,s,i)),l}function _(e,t,n){return n===a.UI_NODE_TYPE_LIST}function A(e,t,n,a,o){const i=n[0];return(0,r.createUINodeList)(e,i)}function C(e,t,n){return e===o.PAGE_TYPE_LR&&n===a.UI_NODE_TYPE_ANALYTICAL_CHART}function N(e,t,n,a,o){const i=n[0];return(0,r.createUINodeAnalyticalChart)(e,i)}function I(e,t,n,o,i,s){let l=[];switch(t){case a.UI_NODE_TYPE_SECTION:l=(0,r.createSection)(e,n,o,i,s);break;case a.UI_NODE_TYPE_ANALYTICAL_CHART:l=(0,r.createAnalyticalChartSection)(e,n,o,i,s);break;case a.UI_NODE_TYPE_DATA_POINT:l=(0,r.createDataPoint)(e,n,o,i)}return l}function S(e,t){return e.find((e=>!(0,a.isTooComplex)(e)&&e.nodeType===t))}function x(e){const t=new Set;return e.forEach((e=>{e.forEach((e=>{t.add(e)}))})),t}function O(e,t,n,o,r){let s;(0,i.throwIf)(!r,`Parent missing for creation of UI Node (type '${n}') in OP`),s=r.referencedAnnoIndexKey?e.selectable[o].get(r.referencedAnnoIndexKey):x(e.selectable[o]);const l=r.relativePath,p={expandFirstLevel:!0,expandToPaths:s,removeExpandToNodes:!0,allowedTypes:new Set([...n===a.UI_NODE_TYPE_CONNECTED_FIELDS?[]:[a.ExpressionType.Collection]])},c=(0,i.getPathValueHelpTree)(e,t,p);return l&&(0,i.filterValueHelpNodesByPath)(c.nodes,l),{paths:c,nodeType:n}}t.getNodeInfoFromCreationParams=function(e){const t=e.nodeType;let n;switch(t){case a.UI_NODE_TYPE_COLUMN:n=e.columnType;break;case a.UI_NODE_TYPE_SECTION:n=e.sectionType;break;case a.UI_NODE_TYPE_CHART:n=e.nodeSubType;break;case a.UI_NODE_TYPE_DATA_POINT:n=e.visualizationType}return n?{nodeType:t,subNodeType:n}:{nodeType:t}},t.checkCreationParameter=function(e,t,n){let s,l,p;switch(e.nodeType){case a.UI_NODE_TYPE_COLUMN:case a.UI_NODE_TYPE_CONTACT:s=t.path,({id:p,nodes:l}=e.paths),(0,i.isValidPathForValueHelpTree)(n,p,l,s)||(0,i.throwError)(`Invalid path '${s}' for ${e.nodeType}`);break;case a.UI_NODE_TYPE_FILTER_FIELD:s=t.path,e.paths.includes(s)||(0,i.throwError)(`Invalid path '${s}' for ${e.nodeType}`);break;case a.UI_NODE_TYPE_VISUAL_FILTER:{const a=t,o=e;(0,r.checkCreationParametersVisualFilter)(n,a,o);break}case a.UI_NODE_TYPE_ACTION:{const n=t.action;e.actions.includes(n)||(0,i.throwError)(`Invalid action '${n}' for ${e.nodeType}`);break}case a.UI_NODE_TYPE_NAVIGATION:{const n=t.semanticObjectAction;t.semanticObjectName&&n||(0,i.throwError)(`Invalid navigation params for ${e.nodeType}`);break}case a.UI_NODE_TYPE_ANALYTICAL_CHART:if(n.pageContext.type===o.PAGE_TYPE_LR){const a=t,o=e;(0,r.checkCreationParametersAnalyticalChart)(n,a,o)}break;case a.UI_NODE_TYPE_LIST:{const n=t.entitySet;e.entitySets.find((e=>e.value===n))||(0,i.throwError)(`Invalid entity set '${n}' for ${e.nodeType}`);break}case a.UI_NODE_TYPE_FORM_FIELD:s=t.path,({nodes:l,id:p}=e.paths),(0,i.throwIf)(!(0,i.isValidPathForValueHelpTree)(n,p,l,s),`Invalid path ${s} for form field`);break;case a.UI_NODE_TYPE_CONNECTED_FIELDS:({id:p,nodes:l}=e.paths),s=t.path1,(0,i.throwIf)(!(0,i.isValidPathForValueHelpTree)(n,p,l,s),`Invalid path '${s}' for ${e.nodeType}`),s=t.path2,(0,i.throwIf)(!(0,i.isValidPathForValueHelpTree)(n,p,l,s),`Invalid path '${s}' for ${e.nodeType}`);break;case a.UI_NODE_TYPE_SECTION:"Table"===t.sectionType&&(s=t.pathForTable,(0,i.throwIf)(!e.pathsForTable.includes(s),`Invalid path ${s} for table section`));break;case a.UI_NODE_TYPE_CHART:{const a=t?.association||"",o=t.value,r=e,{id:s,nodes:l}=r.paths[a];(0,i.throwIf)(!(0,i.isValidPathForValueHelpTree)(n,s,l,o),`Invalid path ${o} for chart measure`);const{id:p,nodes:c}=r.pathsIncludingHidden[a],u=t.targetValue;(0,i.throwIf)(u&&!(0,i.isValidPathForValueHelpTree)(n,p,c,u),`Invalid target value path ${u} for chart`)}break;case a.UI_NODE_TYPE_DATA_POINT:{const{path:a,visualizationType:o}=t,r=e,{id:s,nodes:l}=r.paths;(0,i.throwIf)(!r.visualizationTypes.includes(o),`Invalid visualizationType ${o} for dataPoint creation`),(0,i.throwIf)(!(0,i.isValidPathForValueHelpTree)(n,s,l,a),`Invalid path ${a} for dataPoint creation`)}}},t.createUINode=function(e,t,n,a,o){const r=e.pageContext.type,i=n[0].nodeType,I=o.parentUINode?.nodeType||"",S=[{gate:s,creator:l},{gate:p,creator:c},{gate:u,creator:m},{gate:d,creator:y},{gate:h,creator:T},{gate:P,creator:E},{gate:v,creator:b},{gate:_,creator:A},{gate:C,creator:N},{gate:g,creator:f}].find((e=>e.gate(r,I,i)))?.creator;return S?S(e,t,n,a,o):{targetChanges:[]}},t.deleteUINodeRange=function(e,t,n,s){const l=[];let p=new Map;const{uiNodeInternal:c,parentUINode:u,parentUINodeInternal:m}=(0,i.resolveNodeId)(t.from,n,s),{fromIndex:d,count:y}=(0,i.resolveNodeIdRange)(t);if(1===t.from.length&&!(0,a.isTooComplex)(c)&&c.nodeType===a.UI_NODE_TYPE_ANALYTICAL_CHART)return l.push(...(0,r.deleteAnalyticalChartFromAlp)(e)),p.set(a.UI_NODE_TYPE_ANALYTICAL_CHART,""),{targetChanges:l,configChanges:p};const g=function(e){const t=(0,a.isTooComplex)(e)?"":e.nodeType;let n;switch(t){case a.UI_NODE_TYPE_COLUMN:n=e.columnType;break;case a.UI_NODE_TYPE_SECTION:n=e.sectionType;break;case a.UI_NODE_TYPE_CHART:n=e.nodeSubType;break;case a.UI_NODE_TYPE_DATA_POINT:n=e.visualizationType}return n?{nodeType:t,subNodeType:n}:{nodeType:t}}(u);if((0,i.isSectionNodeDeletable)(g)){const e=s[(0,i.getRootNodeIndex)(t.from)],n=g.nodeType===a.UI_NODE_TYPE_SECTION?m:null;return l.push((0,r.deleteSection)(e,d,y,n)),{targetChanges:l}}switch(g.nodeType){case a.UI_NODE_TYPE_PAGE_ACTIONS:l.push((0,r.deletePageAction)(m,d,y));break;case a.UI_NODE_TYPE_LIST:l.push((0,r.getDeleteChangesForList)(m,d,y));break;case a.UI_NODE_TYPE_FILTER_FIELDS:l.push((0,r.getDeleteChangesForFilterFields)(m,d,y));break;case a.UI_NODE_TYPE_VIEWS:{const t=(0,r.getDeleteChangesForViews)(e,d,y);l.push(...t.targetChanges),p=t.configChanges;break}case a.UI_NODE_TYPE_VISUAL_FILTERS:{const t=e.pageContext.configuration.get(a.UI_NODE_TYPE_VISUAL_FILTERS);t.splice(d,y),p=new Map([[a.UI_NODE_TYPE_VISUAL_FILTERS,[...t]]]),l.push(...(0,r.getDeleteChangesForVisualFilters)(m,d,y));break}default:e.pageContext.type===o.PAGE_TYPE_OP&&l.push((0,r.deleteDataField)(m,d,y))}return{targetChanges:l,configChanges:p}},t.getCreateUINodeOptionsInternal=function(e,t,n,s,l,p){const c=e.metadataService.getMetadataElement(t);switch(c&&c.isEntityType||(0,i.throwError)(`Path could not be resolved to EntityName: ${t}`),l&&(0,a.isTooComplex)(l)&&(0,i.throwError)(`Cannot create UI Node for too complex parent: ${l.nodeId}`),n.nodeType){case a.UI_NODE_TYPE_ACTION:return function(e,t,n,r){let s;if(r&&r.nodeType===a.UI_NODE_TYPE_SECTION&&"Table"===r?.sectionType){const n=r.relativePath||"",o=(0,a.resolveMetadataElement)(e.metadataService,t+"/"+n),l=o?o.path:"";s=(0,i.getSelectableActions)(e,{entityTypeName:l})}else s=e.pageContext.type===o.PAGE_TYPE_LR?(0,i.getSelectableActions)(e,{entityTypeName:t,nodeId:n}):(0,i.getSelectableActions)(e);return{nodeType:a.UI_NODE_TYPE_ACTION,actions:s}}(e,t,s,l);case a.UI_NODE_TYPE_COLUMN:return function(e,t,n,r,s){const{nodeType:l,subNodeType:p}=n;let c,u,m=t;if(e.pageContext.type===o.PAGE_TYPE_OP){(0,i.throwIf)(!s,"Parent missing for creation of UI Node (type 'Table') in OP");const{nodeType:t,annotationPath:n}=s;(0,i.throwIf)(t!==a.UI_NODE_TYPE_LIST,"Parent UI Node needs to be Section type 'Table'"),m=(0,a.resolvePath)(n).target,c=(0,a.resolveMetadataElement)(e.metadataService,m)}else c=e.metadataService.getMetadataElement(t);(0,i.throwIf)(!c?.isEntityType,`Path could not be resolved to EntityName: ${m}`),u=r?e.parentNodes.find((e=>(0,i.isSameNodeId)(e.nodeId,r))):e.parentNodes.find((e=>e.nodeType===a.UI_NODE_TYPE_LIST));const d={expandFirstLevel:!0,expandToPaths:u?.containedFields,removeExpandToNodes:!0,allowedTypes:new Set([a.ExpressionType.Collection])};let y;"Basic"===p?y=(0,i.getPathValueHelpTree)(e,c,d):(d.expandToPaths=u?.containedNumericFields,y=(0,i.getPathValueHelpTree)(e,c,{...d,numericOnly:!0}));return{nodeType:l,paths:y,columnType:p}}(e,t,n,s,l);case a.UI_NODE_TYPE_CONTACT:return function(e,t,n){let r,s=t;if(e.pageContext.type===o.PAGE_TYPE_OP){if((0,i.throwIf)(!n,"Parent missing for creation of UI Node (type 'Contact') in OP"),n.nodeType===a.UI_NODE_TYPE_LIST)s=(0,a.resolvePath)(n.annotationPath).target;else{const e=n,{nodeType:o,sectionType:r}=e;(0,i.throwIf)(o!==a.UI_NODE_TYPE_SECTION,`Unsupported node type '${o}' for creating Contact node`),["FieldGroup","Identification"].includes(r)||(0,i.throwError)(`Unsupported Section type '${r}' for creating Contact node`),s=t+(e.relativePath?"/"+e.relativePath:"")}r=(0,a.resolveMetadataElement)(e.metadataService,s)}else r=e.metadataService.getMetadataElement(t);r&&r.isEntityType||(0,i.throwError)(`Path could not be resolved to EntityName: ${s}`);const l={stringOnly:!0,expandFirstLevel:!0},p=(0,i.getPathValueHelpTree)(e,r,l);return{nodeType:a.UI_NODE_TYPE_CONTACT,paths:p}}(e,t,l);case a.UI_NODE_TYPE_CHART:return function(e,t,n,s){e.pageContext.type!==o.PAGE_TYPE_OP||n||"Column"!==s||(0,i.throwError)("Parent missing for creation of UI Node (type 'Chart') in OP");let l;if(e.pageContext.type===o.PAGE_TYPE_LR)l=t;else if("Column"===s){const{nodeType:e,annotationPath:t}=n;e!==a.UI_NODE_TYPE_LIST&&(0,i.throwError)("Parent UI Node needs to be 'list' node below Section type 'Table'"),l=(0,a.resolvePath)(t).target}else"HeaderSection"===s?(n&&!(0,a.isTooComplex)(n)&&n.nodeType!==a.UI_NODE_TYPE_HEADER_SECTIONS&&(0,i.throwError)(`Unsupported node type '${n.nodeType}' for creating Chart node`),l=t):(0,i.throwError)(`Unknown chart node subtype '${s}'`);const p=(0,a.resolveMetadataElement)(e.metadataService,l);return(0,r.getCreateChartNodeOptions)(e,p)}(e,t,l,n.subNodeType);case a.UI_NODE_TYPE_ANALYTICAL_CHART:return(0,r.getCreateAnalyticalChartNodeOptions)(e);case a.UI_NODE_TYPE_NAVIGATION:return{nodeType:a.UI_NODE_TYPE_NAVIGATION};case a.UI_NODE_TYPE_SECTION:return function(e,t,n){e.toManyAssociations||(e.toManyAssociations=(0,i.getAvailableManyAssociationPathsForEntity)(e.metadataService,t));const o={nodeType:a.UI_NODE_TYPE_SECTION,sectionTypes:["FieldGroup","Table"],pathsForTable:e.toManyAssociations};n&&n.nodeType!==a.UI_NODE_TYPE_FORM&&"Collection"!==n?.sectionType||o.sectionTypes.unshift("Collection");e.selectable.identificationSection&&o.sectionTypes.push("Identification");return o}(e,c,l);case a.UI_NODE_TYPE_FORM_FIELD:return function(e,t,n){return O(e,t,a.UI_NODE_TYPE_FORM_FIELD,"formFieldsUsed",n)}(e,c,l);case a.UI_NODE_TYPE_DATA_POINT:return function(e,t,n,o){n&&!(0,a.isTooComplex)(n)&&n.nodeType!==a.UI_NODE_TYPE_HEADER_SECTIONS&&(0,i.throwError)(`Unsupported node type '${n.nodeType}' for creating DataPoint node`);const r=(0,a.resolveMetadataElement)(e.metadataService,t),s=(0,i.getPathValueHelpTree)(e,r,"Basic"===o?{suppressedTypes:new Set([a.ExpressionType.Unknown,a.ExpressionType.Bool]),expandFirstLevel:!0}:{numericOnly:!0,expandFirstLevel:!0});return{nodeType:a.UI_NODE_TYPE_DATA_POINT,visualizationTypes:["Basic","Progress","Rating"],paths:s}}(e,t,l,n.subNodeType);case a.UI_NODE_TYPE_CONNECTED_FIELDS:return function(e,t,n){return O(e,t,a.UI_NODE_TYPE_CONNECTED_FIELDS,"formConnectedFieldsUsed",n)}(e,c,l);case a.UI_NODE_TYPE_LIST:return(0,r.getCreateListNodeOptions)(e);case a.UI_NODE_TYPE_FILTER_FIELD:return(0,r.getUINodeOptionsFilterField)(e,t,n.nodeType,l);case a.UI_NODE_TYPE_VISUAL_FILTER:return(0,r.getCreateVisualFilterNodeOptions)(e,l,p)}},t.getValuesFromAllSubSets=x},50943:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageAnnotationHelperLR=void 0;const a=n(56890),o=n(23635),r=n(91310),i=n(35586);class PageAnnotationHelperLR extends a.PageAnnotationHelper{getUiNodesInternal(e){const t=[],n=[],a=e.pageBase.entityTypeName,r=(0,i.getRootNodeConfig)(e,o.UI_NODE_TYPE_VIEWS),s=r.configured;s||this.addUINodeList(e,t,n),this.addUINodeFilterFields(e,t,n);const l=e.pageContext.configuration.get(o.UI_NODE_TYPE_VISUAL_FILTERS);if(l){const a=Array.isArray(l)?l:[l];this.addUINodeVisualFilters(e,a,t,n)}s&&this.addUINodeViews(e,t,n,r.annotationPaths,r.configuredPaths),s||this.addUINodeAnalyticalChart(e,a,t,n),e.pageContext.macros?.length&&this.addUINodeMacros(e,t,n);for(const n of t)(0,o.isTooComplex)(n)||this.finalize(n,e,n);return{uiNodesInternal:n,uiNodes:t}}addUINodeFilterFields(e,t,n){const a=e.pageBase.entityTypeName,i=(0,r.loadUiInternalFilterFields)(a,e,[t.length]);if(i){const s=(0,o.isTooComplex)(i)?i:(0,r.convertUiNodeInternalFilterFields)(i,e,a);n.push(i),t.push(s)}}addUINodeVisualFilters(e,t,n,a){const i=(0,r.loadUiNodeInternalVisualFilters)(t,e,[n.length]);if(i){const t=(0,o.isTooComplex)(i)?i:(0,r.convertUiNodeInternalVisualFilters)(i,e);a.push(i),n.push(t)}}addUINodeMacros(e,t,n){const a=(0,r.loadUiNodeInternalMacros)(e.pageContext.macros,e,[t.length]);if(a){const i=(0,o.isTooComplex)(a)?a:(0,r.convertUiNodeInternalMacros)(a,e);n.push(a),t.push(i)}}addUINodeList(e,t,n){const a=(0,i.getRootNodeConfig)(e,o.UI_NODE_TYPE_ANALYTICAL_CHART),s=(0,i.getRootNodeConfig)(e,o.UI_NODE_TYPE_LIST),l=[t.length],p=(0,r.loadUiNodeInternalList)(e,s.annotationPath,s.configured?s.configuredPath:"",l,{isAlp:a.configured});if(p){const a=(0,o.isTooComplex)(p)?p:(0,r.convertUiNodeInternalList)(p,e);n.push(p),t.push(a)}}addUINodeAnalyticalChart(e,t,n,a){const{configured:s,annotationPath:l,configuredPath:p}=(0,i.getRootNodeConfig)(e,o.UI_NODE_TYPE_ANALYTICAL_CHART);if(s){const i=(0,r.loadUiNodeInternalAnalyticalChart)(l,p,e,[n.length],{isAlp:!0});if(i){const s=(0,o.isTooComplex)(i)?i:(0,r.convertUiNodeInternalAnalyticalChart)(i,t,e);a.push(i),n.push(s)}}}addUINodeViews(e,t,n,a,i){const s=[t.length],l=(0,r.loadUiNodeInternalViews)(a,i,e,s);if(l){const a=(0,o.isTooComplex)(l)?l:(0,r.convertUiNodeInternalViews)(l,e);n.push(l),t.push(a)}}}t.PageAnnotationHelperLR=PageAnnotationHelperLR},15381:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageAnnotationHelperOP=void 0;const a=n(98879),o=n(56890),r=n(23635),i=n(91310),s=n(35586);class PageAnnotationHelperOP extends o.PageAnnotationHelper{getUiNodesInternal(e){const t=[],n=[],a=e.pageBase.entityTypeName;e.selectable.formFieldsUsed=new Map([["",new Set]]),e.selectable.formConnectedFieldsUsed=new Map([["",new Set]]),e.selectable.identificationSection=!0,this.addUINodeForm(e,t,n,a),this.addUINodeHeaderSections(e,t,n,a),this.addUINodeHeaderInfo(e,t,n,a),this.addUINodePageActions(e,t,n,a),e.pageContext.macros?.length&&this.addUINodeMacros(e,t,n);for(const n of t)(0,r.isTooComplex)(n)||this.finalize(n,e,n);return{uiNodesInternal:n,uiNodes:t}}addUINodeForm(e,t,n,a){const o=(0,i.loadUiNodeInternalForm)(a,e,[t.length]);if(o){let s;s=(0,r.isTooComplex)(o)?o:(0,i.convertUiNodeInternalForm)(o,e,a),n.push(o),t.push(s)}}addUINodeHeaderSections(e,t,n,a){const o=(0,i.loadUiNodeInternalHeaderSections)(a,e,[t.length]);if(o){let s;s=(0,r.isTooComplex)(o)?o:(0,i.convertUiNodeInternalHeaderSections)(o,e,a),n.push(o),t.push(s)}}addUINodeHeaderInfo(e,t,n,a){const o=(0,i.loadUiNodeInternalHeaderInfo)(a,e,[t.length]);if(o){let a;a=(0,r.isTooComplex)(o)?o:(0,i.convertUiNodeInternalHeaderInfo)(o,e),n.push(o),t.push(a)}}addUINodePageActions(e,t,n,a){const o=(0,i.loadUiNodeInternalPageActions)(a,e,[t.length]);if(o){let s;s=(0,r.isTooComplex)(o)?o:(0,i.convertUiNodeInternalPageActions)(a,o,e),n.push(o),t.push(s)}}addUINodeMacros(e,t,n){const a=(0,i.loadUiNodeInternalMacros)(e.pageContext.macros,e,[t.length]);if(a){const o=(0,r.isTooComplex)(a)?a:(0,i.convertUiNodeInternalMacros)(a,e);n.push(a),t.push(o)}}async moveUINode(e,t,n){let o;const i=Array.isArray(e[0])?e.sort():[e],l=(0,s.buildRangeArray)(i);try{if(!await this.getAnnotationFileUri())throw new s.ApiLocalAnnotationFileMissing("Missing local annotation file to write changes");const a=await this.startApiUsage({toWrite:!0}),{uiNodesInternal:o,uiNodes:i}=this.getUiNodesInternal(a),{uiNode:p}=(0,s.resolveNodeId)(t.slice(0,t.length-1),i);(0,r.isTooComplex)(p)||(t[t.length-1]=Math.min(t[t.length-1],p?.subnodes?.length||0));const c=t[t.length-1],u=[];for(const a of l){const{parentUINode:l,parentUINodeInternal:p,uiNode:m,rootUINodeInternal:d}=(0,s.resolveNodeId)(a.from,i,o);if((0,r.isTooComplex)(l))throw new s.ApiComplexityError(`Move source UINode '${e}' too complex`,l);const y={nodeType:m.nodeType,parentUINode:l,parentUINodeInternal:p,rootUINodeInternal:d,nodeIdRange:a,targetChanges:u,options:n};(0,s.haveSameParent)(a.from,t)?u.push(...(0,s.moveUINodeSameParent)(y,c)):(0,s.moveUINodeDifferentParent)(y,i,o,m,t)}u.length&&await this.setTargetAnnotations(a,this.toBeChangedFileUri,u)}catch(t){const n=JSON.stringify(e);o=t instanceof a.ApiError?t:new a.ApiError(`Moving UI Node ${n} failed: ${t}`)}o&&this.throwException(o)}}t.PageAnnotationHelperOP=PageAnnotationHelperOP},89001:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAbsoluteUriFromPath=t.PageAnnotationHelper=void 0;const o=a(n(57147)),r=n(71017),i=n(57310),s=n(41810),l=n(32217),p=n(28033),c=n(34799),u=n(98879),m=n(20576),d=n(91400),y=n(12534),g=n(78263),f=n(91310),h=n(35586),T=n(83237),P=n(83407),E=n(46163),v=n(70773),b=n(57962),_=n(23635),A=n(93356),C=n(37054);let N;function I(e,t){const n=(0,r.join)(e,t);return(0,i.pathToFileURL)(n).toString()}function S(e){const t=[],n=e.changes.map((e=>{const{annotation:t,changeType:n,pointer:a,moveFromPointer:o}=e;let r=e.content;return!r&&[m.ChangeType.Insert,m.ChangeType.Update].includes(n)&&(r=(0,d.getModContentForPath)(t,a)),{changeType:n,pointer:a,moveFromPointer:o,content:r,annotation:t}}));for(const a of n)if((a.changeType||a.annotation.value||a.annotation.collection||a.annotation.record)&&a.changeType!==m.ChangeType.Delete)if(!a.changeType&&(a.annotation.value||a.annotation.collection||a.annotation.record))t.push({kind:C.ChangeType.InsertAnnotation,content:{target:e.targetPath,type:"annotation",value:a.annotation},uri:""});else switch(a.changeType){case m.ChangeType.Move:{const n=a.moveFromPointer,o=[];if(n.indexOf("-")>0){const e=n.split("/").pop().split("-").map((e=>Number(e))),t=e[0],a=e[1],r=n.split("/");r.pop();for(let e=t;e<=a;e++){const t=[...r,e].join("/");o.push(t)}}else o.push(n);const r=a.pointer.split("/"),i=Number(r.pop());t.push({kind:C.ChangeType.Move,pointer:r.join("/"),reference:{target:e.targetPath,term:a.annotation.term,qualifier:a.annotation.qualifier},moveReference:[{fromPointer:o}],index:i,uri:""});break}case m.ChangeType.Update:t.push({kind:C.ChangeType.Update,pointer:a.pointer,reference:{target:e.targetPath,term:a.annotation.term,qualifier:a.annotation.qualifier},content:x(a.content),uri:""});break;case m.ChangeType.Insert:if("annotation"===a.content.type)t.push({kind:C.ChangeType.InsertEmbeddedAnnotation,content:{type:"embedded-annotation",value:{...a.content.value}},pointer:a.pointer,reference:{target:e.targetPath,term:a.annotation.term,qualifier:a.annotation.qualifier},uri:""});else{const n=a.pointer.split("/"),o=parseInt(n[n.length-1],10),r={kind:C.ChangeType.Insert,pointer:a.pointer,reference:{target:e.targetPath,term:a.annotation.term,qualifier:a.annotation.qualifier},content:x(a.content),uri:""};Number.isNaN(o)||(r.pointer=n.slice(0,-1).join("/"),r.index=o),t.push(r)}}else{const n=a.pointer?.split("/"),o=n?.pop(),r=n?.join("/"),[i,s]=o?o?.split("-"):[];if(i&&s)for(let n=Number(i);n<=Number(s);n++)t.push({kind:C.ChangeType.Delete,pointer:r+"/"+n.toString()||"",reference:{target:e.targetPath,term:a.annotation.term,qualifier:a.annotation.qualifier},uri:""});else t.push({kind:C.ChangeType.Delete,pointer:a.pointer||"",reference:{target:e.targetPath,term:a.annotation.term,qualifier:a.annotation.qualifier},uri:""})}return t}function x(e){switch(e.type){case m.MOD_TYPE_COLLECTION:case m.MOD_TYPE_EXPRESSION:case m.MOD_TYPE_PRIMITIVE:return e;case m.MOD_TYPE_PROP_VALUE:return{...e,type:C.MOD_TYPE_PROP_VALUE};case m.MOD_TYPE_RECORD:return e;case m.MOD_TYPE_RECORD_TYPE:return{type:"primitive",value:e.value,expressionType:_.ExpressionType.String}}throw"Unsupported change type"}t.PageAnnotationHelper=class PageAnnotationHelper{constructor(e,t,n=o.default){let a;this.fs=n;try{this.project=e.project,this.serviceName=e.serviceName,this.appName=e.appName,t.configuration&&this.checkConfiguration(t.configuration),this.pageContext={...t,configuration:t.configuration||new Map},this.startApiUsageDone=!1}catch(e){a=e instanceof u.ApiError?e:new u.ApiError(`Creation of PageAnnotationHelper failed: ${e}`)}a&&this.throwException(a)}throwException(e){throw e instanceof u.ApiError&&(e.message=e.getExtendedMessage()),e}checkConfiguration(e){e.has(_.UI_NODE_TYPE_ANALYTICAL_CHART)&&!e.has(_.UI_NODE_TYPE_LIST)&&(0,h.throwError)("Inconsistent Configuration for ALP: missing configuration for UI.LineItem ('secondary')")}async getProjectContext(e=!1){N||(await(0,c.initI18n)(),N=!0);let t=await A.LcapFioriAnnotationService.createService(this.project,this.serviceName,this.appName,this.fs);const{fileUri:n,isNew:a}=await this.getToBeChangedFileUri(t,e);this.toBeChangedFileUri=n,a&&(t=await A.LcapFioriAnnotationService.createService(this.project,this.serviceName,this.appName,this.fs));const o={};for(const e of Object.keys(this.project?.apps||{}))o[e]={unifiedUri:(0,T.toUnifiedUri)(I(this.project.root,e)),appName:e.split("/").pop().split("\\").pop()};const r=(0,T.toUnifiedUri)(this.toBeChangedFileUri);await t.sync();const i=t.getMetadataService();return{annotationService:t,metadataService:i,vocabularyService:new l.VocabularyService,annotationIndex:(0,h.buildAnnotationIndex)(t,function(e){const t=(0,T.toUnifiedUri)(e),n={isAppLayerFile:t===r,isSiblingAppFile:!1,siblingAppName:""};if(n.isAppLayerFile)return n;if((0,P.isSubDirectory)((0,T.toUnifiedUri)(this.appName),t))return n;const a=Object.keys(o).find((e=>(0,P.isSubDirectory)(o[e].unifiedUri,t)));return a?(n.isSiblingAppFile=!0,n.siblingAppName=o[a].appName,n):n}.bind(this)),isCdsProject:i.isCds}}async startApiUsage(e){return(!this.projectContext||e?.refresh||!this.toBeChangedFileUri&&e?.toWrite)&&(this.projectContext=await this.getProjectContext(e?.toWrite)),this.startApiUsageDone=!0,{...this.projectContext,pageContext:this.pageContext,pageBase:(0,h.resolvePageBase)(this.projectContext.metadataService,this.pageContext),entitySetProperties:null,actions:null,toManyAssociations:null,parentNodes:[],selectable:{actionsUsed:new Map([["",new Set]]),formFieldsUsed:new Map([["",new Set]]),formConnectedFieldsUsed:new Map([["",new Set]]),identificationSection:!1}}}async setTargetAnnotations(e,t,n){let a=n.flatMap(S);const o=e.annotationService,r=new Set,i=[];for(const n of a){if(n.uri||(n.uri=t),n.kind===C.ChangeType.InsertAnnotation)continue;const a=(0,_.getAnnotationIndexKey)(n.reference.target,n.reference.term,n.reference.qualifier),o=e.annotationIndex[a];if(!r.has(a)&&o&&(o.isSplit||!o.app.length)){r.add(a);const e=o.base[0];i.push({uri:t,kind:C.ChangeType.InsertAnnotation,content:{target:n.reference.target,type:"annotation",value:e.annotation}}),n.uri=e.fileUri}r.has(a)&&(n.uri=o.base[0].fileUri)}a=a.filter((e=>e.uri===t)),o.edit([...i,...a]);const s=await o.save({resyncAfterSave:!0});e.pageContext.logFileUpdate&&s.files&&e.pageContext.logFileUpdate(`${this.project.root}/${this.toBeChangedFileUri}`)}async getAnnotationFileUri(){return this.toBeChangedFileUri||this.startApiUsageDone||await this.startApiUsage({toWrite:!1}),this.toBeChangedFileUri}async createNewAnnotationFile(){return this.toBeChangedFileUri||await this.startApiUsage({toWrite:!0}),this.toBeChangedFileUri}async getValueHelpNodeSubnodes(e,t){let n;try{const n=await this.startApiUsage();return(0,h.getValueHelpNodeSubnodes)(n,e,t)}catch(a){const o=`getValueHelpNodeSubnodes (treeId: ${e}, nodeId: ${t}) failed: ${a}`;n=a instanceof u.ApiError?a:new u.ApiError(o)}n&&this.throwException(n)}async getToBeChangedFileUri(e,t=!1){let n=!1,a="";if("Cap"===this.project?.type){const o=new y.CDSFileCreateHelper(e,this.appName,this.project);a=o.getChangeableFileUri(),!a&&t&&(a=await o.createCDSFile(),n=!0,this.project=(await(0,p.createProjectProvider)(this.project.root)).project)}else{const o=new y.EdmxFileCreateHelper(e,this.appName,this.project,this.serviceName);a=o.getChangeableFileUri(),!a&&t&&(a=await o.createEdmxFile(),n=!0,this.project=(await(0,p.createProjectProvider)(this.project.root)).project)}return{fileUri:a,isNew:n}}checkUINodesForDeletion(e,t,n){for(const a of e){const{uiNode:e,parentUINode:o}=(0,h.resolveNodeId)(a,t,n);if(e.tooComplex&&!(e.tooComplexLocations||[]).find((e=>e.reason===_.TooComplexReason.CustomViewInMultiViewLR||!!e.message)))throw new u.ApiError(`Node ${a} too complex - no deletion`);if(1!==a.length&&(0,_.isTooComplex)(o))throw new h.ApiComplexityError(`ParentNode of ${a} too complex - no deletion`,o)}}checkCreationParameters(e,t,n,a,o){let r;for(const i of n){const n=(0,v.getNodeInfoFromCreationParams)(i);r=r||this.getCreateUINodeOptionsInternal(e,t,n,a,o),(0,v.checkCreationParameter)(r,i,e)}}getEntityTypeForParentNode(e,t,n){if(t?.macroNodeId&&t?.annotationPath){const{target:n}=(0,_.resolvePath)(t.annotationPath),a=(0,s.getPathBaseMetadataElement)(e.metadataService,n);return a?.structuredType||a?.name||""}const a=t?.nodeId;let o="";const r=(0,h.getRootNodeConfig)(e,_.UI_NODE_TYPE_VIEWS);if(e.pageContext.type===g.PAGE_TYPE_LR&&r.configured&&a?.length>1){const t=n[a[0]];if(!(0,_.isTooComplex)(t)&&t.nodeType===_.UI_NODE_TYPE_VIEWS){const{target:t}=(0,_.resolvePath)(r.configuredPaths[a[1]]||"");o=e.metadataService.getMetadataElement(t)?.structuredType||""}}return o}getCreateUINodeOptionsInternal(e,t,n,a,o,r){return(0,v.getCreateUINodeOptionsInternal)(e,t,n,a,o,r)}changeUIPropertiesForNode(e,t,n,a,o,r){let i;switch((0,_.isTooComplex)(a)?"":a.nodeType){case _.UI_NODE_TYPE_PAGE_ACTIONS:i=a.identification;break;case _.UI_NODE_TYPE_LIST:i=a.lineItems;break;default:i=a.referencedAnnotation}switch(t.nodeType){case _.UI_NODE_TYPE_HEADER_INFO:return{targetChanges:(0,f.changeUIPropertyHeaderInfo)(e,t,n,(0,E.getChangedPropertiesMap)(r))};case _.UI_NODE_TYPE_SECTION:return{targetChanges:(0,f.changeUIPropertySection)(e,t,n,o,(0,E.getChangedPropertiesMap)(r))};case _.UI_NODE_TYPE_FORM_FIELD:return{targetChanges:(0,f.changeUIPropertyFormField)(e,t,n,a,(0,f.getFieldPropertiesForChange)(r))};case _.UI_NODE_TYPE_CONNECTED_FIELDS:return{targetChanges:(0,f.changeUIPropertyConnectedFields)(t,n,a,(0,f.getConnectedFieldsPropertiesForChange)(r))};case _.UI_NODE_TYPE_ACTION:return{targetChanges:(0,f.changeUIPropertyAction)(e,t,n,i,(0,f.getActionPropertiesForChange)(r))};case _.UI_NODE_TYPE_NAVIGATION:return{targetChanges:(0,f.changeUIPropertyNavigation)(e,t,n,i,(0,f.getNavigationPropertiesForChange)(r,t.nodeSubType))};case _.UI_NODE_TYPE_COLUMN:return{targetChanges:(0,f.changeUIPropertyColumn)(e,t,n,a.lineItems,(0,f.getColumnPropertiesForChange)(r,t.columnType))};case _.UI_NODE_TYPE_CHART:return{targetChanges:(0,f.changeUIPropertyChart)(e,t,n,i,o,(0,E.getChangedPropertiesMap)(r))};case _.UI_NODE_TYPE_CONTACT:return{targetChanges:(0,f.changeUIPropertyContact)(e,t,n,i,(0,E.getChangedPropertiesMap)(r))};case _.UI_NODE_TYPE_DATA_POINT:return{targetChanges:(0,f.changeUIPropertyDataPoint)(e,t,n,o,(0,E.getChangedPropertiesMap)(r))};case _.UI_NODE_TYPE_LIST:return(0,f.changeUIPropertyList)(e,t,n,a,(0,E.getChangedPropertiesMap)(r));case _.UI_NODE_TYPE_ANALYTICAL_CHART:return(0,f.changeUIPropertyAnalyticalChart)(e,t,n,a,o,(0,E.getChangedPropertiesMap)(r));case _.UI_NODE_TYPE_FILTER_FIELD:return{targetChanges:(0,f.changeUIPropertyFilterField)(e,t,n,a,(0,f.getFilterFieldPropertiesForChange)(r))};case _.UI_NODE_TYPE_VISUAL_FILTER:return{targetChanges:(0,f.changeUIPropertyVisualFilter)(e,t,n,(0,E.getChangedPropertiesMap)(r))}}return{targetChanges:[]}}finalize(e,t,n,a){if(!(0,_.isTooComplex)(e)){e.nodeType===_.UI_NODE_TYPE_PAGE_ACTIONS?(0,f.finalizePageActionsNode)(e,t):e.nodeType===_.UI_NODE_TYPE_SECTION?(0,f.finalizeSectionNode)(e,t,n):e.nodeType===_.UI_NODE_TYPE_FORM_FIELD?(0,f.finalizeFieldNode)(e,t,a):e.nodeType===_.UI_NODE_TYPE_CONNECTED_FIELDS?(0,f.finalizeConnectedFieldsNode)(e,t,a):e.nodeType===_.UI_NODE_TYPE_ACTION?(0,f.finalizeActionNode)(e,t,a):e.nodeType===_.UI_NODE_TYPE_NAVIGATION?(0,f.finalizeNavigationNode)(e,t,a):e.nodeType===_.UI_NODE_TYPE_CONTACT?(0,f.finalizeContactNode)(e,t,a):e.nodeType===_.UI_NODE_TYPE_VISUAL_FILTERS&&(0,f.finalizeVisualFiltersNode)(e,t);for(const a of e.subnodes||[])this.finalize(a,t,n,e)}}async changeUIPropertiesInternal(e,t){const{uiNodesInternal:n,uiNodes:a}=this.getUiNodesInternal(t),o=[],r=new Map;for(const t of e){const{nodeId:e,propertyName:i}=t,{uiNode:s}=(0,h.resolveNodeId)(e,a,n);(0,h.throwIf)(s.tooComplex,`Node ${e} too complex - no property change`),(0,h.throwIf)(!s[i]&&!s.uiProperties,`Unknown property ${i} in node ${e}`),s[i]&&s[i].tooComplex&&(0,h.throwIf)(!["valueHelpText","valueHelpTextArrangement"].includes(i),`Property ${i} in node ${e} too complex`);const l=JSON.stringify(e);r.get(l)||(r.set(l,[]),o.push(e)),r.get(l).push(t)}const i=[],s=new Map;for(const e of o){const o=(0,h.resolveNodeId)(e,a,n),{targetChanges:l,configChanges:p}=this.changeUIPropertiesForNode(t,o.uiNode,o.uiNodeInternal,o.parentUINodeInternal,o.rootUINodeInternal,r.get(JSON.stringify(e)));i.push(...l);for(const[e,t]of p?.entries()||[])s.set(e,t)}return i.length&&await this.setTargetAnnotations(t,this.toBeChangedFileUri,i),s}setPageConfiguration(e,t){let n;try{this.checkConfiguration(e),this.pageContext.configuration=e,t?.contextPath&&(this.pageContext.contextPath=t.contextPath),t?.entitySetName&&(this.pageContext.entitySetName=t.entitySetName),void 0!==t?.macros&&(this.pageContext.macros=t.macros)}catch(e){n=e instanceof u.ApiError?e:new u.ApiError(`Set Page Configuration Failed: ${e}`)}n&&this.throwException(n)}async getUINodes(){let e;try{const e=await this.startApiUsage({refresh:!0}),{uiNodes:t}=this.getUiNodesInternal(e),n=e.pageContext.type===g.PAGE_TYPE_LR&&!t.some((e=>!(0,_.isTooComplex)(e)&&e.nodeType===_.UI_NODE_TYPE_VISUAL_FILTERS));return{nodes:t,dialogsContext:(0,h.getDialogsContext)(e,n)}}catch(t){e=t instanceof u.ApiError?t:new u.ApiError(`Reading UI Nodes failed: ${t}`)}e&&this.throwException(e)}async getUIProperties(e){let t;try{const t=await this.startApiUsage();t.includeNonApplicablePropertiesForNode=e;const{uiNodes:n}=this.getUiNodesInternal(t),{uiNode:a}=(0,h.resolveNodeId)(e,n);return a.uiProperties||null}catch(n){t=n instanceof u.ApiError?n:new u.ApiError(`Reading UI Properties for ${e} failed: ${n}`)}t&&this.throwException(t)}async changeUIProperties(e){let t;try{if(!await this.getAnnotationFileUri())throw new h.ApiLocalAnnotationFileMissing("Missing local annotation file to write changes");const t=await this.startApiUsage({toWrite:!0});return t.omitConversionToExternalPropDef=!0,await this.changeUIPropertiesInternal(e,t)}catch(e){t=e instanceof u.ApiError?e:new u.ApiError(`Changing properties failed: ${e}`)}t&&this.throwException(t)}async getCreateUINodeOptions(e,t,n){let a;try{const a=await this.startApiUsage(),{uiNodesInternal:o,uiNodes:r}=this.getUiNodesInternal(a),i=(t=t||(0,h.getRootNodeIdForCreation)(r,e.nodeType))?(0,h.resolveNodeId)(t,r,o).uiNode:null;t&&((0,_.isTooComplex)(i)?(0,h.throwError)(`Parent ${t} too complex for creation of UI Node`):function(e,t){return e.nodeType!==_.UI_NODE_TYPE_ANALYTICAL_CHART||!(t||[]).includes(`${_.UI_NODE_TYPE_SECTION}/analyticalChart`)}(e,i.allowedSubnodeTypes)&&!(i.allowedSubnodeTypes||[]).some((t=>t.startsWith(e.nodeType)))&&(0,h.throwError)(`Creation of node with type ${e.nodeType} not supported in parent node (type ${i.nodeType})`));const s=this.getEntityTypeForParentNode(a,i,r)||a.pageBase.entityTypeName;return this.getCreateUINodeOptionsInternal(a,s,e,t,i,n)}catch(t){const n=`${e.nodeType}`+e.subNodeType?`/${e.subNodeType}`:"";a=t instanceof u.ApiError?t:new u.ApiError(`Adding node (type '${n}') failed. ${t}`)}a&&this.throwException(a)}async createUINode(e,t){let n;try{if(!await this.getAnnotationFileUri())throw new h.ApiLocalAnnotationFileMissing("Missing local annotation file to write changes");const n=await this.startApiUsage({toWrite:!0}),{uiNodesInternal:a,uiNodes:o}=this.getUiNodesInternal(n);t&&((0,h.isSameNodeId)(t,[0])||(0,h.isSameNodeId)(t,[1]))&&t[0]>=o.length&&(t=null);const r=e[0]?.nodeType;let i,s;(t=t||(0,h.getRootNodeIdForCreation)(o,r,e[0]))&&(({uiNodeInternal:s,uiNode:i}=(0,h.resolveNodeId)(t,o,a)),(0,h.throwIf)((0,_.isTooComplex)(i),`Parent ${t} too complex for creation of UI Node`));const l=this.getEntityTypeForParentNode(n,i,o)||n.pageBase.entityTypeName;e.findIndex((e=>e.nodeType!==r))>=0&&(0,h.throwError)("createUINode: only single nodeType allowed in creationParameters"),this.checkCreationParameters(n,l,e,t,i);const p={uiNodes:o,uiNodesInternal:a,parentUINode:i,parentUINodeInternal:s},c=(0,v.createUINode)(n,l,e,t,p);return c.targetChanges.length&&await this.setTargetAnnotations(n,this.toBeChangedFileUri,c.targetChanges),c.configChanges}catch(e){n=e instanceof u.ApiError?e:new u.ApiError(`Adding fields to section failed. ${e}`)}n&&this.throwException(n)}async deleteUINode(e){const t=Array.isArray(e[0])?e.sort():[e],n=(0,h.buildRangeArray)(t);let a;try{if(!await this.getAnnotationFileUri())throw new h.ApiLocalAnnotationFileMissing("Missing local annotation file to write changes");const e=await this.startApiUsage({toWrite:!0}),{uiNodesInternal:a,uiNodes:o}=this.getUiNodesInternal(e);this.checkUINodesForDeletion(t,o,a);const r=[],i=new Map;for(const t of n.reverse()){const n=(0,v.deleteUINodeRange)(e,t,o,a);r.push(...n.targetChanges),[...n.configChanges?.keys()||[]].forEach((e=>i.set(e,n.configChanges.get(e))))}return r.length&&await this.setTargetAnnotations(e,this.toBeChangedFileUri,r),i}catch(t){const n=JSON.stringify(e);a=t instanceof u.ApiError?t:new u.ApiError(`Deleting UI Node ${n} failed: ${t}`)}a&&this.throwException(a)}async moveUINode(e,t,n){let a;const o=Array.isArray(e[0])?e.sort():[e],r=(0,h.buildRangeArray)(o);try{if(!await this.getAnnotationFileUri())throw new h.ApiLocalAnnotationFileMissing("Missing local annotation file to write changes");const a=await this.startApiUsage({toWrite:!0}),{uiNodesInternal:o,uiNodes:i}=this.getUiNodesInternal(a),{uiNode:s}=(0,h.resolveNodeId)(t.slice(0,t.length-1),i);(0,_.isTooComplex)(s)||(t[t.length-1]=Math.min(t[t.length-1],s?.subnodes?.length||0));const l=[];for(const a of r)this.processNodeRangeMove(a,o,i,e,t,l,n);l.length&&await this.setTargetAnnotations(a,this.toBeChangedFileUri,l)}catch(t){const n=JSON.stringify(e);a=t instanceof u.ApiError?t:new u.ApiError(`Moving UI Node ${n} failed: ${t}`)}a&&this.throwException(a)}processNodeRangeMove(e,t,n,a,o,r,i){const{fromIndex:s,toIndex:l,count:p}=(0,h.resolveNodeIdRange)(e),{parentUINode:c,parentUINodeInternal:u,uiNode:m,rootUINodeInternal:d}=(0,h.resolveNodeId)(e.from,n,t);if((0,_.isTooComplex)(c))throw new h.ApiComplexityError(`Move source UINode '${a}' too complex`,c);(0,h.throwIf)(c.nodeType===_.UI_NODE_TYPE_VISUAL_FILTERS,"Moving visual filters is not supported"),(0,h.throwIf)(!(0,h.haveSameParent)(e.from,o),`Cannot move between different nodes (node type "${c.nodeType}")`);const y=o[o.length-1];if(i?.toggleInline&&c.nodeType===_.UI_NODE_TYPE_LIST)(0,h.throwIf)((0,f.isSemanticButtonUINode)(m)&&m.inline.value,"Actions with criticality not supported in table headers"),r.push(...(0,h.moveWithInlineToggle)(u,p,s,y,i));else if(s<=y&&y<=l+1);else{const t={nodeType:m.nodeType,parentUINode:c,parentUINodeInternal:u,rootUINodeInternal:d,nodeIdRange:e,targetChanges:r,options:i};r.push(...(0,h.moveUINodeSameParent)(t,y))}}async cleanUpAnnotationFiles(e,t=!1){let n;try{const n=[],a=await this.getAnnotationFileUri();if(t&&!a)throw new h.ApiLocalAnnotationFileMissing("No annotations to remove as local annotation file is not defined.");let o=await this.startApiUsage({toWrite:!0});const r=await(0,b.getDeletionChanges)({appName:this.appName,project:this.project,serviceName:this.serviceName},o,this.toBeChangedFileUri,e);for(const[e,a]of r.entries()){const r=(0,b.getDeleteAnnotationList)(o,this.toBeChangedFileUri,a.changes);r.length&&n.push({targetValue:a.targetPath,annotationList:r}),t&&(e>0&&(o=await this.startApiUsage({refresh:!0,toWrite:!0})),await this.setTargetAnnotations(o,this.toBeChangedFileUri,[a]))}return n}catch(e){n=e instanceof u.ApiError?e:new u.ApiError(`Cleaning Unreferenced Annotation Failed. ${e}`)}n&&this.throwException(n)}},t.getAbsoluteUriFromPath=I},4445:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.UIAnnotationEnumTypes=void 0,function(e){e.ImportanceType="com.sap.vocabularies.UI.v1.ImportanceType",e.CriticalityRepresentationType="com.sap.vocabularies.UI.v1.CriticalityRepresentationType",e.VisualizationType="com.sap.vocabularies.UI.v1.VisualizationType"}(n||(t.UIAnnotationEnumTypes=n={}))},44036:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},78263:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(48263),t),o(n(44036),t),o(n(94537),t)},48263:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.PV_PROP_NAME_SORT_ORDER_PROPERTY=t.PV_PROP_NAME_SORT_ORDER=t.PV_PROP_NAME_TEXT=t.PV_PROP_NAME_VISUALIZATIONS=t.SV_PROP_NAME_TEXT=t.CHART_PROP_NAME_DIMENSIONS=t.CHART_PROP_NAME_MEASURE_ATTRIBUTES_MEASURE=t.CHART_PROP_NAME_MEASURE_ATTRIBUTES=t.CHART_PROP_NAME_DYNAMIC_MEASURES=t.CHART_PROP_NAME_MEASURES=t.CHART_PROP_NAME_DESCRIPTION=t.CHART_PROP_NAME_TITLE=t.CHART_PROP_NAME_CHART_TYPE=t.DATA_FIELD_PROP_NAME_CRITICALITY_REPRESENTATION=t.VALUE_LIST_PROP_NAME_SELECTION_VARIANT_QUALIFIER=t.VALUE_LIST_PROP_NAME_PRESENTATION_VARIANT_QUALIFIER=t.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY=t.VALUE_LIST_PROP_NAME_LOCAL_DATA_PROPERTY=t.VALUE_LIST_PROP_NAME_PARAMETERS=t.VALUE_LIST_PROP_NAME_COLLECTION_PATH=t.VALUE_LIST_PROP_NAME_LABEL=t.DATA_FIELD_PROP_NAME_DETERMINING=t.DATA_FIELD_PROP_NAME_INLINE=t.DATA_FIELD_PROP_NAME_CRITICALITY=t.DATA_FIELD_PROP_NAME_LABEL=t.DATA_FIELD_PROP_NAME_TARGET=t.DATA_FIELD_PROP_NAME_SEMANTIC_OBJECT=t.DATA_FIELD_PROP_NAME_ACTION=t.DATA_FIELD_PROP_NAME_VALUE=t.FIELD_GROUP_PROP_NAME_DATA=t.FIELD_GROUP_PROP_NAME_LABEL=t.FACETS_PROP_NAME_FACETS=t.FACETS_PROP_NAME_TARGET=t.FACETS_PROP_NAME_ID=t.FACETS_PROP_NAME_LABEL=t.VARIANT_PROP_NAME_TEXT=t.CDS_ANNO_AGGREGATION_DEFAULT=t.CDS_TERM_VALUE_LIST=t.CDS_TERM_UPDATABLE=t.UPDATE_RESTRICTIONS=t.CDS_TERM_NAME_TEXT_ARRANGEMENT=t.CDS_TERM_NAME_READONLY=t.CDS_TERM_NAME_TITLE=t.UI_NODE_TYPE_UNKNOWN=t.isUiProperty=t.getCellValue=t.getCell=t.PAGE_TYPE_CP=t.PAGE_TYPE_LR=t.PAGE_TYPE_OP=void 0,t.sectionTypesForFields=t.FieldControl=t.CONNECTED_FIELDS_PROP_NAME_LABEL=t.CONNECTED_FIELDS_PROP_NAME_DATA=t.CONNECTED_FIELDS_PROP_NAME_TEMPLATE=t.HEADER_INFO_TYPE_NAME_PLURAL=t.HEADER_INFO_TYPE_NAME=t.DATA_POINT_PROP_NAME_DIGITS=t.DATA_POINT_PROP_NAME_SCALE_FACTOR=t.DATA_POINT_PROP_NAME_VALUE_FORMAT=t.DATA_POINT_PROP_NAME_TARGET_VALUE=t.DATA_POINT_PROP_NAME_VISUALIZATION=t.DATA_POINT_PROP_NAME_TITLE=t.DATA_POINT_PROP_NAME_VALUE=t.CONTACT_PROP_NAME_FULL_NAME=t.AGGREGATED_PROPERTY_PROP_NAME_AGGREGATABLE_PROPERTY=t.AGGREGATED_PROPERTY_PROP_NAME_AGGREGATION_METHOD=t.AGGREGATED_PROPERTY_PROP_NAME_NAME=t.APPLY_SUPPORTED_PROP_NAME_AGGREGATION_METHODS=t.APPLY_SUPPORTED_PROP_NAME_PROPERTY=t.APPLY_SUPPORTED_PROP_NAME_AGGREGATABLE=t.APPLY_SUPPORTED_PROP_NAME_GROUPABLE=t.SPV_PROP_NAME_TEXT=t.SPV_PROP_NAME_PRESENTATION_VARIANT=t.SPV_PROP_NAME_SELECTION_VARIANT=t.PV_PROP_NAME_SORT_ORDER_DESCENDING=t.PV_PROP_NAME_SORT_ORDER_DYNAMIC_PROPERTY=void 0;const r=n(23635);function i(e,t){if(!e)return null;if((0,r.isTooComplex)(e.data))return null;const n=e.data.cells[t];return(0,r.isTooComplex)(n)?null:n}o(n(4445),t),t.PAGE_TYPE_OP="ObjectPage",t.PAGE_TYPE_LR="ListReport",t.PAGE_TYPE_CP="CustomPage",t.getCell=i,t.getCellValue=function(e,t){const n=i(e,t);return null===n?null:n?.value||null};const s=[r.UI_PROP_TYPE_STRING,r.UI_PROP_TYPE_BOOL,r.UI_PROP_TYPE_ENUM,r.UI_PROP_TYPE_NUMBER,r.UI_PROP_TYPE_DECIMAL,r.UI_PROP_TYPE_MULTIPLE_ENUMS,r.UI_PROP_TYPE_MULTIPLE_DEPENDENT_ENUMS,r.UI_PROP_TYPE_DEPENDENT_ENUM,r.UI_PROP_TYPE_TABLE];var l;t.isUiProperty=function(e){return!1===e?.tooComplex&&s.includes(e?.type)},t.UI_NODE_TYPE_UNKNOWN="unknown",t.CDS_TERM_NAME_TITLE="title",t.CDS_TERM_NAME_READONLY="readonly",t.CDS_TERM_NAME_TEXT_ARRANGEMENT="com.sap.vocabularies.Common.v1.TextArrangement",t.UPDATE_RESTRICTIONS="Org.OData.Capabilities.V1.UpdateRestrictions",t.CDS_TERM_UPDATABLE="Org.OData.Capabilities.V1.Updatable",t.CDS_TERM_VALUE_LIST="cds.odata.valuelist",t.CDS_ANNO_AGGREGATION_DEFAULT="Org.OData.Aggregation.V1.default",t.VARIANT_PROP_NAME_TEXT="Text",t.FACETS_PROP_NAME_LABEL="Label",t.FACETS_PROP_NAME_ID="ID",t.FACETS_PROP_NAME_TARGET="Target",t.FACETS_PROP_NAME_FACETS="Facets",t.FIELD_GROUP_PROP_NAME_LABEL="Label",t.FIELD_GROUP_PROP_NAME_DATA="Data",t.DATA_FIELD_PROP_NAME_VALUE="Value",t.DATA_FIELD_PROP_NAME_ACTION="Action",t.DATA_FIELD_PROP_NAME_SEMANTIC_OBJECT="SemanticObject",t.DATA_FIELD_PROP_NAME_TARGET="Target",t.DATA_FIELD_PROP_NAME_LABEL="Label",t.DATA_FIELD_PROP_NAME_CRITICALITY="Criticality",t.DATA_FIELD_PROP_NAME_INLINE="Inline",t.DATA_FIELD_PROP_NAME_DETERMINING="Determining",t.VALUE_LIST_PROP_NAME_LABEL="Label",t.VALUE_LIST_PROP_NAME_COLLECTION_PATH="CollectionPath",t.VALUE_LIST_PROP_NAME_PARAMETERS="Parameters",t.VALUE_LIST_PROP_NAME_LOCAL_DATA_PROPERTY="LocalDataProperty",t.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY="ValueListProperty",t.VALUE_LIST_PROP_NAME_PRESENTATION_VARIANT_QUALIFIER="PresentationVariantQualifier",t.VALUE_LIST_PROP_NAME_SELECTION_VARIANT_QUALIFIER="SelectionVariantQualifier",t.DATA_FIELD_PROP_NAME_CRITICALITY_REPRESENTATION="CriticalityRepresentation",t.CHART_PROP_NAME_CHART_TYPE="ChartType",t.CHART_PROP_NAME_TITLE="Title",t.CHART_PROP_NAME_DESCRIPTION="Description",t.CHART_PROP_NAME_MEASURES="Measures",t.CHART_PROP_NAME_DYNAMIC_MEASURES="DynamicMeasures",t.CHART_PROP_NAME_MEASURE_ATTRIBUTES="MeasureAttributes",t.CHART_PROP_NAME_MEASURE_ATTRIBUTES_MEASURE="Measure",t.CHART_PROP_NAME_DIMENSIONS="Dimensions",t.SV_PROP_NAME_TEXT="Text",t.PV_PROP_NAME_VISUALIZATIONS="Visualizations",t.PV_PROP_NAME_TEXT="Text",t.PV_PROP_NAME_SORT_ORDER="SortOrder",t.PV_PROP_NAME_SORT_ORDER_PROPERTY="Property",t.PV_PROP_NAME_SORT_ORDER_DYNAMIC_PROPERTY="DynamicProperty",t.PV_PROP_NAME_SORT_ORDER_DESCENDING="Descending",t.SPV_PROP_NAME_SELECTION_VARIANT="SelectionVariant",t.SPV_PROP_NAME_PRESENTATION_VARIANT="PresentationVariant",t.SPV_PROP_NAME_TEXT="Text",t.APPLY_SUPPORTED_PROP_NAME_GROUPABLE="GroupableProperties",t.APPLY_SUPPORTED_PROP_NAME_AGGREGATABLE="AggregatableProperties",t.APPLY_SUPPORTED_PROP_NAME_PROPERTY="Property",t.APPLY_SUPPORTED_PROP_NAME_AGGREGATION_METHODS="SupportedAggregationMethods",t.AGGREGATED_PROPERTY_PROP_NAME_NAME="Name",t.AGGREGATED_PROPERTY_PROP_NAME_AGGREGATION_METHOD="AggregationMethod",t.AGGREGATED_PROPERTY_PROP_NAME_AGGREGATABLE_PROPERTY="AggregatableProperty",t.CONTACT_PROP_NAME_FULL_NAME="fn",t.DATA_POINT_PROP_NAME_VALUE="Value",t.DATA_POINT_PROP_NAME_TITLE="Title",t.DATA_POINT_PROP_NAME_VISUALIZATION="Visualization",t.DATA_POINT_PROP_NAME_TARGET_VALUE="TargetValue",t.DATA_POINT_PROP_NAME_VALUE_FORMAT="ValueFormat",t.DATA_POINT_PROP_NAME_SCALE_FACTOR="ScaleFactor",t.DATA_POINT_PROP_NAME_DIGITS="Digits",t.HEADER_INFO_TYPE_NAME="TypeName",t.HEADER_INFO_TYPE_NAME_PLURAL="TypeNamePlural",t.CONNECTED_FIELDS_PROP_NAME_TEMPLATE="Template",t.CONNECTED_FIELDS_PROP_NAME_DATA="Data",t.CONNECTED_FIELDS_PROP_NAME_LABEL="Label",function(e){e.Mandatory="com.sap.vocabularies.Common.v1.FieldControlType/Mandatory",e.Optional="com.sap.vocabularies.Common.v1.FieldControlType/Optional",e.ReadOnly="com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly"}(l||(t.FieldControl=l={})),t.sectionTypesForFields=["FieldGroup","Identification"]},94537:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},90553:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSemanticButtonUINode=t.evaluateInlineAndImportance=t.isMoveWithToggling=t.finalizeActionNode=t.getActionPropertiesForChange=t.changeDataFieldInline=t.changeUIPropertyAction=t.buildDataFieldForAction=t.convertUiNodeInternalAction=t.loadUiNodeInternalAction=void 0;const a=n(20576),o=n(78263),r=n(95207),i=n(35586),s=n(52564),l=n(23635),p=n(53107),c=n(46163),u=n(74181);function m(e,t,n){const r=[],i=t.annotation;let s=null,l="";if("com.sap.vocabularies.UI.v1.FieldGroup"===i.term){const t=i.record.propertyValues.findIndex((e=>e.name===o.FIELD_GROUP_PROP_NAME_DATA)),a=i.record.propertyValues[t].value;s=d(("Collection"===a.type?a.Collection:[])[n],e),l=`/record/propertyValues/${t}/value/Collection/${n}`}else"com.sap.vocabularies.UI.v1.Identification"!==i.term&&"com.sap.vocabularies.UI.v1.LineItem"!==i.term||(s=d(i.collection[n],e),l=`/collection/${n}`);if(s.changeType){l+=`/propertyValues/${s.propIndex}`,s.changeType===a.ChangeType.Update&&(l+="/value/Bool");const e={annotation:i,changeType:s.changeType,pointer:l};r.push({targetPath:t.target,changes:[e]})}return r}function d(e,t){let n=null;const r=e.propertyValues.findIndex((e=>e.name===o.DATA_FIELD_PROP_NAME_INLINE));if(void 0===t&&r>-1)e.propertyValues.splice(r,1),n=a.ChangeType.Delete;else{const i={type:"Bool",Bool:t};r>-1?(e.propertyValues[r].value=i,n=a.ChangeType.Update):(e.propertyValues.push({name:o.DATA_FIELD_PROP_NAME_INLINE,value:i}),n=a.ChangeType.Insert)}return{changeType:n,propIndex:r>-1?r:e.propertyValues.length-1}}function y(e){let t,n;const a=(0,l.getValueFromRecord)(e.dataField,o.DATA_FIELD_PROP_NAME_INLINE,l.ExpressionType.Bool);return a?a.tooComplexReason?t=(0,l.buildTooComplex)(a.tooComplexReason,a.range,e.location.fileUri):(t={tooComplex:!1,type:l.UI_PROP_TYPE_BOOL,value:a.value},n=(0,s.getImportanceUIProperty)(e.dataField,e.isChangeable,e.location)):t={tooComplex:!1,type:l.UI_PROP_TYPE_BOOL,value:!1},{inline:t,importance:n}}function g(e){return!(0,l.isTooComplex)(e)&&e.nodeType===l.UI_NODE_TYPE_ACTION&&e.uiProperties?.actionCriticality&&!(0,l.isTooComplex)(e.uiProperties?.actionCriticality)&&e.uiProperties?.actionCriticality.value!==l.ENUM_VALUE_NONE}t.loadUiNodeInternalAction=function(e,t,n,a,r,s){const p=(0,l.getValueFromRecord)(t,o.DATA_FIELD_PROP_NAME_ACTION,l.ExpressionType.String);if(p||(0,i.throwError)("UI.DataFieldForAction entry with no 'Action' property"),p.tooComplexReason)return(0,l.buildTooComplexNode)(p.tooComplexReason,p.range,n.fileUri,a);let c=p.value;if(r.actions||(r.actions=(0,i.getAvailableActions)(r.metadataService)),c.indexOf("(")>0){const e=c.split("(")[0];(r.actions.get(e)||"").includes(c)&&(c=e)}if(!r.actions.has(c))return(0,l.buildTooComplexNode)(l.TooComplexReason.UnknownAction,p.range,n.fileUri,a);const u={...a,tooComplex:!1,nodeType:l.UI_NODE_TYPE_ACTION,dataField:t,dataFieldContainingAnnotation:e,location:n,action:c,isChangeable:s,subnodes:[]},m=r.actions.get(c)?r.metadataService.getMetadataElement(r.actions.get(c))?.path:"",d=r.annotationIndex;return u.label=d[(0,l.getAnnotationIndexKey)(m,"com.sap.vocabularies.Common.v1.Label")],u.title=d[(0,l.getAnnotationIndexKey)(m,o.CDS_TERM_NAME_TITLE)],u},t.convertUiNodeInternalAction=function(e,t,n){const a=e.dataField,s=e.location.fileUri,u={nodeId:e.nodeId,annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,tooComplex:!1,nodeType:e.nodeType,location:e.location,label:(0,r.getLabel)(a,s,e),action:null,subnodes:[]};let m=[];if(n){m=[...(0,i.getAvailableActions)(t.metadataService,n).keys()].map((e=>({value:e})))}else t.actions||(t.actions=(0,i.getAvailableActions)(t.metadataService)),m=[...t.actions.keys()].map((e=>({value:e})));if(u.action={tooComplex:!1,type:l.UI_PROP_TYPE_ENUM,value:e.action,allowedValues:m},n){const{inline:t,importance:n}=y(e);u.inline=t,n&&(u.importance=n)}const d=(0,l.getValueFromRecord)(e.dataField,o.DATA_FIELD_PROP_NAME_DETERMINING,l.ExpressionType.Bool);d&&(d.tooComplexReason?u.determining=(0,l.buildTooComplex)(d.tooComplexReason,d.range,e.location.fileUri):u.determining={tooComplex:!1,type:l.UI_PROP_TYPE_BOOL,value:d.value}),t.selectable.actionsUsed.get("").add(u.action.value);const g=JSON.stringify(u.nodeId.slice(0,-1));t.selectable.actionsUsed.has(g)||t.selectable.actionsUsed.set(g,new Set),t.selectable.actionsUsed.get(g).add(u.action.value);const{target:f,term:h,qualifier:T}=(0,l.resolvePath)(e.annotationPath),P=(0,l.getAnnotationIndexKey)(f,h,T);({hidden:u.hidden,hideByProperty:u.hideByProperty}=(0,p.getHidden)(t.annotationIndex[P],e.dataField,u.location,t));const E=[u.label,u.importance,u.determining,u.inline,u.hidden,u.hideByProperty];return function(e,t,n,a){const o={context:e,layeredAnnotation:t.dataFieldContainingAnnotation,uiPropertyDefinitions:(0,c.getUIPropertyDefinitions)(l.UI_NODE_TYPE_ACTION),currentUINodePath:(0,l.resolvePath)(n.annotationPath).valuePath};n.uiProperties=(0,c.buildGenericUIProperties)(o,(0,c.getPropValueMap)(n));const r=n.inline,i=r&&!(0,l.isTooComplex)(r)&&r.value;if("com.sap.vocabularies.UI.v1.LineItem"===a&&!i||"com.sap.vocabularies.UI.v1.FieldGroup"===a){const e=n.uiProperties?.actionCriticality;e&&!(0,l.isTooComplex)(e)&&(e.value!==l.ENUM_VALUE_NONE?n.uiProperties.actionCriticality=(0,l.buildTooComplex)(l.TooComplexReason.UnsupportedEnumValue,e.locations[0].range,e.locations[0].fileUri):delete n.uiProperties.actionCriticality)}}(t,e,u,h),(0,i.setReadonlyInUiProperties)(t,u.annotationPath,E),u},t.buildDataFieldForAction=function(e){const t={type:"com.sap.vocabularies.UI.v1.DataFieldForAction",propertyValues:[{name:o.DATA_FIELD_PROP_NAME_ACTION,value:{type:"String",String:e.action}},{name:o.DATA_FIELD_PROP_NAME_LABEL,value:{type:"String",String:(n=e.action,n.includes("/")?n.split("/").pop():n.split(".").pop())}}]};var n;return e.isInline&&t.propertyValues.push({name:o.DATA_FIELD_PROP_NAME_INLINE,value:{type:"Bool",Bool:!0}}),e.isDetermining&&t.propertyValues.push({name:o.DATA_FIELD_PROP_NAME_DETERMINING,value:{type:"Bool",Bool:!0}}),t},t.changeUIPropertyAction=function(e,t,n,a,o){const d=a.top,y=t.nodeId[t.nodeId.length-1],g=[];(0,u.doIf)(void 0!==o.label&&t.label.value!==o.label,(()=>{g.push(...(0,r.changeDataFieldLabel)(o.label,d,y))})),(0,u.doIf)(void 0!==o.inline&&t.inline.value!==o.inline,(()=>{g.push(...m(o.inline,d,y))})),(0,u.doIf)(void 0!==o.importance&&t.importance.value!==o.importance,(()=>{const e=(0,s.createColumnImportanceChange)(a,y,o.importance);g.push({targetPath:a.top.target,changes:[e]})})),(0,u.doIf)("boolean"==typeof o.hidden&&t.hidden.value!==o.hidden,(()=>{const e=(0,p.changeHiddenProperty)(a,y,o.hidden);g.push({targetPath:a.top.target,changes:[e]})})),(0,u.doIf)(""!==o.hideByProperty&&void 0!==o.hideByProperty&&t.hideByProperty.value!==o.hideByProperty,(()=>{const e=(0,p.changeHiddenProperty)(a,y,o.hideByProperty,!0);g.push({targetPath:a.top.target,changes:[e]})}));const f=a?.top.annotation.term;if(["com.sap.vocabularies.UI.v1.LineItem","com.sap.vocabularies.UI.v1.FieldGroup"].includes(f)){const e=t.inline,n=e&&!(0,l.isTooComplex)(e)&&e.value||o.inline;(0,i.throwIf)(!n&&!!o.propertiesMap?.get("actionCriticality"),`Criticality can not be set on ${"com.sap.vocabularies.UI.v1.LineItem"===f?"table header":"form"} actions`)}return function(e,t,n,a,o){const r=(0,c.getUIPropertyDefinitions)(l.UI_NODE_TYPE_ACTION);if(r.propertyNames.length&&a.propertiesMap){const i=n.dataFieldContainingAnnotation,s=(0,l.resolvePath)(t.annotationPath).valuePath;o.push(...(0,c.updateGenericUIProperties)({context:e,layeredAnnotation:i,uiPropertyDefinitions:r,currentUINodePath:s},t.uiProperties,a.propertiesMap))}}(e,t,n,o,g),g},t.changeDataFieldInline=m,t.getActionPropertiesForChange=function(e){const t={label:void 0,inline:void 0,importance:void 0,hidden:void 0,hideByProperty:void 0},n=(0,c.getUIPropertyDefinitions)(l.UI_NODE_TYPE_ACTION);for(const a of e)n.propertyMap[a.propertyName]?(t.propertiesMap=t.propertiesMap||new Map,t.propertiesMap.set(a.propertyName,a.value)):Object.keys(t).includes(a.propertyName)&&(t[a.propertyName]=a.value);return t},t.finalizeActionNode=function(e,t,n){if(n.nodeType===l.UI_NODE_TYPE_LIST)return;const a=(0,l.isTooComplex)(e.action)?"":e.action.value,r=g(e);(t.parentNodes||[]).forEach((t=>{if(a&&t.containedActions?.has(a))return;let n=!1;(t.nodeType===l.UI_NODE_TYPE_PAGE_ACTIONS||t.nodeType===l.UI_NODE_TYPE_SECTION&&o.sectionTypesForFields.includes(t.subType)&&t.rootNodeType===l.UI_NODE_TYPE_FORM&&!r)&&(n=!0),n&&(e.allowedParentNodes=e.allowedParentNodes||{},e.allowedParentNodes[JSON.stringify(t.nodeId)]=!0)}))},t.isMoveWithToggling=function(e,t,n){if(t?.toggleInline&&e.nodeType===l.UI_NODE_TYPE_LIST)return{result:!0};if(t?.toggleDetermining)if(n){if(n.nodeType===l.UI_NODE_TYPE_PAGE_ACTIONS||e.nodeType===l.UI_NODE_TYPE_PAGE_ACTIONS){return{result:!0,removeToggledProperty:e.nodeType===l.UI_NODE_TYPE_PAGE_ACTIONS}}}else if(e.nodeType===l.UI_NODE_TYPE_PAGE_ACTIONS)return{result:!0};return{result:!1}},t.evaluateInlineAndImportance=y,t.isSemanticButtonUINode=g},63370:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAnalyticalChartSection=t.deleteAnalyticalChartFromAlp=t.addChartSortingNewRowDefaults=t.changeUIPropertyAnalyticalChart=t.convertUiNodeInternalAnalyticalChart=t.loadUiNodeInternalAnalyticalChart=t.createChartRecord=t.switchFromSingleViewLR=t.createDynamicMeasure=t.createUINodeAnalyticalChart=t.checkCreationParametersAnalyticalMeasure=t.checkCreationParametersAnalyticalChart=t.getCreateAnalyticalChartNodeOptions=void 0;const a=n(70704),o=n(46163),r=n(78263),i=n(95207),s=n(35586),l=n(91310),p=n(20576),c=n(23635);function u(e,t,n){const a=n.measures[e]||[],o=n.dynamicMeasures[e]||[],r=t.measure||"";if(t.aggregationMethod){const a=n.aggregatableProperties[e]||[];(0,s.throwIf)(!r||!a.find((e=>e.value===r)),`Unsupported measure ${r} for creation of dynamic measure to create analytical chart (entity type ${e})`);const o=`${e}/${r}`;(0,s.throwIf)(!t.aggregationMethod||!n.propertyAggregationMethods[o]?.find((e=>e.value===t.aggregationMethod)),`Unsupported aggregation method ${t.aggregationMethod} for analytical chart creation (entity type ${e}, property ${t.measure})`)}else{const t=a.find((e=>e.value===r))||o.find((e=>e.value===r));(0,s.throwIf)(!r||!t,`Unsupported measure ${r} for analytical chart creation (entity type ${e})`)}}function m(e,t,n){const a=[],o=(0,s.getApplySupportedInfo)(e,t),r=!(o.customAggregatePropNames||[]).includes(n.measure);let i=(r?(o.dynamicMeasures||[]).find((e=>e.name===n.measure)):null)?.qualifier;if(r&&!i){const r=(0,s.createAggregatedPropertyAnnotation)(e,t,n.measure,n.aggregationMethod,o.dynamicMeasures);a.push({annotation:r}),i=r.qualifier}return{changes:a,dynamicMeasurePath:r?`@com.sap.vocabularies.Analytics.v1.AggregatedProperty#${i}`:""}}function d(e,t,n,o){let i;i=o?["com.sap.vocabularies.UI.v1.LineItem","com.sap.vocabularies.UI.v1.PresentationVariant","com.sap.vocabularies.UI.v1.SelectionPresentationVariant"]:["com.sap.vocabularies.UI.v1.SelectionVariant","com.sap.vocabularies.UI.v1.SelectionPresentationVariant"];const{listAnnotationPath:l,spvRecordCreationOptions:u}=function(e,t,n){let a="";const o={},r=(0,s.getRootNodeConfig)(e,c.UI_NODE_TYPE_LIST),i=r.configured?(0,c.resolvePath)(r.configuredPath):null;if(r.configured&&"com.sap.vocabularies.UI.v1.SelectionPresentationVariant"===i?.term)a=r.configuredPath;else{const r=["com.sap.vocabularies.UI.v1.PresentationVariant","com.sap.vocabularies.UI.v1.LineItem"];for(const i of r){const r=(0,c.getAnnotationIndexKey)(n,i);if(e.annotationIndex[r]){y(i,`@${i}`,o),a=`/${t}/@${i}`;break}}const i="com.sap.vocabularies.UI.v1.SelectionVariant",s=(0,c.getAnnotationIndexKey)(n,i);e.annotationIndex[s]&&(y(i,`@${i}`,o),a=a?"":`/${t}/@${i}`)}return{listAnnotationPath:a,spvRecordCreationOptions:o}}(e,t,n);if(l&&i.includes((0,c.resolvePath)(l).term)){const t=o?[]:function(e,t,n,a){const{term:o,qualifier:i}=(0,c.resolvePath)(t),s=(0,c.getAnnotationIndexKey)(n,o,i),l=e.annotationIndex[s]?.top.annotation,u=l?.record;if(!u)return[];let m;const d=u.propertyValues.findIndex((e=>e.name===r.SPV_PROP_NAME_TEXT));if(d>=0){const e=u.propertyValues[d];e.value.type!==c.ExpressionType.String||e.value.String||(e.value.String=a,m={annotation:l,changeType:p.ChangeType.Update,content:{type:p.MOD_TYPE_PRIMITIVE,value:a,expressionType:c.ExpressionType.String},pointer:`record/propertyValues/${d}/value/String`})}else{const e={type:c.ExpressionType.String,String:a},t={name:r.SPV_PROP_NAME_TEXT,value:e};l.record.propertyValues.push(t),m={annotation:l,changeType:p.ChangeType.Insert,content:{type:p.MOD_TYPE_PROP_VALUE,value:t},pointer:"record/propertyValues/"+(l.record.propertyValues.length-1)}}return m?[{targetPath:n,changes:[m]}]:[]}(e,l,n,`${a.i18n.t("TableView")} 0`);return{listAnnotationPath:l,targetChanges:t}}const m=[];if(!l&&!u.pvAnnotationPath&&!u.visualizationPath){const e={term:"com.sap.vocabularies.UI.v1.LineItem",collection:[]};m.push({targetPath:n,changes:[{annotation:e}]}),u.visualizationPath="@com.sap.vocabularies.UI.v1.LineItem"}const d=(0,c.getExistingQualifiers)(e.annotationIndex,n,"com.sap.vocabularies.UI.v1.SelectionPresentationVariant"),g=(0,s.generateIdAndIndex)(d,"tableView",!0),f=g.index?` ${g.index}`:"",h=`${a.i18n.t("TableView")}${f}`,T=(0,s.createSpvRecord)({...u,text:h}),P={term:"com.sap.vocabularies.UI.v1.SelectionPresentationVariant",qualifier:g.id,record:T};return m.push({targetPath:n,changes:[{annotation:P}]}),{listAnnotationPath:`/${t}/@com.sap.vocabularies.UI.v1.SelectionPresentationVariant#${g.id}`,targetChanges:m,generatedSpvQualifier:g.id}}function y(e,t,n){switch(e){case"com.sap.vocabularies.UI.v1.PresentationVariant":n.pvAnnotationPath=t;break;case"com.sap.vocabularies.UI.v1.SelectionVariant":n.svAnnotationPath=t;break;case"com.sap.vocabularies.UI.v1.LineItem":case"com.sap.vocabularies.UI.v1.Chart":n.visualizationPath=t}}function g(e,t){const n=(0,o.getUIPropertyDefinitions)(c.UI_NODE_TYPE_ANALYTICAL_CHART).propertyMap.type,a={type:"com.sap.vocabularies.UI.v1.ChartDefinitionType",propertyValues:[{name:r.CHART_PROP_NAME_CHART_TYPE,value:{type:c.ExpressionType.EnumMember,EnumMember:`${n.allowedValuesPrefix}${e.chartType}`}},{name:r.CHART_PROP_NAME_DIMENSIONS,value:{type:c.ExpressionType.Collection,Collection:[{type:c.ExpressionType.PropertyPath,PropertyPath:e.dimension}]}}]};return t?a.propertyValues.push({name:r.CHART_PROP_NAME_DYNAMIC_MEASURES,value:{type:c.ExpressionType.Collection,Collection:[{type:c.ExpressionType.AnnotationPath,AnnotationPath:t}]}}):a.propertyValues.push({name:r.CHART_PROP_NAME_MEASURES,value:{type:c.ExpressionType.Collection,Collection:[{type:c.ExpressionType.PropertyPath,PropertyPath:e.measure}]}}),a}function f(e,t){const n=t[`${c.UI_PROP_NAME_PREFIX_SORTING}${e}`];if(!n||(0,c.isTooComplex)(n))return;const a=n.columns.find((e=>e.name===s.PROP_NAME_PROPERTY)),o=new Map(a.allowedValues.map((e=>[e.text||e.value,e.value]))),r=h(t,"measures","property","showAsDefault",!0);if(a.default=o.get(r.find((e=>o.has(e)))),!a.default){const e=h(t,"dimensions","property","showAsDefault",!0);a.default=o.get(e.find((e=>o.has(e))))}if(!a.default){const e=h(t,"measures","property","showAsDefault",!1);a.default=o.get(e.find((e=>o.has(e))))}if(!a.default){const e=h(t,"dimensions","property","showAsDefault",!1);a.default=o.get(e.find((e=>o.has(e))))}!a.default&&a.allowedValues.length&&(a.default=a.allowedValues[0].value)}function h(e,t,n,a,o){const r=[];if(!e[t]||(0,c.isTooComplex)(e[t]))return r;const i=e[t];for(const e of i.rows){const t=e.data;if((0,c.isTooComplex)(t))continue;const i=t.cells[a],s=t.cells[n];s&&!(0,c.isTooComplex)(s)&&i&&!(0,c.isTooComplex)(i)&&(i.value===o&&r.push(s.value))}return r}t.getCreateAnalyticalChartNodeOptions=function(e){let t;t=e.pageContext.type===r.PAGE_TYPE_OP?(0,s.getAnalyticalChartSupportedSection)(e,!0):(0,s.getAnalyticalChartSupportedMultiView)(e,!0),t.supported||(0,s.throwError)("Creation of Analytical Chart not supported");const n=(0,o.getUIPropertyDefinitions)(c.UI_NODE_TYPE_ANALYTICAL_CHART).propertyMap.type;return{nodeType:c.UI_NODE_TYPE_ANALYTICAL_CHART,allowedChartTypes:n.allowedValues,baseEntitySet:e.pageBase.entitySetName,entitySets:t.entitySets,dimensions:t.dimensions,measures:t.measures,dynamicMeasures:t.dynamicMeasures,aggregatableProperties:t.aggregatableProperties,propertyAggregationMethods:t.propertyAggregationMethods}},t.checkCreationParametersAnalyticalChart=function(e,t,n){const a=t.entitySet||n.baseEntitySet;t.addToMultiViewLR||a===n.baseEntitySet||(0,s.throwError)("Creation of Analytical Chart for ALP only supported on base entity set"),n.entitySets.find((e=>e.value===a))||(0,s.throwError)(`Not supported: creation of Analytical Chart for entity type ${a} (not analytics enabled)`);const o=(0,s.getRootNodeConfig)(e,c.UI_NODE_TYPE_ANALYTICAL_CHART),r=(0,s.getRootNodeConfig)(e,c.UI_NODE_TYPE_VIEWS);t.addToMultiViewLR||!o.configured&&!r.configured||(0,s.throwError)("Adding analytical chart to create ALP not supported: app is already ALP or multi view LR"),t.addToMultiViewLR&&o.configured&&(0,s.throwError)("Adding analytical chart to multi view LR not supported: app is already ALP"),u(a,t,n);const i=n.dimensions[a]||[];t.dimension&&i.find((e=>e.value===t.dimension))||(0,s.throwError)(`Unsupported dimension ${t.dimension||""} for analytical chart creation (entity type ${a})`)},t.checkCreationParametersAnalyticalMeasure=u,t.createUINodeAnalyticalChart=function(e,t){const n=[],o=[],r=(0,s.getEntityContainerData)(e.metadataService).entityContainerMdElement.name,i=`${r}/${e.pageBase.entitySetName}`,l=e.pageBase.entityTypeName;let p=t.entitySet||e.pageBase.entitySetName;p=`${r}/${p}`;const u=e.metadataService.getMetadataElement(p).structuredType,{changes:y,dynamicMeasurePath:f}=m(e,u,t);o.push(...y);const h=(0,c.getExistingQualifiers)(e.annotationIndex,u,"com.sap.vocabularies.UI.v1.Chart"),T=t.addToMultiViewLR?"chartView":"alpChart",P=(0,s.generateId)(h,T,!0),E=g(t,f);o.push({annotation:{term:"com.sap.vocabularies.UI.v1.Chart",qualifier:P,record:E}});const v=new Map,b=`@com.sap.vocabularies.UI.v1.Chart#${P}`,_=(0,s.getRootNodeConfig)(e,c.UI_NODE_TYPE_LIST),A=(0,s.getRootNodeConfig)(e,c.UI_NODE_TYPE_VIEWS);if(t.addToMultiViewLR){const r=A.configured?[...A.configuredPaths]:[];let m="";if(!A.configured){const t=d(e,i,l);r.push(t.listAnnotationPath),n.push(...t.targetChanges||[]),m=t.generatedSpvQualifier||""}const y=(0,c.getExistingQualifiers)(e.annotationIndex,u,"com.sap.vocabularies.UI.v1.SelectionPresentationVariant");m&&u===l&&y.push(m);const g=(0,s.generateIdAndIndex)(y,"chartView",!0),f=i!==p?` ${t.entitySet}`:"",h=g.index?` ${g.index}`:"",T=`${a.i18n.t("ChartView")}${f}${h}`,P=(0,s.createSpvRecord)({visualizationPath:b,text:T});o.push({annotation:{term:"com.sap.vocabularies.UI.v1.SelectionPresentationVariant",qualifier:g.id,record:P}}),r.push(`/${p}/@com.sap.vocabularies.UI.v1.SelectionPresentationVariant#${g.id}`),v.set(c.UI_NODE_TYPE_VIEWS,r),_.configured&&v.set(c.UI_NODE_TYPE_LIST,"")}else{v.set(c.UI_NODE_TYPE_ANALYTICAL_CHART,`/${p}/${b}`);const t=d(e,i,l,!0);v.set(c.UI_NODE_TYPE_LIST,t.listAnnotationPath),n.push(...t.targetChanges||[])}return n.push({targetPath:u,changes:o}),{targetChanges:n,configChanges:v}},t.createDynamicMeasure=m,t.switchFromSingleViewLR=d,t.createChartRecord=g,t.loadUiNodeInternalAnalyticalChart=function(e,t,n,a,o){const r=n.annotationIndex[e.slice(1)];if(!r?.top)return null;const i=r?{range:r.top.annotation.origin,fileUri:r.top.fileUri}:null,s={nodeId:a,annotationPath:e},l=(0,c.resolvePath)(e).target,p={...s,tooComplex:!1,nodeType:c.UI_NODE_TYPE_ANALYTICAL_CHART,location:i,subnodes:[],chartAnnotation:r},{term:u,qualifier:m}=(0,c.resolvePath)(t),d=(0,c.getAnnotationIndexKey)(l,u,m);return p.isAlp=o?.isAlp,p.isOp=o?.isOp,p.isMacro=o?.isMacro,p.configuredPath=t,p.configuredAnnotation=n.annotationIndex[d],p},t.convertUiNodeInternalAnalyticalChart=function(e,t,n){let a;const r={nodeId:e.nodeId,annotationPath:e.annotationPath,tooComplex:!1,nodeType:e.nodeType,location:e.location,subnodes:[]},{tooComplexReason:l}=(0,c.getValueFromAnnotation)(e.chartAnnotation.top.annotation,c.ExpressionType.Record);if(l)return(0,c.buildTooComplexNode)(l,e.chartAnnotation.top.annotation.origin,e.chartAnnotation.top.fileUri,e);let p=(0,o.getUIPropertyDefinitions)(c.UI_NODE_TYPE_ANALYTICAL_CHART);(e.isAlp||e.isOp||e.isMacro)&&(p={propertyNames:p.propertyNames.filter((e=>"text"!==e)),propertyMap:p.propertyMap});const{customAggregatePropNames:u}=(0,s.getApplySupportedInfo)(n,t);if(e.configuredAnnotation){const{configuredPath:t,configuredAnnotation:o,annotationPath:s,isAlp:l,isOp:p,isMacro:c}=e,u={isAlp:l,isOp:p,isMacro:c},{variant:m}=(0,i.buildVariant)(n,t,o,s,u);r.variant=m,r.pvPathKind=(0,i.getPvPathKindProperty)(o),a=r.pvPathKind.value}const m={context:n,uiPropertyDefinitions:p,layeredAnnotation:e.chartAnnotation,includeNonApplicableProperties:(0,s.isSameNodeId)(n.includeNonApplicablePropertiesForNode,e.nodeId)};r.uiProperties=(0,o.buildGenericUIProperties)(m,(0,o.getPropValueMap)(r),new Map([[o.AnnotationRole.configuredAnnotation,e.configuredAnnotation]]));const{measures:d,dimensions:y}=(0,i.convertMeasuresAndDimensions)(r.uiProperties,e.chartAnnotation.top.annotation.qualifier,u,n,t);if(r.uiProperties[i.UI_PROP_NAME_MEASURES]=d,r.uiProperties[i.UI_PROP_NAME_DIMENSIONS]=y,!n.omitConversionToExternalPropDef){[i.UI_PROP_NAME_AVAILABLE_MEASURES,i.UI_PROP_NAME_DEFAULT_MEASURES,i.UI_PROP_NAME_AVAILABLE_DIMENSIONS,i.UI_PROP_NAME_DEFAULT_DIMENSIONS,i.UI_PROP_NAME_AVAILABLE_DYNAMIC_MEASURES,i.UI_PROP_NAME_DEFAULT_DYNAMIC_MEASURES,i.UI_PROP_NAME_DYNAMIC_MEASURES].forEach((e=>delete r.uiProperties[e]));const e=`${c.UI_PROP_NAME_PREFIX_SORTING}${a}`;(0,s.mergeTableColumnsDynamicProp)(e,r.uiProperties)}return f(a,r.uiProperties),r},t.changeUIPropertyAnalyticalChart=function(e,t,n,a,r,l){const p=[],u=new Map;let m=e.pageBase.entityTypeName;const d=(0,s.getRootNodeConfig)(e,c.UI_NODE_TYPE_VIEWS);if(d.configured&&r.nodeType===c.UI_NODE_TYPE_VIEWS&&t.nodeId.length>1){const n=t.nodeId[1],a=(0,c.resolvePath)(d.configuredPaths[n]).target;m=e.metadataService.getMetadataElement(a)?.structuredType||m}const y=function(e,t,n,a,o){const r=[],l=new Map;if(void 0===o||t.variant.value===o)return{targetChanges:r,configChanges:l};t.variant.allowedValues.find((e=>e.value===o))||(0,s.throwError)(`Variant "${o}" not supported for UINode (type '${t.nodeType}')`);const{term:p,qualifier:u}=n.chartAnnotation.top.annotation,m=u?`@${p}#${u}`:`@${p}`,{targetChanges:d,configuredPathVariant:y}=(0,i.changeUIPropertyVariant)(e,n.configuredPath,n.configuredAnnotation,o,m,{isAlp:n.isAlp,isOp:n.isOp,isMultiViewLR:!n.isAlp&&!n.isOp});if(r.push(...d),n.isAlp)l.set(c.UI_NODE_TYPE_ANALYTICAL_CHART,y);else if(n.isOp){const t=(0,s.setVariantPathToFacet)(e,a,y);r.push(...t)}else{const t=(0,s.getRootNodeConfig)(e,c.UI_NODE_TYPE_VIEWS).configuredPaths;t[n.nodeId[n.nodeId.length-1]]=y,l.set(c.UI_NODE_TYPE_VIEWS,t)}return{targetChanges:r,configChanges:l}}(e,t,n,a,l.get("variant"));p.push(...y.targetChanges);for(const[e,t]of y.configChanges?.entries()||[])u.set(e,t);let g=(0,o.getUIPropertyDefinitions)(c.UI_NODE_TYPE_ANALYTICAL_CHART);n.isAlp&&(g={propertyNames:g.propertyNames.filter((e=>"text"!==e)),propertyMap:g.propertyMap});const{changed:f,changedTableValue:h}=(0,i.copyChangedTextAndTextArrangement)(l,t);f&&l.set("availableDimensions",h),p.push(...(0,i.changeUIPropertiesMeasuresDimensions)(e,t,n.chartAnnotation,l));const T=t.pvPathKind.value,P=`${c.UI_PROP_NAME_PREFIX_SORTING}${T}`;return(0,s.changeUIPropertyPrepareDynamicProp)(P,t.uiProperties,l),p.push(...(0,o.updateGenericUIProperties)({context:e,uiPropertyDefinitions:g,layeredAnnotation:n.chartAnnotation},t.uiProperties,l,new Map([[o.AnnotationRole.configuredAnnotation,n.configuredAnnotation]]))),{targetChanges:p,configChanges:u}},t.addChartSortingNewRowDefaults=f,t.deleteAnalyticalChartFromAlp=function(e){const{configuredPath:t}=(0,s.getRootNodeConfig)(e,c.UI_NODE_TYPE_LIST),{target:n,term:a,qualifier:o}=(0,c.resolvePath)(t),r=e.metadataService.getMetadataElement(n||"")?.structuredType;if(!r||"com.sap.vocabularies.UI.v1.LineItem"===a)return[];const l=(0,c.getAnnotationIndexKey)(r,a,o),p=e.annotationIndex[l]?.top?.annotation;let u;const m={isLineItemVisualization:!0};return"com.sap.vocabularies.UI.v1.SelectionPresentationVariant"===p.term?u=(0,i.updateVisualizationsInSPV)(e,r,p.record,"",m):"com.sap.vocabularies.UI.v1.PresentationVariant"===p.term&&(u=(0,i.updateVisualizationsInPV)(p.record,"",m)),u.forEach((e=>{e.annotation=e.annotation||p})),u.length?[{targetPath:r,changes:u}]:[]},t.createAnalyticalChartSection=function(e,t,n,a,o){const i=[],p=[],{entitySet:u,label:d}=n[0],y=`${t}/${u}`,f=e.metadataService.getMetadataElement(y).structuredType,h=(0,c.getExistingQualifiers)(e.annotationIndex,f,"com.sap.vocabularies.UI.v1.Chart"),T=(0,s.generateId)(h,"chartSection",!0),P=`${u}/@com.sap.vocabularies.UI.v1.Chart#${T}`,{facetsAnnotation:E,generatedId:v}=(0,l.createFacetAnnotation)(d,a),b={type:"com.sap.vocabularies.UI.v1.ReferenceFacet",propertyValues:[{name:r.FACETS_PROP_NAME_LABEL,value:{type:"String",String:d}},{name:r.FACETS_PROP_NAME_ID,value:{type:"String",String:v}},{name:r.FACETS_PROP_NAME_TARGET,value:{type:"AnnotationPath",AnnotationPath:P}}]},{changes:_,dynamicMeasurePath:A}=m(e,f,n[0]);p.push(..._);const C=g(n[0],A);p.push({annotation:{term:"com.sap.vocabularies.UI.v1.Chart",qualifier:T,record:C}}),i.push({targetPath:f,changes:p});const N=(0,l.getTargetChangeForFacet)(t,b,E,a,o);return i.unshift(N),i}},63587:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeUIPropertyChart=t.convertUiNodeInternalChart=t.loadUiNodeInternalChart=t.buildReferenceFacetForChartAnnotation=t.buildDataFieldForChartAnnotation=t.getCreateChartNodeOptions=void 0;const a=n(46163),o=n(68850),r=n(78263),i=n(23635),s=n(95207),l=n(35586),p=n(52564),c=n(53107);function u(e,t,n){const{targetPath:a,creationParameters:o,relativePath:p}=function(e,t,n){const a={...n};let o=t,r=a.value,s="";if(r.includes("/")){const n=r.split("/");r=n.pop(),s=n.join("/");const l=`${t}${a.association?`/${a.association}`:""}/${s}`;o=(0,i.resolveMetadataElement)(e.metadataService,l).path,a.value=r,a.dimension=m(s,a.dimension),isNaN(parseInt(a.maximumValue))&&(a.maximumValue=m(s,a.maximumValue)),a.targetValue=m(s,a.targetValue)}else if(a.association){const n=`${t}/${a.association}`;o=(0,i.resolveMetadataElement)(e.metadataService,n).path}return{targetPath:o,relativePath:s,creationParameters:a}}(e,n,t),c={targetPath:a,changes:[]},u=function(e,t,n){const a=Object.keys(e.annotationIndex).filter((e=>e.startsWith(`${n}/@com.sap.vocabularies.UI.v1.DataPoint#`))).map((e=>e.split("#").pop())),o=[{name:r.DATA_POINT_PROP_NAME_VALUE,value:{type:"Path",Path:t.value}}];"Bullet"===t.chartType?(o.push({name:"MinimumValue",value:{type:"Decimal",Decimal:0}}),isNaN(parseInt(t.maximumValue))?o.push({name:"MaximumValue",value:{type:"Path",Path:t.maximumValue}}):o.push({name:"MaximumValue",value:{type:"Decimal",Decimal:parseInt(t.maximumValue)}})):"Donut"===t.chartType&&o.push({name:"TargetValue",value:{type:"Path",Path:t.targetValue}});return{term:"com.sap.vocabularies.UI.v1.DataPoint",qualifier:(0,l.generateId)(a,t.value,!0),record:{propertyValues:o}}}(e,o,c.targetPath);c.changes.push({annotation:u});const d=function(e,t,n,a){const o=Object.keys(e.annotationIndex).filter((e=>e.startsWith(`${n}/@com.sap.vocabularies.UI.v1.Chart#`))).map((e=>e.split("#").pop())),p="@com.sap.vocabularies.UI.v1.DataPoint#"+a,c=t.value,u={propertyValues:[{name:"DataPoint",value:{type:"AnnotationPath",AnnotationPath:p}},{name:"Role",value:{type:"EnumMember",EnumMember:"com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis1"}},{name:"Measure",value:{type:"PropertyPath",PropertyPath:c}}]},m=`com.sap.vocabularies.UI.v1.ChartType/${t.chartType}`,d=[{name:r.CHART_PROP_NAME_CHART_TYPE,value:{type:"EnumMember",EnumMember:m}},{name:r.CHART_PROP_NAME_MEASURES,value:{type:"Collection",Collection:[{type:"PropertyPath",PropertyPath:t.value}]}},{name:r.CHART_PROP_NAME_MEASURE_ATTRIBUTES,value:{type:"Collection",Collection:[u]}}];if("HeaderSection"===t.nodeSubType){let t;const a=(0,s.getDefaultLabelAnnotation)(e,c,n);a?.top?.annotation?.value?.type===i.ExpressionType.String&&(t=a?.top?.annotation?.value?.String||""),t=t||c,d.splice(1,0,{name:r.CHART_PROP_NAME_TITLE,value:{type:"String",String:t}})}["Area","Line"].includes(t.chartType)&&d.push({name:r.CHART_PROP_NAME_DIMENSIONS,value:{type:"Collection",Collection:[{type:"PropertyPath",PropertyPath:t.dimension}]}});return{term:"com.sap.vocabularies.UI.v1.Chart",qualifier:(0,l.generateId)(o,t.value,!0),record:{propertyValues:d}}}(e,o,c.targetPath,u.qualifier);c.changes.push({annotation:d});let y="@com.sap.vocabularies.UI.v1.Chart#"+d.qualifier;return o.association&&(y=o.association+"/"+y),p&&(y=p+"/"+y),{targetChanges:c,chartAnnoPath:y,defaultLabel:o.value}}function m(e,t){if(!t)return;const n=e+"/";if(t.startsWith(n))return t.slice(n.length);(0,l.throwError)(`Error creating chart: path '${t}' should start with '${n}'`)}function d(e,t,n){const{tooComplexReason:a,record:o,range:r}=(0,i.getValueFromCollection)(e.collection,e.collectionWithOrigins,n,i.ExpressionType.Record);if(a)throw t(a,r);return{recordMeasureAttr:o,rangeMeasureAttr:r}}function y(e,t,n,a,o,r){const s=(0,i.getValueFromRecord)(n,"DataPoint",i.ExpressionType.AnnotationPath);if(!s)throw o(i.TooComplexReason.MissingProperty,a);if(s.tooComplexReason)throw o(s.tooComplexReason,s.range);if(s.value.indexOf("/")>=0)throw o(i.TooComplexReason.UnsupportedPath,s.range);if(s.value.includes("/@"))throw o(i.TooComplexReason.UnsupportedPath,s.range);const[p,c]=s.value.substring(1).split("#");if("com.sap.vocabularies.UI.v1.DataPoint"!==p)throw o(i.TooComplexReason.UnsupportedTerm,s.range);const u=(0,i.getAnnotationIndexKey)(t,p,c),m=e.annotationIndex[u];if(!m)throw o(i.TooComplexReason.NoValidAnnotationPath,s.range,(0,l.getName)(e,r,s.value.substring(1)));return{dataPointAnnotation:m}}function g(e,t,n,a,o){const{record:s,tooComplexReason:l,range:p}=(0,i.getValueFromAnnotation)(t.top.annotation,i.ExpressionType.Record);if(l)throw o(l,p);const{value:c,tooComplexReason:u,range:m}=(0,i.getValueFromRecord)(s,"Value",i.ExpressionType.Path);if(u)throw o(u,m);const d=(0,i.getValueFromRecord)(e,r.CHART_PROP_NAME_MEASURES,i.ExpressionType.Collection);if(!d)throw a(i.TooComplexReason.MissingProperty);if(d.tooComplexReason)throw a(d.tooComplexReason,d.range);if(d.collection.length!==n.length)throw a(i.TooComplexReason.NoValidAnnoCombination);return{resultChartMeasures:d,measurePathDp:c,rangeValueDP:m}}function f(e,t,n,a,o,r){const{tooComplexReason:s,value:l,range:p}=(0,i.getValueFromCollection)(e.collection,e.collectionOrigins,o,i.ExpressionType.PropertyPath);if(s)throw r(s,p);if(!l||l!==t)throw r(i.TooComplexReason.NoValidAnnoCombination,p);const c=(0,i.getValueFromRecord)(n,"Measure",i.ExpressionType.PropertyPath);if(!c)throw r(i.TooComplexReason.MissingProperty,a);if(c.tooComplexReason)throw r(c.tooComplexReason,c.range);if(l!==c.value)throw r(i.TooComplexReason.NoValidAnnoCombination,p);return{measurePathChart:l,resultMaMeasure:c}}t.getCreateChartNodeOptions=function(e,t){const n=new Map;for(const e of t?.content??[])l.draftSpecificFields.includes(e.name)||e.structuredType&&e.isEntityType&&e.isCollectionValued&&n.set(e.name,e.structuredType);const o={},r={};n.set("",t.path),n.forEach(((t,n)=>{const a=e.metadataService.getMetadataElement(t),i={expandFirstLevel:!0,numericOnly:!0};let s=(0,l.getPathValueHelpTree)(e,a,i);s.nodes.length>0&&(o[n]=s),s=(0,l.getPathValueHelpTree)(e,a,{...i,ignoreHidden:!0}),s.nodes.length>0&&(r[n]=s)}));const s=(0,a.getUIPropertyDefinitions)(i.UI_NODE_TYPE_CHART).propertyMap.chartType.allowedValues;return{nodeType:i.UI_NODE_TYPE_CHART,paths:o,allowedChartTypes:s,pathsIncludingHidden:r}},t.buildDataFieldForChartAnnotation=function(e,t,n){const{defaultLabel:a,chartAnnoPath:o,targetChanges:i}=u(e,t,n);return{targetChanges:i,dataField:{type:"com.sap.vocabularies.UI.v1.DataFieldForAnnotation",propertyValues:[{name:r.DATA_FIELD_PROP_NAME_TARGET,value:{type:"AnnotationPath",AnnotationPath:o}},{name:r.DATA_FIELD_PROP_NAME_LABEL,value:{type:"String",String:a}}]}}},t.buildReferenceFacetForChartAnnotation=function(e,t,n){const{chartAnnoPath:a,targetChanges:o}=u(e,t,n);return{targetChanges:o,targetPropertyValue:{name:r.FACETS_PROP_NAME_TARGET,value:{type:i.ExpressionType.AnnotationPath,AnnotationPath:a}}}};const h=(e,t)=>(n,a,o)=>(0,i.buildTooComplexNode)(n,a||e.top.annotation.origin,e.top.fileUri,t,void 0,o);t.loadUiNodeInternalChart=function(e,t,n,a,o,s){const p=["com.sap.vocabularies.UI.v1.DataFieldForAnnotation","com.sap.vocabularies.UI.v1.ReferenceFacet"];try{if(!p.includes(t.type))throw(0,i.buildTooComplexNode)(i.TooComplexReason.UnsupportedType,a.range,a.fileUri,o);const{referencedAnnotation:c,entityMdElement:u}=(0,l.resolveAnnotationPathInRecord)(s,t,a,o,e),{additionalValueLocations:m,measurePathChart:T}=function(e,t,n){const a=h(t,n),{record:o,tooComplexReason:s,range:l}=(0,i.getValueFromAnnotation)(t.top.annotation,i.ExpressionType.Record);if(s)throw a(s,l);const p=[];let c;const{resultChartMAs:u}=function(e,t){const n=(0,i.getValueFromRecord)(e,r.CHART_PROP_NAME_MEASURE_ATTRIBUTES,i.ExpressionType.Collection);if(!n)throw t(i.TooComplexReason.MissingProperty);if(n.tooComplexReason)throw t(n.tooComplexReason);if(!n.collection?.length)throw t(i.TooComplexReason.NoEntryInCollection,n.range);return{resultChartMAs:n}}(o,a),m=u.collection;for(let r=0;r<(u?.collection||[]).length;r++){p[r]={locations:[]};const{recordMeasureAttr:i,rangeMeasureAttr:s}=d({collection:u.collection,collectionWithOrigins:u.collectionOrigins},a,r),{dataPointAnnotation:l}=y(e,t.top.target,i,s,a,t.top.fileUri),T=h(l,n),{resultChartMeasures:P,measurePathDp:E,rangeValueDP:v}=g(o,l,m,a,T),b=f(P,E,i,s,r,a);0===r&&(c=b.measurePathChart),p[r].locations.push({fileUri:l.top.fileUri,range:v}),p[r].locations.push({fileUri:t.top.fileUri,range:b.resultMaMeasure.range})}return{additionalValueLocations:p,measurePathChart:c}}(s,c,o),P={...o,nodeSubType:"com.sap.vocabularies.UI.v1.ReferenceFacet"===t.type?"HeaderSection":"Column",tooComplex:!1,nodeType:i.UI_NODE_TYPE_CHART,dataFieldForAnnotation:t,isChangeable:n,chartAnnotation:c,location:a,subnodes:[],additionalValueLocations:m},E=T,v=u.path+"/"+E,b=(0,i.resolveMetadataElement)(s.metadataService,v,!0);if(b){const e=s.annotationIndex,t=b.path;P.label=e[(0,i.getAnnotationIndexKey)(t,"com.sap.vocabularies.Common.v1.Label")],P.title=e[(0,i.getAnnotationIndexKey)(t,r.CDS_TERM_NAME_TITLE)]}return P}catch(e){if(e.tooComplex)return e;throw e}},t.convertUiNodeInternalChart=function(e,t){const n=e.chartAnnotation,o=(0,i.getValueFromAnnotation)(n.top.annotation,i.ExpressionType.Record);if((0,i.isTooComplex)(o))return(0,i.buildTooComplexNode)(o.tooComplexReason,o.range,n.top.fileUri,e);const r=e.location,u=e.dataFieldForAnnotation,m=e.isChangeable,d={nodeId:e.nodeId,nodeSubType:e.nodeSubType,annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,tooComplex:!1,nodeType:e.nodeType,location:e.location,label:(0,s.getLabel)(e.dataFieldForAnnotation,e.location.fileUri,e),importance:(0,p.getImportanceUIProperty)(u,m,r),subnodes:[]},{target:y,term:g,qualifier:f}=(0,i.resolvePath)(d.annotationPath),h=(0,i.getAnnotationIndexKey)(y,g,f);({hidden:d.hidden,hideByProperty:d.hideByProperty}=(0,c.getHidden)(t.annotationIndex[h],e.dataFieldForAnnotation,e.location,t)),(0,l.setReadonlyInUiProperties)(t,d.annotationPath,[d.label,d.importance,d.hidden,d.hideByProperty]);const T=(0,i.getValueFromRecord)(o.record,"ChartType",i.ExpressionType.EnumMember),P=(0,a.getUIPropertyDefinitions)(i.UI_NODE_TYPE_CHART,d.nodeSubType);"com.sap.vocabularies.UI.v1.ChartType/Area"===T.value&&(P.propertyMap.criticalitySource.allowedValues=P.propertyMap.criticalitySource.allowedValues.filter((e=>"Criticality"!==e.value)));const E={context:t,uiPropertyDefinitions:P,layeredAnnotation:e.chartAnnotation,includeNonApplicableProperties:(0,l.isSameNodeId)(t.includeNonApplicablePropertiesForNode,e.nodeId)};return d.uiProperties=(0,a.buildGenericUIProperties)(E,(0,a.getPropValueMap)(d)),function(e,t){t.additionalValueLocations.length&&(e.uiProperties.value&&e.uiProperties.value?.locations.push(...t.additionalValueLocations[0].locations),e.uiProperties.valueToN&&e.uiProperties.valueToN?.locations.push(...t.additionalValueLocations[0].locations),e.uiProperties.values&&e.uiProperties.values?.values?.forEach(((e,n)=>{if((0,i.isTooComplex)(e)&&e.tooComplexLocations.find((e=>e.reason===i.TooComplexReason.UnsupportedDataType))){t.additionalValueLocations[n].locations.forEach((t=>{e.tooComplexLocations.push({fileUri:t.fileUri,range:t.range,reason:i.TooComplexReason.UnsupportedDataType})}))}})))}(d,e),d},t.changeUIPropertyChart=function(e,t,n,r,u,m){const d=t.nodeId[t.nodeId.length-1],y=[],g=m.get(i.ChartProperties.Label),f=m.get(i.ChartProperties.Hidden),h=m.get(i.ChartProperties.HideByProperty);void 0!==g&&t.label.value!==g&&y.push(...(0,s.changeDataFieldLabel)(g,r.top,d));const T=m.get(i.ChartProperties.Importance);if(T&&t.importance.value!==T){const e=(0,p.createColumnImportanceChange)(r,d,T);y.push({targetPath:r.top.target,changes:[e]})}if("HeaderSection"===t.nodeSubType){if(m.has("hidden")&&t.hidden.value!==f||m.has("hideByProperty")&&t.hideByProperty.value!==h){const{facetsTop:e,facetsTopAnnotation:a}=(0,l.getFacets)(u),o=(0,c.changeReferenceFacets)(t,n.dataFieldForAnnotation,a,f,h);y.push({targetPath:e.target,changes:[o]})}}else if("Column"===t.nodeSubType){if(m.has("hidden")&&t.hidden.value!==f){const e=(0,c.changeHiddenProperty)(r,d,f);y.push({targetPath:r.top.target,changes:[e]})}if(m.has("hideByProperty")&&t.hideByProperty.value!==h){const e=(0,c.changeHiddenProperty)(r,d,h,!0);y.push({targetPath:r.top.target,changes:[e]})}}const P=(0,a.getUIPropertyDefinitions)(i.UI_NODE_TYPE_CHART,t.nodeSubType);return m.get("values")&&(y.push(...P.propertyMap.values.handler.update(e,n.chartAnnotation,P.propertyMap.values,t.uiProperties.values,m.get("values"))),m.delete("values")),y.push(...(0,o.updateGenericUIProperties)({context:e,uiPropertyDefinitions:P,layeredAnnotation:n.chartAnnotation},t.uiProperties,m)),y}},96859:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UiPropertyHandlerChart=void 0;const a=n(20576),o=n(78263),r=n(2697),i=n(35586),s=n(23635);function l(e,t){return e===t}function p(e,t,n){const a=Object.keys(e.annotationIndex).filter((e=>e.startsWith(`${t}/@com.sap.vocabularies.UI.v1.DataPoint#`))).map((e=>e.split("#").pop())),i=[{name:o.DATA_POINT_PROP_NAME_VALUE,value:{type:s.ExpressionType.Path,Path:n}}];return{term:"com.sap.vocabularies.UI.v1.DataPoint",qualifier:(0,r.generateId)(a,n,!0),record:{propertyValues:i}}}t.UiPropertyHandlerChart=class UiPropertyHandlerChart{update(e,t,n,r,c){const u=[];if("values"!==n.name)return[];if(!Array.isArray(c))return[];const m=c;if(0===m.length)return[];const d=t.top.target,y=t.top.annotation,g=r.values;if(!g.length)return[];const{measuresPropIndex:f,measureAttributesPropIndex:h}=function(e){const t=e.record.propertyValues.findIndex((e=>e.name===o.CHART_PROP_NAME_MEASURES));return{measureAttributesPropIndex:e.record.propertyValues.findIndex((e=>e.name===o.CHART_PROP_NAME_MEASURE_ATTRIBUTES)),measuresPropIndex:t}}(y),{measuresCollection:T,measureAttributesCollection:P}=function(e,t,n){const a=e?.record?.propertyValues?.[t].value,o=e?.record?.propertyValues?.[n].value,r=a?.type===s.ExpressionType.Collection?a.Collection:[],i=o?.type===s.ExpressionType.Collection?o.Collection:[];return{measuresCollection:r,measureAttributesCollection:i}}(y,f,h);if(g.length===m.length-1){const t=m.length-1,n=m[t],o=p(e,d,n);u.push({annotation:o});const r={type:s.ExpressionType.PropertyPath,PropertyPath:n};T.push(r),u.push({annotation:y,changeType:a.ChangeType.Insert,pointer:`record/propertyValues/${f}/value/Collection/${t}`,content:{type:a.MOD_TYPE_EXPRESSION,value:r}});const i={propertyValues:[{name:"DataPoint",value:{type:"AnnotationPath",AnnotationPath:"@com.sap.vocabularies.UI.v1.DataPoint#"+o.qualifier}},{name:"Role",value:{type:"EnumMember",EnumMember:"com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis1"}},{name:"Measure",value:{type:"PropertyPath",PropertyPath:n}}]};return P.push(i),u.push({annotation:y,changeType:a.ChangeType.Insert,pointer:`record/propertyValues/${h}/value/Collection/${t}`,content:{type:a.MOD_TYPE_RECORD,value:i}}),[{targetPath:d,changes:u}]}if(g.length-1===m.length){const e=g.findIndex((e=>function(e,t){return(0,s.isTooComplex)(e)?!!e.tooComplexLocations?.find((e=>!!e.message?.wrongValue&&!t.includes(e.message?.wrongValue))):!t.includes(e)}(e,m)));return T.splice(e,1),u.push({annotation:y,changeType:a.ChangeType.Delete,pointer:`record/propertyValues/${f}/value/Collection/${e}`}),P.splice(e,1),u.push({annotation:y,changeType:a.ChangeType.Delete,pointer:`record/propertyValues/${h}/value/Collection/${e}`}),[{targetPath:d,changes:u}]}if(g.length!==m.length)return[];const E=function(e){return e.map((e=>{if(!(0,s.isTooComplex)(e))return e;{const t=e.tooComplexLocations.find((e=>e.message.wrongValue)).message.wrongValue;if(t)return t}}))}(g),{found:v,range:b,insertBeforeIndex:_}=(0,i.findSingleMove)(E,m);if(v){const e=b.to-b.from+1;let t=`${b.from}`;e>1&&(t+=`-${b.to}`);const n=`record/propertyValues/${f}/value/Collection/${_}`,o=`record/propertyValues/${f}/value/Collection/${t}`,r=`record/propertyValues/${h}/value/Collection/${_}`,s=`record/propertyValues/${h}/value/Collection/${t}`;return(0,i.moveInCollection)(T,b.from,_,e),u.push({annotation:y,changeType:a.ChangeType.Move,pointer:n,moveFromPointer:o}),(0,i.moveInCollection)(P,b.from,_,e),u.push({annotation:y,changeType:a.ChangeType.Move,pointer:r,moveFromPointer:s}),[{targetPath:d,changes:u}]}const{index:A,changedValue:C}=function(e,t){for(const[n,a]of t.entries())if(!e.find((e=>l(e,a))))return{index:n,changedValue:a};return{index:-1}}(E,m);if(A>=0){const t=p(e,d,C);u.push({annotation:t}),T[A].PropertyPath=C,u.push({annotation:y,changeType:a.ChangeType.Update,pointer:`record/propertyValues/${f}/value/Collection/${A}/PropertyPath`,content:{type:a.MOD_TYPE_PRIMITIVE,value:C,expressionType:s.ExpressionType.PropertyPath}});const n="@com.sap.vocabularies.UI.v1.DataPoint#"+t.qualifier,o=P[A].propertyValues,r=o.findIndex((e=>"DataPoint"===e.name)),i=o.findIndex((e=>"Measure"===e.name));o[r].value.AnnotationPath=n,o[i].value.PropertyPath=C;const l=`record/propertyValues/${h}/value/Collection/${A}`;return u.push({annotation:y,changeType:a.ChangeType.Update,pointer:`${l}/propertyValues/${r}/AnnotationPath`,content:{type:a.MOD_TYPE_PRIMITIVE,value:n,expressionType:s.ExpressionType.AnnotationPath}}),u.push({annotation:y,changeType:a.ChangeType.Update,pointer:`${l}/propertyValues/${i}/PropertyPath`,content:{type:a.MOD_TYPE_PRIMITIVE,value:C,expressionType:s.ExpressionType.PropertyPath}}),[{targetPath:d,changes:u}]}return[]}}},52564:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createColumnImportanceChange=t.toggleBooleanPropForDataField=t.buildDataFieldForColumn=t.getColumnPropertiesForChange=t.changeUIPropertyColumn=t.changeRecordImportance=t.convertUiNodeInternalColumn=t.getImportanceUIProperty=t.buildUIPropEnumFromAnnotation=t.loadUiNodeInternalColumn=void 0;const a=n(32217),o=n(20576),r=n(78263),i=n(95207),s=n(95521),l=n(35586),p=n(91310),c=n(46163),u=n(78957),m=n(72691),d=n(23635),y=n(53107);t.loadUiNodeInternalColumn=function(e,t,n,a,o,i){if("com.sap.vocabularies.UI.v1.DataField"!==t.type)return(0,d.buildTooComplexNode)(d.TooComplexReason.UnsupportedType,n.range,n.fileUri,a);const{entityTypeName:s,isChangeable:p,relativePath:c}=i,y={context:o,target:e,allowedPathsOptions:{allowedTypes:new Set([d.ExpressionType.Collection])},fileUri:e.top.fileUri},g=(0,d.getPathCheckedValueFromRecord)(t,r.DATA_FIELD_PROP_NAME_VALUE,d.ExpressionType.Path,y);if(g||(0,l.throwError)("UI.DataField entry with no 'Value' property"),g.tooComplexReason)return(0,d.buildTooComplexNode)(g.tooComplexReason,g.range,n.fileUri,a,[],g.value);let f=g.value;const h=s+(c?"/"+c:"");f=h+(f?"/"+f:"");const T=(0,d.resolveMetadataElement)(o.metadataService,f,!0);if(!(0,l.isValidPath)(o,g.value,h,{allowedTypes:new Set([d.ExpressionType.Collection])}))return(0,d.buildTooComplexNode)(d.TooComplexReason.UnsupportedPath,g.range,n.fileUri,a);const P={columnType:"Basic",...a,tooComplex:!1,nodeType:d.UI_NODE_TYPE_COLUMN,dataField:t,dataFieldContainingAnnotation:e,isChangeable:p,location:n,subnodes:[]},E=T.path,v=T.structuredType,b=o.annotationIndex;return P.edmPrimitiveType=(0,d.resolveMetadataElement)(o.metadataService,f).edmPrimitiveType,P.element=T,P.label=b[(0,d.getAnnotationIndexKey)(E,"com.sap.vocabularies.Common.v1.Label")],P.title=b[(0,d.getAnnotationIndexKey)(E,r.CDS_TERM_NAME_TITLE)],P.hidden=b[(0,d.getAnnotationIndexKey)(E,"com.sap.vocabularies.UI.v1.Hidden")],P.multiLineText=b[(0,d.getAnnotationIndexKey)(E,"com.sap.vocabularies.UI.v1.MultiLineText")],P.valueList=b[(0,d.getAnnotationIndexKey)(E,"com.sap.vocabularies.Common.v1.ValueList")],P.valueListReferences=b[(0,d.getAnnotationIndexKey)(E,"com.sap.vocabularies.Common.v1.ValueListReferences")],P.presentationVariant=(0,m.getReferencedPvFromValueListAnnotation)(o,P.valueList),P.valueListWithFixedValues=b[(0,d.getAnnotationIndexKey)(E,"com.sap.vocabularies.Common.v1.ValueListWithFixedValues")],P.readOnly=b[(0,d.getAnnotationIndexKey)(E,r.CDS_TERM_NAME_READONLY)],P.computed=b[(0,d.getAnnotationIndexKey)(E,"Org.OData.Core.V1.Computed")],P.fieldControl=b[(0,d.getAnnotationIndexKey)(E,"com.sap.vocabularies.Common.v1.FieldControl")],P.updateRestrictions=b[(0,d.getAnnotationIndexKey)(E.split("/")[0],r.UPDATE_RESTRICTIONS)],P.updatable=b[(0,d.getAnnotationIndexKey)(E.split("/")[0],r.CDS_TERM_UPDATABLE)],P.parentAnnoReadOnly=b[(0,d.getAnnotationIndexKey)(E.split("/")[0],r.CDS_TERM_NAME_READONLY)],P.text=b[(0,d.getAnnotationIndexKey)(E,"com.sap.vocabularies.Common.v1.Text")],P.textArrangement=b[(0,d.getAnnotationIndexKey)(E,r.CDS_TERM_NAME_TEXT_ARRANGEMENT)],v&&(P.cdsValueList=b[(0,d.getAnnotationIndexKey)(v,r.CDS_TERM_VALUE_LIST)]),(0,u.resolveFieldValueListData)(P,o),P};const g=new a.VocabularyService;function f(e,t,n){const a=(0,d.getValueFromAnnotation)(e,d.ExpressionType.EnumMember);if(t&&a.tooComplexReason)return(0,d.buildTooComplex)(a.tooComplexReason,a.range,n);const o=(a?.value||"").split("/").pop(),r={tooComplex:!1,allowedValues:h(e.term,!t&&!!e),locations:[{fileUri:n,range:a.range}]};return t?{...r,type:d.UI_PROP_TYPE_ENUM,value:o,baseValue:{value:d.ENUM_VALUE_NONE}}:a.tooComplexReason?{...r,type:d.UI_PROP_TYPE_ENUM,value:d.ENUM_VALUE_NONE,baseTooComplex:!0}:((0,d.excludeValueFromList)(r.allowedValues,o),{...r,type:d.UI_PROP_TYPE_ENUM,value:d.ENUM_VALUE_NONE,baseValue:{value:o}})}function h(e,t){const n=g.getTerm(e),a=g.getType(n.type),o=[];return"EnumType"===a.kind&&a.values.forEach((e=>o.push({value:e.name}))),t&&o.unshift({value:d.ENUM_VALUE_NULL,text:d.ENUM_VALUE_NONE}),o.unshift({value:d.ENUM_VALUE_NONE}),o}function T(e,t,n){const a=(e.annotations||[]).find((e=>"com.sap.vocabularies.UI.v1.Importance"===e.term&&!e.qualifier));if(a)return f(a,t,n.fileUri);{const e=h("com.sap.vocabularies.UI.v1.Importance",!t&&!!a);return{tooComplex:!1,type:d.UI_PROP_TYPE_ENUM,value:d.ENUM_VALUE_NONE,allowedValues:e,baseValue:{value:d.ENUM_VALUE_NONE},locations:[n]}}}function P(e,t){let n=null;const a=(e.annotations||[]).findIndex((e=>"com.sap.vocabularies.UI.v1.Importance"===e.term&&!e.qualifier));if(t&&![d.ENUM_VALUE_NONE,d.ENUM_VALUE_NULL].includes(t)){const r={type:"EnumMember",EnumMember:`com.sap.vocabularies.UI.v1.ImportanceType/${t}`};a>-1?(e.annotations[a].value=r,n=o.ChangeType.Update):(Array.isArray(e.annotations)||(e.annotations=[]),e.annotations.push({term:"com.sap.vocabularies.UI.v1.Importance",value:r}),n=o.ChangeType.Insert)}else a>-1&&(e.annotations.splice(a,1),n=o.ChangeType.Delete);return{changeType:n,annotationIndex:a>-1?a:e.annotations.length-1}}function E(e,t,n){const a=e.top.annotation,r=P(a.collection[t],n);if(r.changeType){const n={annotation:a};return e.app?.length&&(n.changeType=r.changeType,n.pointer=`/collection/${t}/annotations/${r.annotationIndex}`,r.changeType===o.ChangeType.Update&&(n.pointer+="/value/EnumMember")),n}}t.buildUIPropEnumFromAnnotation=f,t.getImportanceUIProperty=T,t.convertUiNodeInternalColumn=function(e,t){const n=e.location,a=e.dataField,o=e.isChangeable,s={nodeId:e.nodeId,dataType:(0,l.getDataType)(e.element,t.metadataService),columnType:"Basic",annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,tooComplex:!1,nodeType:e.nodeType,location:e.location,label:(0,i.getLabel)(a,n.fileUri,e),restriction:null,type:null,valueListTarget:null,entitySet:null,entitySetProperty:null,valueHelpText:null,valueHelpTextArrangement:null,asDropDown:null,text:null,textArrangement:null,path:null,subnodes:[],hidden:null,hideByProperty:null};s.path=(0,l.buildUIPropFromRecordProp)(a,r.DATA_FIELD_PROP_NAME_VALUE,n.fileUri,{expectedType:d.ExpressionType.Path}),s.importance=T(a,o,n),(0,u.handleTypeAndVhProperties)(t,s,e,n.fileUri),(0,u.handleRestriction)(s,e),""!==s.restriction.value&&"ReadOnly"!==s.restriction.value||(s.type={tooComplex:!1,type:d.UI_PROP_TYPE_ENUM,value:"",allowedValues:[{value:"",text:(0,d.getFormattedText)("")}]}),({text:s.text,textArrangement:s.textArrangement}=(0,i.getText)(e.text,e.textArrangement,t,e.element)),({hidden:s.hidden,hideByProperty:s.hideByProperty}=(0,y.getHidden)(e.dataFieldContainingAnnotation,a,n,t)),(0,d.isTooComplex)(s.text)||s.text.value===d.ENUM_VALUE_NOT_APPLICABLE||(s.text.baseTooComplex||s.text.baseValue.value===s.text.value||(0,d.excludeValueFromList)(s.text.allowedValues,s.text.baseValue.value),function(e,t,n){if((0,d.isTooComplex)(e))return;const a=n.vocabularyService.getType("com.sap.vocabularies.UI.v1.TextArrangementType"),o=e.allowedValues.find((e=>e.value===d.ENUM_VALUE_NULL));e.value!==d.ENUM_VALUE_NOT_APPLICABLE?(e.allowedValues=(a.values||[]).map((e=>({value:e.name,text:(0,d.getFormattedText)(e.name)}))),o&&e.allowedValues.unshift(o),e.allowedValues.unshift({value:d.ENUM_VALUE_NONE,text:(0,d.getFormattedText)(d.ENUM_VALUE_NONE)}),e.baseValue.value!==e.value&&(0,d.excludeValueFromList)(e.allowedValues,e.baseValue.value)):(e.baseValue&&e.baseValue?.value!==d.ENUM_VALUE_NONE||e.baseTooComplex)&&t===d.ENUM_VALUE_NONE&&e.allowedValues.unshift({value:d.ENUM_VALUE_NONE,text:(0,d.getFormattedText)(d.ENUM_VALUE_NONE)});e.baseValue.text=(0,d.getFormattedText)(e.baseValue.value)}(s.textArrangement,s.text.value,t)),(0,l.setReadonlyInUiProperties)(t,s.annotationPath,[s.label,s.importance,s.hidden,s.hideByProperty]);const p={context:t,layeredAnnotation:e.dataFieldContainingAnnotation,uiPropertyDefinitions:(0,c.getUIPropertyDefinitions)(d.UI_NODE_TYPE_COLUMN,s.columnType),currentUINodePath:(0,d.resolvePath)(s.annotationPath).valuePath,includeNonApplicableProperties:(0,l.isSameNodeId)(t.includeNonApplicablePropertiesForNode,e.nodeId)},g=e.presentationVariant||(0,m.getDummyPresentationVariantAnnotation)();return s.uiProperties=(0,c.buildGenericUIProperties)(p,(0,c.getPropValueMap)(s),new Map([[c.AnnotationRole.configuredAnnotation,g]])),(0,m.adaptValueHelpResultList)(t,s.type,e.element,s),(0,m.adaptValueHelpResultListSorting)(s.type,s,e),(0,i.adaptSemanticObject)(t,e.element,s.uiProperties),s},t.changeRecordImportance=P,t.changeUIPropertyColumn=function(e,t,n,a,o){const r=t.nodeId[t.nodeId.length-1],g=[];if(void 0!==o.label&&t.label.value!==o.label&&g.push(...(0,i.changeDataFieldLabel)(o.label,a.top,r)),""!==o.importance&&t.importance.value!==o.importance){const e=E(a,r,o.importance);g.push({targetPath:a.top.target,changes:[e]})}if("boolean"==typeof o.hidden&&t.hidden.value!==o.hidden){const e=(0,y.changeHiddenProperty)(a,r,o.hidden);g.push({targetPath:a.top.target,changes:[e]})}if(""!==o.hideByProperty&&void 0!==o.hideByProperty&&t.hideByProperty.value!==o.hideByProperty){const e=(0,y.changeHiddenProperty)(a,r,o.hideByProperty,!0);g.push({targetPath:a.top.target,changes:[e]})}if("Basic"===t.columnType&&(g.push(...(0,u.changeFieldType)(e,t,n,o)),g.push(...(0,u.changeRestriction)(t,n,o)),g.push(...(0,m.changeValueHelpLabelI18n)(e,n,o.valueHelpProperties))),void 0!==o.text&&o.text!==t.text.value&&!(0,d.isTooComplex)(t.text)&&t.text.allowedValues?.find((e=>e.value===o.text))&&g.push(...(0,i.changeText)(o.text,n,n.element.path).targetChanges),void 0!==o.textArrangement&&o.textArrangement!==t.textArrangement.value&&!(0,d.isTooComplex)(t.textArrangement)&&t.textArrangement.allowedValues?.find((e=>e.value===o.textArrangement))&&g.push(...(0,i.changeTextArrangement)(o.textArrangement,n,e)),"Rating"===t.columnType&&void 0!==o.targetValue&&t.targetValue?.value!==o.targetValue){const n=function(e,t,n,a){"Rating"===e.columnType&&(null===t||t<1||isNaN(t)||!Number.isInteger(t))&&(0,l.throwError)(`Invalid value for targetValue ${t}`);const o=e.target.value,{path:r,term:i,qualifier:c}=(0,p.resolveAnnotationPath)(o);let u;if(r){const e=`${n.top.target}/${r}`;u=(0,d.resolveMetadataElement)(a.metadataService,e,!0).name}else u=n.top.target;const m=(0,d.getAnnotationIndexKey)(u,i,c),y=a.annotationIndex[m].top;return(0,s.changeDataPointTargetValue)(t,y)}(t,o.targetValue,a,e);g.push(...n)}return function(e,t,n,a,o){const r=(0,c.getUIPropertyDefinitions)(d.UI_NODE_TYPE_COLUMN,t.columnType);if(r.propertyNames.length&&a.propertiesMap){o.push(...(0,i.handleDeletionsSemanticObject)(e,n.element,a.propertiesMap,t.uiProperties));const s=["Progress","Rating"].includes(t.columnType)?n.target.annotation:n.dataFieldContainingAnnotation,l=(0,d.resolvePath)(t.annotationPath).valuePath;o.push(...(0,c.updateGenericUIProperties)({context:e,layeredAnnotation:s,uiPropertyDefinitions:r,currentUINodePath:l},t.uiProperties,a.propertiesMap))}}(e,t,n,o,g),g},t.getColumnPropertiesForChange=function(e,t){const n={type:void 0,restriction:void 0,targetValue:void 0,text:void 0,textArrangement:void 0,importance:"",label:void 0,hidden:void 0,hideByProperty:"",valueHelpProperties:{valueHelpLabel:"",entitySetProperty:"",resultList:[],resultListSorting:[],asDropDown:!1,entitySet:"",valueHelpText:"",valueHelpTextArrangement:""}},a=(0,c.getUIPropertyDefinitions)(d.UI_NODE_TYPE_COLUMN,t);for(const t of e)!a.propertyMap[t.propertyName]||["valueHelpLabel","resultList","resultListSorting"].includes(t.propertyName)?(Object.keys(n).includes(t.propertyName)&&(n[t.propertyName]=t.value),Object.keys(n.valueHelpProperties).includes(t.propertyName)&&(n.valueHelpProperties[t.propertyName]=t.value)):(n.propertiesMap=n.propertiesMap||new Map,n.propertiesMap.set(t.propertyName,t.value));return n},t.buildDataFieldForColumn=function(e,t,n){const a=t.path,o=[{name:r.DATA_FIELD_PROP_NAME_VALUE,value:{type:"Path",Path:t.path}}];if(void 0===(0,i.getDefaultLabelAnnotation)(e,t.path,n)?.top){const e=a.split("/").pop();o.push({name:r.DATA_FIELD_PROP_NAME_LABEL,value:{type:"String",String:e}})}return{type:"com.sap.vocabularies.UI.v1.DataField",propertyValues:o}},t.toggleBooleanPropForDataField=function(e,t,n){if(!["com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation","com.sap.vocabularies.UI.v1.DataFieldForAction"].includes(e.type))return;const a={annotation:null},r=(0,d.getValueFromRecord)(e,t,d.ExpressionType.Bool);if(n)r?.tooComplexReason?(0,l.throwError)(`Cannot remove property ${t} in DataFieldForAction (too complex)`):r?.propIndex>-1&&(e.propertyValues.splice(r.propIndex,1),a.changeType=o.ChangeType.Delete,a.pointer=`propertyValues/${r.propIndex}`);else if(r)if(r.tooComplexReason)(0,l.throwError)(`Cannot toggle property ${t} in DataFieldForAction (too complex)`);else{const t=r.value;e.propertyValues[r.propIndex].value.Bool=!t,a.changeType=o.ChangeType.Update,a.pointer=`propertyValues/${r.propIndex}/value/Bool`,a.content={type:o.MOD_TYPE_PRIMITIVE,expressionType:d.ExpressionType.Bool,value:!t}}else{const n={name:t,value:{type:d.ExpressionType.Bool,Bool:!0}};e.propertyValues.push(n),a.changeType=o.ChangeType.Insert,a.pointer=`propertyValues/${e.propertyValues.length}`,a.content={type:o.MOD_TYPE_PROP_VALUE,value:n}}return a},t.createColumnImportanceChange=E},72870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.finalizeConnectedFieldsNode=t.getConnectedFieldsPropertiesForChange=t.generateTemplateChange=t.getTemplateTokens=t.changeUIPropertyConnectedFields=t.buildConnectedFieldsAnnotation=t.insertConnectedFields=t.convertUiNodeInternalConnectedFields=t.loadUiNodeInternalConnectedFields=void 0;const a=n(20576),o=n(78263),r=n(95207),i=n(35586),s=n(23635),l=n(53107),p=n(91310),c=n(74181);function u(e,t,n,a){function r(e){return e.split("/").join("_")}let l,p;({path1:l,path2:p}=t);const{delimiter:c,label:u}=t,m=a?a.split("/").length:0;if(m>0){const e=e=>{let t=e;return e.includes("/")&&e.startsWith(a)&&(t=e.split("/").slice(m).join("/")),t};l=e(l),p=e(p)}let d=r(l),y=r(p);d===y&&(d+="_1",y+="_2");const g=`{${d}}${c}{${y}}`,f={targetPath:n,changes:[]};const h=function(t){const n=Object.keys(e.annotationIndex).filter((e=>e.startsWith(`${t}/@com.sap.vocabularies.UI.v1.ConnectedFields#`))).map((e=>e.split("#").pop())),a=[{path:l,name:d},{path:p,name:y}].map((e=>({name:e.name,value:{type:s.ExpressionType.Record,Record:{type:"com.sap.vocabularies.UI.v1.DataField",propertyValues:[{name:o.DATA_FIELD_PROP_NAME_VALUE,value:{type:s.ExpressionType.Path,Path:e.path}}]}}}))),r=[{name:o.CONNECTED_FIELDS_PROP_NAME_TEMPLATE,value:{type:s.ExpressionType.String,String:g}},{name:o.CONNECTED_FIELDS_PROP_NAME_DATA,value:{type:s.ExpressionType.Record,Record:{type:"Org.OData.Core.V1.Dictionary",propertyValues:a}}}];return{term:"com.sap.vocabularies.UI.v1.ConnectedFields",qualifier:(0,i.generateId)(n,"connected",!0),record:{type:"com.sap.vocabularies.UI.v1.ConnectedFieldsType",propertyValues:r}}}(f.targetPath);f.changes.push({annotation:h});const T="@com.sap.vocabularies.UI.v1.ConnectedFields#"+h.qualifier,P=[{name:o.DATA_FIELD_PROP_NAME_TARGET,value:{type:s.ExpressionType.AnnotationPath,AnnotationPath:T}}];return u&&P.push({name:o.DATA_FIELD_PROP_NAME_LABEL,value:{type:s.ExpressionType.String,String:u}}),{targetChanges:f,dataField:{type:"com.sap.vocabularies.UI.v1.DataFieldForAnnotation",propertyValues:P}}}function m(e){return RegExp(/^{([\w\-@%&]+)}([^{}]*){([\w\-@%&]+)}$/g).exec(e)}function d(e,t){const n=e.top.annotation,r=(0,s.getValueFromAnnotation)(n,s.ExpressionType.Record);if(r.tooComplexReason)return;const i=(0,s.getValueFromRecord)(r.record,o.CONNECTED_FIELDS_PROP_NAME_TEMPLATE,s.ExpressionType.String);if(i.tooComplexReason)return;const l=m(i.value),p="string"==typeof t.delimiter?t.delimiter:l[2],c=`{${t.swapKeys?l[3]:l[1]}}${p}{${t.swapKeys?l[1]:l[3]}}`,u={annotation:n,changeType:a.ChangeType.Update},d=i.propIndex;return u.pointer=`record/propertyValues/${d}/value/String`,u.content={type:a.MOD_TYPE_PRIMITIVE,value:c,expressionType:s.ExpressionType.String},r.record.propertyValues[d].value={type:s.ExpressionType.String,String:c},u}t.loadUiNodeInternalConnectedFields=function(e,t,n,a,r,l,u){let d,y=!0;try{(0,c.throwTooComplexIf)("com.sap.vocabularies.UI.v1.DataFieldForAnnotation"!==n.type,(()=>(0,s.buildTooComplexNode)(s.TooComplexReason.UnsupportedType,a.range,a.fileUri,l)));const{referencedAnnotation:g,entityMdElement:f,relativePath:h}=(0,i.resolveAnnotationPathInRecord)(u,n,a,l,e),T=((e,t)=>(n,a)=>(0,s.buildTooComplexNode)(n,a||e.top.annotation.origin,e.top.fileUri,t))(g,l),{record:P,tooComplexReason:E,range:v}=(0,s.getValueFromAnnotation)(g.top.annotation,s.ExpressionType.Record);(0,c.throwTooComplexIf)(!!E,(()=>T(E,v))),y=!1,d={...l,tooComplex:!1,nodeType:s.UI_NODE_TYPE_CONNECTED_FIELDS,dataFieldContainingAnnotation:t,record:n,isChangeable:r,target:{annotation:g,annRecord:P,relativePath:h},location:a,subnodes:[]};const b=(e,t)=>(0,s.buildTooComplex)(e,t,g.top.fileUri),_=(0,s.getValueFromRecord)(P,o.CONNECTED_FIELDS_PROP_NAME_DATA,s.ExpressionType.Record);(0,c.throwTooComplexIf)(!_,(()=>b(s.TooComplexReason.MissingProperty,v)));const{record:A,tooComplexReason:C,range:N}=_;(0,c.throwTooComplexIf)(!!C,(()=>b(C,N)));const I=A.propertyValues;(0,c.throwTooComplexIf)(2!==I.length,(()=>b(s.TooComplexReason.UnsupportedValue,N)));const S=I.map((e=>e.name)),x=(0,s.getValueFromRecord)(P,o.CONNECTED_FIELDS_PROP_NAME_TEMPLATE,s.ExpressionType.String);(0,c.throwTooComplexIf)(!x,(()=>b(s.TooComplexReason.MissingProperty,v)));const{value:O,tooComplexReason:D,range:R}=x;(0,c.throwTooComplexIf)(!!D,(()=>b(D,R)));const M=m(O),V=M?[M[1],M[3]]:[];(0,c.throwTooComplexIf)(!M||V.some((e=>!S.includes(e))),(()=>b(s.TooComplexReason.WrongConnectedFieldsTemplate,R)));const U=`${e}${h?"/"+h:""}`,F=g.top.annotation.qualifier,w=e=>`/${f.name}/@com.sap.vocabularies.UI.v1.ConnectedFields#${F}/Data/${e}`;return V.forEach(((e,t)=>{const n=I.find((t=>t.name===e)),a=(0,s.getValueFromRecord)(A,n.name,s.ExpressionType.Record);(0,c.throwTooComplexIf)(!a,(()=>b(s.TooComplexReason.MissingProperty,N)));const{record:o,tooComplexReason:r,range:i}=a,m={annotationPath:w(n.name),nodeId:[...l.nodeId,t],allowedSubnodeTypes:[],allowedParentNodes:{[JSON.stringify(d.nodeId)]:!0}};let y;y=r||"com.sap.vocabularies.UI.v1.DataField"!==o.type?(0,s.buildTooComplexNode)(r||s.TooComplexReason.UnsupportedType,i,g.top.fileUri,m):(0,p.loadUiNodeInternalFormField)(U,g,o,{fileUri:g.top.fileUri,range:i},m,u),d.subnodes.push(y)})),d}catch(e){if(!e.tooComplex)throw e;return y?e:(d.tooComplexDelimiterData=e,d.subnodes=[],d)}},t.convertUiNodeInternalConnectedFields=function(e,t){const n=e.target.annotation,a=n.top.fileUri,c=(0,s.getValueFromAnnotation)(n.top.annotation,s.ExpressionType.Record),u=e.record,d=(0,s.getValueFromRecord)(c.record,o.CONNECTED_FIELDS_PROP_NAME_TEMPLATE,s.ExpressionType.String),y=m(d?.value??""),g=e.tooComplexDelimiterData??{tooComplex:!1,isLanguageDependent:!1,type:s.UI_PROP_TYPE_STRING,useBase:!1,value:y?.[2],locations:[{fileUri:a,range:d?.range}]},f={nodeId:e.nodeId,relativePath:{tooComplex:!1,type:"string",isLanguageDependent:!1,value:e.target.relativePath},paths:[],annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes??{},tooComplex:!1,nodeType:e.nodeType,location:e.location,label:(0,r.getLabel)(e.record,e.location.fileUri,e),delimiter:g,subnodes:[],allowedSubnodeTypes:[]};(0,s.isTooComplex)(f.label)||(0,s.getValueFromRecord)(e.record,o.DATA_FIELD_PROP_NAME_LABEL,s.ExpressionType.String)||(f.label=(0,r.getLabel)(e.target.annRecord,a,e));const{target:h,term:T,qualifier:P}=(0,s.resolvePath)(f.annotationPath),E=(0,s.getAnnotationIndexKey)(h,T,P);({hidden:f.hidden,hideByProperty:f.hideByProperty}=(0,l.getHidden)(t.annotationIndex[E],u,f.location,t)),(0,i.setReadonlyInUiProperties)(t,f.annotationPath,[f.label,f.hidden,f.hideByProperty]);const v=`/${e.target.annotation.top.target}/@com.sap.vocabularies.UI.v1.ConnectedFields#${n.top.annotation.qualifier}`;(0,i.setReadonlyInUiProperties)(t,v,[f.delimiter]),function(e,t,n,a){t.subnodes.forEach((t=>{let o,r,i=null;(0,s.isTooComplex)(t)?r=t:o=t.nodeType,o===s.UI_NODE_TYPE_FORM_FIELD&&(r=(0,p.convertUiNodeInternalField)(t,n,a),i=(0,s.isTooComplex)(r)?null:r.path),r&&(e.subnodes.push(r),e.paths.push(i))}))}(f,e,t,e.target.relativePath),t.selectable.formConnectedFieldsUsed.get(E)||t.selectable.formConnectedFieldsUsed.set(E,new Set);const b=t.selectable.formConnectedFieldsUsed.get(E);return f.paths.forEach((e=>{e&&!(0,s.isTooComplex)(e)&&(b.has(e.value)&&t.pageContext.logger?t.pageContext.logger.warning(`Duplicate connected field '${e.value}' in '${E}'`):b.add(e.value))})),f},t.insertConnectedFields=function(e,t,n){const r=[],l=t.referencedAnnotation.top,c=l.annotation;"com.sap.vocabularies.UI.v1.FieldGroup"===c.term&&(c.record=c.record||{type:"com.sap.vocabularies.UI.v1.FieldGroupType",propertyValues:[{name:o.FIELD_GROUP_PROP_NAME_DATA,value:{type:"Collection",Collection:[]}}]});const{collection:m,pointer:d}=(0,p.getDataFieldsCollectionForSection)(c);m&&Array.isArray(m)||(0,i.throwError)("No array found in section");let y=[];const g=((0,s.getValueFromRecord)(t.facet,"Target",s.ExpressionType.AnnotationPath)?.value||"").split("/");g.pop();const f=g.join("/");for(const o of n){if(o.nodeType===s.UI_NODE_TYPE_CONNECTED_FIELDS){const{dataField:t,targetChanges:n}=u(e,o,l.target,f);m.push(t),r.push(n)}const n={annotation:c};t.referencedAnnotation.app?.length&&(n.changeType=a.ChangeType.Insert,n.pointer=`${d}/${m.length-1}`),y.push(n)}return t.referencedAnnotation.app?.length||(y=[{annotation:c}]),r.push({targetPath:l.target,changes:y}),r},t.buildConnectedFieldsAnnotation=u,t.changeUIPropertyConnectedFields=function(e,t,n,a){const o=e.nodeId[e.nodeId.length-1],i=[];if(void 0!==a.label&&a.label!==e.label.value&&i.push(...function(e,t,n){const a=[];return a.push(...(0,r.changeDataFieldLabel)(e.label,t.referencedAnnotation.top,n)),a}(a,n,o)),"string"==typeof a.delimiter&&e.delimiter.value!==a.delimiter){const e=d(t.target.annotation,{delimiter:a.delimiter});e&&i.push({targetPath:t.target.annotation.top.target,changes:[e]})}if("boolean"==typeof a.hidden&&e.hidden.value!==a.hidden){const e=(0,l.changeHiddenProperty)(n.referencedAnnotation,o,a.hidden);i.push({targetPath:t.dataFieldContainingAnnotation.top.target,changes:[e]})}if(""!==a.hideByProperty&&void 0!==a.hideByProperty&&e.hideByProperty.value!==a.hideByProperty){const e=(0,l.changeHiddenProperty)(t.dataFieldContainingAnnotation,o,a.hideByProperty,!0);i.push({targetPath:t.dataFieldContainingAnnotation.top.target,changes:[e]})}return i},t.getTemplateTokens=m,t.generateTemplateChange=d,t.getConnectedFieldsPropertiesForChange=function(e){const t={};for(const n of e)"label"===n.propertyName?t.label=n.value:"delimiter"===n.propertyName?t.delimiter=n.value:"hidden"===n.propertyName?t.hidden=n.value:"hideByProperty"===n.propertyName&&(t.hideByProperty=n.value);return t},t.finalizeConnectedFieldsNode=function(e,t,n){if(!o.sectionTypesForFields.includes(n.sectionType))return;if(e.paths.some((e=>!e||(0,s.isTooComplex)(e))))return;const a=e.paths.map((e=>e.value));(t.parentNodes||[]).forEach((t=>{o.sectionTypesForFields.includes(t.subType)&&(t?.relativePath&&!a.every((e=>e.startsWith(t?.relativePath)))||t.containedConnectedFields&&!a.every((e=>!t.containedConnectedFields.has(e)))||(e.allowedParentNodes=e.allowedParentNodes||{},e.allowedParentNodes[JSON.stringify(t.nodeId)]=!0))}))}},47770:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.finalizeContactNode=t.changeUIPropertyContact=t.convertUiNodeInternalContact=t.loadUiNodeInternalContact=t.buildDataFieldForContactAnnotation=void 0;const a=n(70704),o=n(46163),r=n(68850),i=n(78263),s=n(23635),l=n(95207),p=n(35586),c=n(52564),u=n(53107);t.buildDataFieldForContactAnnotation=function(e,t,n){let o=t.path,r="",l=n;if(o.includes("/")){const t=o.split("/");o=t.pop(),r=t.join("/"),l=(0,s.resolveMetadataElement)(e.metadataService,`${n}/${r}`).path}const c={targetPath:l,changes:[]},u=function(t,n){const a=Object.keys(e.annotationIndex).filter((e=>e.startsWith(`${t}/@com.sap.vocabularies.Communication.v1.Contact#`))).map((e=>e.split("#").pop())),r=[{name:i.CONTACT_PROP_NAME_FULL_NAME,value:{type:"Path",Path:o}}];return{term:"com.sap.vocabularies.Communication.v1.Contact",qualifier:(0,p.generateId)(a,"contact",!0),record:{type:"com.sap.vocabularies.Communication.v1.ContactType",propertyValues:r}}}(c.targetPath);c.changes.push({annotation:u});let m="@com.sap.vocabularies.Communication.v1.Contact#"+u.qualifier;return r&&(m=r+"/"+m),{targetChanges:c,dataField:{type:"com.sap.vocabularies.UI.v1.DataFieldForAnnotation",propertyValues:[{name:i.DATA_FIELD_PROP_NAME_TARGET,value:{type:"AnnotationPath",AnnotationPath:m}},{name:i.DATA_FIELD_PROP_NAME_LABEL,value:{type:"String",String:a.i18n.t("Contact")}}]}}},t.loadUiNodeInternalContact=function(e,t,n,a,o,r){try{if("com.sap.vocabularies.UI.v1.DataFieldForAnnotation"!==t.type)throw(0,s.buildTooComplexNode)(s.TooComplexReason.UnsupportedType,a.range,a.fileUri,o);const{referencedAnnotation:i,entityMdElement:l,relativePath:c}=(0,p.resolveAnnotationPathInRecord)(r,t,a,o,e),u=((e,t)=>(n,a)=>(0,s.buildTooComplexNode)(n,a||e.top.annotation.origin,e.top.fileUri,t))(i,o),{record:m,tooComplexReason:d,range:y}=(0,s.getValueFromAnnotation)(i.top.annotation,s.ExpressionType.Record);if(d)throw u(d,y);return{...o,tooComplex:!1,nodeType:s.UI_NODE_TYPE_CONTACT,record:t,isChangeable:n,target:{annotation:i,annRecord:m,relativePath:c},location:a,subnodes:[]}}catch(e){if(e.tooComplex)return e;throw e}},t.convertUiNodeInternalContact=function(e,t){const n=e.target.annotation,a=(0,s.getValueFromAnnotation)(n.top.annotation,s.ExpressionType.Record);if((0,s.isTooComplex)(a))return(0,s.buildTooComplexNode)(a.tooComplexReason,a.range,n.top.fileUri,e);const r=e.location,i=e.record,m=e.isChangeable,d={nodeId:e.nodeId,relativePath:{tooComplex:!1,type:"string",isLanguageDependent:!1,value:e.target.relativePath},annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,tooComplex:!1,nodeType:e.nodeType,location:e.location,label:(0,l.getLabel)(e.record,e.location.fileUri,e),subnodes:[]},{target:y,term:g,qualifier:f}=(0,s.resolvePath)(d.annotationPath),h=(0,s.getAnnotationIndexKey)(y,g,f);({hidden:d.hidden,hideByProperty:d.hideByProperty}=(0,u.getHidden)(t.annotationIndex[h],i,d.location,t)),"com.sap.vocabularies.UI.v1.LineItem"===(0,s.resolvePath)(e.annotationPath).term&&(d.importance=(0,c.getImportanceUIProperty)(i,m,r)),(0,p.setReadonlyInUiProperties)(t,d.annotationPath,[d.label,d.importance,d.hidden,d.hideByProperty]);const T={context:t,uiPropertyDefinitions:(0,o.getUIPropertyDefinitions)(s.UI_NODE_TYPE_CONTACT),layeredAnnotation:e.target.annotation,includeNonApplicableProperties:(0,p.isSameNodeId)(t.includeNonApplicablePropertiesForNode,e.nodeId)};return d.uiProperties=(0,o.buildGenericUIProperties)(T,(0,o.getPropValueMap)(d)),d},t.changeUIPropertyContact=function(e,t,n,a,i){const p=t.nodeId[t.nodeId.length-1],m=[],d=i.get(s.ContactProperties.Label),y=i.get(s.ContactProperties.Hidden),g=i.get(s.ContactProperties.HideByProperty);if(void 0!==d&&t.label.value!==d&&m.push(...(0,l.changeDataFieldLabel)(d,a.top,p)),"com.sap.vocabularies.UI.v1.LineItem"===(0,s.resolvePath)(n.annotationPath).term){const e=i.get(s.ContactProperties.Importance);if(e&&t.importance.value!==e){const t=(0,c.createColumnImportanceChange)(a,p,e);m.push({targetPath:a.top.target,changes:[t]})}}if("boolean"==typeof y&&t.hidden.value!==y){const e=(0,u.changeHiddenProperty)(a,p,y);m.push({targetPath:a.top.target,changes:[e]})}if(""!==g&&void 0!==g&&t.hideByProperty.value!==g){const e=(0,u.changeHiddenProperty)(a,p,g,!0);m.push({targetPath:a.top.target,changes:[e]})}const f=(0,o.getUIPropertyDefinitions)(s.UI_NODE_TYPE_CONTACT);return m.push(...(0,r.updateGenericUIProperties)({context:e,uiPropertyDefinitions:f,layeredAnnotation:n.target.annotation},t.uiProperties,i)),m},t.finalizeContactNode=function(e,t,n){if(n.nodeType!==s.UI_NODE_TYPE_SECTION)return;const a=n;if(!i.sectionTypesForFields.includes(a.sectionType))return;if((0,s.isTooComplex)(e.relativePath))return;const o=e.relativePath.value||"",r=[...(a.relativePath||"").split("/"),...o.split("/")].filter((e=>!!e)).join("/");(t.parentNodes||[]).forEach((t=>{i.sectionTypesForFields.includes(t.subType)&&(t?.relativePath&&!r.startsWith(t?.relativePath)||(e.allowedParentNodes=e.allowedParentNodes||{},e.allowedParentNodes[JSON.stringify(t.nodeId)]=!0))}))}},18804:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeUIPropertyDataPoint=t.convertUiNodeInternalDataPoint=t.loadUiNodeInternalDataPoint=t.createDataPoint=void 0;const a=n(91310),o=n(20576),r=n(46163),i=n(68850),s=n(78263),l=n(95207),p=n(35586),c=n(23635),u=n(53107);function m(e){const{path:t}=(0,a.resolveAnnotationPath)(e.annotationPath),{term:n,qualifier:o}=e.dataPointAnnotation.top.annotation;return`${t}${e.relativePath?"/"+e.relativePath:""}/@${n}${o?"#"+o:""}`}t.createDataPoint=function(e,t,n,a){const r=[],i=a?.headerFacets?.top.annotation||{term:"com.sap.vocabularies.UI.v1.HeaderFacets",collection:[]},u=[],m=new Map;function d(n){let a=n.path;const d=n.visualizationType;let y,g,f,h="",T=t;if(a.includes("/")){const n=a.split("/");a=n.pop(),h=n.join("/"),T=(0,c.resolveMetadataElement)(e.metadataService,`${t}/${h}`).path}switch(d){case"Basic":f=`${n.path.split("/").pop()}`;break;case"Progress":y=`com.sap.vocabularies.UI.v1.VisualizationType/${d}`,g=100,f="progress";break;case"Rating":y=`com.sap.vocabularies.UI.v1.VisualizationType/${d}`,g=5,f="rating"}if(!m.has(T)){const t=Object.keys(e.annotationIndex).filter((e=>e.startsWith(`${T}/@com.sap.vocabularies.UI.v1.DataPoint#`))).map((e=>e.split("#").pop()));m.set(T,t)}const P=m.get(T),E=(0,p.generateId)(P,f,!0);let v;P.push(E);const b=(0,l.getDefaultLabelAnnotation)(e,a,`${T}/${a}`);b?.top?.annotation?.value?.type===c.ExpressionType.String&&(v=b?.top?.annotation?.value?.String||""),v=v||a;const _="Basic"===d?[]:[{name:s.DATA_POINT_PROP_NAME_TARGET_VALUE,value:{type:"Int",Int:g}},{name:s.DATA_POINT_PROP_NAME_VISUALIZATION,value:{type:"EnumMember",EnumMember:y}}],A={term:"com.sap.vocabularies.UI.v1.DataPoint",qualifier:E,record:{type:"com.sap.vocabularies.UI.v1.DataPointType",propertyValues:[{name:s.DATA_POINT_PROP_NAME_VALUE,value:{type:"Path",Path:a}},{name:s.DATA_POINT_PROP_NAME_TITLE,value:{type:"String",String:v}},..._]}};r.push({targetPath:T,changes:[{annotation:A}]});const C=new Set;(0,p.addFacetIds)(i.collection,C);const N=(0,p.generateId)([...C.values()],v),I=(h?`${h}/`:"")+`@com.sap.vocabularies.UI.v1.DataPoint#${E}`,S={type:"com.sap.vocabularies.UI.v1.ReferenceFacet",propertyValues:[{name:s.FACETS_PROP_NAME_ID,value:{type:"String",String:N}},{name:s.FACETS_PROP_NAME_TARGET,value:{type:"AnnotationPath",AnnotationPath:I}}]};u.push({annotation:i,changeType:o.ChangeType.Insert,pointer:`/collection/${i.collection.length}`}),i.collection.push(S)}for(const e of n)d(e);return a?.headerFacets?r.push({targetPath:t,changes:u}):r.push({targetPath:t,changes:[{annotation:i}]}),r},t.loadUiNodeInternalDataPoint=function(e,t,n,a,o,r,i){const l=(0,c.getValueFromRecord)(r.top.annotation.record,s.DATA_POINT_PROP_NAME_VALUE,c.ExpressionType.Path);l||(0,p.throwError)("UI.DataPoint entry with no 'Value' property");const u=r.top.fileUri;if(l.tooComplexReason)return(0,c.buildTooComplexNode)(l.tooComplexReason,l.range,u,i);let m=l.value;const d=t+(o?"/"+o:"");m=d+(m?"/"+m:"");const y=(0,c.resolveMetadataElement)(e.metadataService,m,!0);return y?(0,p.isValidPath)(e,l.value,d)?{...i,tooComplex:!1,nodeType:c.UI_NODE_TYPE_DATA_POINT,location:a,subnodes:[],facet:n,relativePath:o,dataPointAnnotation:r,element:y}:(0,c.buildTooComplexNode)(c.TooComplexReason.UnsupportedPath,l.range,u,i):(0,c.buildTooComplexNode)(c.TooComplexReason.NoValidPath,l.range,u,i,void 0,l.value)},t.convertUiNodeInternalDataPoint=function(e,t,n){const a=e.dataPointAnnotation,o=(0,c.getValueFromAnnotation)(a.top.annotation,c.ExpressionType.Record);if((0,c.isTooComplex)(o))return(0,c.buildTooComplexNode)(o.tooComplexReason,o.range,a.top.fileUri,e);const i={nodeId:e.nodeId,dataType:(0,p.getDataType)(e.element,t.metadataService),annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,tooComplex:!1,nodeType:e.nodeType,visualizationType:"Progress",location:e.location,subnodes:[]},{annotation:l,fileUri:d}=e.dataPointAnnotation.top,y=l.record;if(y){const t=function(e,t){const n=(0,c.getValueFromRecord)(e,s.DATA_POINT_PROP_NAME_VISUALIZATION,c.ExpressionType.EnumMember);if(!n)return"Basic";if(n.tooComplexReason)return{reason:c.TooComplexReason.ConstantExpressionExpected,fileUri:t.fileUri,range:n.range};const a=n.value;return a.endsWith("Progress")?"Progress":a.endsWith("Rating")?"Rating":{reason:c.TooComplexReason.UnsupportedEnumValue,fileUri:t.fileUri,range:n.range}}(y,{fileUri:d,range:l.origin});if("string"!=typeof t)return(0,c.buildTooComplexNode)(t.reason,t.range,t.fileUri,e);i.visualizationType=t}const g=(0,r.getUIPropertyDefinitions)(c.UI_NODE_TYPE_DATA_POINT,i.visualizationType),f=m(e),h={context:t,uiPropertyDefinitions:g,layeredAnnotation:e.dataPointAnnotation,currentUINodePath:(0,c.resolvePath)(f).valuePath,includeNonApplicableProperties:(0,p.isSameNodeId)(t.includeNonApplicablePropertiesForNode,e.nodeId)},{target:T,term:P,qualifier:E}=(0,c.resolvePath)(i.annotationPath),v=(0,c.getAnnotationIndexKey)(T,P,E);return({hidden:i.hidden,hideByProperty:i.hideByProperty}=(0,u.getHidden)(t.annotationIndex[v],e.facet,e.location,t)),i.uiProperties=(0,r.buildGenericUIProperties)(h,(0,r.getPropValueMap)(i)),i},t.changeUIPropertyDataPoint=function(e,t,n,a,o){const s=[],l=o.get(c.ColumnProperties.Hidden),d=o.get(c.ColumnProperties.HideByProperty),{facetsTop:y,facetsTopAnnotation:g}=(0,p.getFacets)(a),f=(0,r.getUIPropertyDefinitions)(c.UI_NODE_TYPE_DATA_POINT,t.visualizationType),h=m(n);if(s.push(...(0,i.updateGenericUIProperties)({context:e,uiPropertyDefinitions:f,layeredAnnotation:n.dataPointAnnotation,currentUINodePath:(0,c.resolvePath)(h).valuePath},t.uiProperties,o)),o.has("hidden")&&t.hidden.value!==l||o.has("hideByProperty")&&t.hideByProperty.value!==d){const e=(0,u.changeReferenceFacets)(t,n.facet,g,l,d);s.push({targetPath:y.target,changes:[e]})}return s}},83887:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildDataFieldForAnnotation=t.convertUiNodeInternalDataPointColumn=t.loadUiNodeInternalDataPointColumn=void 0;const a=n(78263),o=n(95207),r=n(35586),i=n(91310),s=n(52564),l=n(46163),p=n(23635),c=n(53107);let u;t.loadUiNodeInternalDataPointColumn=function(e,t,n,o,s,l){if(u=void 0,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation"!==t.type)return(0,p.buildTooComplexNode)(p.TooComplexReason.UnsupportedType,o.range,o.fileUri,s);const c=(0,p.getValueFromRecord)(t,a.DATA_FIELD_PROP_NAME_TARGET,p.ExpressionType.AnnotationPath);if(c||(0,r.throwError)("UI.DataFieldForAnnotation entry with no 'Target' property"),c.tooComplexReason)return(0,p.buildTooComplexNode)(c.tooComplexReason,c.range,o.fileUri,s);const m={columnType:void 0,...s,tooComplex:!1,nodeType:p.UI_NODE_TYPE_COLUMN,dataField:t,isChangeable:n,location:o,subnodes:[],target:{relativePath:"",annRecord:void 0,annotation:void 0}},d=c.value;if(d){const t=function(e,t,n,o,s,l){const c=n.value,{path:m,term:d,qualifier:y}=(0,i.resolveAnnotationPath)(c),g=e+(m?"/"+m:""),f=g.includes("/")?(0,p.resolveMetadataElement)(t.metadataService,g)?.path:g,h=(0,p.getAnnotationIndexKey)(f,d,y),T=t.annotationIndex[h];if(!T)return(0,p.buildTooComplexNode)(p.TooComplexReason.NoValidAnnotationPath,n.range,o.fileUri,s,void 0,(0,r.getName)(t,o.fileUri,c.substring(1)));if("com.sap.vocabularies.UI.v1.DataPoint"!==T.top?.annotation?.term)return(0,p.buildTooComplexNode)(p.TooComplexReason.UnsupportedTerm,T.top?.annotation?.origin,T.top?.fileUri,s);if(!T.top.annotation.record)return(0,p.buildTooComplexNode)(p.TooComplexReason.ConstantExpressionExpected,T.top.annotation.origin,T.top.fileUri,s);const P=function(e,t,n,o,i,s){const l=e.top.annotation.record;t.target.annotation=e,t.target.annRecord=l;const c=(0,p.getValueFromRecord)(l,a.DATA_POINT_PROP_NAME_VALUE,p.ExpressionType.Path);c||(0,r.throwError)("UI.DataPoint entry with no 'Value' property");if(c.tooComplexReason)return(0,p.buildTooComplexNode)(c.tooComplexReason,c.range,e.top.fileUri,n);if(c.value&&(t.target.relativePath=i?`${i}/${c.value}`:c.value,o+=`/${c.value}`,u=(0,p.resolveMetadataElement)(s.metadataService,o,!0),!u))return(0,p.buildTooComplexNode)(p.TooComplexReason.NoValidPath,c.range,e.top.fileUri,n,void 0,c.value)}(T,l,s,g,m,t);if(P)return P;const E=function(e,t,n){const o=t.top.annotation.record,r=t.top.annotation?.origin,i=(0,p.getValueFromRecord)(o,a.DATA_POINT_PROP_NAME_VISUALIZATION,p.ExpressionType.EnumMember);if(!i)return(0,p.buildTooComplexNode)(p.TooComplexReason.MissingProperty,r,t.top.fileUri,n);const s=(l=i.value,l.split("/").pop());var l;if("Rating"===s)e.columnType="Rating";else{if("Progress"!==s)return(0,p.buildTooComplexNode)(p.TooComplexReason.UnsupportedPath,i.range,t.top.fileUri,n);e.columnType="Progress"}}(l,T,s);if(E)return E}(e,l,c,o,s,m);if(t)return t}if(!d||!m.target.annotation){const e=p.TooComplexReason.NoValidAnnotationPath,t=[{...m.location,reason:e,message:(0,p.getNoValidPathMessage)(e,(0,r.getName)(l,o.fileUri,d.substring(1)),l.isCdsProject)}];return{...s,tooComplex:!0,tooComplexLocations:t}}if(u){const e=u.path,t=l.annotationIndex;m.label=t[(0,p.getAnnotationIndexKey)(e,"com.sap.vocabularies.Common.v1.Label")],m.title=t[(0,p.getAnnotationIndexKey)(e,a.CDS_TERM_NAME_TITLE)]}return m},t.convertUiNodeInternalDataPointColumn=function(e,t){const n=e.location,u=e.dataField,m={nodeId:e.nodeId,columnType:e.columnType,annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,tooComplex:!1,nodeType:e.nodeType,location:e.location,label:(0,o.getLabel)(u,n.fileUri,e),importance:(0,s.getImportanceUIProperty)(u,e.isChangeable,e.location),text:null,textArrangement:null,subnodes:[],type:null,valueListTarget:null,entitySet:null,entitySetProperty:null,asDropDown:null,valueHelpText:null,valueHelpTextArrangement:null},{target:d,term:y,qualifier:g}=(0,p.resolvePath)(m.annotationPath),f=(0,p.getAnnotationIndexKey)(d,y,g);if(({hidden:m.hidden,hideByProperty:m.hideByProperty}=(0,c.getHidden)(t.annotationIndex[f],u,n,t)),m.target=(0,r.buildUIPropFromRecordProp)(u,a.DATA_FIELD_PROP_NAME_TARGET,n.fileUri,{expectedType:p.ExpressionType.AnnotationPath}),(0,r.setReadonlyInUiProperties)(t,m.annotationPath,[m.label,m.importance,m.hidden,m.hideByProperty]),["Progress","Rating"].includes(m.columnType)){const n=m.target.value,{path:a}=(0,i.resolveAnnotationPath)(n),o={context:t,uiPropertyDefinitions:(0,l.getUIPropertyDefinitions)(p.UI_NODE_TYPE_COLUMN,m.columnType),layeredAnnotation:e.target.annotation,relativePath:a,includeNonApplicableProperties:(0,r.isSameNodeId)(t.includeNonApplicablePropertiesForNode,e.nodeId)};m.uiProperties=(0,l.buildGenericUIProperties)(o,(0,l.getPropValueMap)(m))}return"Rating"===m.columnType&&(m.targetValue=function(e){const t=e.location;let n={tooComplex:void 0,useBase:!1,type:"number",value:void 0};if(e.target?.annotation?.base?.length){const t=(0,p.getValueFromRecord)(e.target.annotation.base[0].annotation.record,a.DATA_POINT_PROP_NAME_TARGET_VALUE,p.ExpressionType.Int);t?.tooComplexReason?n.baseTooComplex=!0:t&&(n.baseValue=t.value),n.useBase=e.target?.annotation?.app?.length<=0}if(e.target?.annotation?.app?.length){const o=(0,p.getValueFromRecord)(e.target.annotation.top.annotation.record,a.DATA_POINT_PROP_NAME_TARGET_VALUE,p.ExpressionType.Int);o.tooComplexReason?n=(0,p.buildTooComplex)(o.tooComplexReason,o.range,e.target.annotation.top.fileUri,[{fileUri:t.fileUri,range:o?.range||t.range}]):(n.value=o.value,n.locations=[{fileUri:t.fileUri,range:o?.range||t.range}])}!(0,p.isTooComplex)(n)&&e.target?.annotation?.readonly&&(n.readonly=!0,n.readonlyTooltip=e.target.annotation.readonlyTooltip);return n}(e)),(0,p.isTooComplex)(m.uiProperties?.value)||(m.uiProperties.value.value=e.target.relativePath),m},t.buildDataFieldForAnnotation=function(e,t,n){const i={targetPath:"",changes:[]};let s=t.path;const l=s.split("/");let p="";i.targetPath=n,1===l.length?i.targetPath=n:(s=l.pop(),p=l.join("/"),i.targetPath=function(t){if(!t)return"";let a,o=n;const r=t.split("/");for(const t of r){if(a=e.metadataService.getMetadataElement(o+"/"+t),!a||!a.isEntityType)return"";o=a.structuredType}return a.structuredType}(p));const c=function(n){const o=Object.keys(e.annotationIndex).filter((e=>e.startsWith(`${n}/@com.sap.vocabularies.UI.v1.DataPoint#`))).map((e=>e.split("#").pop())),i="com.sap.vocabularies.UI.v1.VisualizationType/"+t.columnType,l=function(e){let t=1;"Rating"===e?t=5:"Progress"===e&&(t=100);return t}(t.columnType);return{term:"com.sap.vocabularies.UI.v1.DataPoint",qualifier:(0,r.generateId)(o,`${t.path.split("/").pop()}`),record:{propertyValues:[{name:a.DATA_POINT_PROP_NAME_VALUE,value:{type:"Path",Path:s}},{name:a.DATA_POINT_PROP_NAME_VISUALIZATION,value:{type:"EnumMember",EnumMember:i}},{name:a.DATA_POINT_PROP_NAME_TARGET_VALUE,value:{type:"Int",Int:l}}]}}}(i.targetPath);i.changes.push({annotation:c}),p=p?p+"/":"";const u=p+"@com.sap.vocabularies.UI.v1.DataPoint#"+c.qualifier,m=[{name:a.DATA_FIELD_PROP_NAME_TARGET,value:{type:"AnnotationPath",AnnotationPath:u}}];if(void 0===(0,o.getDefaultLabelAnnotation)(e,t.path,n)?.top){const e=s.split("/").pop();m.push({name:a.DATA_FIELD_PROP_NAME_LABEL,value:{type:"String",String:e}})}return{targetChanges:i,annotationRecord:{type:"com.sap.vocabularies.UI.v1.DataFieldForAnnotation",propertyValues:m}}}},78957:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAssociationsToEntitySet=t.buildDataFieldForFormField=t.finalizeFieldNode=t.changeFieldType=t.changeRestriction=t.changeUIPropertyFormField=t.getFieldPropertiesForChange=t.handleTypeAndVhProperties=t.handleRestriction=t.convertUiNodeInternalField=t.resolveFieldValueListData=t.loadUiNodeInternalFormField=void 0;const a=n(53308),o=n(20576),r=n(78263),i=n(95207),s=n(72691),l=n(35586),p=n(46163),c=n(23635),u=n(53107);function m(e,t){let n;if(e.valueList?({valueListContent:n}=(0,s.resolveValueListAnnotation)(t,e.valueList)):e.cdsValueList&&({valueListContent:n}=(0,s.resolveCdsValueListAnnotation)(t,e.element,e.cdsValueList.top.annotation,e.cdsValueList.top.fileUri)),n?.collectionPath&&n?.valueListProperty)try{const a=(0,l.getEntityTypeNameByEntitySet)(t.metadataService,n.collectionPath)+"/"+n.valueListProperty;e.valueHelpText=t.annotationIndex[(0,c.getAnnotationIndexKey)(a,"com.sap.vocabularies.Common.v1.Text")],e.valueHelpTextArrangement=t.annotationIndex[(0,c.getAnnotationIndexKey)(a,r.CDS_TERM_NAME_TEXT_ARRANGEMENT)]}catch(e){}}function d(e,t){const{tooComplex:n,isNotApplicable:a,isNotApplicableLocations:o}=(0,i.isFieldControlApplicable)(t);n?e.restriction=n:a?e.restriction={tooComplex:!1,type:c.UI_PROP_TYPE_ENUM,value:"",allowedValues:[{value:"",text:(0,c.getFormattedText)("")}],locations:o}:(e.restriction=(0,i.getFieldRestrictionForAnnotation)(t.fieldControl),t.fieldControl?.readonly&&(e.restriction.readonly=!0,e.restriction.readonlyTooltip=t.fieldControl.readonlyTooltip)),a||(e.restriction.locations=(0,c.getLocations)([t.parentAnnoReadOnly,t.readOnly,t.updatable,t.updateRestrictions,t.computed,t.fieldControl]))}function y(e,t,n,o){let r,l,p;if(({uiPropFieldType:t.type,valueListContent:p,baseMultiLine:r,appMultiLine:l}=(0,i.getFieldType)(e,n,n.multiLineText,o)),(0,c.isTooComplex)(t.type))return;const u=a.primitiveTypeMap[n.edmPrimitiveType]?.constantExpressionName;if(u){const a=(0,s.convertUINodeInternalValueHelp)(e,n,p,n.element,u);a.infoMessage&&(t.infoMessage=a.infoMessage),t.valueListTarget=a.valueListTarget,t.entitySet=a.entitySet,t.entitySetProperty=a.entitySetProperty,t.valueHelpText=a.valueHelpText,t.valueHelpTextArrangement=a.valueHelpTextArrangement,t.asDropDown=a.asDropDown,t.type.allowedValues=[],(0,s.isValueHelpBaseValueAllowed)(n)&&t.type.allowedValues.push({value:"None",text:(0,c.getFormattedText)("None")}),n.cdsValueList?.app?.length&&!n.valueList?.top&&"InputField"===t.type.value&&t.type.allowedValues.push({value:"InputField",text:(0,c.getFormattedText)("InputField")}),"Edm.String"!==n.edmPrimitiveType||!l?.value&&!r?.tooComplexReason&&r?.value||t.type.allowedValues.push({value:"TextArea",text:(0,c.getFormattedText)("TextArea")}),t.entitySet?.allowedValues.length>0&&t.type.allowedValues.push({value:"ValueHelp",text:(0,c.getFormattedText)("ValueHelp")})}}function g(e,t,n){const a=[],r=t.element.path,i=e.restriction;if(n.restriction&&n.restriction!==i.value&&i.allowedValues.find((e=>e.value===n.restriction))){let e;switch(n.restriction){case"None":break;case"Mandatory":e={type:"EnumMember",EnumMember:"com.sap.vocabularies.Common.v1.FieldControlType/Mandatory"};break;case"Optional":e={type:"EnumMember",EnumMember:"com.sap.vocabularies.Common.v1.FieldControlType/Optional"};break;case"ReadOnly":e={type:"EnumMember",EnumMember:"com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly"}}const i={annotation:{term:"com.sap.vocabularies.Common.v1.FieldControl",value:e}};t.fieldControl?.app?.length&&e&&(i.changeType=o.ChangeType.Update,i.pointer="/value/EnumMember"),a.push({targetPath:r,changes:[i]})}return a}function f(e,t,n,a){const r=[],i=t.type,l=n.element.path;if(function(e,t){return!e||e===t.value&&"ValueHelp"!==t.value||!t.allowedValues.find((t=>t.value===e))}(a.type,i))return r;const p=n.multiLineText?.top,u=n.valueListWithFixedValues?.top;let m,d,y,g,f,h,T=[];switch(a.type){case"TextArea":g={term:"com.sap.vocabularies.Common.v1.ValueList"},f={term:"com.sap.vocabularies.Common.v1.ValueListWithFixedValues"},m={type:"Bool",Bool:!0};break;case"ValueHelp":(0,c.getValueFromAnnotation)(p?.annotation,c.ExpressionType.Bool)?.value&&(m={type:"Bool",Bool:!1}),({removeValueListAnno:d,valueHelpTargetChanges:T}=(0,s.changeValueHelpAnnotations)(e,l,n.element,a.valueHelpProperties,n)),d&&(g={term:"com.sap.vocabularies.Common.v1.ValueList"}),(0,c.getValueFromAnnotation)(u?.annotation,c.ExpressionType.Bool)?.value!==a.valueHelpProperties.asDropDown&&(y={type:"Bool",Bool:a.valueHelpProperties.asDropDown});break;case"None":g={term:"com.sap.vocabularies.Common.v1.ValueList"},f={term:"com.sap.vocabularies.Common.v1.ValueListWithFixedValues"},h={term:"com.sap.vocabularies.UI.v1.MultiLineText"};break;case"InputField":g={term:"com.sap.vocabularies.Common.v1.ValueList"},f={term:"com.sap.vocabularies.Common.v1.ValueListWithFixedValues"},m={type:"Bool",Bool:!1}}g&&n.valueList?.app?.length&&r.push({targetPath:l,changes:[{annotation:g}]}),f&&n.valueListWithFixedValues?.app?.length&&r.push({targetPath:l,changes:[{annotation:f}]}),h&&n.multiLineText?.app?.length&&r.push({targetPath:l,changes:[{annotation:h}]}),r.push(...T);const P=[];P.push(...function(e,t){if(!e)return[];const n={annotation:{term:"com.sap.vocabularies.UI.v1.MultiLineText",value:e}};t.multiLineText?.app?.length&&(t.multiLineText.app[0].annotation.value?(n.changeType=o.ChangeType.Update,n.pointer="/value/Bool"):(n.changeType=o.ChangeType.Insert,n.pointer="/value"));return[n]}(m,n)),P.push(...function(e,t){if(!e)return[];const n={annotation:{term:"com.sap.vocabularies.Common.v1.ValueListWithFixedValues",value:e}};t.valueListWithFixedValues?.app?.length&&(t.valueListWithFixedValues.app[0].annotation.value?(n.changeType=o.ChangeType.Update,n.pointer="/value/Bool"):(n.changeType=o.ChangeType.Insert,n.pointer="/value"));return[n]}(y,n)),P.length>0&&r.push({targetPath:l,changes:P});const E=a.valueHelpProperties;return r.push(...(0,s.changeValueHelpTextAndTextArrangement)(e,t,n,E)),r}t.loadUiNodeInternalFormField=function(e,t,n,a,o,i){const p={context:i,target:t,allowedPathsOptions:{allowedTypes:new Set([c.ExpressionType.Collection])},fileUri:t.top.fileUri},u=(0,c.getPathCheckedValueFromRecord)(n,r.DATA_FIELD_PROP_NAME_VALUE,c.ExpressionType.Path,p);if(u||(0,l.throwError)("UI.DataField entry with no 'Value' property"),u.tooComplexReason)return(0,c.buildTooComplexNode)(u.tooComplexReason,u.range,a.fileUri,o,[],u.value);let d=u.value;d=e+(d?"/"+d:"");const y=(0,c.resolveMetadataElement)(i.metadataService,d,!0),g={allowedTypes:new Set([c.ExpressionType.Collection])},f={expandToPaths:new Set([u.value])};if(!(0,l.isValidPath)(i,u.value,e,g,f))return(0,c.buildTooComplexNode)(c.TooComplexReason.UnsupportedPath,u.range,a.fileUri,o);const h={...o,dataFieldContainingAnnotation:t,tooComplex:!1,nodeType:c.UI_NODE_TYPE_FORM_FIELD,dataField:n,location:a,subnodes:[]},T=y.path,P=y.structuredType,E=i.annotationIndex,v="com.sap.vocabularies.UI.v1.ConnectedFields"===t.top.annotation.term;return h.edmPrimitiveType=(0,c.resolveMetadataElement)(i.metadataService,d).edmPrimitiveType,h.element=y,v?h.isConnected=!0:(h.label=E[(0,c.getAnnotationIndexKey)(T,"com.sap.vocabularies.Common.v1.Label")],h.title=E[(0,c.getAnnotationIndexKey)(T,r.CDS_TERM_NAME_TITLE)]),h.hidden=E[(0,c.getAnnotationIndexKey)(T,"com.sap.vocabularies.UI.v1.Hidden")],h.multiLineText=E[(0,c.getAnnotationIndexKey)(T,"com.sap.vocabularies.UI.v1.MultiLineText")],h.valueList=E[(0,c.getAnnotationIndexKey)(T,"com.sap.vocabularies.Common.v1.ValueList")],h.valueListReferences=E[(0,c.getAnnotationIndexKey)(T,"com.sap.vocabularies.Common.v1.ValueListReferences")],h.presentationVariant=(0,s.getReferencedPvFromValueListAnnotation)(i,h.valueList),h.valueListWithFixedValues=E[(0,c.getAnnotationIndexKey)(T,"com.sap.vocabularies.Common.v1.ValueListWithFixedValues")],h.readOnly=E[(0,c.getAnnotationIndexKey)(T,r.CDS_TERM_NAME_READONLY)],h.computed=E[(0,c.getAnnotationIndexKey)(T,"Org.OData.Core.V1.Computed")],h.fieldControl=E[(0,c.getAnnotationIndexKey)(T,"com.sap.vocabularies.Common.v1.FieldControl")],h.updateRestrictions=E[(0,c.getAnnotationIndexKey)(T.split("/")[0],r.UPDATE_RESTRICTIONS)],h.updatable=E[(0,c.getAnnotationIndexKey)(T.split("/")[0],r.CDS_TERM_UPDATABLE)],h.parentAnnoReadOnly=E[(0,c.getAnnotationIndexKey)(T.split("/")[0],r.CDS_TERM_NAME_READONLY)],h.text=E[(0,c.getAnnotationIndexKey)(T,"com.sap.vocabularies.Common.v1.Text")],h.textArrangement=E[(0,c.getAnnotationIndexKey)(T,r.CDS_TERM_NAME_TEXT_ARRANGEMENT)],P&&(h.cdsValueList=E[(0,c.getAnnotationIndexKey)(P,r.CDS_TERM_VALUE_LIST)]),m(h,i),h},t.resolveFieldValueListData=m,t.convertUiNodeInternalField=function(e,t,n){const a=e.dataField,o=e.location.fileUri,m={nodeId:e.nodeId,annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,tooComplex:!1,nodeType:e.nodeType,location:e.location,label:e.isConnected?null:(0,i.getLabel)(a,o,e),path:null,dataType:(0,l.getDataType)(e.element,t.metadataService),restriction:null,type:null,valueListTarget:null,entitySet:null,entitySetProperty:null,valueHelpText:null,valueHelpTextArrangement:null,asDropDown:null,text:null,textArrangement:null,hidden:null,hideByProperty:null,subnodes:[]};m.path=(0,l.buildUIPropFromRecordProp)(a,r.DATA_FIELD_PROP_NAME_VALUE,o,{expectedType:c.ExpressionType.Path});let g=m.path?.value;if(g&&(g=n?n+"/"+g:g,m.path.value=g),!e.isConnected){const{target:n,term:a,qualifier:o}=(0,c.resolvePath)(e.annotationPath),r=(0,c.getAnnotationIndexKey)(n,a,o),i=t.selectable.formFieldsUsed;i.get(r)||i.set(r,new Set);const s=i.get(r);s.has(g)&&t.pageContext.logger?t.pageContext.logger.warning(`Duplicate field '${g}' in '${r}'`):s.add(g)}y(t,m,e,o),d(m,e),""!==m.restriction.value&&"ReadOnly"!==m.restriction.value||(m.type={tooComplex:!1,type:c.UI_PROP_TYPE_ENUM,value:"",allowedValues:[{value:"",text:(0,c.getFormattedText)("")}]}),(0,l.getTextAndTextArrangementForFields)(t,m,e),e.isConnected||({hidden:m.hidden,hideByProperty:m.hideByProperty}=(0,u.getHidden)(e.dataFieldContainingAnnotation,a,m.location,t)),(0,l.setReadonlyInUiProperties)(t,m.annotationPath,[m.label,m.hidden,m.hideByProperty]);const f={context:t,layeredAnnotation:e.dataFieldContainingAnnotation,uiPropertyDefinitions:(0,p.getUIPropertyDefinitions)(c.UI_NODE_TYPE_FORM_FIELD),currentUINodePath:(0,c.resolvePath)(m.annotationPath).valuePath,includeNonApplicableProperties:(0,l.isSameNodeId)(t.includeNonApplicablePropertiesForNode,e.nodeId)},h=e.presentationVariant||(0,s.getDummyPresentationVariantAnnotation)();return m.uiProperties=(0,p.buildGenericUIProperties)(f,(0,p.getPropValueMap)(m),new Map([[p.AnnotationRole.configuredAnnotation,h]])),(0,s.adaptValueHelpResultList)(t,m.type,e.element,m),(0,s.adaptValueHelpResultListSorting)(m.type,m,e),(0,i.adaptSemanticObject)(t,e.element,m.uiProperties),m},t.handleRestriction=d,t.handleTypeAndVhProperties=y,t.getFieldPropertiesForChange=function(e){const t={label:void 0,type:void 0,restriction:void 0,hidden:void 0,hideByProperty:void 0,text:void 0,textArrangement:void 0,valueHelpProperties:{valueHelpLabel:"",entitySetProperty:"",resultList:[],resultListSorting:[],asDropDown:!1,entitySet:"",valueHelpText:"",valueHelpTextArrangement:""}};for(const n of e)Object.keys(t).includes(n.propertyName)&&(t[n.propertyName]=n.value),Object.keys(t.valueHelpProperties).includes(n.propertyName)&&(t.valueHelpProperties[n.propertyName]=n.value);return t.uiPropertiesMap=(0,p.getChangedPropertiesMap)(e),t.uiPropertiesMap.delete(c.uiPropertyNames.valueHelp.valueHelpLabel),t.uiPropertiesMap.delete(c.uiPropertyNames.valueHelp.resultList),t.uiPropertiesMap.delete(c.uiPropertyNames.valueHelp.resultListSorting),t},t.changeUIPropertyFormField=function(e,t,n,a,o){const r=t.nodeId[t.nodeId.length-1],l=[];if(void 0!==o.label&&o.label!==t.label.value){const e=a.referencedAnnotation.top;l.push(...(0,i.changeDataFieldLabel)(o.label,e,r))}if(l.push(...f(e,t,n,o)),l.push(...(0,s.changeValueHelpLabelI18n)(e,n,o.valueHelpProperties)),l.push(...g(t,n,o)),void 0!==o.text&&o.text!==t.text.value&&!(0,c.isTooComplex)(t.text)&&t.text.allowedValues?.find((e=>e.value===o.text))&&l.push(...(0,i.changeText)(o.text,n,n.element.path,e,t).targetChanges),void 0!==o.textArrangement&&o.textArrangement!==t.textArrangement.value&&!(0,c.isTooComplex)(t.textArrangement)&&t.textArrangement.allowedValues?.find((e=>e.value===o.textArrangement))&&l.push(...(0,i.changeTextArrangement)(o.textArrangement,n,e)),"boolean"==typeof o.hidden&&t.hidden.value!==o.hidden){const e=(0,u.changeHiddenProperty)(n.dataFieldContainingAnnotation,r,o.hidden);l.push({targetPath:n.dataFieldContainingAnnotation.top.target,changes:[e]})}if(""!==o.hideByProperty&&void 0!==o.hideByProperty&&t.hideByProperty.value!==o.hideByProperty){const e=(0,u.changeHiddenProperty)(n.dataFieldContainingAnnotation,r,o.hideByProperty,!0);l.push({targetPath:n.dataFieldContainingAnnotation.top.target,changes:[e]})}l.push(...(0,i.handleDeletionsSemanticObject)(e,n.element,o.uiPropertiesMap,t.uiProperties));const m={context:e,layeredAnnotation:n.dataFieldContainingAnnotation,uiPropertyDefinitions:(0,p.getUIPropertyDefinitions)(c.UI_NODE_TYPE_FORM_FIELD),currentUINodePath:(0,c.resolvePath)(t.annotationPath).valuePath};return l.push(...(0,p.updateGenericUIProperties)(m,t.uiProperties,o.uiPropertiesMap)),l},t.changeRestriction=g,t.changeFieldType=f,t.finalizeFieldNode=function(e,t,n){if(!r.sectionTypesForFields.includes(n.sectionType))return;if((0,c.isTooComplex)(e.path))return;const a=e.path.value;(t.parentNodes||[]).forEach((t=>{r.sectionTypesForFields.includes(t.subType)&&(t?.relativePath&&!a.startsWith(t?.relativePath)||t.containedFields&&t.containedFields.has(a)||(e.allowedParentNodes=e.allowedParentNodes||{},e.allowedParentNodes[JSON.stringify(t.nodeId)]=!0))}))},t.buildDataFieldForFormField=function(e,t,n,a){const o=n.path;let s=o;t.relativePath&&(o.startsWith(t.relativePath)?s=s.slice(t.relativePath.length+1):(0,l.throwError)(`FieldPath '${o}' needs to start with FieldGroup path '${t.relativePath}'`));const p={type:"com.sap.vocabularies.UI.v1.DataField",propertyValues:[{name:r.DATA_FIELD_PROP_NAME_VALUE,value:{type:"Path",Path:s}}]};if(void 0===(0,i.getDefaultLabelAnnotation)(e,n.path,a)?.top){const e=s.split("/").pop();p.propertyValues.push({name:r.DATA_FIELD_PROP_NAME_LABEL,value:{type:"String",String:e}})}return p},t.findAssociationsToEntitySet=function(e,t,n){const a=t.path.split("/")[0],o=e.metadataService.getMetadataElement(a),r=(0,l.getEntityTypeNameByEntitySet)(e.metadataService,n);if(!o||!r)return null;const i=o.content.filter((e=>e.isEntityType&&e.structuredType===r)).map((e=>e.name));return a===r&&i.push(""),i}},66711:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeFilterFieldLabel=t.changeUIPropertyFilterField=t.getFilterFieldPropertiesForChange=t.getUINodeOptionsFilterField=t.convertUiNodeInternalFilterField=t.loadUiInternalFilterField=void 0;const a=n(53308),o=n(32217),r=n(20576),i=n(78263),s=n(95207),l=n(72691),p=n(35586),c=n(78957),u=n(70704),m=n(46163),d=n(23635);function y(e,t,n){const a=(0,s.getDefaultLabelAnnotation)(t,n.propertyPath,e),o=a?.top.fileUri,r=a?.top&&!a?.app.length,i=a?.readonly??!1,l=a?.readonlyTooltip??"",p=(0,d.getValueFromAnnotation)(a?.top.annotation,d.ExpressionType.String);if(!p)return{isLanguageDependent:!0,tooComplex:!1,type:d.UI_PROP_TYPE_STRING,value:"",readonly:i,readonlyTooltip:l,useBase:!1,locations:[]};if(p.tooComplexReason){const{locations:e,tooComplexLocations:t}=(0,d.buildTooComplex)(p.tooComplexReason,p.range,o);return r?{isLanguageDependent:!0,tooComplex:!1,type:d.UI_PROP_TYPE_STRING,value:"",readonly:i,useBase:!0,baseTooComplex:!0,baseValue:{value:p.value},locations:e}:{tooComplex:!0,tooComplexLocations:t,locations:e}}let c;return c=r?{isLanguageDependent:!0,tooComplex:!1,type:d.UI_PROP_TYPE_STRING,value:"",useBase:!0,baseTooComplex:!1,baseValue:{value:p.value},locations:[{fileUri:o,range:p.range}]}:{isLanguageDependent:!0,tooComplex:!1,type:d.UI_PROP_TYPE_STRING,value:p.value,useBase:!1,locations:[{fileUri:o,range:p.range}]},i?(c.readonly=!0,c.readonlyTooltip=l):p.multilineType&&(c.readonly=!0,c.readonlyTooltip=u.i18n.t("ReadonlyTooltipMultilineText")),c}function g(e,t){return{type:d.UI_PROP_TYPE_STRING,value:e,tooComplex:!1,isLanguageDependent:!1,locations:[t]}}function f(e,t,n,a,s){const l=a.selectionFields?.top.target,p=n.element?.path||`${l}/${n.propertyPath}`,c=[],u=(0,d.getAnnotationIndexKey)(p,i.CDS_TERM_NAME_TITLE),m=e.annotationIndex[u];if(""===s){const e={annotation:{term:"com.sap.vocabularies.Common.v1.Label"}};m?.app&&c.push({annotation:{term:`${o.CDS_VOCABULARY_NAMESPACE}.Title`}}),c.push(e)}else{const e={annotation:{term:"com.sap.vocabularies.Common.v1.Label",value:{type:d.ExpressionType.String,String:s}},pointer:"value/String"};""===t.label.value?e.changeType=r.ChangeType.Insert:e.changeType=r.ChangeType.Update,c.push(e)}return[{targetPath:p,changes:c}]}t.loadUiInternalFilterField=function(e,t,n,a,o){const r=o+"/"+e,s=(0,d.resolveMetadataElement)(a.metadataService,r,!0);if(!s){const{range:a,fileUri:o}=t;return(0,d.buildTooComplexNode)(d.TooComplexReason.NoValidPath,a,o,n,void 0,e)}const p={...n,tooComplex:!1,nodeType:d.UI_NODE_TYPE_FILTER_FIELD,propertyPath:e,element:s,edmPrimitiveType:(0,d.resolveMetadataElement)(a.metadataService,r)?.edmPrimitiveType,location:t,subnodes:[]},u=s.path,m=s.structuredType,y=a.annotationIndex;return p.valueList=y[(0,d.getAnnotationIndexKey)(u,"com.sap.vocabularies.Common.v1.ValueList")],p.presentationVariant=(0,l.getReferencedPvFromValueListAnnotation)(a,p.valueList),p.valueListReferences=y[(0,d.getAnnotationIndexKey)(u,"com.sap.vocabularies.Common.v1.ValueListReferences")],p.valueListWithFixedValues=y[(0,d.getAnnotationIndexKey)(u,"com.sap.vocabularies.Common.v1.ValueListWithFixedValues")],p.text=y[(0,d.getAnnotationIndexKey)(u,"com.sap.vocabularies.Common.v1.Text")],p.textArrangement=y[(0,d.getAnnotationIndexKey)(u,i.CDS_TERM_NAME_TEXT_ARRANGEMENT)],m&&(p.cdsValueList=y[(0,d.getAnnotationIndexKey)(m,i.CDS_TERM_VALUE_LIST)]),(0,c.resolveFieldValueListData)(p,a),p},t.convertUiNodeInternalFilterField=function(e,t,n){const o={nodeId:e.nodeId,annotationPath:e.annotationPath,tooComplex:!1,nodeType:e.nodeType,location:e.location,label:y(n,t,e),path:g(e.propertyPath,e.location),type:null,valueListTarget:null,entitySet:null,entitySetProperty:null,valueHelpText:null,valueHelpTextArrangement:null,asDropDown:null,subnodes:[],text:null,textArrangement:null,allowedParentNodes:e.allowedParentNodes},r=e.location.fileUri;let i;({uiPropFieldType:o.type,valueListContent:i}=(0,s.getFieldType)(t,e,null,r));const c=a.primitiveTypeMap[e.edmPrimitiveType]?.constantExpressionName;if(!(0,d.isTooComplex)(o.type)){const n=(0,s.convertUINodeInternalValueHelp)(t,e,i,e.element,c);n.infoMessage&&(o.infoMessage=n.infoMessage),o.valueListTarget=n.valueListTarget,o.entitySet=n.entitySet,o.entitySetProperty=n.entitySetProperty,o.valueHelpText=n.valueHelpText,o.valueHelpTextArrangement=n.valueHelpTextArrangement,o.asDropDown=n.asDropDown,o.type.allowedValues=[],(0,l.isValueHelpBaseValueAllowed)(e)&&o.type.allowedValues.push({value:"None",text:(0,d.getFormattedText)("None")}),o.entitySet?.allowedValues.length>0&&o.type.allowedValues.push({value:"ValueHelp",text:(0,d.getFormattedText)("ValueHelp")})}(0,p.getTextAndTextArrangementForFields)(t,o,e);const u=(0,m.getUIPropertyDefinitions)(d.UI_NODE_TYPE_FILTER_FIELD),f=(0,d.resolvePath)(e.annotationPath)?.target,h=`${f}/${e.propertyPath}`,T={context:t,uiPropertyDefinitions:u,layeredAnnotation:(0,m.getUnitsCurrenciesDummyAnnotation)(h,e.location),currentUINodePath:""},P=e.presentationVariant||(0,l.getDummyPresentationVariantAnnotation)();return o.uiProperties=(0,m.buildGenericUIProperties)(T,(0,m.getPropValueMap)(o),new Map([[m.AnnotationRole.configuredAnnotation,P]])),!c||(0,d.isTooComplex)(o.type)||((0,l.adaptValueHelpResultList)(t,o.type,e.element,o),(0,l.adaptValueHelpResultListSorting)(o.type,o,e)),o},t.getUINodeOptionsFilterField=function(e,t,n,a){const o=e.metadataService,r=o.getMetadataElement(t);r&&r.isEntityType||(0,p.throwError)(`Path could not be resolved to EntityName: ${t}`);const i={noHiddenFilter:!0,noComplexProperties:!0,allowCollectionValues:!0},{fieldPaths:s,associations:l}=(0,p.getAvailableFieldPathsForEntity)(e,r,i);for(const t of l){if(r.structuredType&&r.name!==t)continue;const n=o.getMetadataElement(r.path+"/"+t);if(n?.structuredType){const a=o.getMetadataElement(n?.structuredType);s.push(...(0,p.getAvailableFieldPathsForEntity)(e,a,i,t).fieldPaths.map((e=>t+"/"+e)))}}const c=new Set;return(a?.subnodes||[]).forEach((e=>{(0,d.isTooComplex)(e)||(0,d.isTooComplex)(e.path)||c.add(e.path.value)})),{nodeType:n,paths:s.filter((e=>!c.has(e)))}},t.getFilterFieldPropertiesForChange=function(e){const t={label:void 0,type:void 0,text:void 0,textArrangement:void 0,valueHelpProperties:{valueHelpLabel:"",entitySetProperty:"",resultList:[],resultListSorting:[],asDropDown:!1,entitySet:"",valueHelpText:"",valueHelpTextArrangement:""}};for(const n of e)Object.keys(t).includes(n.propertyName)&&(t[n.propertyName]=n.value),Object.keys(t.valueHelpProperties).includes(n.propertyName)&&(t.valueHelpProperties[n.propertyName]=n.value);return t},t.changeUIPropertyFilterField=function(e,t,n,a,o){const i=[];void 0!==o.label&&o.label!==t.label.value&&i.push(...f(e,t,n,a,o.label));const p=t.type,c=n.element.path;if(o.type&&(o.type!==p.value||"ValueHelp"===p.value)&&p.allowedValues.find((e=>e.value===o.type))){const{vhProps:a,targetAnnotations:l}=function(e,t,n,a){const o=[],i=a.valueHelpProperties,l=t.valueListWithFixedValues?.top;let p,c,u,m,y;switch(a.type){case"ValueHelp":({removeValueListAnno:p,valueHelpTargetChanges:c}=(0,s.changeValueHelpAnnotations)(e,n,t.element,i,t)),p&&(m={term:"com.sap.vocabularies.Common.v1.ValueList"}),(0,d.getValueFromAnnotation)(l?.annotation,d.ExpressionType.Bool)?.value!==i.asDropDown&&(u={type:"Bool",Bool:i.asDropDown});break;case"None":m={term:"com.sap.vocabularies.Common.v1.ValueList"},y={term:"com.sap.vocabularies.Common.v1.ValueListWithFixedValues"}}m&&t.valueList?.app?.length&&o.push({targetPath:n,changes:[{annotation:m}]});y&&t.valueListWithFixedValues?.app?.length&&o.push({targetPath:n,changes:[{annotation:y}]});o.push(...c??[]);const g=[];if(u){const e={annotation:{term:"com.sap.vocabularies.Common.v1.ValueListWithFixedValues",value:u}};t.valueListWithFixedValues?.app?.length&&(t.valueListWithFixedValues.app[0].annotation.value?(e.changeType=r.ChangeType.Update,e.pointer="/value/Bool"):(e.changeType=r.ChangeType.Insert,e.pointer="/value")),g.push(e)}g.length>0&&o.push({targetPath:n,changes:g});return{vhProps:i,targetAnnotations:o}}(e,n,c,o);i.push(...l),i.push(...(0,s.changeValueHelpTextAndTextArrangement)(e,t,n,a))}else i.push(...(0,l.changeValueHelpLabelI18n)(e,n,o.valueHelpProperties));return void 0!==o.text&&o.text!==t.text.value&&!(0,d.isTooComplex)(t.text)&&t.text.allowedValues?.find((e=>e.value===o.text))&&i.push(...(0,s.changeText)(o.text,n,n.element.path,e,t).targetChanges),void 0!==o.textArrangement&&o.textArrangement!==t.textArrangement.value&&!(0,d.isTooComplex)(t.textArrangement)&&t.textArrangement.allowedValues?.find((e=>e.value===o.textArrangement))&&i.push(...(0,s.changeTextArrangement)(o.textArrangement,n,e)),i},t.changeFilterFieldLabel=f},37411:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDeleteChangesForFilterFields=t.getMoveChangesForFilterFields=t.appendToFilterFields=t.convertUiNodeInternalFilterFields=t.loadUiInternalFilterFields=void 0;const a=n(20576),o=n(95207),r=n(35586),i=n(66711),s=n(70704),l=n(23635);t.loadUiInternalFilterFields=function(e,t,n,a){const o=t.annotationIndex,s=(0,l.getAnnotationIndexKey)(e,"com.sap.vocabularies.UI.v1.SelectionFields",a),p={nodeId:n,annotationPath:"/"+s},c=o[s];if(!c?.top)return null;const{tooComplexReason:u,collection:m,collectionOrigins:d}=(0,l.getValueFromAnnotation)(c.top.annotation,l.ExpressionType.Collection);if(u)return(0,l.buildTooComplexNode)(u,c.top.annotation.origin,c.top.fileUri,p);const y={...p,tooComplex:!1,nodeType:l.UI_NODE_TYPE_FILTER_FIELDS,location:{range:c.top.annotation.origin,fileUri:c.top.fileUri},selectionFields:c,subnodes:[]};(0,r.setReadonlyAndTooltip)(c,y);for(let n=0;n<m.length;n++){const{tooComplexReason:a,value:o,range:r}=(0,l.getValueFromCollection)(m,d,n,l.ExpressionType.PropertyPath),s={};s[JSON.stringify(p.nodeId)]=!0;const u={nodeId:[...p.nodeId,n],annotationPath:p.annotationPath+"/"+n,allowedParentNodes:s};if(a)y.subnodes.push((0,l.buildTooComplexNode)(a,r,c.top.fileUri,u));else{const n=o,a={fileUri:y.selectionFields.top.fileUri,range:r};y.subnodes.push((0,i.loadUiInternalFilterField)(n,a,u,t,e))}}return y},t.convertUiNodeInternalFilterFields=function(e,t,n){const a={nodeId:e.nodeId,annotationPath:e.annotationPath,tooComplex:!1,nodeType:e.nodeType,location:e.location,subnodes:(e.subnodes||[]).map((e=>(0,l.isTooComplex)(e)?e:(0,i.convertUiNodeInternalFilterField)(e,t,n)))};(0,r.setReadonlyAndTooltip)(e,a),a.allowedSubnodeTypes=a.allowedSubnodeTypes||[],a.suppressedSubnodeTypes=a.suppressedSubnodeTypes||[];const{paths:o}=(0,i.getUINodeOptionsFilterField)(t,n,l.UI_NODE_TYPE_FILTER_FIELD,a);return o?.length?a.allowedSubnodeTypes.push(l.UI_NODE_TYPE_FILTER_FIELD):a.suppressedSubnodeTypes.push({subNodeType:`${l.UI_NODE_TYPE_FILTER_FIELD}`,tooltip:s.i18n.t("DisableMenuTooltipFields")}),a},t.appendToFilterFields=function(e,t,n,i){const s=t?.selectionFields?.top.annotation||{term:"com.sap.vocabularies.UI.v1.SelectionFields",collection:[]},p=s.collection;p&&Array.isArray(p)||(0,r.throwError)("Value of UI.SelectionFields is not an array");const c=[],u=[],m=new Map;for(const t of i){p.push({type:"PropertyPath",PropertyPath:t.path}),c.push({annotation:s,changeType:a.ChangeType.Insert,pointer:"/collection/"+(p.length-1)});if(void 0===(0,o.getDefaultLabelAnnotation)(e,t.path,n)?.top){const a=(0,l.resolveMetadataElement)(e.metadataService,`${n}/${t.path}`,!0)?.path||`${n}/${t.path}`,o={annotation:{term:"com.sap.vocabularies.Common.v1.Label",value:{type:"String",String:t.path}},pointer:"value/String"};m.set(a,o)}}u.push({targetPath:n,changes:c});for(const[e,t]of m.entries())u.push({targetPath:e,changes:[t]});return u},t.getMoveChangesForFilterFields=function(e,t,n,o=1){const i=[],s=e.selectionFields.top,l=s.annotation;let p=e.subnodes.findIndex((t=>(0,r.isSameNodeId)(t.nodeId,[...e.nodeId,n])));-1===p&&(p=e.subnodes.length);const c=e.subnodes.findIndex((n=>(0,r.isSameNodeId)(n.nodeId,[...e.nodeId,t])));(0,r.moveInCollection)(l.collection,c,p,o),(0,r.moveInCollection)(e.subnodes,c,p,o);const u={annotation:l,changeType:a.ChangeType.Move,pointer:`/collection/${n}`,moveFromPointer:`/collection/${t}`};return o>1&&(u.moveFromPointer+="-"+(t+o-1)),i.push({targetPath:s.target,changes:[u]}),i},t.getDeleteChangesForFilterFields=function(e,t,n=1){const o=e.selectionFields.top,r=o.annotation;r.collection.splice(t,1);const i={annotation:r};return e.selectionFields.app?.length&&(i.pointer=`/collection/${t}`,i.changeType=a.ChangeType.Delete),n>1&&(i.pointer+="-"+(t+n-1)),{targetPath:o.target,changes:[i]}}},32726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertUiNodeInternalForm=t.loadUiNodeInternalForm=void 0;const a=n(23635),o=n(35586),r=n(98132),i=n(70704);t.loadUiNodeInternalForm=function(e,t,n,i){const s=t.annotationIndex,l=(0,a.getAnnotationIndexKey)(e,"com.sap.vocabularies.UI.v1.Facets",i),p=s[l]||null,c={nodeId:n,annotationPath:"/"+l};if(!p?.top){if(!t.toManyAssociations){const n=t.metadataService.getMetadataElement(e);t.toManyAssociations=(0,o.getAvailableManyAssociationPathsForEntity)(t.metadataService,n)}return t.toManyAssociations?.length?null:{...c,tooComplex:!1,nodeType:a.UI_NODE_TYPE_FORM,location:null,facets:null,subnodes:[]}}const{tooComplexReason:u,collection:m,collectionOrigins:d}=(0,a.getValueFromAnnotation)(p.top.annotation,a.ExpressionType.Collection);if(u)return(0,a.buildTooComplexNode)(u,p.top.annotation.origin,p.top.fileUri,c);const y={...c,tooComplex:!1,nodeType:a.UI_NODE_TYPE_FORM,location:{range:p.top.annotation.origin,fileUri:p.top.fileUri},facets:p,subnodes:[]};return(0,o.setReadonlyAndTooltip)(p,y),y.subnodes=(0,r.loadUiNodeInternalSections)(m,d,c,e,t,{readonly:p.readonly,readonlyTooltip:p.readonlyTooltip,isRoot:!0,fileUri:p.top.fileUri}),y},t.convertUiNodeInternalForm=function(e,t,n){const s={nodeId:e.nodeId,annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,tooComplex:!1,nodeType:e.nodeType,location:e.location,subnodes:[]};if((0,o.setReadonlyAndTooltip)(e,s),s.subnodes=(e.subnodes||[]).map((e=>e.tooComplex?e:(0,r.convertUiNodeInternalSection)(e,t,n))),s.allowedSubnodeTypes=[`${a.UI_NODE_TYPE_SECTION}/Collection`,`${a.UI_NODE_TYPE_SECTION}/FieldGroup`],s.suppressedSubnodeTypes=s.suppressedSubnodeTypes||[],t.selectable.identificationSection?s.allowedSubnodeTypes.push(`${a.UI_NODE_TYPE_SECTION}/Identification`):s.suppressedSubnodeTypes.push({subNodeType:`${a.UI_NODE_TYPE_SECTION}/Identification`,tooltip:i.i18n.t("DisableMenuTooltipIdentification")}),!t.toManyAssociations){const e=t.metadataService.getMetadataElement(n);t.toManyAssociations=(0,o.getAvailableManyAssociationPathsForEntity)(t.metadataService,e)}if(t.toManyAssociations?.length){s.allowedSubnodeTypes.push(`${a.UI_NODE_TYPE_SECTION}/Table`),s.allowedSubnodeTypes.push(...(0,o.checkPrerequisitesForChartSection)(t,n));const e=`${a.UI_NODE_TYPE_SECTION}/analyticalChart`;s.allowedSubnodeTypes.includes(e)||s.suppressedSubnodeTypes.push({subNodeType:`${a.UI_NODE_TYPE_SECTION}/analyticalChart`,tooltip:i.i18n.t("DisableMenuTooltipTooManyAssociationsChart")})}else s.suppressedSubnodeTypes.push({subNodeType:`${a.UI_NODE_TYPE_SECTION}/Table`,tooltip:i.i18n.t("DisableMenuTooltipTooManyAssociationsTable")},{subNodeType:`${a.UI_NODE_TYPE_SECTION}/analyticalChart`,tooltip:i.i18n.t("DisableMenuTooltipTooManyAssociationsChart")});return t.parentNodes.push({nodeId:s.nodeId,nodeType:s.nodeType,rootNodeType:a.UI_NODE_TYPE_FORM}),s}},81666:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeUIPropertyHeaderInfo=t.convertUiNodeInternalHeaderInfo=t.loadUiNodeInternalHeaderInfo=void 0;const a=n(23635),o=n(46163),r=n(78263),i=n(35586);t.loadUiNodeInternalHeaderInfo=function(e,t,n){const o=t.annotationIndex,s=(0,a.getAnnotationIndexKey)(e,"com.sap.vocabularies.UI.v1.HeaderInfo");let l=o[s]||null;const p=l?{range:l.top.annotation.origin,fileUri:l.top.fileUri}:null;if(!l){const t={target:e,fileUri:null,annotation:{term:"com.sap.vocabularies.UI.v1.HeaderInfo",origin:null,record:{type:"com.sap.vocabularies.UI.v1.HeaderInfoType",propertyValues:[{name:r.HEADER_INFO_TYPE_NAME,value:{type:"String",String:""}},{name:r.HEADER_INFO_TYPE_NAME_PLURAL,value:{type:"String",String:""}}],propertyValuesOrigins:[null,null,null]}}};l={top:t,base:[],app:[t],isSplit:!1,readonly:!1}}const c={...{nodeId:n,annotationPath:"/"+s},tooComplex:!1,nodeType:a.UI_NODE_TYPE_HEADER_INFO,location:p,subnodes:[],headerInfo:l};return(0,i.setReadonlyAndTooltip)(l,c),c},t.convertUiNodeInternalHeaderInfo=function(e,t){const n={nodeId:e.nodeId,annotationPath:e.annotationPath,tooComplex:!1,nodeType:e.nodeType,readonly:e.readonly,location:e.location,subnodes:[]},{tooComplexReason:r}=(0,a.getValueFromAnnotation)(e.headerInfo.top.annotation,a.ExpressionType.Record);if(r)return(0,a.buildTooComplexNode)(r,e.headerInfo.top.annotation.origin,e.headerInfo.top.fileUri,e);const s={context:t,uiPropertyDefinitions:(0,o.getUIPropertyDefinitions)(a.UI_NODE_TYPE_HEADER_INFO),layeredAnnotation:e.headerInfo,includeNonApplicableProperties:(0,i.isSameNodeId)(t.includeNonApplicablePropertiesForNode,e.nodeId)};return n.uiProperties=(0,o.buildGenericUIProperties)(s,(0,o.getPropValueMap)(n)),n},t.changeUIPropertyHeaderInfo=function(e,t,n,r){const i=(0,o.getUIPropertyDefinitions)(a.UI_NODE_TYPE_HEADER_INFO);return(0,o.updateGenericUIProperties)({context:e,uiPropertyDefinitions:i,layeredAnnotation:n.headerInfo},t.uiProperties,r)}},85496:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertUiNodeInternalHeaderSections=t.loadUiNodeInternalHeaderSections=void 0;const a=n(91310),o=n(23635),r=n(35586),i=n(18804),s=n(98132),l=n(70704);t.loadUiNodeInternalHeaderSections=function(e,t,n,a){const i=t.annotationIndex,l=(0,o.getAnnotationIndexKey)(e,"com.sap.vocabularies.UI.v1.HeaderFacets",a),p=i[l]||null,c={nodeId:n,annotationPath:"/"+l};let u;if(!p?.top){const n=(0,o.resolveMetadataElement)(t.metadataService,e);return(0,r.getPathValueHelpTree)(t,n,{numericOnly:!0,expandFirstLevel:!0}).nodes.length?null:(u={...c,tooComplex:!1,nodeType:o.UI_NODE_TYPE_HEADER_SECTIONS,location:null,headerFacets:null,subnodes:[]},u)}const{tooComplexReason:m,collection:d,collectionOrigins:y}=(0,o.getValueFromAnnotation)(p.top.annotation,o.ExpressionType.Collection);return m?(0,o.buildTooComplexNode)(m,p.top.annotation.origin,p.top.fileUri,c):(u={...c,tooComplex:!1,nodeType:o.UI_NODE_TYPE_HEADER_SECTIONS,location:{range:p.top.annotation.origin,fileUri:p.top.fileUri},headerFacets:p,subnodes:[]},(0,r.setReadonlyAndTooltip)(p,u),u.subnodes=(0,s.loadUiNodeInternalSections)(d,y,c,e,t,{readonly:u.readonly,readonlyTooltip:u.readonlyTooltip,fileUri:p.top.fileUri,isRoot:!0}),u)},t.convertUiNodeInternalHeaderSections=function(e,t,n){const p={nodeId:e.nodeId,annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,tooComplex:!1,nodeType:e.nodeType,location:e.location,subnodes:[]};(0,r.setReadonlyAndTooltip)(e,p),p.subnodes=(e.subnodes||[]).map((e=>(0,o.isTooComplex)(e)?e:e.nodeType===o.UI_NODE_TYPE_DATA_POINT?(0,i.convertUiNodeInternalDataPoint)(e,t,n):e.nodeType===o.UI_NODE_TYPE_CHART?(0,a.convertUiNodeInternalChart)(e,t):(0,s.convertUiNodeInternalSection)(e,t,n,!0)));const{allowedSubnodeTypes:c,suppressedSubnodeTypes:u}=function(e,t){const n=[`${o.UI_NODE_TYPE_SECTION}/FieldGroup`],a=[],i=(0,o.resolveMetadataElement)(e.metadataService,t);let s=(0,r.getPathValueHelpTree)(e,i,{suppressedTypes:new Set([o.ExpressionType.Unknown,o.ExpressionType.Bool])}).nodes;s.length&&n.push(`${o.UI_NODE_TYPE_DATA_POINT}/Basic`);s=(0,r.getPathValueHelpTree)(e,i,{numericOnly:!0,expandFirstLevel:!0}).nodes,s.length?(n.push(`${o.UI_NODE_TYPE_DATA_POINT}/Progress`),n.push(`${o.UI_NODE_TYPE_DATA_POINT}/Rating`)):a.push({subNodeType:`${o.UI_NODE_TYPE_DATA_POINT}/Progress`,tooltip:l.i18n.t("DisableMenuTooltipNumericNoPropertyDefined")},{subNodeType:`${o.UI_NODE_TYPE_DATA_POINT}/Rating`,tooltip:l.i18n.t("DisableMenuTooltipNumericNoPropertyDefined")});(0,r.measuresAvailable)(e,i)?n.push(`${o.UI_NODE_TYPE_SECTION}/Chart`):a.push({subNodeType:`${o.UI_NODE_TYPE_SECTION}/Chart`,tooltip:l.i18n.t("DisableMenuTooltipNumericNoPropertyDefined")});return n.push(`${o.UI_NODE_TYPE_CHART}/HeaderSection`),{allowedSubnodeTypes:n,suppressedSubnodeTypes:a}}(t,n);return p.allowedSubnodeTypes=c,p.suppressedSubnodeTypes=u,t.parentNodes.push({nodeId:p.nodeId,nodeType:p.nodeType,rootNodeType:o.UI_NODE_TYPE_HEADER_SECTIONS}),p}},91310:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateTemplateChange=t.finalizeConnectedFieldsNode=t.getConnectedFieldsPropertiesForChange=t.changeUIPropertyConnectedFields=t.insertConnectedFields=t.convertUiNodeInternalConnectedFields=t.loadUiNodeInternalConnectedFields=t.loadUiInternalFilterFields=t.getMoveChangesForFilterFields=t.getDeleteChangesForFilterFields=t.convertUiNodeInternalFilterFields=t.appendToFilterFields=t.loadUiInternalFilterField=t.getUINodeOptionsFilterField=t.getFilterFieldPropertiesForChange=t.convertUiNodeInternalFilterField=t.changeUIPropertyFilterField=t.loadUiNodeInternalFormField=t.getFieldPropertiesForChange=t.finalizeFieldNode=t.findAssociationsToEntitySet=t.convertUiNodeInternalField=t.changeUIPropertyFormField=t.loadUiNodeInternalDataPointColumn=t.convertUiNodeInternalDataPointColumn=t.toggleBooleanPropForDataField=t.loadUiNodeInternalColumn=t.getColumnPropertiesForChange=t.convertUiNodeInternalColumn=t.changeUIPropertyColumn=t.loadUiNodeInternalDataPoint=t.convertUiNodeInternalDataPoint=t.changeUIPropertyDataPoint=t.createDataPoint=t.loadUiNodeInternalContact=t.finalizeContactNode=t.convertUiNodeInternalContact=t.changeUIPropertyContact=t.buildDataFieldForContactAnnotation=t.loadUiNodeInternalChart=t.getCreateChartNodeOptions=t.convertUiNodeInternalChart=t.changeUIPropertyChart=t.buildDataFieldForChartAnnotation=t.isSemanticButtonUINode=t.changeDataFieldInline=t.isMoveWithToggling=t.getActionPropertiesForChange=t.finalizeActionNode=t.changeUIPropertyAction=void 0,t.changeUIPropertyVisualFilter=t.checkCreationParametersVisualFilter=t.getCreateVisualFilterNodeOptions=t.loadUiNodeInternalViews=t.getDeleteChangesForViews=t.convertUiNodeInternalViews=t.getTargetChangeForFacet=t.createFacetAnnotation=t.moveSection=t.getTargetChangesForChartNode=t.insertSection=t.insertDataField=t.deleteSection=t.deleteDataField=t.createSection=t.changeUIPropertySection=t.resolveAnnotationPath=t.getDataFieldsCollectionForSection=t.finalizeSectionNode=t.loadUiNodeInternalPageActions=t.insertPageAction=t.finalizePageActionsNode=t.deletePageAction=t.convertUiNodeInternalPageActions=t.loadUiNodeInternalMacros=t.convertUiNodeInternalMacros=t.loadUiNodeInternalList=t.getMoveChangesForList=t.getDeleteChangesForList=t.getCreateListNodeOptions=t.createUINodeList=t.convertUiNodeInternalList=t.changeUIPropertyList=t.appendToList=t.loadUiNodeInternalHeaderSections=t.convertUiNodeInternalHeaderSections=t.createAnalyticalChartSection=t.loadUiNodeInternalAnalyticalChart=t.getCreateAnalyticalChartNodeOptions=t.deleteAnalyticalChartFromAlp=t.createUINodeAnalyticalChart=t.convertUiNodeInternalAnalyticalChart=t.checkCreationParametersAnalyticalMeasure=t.checkCreationParametersAnalyticalChart=t.changeUIPropertyAnalyticalChart=t.loadUiNodeInternalHeaderInfo=t.convertUiNodeInternalHeaderInfo=t.changeUIPropertyHeaderInfo=t.loadUiNodeInternalForm=t.convertUiNodeInternalForm=void 0,t.getNavigationPropertiesForChange=t.finalizeNavigationNode=t.changeUIPropertyNavigation=t.finalizeVisualFiltersNode=t.loadUiNodeInternalVisualFilters=t.getDeleteChangesForVisualFilters=t.convertUiNodeInternalVisualFilters=t.loadUiNodeInternalVisualFilter=t.dataPointCreationCallback=t.createUINodeVisualFilter=t.convertUiNodeInternalVisualFilter=void 0;var a=n(90553);Object.defineProperty(t,"changeUIPropertyAction",{enumerable:!0,get:function(){return a.changeUIPropertyAction}}),Object.defineProperty(t,"finalizeActionNode",{enumerable:!0,get:function(){return a.finalizeActionNode}}),Object.defineProperty(t,"getActionPropertiesForChange",{enumerable:!0,get:function(){return a.getActionPropertiesForChange}}),Object.defineProperty(t,"isMoveWithToggling",{enumerable:!0,get:function(){return a.isMoveWithToggling}}),Object.defineProperty(t,"changeDataFieldInline",{enumerable:!0,get:function(){return a.changeDataFieldInline}}),Object.defineProperty(t,"isSemanticButtonUINode",{enumerable:!0,get:function(){return a.isSemanticButtonUINode}});var o=n(63587);Object.defineProperty(t,"buildDataFieldForChartAnnotation",{enumerable:!0,get:function(){return o.buildDataFieldForChartAnnotation}}),Object.defineProperty(t,"changeUIPropertyChart",{enumerable:!0,get:function(){return o.changeUIPropertyChart}}),Object.defineProperty(t,"convertUiNodeInternalChart",{enumerable:!0,get:function(){return o.convertUiNodeInternalChart}}),Object.defineProperty(t,"getCreateChartNodeOptions",{enumerable:!0,get:function(){return o.getCreateChartNodeOptions}}),Object.defineProperty(t,"loadUiNodeInternalChart",{enumerable:!0,get:function(){return o.loadUiNodeInternalChart}});var r=n(47770);Object.defineProperty(t,"buildDataFieldForContactAnnotation",{enumerable:!0,get:function(){return r.buildDataFieldForContactAnnotation}}),Object.defineProperty(t,"changeUIPropertyContact",{enumerable:!0,get:function(){return r.changeUIPropertyContact}}),Object.defineProperty(t,"convertUiNodeInternalContact",{enumerable:!0,get:function(){return r.convertUiNodeInternalContact}}),Object.defineProperty(t,"finalizeContactNode",{enumerable:!0,get:function(){return r.finalizeContactNode}}),Object.defineProperty(t,"loadUiNodeInternalContact",{enumerable:!0,get:function(){return r.loadUiNodeInternalContact}});var i=n(18804);Object.defineProperty(t,"createDataPoint",{enumerable:!0,get:function(){return i.createDataPoint}}),Object.defineProperty(t,"changeUIPropertyDataPoint",{enumerable:!0,get:function(){return i.changeUIPropertyDataPoint}}),Object.defineProperty(t,"convertUiNodeInternalDataPoint",{enumerable:!0,get:function(){return i.convertUiNodeInternalDataPoint}}),Object.defineProperty(t,"loadUiNodeInternalDataPoint",{enumerable:!0,get:function(){return i.loadUiNodeInternalDataPoint}});var s=n(52564);Object.defineProperty(t,"changeUIPropertyColumn",{enumerable:!0,get:function(){return s.changeUIPropertyColumn}}),Object.defineProperty(t,"convertUiNodeInternalColumn",{enumerable:!0,get:function(){return s.convertUiNodeInternalColumn}}),Object.defineProperty(t,"getColumnPropertiesForChange",{enumerable:!0,get:function(){return s.getColumnPropertiesForChange}}),Object.defineProperty(t,"loadUiNodeInternalColumn",{enumerable:!0,get:function(){return s.loadUiNodeInternalColumn}}),Object.defineProperty(t,"toggleBooleanPropForDataField",{enumerable:!0,get:function(){return s.toggleBooleanPropForDataField}});var l=n(83887);Object.defineProperty(t,"convertUiNodeInternalDataPointColumn",{enumerable:!0,get:function(){return l.convertUiNodeInternalDataPointColumn}}),Object.defineProperty(t,"loadUiNodeInternalDataPointColumn",{enumerable:!0,get:function(){return l.loadUiNodeInternalDataPointColumn}});var p=n(78957);Object.defineProperty(t,"changeUIPropertyFormField",{enumerable:!0,get:function(){return p.changeUIPropertyFormField}}),Object.defineProperty(t,"convertUiNodeInternalField",{enumerable:!0,get:function(){return p.convertUiNodeInternalField}}),Object.defineProperty(t,"findAssociationsToEntitySet",{enumerable:!0,get:function(){return p.findAssociationsToEntitySet}}),Object.defineProperty(t,"finalizeFieldNode",{enumerable:!0,get:function(){return p.finalizeFieldNode}}),Object.defineProperty(t,"getFieldPropertiesForChange",{enumerable:!0,get:function(){return p.getFieldPropertiesForChange}}),Object.defineProperty(t,"loadUiNodeInternalFormField",{enumerable:!0,get:function(){return p.loadUiNodeInternalFormField}});var c=n(66711);Object.defineProperty(t,"changeUIPropertyFilterField",{enumerable:!0,get:function(){return c.changeUIPropertyFilterField}}),Object.defineProperty(t,"convertUiNodeInternalFilterField",{enumerable:!0,get:function(){return c.convertUiNodeInternalFilterField}}),Object.defineProperty(t,"getFilterFieldPropertiesForChange",{enumerable:!0,get:function(){return c.getFilterFieldPropertiesForChange}}),Object.defineProperty(t,"getUINodeOptionsFilterField",{enumerable:!0,get:function(){return c.getUINodeOptionsFilterField}}),Object.defineProperty(t,"loadUiInternalFilterField",{enumerable:!0,get:function(){return c.loadUiInternalFilterField}});var u=n(37411);Object.defineProperty(t,"appendToFilterFields",{enumerable:!0,get:function(){return u.appendToFilterFields}}),Object.defineProperty(t,"convertUiNodeInternalFilterFields",{enumerable:!0,get:function(){return u.convertUiNodeInternalFilterFields}}),Object.defineProperty(t,"getDeleteChangesForFilterFields",{enumerable:!0,get:function(){return u.getDeleteChangesForFilterFields}}),Object.defineProperty(t,"getMoveChangesForFilterFields",{enumerable:!0,get:function(){return u.getMoveChangesForFilterFields}}),Object.defineProperty(t,"loadUiInternalFilterFields",{enumerable:!0,get:function(){return u.loadUiInternalFilterFields}});var m=n(72870);Object.defineProperty(t,"loadUiNodeInternalConnectedFields",{enumerable:!0,get:function(){return m.loadUiNodeInternalConnectedFields}}),Object.defineProperty(t,"convertUiNodeInternalConnectedFields",{enumerable:!0,get:function(){return m.convertUiNodeInternalConnectedFields}}),Object.defineProperty(t,"insertConnectedFields",{enumerable:!0,get:function(){return m.insertConnectedFields}}),Object.defineProperty(t,"changeUIPropertyConnectedFields",{enumerable:!0,get:function(){return m.changeUIPropertyConnectedFields}}),Object.defineProperty(t,"getConnectedFieldsPropertiesForChange",{enumerable:!0,get:function(){return m.getConnectedFieldsPropertiesForChange}}),Object.defineProperty(t,"finalizeConnectedFieldsNode",{enumerable:!0,get:function(){return m.finalizeConnectedFieldsNode}}),Object.defineProperty(t,"generateTemplateChange",{enumerable:!0,get:function(){return m.generateTemplateChange}});var d=n(32726);Object.defineProperty(t,"convertUiNodeInternalForm",{enumerable:!0,get:function(){return d.convertUiNodeInternalForm}}),Object.defineProperty(t,"loadUiNodeInternalForm",{enumerable:!0,get:function(){return d.loadUiNodeInternalForm}});var y=n(81666);Object.defineProperty(t,"changeUIPropertyHeaderInfo",{enumerable:!0,get:function(){return y.changeUIPropertyHeaderInfo}}),Object.defineProperty(t,"convertUiNodeInternalHeaderInfo",{enumerable:!0,get:function(){return y.convertUiNodeInternalHeaderInfo}}),Object.defineProperty(t,"loadUiNodeInternalHeaderInfo",{enumerable:!0,get:function(){return y.loadUiNodeInternalHeaderInfo}});var g=n(63370);Object.defineProperty(t,"changeUIPropertyAnalyticalChart",{enumerable:!0,get:function(){return g.changeUIPropertyAnalyticalChart}}),Object.defineProperty(t,"checkCreationParametersAnalyticalChart",{enumerable:!0,get:function(){return g.checkCreationParametersAnalyticalChart}}),Object.defineProperty(t,"checkCreationParametersAnalyticalMeasure",{enumerable:!0,get:function(){return g.checkCreationParametersAnalyticalMeasure}}),Object.defineProperty(t,"convertUiNodeInternalAnalyticalChart",{enumerable:!0,get:function(){return g.convertUiNodeInternalAnalyticalChart}}),Object.defineProperty(t,"createUINodeAnalyticalChart",{enumerable:!0,get:function(){return g.createUINodeAnalyticalChart}}),Object.defineProperty(t,"deleteAnalyticalChartFromAlp",{enumerable:!0,get:function(){return g.deleteAnalyticalChartFromAlp}}),Object.defineProperty(t,"getCreateAnalyticalChartNodeOptions",{enumerable:!0,get:function(){return g.getCreateAnalyticalChartNodeOptions}}),Object.defineProperty(t,"loadUiNodeInternalAnalyticalChart",{enumerable:!0,get:function(){return g.loadUiNodeInternalAnalyticalChart}}),Object.defineProperty(t,"createAnalyticalChartSection",{enumerable:!0,get:function(){return g.createAnalyticalChartSection}});var f=n(85496);Object.defineProperty(t,"convertUiNodeInternalHeaderSections",{enumerable:!0,get:function(){return f.convertUiNodeInternalHeaderSections}}),Object.defineProperty(t,"loadUiNodeInternalHeaderSections",{enumerable:!0,get:function(){return f.loadUiNodeInternalHeaderSections}});var h=n(25769);Object.defineProperty(t,"appendToList",{enumerable:!0,get:function(){return h.appendToList}}),Object.defineProperty(t,"changeUIPropertyList",{enumerable:!0,get:function(){return h.changeUIPropertyList}}),Object.defineProperty(t,"convertUiNodeInternalList",{enumerable:!0,get:function(){return h.convertUiNodeInternalList}}),Object.defineProperty(t,"createUINodeList",{enumerable:!0,get:function(){return h.createUINodeList}}),Object.defineProperty(t,"getCreateListNodeOptions",{enumerable:!0,get:function(){return h.getCreateListNodeOptions}}),Object.defineProperty(t,"getDeleteChangesForList",{enumerable:!0,get:function(){return h.getDeleteChangesForList}}),Object.defineProperty(t,"getMoveChangesForList",{enumerable:!0,get:function(){return h.getMoveChangesForList}}),Object.defineProperty(t,"loadUiNodeInternalList",{enumerable:!0,get:function(){return h.loadUiNodeInternalList}});var T=n(32717);Object.defineProperty(t,"convertUiNodeInternalMacros",{enumerable:!0,get:function(){return T.convertUiNodeInternalMacros}}),Object.defineProperty(t,"loadUiNodeInternalMacros",{enumerable:!0,get:function(){return T.loadUiNodeInternalMacros}});var P=n(3769);Object.defineProperty(t,"convertUiNodeInternalPageActions",{enumerable:!0,get:function(){return P.convertUiNodeInternalPageActions}}),Object.defineProperty(t,"deletePageAction",{enumerable:!0,get:function(){return P.deletePageAction}}),Object.defineProperty(t,"finalizePageActionsNode",{enumerable:!0,get:function(){return P.finalizePageActionsNode}}),Object.defineProperty(t,"insertPageAction",{enumerable:!0,get:function(){return P.insertPageAction}}),Object.defineProperty(t,"loadUiNodeInternalPageActions",{enumerable:!0,get:function(){return P.loadUiNodeInternalPageActions}});var E=n(98132);Object.defineProperty(t,"finalizeSectionNode",{enumerable:!0,get:function(){return E.finalizeSectionNode}}),Object.defineProperty(t,"getDataFieldsCollectionForSection",{enumerable:!0,get:function(){return E.getDataFieldsCollectionForSection}}),Object.defineProperty(t,"resolveAnnotationPath",{enumerable:!0,get:function(){return E.resolveAnnotationPath}});var v=n(15318);Object.defineProperty(t,"changeUIPropertySection",{enumerable:!0,get:function(){return v.changeUIPropertySection}}),Object.defineProperty(t,"createSection",{enumerable:!0,get:function(){return v.createSection}}),Object.defineProperty(t,"deleteDataField",{enumerable:!0,get:function(){return v.deleteDataField}}),Object.defineProperty(t,"deleteSection",{enumerable:!0,get:function(){return v.deleteSection}}),Object.defineProperty(t,"insertDataField",{enumerable:!0,get:function(){return v.insertDataField}}),Object.defineProperty(t,"insertSection",{enumerable:!0,get:function(){return v.insertSection}}),Object.defineProperty(t,"getTargetChangesForChartNode",{enumerable:!0,get:function(){return v.getTargetChangesForChartNode}}),Object.defineProperty(t,"moveSection",{enumerable:!0,get:function(){return v.moveSection}}),Object.defineProperty(t,"createFacetAnnotation",{enumerable:!0,get:function(){return v.createFacetAnnotation}}),Object.defineProperty(t,"getTargetChangeForFacet",{enumerable:!0,get:function(){return v.getTargetChangeForFacet}});var b=n(73219);Object.defineProperty(t,"convertUiNodeInternalViews",{enumerable:!0,get:function(){return b.convertUiNodeInternalViews}}),Object.defineProperty(t,"getDeleteChangesForViews",{enumerable:!0,get:function(){return b.getDeleteChangesForViews}}),Object.defineProperty(t,"loadUiNodeInternalViews",{enumerable:!0,get:function(){return b.loadUiNodeInternalViews}});var _=n(69939);Object.defineProperty(t,"getCreateVisualFilterNodeOptions",{enumerable:!0,get:function(){return _.getCreateVisualFilterNodeOptions}}),Object.defineProperty(t,"checkCreationParametersVisualFilter",{enumerable:!0,get:function(){return _.checkCreationParametersVisualFilter}}),Object.defineProperty(t,"changeUIPropertyVisualFilter",{enumerable:!0,get:function(){return _.changeUIPropertyVisualFilter}}),Object.defineProperty(t,"convertUiNodeInternalVisualFilter",{enumerable:!0,get:function(){return _.convertUiNodeInternalVisualFilter}}),Object.defineProperty(t,"createUINodeVisualFilter",{enumerable:!0,get:function(){return _.createUINodeVisualFilter}}),Object.defineProperty(t,"dataPointCreationCallback",{enumerable:!0,get:function(){return _.dataPointCreationCallback}}),Object.defineProperty(t,"loadUiNodeInternalVisualFilter",{enumerable:!0,get:function(){return _.loadUiNodeInternalVisualFilter}});var A=n(66236);Object.defineProperty(t,"convertUiNodeInternalVisualFilters",{enumerable:!0,get:function(){return A.convertUiNodeInternalVisualFilters}}),Object.defineProperty(t,"getDeleteChangesForVisualFilters",{enumerable:!0,get:function(){return A.getDeleteChangesForVisualFilters}}),Object.defineProperty(t,"loadUiNodeInternalVisualFilters",{enumerable:!0,get:function(){return A.loadUiNodeInternalVisualFilters}}),Object.defineProperty(t,"finalizeVisualFiltersNode",{enumerable:!0,get:function(){return A.finalizeVisualFiltersNode}});var C=n(91882);Object.defineProperty(t,"changeUIPropertyNavigation",{enumerable:!0,get:function(){return C.changeUIPropertyNavigation}}),Object.defineProperty(t,"finalizeNavigationNode",{enumerable:!0,get:function(){return C.finalizeNavigationNode}}),Object.defineProperty(t,"getNavigationPropertiesForChange",{enumerable:!0,get:function(){return C.getNavigationPropertiesForChange}})},25769:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addListSelectionNewRowDefaults=t.createUINodeList=t.getCreateListNodeOptions=t.getDeleteChangesForList=t.getMoveChangesForList=t.appendToList=t.changeUIPropertyList=t.convertUiNodeInternalList=t.loadUiNodeInternalList=void 0;const a=n(91310),o=n(20576),r=n(78263),i=n(35586),s=n(90553),l=n(63587),p=n(52564),c=n(47770),u=n(83887),m=n(63370),d=n(70704),y=n(46163),g=n(95207),f=n(91882),h=n(23635);function T(e,t){const n=!t.isAlp&&!t.isMultiViewLR&&!t.isOp,a=t.configuredAnnotation?.top.annotation.term;if(n&&a&&!["com.sap.vocabularies.UI.v1.SelectionPresentationVariant","com.sap.vocabularies.UI.v1.SelectionVariant"].includes(a)){const n=(0,h.getAnnotationIndexKey)(t.lineItems.top.target,"com.sap.vocabularies.UI.v1.SelectionVariant"),a=e.annotationIndex[n];if(a)return a}return t.configuredAnnotation}function P(e,t,n,a){const o=n[`${a?h.UI_PROP_NAME_PREFIX_GROUPING:h.UI_PROP_NAME_PREFIX_SORTING}${t}`];if(!o||(0,h.isTooComplex)(o))return;const i=o.columns[0];if(!i?.allowedValues?.length)return;if(!e?.annotation?.collection?.length)return;const s=new Set(i.allowedValues.map((e=>e.value)));for(const t of e.annotation.collection){if(t.type&&"com.sap.vocabularies.UI.v1.DataField"!==t.type)continue;const e=t.propertyValues?.find((e=>e.name===r.DATA_FIELD_PROP_NAME_VALUE))?.value;if(e&&e.type===h.ExpressionType.Path&&s.has(e.Path)){i.default=e.Path;break}}}function E(e,t,n,a){const o=`${h.UI_PROP_NAME_PREFIX_SELECTION}${e}`,i=n[o];if(!i||(0,h.isTooComplex)(i))return;const s=t.propertyMap[o]?.columns[0],l=s?i.columns.find((e=>e.name===s.name)):null;if(l?.allowedValues?.length){if(i.rows?.length)for(let e=i.rows.length-1;e>=0;e--){const t=i.rows[e];if(l.default=(0,r.getCellValue)(t,s.name),l.default)break}l.default||(a&&l.allowedValues.some((e=>e.value===a))?l.default=a:l.default=l.allowedValues[0].value)}}t.loadUiNodeInternalList=function(e,t,n,o,c){const m={nodeId:o,annotationPath:t},d=e.annotationIndex[t.slice(1)],y=(0,h.resolvePath)(t).target;if(!d?.top)return function(e,t,n,a){const o=(0,h.resolveMetadataElement)(e.metadataService,n);if(!(0,i.getPathValueHelpTree)(e,o,{numericOnly:!0,expandFirstLevel:!0}).nodes.length)return{...t,tooComplex:!1,nodeType:h.UI_NODE_TYPE_LIST,location:null,isAlp:!!a?.isAlp,isMultiViewLR:!!a?.isMultiViewLR,isOp:!!a?.isOp,lineItems:null,subnodes:[]};return null}(e,m,y,c);const{tooComplexReason:g,collection:T,collectionOrigins:P}=(0,h.getValueFromAnnotation)(d.top.annotation,h.ExpressionType.Collection);if(g)return(0,h.buildTooComplexNode)(g,d.top.annotation.origin,d.top.fileUri,m);const E={...m,tooComplex:!1,nodeType:h.UI_NODE_TYPE_LIST,location:{range:d.top.annotation.origin,fileUri:d.top.fileUri},isAlp:!!c?.isAlp,isMultiViewLR:!!c?.isMultiViewLR,isOp:!!c?.isOp,isMacro:!!c?.isMacro,lineItems:d,subnodes:[]};if((0,i.setReadonlyAndTooltip)(d,E),n){const{target:t,term:a,qualifier:o}=(0,h.resolvePath)(n),r=e.metadataService.getMetadataElement(t),i=r.structuredType||r.name,s=(0,h.getAnnotationIndexKey)(i,a,o);E.configuredAnnotation=e.annotationIndex[s],E.configuredPath=n}for(let t=0;t<T.length;t++){const{tooComplexReason:n,record:o,range:c}=(0,h.getValueFromCollection)(T,P,t,h.ExpressionType.Record),g={};g[JSON.stringify(E.nodeId)]=!0;const v={fileUri:E.lineItems.top.fileUri,range:c},b={nodeId:[...E.nodeId,t],annotationPath:m.annotationPath+"/"+t,allowedParentNodes:g},_=!!d.app?.length;if(n)E.subnodes.push((0,h.buildTooComplexNode)(n,c,d.top.fileUri,b));else if("com.sap.vocabularies.UI.v1.DataField"===o.type){const t={entityTypeName:y,isChangeable:_};E.subnodes.push((0,p.loadUiNodeInternalColumn)(d,o,v,b,e,t))}else if("com.sap.vocabularies.UI.v1.DataFieldForAction"===o.type)E.subnodes.push((0,s.loadUiNodeInternalAction)(d,o,v,b,e,_));else if("com.sap.vocabularies.UI.v1.DataFieldForAnnotation"===o.type){const t=(0,h.getValueFromRecord)(o,r.DATA_FIELD_PROP_NAME_TARGET,h.ExpressionType.AnnotationPath);if((0,i.throwIf)(!t,"UI.DataFieldForAnnotation entry with no 'Target' property"),t.tooComplexReason)return(0,h.buildTooComplexNode)(t.tooComplexReason,t.range,v.fileUri,m);const n=t.value;let s;switch((0,h.resolveRelativeAnnotationPath)(n).term){case"com.sap.vocabularies.UI.v1.Chart":s=(0,l.loadUiNodeInternalChart)(y,o,_,v,b,e);break;case"com.sap.vocabularies.UI.v1.DataPoint":s=(0,u.loadUiNodeInternalDataPointColumn)(y,o,_,v,b,e);break;case"com.sap.vocabularies.Communication.v1.Contact":s=(0,a.loadUiNodeInternalContact)(y,o,_,v,b,e);break;default:s=(0,h.buildTooComplexNode)(h.TooComplexReason.UnsupportedTerm,v.range,v.fileUri,b)}E.subnodes.push(s)}else"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"===o.type?E.subnodes.push((0,f.loadUiNodeInternalNavigation)(d,o,v,b,_)):E.subnodes.push((0,h.buildTooComplexNode)(h.TooComplexReason.UnsupportedType,v.range,v.fileUri,b))}return E},t.convertUiNodeInternalList=function(e,t){const n={columnsUsed:new Set,numericColumnsUsed:new Set},a=[],o=(0,h.resolvePath)(e.annotationPath).target;(e.subnodes||[]).forEach((e=>{if((0,h.isTooComplex)(e))a.push(e);else switch(e.nodeType){case h.UI_NODE_TYPE_COLUMN:a.push(function(e,t,n){let a;if("Basic"===e.columnType)a=(0,p.convertUiNodeInternalColumn)(e,t),(0,h.isTooComplex)(a)||(0,h.isTooComplex)(a.path)||(n.columnsUsed.has(a.path.value)&&t.pageContext?.logger?t.pageContext.logger.warning(`Duplicate column '${a.path.value}' (${e.annotationPath})`):n.columnsUsed.add(a.path.value));else if("Rating"===e.columnType||"Progress"===e.columnType){if(a=(0,u.convertUiNodeInternalDataPointColumn)(e,t),!(0,h.isTooComplex)(a)&&!(0,h.isTooComplex)(a.uiProperties.value)){const o=String(a.uiProperties.value?.value);n.numericColumnsUsed.has(o)&&t.pageContext?.logger?t.pageContext.logger.warning(`Duplicate rating/progress value'${o}' (${e.annotationPath})`):n.numericColumnsUsed.add(o)}}else(0,i.throwError)(`Unknown column type '${e.columnType}'`);return a}(e,t,n));break;case h.UI_NODE_TYPE_ACTION:a.push((0,s.convertUiNodeInternalAction)(e,t,o));break;case h.UI_NODE_TYPE_CHART:a.push((0,l.convertUiNodeInternalChart)(e,t));break;case h.UI_NODE_TYPE_CONTACT:a.push((0,c.convertUiNodeInternalContact)(e,t));break;case h.UI_NODE_TYPE_NAVIGATION:a.push((0,f.convertUiNodeInternalNavigation)(e,t))}}));const r={isAlp:e.isAlp,isMultiViewLR:e.isMultiViewLR,isOp:e.isOp,isMacro:e.isMacro,isTableVisualization:!0},{variant:v,selectionVariant:b,isAlpSharedVariant:_}=(0,g.buildVariant)(t,e.configuredPath,e.configuredAnnotation,e.annotationPath,r),A=T(t,e),C={nodeId:e.nodeId,annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,allowedSubnodeTypes:e.allowedSubnodeTypes,tooComplex:!1,nodeType:e.nodeType,location:e.location,variant:v,selectionVariant:b,pvPathKind:(0,g.getPvPathKindProperty)(e.configuredAnnotation),svPathKind:(0,g.getSvPathKindProperty)(A,r),subnodes:a};(0,i.setReadonlyAndTooltip)(e,C);let N=(0,y.getUIPropertyDefinitions)(h.UI_NODE_TYPE_LIST);e.isMultiViewLR||(N={propertyNames:N.propertyNames.filter((e=>"text"!==e)),propertyMap:N.propertyMap});const I={context:t,uiPropertyDefinitions:N,layeredAnnotation:e.lineItems,includeNonApplicableProperties:(0,i.isSameNodeId)(t.includeNonApplicablePropertiesForNode,e.nodeId)};C.uiProperties=(0,y.buildGenericUIProperties)(I,(0,y.getPropValueMap)(C),new Map([[y.AnnotationRole.configuredAnnotation,e.configuredAnnotation],[y.AnnotationRole.svAnnotation,A]]));const S=C.pvPathKind.value;if(!t.omitConversionToExternalPropDef){const e=`${h.UI_PROP_NAME_PREFIX_SORTING}${S}`;(0,i.mergeTableColumnsDynamicProp)(e,C.uiProperties,{noDynamicProperties:!_})}_?(0,m.addChartSortingNewRowDefaults)(S,C.uiProperties):P(e?.lineItems?.top,S,C.uiProperties),P(e?.lineItems?.top,S,C.uiProperties,!0),E(C.svPathKind.value,N,C.uiProperties);const{allowedSubnodeTypes:x,suppressedSubnodeTypes:O}=function(e,t,n,a){const o=[],r=[],s=e.metadataService.getMetadataElement(t);let l={expandToPaths:a.columnsUsed,removeExpandToNodes:!0,allowedTypes:new Set([h.ExpressionType.Collection])};(0,i.getPathValueHelpTree)(e,s,l).nodes.length>0?o.push((0,h.getFullColumnNodeType)("Basic")):r.push({subNodeType:(0,h.getFullColumnNodeType)("Basic"),tooltip:d.i18n.t("DisableMenuTooltipBasicColumn")});l={numericOnly:!0,expandToPaths:a.numericColumnsUsed,removeExpandToNodes:!0};const p=(0,i.getPathValueHelpTree)(e,s,l);if(p.nodes.length>0)o.push((0,h.getFullColumnNodeType)("Rating")),o.push((0,h.getFullColumnNodeType)("Progress"));else{const e=a.numericColumnsUsed.size,t=p.nodes.length;0===e&&0===t?r.push({subNodeType:(0,h.getFullColumnNodeType)("Rating"),tooltip:d.i18n.t("DisableMenuTooltipNumericNoPropertyDefined")},{subNodeType:(0,h.getFullColumnNodeType)("Progress"),tooltip:d.i18n.t("DisableMenuTooltipNumericNoPropertyDefined")}):r.push({subNodeType:(0,h.getFullColumnNodeType)("Rating"),tooltip:d.i18n.t("DisableMenuTooltipNumericProperty")},{subNodeType:(0,h.getFullColumnNodeType)("Progress"),tooltip:d.i18n.t("DisableMenuTooltipNumericProperty")})}(0,i.getSelectableActions)(e,{entityTypeName:t,nodeId:n}).length>0?o.push(h.UI_NODE_TYPE_ACTION):r.push({subNodeType:`${h.UI_NODE_TYPE_ACTION}`,tooltip:d.i18n.t("DisableMenuTooltipTableAction")});(0,i.measuresAvailable)(e,s)?o.push(h.UI_NODE_TYPE_CHART):r.push({subNodeType:`${h.UI_NODE_TYPE_CHART}`,tooltip:d.i18n.t("DisabledMenuTooltipChart")});return o.push(h.UI_NODE_TYPE_NAVIGATION),o.push(h.UI_NODE_TYPE_CONTACT),{allowedSubnodeTypes:o,suppressedSubnodeTypes:r}}(t,o,e.nodeId,n);return C.allowedSubnodeTypes=e.allowedSubnodeTypes||[],C.allowedSubnodeTypes.push(...x),C.suppressedSubnodeTypes=e.suppressedSubnodeTypes||[],C.suppressedSubnodeTypes.push(...O),t.parentNodes.push({nodeId:C.nodeId,nodeType:C.nodeType,rootNodeType:C.nodeType,containedFields:n.columnsUsed,containedActions:t.selectable.actionsUsed.get(JSON.stringify(C.nodeId))||new Set,containedNumericFields:n.numericColumnsUsed}),C},t.changeUIPropertyList=function(e,t,n,a,o){const r=[],s=new Map,{doChange:l,newVariant:p,isSvChange:c}=function(e,t){let n=e.get("variant");if(void 0!==n&&t.variant.value!==n)return t.variant.allowedValues.find((e=>e.value===n))||(0,i.throwError)(`Variant "${n}" not supported for UINode (type '${t.nodeType}')`),{doChange:!0,newVariant:n};if(n=e.get("selectionVariant"),void 0!==n&&t.selectionVariant.value!==n)return t.selectionVariant.allowedValues.find((e=>e.value===n))||(0,i.throwError)(`Selection Variant "${n}" not supported for UINode (type '${t.nodeType}')`),{doChange:!0,newVariant:n,isSvChange:!0};return{doChange:!1}}(o,t);if(l){const{term:t,qualifier:o}=n.lineItems.top.annotation,l=o?`@${t}#${o}`:`@${t}`,{isAlp:u,isMultiViewLR:m,isOp:d}=n,{targetChanges:y,configuredPathVariant:f}=(0,g.changeUIPropertyVariant)(e,n.configuredPath,n.configuredAnnotation,p,l,{isAlp:u,isMultiViewLR:m,isOp:d,isSvChange:c});if(r.push(...y),n.isMultiViewLR){const{configuredPaths:t}=(0,i.getRootNodeConfig)(e,h.UI_NODE_TYPE_VIEWS);t[n.nodeId[n.nodeId.length-1]]=f,s.set(h.UI_NODE_TYPE_VIEWS,t)}else if(n.isOp){const t=(0,i.setVariantPathToFacet)(e,a,f);r.push(...t)}else s.set(h.UI_NODE_TYPE_LIST,f)}const u=T(e,n);let m=(0,y.getUIPropertyDefinitions)(h.UI_NODE_TYPE_LIST);n.isMultiViewLR||(m={propertyNames:m.propertyNames.filter((e=>"text"!==e)),propertyMap:m.propertyMap});const d=t.pvPathKind.value,f=`${h.UI_PROP_NAME_PREFIX_SORTING}${d}`;return(0,i.changeUIPropertyPrepareDynamicProp)(f,t.uiProperties,o),r.push(...(0,y.updateGenericUIProperties)({context:e,uiPropertyDefinitions:m,layeredAnnotation:n.lineItems},t.uiProperties,o,new Map([[y.AnnotationRole.configuredAnnotation,n.configuredAnnotation],[y.AnnotationRole.svAnnotation,u]]))),{targetChanges:r,configChanges:s}},t.appendToList=function(e,t,n,a){const r=t?.lineItems?.top.annotation||{term:"com.sap.vocabularies.UI.v1.LineItem",collection:[]},m=[],d=r.collection;d&&Array.isArray(d)||(0,i.throwError)("Value of UI.LineItem is not an array");let y=[];for(const i of a){if(i.nodeType===h.UI_NODE_TYPE_COLUMN){if("Basic"===i.columnType)d.push((0,p.buildDataFieldForColumn)(e,i,n));else if("Rating"===i.columnType||"Progress"===i.columnType){const{annotationRecord:t,targetChanges:a}=(0,u.buildDataFieldForAnnotation)(e,i,n);d.push(t),m.push(a)}}else if(i.nodeType===h.UI_NODE_TYPE_ACTION)i.isDetermining=!1,d.push((0,s.buildDataFieldForAction)(i));else if(i.nodeType===h.UI_NODE_TYPE_CHART){const{dataField:t,targetChanges:a}=(0,l.buildDataFieldForChartAnnotation)(e,i,n);d.push(t),m.push(a)}else if(i.nodeType===h.UI_NODE_TYPE_CONTACT){const{dataField:t,targetChanges:a}=(0,c.buildDataFieldForContactAnnotation)(e,i,n);d.push(t),m.push(a)}else i.nodeType===h.UI_NODE_TYPE_NAVIGATION&&d.push((0,f.buildDataFieldForNavigation)(i));t?.lineItems?.app?.length&&y.push({annotation:r,changeType:o.ChangeType.Insert,pointer:"/collection/"+(d.length-1)})}return t?.lineItems?.app?.length||(y=[{annotation:r}]),m.push({targetPath:n,changes:y}),m},t.getMoveChangesForList=function(e,t,n,a=1){const r=[],s=e.lineItems.top,l=s.annotation;let p=e.subnodes.findIndex((t=>(0,i.isSameNodeId)(t.nodeId,[...e.nodeId,n])));-1===p&&(p=e.subnodes.length);const c=e.subnodes.findIndex((n=>(0,i.isSameNodeId)(n.nodeId,[...e.nodeId,t])));(0,i.moveInCollection)(l.collection,c,p,a),(0,i.moveInCollection)(e.subnodes,c,p,a);const u={annotation:l,changeType:o.ChangeType.Move,pointer:`/collection/${n}`,moveFromPointer:`/collection/${t}`};return a>1&&(u.moveFromPointer+="-"+(t+a-1)),r.push({targetPath:s.target,changes:[u]}),r},t.getDeleteChangesForList=function(e,t,n=1){const a=e.lineItems.top,r=a.annotation;r.collection.splice(t,n);const i={annotation:r};return e.lineItems.app?.length&&(i.pointer=`/collection/${t}`,i.changeType=o.ChangeType.Delete),n>1&&(i.pointer+="-"+(t+n-1)),{targetPath:a.target,changes:[i]}},t.getCreateListNodeOptions=function(e){const{entitySets:t}=(0,i.getEntityContainerData)(e.metadataService);return{nodeType:h.UI_NODE_TYPE_LIST,baseEntitySet:e.pageBase.entitySetName,entitySets:t.map((e=>({value:e})))}},t.createUINodeList=function(e,t){const n=[],a=[],o=(0,i.getEntityContainerData)(e.metadataService).entityContainerMdElement.name,r=`${o}/${e.pageBase.entitySetName}`,s=e.metadataService.getMetadataElement(r).structuredType,l=`${o}/${t.entitySet}`,p=e.metadataService.getMetadataElement(l).structuredType,c=new Map,u=(0,i.getRootNodeConfig)(e,h.UI_NODE_TYPE_LIST),y=(0,i.getRootNodeConfig)(e,h.UI_NODE_TYPE_VIEWS),g=y.configured?[...y.configuredPaths]:[];if(t.customViewId){if(!y.configured){const t=(0,m.switchFromSingleViewLR)(e,r,s);g.push(t.listAnnotationPath),n.push(...t.targetChanges||[]),c.set(h.UI_NODE_TYPE_LIST,"")}return g.push(`${i.CUSTOM_VIEW_PREFIX}${t.customViewId})`),c.set(h.UI_NODE_TYPE_VIEWS,g),{targetChanges:n,configChanges:c}}const f=(0,h.getExistingQualifiers)(e.annotationIndex,p,"com.sap.vocabularies.UI.v1.LineItem"),T=(0,i.generateId)(f,"tableView",!0);a.push({annotation:{term:"com.sap.vocabularies.UI.v1.LineItem",qualifier:T,collection:[]}});const P=`@com.sap.vocabularies.UI.v1.LineItem#${T}`;let E="";if(!y.configured){const t=(0,m.switchFromSingleViewLR)(e,r,s);g.push(t.listAnnotationPath),n.push(...t.targetChanges||[]),E=t.generatedSpvQualifier||""}const v=(0,h.getExistingQualifiers)(e.annotationIndex,p,"com.sap.vocabularies.UI.v1.SelectionPresentationVariant");E&&p===s&&v.push(E);const b=(0,i.generateIdAndIndex)(v,"tableView",!0),_=r!==l?` ${t.entitySet}`:"",A=b.index?` ${b.index}`:"",C=`${d.i18n.t("TableView")}${_}${A}`,N=(0,i.createSpvRecord)({visualizationPath:P,text:C});return a.push({annotation:{term:"com.sap.vocabularies.UI.v1.SelectionPresentationVariant",qualifier:b.id,record:N}}),g.push(`/${l}/@com.sap.vocabularies.UI.v1.SelectionPresentationVariant#${b.id}`),c.set(h.UI_NODE_TYPE_VIEWS,g),u.configured&&c.set(h.UI_NODE_TYPE_LIST,""),n.push({targetPath:p,changes:a}),{targetChanges:n,configChanges:c}},t.addListSelectionNewRowDefaults=E},32717:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertUiNodeInternalMacros=t.loadUiNodeInternalMacros=void 0;const a=n(78263),o=n(35586),r=n(63370),i=n(63587),s=n(78957),l=n(37411),p=n(32726),c=n(85496),u=n(25769),m=n(98132),d=n(23635),y="dummyForMacrosLocations";function g(e,t){return(0,d.buildTooComplexNode)(d.TooComplexReason.UnsupportedMacroPath,{start:{line:0,character:0},end:{line:0,character:10}},y,{nodeId:e,annotationPath:"",macroNodeId:t.id})}function f(e,t,n){const{term:a,entityTypeName:o,qualifier:r}=b(e,n,d.UI_NODE_TYPE_FILTER_FIELDS);if(!a||!o||"com.sap.vocabularies.UI.v1.SelectionFields"!==a)return g(t,n);const i=(0,l.loadUiInternalFilterFields)(o,e,t,r);return i.macroNodeId=n.id,i}function h(e,t,n){const{annotationPath:a,configuredPath:r}=(0,o.getAnnotationPathFromMacro)(e,t,d.UI_NODE_TYPE_LIST),{term:i}=(0,m.resolveAnnotationPath)(r);if(!a||!i||!["com.sap.vocabularies.UI.v1.LineItem","com.sap.vocabularies.UI.v1.PresentationVariant","com.sap.vocabularies.UI.v1.SelectionPresentationVariant"].includes(i))return g(n,t);const s=(0,u.loadUiNodeInternalList)(e,a,r,n,{isMacro:!0});return s.macroNodeId=t.id,s}function T(e,t,n){const{annotationPath:a,configuredPath:i}=(0,o.getAnnotationPathFromMacro)(e,t,d.UI_NODE_TYPE_ANALYTICAL_CHART),{term:s}=(0,m.resolveAnnotationPath)(i);if(!a||!s||!["com.sap.vocabularies.UI.v1.Chart","com.sap.vocabularies.UI.v1.PresentationVariant","com.sap.vocabularies.UI.v1.SelectionPresentationVariant"].includes(s))return g(n,t);const l=(0,r.loadUiNodeInternalAnalyticalChart)(a,i,e,n,{isMacro:!0});return l.macroNodeId=t.id,l}function P(e,t,n){const{term:o,entityTypeName:r,qualifier:i}=b(e,t);if(!o||!r||!["com.sap.vocabularies.UI.v1.FieldGroup","com.sap.vocabularies.UI.v1.Facets","com.sap.vocabularies.UI.v1.HeaderFacets"].includes(o))return g(n,t);if("com.sap.vocabularies.UI.v1.FieldGroup"===o){const o="@com.sap.vocabularies.UI.v1.FieldGroup"+(i?`#${i}`:""),s={type:d.ExpressionType.AnnotationPath,AnnotationPath:o},l={propertyValues:[{name:a.FACETS_PROP_NAME_TARGET,value:s}],propertyValuesOrigins:[{start:{line:0,character:0},end:{line:0,character:10}}]},p=(0,m.loadUiNodeInternalReferenceFacet)(r,l,{fileUri:y,range:{start:{line:0,character:0},end:{line:0,character:10}}},{nodeId:n,annotationPath:`/${r}/${o}`},e);return p.macroNodeId=t.id,p}{let n;if("com.sap.vocabularies.UI.v1.Facets"===o){const a=[0];n=(0,p.loadUiNodeInternalForm)(r,e,a,i),n.macroNodeId=t.id}else if("com.sap.vocabularies.UI.v1.HeaderFacets"===o){const a=[0];n=(0,c.loadUiNodeInternalHeaderSections)(r,e,a,i),n.macroNodeId=t.id}return(0,d.isTooComplex)(n)?n:n.subnodes[0]}}function E(e,t,n){const{term:o,entityTypeName:r,qualifier:s}=b(e,t);if(!o||!r||"com.sap.vocabularies.UI.v1.Chart"!==o)return g(n,t);const l="@com.sap.vocabularies.UI.v1.Chart"+(s?`#${s}`:""),p={type:d.ExpressionType.AnnotationPath,AnnotationPath:l},c={type:"com.sap.vocabularies.UI.v1.DataFieldForAnnotation",propertyValues:[{name:a.DATA_FIELD_PROP_NAME_TARGET,value:p}],propertyValuesOrigins:[{start:{line:0,character:0},end:{line:0,character:10}}]},u=(0,i.loadUiNodeInternalChart)(r,c,!1,{fileUri:y,range:{start:{line:0,character:0},end:{line:0,character:10}}},{nodeId:n,annotationPath:`/${r}/${l}`},e);return u.macroNodeId=t.id,u}function v(e,t,n){let r,i,l;if(t.attributes.get(o.MACRO_ATTRIBUTE_NAME_META_PATH).indexOf("@")>=0)return g(n,t);{const s=(0,o.getPropertyPathFromMacro)(e,t);if(!s)return g(n,t);const p=s.split("/").filter((e=>!!e)),c=p.pop();r=p.join("/");const u={type:d.ExpressionType.Path,Path:c};l={type:"com.sap.vocabularies.UI.v1.DataField",propertyValues:[{name:a.DATA_FIELD_PROP_NAME_VALUE,value:u}],propertyValuesOrigins:[{start:{line:0,character:0},end:{line:0,character:10}}]};const m={type:d.ExpressionType.Collection,Collection:[l],collectionOrigins:[{start:{line:0,character:0},end:{line:0,character:10}}]},f={target:r,annotation:{term:"com.sap.vocabularies.UI.v1.FieldGroup",record:{type:"com.sap.vocabularies.UI.v1.FieldGroupType",propertyValues:[{name:a.FIELD_GROUP_PROP_NAME_DATA,value:m}],propertyValuesOrigins:[{start:{line:0,character:0},end:{line:0,character:10}}]},origin:{start:{line:0,character:0},end:{line:0,character:10}}},fileUri:y};i={top:f,app:[f],base:[],readonly:!0,isSplit:!1}}const p=(0,s.loadUiNodeInternalFormField)(r,i,l,{fileUri:y,range:{start:{line:0,character:0},end:{line:0,character:10}}},{nodeId:n,annotationPath:""},e);return p.macroNodeId=t.id,p}function b(e,t,n){const{annotationPath:a}=(0,o.getAnnotationPathFromMacro)(e,t,n),{path:r,term:i,qualifier:s}=(0,m.resolveAnnotationPath)(a),l=(0,d.resolveMetadataElement)(e.metadataService,r.startsWith("/")?r.slice(1):r);return{path:r,term:i,qualifier:s,entityTypeName:l?.structuredType||l?.name||""}}t.loadUiNodeInternalMacros=function(e,t,n){const a={nodeId:n,annotationPath:"",tooComplex:!1,nodeType:d.UI_NODE_TYPE_MACROS,location:null,subnodes:[]},r=(0,o.getSupportedMacroNames)(),i=JSON.stringify(n);for(const[s,l]of(e||[]).entries()){const e=[...n,s];let p;if(r.includes(l.name)){switch(l.name){case o.MACRO_NAME_FILTER_BAR:p=f(t,e,l);break;case o.MACRO_NAME_TABLE:p=h(t,l,e);break;case o.MACRO_NAME_CHART:p=T(t,l,e);break;case o.MACRO_NAME_FORM:p=P(t,l,e);break;case o.MACRO_NAME_MICRO_CHART:p=E(t,l,e);break;case o.MACRO_NAME_FORM_ELEMENT:case o.MACRO_NAME_FIELD:p=v(t,l,e)}p.allowedParentNodes={},p.allowedParentNodes[i]=!0,a.subnodes.push(p)}else{const t={nodeId:e,annotationPath:"",macroNodeId:l.id};a.subnodes.push((0,d.buildTooComplexNode)(d.TooComplexReason.UnsupportedMacroName,{start:{line:0,character:0},end:{line:0,character:10}},y,t))}}return a.subnodes.length?a:null},t.convertUiNodeInternalMacros=function(e,t){const n=[];(e.subnodes||[]).forEach((e=>{if((0,d.isTooComplex)(e))return void n.push(e);const a=()=>({tooComplex:!1,type:d.UI_PROP_TYPE_ENUM,value:d.ENUM_VALUE_NOT_APPLICABLE,allowedValues:[]}),p=()=>({tooComplex:!1,type:d.UI_PROP_TYPE_STRING,value:d.ENUM_VALUE_NOT_APPLICABLE,isLanguageDependent:!0,useBase:!1});let c=(0,m.resolveAnnotationPath)(e.annotationPath).path;c.startsWith("/")&&(c=c.substring(1));const y=(0,d.resolveMetadataElement)(t.metadataService,c)?.name;let g;switch(e.nodeType){case d.UI_NODE_TYPE_FILTER_FIELDS:g=(0,l.convertUiNodeInternalFilterFields)(e,t,y);break;case d.UI_NODE_TYPE_LIST:g=(0,u.convertUiNodeInternalList)(e,t),(0,d.isTooComplex)(g)||(g.variant=a(),g.selectionVariant=a());break;case d.UI_NODE_TYPE_ANALYTICAL_CHART:g=(0,r.convertUiNodeInternalAnalyticalChart)(e,y,t),(0,d.isTooComplex)(g)||delete g.variant;break;case d.UI_NODE_TYPE_SECTION:g=(0,m.convertUiNodeInternalSection)(e,t,y);break;case d.UI_NODE_TYPE_FORM_FIELD:g=(0,s.convertUiNodeInternalField)(e,t,""),function(e,t,n,a,r){if(!(0,d.isTooComplex)(t)){t.uiProperties[d.uiPropertyNames.criticality.criticality]=a(),t.uiProperties[d.uiPropertyNames.criticality.criticalityRepresentation]=a();e.pageContext.macros.find((e=>e.id===n.macroNodeId)).name===o.MACRO_NAME_FIELD?t.label=r():(0,d.isTooComplex)(t.label)||(t.label.readonly=!0,t.label.readonlyTooltip="Changing 'Label' (in @Common.Label) for macro 'FormField' not supported")}}(t,g,e,a,p);break;case d.UI_NODE_TYPE_CHART:g=(0,i.convertUiNodeInternalChart)(e,t)}g.macroNodeId=e.macroNodeId,n.push(g)}));const a={nodeId:e.nodeId,annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,allowedSubnodeTypes:(e.allowedSubnodeTypes,[]),tooComplex:!1,nodeType:e.nodeType,location:e.location,subnodes:n};return(0,o.getAnalyticalChartSupportedMultiView)(t).supported&&a.allowedSubnodeTypes.push(d.UI_NODE_TYPE_ANALYTICAL_CHART),a}},91882:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.finalizeNavigationNode=t.getNavigationPropertiesForChange=t.changeUIPropertyNavigation=t.buildDataFieldForNavigation=t.convertUiNodeInternalNavigation=t.loadUiNodeInternalNavigation=void 0;const a=n(78263),o=n(35586),r=n(95207),i=n(52564),s=n(46163),l=n(90553),p=n(70704),c=n(23635),u=n(53107);t.loadUiNodeInternalNavigation=function(e,t,n,a,o){return"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"!==t.type?(0,c.buildTooComplexNode)(c.TooComplexReason.UnsupportedType,n.range,n.fileUri,a):{...a,tooComplex:!1,nodeType:c.UI_NODE_TYPE_NAVIGATION,isChangeable:o,dataField:t,location:n,dataFieldContainingAnnotation:e,subnodes:[]}},t.convertUiNodeInternalNavigation=function(e,t){const n=e.dataField,a=e.location,i="com.sap.vocabularies.UI.v1.LineItem"===(0,c.resolvePath)(e.annotationPath).term,m={nodeId:e.nodeId,nodeSubType:i?"Table":"Section",annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,tooComplex:!1,nodeType:e.nodeType,location:a,label:(0,r.getLabel)(n,e.location.fileUri,e),subnodes:[],info:p.i18n.t("CrossAppNavigationInfo")};if("Table"===m.nodeSubType){const{inline:o,importance:r}=(0,l.evaluateInlineAndImportance)(e);m.inline=o,r&&(m.importance=r),({hidden:m.hidden,hideByProperty:m.hideByProperty}=(0,u.getHidden)(e.dataFieldContainingAnnotation,n,a,t))}const d={context:t,uiPropertyDefinitions:(0,s.getUIPropertyDefinitions)(c.UI_NODE_TYPE_NAVIGATION,m.nodeSubType),layeredAnnotation:e.dataFieldContainingAnnotation,includeNonApplicableProperties:(0,o.isSameNodeId)(t.includeNonApplicablePropertiesForNode,e.nodeId),currentUINodePath:(0,c.resolvePath)(m.annotationPath).valuePath};m.uiProperties=(0,s.buildGenericUIProperties)(d,(0,s.getPropValueMap)(m)),"Table"===m.nodeSubType&&m?.inline?.value&&delete m.uiProperties.requiresContext,function(e){const t="mapping",n=e[t];if(!n||(0,c.isTooComplex)(n))return;0===n.rows?.length&&delete n.locations;if(n.rows?.length>1){const{range:a,fileUri:o}=n.locations.pop();e[t]=(0,c.buildTooComplex)(c.TooComplexReason.CollectionWithSingleValueExpected,a,o)}}(m.uiProperties);const y=[m.label,m.importance,m.inline,m.hidden,m.hideByProperty];return(0,o.setReadonlyInUiProperties)(t,m.annotationPath,y),m},t.buildDataFieldForNavigation=function(e){const t={type:"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation",propertyValues:[{name:a.DATA_FIELD_PROP_NAME_SEMANTIC_OBJECT,value:{type:"String",String:e.semanticObjectName}},{name:a.DATA_FIELD_PROP_NAME_ACTION,value:{type:"String",String:e.semanticObjectAction}},{name:a.DATA_FIELD_PROP_NAME_LABEL,value:{type:"String",String:(n=e.semanticObjectAction,o=e.semanticObjectName,`${n.charAt(0).toUpperCase()+n.substring(1)} ${o}`)}}]};var n,o;return e.isInline&&t.propertyValues.push({name:a.DATA_FIELD_PROP_NAME_INLINE,value:{type:"Bool",Bool:!0}}),t},t.changeUIPropertyNavigation=function(e,t,n,a,o){const p=t.nodeId[t.nodeId.length-1],m=a.top,d=[];if(void 0!==o.label&&t.label.value!==o.label&&d.push(...(0,r.changeDataFieldLabel)(o.label,m,p)),void 0!==o.inline&&t.inline.value!==o.inline&&d.push(...(0,l.changeDataFieldInline)(o.inline,m,p)),void 0!==o.importance&&t.importance.value!==o.importance){const e=(0,i.createColumnImportanceChange)(a,p,o.importance);d.push({targetPath:a.top.target,changes:[e]})}if("boolean"==typeof o.hidden&&t.hidden.value!==o.hidden){const e=(0,u.changeHiddenProperty)(a,p,o.hidden);d.push({targetPath:a.top.target,changes:[e]})}if(""!==o.hideByProperty&&void 0!==o.hideByProperty&&t.hideByProperty.value!==o.hideByProperty){const e=(0,u.changeHiddenProperty)(a,p,o.hideByProperty,!0);d.push({targetPath:a.top.target,changes:[e]})}return function(e,t,n,a,o){const r=(0,s.getUIPropertyDefinitions)(c.UI_NODE_TYPE_NAVIGATION,t.nodeSubType);if(r.propertyNames.length&&a.propertiesMap){const i=n.dataFieldContainingAnnotation,l=(0,c.resolvePath)(t.annotationPath).valuePath;o.push(...(0,s.updateGenericUIProperties)({context:e,layeredAnnotation:i,uiPropertyDefinitions:r,currentUINodePath:l},t.uiProperties,a.propertiesMap))}}(e,t,n,o,d),d},t.getNavigationPropertiesForChange=function(e,t){const n={label:void 0,inline:void 0,importance:void 0,hidden:void 0,hideByProperty:void 0},a=(0,s.getUIPropertyDefinitions)(c.UI_NODE_TYPE_NAVIGATION,t);for(const o of e)if(a.propertyMap[o.propertyName]){if("Section"===t&&"requiresContext"===o.propertyName)continue;n.propertiesMap=n.propertiesMap||new Map,n.propertiesMap.set(o.propertyName,o.value)}else Object.keys(n).includes(o.propertyName)&&(n[o.propertyName]=o.value);return n},t.finalizeNavigationNode=function(e,t,n){n.nodeType!==c.UI_NODE_TYPE_LIST&&(t.parentNodes||[]).forEach((t=>{let n=!1;(t.nodeType===c.UI_NODE_TYPE_SECTION&&a.sectionTypesForFields.includes(t.subType)&&t.rootNodeType===c.UI_NODE_TYPE_FORM||t.nodeType===c.UI_NODE_TYPE_PAGE_ACTIONS)&&(n=!0),n&&(e.allowedParentNodes=e.allowedParentNodes||{},e.allowedParentNodes[JSON.stringify(t.nodeId)]=!0)}))}},3769:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deletePageAction=t.insertPageAction=t.finalizePageActionsNode=t.convertUiNodeInternalPageActions=t.loadUiNodeInternalPageActions=void 0;const a=n(20576),o=n(23635),r=n(35586),i=n(90553),s=n(70704),l=n(91882);t.loadUiNodeInternalPageActions=function(e,t,n){const a=t.annotationIndex,s=(0,o.getAnnotationIndexKey)(e,"com.sap.vocabularies.UI.v1.Identification");let p=a[s]||null;const c=p?{range:p.top.annotation.origin,fileUri:p.top.fileUri}:null;if(!p){const t={target:e,fileUri:null,annotation:{term:"com.sap.vocabularies.UI.v1.Identification",origin:null,collection:[],collectionOrigins:[]}};p={top:t,base:[],app:[t],isSplit:!1,readonly:!1}}const u={nodeId:n,annotationPath:"/"+s},{tooComplexReason:m,collection:d,collectionOrigins:y}=(0,o.getValueFromAnnotation)(p.top.annotation,o.ExpressionType.Collection);if(m)return(0,o.buildTooComplexNode)(m,p.top.annotation.origin,p.top.fileUri,u);const g={...u,tooComplex:!1,nodeType:o.UI_NODE_TYPE_PAGE_ACTIONS,location:c,identification:p,subnodes:[]};(0,r.setReadonlyAndTooltip)(p,g);const f=p.top.fileUri;for(let e=0;e<d.length;e++){const{tooComplexReason:n,record:a,range:r}=(0,o.getValueFromCollection)(d,y,e,o.ExpressionType.Record),s={};s[JSON.stringify(g.nodeId)]=!0;const c={fileUri:f,range:r},m={nodeId:[...g.nodeId,e],annotationPath:u.annotationPath+"/"+e,allowedParentNodes:s};if(n)g.subnodes.push((0,o.buildTooComplexNode)(n,r,f,m));else if(["com.sap.vocabularies.UI.v1.DataFieldForAction","com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"].includes(a.type)){const e=!!p.app?.length;"com.sap.vocabularies.UI.v1.DataFieldForAction"===a.type?g.subnodes.push((0,i.loadUiNodeInternalAction)(p,a,c,m,t,e)):"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"===a.type&&g.subnodes.push((0,l.loadUiNodeInternalNavigation)(p,a,c,m,e))}else g.subnodes.push((0,o.buildTooComplexNode)(o.TooComplexReason.UnsupportedType,r,f,m))}return g},t.convertUiNodeInternalPageActions=function(e,t,n){const a=new Set,s=[];(t.subnodes||[]).forEach((t=>{if((0,o.isTooComplex)(t))s.push(t);else if(t.nodeType===o.UI_NODE_TYPE_ACTION){const r=(0,i.convertUiNodeInternalAction)(t,n,e);s.push(r),(0,o.isTooComplex)(r)||(0,o.isTooComplex)(r.action)||a.add(r.action.value)}else if(t.nodeType===o.UI_NODE_TYPE_NAVIGATION){const e=(0,l.convertUiNodeInternalNavigation)(t,n);s.push(e)}}));const p={nodeId:t.nodeId,annotationPath:t.annotationPath,tooComplex:!1,nodeType:t.nodeType,location:t.location,subnodes:s};return(0,r.setReadonlyAndTooltip)(t,p),n.parentNodes.push({nodeId:p.nodeId,nodeType:p.nodeType,rootNodeType:o.UI_NODE_TYPE_PAGE_ACTIONS,containedActions:a}),p},t.finalizePageActionsNode=function(e,t){e.allowedSubnodeTypes=e.allowedSubnodeTypes||[],e.suppressedSubnodeTypes=e.suppressedSubnodeTypes||[],e.allowedSubnodeTypes.push(o.UI_NODE_TYPE_NAVIGATION),(0,r.getSelectableActions)(t).length>0?e.allowedSubnodeTypes.push(o.UI_NODE_TYPE_ACTION):e.suppressedSubnodeTypes.push({subNodeType:`${o.UI_NODE_TYPE_ACTION}`,tooltip:s.i18n.t("DisableMenuTooltipAction")})},t.insertPageAction=function(e,t){const n=e.identification.top.annotation,s=n.collection;s&&Array.isArray(s)||(0,r.throwError)("No array found in UI.Identification");const p=[];for(const e of t)e.isInline=!1,e.nodeType===o.UI_NODE_TYPE_ACTION?s.push((0,i.buildDataFieldForAction)(e)):e.nodeType===o.UI_NODE_TYPE_NAVIGATION&&s.push((0,l.buildDataFieldForNavigation)(e)),p.push({annotation:n,changeType:a.ChangeType.Insert,pointer:"/collection/"+(s.length-1)});return[{targetPath:e.identification.top.target,changes:p}]},t.deletePageAction=function(e,t,n){const o=e.identification.top.annotation,i=o.collection;(!i.length||i.length<=t)&&(0,r.throwError)(`Deletion index ${t} out of bounds`),i.splice(t,n);const s={annotation:o,changeType:a.ChangeType.Delete,pointer:`/collection/${t}`};return n>1&&(s.pointer+="-"+(t+n-1)),{targetPath:e.identification.top.target,changes:[s]}}},98132:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.finalizeSectionNode=t.getDataFieldsCollectionForSection=t.convertUiNodeInternalSection=t.getSectionType=t.loadUiNodeInternalReferenceFacet=t.loadUiNodeInternalSections=t.resolveAnnotationPath=void 0;const a=n(78263),o=n(35586),r=n(90553),i=n(63370),s=n(63587),l=n(47770),p=n(18804),c=n(25769),u=n(78957),m=n(46163),d=n(70704),y=n(91882),g=n(23635),f=n(53107),h=n(72870);function T(e){let t="",n="",a="";return(e=e||"").startsWith("@")?n=e.slice(1):e.includes("@")&&([t,n]=e.split("@")),t.endsWith("/")&&(t=t.slice(0,-1)),n.includes("#")&&([n,a]=n.split("#")),{path:t,term:n,qualifier:a}}function P(e,t,n,l,m){const d=(0,g.getValueFromRecord)(t,a.FACETS_PROP_NAME_TARGET,g.ExpressionType.AnnotationPath);if((0,o.throwIf)(!d,"UI.ReferenceFacet with no 'Target' field"),d.tooComplexReason)return(0,g.buildTooComplexNode)(d.tooComplexReason,d.range,n.fileUri,l);const f=d.range,h=d.value;let P,v,b;if(h){const{path:t,term:n,qualifier:a}=T(h);let o=e+(t?"/"+t:"");t&&(o=(0,g.resolveMetadataElement)(m.metadataService,o)?.path),b=(0,g.getAnnotationIndexKey)(o,n,a),v=m.annotationIndex[b],P=t}if(!h||!v){const e=g.TooComplexReason.NoValidAnnotationPath,t=[{...n,reason:e,message:(0,g.getNoValidPathMessage)(e,(0,o.getName)(m,n.fileUri,h.substring(1)),m.isCdsProject)}];return{...l,tooComplex:!0,tooComplexLocations:t}}const _=v.top;if(!["com.sap.vocabularies.UI.v1.FieldGroup","com.sap.vocabularies.UI.v1.Identification","com.sap.vocabularies.UI.v1.LineItem","com.sap.vocabularies.UI.v1.DataPoint","com.sap.vocabularies.UI.v1.Chart","com.sap.vocabularies.UI.v1.PresentationVariant"].includes(_.annotation.term)){const e=g.TooComplexReason.UnsupportedTerm,t=[{fileUri:n.fileUri,range:f,reason:e},{fileUri:_.fileUri,range:_.annotation.origin,reason:e}];return{...l,tooComplex:!0,tooComplexLocations:t}}if("com.sap.vocabularies.UI.v1.DataPoint"===_.annotation.term)return(0,p.loadUiNodeInternalDataPoint)(m,e,t,n,P,v,l);if(A=_.annotation.term,l.annotationPath.includes("com.sap.vocabularies.UI.v1.HeaderFacets")&&"com.sap.vocabularies.UI.v1.Chart"===A)return(0,s.loadUiNodeInternalChart)(e,t,!0,n,l,m);var A;const C="/"+b,N={...l,tooComplex:!1,nodeType:g.UI_NODE_TYPE_SECTION,facet:t,location:n,subnodes:[]};v&&((0,o.setReadonlyAndTooltip)(v,N),N.referencedAnnotation=v);const{annotationPath:I,isTable:S,tooComplexData:x}=function(e,t,n){const a=t.annotation.term,r=["com.sap.vocabularies.UI.v1.Chart","com.sap.vocabularies.UI.v1.LineItem"];if(![...r,"com.sap.vocabularies.UI.v1.PresentationVariant"].includes(a))return{annotationPath:""};if("com.sap.vocabularies.UI.v1.Chart"===a||"com.sap.vocabularies.UI.v1.LineItem"===a)return{annotationPath:n,isTable:"com.sap.vocabularies.UI.v1.LineItem"===a};const i=(0,o.findVisualizationRelativePath)(e,t);if(!i||!r.includes((0,g.resolveRelativeAnnotationPath)(i).term)){return{annotationPath:"",tooComplexData:{tooComplex:!0,tooComplexLocations:[{reason:g.TooComplexReason.NoValidAnnoCombination,fileUri:t.fileUri,range:t.annotation.origin}]}}}let s=(0,g.resolvePath)(n).target;const l=(0,g.resolveRelativeAnnotationPath)(i);l.relativePath&&(s=(0,g.resolveMetadataElement)(e.metadataService,`${s}/${l.relativePath}`)?.path,s||(0,o.throwError)(`Invalid relative path '${l.relativePath}' for chart visualization`));return{annotationPath:`/${s}/@${l.term}`+(l.qualifier?`#${l.qualifier}`:""),isTable:"com.sap.vocabularies.UI.v1.LineItem"===l.term}}(m,_,C);if(x)return{...l,...x};if(I){const e=[...l.nodeId,0],t={isOp:!0},n=S?(0,c.loadUiNodeInternalList)(m,I,C,e,t):(0,i.loadUiNodeInternalAnalyticalChart)(I,C,m,e,t);return N.subnodes.push(n),N}let O,D,R=C;if("com.sap.vocabularies.UI.v1.FieldGroup"===_.annotation.term)({dataFields:O,dataFieldsOrigin:D,annotationPathForSubnodes:R}=function(e,t,n){let r,i,s=n;const l=(0,g.getValueFromAnnotation)(e.annotation,g.ExpressionType.Record);if(l.tooComplexReason)throw(0,g.buildTooComplexNode)(l.tooComplexReason,l.range,e.fileUri,t);if(l.record){const n=(0,g.getValueFromRecord)(l.record,a.FIELD_GROUP_PROP_NAME_DATA,g.ExpressionType.Collection);if(n||(0,o.throwError)("UI.FieldGroup with no 'Data' field"),n.tooComplexReason)throw(0,g.buildTooComplexNode)(n.tooComplexReason,n.range,e.fileUri,t);r=n.collection,i=n.collectionOrigins,s+="/"+a.FIELD_GROUP_PROP_NAME_DATA}return{dataFields:r,dataFieldsOrigin:i,annotationPathForSubnodes:s}}(_,l,C));else if("com.sap.vocabularies.UI.v1.Identification"===_.annotation.term){const e=(0,g.getValueFromAnnotation)(_.annotation,g.ExpressionType.Collection);if(e.tooComplexReason)return(0,g.buildTooComplexNode)(e.tooComplexReason,e.range,_.fileUri,l);O=e.collection,D=e.collectionOrigins}return function(e,t,n,a,o,i){const{entityTypeName:s,annotationRelativePath:l,annotationPathForSubnodes:p}=i,c=s+(l?"/"+l:""),m=(0,g.resolveMetadataElement)(e.metadataService,c,!0);t.subnodes=[];for(let i=0;i<(n||[]).length;i++){const l=(0,g.getValueFromCollection)(n,a,i,g.ExpressionType.Record),d={};d[JSON.stringify(t.nodeId)]=!0;const f={nodeId:[...t.nodeId,i],allowedParentNodes:d,annotationPath:p+"/"+i};if(l.tooComplexReason){t.subnodes.push((0,g.buildTooComplexNode)(l.tooComplexReason,l.range,o.fileUri,f));continue}if(o.target===s&&"com.sap.vocabularies.UI.v1.Identification"===o.annotation.term&&!o.annotation.qualifier&&"com.sap.vocabularies.UI.v1.DataFieldForAction"===l.record.type){t.subnodes.push((0,g.buildTooComplexNode)(g.TooComplexReason.UnsupportedType,l.range,o.fileUri,f));continue}let h;const T={range:l.range,fileUri:o.fileUri},P=!!t.referencedAnnotation.app?.length;switch(l.record.type){case"com.sap.vocabularies.UI.v1.DataField":h=(0,u.loadUiNodeInternalFormField)(c,t.referencedAnnotation,l.record,T,f,e);break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":h=(0,r.loadUiNodeInternalAction)(t.referencedAnnotation,l.record,T,f,e,P);break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":h=E(t.referencedAnnotation,l.record,T,f,P,e,m.name);break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":h=(0,y.loadUiNodeInternalNavigation)(t.referencedAnnotation,l.record,T,f,P)}h||(h=(0,g.buildTooComplexNode)(g.TooComplexReason.UnsupportedType,T.range,T.fileUri,f)),t.subnodes.push(h)}}(m,N,O,D,_,{entityTypeName:e,annotationPathForSubnodes:R,annotationRelativePath:P}),N}function E(e,t,n,r,i,s,p){let c;const u=(0,g.getValueFromRecord)(t,a.DATA_FIELD_PROP_NAME_TARGET,g.ExpressionType.AnnotationPath);u||(0,o.throwError)("UI.DataFieldForAnnotation entry with no 'Target' property"),u.tooComplexReason&&(c=(0,g.buildTooComplexNode)(u.tooComplexReason,u.range,n.fileUri,r));const m=T(u.value).term;return c="com.sap.vocabularies.Communication.v1.Contact"===m?(0,l.loadUiNodeInternalContact)(p,t,i,n,r,s):"com.sap.vocabularies.UI.v1.ConnectedFields"===m?(0,h.loadUiNodeInternalConnectedFields)(p,e,t,n,i,r,s):(0,g.buildTooComplexNode)(g.TooComplexReason.UnsupportedType,n.range,n.fileUri,r),c}function v(e,t){const n=t?.annotation?.term;if("com.sap.vocabularies.UI.v1.FieldGroup"===n)return"FieldGroup";if("com.sap.vocabularies.UI.v1.Identification"===n)return"Identification";if("com.sap.vocabularies.UI.v1.LineItem"===n)return"Table";if("com.sap.vocabularies.UI.v1.Chart"===n)return"analyticalChart";if("com.sap.vocabularies.UI.v1.PresentationVariant"===n){const n=(0,o.findVisualizationRelativePath)(e,t),a=(0,g.resolveRelativeAnnotationPath)(n).term;if("com.sap.vocabularies.UI.v1.LineItem"===a)return"Table";if("com.sap.vocabularies.UI.v1.Chart"===a)return"analyticalChart"}(0,o.throwError)(`Section not supported for term ${n}`)}function b(e,t,n,s){const p=e.facet,d=e.location.fileUri;let T;T="com.sap.vocabularies.UI.v1.CollectionFacet"===p.type?"Collection":v(t,e.referencedAnnotation?.top),"Identification"!==T||e.referencedAnnotation?.top.annotation.qualifier||(t.selectable.identificationSection=!1);const P={nodeId:e.nodeId,annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,tooComplex:!1,nodeType:e.nodeType,location:e.location,sectionType:T,label:null,hidden:null,hideByProperty:null,subnodes:[]};if((0,o.setReadonlyAndTooltip)(e,P),P.label=(0,o.buildUIPropFromRecordProp)(p,a.FACETS_PROP_NAME_LABEL,d,{isLanguageDependent:!0}),P.label||(P.label={tooComplex:!1,type:g.UI_PROP_TYPE_STRING,value:"",isLanguageDependent:!0}),"Collection"!==T){const t={expectedType:g.ExpressionType.AnnotationPath},n=(0,o.buildUIPropFromRecordProp)(p,a.FACETS_PROP_NAME_TARGET,d,t);if(P.relativePath=(0,g.resolveRelativeAnnotationPath)(n.value||"").relativePath,e.referencedAnnotation){const{target:t,annotation:n}=e.referencedAnnotation.top;P.referencedAnnoIndexKey=(0,g.getAnnotationIndexKey)(t,n.term,n.qualifier)}}const{target:E,term:_,qualifier:A}=(0,g.resolvePath)(P.annotationPath),C=(0,g.getAnnotationIndexKey)(E,_,A);if(({hidden:P.hidden,hideByProperty:P.hideByProperty}=(0,f.getHidden)(t.annotationIndex[C],p,P.location,t)),(0,o.setReadonlyInUiProperties)(t,P.annotationPath,[P.label,P.hidden,P.hideByProperty]),["FieldGroup","Identification"].includes(P.sectionType)){const{valuePath:n,target:a,term:r,qualifier:i}=(0,g.resolvePath)(P.annotationPath);if(n.includes("Facets")){const s=(0,g.getAnnotationIndexKey)(a,r,i),l={context:t,layeredAnnotation:t.annotationIndex[s],uiPropertyDefinitions:(0,m.getUIPropertyDefinitions)(g.UI_NODE_TYPE_SECTION,P.sectionType),currentUINodePath:n,includeNonApplicableProperties:(0,o.isSameNodeId)(t.includeNonApplicablePropertiesForNode,e.nodeId)};P.uiProperties=(0,m.buildGenericUIProperties)(l,(0,m.getPropValueMap)(P))}}P.hidden.value&&P.uiProperties&&(P.uiProperties[g.UIPropertyDefinitionsGroup.displayOnDemand]=null);const{selectedInfo:N,relativePath:I}=function(e,t,n,a){const o=e.relativePath||null,s=new Set,p=new Set,m=new Set,d=new Set,f=new Set;(t.subnodes||[]).forEach((s=>{let p,T;switch((0,g.isTooComplex)(s)?T=s:p=s.nodeType,p){case g.UI_NODE_TYPE_SECTION:T=b(s,n,a);break;case g.UI_NODE_TYPE_LIST:T=(0,c.convertUiNodeInternalList)(s,n);break;case g.UI_NODE_TYPE_FORM_FIELD:T=(0,u.convertUiNodeInternalField)(s,n,o),(0,g.isTooComplex)(T)||(0,g.isTooComplex)(T.path)||d.add(T.path.value);break;case g.UI_NODE_TYPE_ACTION:T=(0,r.convertUiNodeInternalAction)(s,n),(0,g.isTooComplex)(T)||(0,g.isTooComplex)(T.action)||m.add(T.action.value);break;case g.UI_NODE_TYPE_CONTACT:T=(0,l.convertUiNodeInternalContact)(s,n);break;case g.UI_NODE_TYPE_ANALYTICAL_CHART:{const e=t.referencedAnnotation.top.target;T=(0,i.convertUiNodeInternalAnalyticalChart)(s,e,n);break}case g.UI_NODE_TYPE_NAVIGATION:T=(0,y.convertUiNodeInternalNavigation)(s,n);break;case g.UI_NODE_TYPE_CONNECTED_FIELDS:T=(0,h.convertUiNodeInternalConnectedFields)(s,n),(0,g.isTooComplex)(T)||T.subnodes.forEach((e=>{(0,g.isTooComplex)(e)||(0,g.isTooComplex)(e.path)||f.add(e.path.value)}))}T&&e.subnodes.push(T)}));return{selectedInfo:{columnsSelected:s,numericColumnsSelected:p,actionsSelected:m,fieldsSelected:d,connectedFieldsSelected:f},relativePath:o}}(P,e,t,n);return function(e,t,n){if("Table"===e.sectionType)e.allowedSubnodeTypes=e.allowedSubnodeTypes||[],e.suppressedSubnodeTypes=e.suppressedSubnodeTypes||[],e.allowedSubnodeTypes.push(g.UI_NODE_TYPE_LIST);else if("Collection"===e.sectionType){if(e.allowedSubnodeTypes=[`${g.UI_NODE_TYPE_SECTION}/Collection`,`${g.UI_NODE_TYPE_SECTION}/FieldGroup`],!t.toManyAssociations){const e=t.metadataService.getMetadataElement(n);t.toManyAssociations=(0,o.getAvailableManyAssociationPathsForEntity)(t.metadataService,e)}t.toManyAssociations?.length&&(e.allowedSubnodeTypes.push(`${g.UI_NODE_TYPE_SECTION}/Table`),e.allowedSubnodeTypes.push(...(0,o.checkPrerequisitesForChartSection)(t,n)))}}(P,t,n),t.parentNodes.push({nodeId:P.nodeId,nodeType:P.nodeType,subType:P.sectionType,rootNodeType:s?g.UI_NODE_TYPE_HEADER_SECTIONS:g.UI_NODE_TYPE_FORM,relativePath:I,containedFields:N.fieldsSelected,containedActions:N.actionsSelected,containedConnectedFields:N.connectedFieldsSelected}),P}function _(e,t,n){const a=e.metadataService.getMetadataElement(e.pageBase.entityTypeName),r=n===g.UI_NODE_TYPE_FORM_FIELD?[g.ExpressionType.Collection]:[],i={expandToPaths:(n===g.UI_NODE_TYPE_FORM_FIELD?e.selectable.formFieldsUsed:e.selectable.formConnectedFieldsUsed).get(t.referencedAnnoIndexKey),removeExpandToNodes:!0,allowedTypes:new Set(r)},s=(0,o.getPathValueHelpTree)(e,a,i).nodes,l=t.relativePath||"",p=n===g.UI_NODE_TYPE_CONNECTED_FIELDS?2:1;!l&&(s.length>=p||s[0]?.expandable)||l&&(0,o.getValueHelpNodeByPath)(s,l)?t.allowedSubnodeTypes.push(n):t.suppressedSubnodeTypes.push({subNodeType:`${n}`,tooltip:d.i18n.t("DisableMenuTooltipFields")})}t.resolveAnnotationPath=T,t.loadUiNodeInternalSections=function e(t,n,o,r,i,s){const l=[];for(let p=0;p<t.length;p++){const{tooComplexReason:c,record:u,range:m}=(0,g.getValueFromCollection)(t,n,p,g.ExpressionType.Record),d=s.isRoot?`${o.annotationPath}/${p}`:`${o.annotationPath}/Facets/${p}`,y={};y[JSON.stringify(o.nodeId)]=!0;const f={nodeId:[...o.nodeId,p],allowedParentNodes:y,annotationPath:d};if(c)l.push((0,g.buildTooComplexNode)(c,m,s.fileUri,f));else if("com.sap.vocabularies.UI.v1.CollectionFacet"===u.type){const t=(0,g.getValueFromRecord)(u,a.FACETS_PROP_NAME_FACETS,g.ExpressionType.Collection);t?.tooComplexReason&&l.push((0,g.buildTooComplexNode)(t.tooComplexReason,t.range,s.fileUri,f));const n=e(t?.collection||[],t?.collectionOrigins||[],f,r,i,{readonly:s.readonly,readonlyTooltip:s.readonlyTooltip,fileUri:s.fileUri}),o={...f,tooComplex:!1,nodeType:g.UI_NODE_TYPE_SECTION,facet:u,location:{fileUri:s.fileUri,range:m},subnodes:n,readonly:s.readonly,readonlyTooltip:s.readonlyTooltip};l.push(o)}else if("com.sap.vocabularies.UI.v1.ReferenceFacet"===u.type){const e={fileUri:s.fileUri,range:m};l.push(P(r,u,e,f,i))}else l.push((0,g.buildTooComplexNode)(g.TooComplexReason.UnsupportedType,m,s.fileUri,f))}return l},t.loadUiNodeInternalReferenceFacet=P,t.getSectionType=v,t.convertUiNodeInternalSection=b,t.getDataFieldsCollectionForSection=function(e){if("com.sap.vocabularies.UI.v1.FieldGroup"===e.term){const{tooComplexReason:t,record:n}=(0,g.getValueFromAnnotation)(e,g.ExpressionType.Record);t&&(0,o.throwError)("Error reading record from @UI.FieldGroup");const r=(0,g.getValueFromRecord)(n,a.FIELD_GROUP_PROP_NAME_DATA,g.ExpressionType.Collection);r||(0,o.throwError)("UI.FieldGroup with no 'Data' field"),r.tooComplexReason&&(0,o.throwError)("Error reading collection from @UI.FieldGroup/Data");const i=`/record/propertyValues/${r.propIndex}/value/Collection`;return{collection:r.collection,pointer:i}}if("com.sap.vocabularies.UI.v1.Identification"===e.term||"com.sap.vocabularies.UI.v1.LineItem"===e.term){const{tooComplexReason:t,collection:n}=(0,g.getValueFromAnnotation)(e,g.ExpressionType.Collection);return t&&(0,o.throwError)(`Error reading collection from ${e.term}`),{collection:n,pointer:"/collection"}}return{collection:[],pointer:""}},t.finalizeSectionNode=function(e,t,n){e.allowedParentNodes=e.allowedParentNodes||{},e.suppressedSubnodeTypes=e.suppressedSubnodeTypes||[],e.allowedParentNodes[JSON.stringify([e.nodeId[0]])]=!0,(t.parentNodes||[]).filter((e=>function(e,t){if(e.nodeType===t.nodeType)return!0;return e.rootNodeType===t.nodeType&&e.nodeType===g.UI_NODE_TYPE_SECTION&&"Collection"===e.subType}(e,n))).forEach((t=>{(0,o.isSameNodeId)(t.nodeId,e.nodeId)||(0,o.isChildOf)(t.nodeId,e.nodeId)||(e.allowedParentNodes=e.allowedParentNodes||{},e.allowedParentNodes[JSON.stringify(t.nodeId)]=!0)})),"FieldGroup"!==e.sectionType&&"Identification"!==e.sectionType||(e.allowedSubnodeTypes=e.allowedSubnodeTypes||[],e.suppressedSubnodeTypes=e.suppressedSubnodeTypes||[],n.nodeType===g.UI_NODE_TYPE_FORM&&(0,o.getSelectableActions)(t).length>0?e.allowedSubnodeTypes.push(g.UI_NODE_TYPE_ACTION):e.suppressedSubnodeTypes.push({subNodeType:`${g.UI_NODE_TYPE_ACTION}`,tooltip:d.i18n.t("DisableMenuTooltipAction")}),_(t,e,g.UI_NODE_TYPE_FORM_FIELD),n.nodeType!==g.UI_NODE_TYPE_HEADER_SECTIONS&&(e.allowedSubnodeTypes.push(g.UI_NODE_TYPE_NAVIGATION),_(t,e,g.UI_NODE_TYPE_CONNECTED_FIELDS)),e.allowedSubnodeTypes.push(g.UI_NODE_TYPE_CONTACT))}},15318:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.insertSection=t.moveSection=t.deleteSection=t.getTargetChangesForChartNode=t.getTargetChangeForFacet=t.createFacetAnnotation=t.createSection=t.deleteDataField=t.insertDataField=t.insertChartReferenceFacet=t.changeUIPropertySection=void 0;const a=n(20576),o=n(46163),r=n(78263),i=n(95207),s=n(35586),l=n(90553),p=n(63587),c=n(52564),u=n(47770),m=n(83887),d=n(78957),y=n(98132),g=n(91882),f=n(23635),h=n(53107);function T(e,t,n,o,l){const c=[],u=o?.headerFacets?.top.annotation||{term:"com.sap.vocabularies.UI.v1.HeaderFacets",collection:[]},m=[];function d(n){const o=n.value;let l;const d=(0,i.getDefaultLabelAnnotation)(e,o,`${t}/${o}`);d?.top?.annotation?.value?.type===f.ExpressionType.String&&(l=d?.top?.annotation?.value?.String||""),l=l||o;const{targetChanges:y,targetPropertyValue:g}=(0,p.buildReferenceFacetForChartAnnotation)(e,n,t),h=new Set;(0,s.addFacetIds)(u.collection,h);const T=(0,s.generateId)([...h.values()],l),P={type:"com.sap.vocabularies.UI.v1.ReferenceFacet",propertyValues:[{name:r.FACETS_PROP_NAME_ID,value:{type:f.ExpressionType.String,String:T}},g]};m.push({annotation:u,changeType:a.ChangeType.Insert,pointer:`/collection/${u.collection.length}`}),u.collection.push(P),c.push(y)}for(const e of l)d(e);return o?.headerFacets?c.push({targetPath:t,changes:m}):c.push({targetPath:t,changes:[{annotation:u}]}),c}function P(e,t,n,o){const i=[],h=n.referencedAnnotation.top,T=h.annotation;"com.sap.vocabularies.UI.v1.FieldGroup"===T.term&&(T.record=T.record||{type:"com.sap.vocabularies.UI.v1.FieldGroupType",propertyValues:[{name:r.FIELD_GROUP_PROP_NAME_DATA,value:{type:"Collection",Collection:[]}}]});const{collection:P,pointer:E}=(0,y.getDataFieldsCollectionForSection)(T);P&&Array.isArray(P)||(0,s.throwError)("No array found in section");let v=[];for(const r of o){if(r.nodeType===f.UI_NODE_TYPE_FORM_FIELD)P.push((0,d.buildDataFieldForFormField)(e,t,r,h.target));else if(r.nodeType===f.UI_NODE_TYPE_COLUMN){if("Basic"===r.columnType)P.push((0,c.buildDataFieldForColumn)(e,r,h.target));else if("Rating"===r.columnType||"Progress"===r.columnType){const{annotationRecord:t,targetChanges:n}=(0,m.buildDataFieldForAnnotation)(e,r,h.target);P.push(t),i.push(n)}}else if(r.nodeType===f.UI_NODE_TYPE_ACTION)r.isDetermining=!1,P.push((0,l.buildDataFieldForAction)(r));else if(r.nodeType===f.UI_NODE_TYPE_CHART){const{dataField:t,targetChanges:n}=(0,p.buildDataFieldForChartAnnotation)(e,r,h.target);P.push(t),i.push(n)}else if(r.nodeType===f.UI_NODE_TYPE_CONTACT){const{dataField:t,targetChanges:n}=(0,u.buildDataFieldForContactAnnotation)(e,r,h.target);P.push(t),i.push(n)}else r.nodeType===f.UI_NODE_TYPE_NAVIGATION&&P.push((0,g.buildDataFieldForNavigation)(r));const o={annotation:T};n.referencedAnnotation.app?.length&&(o.changeType=a.ChangeType.Insert,o.pointer=`${E}/${P.length-1}`),v.push(o)}return n.referencedAnnotation.app?.length||(v=[{annotation:T}]),i.push({targetPath:h.target,changes:v}),i}function E(e,t,n){let a;a=n?t?.headerFacets?.top.annotation||{term:"com.sap.vocabularies.UI.v1.HeaderFacets",collection:[]}:t?.facets?.top.annotation||{term:"com.sap.vocabularies.UI.v1.Facets",collection:[]};const o=new Set;(0,s.addFacetIds)(a.collection,o);return{generatedId:(0,s.generateId)([...o.values()],e),facetsAnnotation:a}}function v(e,t,n,a,o){return a&&null!==(a.nodeType===f.UI_NODE_TYPE_HEADER_SECTIONS&&a).headerFacets&&null!==(a.nodeType===f.UI_NODE_TYPE_FORM&&a).facets?b(a,t,-1,o):(n.collection.push(t),{targetPath:e,changes:[{annotation:n}]})}function b(e,t,n,o){let i;const{facetsTop:l,facetsTopAnnotation:p}=(0,s.getFacets)(e);if(o){const e=o.annotationPath.split("@com.sap.vocabularies.UI.v1.Facets/")[1];i=(0,s.convertODataPath)(p,e);const a=o.facet.propertyValues.findIndex((e=>e.name===r.FACETS_PROP_NAME_FACETS));if(a<0)o.facet.propertyValues.push({name:r.FACETS_PROP_NAME_FACETS,value:{type:"Collection",Collection:[t]}}),i+="/propertyValues/"+(o.facet.propertyValues.length-1);else{const e=o.facet.propertyValues[a];n<0?(n=e.value.Collection.length,e.value.Collection.push(t)):e.value.Collection.splice(n,0,t),i+=`/propertyValues/${a}/value/Collection/${n}`}}else n<0?(n=p.collection.length,p.collection.push(t)):p.collection.splice(n,0,t),i=`collection/${n}`;const c={annotation:p};return e?.facets?.app?.length|e?.headerFacets?.app?.length&&(c.changeType=a.ChangeType.Insert,c.pointer=i),{targetPath:l.target,changes:[c]}}t.changeUIPropertySection=function(e,t,n,r,l){const p=[],c=l.get("label"),{facetsTop:u,facetsTopAnnotation:m}=(0,s.getFacets)(r);if(l.has("label")&&t.label.value!==c){const e=(0,i.changeRecordLabel)(n.facet,c);if(e.changeType){let n=t.annotationPath.split("@com.sap.vocabularies.UI.v1.Facets/")[1];n=n||t.annotationPath.split("@com.sap.vocabularies.UI.v1.HeaderFacets/")[1];const o={annotation:m,changeType:e.changeType,pointer:(0,s.convertODataPath)(m,n)+`/propertyValues/${e.propIndex}`};e.changeType===a.ChangeType.Update&&(o.pointer+="/value/String"),p.push({targetPath:u.target,changes:[o]})}}const d=(0,o.getUIPropertyDefinitions)(f.UI_NODE_TYPE_SECTION,t.sectionType);if(d.propertyNames.length&&l){const{valuePath:n,target:a,term:r,qualifier:i}=(0,f.resolvePath)(t.annotationPath);if(n.includes("Facets")){const s=(0,f.getAnnotationIndexKey)(a,r,i),c=e.annotationIndex[s];p.push(...(0,o.updateGenericUIProperties)({context:e,layeredAnnotation:c,uiPropertyDefinitions:d,currentUINodePath:n},t.uiProperties,l))}}const y=l.get("hidden"),g=l.get("hideByProperty");if(l.has("hidden")&&t.hidden.value!==y||l.has("hideByProperty")&&t.hideByProperty.value!==g){const e=(0,h.changeReferenceFacets)(t,n.facet,m,y,g);p.push({targetPath:u.target,changes:[e]})}return p},t.insertChartReferenceFacet=T,t.insertDataField=P,t.deleteDataField=function(e,t,n=1){const o=e.referencedAnnotation.top,r=o.annotation,{collection:i,pointer:l}=(0,y.getDataFieldsCollectionForSection)(r);(!i.length||i.length<=t)&&(0,s.throwError)(`Deletion index ${t} out of bounds`),i.splice(t,n);const p={annotation:r,changeType:a.ChangeType.Delete,pointer:l+`/${t}`};return n>1&&(p.pointer+="-"+(t+n-1)),{targetPath:o.target,changes:[p]}},t.createSection=function(e,t,n,a,o){const i=function(e,t,n,a){const o=["Table","FieldGroup","Collection","Identification"];a.length>1&&(0,s.throwError)("Creation of multiple sections not supported");const{sectionType:r,pathForTable:i}=a[0];r&&!o.includes(r)&&(0,s.throwError)(`Invalid section type ${r} for creation of Section`);"Identification"===r&&t&&(0,s.throwError)("No Identification section allowed in Group Section");const l=function(e,t,n){if(!n)return"";const a=e.metadataService.getMetadataElement(t+"/"+n);if(!a||!a.isEntityType||!a.isCollectionValued)return"";return a.structuredType}(e,n,i);"Table"!==r||l||(0,s.throwError)(`Invalid path ${i} for creation of Table Section`);return l}(e,o,t,n),l=[],{label:p,sectionType:c,pathForTable:u,isHeaderFacet:m}=n[0],{generatedId:d,facetsAnnotation:y}=E(p,a,m);let g,h;"Collection"===c?g={type:"com.sap.vocabularies.UI.v1.CollectionFacet",propertyValues:[{name:r.FACETS_PROP_NAME_LABEL,value:{type:"String",String:p}},{name:r.FACETS_PROP_NAME_ID,value:{type:"String",String:d}},{name:r.FACETS_PROP_NAME_FACETS,value:{type:"Collection",Collection:[]}}]}:({newFacet:g,targetChange:h}="Identification"===c?function(e,t,n,a){let o;const i={type:"com.sap.vocabularies.UI.v1.ReferenceFacet",propertyValues:[{name:r.FACETS_PROP_NAME_LABEL,value:{type:"String",String:t}},{name:r.FACETS_PROP_NAME_ID,value:{type:"String",String:n}},{name:r.FACETS_PROP_NAME_TARGET,value:{type:"AnnotationPath",AnnotationPath:"@com.sap.vocabularies.UI.v1.Identification"}}]},s=(0,f.getAnnotationIndexKey)(a,"com.sap.vocabularies.UI.v1.Identification");if(!e.annotationIndex[s]?.top){o={targetPath:a,changes:[{annotation:{term:"com.sap.vocabularies.UI.v1.Identification",collection:[]}}]}}return{newFacet:i,targetChange:o}}(e,p,d,t):function(e,t,n,a,o,i){const l="Table"===o?"com.sap.vocabularies.UI.v1.LineItem":"com.sap.vocabularies.UI.v1.FieldGroup",p=Object.keys(e.annotationIndex).filter((e=>e.startsWith(`${a}/@${l}#`))).map((e=>e.split("#").pop())),c=(0,s.generateId)(p,t);let u,m;"Table"===o?(u={term:"com.sap.vocabularies.UI.v1.LineItem",qualifier:c,collection:[]},m=`${i}/@com.sap.vocabularies.UI.v1.LineItem#${c}`):(u={term:"com.sap.vocabularies.UI.v1.FieldGroup",qualifier:c,record:{type:"com.sap.vocabularies.UI.v1.FieldGroupType",propertyValues:[{name:r.FIELD_GROUP_PROP_NAME_DATA,value:{type:"Collection",Collection:[]}}]}},m=`@com.sap.vocabularies.UI.v1.FieldGroup#${c}`);const d={targetPath:a,changes:[{annotation:u}]};return{newFacet:{type:"com.sap.vocabularies.UI.v1.ReferenceFacet",propertyValues:[{name:r.FACETS_PROP_NAME_LABEL,value:{type:"String",String:t}},{name:r.FACETS_PROP_NAME_ID,value:{type:"String",String:n}},{name:r.FACETS_PROP_NAME_TARGET,value:{type:"AnnotationPath",AnnotationPath:m}}]},targetChange:d}}(e,p,d,i||t,c,u)),h&&l.push(h);const T=v(t,g,y,a,o);return l.unshift(T),l},t.createFacetAnnotation=E,t.getTargetChangeForFacet=v,t.getTargetChangesForChartNode=function(e,t,n,a,o){const r=o[0].nodeSubType;return"Column"===r&&(t||(0,s.throwError)(`Parent section node is needed for node creation (node type "${o[0]?.nodeType}")`),"Collection"===t.sectionType&&(0,s.throwError)(`Parent ${t.nodeId} is GroupSection: only Sections can be added`)),"HeaderSection"===r?T(e,a,0,n,o):"Column"===r?P(e,t,n,o):void 0},t.deleteSection=function(e,t,n,o){const{facetsTop:r,facetsTopAnnotation:i}=(0,s.getFacets)(e);let l;if(o){const e=o.facet.propertyValues.findIndex((e=>"Facets"===e.name)),a=o.facet.propertyValues[e],r=o.annotationPath.split("@com.sap.vocabularies.UI.v1.Facets/")[1];l=(0,s.convertODataPath)(i,r)+`/propertyValues/${e}/value/Collection/${t}`,a.value.Collection.splice(t,n)}else i.collection.splice(t,n),l=`/collection/${t}`;n>1&&(l+="-"+(t+n-1));const p={annotation:i};return e.facets?.app?.length|e.headerFacets?.app?.length&&(p.pointer=l,p.changeType=a.ChangeType.Delete),{targetPath:r.target,changes:[p]}},t.moveSection=function(e,t,n,o,r,i){const{facetsTop:l,facetsTopAnnotation:p}=(0,s.getFacets)(e);let c,u,m,d,y,g;if(r){m=r.subnodes;const e=r.facet.propertyValues.findIndex((e=>"Facets"===e.name)),n=r.facet.propertyValues[e],a=r.annotationPath.split("@com.sap.vocabularies.UI.v1.Facets/")[1],o=(0,s.convertODataPath)(p,a)+`/propertyValues/${e}/value/Collection`;y=n.value.Collection,c=`${o}/${t}`}else m=e.subnodes,y=p.collection,c=`/collection/${t}`;if(n>1&&(c+="-"+(t+n-1)),i){d=i.subnodes;const e=i.facet.propertyValues.findIndex((e=>"Facets"===e.name)),t=i.facet.propertyValues[e],n=i.annotationPath.split("@com.sap.vocabularies.UI.v1.Facets/")[1],a=(0,s.convertODataPath)(p,n)+`/propertyValues/${e}/value/Collection`;g=t.value.Collection,u=`${a}/${o}`}else d=e.subnodes,g=p.collection,u=`/collection/${o}`;return function(e,t,n,o){let r,i=!1;const l=t.subNodes.findIndex((e=>e.nodeId[e.nodeId.length-1]===t.index));let p=n.subNodes.findIndex((e=>e.nodeId[e.nodeId.length-1]===n.index));-1===p&&(p=n.subNodes.length);if(t.collection===n.collection)(0,s.moveInCollection)(t.collection,l,p,o),(0,s.moveInCollection)(t.subNodes,l,p,o);else{if(r=t.collection.slice(l,l+o),t.parentUINodeSection&&!n.parentUINodeSection&&1===r?.length){const e=(r[0].annotations||[]).findIndex((e=>"com.sap.vocabularies.UI.v1.PartOfPreview"===e.term));e>=0&&(r[0].annotations.splice(e,1),i=!0)}t.collection.splice(l,o),n.collection.splice(p,0,...r);const e=t.subNodes.slice(l,l+o);t.subNodes.splice(l,o),n.subNodes.splice(p,0,...e)}const c=e.annotation;if(i){const o={annotation:c,changeType:a.ChangeType.Delete,pointer:t.pointer},i={annotation:c,changeType:a.ChangeType.Insert,pointer:n.pointer,content:{type:a.MOD_TYPE_RECORD,value:r[0]}};return{targetPath:e.target,changes:[o,i]}}{const o={annotation:c,changeType:a.ChangeType.Move,pointer:n.pointer,moveFromPointer:t.pointer};return{targetPath:e.target,changes:[o]}}}(l,{collection:y,index:t,parentUINodeSection:r,pointer:c,subNodes:m},{collection:g,index:o,parentUINodeSection:i,pointer:u,subNodes:d},n)},t.insertSection=b},73219:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDeleteChangesForViews=t.convertUiNodeInternalViews=t.loadUiNodeInternalViews=void 0;const a=n(23635),o=n(35586),r=n(25769),i=n(63370);t.loadUiNodeInternalViews=function(e,t,n,s){const l={nodeId:s,annotationPath:"",tooComplex:!1,nodeType:a.UI_NODE_TYPE_VIEWS,location:null,subnodes:[]},p=JSON.stringify(s);let c,u=0;for(const[m,d]of e.entries()){const e=[...s,m];let y;const g=(0,a.resolvePath)(d);if(!d&&t[m].startsWith(o.CUSTOM_VIEW_PREFIX)){const n={nodeId:e,annotationPath:t[m]};y=(0,a.buildTooComplexNode)(a.TooComplexReason.CustomViewInMultiViewLR,null,"",n)}else if("com.sap.vocabularies.UI.v1.LineItem"===g.term){y=(0,r.loadUiNodeInternalList)(n,d,t[m],e,{isMultiViewLR:!0});(0,a.resolvePath)(d).target===n.pageBase.entityTypeName&&(c=[...s,m],u++)}else if("com.sap.vocabularies.UI.v1.Chart"===g.term){const a=t[m],o={isMultiViewLR:!0};y=(0,i.loadUiNodeInternalAnalyticalChart)(d,a,n,e,o)}else(0,o.throwError)(`Unsupported term '${g.term}' in views configuration index ${m}`);y.allowedParentNodes={},y.allowedParentNodes[p]=!0,l.subnodes.push(y)}return 1===u&&(n.suppressTableViewDeletionNodeId=c),l},t.convertUiNodeInternalViews=function(e,t){const n=[];(e.subnodes||[]).forEach((e=>{if((0,a.isTooComplex)(e))return void n.push(e);const o=(0,a.resolvePath)(e.annotationPath).target;switch(e.nodeType){case a.UI_NODE_TYPE_LIST:n.push((0,r.convertUiNodeInternalList)(e,t));break;case a.UI_NODE_TYPE_ANALYTICAL_CHART:n.push((0,i.convertUiNodeInternalAnalyticalChart)(e,o,t))}}));const s={nodeId:e.nodeId,annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,allowedSubnodeTypes:e.allowedSubnodeTypes,tooComplex:!1,nodeType:e.nodeType,location:e.location,subnodes:n};return s.allowedSubnodeTypes=[a.UI_NODE_TYPE_LIST],(0,o.getAnalyticalChartSupportedMultiView)(t).supported&&s.allowedSubnodeTypes.push(a.UI_NODE_TYPE_ANALYTICAL_CHART),s},t.getDeleteChangesForViews=function(e,t,n=1){const r=new Map,i=[],{configuredPaths:s,annotationPaths:l}=(0,o.getRootNodeConfig)(e,a.UI_NODE_TYPE_VIEWS),p=[...s];p.splice(t,n);const c=[...l];c.splice(t,n),0===c.length&&(0,o.throwError)("Deletion of last view(s) not supported - at least single view needs to remain");const u=[...e.suppressTableViewDeletionNodeId||[]].pop();if(void 0!==u&&t<=u&&u<=t+n-1&&(0,o.throwError)("Deletion of view(s) not supported - no remaining table view on base entity set"),1===p.length){r.set(a.UI_NODE_TYPE_VIEWS,null);const t=p[0],n=c[0],s=(0,a.resolvePath)(t);if(s.qualifier)if("com.sap.vocabularies.UI.v1.SelectionVariant"===s.term){const{target:t}=(0,a.resolvePath)(n),l=(0,a.getExistingQualifiers)(e.annotationIndex,t,"com.sap.vocabularies.UI.v1.SelectionPresentationVariant"),p=(0,o.generateIdAndIndex)(l,"tableView",!0),c=`@${s.term}`+(s.qualifier?`#${s.qualifier}`:""),u=(0,o.createSpvRecord)({svAnnotationPath:c}),m={annotation:{term:"com.sap.vocabularies.UI.v1.SelectionPresentationVariant",qualifier:p.id,record:u}};i.push({targetPath:t,changes:[m]}),r.set(a.UI_NODE_TYPE_LIST,`/${t}/@com.sap.vocabularies.UI.v1.SelectionPresentationVariant#${p.id}`)}else"com.sap.vocabularies.UI.v1.SelectionPresentationVariant"===s.term&&r.set(a.UI_NODE_TYPE_LIST,t);else;}else r.set(a.UI_NODE_TYPE_VIEWS,p);return{configChanges:r,targetChanges:i}}},69939:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataPointCreationCallback=t.changeUIPropertyVisualFilter=t.convertUiNodeInternalVisualFilter=t.loadUiNodeInternalVisualFilter=t.createUINodeVisualFilter=t.checkCreationParametersVisualFilter=t.getCreateVisualFilterNodeOptions=void 0;const a=n(46163),o=n(78263),r=n(20576),i=n(95207),s=n(35586),l=n(63370),p=n(70704),c=n(25769),u=n(23635),m="com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis1";function d(e,t,n,a,r=!1){if(!a)return;const i=t.valueList.top.annotation,l=t.valueList.top.fileUri,{entityContainerMdElement:p,entitySets:c}=(0,s.getEntityContainerData)(e.metadataService);if(!c.includes(n)){const{propertyValues:e,propertyValuesOrigins:n}=i.record,a=e.findIndex((e=>e.name===o.VALUE_LIST_PROP_NAME_COLLECTION_PATH));return(0,u.buildTooComplexNode)(u.TooComplexReason.UnsupportedValue,n[a],l,t)}const m=`${p.name}/${n}`,d=e.metadataService.getMetadataElement(m)?.structuredType,y=r?"com.sap.vocabularies.UI.v1.SelectionVariant":"com.sap.vocabularies.UI.v1.PresentationVariant";let g=(0,u.getAnnotationIndexKey)(m,y,a),f=e.annotationIndex[g];if(f||(g=(0,u.getAnnotationIndexKey)(d,y,a),f=e.annotationIndex[g]),!f?.top?.annotation){const e=r?o.VALUE_LIST_PROP_NAME_SELECTION_VARIANT_QUALIFIER:o.VALUE_LIST_PROP_NAME_PRESENTATION_VARIANT_QUALIFIER,{propertyValues:n,propertyValuesOrigins:a}=i.record,s=n.findIndex((t=>t.name===e));return(0,u.buildTooComplexNode)(u.TooComplexReason.UnsupportedValue,a[s],l,t)}return f}function y(e,t){const{digits:n,scaleFactor:a}=u.uiPropertyNames.numberFormatting,o=e[n],r=e[a];(0,u.isTooComplex)(o)||(e[n]=t),(0,u.isTooComplex)(r)||(e[a]=t)}function g(e,t){const{fileUri:n,range:a}=t,o={annotation:{term:"com.sap.vocabularies.UI.v1.SelectionVariant",record:{propertyValues:[{name:"SelectOptions",value:{type:u.ExpressionType.Collection,Collection:[]}}],propertyValuesOrigins:[a]},origin:a},fileUri:n,target:e};return{app:[o],base:[],top:o,isSplit:!1,readonly:!1}}function f(e,t){const{target:n,annotation:a,fileUri:r}=t.top,i=a.record?.propertyValues.find((e=>e.name===o.CHART_PROP_NAME_MEASURES));if(i?.value.type===u.ExpressionType.Collection&&i?.value.Collection.length){const t=i.value.Collection[0].PropertyPath,a=i.value.collectionOrigins[0];return{measureMdElement:e.metadataService.getMetadataElement(`${n}/${t}`),measureLocation:{fileUri:r,range:a}}}const s=a.record?.propertyValues.find((e=>e.name===o.CHART_PROP_NAME_DYNAMIC_MEASURES)),l=s?.value;if(l?.type!==u.ExpressionType.Collection||!l.Collection.length)return{measureMdElement:null};const p=l.Collection[0].AnnotationPath,{term:c,qualifier:m}=(0,u.resolveRelativeAnnotationPath)(p||""),d=(0,u.getAnnotationIndexKey)(n,c,m),y=e.annotationIndex[d];if(!y?.top.annotation.record)return{measureMdElement:null};const g=y.top.annotation.record,f=g.propertyValues.findIndex((e=>e.name===o.AGGREGATED_PROPERTY_PROP_NAME_AGGREGATABLE_PROPERTY));if(f<0)return{measureMdElement:null};const h=g.propertyValues[f];if(h.value?.type===u.ExpressionType.PropertyPath&&h.value.PropertyPath){const t=h.value.PropertyPath,a=g.propertyValuesOrigins[f];return{measureMdElement:e.metadataService.getMetadataElement(`${n}/${t}`),measureLocation:{fileUri:y.top.fileUri,range:a},annotationPath:p}}return{measureMdElement:null}}t.getCreateVisualFilterNodeOptions=function(e,t,n){const o=e.pageBase.entityTypeName;let r=(0,s.getAnalyticalChartSupportedMultiView)(e,!0);(0,s.throwIf)(!r.supported,"Creation of Analytical Chart not supported");const i=e.metadataService.getMetadataElement(o);(0,s.throwIf)(!i||!i.isEntityType,`Path could not be resolved to EntityName: ${o}`);const{filterFields:l,filterFieldDataTypes:p}=(0,s.getFilterFieldsForVisualFilter)(e,r,t),c=n?.[u.INPUT_PARAM_FILTER_FIELD_DATA_TYPE]||"";c&&"string"==typeof c&&(r=function(e,t,n){const a=new Set,o=e=>{Object.keys(e).forEach((t=>{const n=t.split("/")[0];a.has(n)||delete e[t]}))},r=e.metadataService,i=[],l={};for(const e of t.entitySets){const o=t.entityTypeForEntitySet[e.value],p=t.dimensions[e.value].filter((e=>{const t=r.getMetadataElement(`${o}/${e.value}`),a=(0,s.getDataTypeFromMdElement)(t,r);return n===a}));p?.length&&(a.add(e.value),i.push(e),l[e.value]=p)}const p={...t,entitySets:i,dimensions:l};return o(p.measures),o(p.dynamicMeasures),o(p.aggregatableProperties),o(p.propertyAggregationMethods),p}(e,r,c));const m=(0,a.getUIPropertyDefinitions)(u.UI_NODE_TYPE_ANALYTICAL_CHART).propertyMap[u.uiPropertyNames.analyticalChart.type],d=m.allowedValues.filter((e=>"Bar"===e.value));return c!==u.ExpressionType.Date&&c!==u.ExpressionType.DateTimeOffset||d.push(...m.allowedValues.filter((e=>"Line"===e.value))),{nodeType:u.UI_NODE_TYPE_VISUAL_FILTER,filterFields:l,filterFieldDataTypes:p,allowedChartTypes:d,entitySets:r.entitySets,dimensions:r.dimensions,measures:r.measures,dynamicMeasures:r.dynamicMeasures,aggregatableProperties:r.aggregatableProperties,propertyAggregationMethods:r.propertyAggregationMethods}},t.checkCreationParametersVisualFilter=function(e,t,n){const a=t.entitySet;n.entitySets.find((e=>e.value===a))||(0,s.throwError)(`Not supported: creation of Visual Filter for entity type ${a} (not analytics enabled)`),n.filterFields.find((e=>e.value===t.filterField))||(0,s.throwError)(`Not supported: creation of Visual Filter for field ${t.filterField}`),(0,l.checkCreationParametersAnalyticalMeasure)(a,t,n);const o=n.dimensions[a]||[];t.dimension&&o.find((e=>e.value===t.dimension))||(0,s.throwError)(`Unsupported dimension ${t.dimension||""} for visual filter creation (entity type ${a})`);const r=n.filterFieldDataTypes[t.filterField],i=(0,s.getEntityTypeNameByEntitySet)(e.metadataService,t.entitySet),p=e.metadataService.getMetadataElement(`${i}/${t.dimension}`),c=(0,s.getDataTypeFromMdElement)(p,e.metadataService);c!==r&&(0,s.throwError)(`Dimension data type "${c}" not suitable for filter field with data type "${r}")`)},t.createUINodeVisualFilter=function(e,t,n){const a=[],o=[],r=(0,s.getEntityContainerData)(e.metadataService).entityContainerMdElement.name,{entitySet:p,dimension:c,filterField:m}=n,d=`${r}/${p}`,y=e.metadataService.getMetadataElement(d).structuredType,{changes:g,dynamicMeasurePath:f}=(0,l.createDynamicMeasure)(e,y,n);o.push(...g);let h=(0,u.getExistingQualifiers)(e.annotationIndex,y,"com.sap.vocabularies.UI.v1.Chart");const T=(0,s.generateId)(h,"visualFilter",!0),P=(0,l.createChartRecord)(n,f);o.push({annotation:{term:"com.sap.vocabularies.UI.v1.Chart",qualifier:T,record:P}});const E=`@com.sap.vocabularies.UI.v1.Chart#${T}`,v=(0,i.changeToNewVariantPV)(e,E,y);o.push(...v.changes),a.push({targetPath:y,changes:o});const b=(0,u.resolveMetadataElement)(e.metadataService,`${t}/${m}`,!0).path,_=(0,i.getAnnotationRecordForNewAnnotation)(p,c,[],m,v.qualifierVariant);h=(0,u.getExistingQualifiers)(e.annotationIndex,b,"com.sap.vocabularies.Common.v1.ValueList");const A=(0,s.generateId)(h,"visualFilter",!0),C={term:"com.sap.vocabularies.Common.v1.ValueList",qualifier:A,record:_};a.push({targetPath:b,changes:[{annotation:C}]});const N=new Map,I=e.pageContext.configuration.get(u.UI_NODE_TYPE_VISUAL_FILTERS)||[],S=`${m}/@com.sap.vocabularies.Common.v1.ValueList#${A}`;return N.set(u.UI_NODE_TYPE_VISUAL_FILTERS,[...I,S]),{targetChanges:a,configChanges:N}},t.loadUiNodeInternalVisualFilter=function(e,t,n){const r=e.pageBase.entityTypeName,{target:l,term:p,qualifier:c}=(0,u.resolvePath)(n),m=(0,u.resolveMetadataElement)(e.metadataService,`${r}/${l}`,!0);if(!m)return(0,u.buildTooComplexNode)(u.TooComplexReason.NoValidPath,(0,a.getDummyRange)(),"",{nodeId:t,annotationPath:n},[],l);const y=(0,u.getAnnotationIndexKey)(m.path,p,c),g=e.annotationIndex[y],f={nodeId:t,annotationPath:`/${y}`};(0,s.throwIf)(!g?.top?.annotation,`Annotation not found for visual filter ('${n}'`),(0,s.throwIf)("com.sap.vocabularies.Common.v1.ValueList"!==p,`Wrong annotation '${p}' for visual filter on '${l}'`);const h=g.top.annotation;if((0,s.getFieldsWithRangeRestrictions)(e,r).has(l))return(0,u.buildTooComplexNode)(u.TooComplexReason.UnsupportedPath,h.origin,g.top.fileUri,f);const{tooComplex:T,valueListContent:P,localDataProperty:E}=(0,i.resolveValueListAnnotation)(e,g,!0);if(T)return{...T,...f};const{collectionPath:v,valueListProperty:b,presentationVariantQualifier:_,selectionVariantQualifier:A}=P,C=function(e){const{context:t,entityTypeName:n,localDataProperty:a,valueList:r,nodeCore:i}=e;if(!t.metadataService.getMetadataElement(`${n}/${a}`)){const e=r.top.annotation.record.propertyValues.find((e=>e.name===o.VALUE_LIST_PROP_NAME_PARAMETERS)).value.Collection[0],{propertyValues:t,propertyValuesOrigins:n}=e,s=t.findIndex((e=>e.name===o.VALUE_LIST_PROP_NAME_LOCAL_DATA_PROPERTY));return(0,u.buildTooComplexNode)(u.TooComplexReason.NoValidPath,n[s],r.top.fileUri,i,[],a)}}({context:e,entityTypeName:r,localDataProperty:E,nodeCore:f,valueList:g}),N=function(e){const{nodeCore:t,valueList:n,valueListContent:a}=e;if(a.parameterCount>1){const e=n.top.annotation,{propertyValues:a,propertyValuesOrigins:r}=e.record,i=a.findIndex((e=>e.name===o.VALUE_LIST_PROP_NAME_PARAMETERS));return(0,u.buildTooComplexNode)(u.TooComplexReason.UnsupportedProperty,r[i],n.top.fileUri,t)}}({nodeCore:f,valueList:g,valueListContent:P}),{entityContainerMdElement:I,entitySets:S}=(0,s.getEntityContainerData)(e.metadataService),x=`${I.name}/${v}`,O=e.metadataService.getMetadataElement(x)?.structuredType||"",D=function(e){const{entitySet:t,nodeCore:n,valueList:a,entitySets:r}=e;if(!r.includes(t)){const e=a.top.annotation,{propertyValues:t,propertyValuesOrigins:r}=e.record,i=t.findIndex((e=>e.name===o.VALUE_LIST_PROP_NAME_COLLECTION_PATH));return(0,u.buildTooComplexNode)(u.TooComplexReason.UnsupportedValue,r[i],a.top.fileUri,n)}}({entitySet:v,entitySets:S,nodeCore:f,valueList:g}),R=function(e){const{context:t,nodeCore:n,valueList:a,valueListContent:r,pvTargetEntityName:i}=e,l=a.top.annotation,p=a.top.fileUri,c=r.valueListProperty,{groupablePropNames:m}=(0,s.getApplySupportedInfo)(t,i);if(!m){const{propertyValues:e,propertyValuesOrigins:t}=l.record,a=e.findIndex((e=>e.name===o.VALUE_LIST_PROP_NAME_COLLECTION_PATH));return(0,u.buildTooComplexNode)(u.TooComplexReason.UnsupportedValue,t[a],p,n)}if(!m.includes(c)){const e=l.record.propertyValues.find((e=>e.name===o.VALUE_LIST_PROP_NAME_PARAMETERS)).value.Collection[0],{propertyValues:t,propertyValuesOrigins:a}=e,r=t.findIndex((e=>e.name===o.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY));return(0,u.buildTooComplexNode)(u.TooComplexReason.UnsupportedValue,a[r],p,n,[],c)}}({context:e,pvTargetEntityName:O,nodeCore:f,valueList:g,valueListContent:P}),M=[C,N,D,R].find((e=>!!e));if(M)return M;const V={...f,tooComplex:!1,location:{fileUri:g.top.fileUri,range:h.origin},nodeType:u.UI_NODE_TYPE_VISUAL_FILTER,filterProperty:l,valueList:g,valueListProperty:b,pvTargetEntityName:O,presentationVariant:void 0,chartTargetEntityName:void 0,chartAnnotation:void 0,additionalMeasureLocations:void 0,subnodes:[]},U=d(e,V,v,_);if((0,u.isTooComplex)(U))return U;V.presentationVariant=U;const F=d(e,V,v,A,!0);if(F){if((0,u.isTooComplex)(F))return F;V.selectionVariant=F}const{chart:w,chartTargetEntityName:L}=function(e,t,n){const a=(0,s.findVisualizationRelativePath)(e,t.top,"com.sap.vocabularies.UI.v1.Chart"),o=(0,u.resolveRelativeAnnotationPath)(a),r=n+(o.relativePath?`/${o.relativePath}`:""),i=(0,u.resolveMetadataElement)(e.metadataService,r)?.name||"",l=(0,u.getAnnotationIndexKey)(i,o.term,o.qualifier);return{chart:e.annotationIndex[l],chartTargetEntityName:i}}(e,U,O);if(!w?.top?.annotation){const{annotation:e,fileUri:t}=U.top;return(0,u.buildTooComplexNode)(u.TooComplexReason.NoValidAnnotationPath,e.origin,t,f)}return V.chartTargetEntityName=L,V.chartAnnotation=w,V.additionalMeasureLocations=function(e,t){const n=t.top.annotation.record?.propertyValues.find((e=>e.name===o.CHART_PROP_NAME_MEASURE_ATTRIBUTES))?.value;if(!n||n.type!==u.ExpressionType.Collection||!n.Collection.length)return[];const a=[],{target:r,fileUri:i}=t.top,s=n.Collection[0],l=s.propertyValues?.findIndex((e=>"Measure"===e.name));l>-1&&a.push({range:s.propertyValuesOrigins[l],fileUri:i});const p=s.propertyValues?.find((e=>"DataPoint"===e.name))?.value,c=p?.type===u.ExpressionType.AnnotationPath?p.AnnotationPath:"";if(!c)return a;const{term:m,qualifier:d}=(0,u.resolveRelativeAnnotationPath)(c),y=(0,u.getAnnotationIndexKey)(r,m,d),g=e.annotationIndex[y];if(!g)return a;const f=g.top.fileUri,h=g.top.annotation?.record,T=h?.propertyValues.findIndex((e=>"Value"===e.name));T>-1&&a.push({range:h.propertyValuesOrigins[T],fileUri:f});return a}(e,w),V},t.convertUiNodeInternalVisualFilter=function(e,t){const n={tooComplex:!1,type:u.UI_PROP_TYPE_STRING,value:u.PresentationVariantPathKind.PV,isLanguageDependent:!1},r={tooComplex:!1,type:u.UI_PROP_TYPE_STRING,value:u.SelectionVariantPathKind.SV,isLanguageDependent:!1},{measureMdElement:d,measureLocation:h}=f(t,e.chartAnnotation),T=(0,s.getDataType)(d,t.metadataService),P={tooComplex:!1,type:u.UI_PROP_TYPE_STRING,value:e.filterProperty,isLanguageDependent:!1},E={nodeId:e.nodeId,annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,tooComplex:!1,nodeType:e.nodeType,location:e.location,path:P,pvPathKind:n,svPathKind:r,dataType:T,subnodes:[]},v=(0,a.getUIPropertyDefinitions)(u.UI_NODE_TYPE_VISUAL_FILTER),b={context:t,uiPropertyDefinitions:v,layeredAnnotation:e.chartAnnotation,currentUINodePath:"",includeNonApplicableProperties:(0,s.isSameNodeId)(t.includeNonApplicablePropertiesForNode,e.nodeId)};E.uiProperties=(0,a.buildGenericUIProperties)(b,(0,a.getPropValueMap)(E),new Map([[a.AnnotationRole.configuredAnnotation,e.presentationVariant],[a.AnnotationRole.unitsCurrencies,(0,a.getUnitsCurrenciesDummyAnnotation)(d?.path||"",h)],[a.AnnotationRole.svAnnotation,e.selectionVariant||g(t.pageBase.entityTypeName,e.location)]])),function(e,t){const n=t.uiProperties[u.uiPropertyNames.analyticalChart.type],a=(0,u.isTooComplex)(t.path)?"":t.path.value,o=e.metadataService.getMetadataElement(`${e.pageBase.entityTypeName}/${a}`),r=(0,s.getDataTypeFromMdElement)(o,e.metadataService),i=[u.ExpressionType.Date,u.ExpressionType.DateTimeOffset];if(!((0,u.isTooComplex)(n)||n.type!==u.UI_PROP_TYPE_ENUM||(n.readonly=!0,n.readonlyTooltip=p.i18n.t("ReadonlyTooltipVisualFilterChartType"),n.allowedValues=n.allowedValues.filter((e=>["Bar","Line",u.ENUM_VALUE_NONE].includes(e.value))),n.value===u.ENUM_VALUE_NONE||"Bar"===n.value||"Line"===n.value&&i.includes(r)))){const{range:e,fileUri:a}=n.locations[0],o=(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedEnumValue,e,a);t.uiProperties[u.uiPropertyNames.analyticalChart.type]=o}}(t,E);const{customAggregatePropNames:_}=(0,s.getApplySupportedInfo)(t,e.chartTargetEntityName);let{measures:A,dimensions:C}=(0,i.convertMeasuresAndDimensions)(E.uiProperties,e.chartAnnotation.top.annotation.qualifier,_,t,e.chartTargetEntityName);if(!(0,u.isTooComplex)(A)&&A)if(A=(0,s.filter)(A,u.uiPropertyNames.analyticalChart.measuresColumns.showAsDefault,[!0]),1!==A.rows?.length){const{range:e,fileUri:t}=A.locations.pop();A=(0,u.buildTooComplex)(u.TooComplexReason.CollectionWithSingleValueExpected,e,t)}else!function(e,t){const n=t.additionalMeasureLocations;if(!n?.length||!e||(0,u.isTooComplex)(e)||1!==e.rows.length||(0,u.isTooComplex)(e.rows[0].data))return;const{aggregatableProperty:a}=u.uiPropertyNames.analyticalChart.measuresColumns,o=(0,s.getCellForColumn)(e.rows[0],a);if((0,u.isTooComplex)(o)){const e=o.tooComplexLocations[0].reason,t=n.map((t=>({...t,reason:e})));o.tooComplexLocations.push(...t)}}(A,e),delete A.locations;if(!(0,u.isTooComplex)(C)&&C&&(C=function(e,t){if(1!==(e=(0,s.filter)(e,u.uiPropertyNames.analyticalChart.dimensionsColumns.showAsDefault,[!0])).rows?.length){const{range:t,fileUri:n}=e.locations.pop();e=(0,u.buildTooComplex)(u.TooComplexReason.CollectionWithSingleValueExpected,t,n)}else{const n=e.rows[0],a=u.uiPropertyNames.analyticalChart.dimensionsColumns.property,o=(0,s.getCellForColumn)(n,a);if(!(0,u.isTooComplex)(o)&&o.value!==t.valueListProperty){const e=n.data,{range:t,fileUri:o}=e.location;e.cells[a]=(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedValue,t,o)}}return e}(C,e),delete C.locations),E.uiProperties[i.UI_PROP_NAME_MEASURES]=A,E.uiProperties[i.UI_PROP_NAME_DIMENSIONS]=C,!t.omitConversionToExternalPropDef){[i.UI_PROP_NAME_AVAILABLE_MEASURES,i.UI_PROP_NAME_DEFAULT_MEASURES,i.UI_PROP_NAME_AVAILABLE_DIMENSIONS,i.UI_PROP_NAME_DEFAULT_DIMENSIONS,i.UI_PROP_NAME_AVAILABLE_DYNAMIC_MEASURES,i.UI_PROP_NAME_DEFAULT_DYNAMIC_MEASURES,i.UI_PROP_NAME_DYNAMIC_MEASURES].forEach((e=>delete E.uiProperties[e]));const e=`${u.UI_PROP_NAME_PREFIX_SORTING}${u.PresentationVariantPathKind.PV}`;(0,s.mergeTableColumnsDynamicProp)(e,E.uiProperties),function(e){const t=`${u.UI_PROP_NAME_PREFIX_SORTING}${u.PresentationVariantPathKind.PV}`,n=e[t];if(!n||(0,u.isTooComplex)(n))return;if(function(e){if((0,u.isTooComplex)(e))return!0;return"Line"===e.value||e.value===u.ENUM_VALUE_NONE&&"Line"===e.baseValue?.value}(e[u.uiPropertyNames.analyticalChart.type]))return void delete e[t];if(n.rows?.length>1){const{range:a,fileUri:o}=n.locations.pop();return void(e[t]=(0,u.buildTooComplex)(u.TooComplexReason.CollectionWithSingleValueExpected,a,o))}const a=function(e){let t="";const n=e[u.uiPropertyNames.analyticalChart.measures];if(n&&!(0,u.isTooComplex)(n)&&n&&1===n.rows?.length){const e=(0,s.getCellValueForColumn)(n.rows[0],u.uiPropertyNames.analyticalChart.measuresColumns.property);e&&!(0,u.isTooComplex)(e)&&(t=e)}return t}(e),o=n.columns.find((e=>e.name===s.PROP_NAME_PROPERTY));if(0===n.rows?.length){const r=o.allowedValues.find((e=>(e.text||e.value)===a));if(r)o.allowedValues=[r];else{const{range:a,fileUri:o}=n.locations.pop();e[t]=(0,u.buildTooComplex)(u.TooComplexReason.NoValidPropertyCombination,a,o)}return}o.allowedValues=[],delete n.locations;const r=(0,s.getCellForColumn)(n.rows[0],s.PROP_NAME_PROPERTY);if(!r||(0,u.isTooComplex)(r))return;const i=r.allowedValues[0].text||r.allowedValues[0].value;if(!a||i===a)return;const{range:l,fileUri:p}=r.location||n.rows[0].data.location;n.rows[0].data.cells[s.PROP_NAME_PROPERTY]=(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedValue,l,p)}(E.uiProperties)}return(0,l.addChartSortingNewRowDefaults)(u.PresentationVariantPathKind.PV,E.uiProperties),(0,c.addListSelectionNewRowDefaults)(u.SelectionVariantPathKind.SV,v,E.uiProperties,e.filterProperty),function(e,t,n){const{digits:a,scaleFactor:r}=u.uiPropertyNames.numberFormatting,i=t[a],l=t[r];if((0,u.isTooComplex)(i)&&(0,u.isTooComplex)(l))return;const p=t.measures;if((0,u.isTooComplex)(p))return;const c=(0,s.getCellForColumn)(p.rows[0],"aggregatableProperty");if((0,u.isTooComplex)(c))return y(t,c);const d=function(e,t){const n=t.chartAnnotation?.top.annotation?.record,a=n?.propertyValues.findIndex((e=>e.name===o.CHART_PROP_NAME_MEASURE_ATTRIBUTES))||-1;if(a<0)return null;const r=t.chartAnnotation.top.fileUri,i=n?.propertyValues[a].value;if(!i?.Collection?.length)return null;if(i?.Collection?.length>1){const t=n?.propertyValuesOrigins[a];return y(e,(0,u.buildTooComplex)(u.TooComplexReason.CollectionWithSingleValueExpected,t,r)),null}const s=i?.Collection?.[0],l=s.propertyValues.findIndex((e=>"Role"===e.name));if(l>=0){if(s.propertyValues[l].value.EnumMember!==m){const t=s.propertyValuesOrigins[l];return y(e,(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedEnumValue,t,r)),null}}const p=n?.propertyValues.find((e=>e.name===o.CHART_PROP_NAME_MEASURES)),c=p?.value?.Collection?.[0]?.PropertyPath;if(c){const t=s.propertyValues.findIndex((e=>"Measure"===e.name));if(t<0){const t=i?.collectionOrigins[0];return y(e,(0,u.buildTooComplex)(u.TooComplexReason.MissingProperty,t,r)),null}if(s.propertyValues[t].value.PropertyPath!==c){const n=s.propertyValuesOrigins[t];return y(e,(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedValue,n,r)),null}return s}const d=n?.propertyValues.find((e=>e.name===o.CHART_PROP_NAME_DYNAMIC_MEASURES)),g=d.value?.Collection?.[0]?.AnnotationPath,f=s.propertyValues.findIndex((e=>"DynamicMeasure"===e.name));if(f<0){const t=i?.collectionOrigins[0];return y(e,(0,u.buildTooComplex)(u.TooComplexReason.MissingProperty,t,r)),null}if(s.propertyValues[f].value.AnnotationPath!==g){const t=s.propertyValuesOrigins[f];return y(e,(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedValue,t,r)),null}return s}(t,n);if(!d)return;const g=c.value;if(!g)return;const{target:f}=n.chartAnnotation.top,h=d.propertyValues.findIndex((e=>"DataPoint"===e.name));if(h<0)return;const T=d.propertyValues[h]?.value?.AnnotationPath,{term:P,qualifier:E}=(0,u.resolveRelativeAnnotationPath)(T||""),v=(0,u.getAnnotationIndexKey)(f,P,E),{annotation:b,fileUri:_}=e.annotationIndex[v].top,{record:A,origin:C}=b,N=(0,u.getValueFromRecord)(A,o.DATA_POINT_PROP_NAME_VALUE,u.ExpressionType.Path);if(!N){return y(t,(0,u.buildTooComplex)(u.TooComplexReason.MissingProperty,C,_))}if(N.tooComplexReason){return y(t,(0,u.buildTooComplex)(N.tooComplexReason,N.range,_))}if(N.value!==g){y(t,(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedPath,N.range,_))}}(t,E.uiProperties,e),E},t.changeUIPropertyVisualFilter=function(e,t,n,o){const l=(0,a.getUIPropertyDefinitions)(u.UI_NODE_TYPE_VISUAL_FILTER),p=[],{changed:c,changedTableValue:m}=(0,i.copyChangedTextAndTextArrangement)(o,t);c&&o.set("availableDimensions",m),p.push(...(0,i.changeUIPropertiesMeasuresDimensions)(e,t,n.chartAnnotation,o));const d=`${u.UI_PROP_NAME_PREFIX_SORTING}${u.PresentationVariantPathKind.PV}`;(0,s.changeUIPropertyPrepareDynamicProp)(d,t.uiProperties,o),p.push(...function(e,t,n,a){const o=`${u.UI_PROP_NAME_PREFIX_SELECTION}${u.SelectionVariantPathKind.SV}`,i=a.get(o);if(!i)return[];if(i.length>0&&!n.selectionVariant)return function(e,t){const n=[],a=e.chartTargetEntityName,o="com.sap.vocabularies.UI.v1.SelectionVariant",i=(0,u.getExistingQualifiers)(t.annotationIndex,a,o),l=(0,s.generateId)(i,"visualFilter",!0),p=(0,u.getAnnotationIndexKey)(a,o,l),c=function(e,t){const n={annotation:{term:"com.sap.vocabularies.UI.v1.SelectionVariant",qualifier:t,record:{propertyValues:[{name:"SelectOptions",value:{type:u.ExpressionType.Collection,Collection:[]}}]}},fileUri:"",target:e};return{app:[n],base:[],top:n,isSplit:!1,readonly:!1}}(a,l);t.annotationIndex[p]=c,e.selectionVariant=c,n.push({targetPath:a,changes:[{annotation:c.top.annotation}]});const m=e.valueList.top.annotation,d=m.record.propertyValues.findIndex((e=>"SelectionVariantQualifier"===e.name));let y;if(d>=0){const e=m.record.propertyValues[d].value;if(e.type===u.ExpressionType.Null){const e={type:u.ExpressionType.String,String:l};m.record.propertyValues[d].value=e;const t={type:r.MOD_TYPE_EXPRESSION,value:e},n=`record/propertyValues/${d}/value`;y={annotation:m,changeType:r.ChangeType.Update,content:t,pointer:n}}else if(e.type===u.ExpressionType.String){e.String=l;const t={type:r.MOD_TYPE_PRIMITIVE,value:l,expressionType:u.ExpressionType.String},n=`record/propertyValues/${d}/value/String`;y={annotation:m,changeType:r.ChangeType.Update,content:t,pointer:n}}}else{const e={name:"SelectionVariantQualifier",value:{type:u.ExpressionType.String,String:l}},t=m.record.propertyValues.length;m.record.propertyValues.push(e);const n={type:r.MOD_TYPE_PROP_VALUE,value:e},a=`record/propertyValues/${t}`;y={annotation:m,changeType:r.ChangeType.Insert,content:n,pointer:a}}y&&n.push({targetPath:e.valueList.top.target,changes:[y]});return n}(n,e);if(0===i.length&&n.selectionVariant)return function(e,t,n){const a=[],o=e.valueList.top.annotation,i=o.record.propertyValues.findIndex((e=>"SelectionVariantQualifier"===e.name)),s=`record/propertyValues/${i}`,l={annotation:o,changeType:r.ChangeType.Delete,pointer:s};let p=!1;if(e.valueList.base?.length){p=!!e.valueList.base[e.valueList.base.length-1].annotation.record.propertyValues.find((e=>"SelectionVariantQualifier"===e.name))}p?(l.changeType=r.ChangeType.Update,l.pointer+="/value",l.content={type:r.MOD_TYPE_EXPRESSION,value:{type:u.ExpressionType.Null}},o.record.propertyValues[i].value={type:u.ExpressionType.Null}):o.record.propertyValues.splice(i,1);const c={targetPath:e.valueList.top.target,changes:[l]};return a.push(c),t.delete(n),a}(n,a,o);return[]}(e,0,n,o));const{measureMdElement:y,measureLocation:h}=f(e,n.chartAnnotation);return p.push(...(0,a.updateGenericUIProperties)({context:e,uiPropertyDefinitions:l,layeredAnnotation:n.chartAnnotation,currentUINodePath:""},t.uiProperties,o,new Map([[a.AnnotationRole.configuredAnnotation,n.presentationVariant],[a.AnnotationRole.unitsCurrencies,(0,a.getUnitsCurrenciesDummyAnnotation)(y?.path||"",h)],[a.AnnotationRole.svAnnotation,n.selectionVariant||g(e.pageBase.entityTypeName,n.location)]]))),p};t.dataPointCreationCallback=(e,t,n)=>{const r=n.top.target,i="com.sap.vocabularies.UI.v1.DataPoint",{measureMdElement:l,annotationPath:p}=f(e,n),c=l.name,d=(0,u.getExistingQualifiers)(e.annotationIndex,r,i),y=`${c}VisualFilter`,g=(0,s.generateId)(d,y,!0),h={};h[o.DATA_POINT_PROP_NAME_VALUE]={type:u.ExpressionType.Path,Path:c};const T=(0,u.getAnnotationIndexKey)(r,i,g);t.set(T,h);const P=n.top.annotation.record?.propertyValues.find((e=>e.name===o.CHART_PROP_NAME_MEASURE_ATTRIBUTES)),E=(P?.value?.type===u.ExpressionType.Collection?P?.value.Collection:[]).length-1,v=`@com.sap.vocabularies.UI.v1.DataPoint#${g}`,b={DataPoint:{type:u.ExpressionType.AnnotationPath,AnnotationPath:v},Role:{type:u.ExpressionType.EnumMember,EnumMember:m}};b[a.PREVIOUS_INDEX_PROPERTY_NAME]={type:u.ExpressionType.Int,Int:E},p?b.DynamicMeasure={type:"AnnotationPath",AnnotationPath:p}:b.Measure={type:"PropertyPath",PropertyPath:c};const _=(0,u.getAnnotationIndexKey)(r,"com.sap.vocabularies.UI.v1.Chart",n.top.annotation.qualifier),A=t.get(_)||{};A[o.CHART_PROP_NAME_MEASURE_ATTRIBUTES]={0:b},t.set(_,A);return{term:i,qualifier:g,record:{propertyValues:[{name:o.DATA_POINT_PROP_NAME_VALUE,value:{type:u.ExpressionType.Path,Path:c}}]}}}},66236:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDeleteChangesForVisualFilters=t.convertUiNodeInternalVisualFilters=t.loadUiNodeInternalVisualFilters=t.finalizeVisualFiltersNode=void 0;const a=n(70704),o=n(23635),r=n(35586),i=n(69939);t.finalizeVisualFiltersNode=function(e,t){e.allowedSubnodeTypes=e.allowedSubnodeTypes||[],e.suppressedSubnodeTypes=e.suppressedSubnodeTypes||[];const n=new Set,s=t.pageContext.configuration.get(o.UI_NODE_TYPE_VISUAL_FILTERS);for(const[t,a]of(e.subnodes||[]).entries())a.annotationPath=s[t],(0,o.isTooComplex)(a)||(0,o.isTooComplex)(a.path)||n.add(a.path.value);let l="";(0,r.getAnalyticalChartSupportedMultiView)(t).supported?(0,i.getCreateVisualFilterNodeOptions)(t,e).filterFields?.length||(l=a.i18n.t("DisableMenuTooltipVisualFiltersNoFields")):l=a.i18n.t("DisableMenuTooltipVisualFiltersNoAnalytics"),l?e.suppressedSubnodeTypes.push({subNodeType:`${o.UI_NODE_TYPE_VISUAL_FILTER}`,tooltip:l}):e.allowedSubnodeTypes.push(o.UI_NODE_TYPE_VISUAL_FILTER)},t.loadUiNodeInternalVisualFilters=function(e,t,n){const a={nodeId:n,annotationPath:"",tooComplex:!1,nodeType:o.UI_NODE_TYPE_VISUAL_FILTERS,location:null,subnodes:[]},r=JSON.stringify(n);for(const[o,s]of e.entries()){const e=[...n,o],l=(0,i.loadUiNodeInternalVisualFilter)(t,e,s);l.allowedParentNodes={},l.allowedParentNodes[r]=!0,a.subnodes.push(l)}return a},t.convertUiNodeInternalVisualFilters=function(e,t){const n=[];return(e.subnodes||[]).forEach((e=>{(0,o.isTooComplex)(e)?n.push(e):n.push((0,i.convertUiNodeInternalVisualFilter)(e,t))})),{nodeId:e.nodeId,annotationPath:e.annotationPath,allowedParentNodes:e.allowedParentNodes,allowedSubnodeTypes:e.allowedSubnodeTypes,tooComplex:!1,nodeType:e.nodeType,location:e.location,subnodes:n}},t.getDeleteChangesForVisualFilters=function(e,t,n=1){const a=[];for(let r=t;r<t+n;r++){const t=e.subnodes[r];if((0,o.isTooComplex)(t)||!t?.valueList)continue;if(t.valueList.readonly||t.valueList.base?.length>0)continue;const{target:n,annotation:i}=t.valueList.top,{term:s,qualifier:l}=i;l&&a.push({targetPath:n,changes:[{annotation:{term:s,qualifier:l}}]})}return a}},83112:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeUIPropertiesMeasuresDimensions=t.copyChangedTextAndTextArrangement=t.convertMeasuresAndDimensions=t.AGGREGATION_METHOD_CUSTOM=t.UI_PROP_NAME_AVAILABLE_DYNAMIC_MEASURES=t.UI_PROP_NAME_AVAILABLE_DIMENSIONS=t.UI_PROP_NAME_AVAILABLE_MEASURES=t.UI_PROP_NAME_DEFAULT_DYNAMIC_MEASURES=t.UI_PROP_NAME_DEFAULT_DIMENSIONS=t.UI_PROP_NAME_DEFAULT_MEASURES=t.UI_PROP_NAME_DYNAMIC_MEASURES=t.UI_PROP_NAME_DIMENSIONS=t.UI_PROP_NAME_MEASURES=void 0;const a=n(53308),o=n(70704),r=n(78263),i=n(95207),s=n(35586),l=n(20576),p=n(32217),c=n(41810),u=n(23635);t.UI_PROP_NAME_MEASURES="measures",t.UI_PROP_NAME_DIMENSIONS="dimensions",t.UI_PROP_NAME_DYNAMIC_MEASURES="dynamicMeasures",t.UI_PROP_NAME_DEFAULT_MEASURES="defaultMeasures",t.UI_PROP_NAME_DEFAULT_DIMENSIONS="defaultDimensions",t.UI_PROP_NAME_DEFAULT_DYNAMIC_MEASURES="defaultDynamicMeasures",t.UI_PROP_NAME_AVAILABLE_MEASURES="availableMeasures",t.UI_PROP_NAME_AVAILABLE_DIMENSIONS="availableDimensions",t.UI_PROP_NAME_AVAILABLE_DYNAMIC_MEASURES="availableDynamicMeasures";const m=u.uiPropertyNames.analyticalChart.measuresColumns.property,d=u.uiPropertyNames.analyticalChart.measuresColumns.aggregatableProperty,y=u.uiPropertyNames.analyticalChart.measuresColumns.aggregationMethod,g=u.uiPropertyNames.analyticalChart.measuresColumns.showAsDefault,f=u.uiPropertyNames.analyticalChart.measuresColumns.label;function h(e,n,a,r,i){const l=n===a-1;if((0,u.isTooComplex)(e.data))return e.restrictedReorderRange={from:n,to:n},e.restrictedReorderUpTooltip=o.i18n.t("TooComplexRowNotReorderable"),e.restrictedReorderDownTooltip=o.i18n.t("TooComplexRowNotReorderable"),e.deletionDisabled=!0,void(e.deletionDisabledTooltip=o.i18n.t("TooComplexRowNotDeletable"));if(n<r?(e.restrictedReorderRange={from:0,to:r-1},e.restrictedReorderDownTooltip=o.i18n.t(l?"LastDefaultMeasureCannotBeMovedDown":"NoMixedCustomAndDynamicTransformationMeasures"),e.restrictedReorderUpTooltip=o.i18n.t("NoMixedCustomAndDynamicTransformationMeasures")):n<a?(e.restrictedReorderRange={from:r,to:a-1},e.restrictedReorderDownTooltip=o.i18n.t(l?"LastDefaultMeasureCannotBeMovedDown":"NoMixedCustomAndDynamicTransformationMeasures"),e.restrictedReorderUpTooltip=o.i18n.t("NoMixedCustomAndDynamicTransformationMeasures")):(e.restrictedReorderRange={from:n,to:n},e.restrictedReorderUpTooltip=o.i18n.t("OnlyDefaultMeasuresAreReorderable"),e.restrictedReorderDownTooltip=o.i18n.t("OnlyDefaultMeasuresAreReorderable")),0===n&&1===a){const t=(0,s.getCellDataForColumn)(e,g);t&&(t.readonly=!0,t.readonlyTooltip=o.i18n.t("ReadonlyTooltipNoDeletionForLast")),e.deletionDisabled=!0,e.deletionDisabledTooltip=o.i18n.t("ReadonlyTooltipNoDeletionForLast")}(0,s.getCellDataForColumn)(e,y)?.value===t.AGGREGATION_METHOD_CUSTOM?(e.deletionDisabled=!0,e.deletionDisabledTooltip=o.i18n.t("DeletionDisabledTooltipCustomMeasure")):e.deletionDisabled&&e.deletionDisabledTooltip.indexOf(i)>0&&(e.deletionDisabled=!1,delete e.deletionDisabledTooltip)}function T(e,t){const n=(0,s.getCellValueForColumn)(e,d);if((0,u.isTooComplex)(e.data)||(0,u.isTooComplex)(n))return;const o=t.aggregatableProperties.find((e=>e.property===n)),{fileUri:r,range:i}=e.data.location;if(o){if(!o.isCustomAggregate){const t=(0,s.getCellValueForColumn)(e,y);if(!(0,u.isTooComplex)(t)){(o.aggregationMethods?.length?o.aggregationMethods:[...(0,a.getStandardAggregationMethods)().keys()]).includes(t)||(e.data.cells[y]=(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedValue,i,r))}}}else e.data.cells[d]=(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedValue,i,r)}function P(e,n){const a=(0,s.getCellValueForColumn)(e,g)||!1,o=(0,s.getCellValueForColumn)(n,g)||!1;if(a&&!o)return-1;if(!a&&o)return 1;if(!a&&!o){const a=(0,s.getCellValueForColumn)(e,y)!==t.AGGREGATION_METHOD_CUSTOM,o=(0,s.getCellValueForColumn)(n,y)!==t.AGGREGATION_METHOD_CUSTOM;if(a&&!o)return-1;if(!a&&o)return 1}const r={line:9999,character:0},i=e.data?.location?.range.start||r,l=n.data?.location?.range.start||r;return(0,c.isBefore)(i,l)?-1:1}function E(e,t,n,a,o){const r=a>n.to?a-1:a,i=t[Math.max(n.to,r)];!(0,u.isTooComplex)(i)&&(0,s.getCellDataForColumn)(i,g)?.value||(0,s.throwError)("Move not allowed, only move among default measures/dimensions possible");let p=0,c=!1;if(!o){c=N(t[Math.min(n.from,Math.max(0,r))]);const e=N(i);c!==e&&(0,s.throwError)('Move not allowed, only move default measure within collections "Measures" or "DynamicMeasures"'),p=t.findIndex((t=>N(t)===e))}const{target:m,annotation:d}=e.top,{collectionPropIndex:y,collection:f}=A(d,o,c);(0,s.moveInCollection)(f,n.from,a,n.to-n.from+1);const h=`record/propertyValues/${y}/value/Collection`,T=`${h}/${n.from-p}`+(n.from<n.to?"-"+(n.to-p):""),P=`${h}/${a-p}`;return[{targetPath:m,changes:[{annotation:d,changeType:l.ChangeType.Move,moveFromPointer:T,pointer:P}]}]}function v(e,t,n,a){const o=[],r=n[a];r.deletionDisabled&&(0,s.throwError)(r.deletionDisabledTooltip||"Row deletion is disabled");const i=a-n.findIndex((e=>!0===N(e))),{target:p,annotation:c}=t.top,d=(0,s.getCellDataForColumn)(r,g)?.value;if(d){const{collectionPropIndex:e,collection:t}=A(c,!1,!0);t.splice(i,1);const n=`${`record/propertyValues/${e}/value/Collection`}/${i}`,a={annotation:c,changeType:l.ChangeType.Delete,pointer:n};o.push({targetPath:p,changes:[a]})}const y=(0,s.getCellDataForColumn)(r,m)?.value,{dynamicMeasures:f}=(0,s.getApplySupportedInfo)(e,p,!0),h=f.find((e=>e.name===y))?.qualifier;if(void 0!==h){const t="com.sap.vocabularies.Analytics.v1.AggregatedProperty",n=(0,u.getAnnotationIndexKey)(p,t,h),a=e.annotationIndex[n];a?a.base.length?(0,s.throwError)("Deletion not possible. Annotation is on base layer"):a.readonlyAppName&&(0,s.throwError)("Deletion not possible. Annotation is defined in different app"):(0,s.throwError)("Deletion not possible. Annotation not found"),o.push({targetPath:p,changes:[{annotation:{term:t,qualifier:h}}]})}return o}function b(e,n,a,o,c,d){const h=a[c]?.data,{valueChanged:T,newValue:P}=(e=>{const t=o?.cells[e],n=h?.cells[e],a=(0,u.isTooComplex)(n)?null:n?.value;return{valueChanged:null!==a&&a!==t,newValue:t}})(f),{showAsDefaultChanged:E,newShowAsDefault:v}=function(e,t){let n=!0;const a=e?.cells[g];a&&!(0,u.isTooComplex)(a)||(n=!1);void 0===t.cells[g]&&(n=!1);const o=a?.value,r=!!t.cells[g];r===o&&(n=!1);n&&a.readonly&&(0,s.throwError)(a.readonlyTooltip);return{showAsDefaultChanged:n,newShowAsDefault:r}}(h,o);if(!T&&!E)return[];let b=o.cells[m];const C=h.cells[m];!b&&(0,u.isTooComplex)(C)&&((0,s.throwIf)(T,"Cannot change label for Measure/Dimension row with too complex Name"),b=C.tooComplexLocations.find((e=>!!e.message))?.message?.wrongValue||""),(0,s.throwIf)(!b,"Cannot change Measure/Dimension row with too complex Name");const{target:N,annotation:I}=n.top,S=!d&&o.cells[y]!==t.AGGREGATION_METHOD_CUSTOM;let x;if(S){const{dynamicMeasures:t}=(0,s.getApplySupportedInfo)(e,N,!0),n=t.find((e=>e.name===b))?.qualifier;x=n?`@com.sap.vocabularies.Analytics.v1.AggregatedProperty#${n}`:b}else x=b;const O=function(e,t,n,a,o,s){if(!o)return[];if(a){const{term:a,qualifier:o}=(0,u.resolveRelativeAnnotationPath)(n),r=(0,u.getAnnotationIndexKey)(t,a,o);return function(e,t){const n=e.top.annotation,a=n.record,o=(a?.annotations||[])?.findIndex((e=>"com.sap.vocabularies.Common.v1.Label"===e.term&&!e.qualifier));let r;if(o>-1&&t){a.annotations[o].value.String=t;const e={type:l.MOD_TYPE_PRIMITIVE,value:t,expressionType:u.ExpressionType.String},i=`/record/annotations/${o}/value/String`;r={annotation:n,changeType:l.ChangeType.Update,content:e,pointer:i}}else if(o>-1&&!t)a.annotations.splice(o,1),r={annotation:n,changeType:l.ChangeType.Delete,pointer:`/record/annotations/${o}`};else if(o<0&&t){const e={term:"com.sap.vocabularies.Common.v1.Label",value:{type:u.ExpressionType.String,String:t}},o={type:l.MOD_TYPE_ANNOTATION,value:e},i=a.annotations?.length||0;a.annotations=a.annotations||[],a.annotations.push(e),r={annotation:n,changeType:l.ChangeType.Insert,content:o,pointer:`/record/annotations/${i}`}}return r?[{targetPath:e.top.target,changes:[r]}]:[]}(e.annotationIndex[r],s)}{const a=(0,i.getDefaultLabelAnnotation)(e,n,t);return function(e,t,n,a){let o;const i=e.annotationIndex[(0,u.getAnnotationIndexKey)(t,r.CDS_TERM_NAME_TITLE)];let s=!1;if(""===a&&n)"com.sap.vocabularies.Common.v1.Label"===n.top.annotation.term&&n.app?.length>0&&(o={annotation:{term:"com.sap.vocabularies.Common.v1.Label"}}),s=!0;else if(a&&n&&"com.sap.vocabularies.Common.v1.Label"===n.top.annotation.term){const e=n.top.annotation;e.value.String=a;const t={type:l.MOD_TYPE_PRIMITIVE,value:a,expressionType:u.ExpressionType.String};o={annotation:e,changeType:l.ChangeType.Update,content:t,pointer:"value/String"},s=!0}else if(a){o={annotation:{term:"com.sap.vocabularies.Common.v1.Label",value:{type:u.ExpressionType.String,String:a}}},s=!0}const c=o?[o]:[];!0===s&&i?.app?.length&&c.push({annotation:{term:`${p.CDS_VOCABULARY_NAMESPACE}.Title`}});return c.length?[{targetPath:t,changes:c}]:[]}(e,a?.top.target||(0,u.resolveMetadataElement)(e.metadataService,t+"/"+n,!0)?.path,a,s)}}(e,N,x,S,T,P);return E&&O.push(...function(e,t,n,a,o,r){const i=[];let p=null;if(a)p=_(t,n,o,r);else{const{collectionPropIndex:e,collection:a}=o,i=a.findIndex((e=>(n?e.AnnotationPath:e.PropertyPath)===r));(0,s.throwIf)(i<0,"Error determining index for removal of Measure/Dimension from UI.Chart"),a.splice(i,1);const c=`record/propertyValues/${e}/value/Collection/${i}`;p={annotation:t,changeType:l.ChangeType.Delete,pointer:c}}p&&i.push({targetPath:e,changes:[p]});return i}(N,I,S,v,A(I,d,S),x)),O}function _(e,t,n,a){let o;o=t?{type:u.ExpressionType.AnnotationPath,AnnotationPath:a}:{type:u.ExpressionType.PropertyPath,PropertyPath:a};const{collectionPropIndex:r,collectionPropName:i,collection:s}=n;if(r>-1){s.push(o);const t=`record/propertyValues/${r}/value/Collection/${s.length-1}`,n={type:l.MOD_TYPE_EXPRESSION,value:o};return{annotation:e,changeType:l.ChangeType.Insert,pointer:t,content:n}}{let t;t=[o];const n={name:i,value:{type:u.ExpressionType.Collection,Collection:t}};e.record.propertyValues.push(n);const a="record/propertyValues/"+(e.record.propertyValues.length-1),r={type:l.MOD_TYPE_PROP_VALUE,value:n};return{annotation:e,changeType:l.ChangeType.Insert,pointer:a,content:r}}}function A(e,t,n){const a=t?r.CHART_PROP_NAME_DIMENSIONS:n?r.CHART_PROP_NAME_DYNAMIC_MEASURES:r.CHART_PROP_NAME_MEASURES,o=e.record?.propertyValues.findIndex((e=>e.name===a)),i=o>-1?e.record.propertyValues[o]:null,s=i?.value?.type===u.ExpressionType.Collection?i.value.Collection:null;return{collectionPropName:a,collectionPropIndex:o,collection:s}}function C(e,t,n){const a=n?.cells,o=a?.[d],r=a?.[y];if(!o||!r)return[];const i=[],{target:l,annotation:p}=t.top,{dynamicMeasures:c}=(0,s.getApplySupportedInfo)(e,l,!0),u=(0,s.createAggregatedPropertyAnnotation)(e,l,o,r,c);i.push({targetPath:l,changes:[{annotation:u}]});const m=a?.[g];if(m){const e=`@com.sap.vocabularies.Analytics.v1.AggregatedProperty#${u.qualifier}`,t=_(p,!0,A(p,!1,!0),e);i.push({targetPath:l,changes:[t]})}return i}function N(e){return(0,s.getCellDataForColumn)(e,y)?.value!==t.AGGREGATION_METHOD_CUSTOM}t.AGGREGATION_METHOD_CUSTOM="custom",t.convertMeasuresAndDimensions=function(e,n,r,i,l){let p=(0,s.filter)(e[t.UI_PROP_NAME_AVAILABLE_MEASURES],m,r);p=(0,s.deduplicate)(p,u.uiPropertyNames.analyticalChart.measuresColumns.property);const c=e[t.UI_PROP_NAME_DEFAULT_MEASURES];let f=e[t.UI_PROP_NAME_AVAILABLE_DIMENSIONS];f=(0,s.deduplicate)(f,u.uiPropertyNames.analyticalChart.dimensionsColumns.property);const E=e[t.UI_PROP_NAME_DEFAULT_DIMENSIONS],v=e[t.UI_PROP_NAME_AVAILABLE_DYNAMIC_MEASURES],b=e[t.UI_PROP_NAME_DEFAULT_DYNAMIC_MEASURES],_={isJoinedColumnDef:(0,u.getUIPropertyDefinitions)(u.UI_NODE_TYPE_ANALYTICAL_CHART).propertyMap.measures.columns.find((e=>e.name===g)),readonlyColumns:new Set([m]),readonlyTooltip:o.i18n.t("ReadonlyTooltipCannotBeChanged")};let A=(0,s.join)(p,c,m,_),C=(0,s.join)(f,E,m,_);_.readonlyColumns.add(d),_.readonlyColumns.add(y);const N=(0,s.join)(v,b,m,_),I={nullCellContent:new Map};I.nullCellContent.set(d,{copySource:m}),I.nullCellContent.set(y,{defaultValue:t.AGGREGATION_METHOD_CUSTOM}),A=(0,s.union)(N,A,I),C=(0,s.sort)(C,P),A=(0,s.sort)(A,P);const S=(0,s.getApplySupportedInfo)(i,l);if(!(0,u.isTooComplex)(C)){C=function(e,t){for(const[n,a]of e.rows.entries()){const e=n===t-1;if(n<t?(a.restrictedReorderRange={from:0,to:t-1},a.restrictedReorderDownTooltip=e?o.i18n.t("LastDefaultDimensionCannotBeMovedDown"):void 0):(a.restrictedReorderRange={from:n,to:n},a.restrictedReorderUpTooltip=o.i18n.t("OnlyDefaultDimensionsAreReorderable"),a.restrictedReorderDownTooltip=o.i18n.t("OnlyDefaultDimensionsAreReorderable")),a.deletionDisabled=!0,a.deletionDisabledTooltip=o.i18n.t("DeletionDisabledTooltipServiceDimension"),0===n&&1===t){const e=(0,s.getCellDataForColumn)(a,g);(0,u.isTooComplex)(e)||(e.readonly=!0,e.readonlyTooltip=o.i18n.t("ReadonlyTooltipNoDeletionForLast"))}}return e}(C,E.rows.length)}if(!(0,u.isTooComplex)(A)){A=function(e,n,a,o,r){const i=a+o;let l=0;l=(0,s.getCellValueForColumn)(n.rows[0],y)===t.AGGREGATION_METHOD_CUSTOM?a:o;for(const[t,a]of n.rows.entries())T(a,e),h(a,t,i,l,r);return n}(S,A,c.rows.length,b.rows.length,"@com.sap.vocabularies.UI.v1.Chart"+(n?`#${n}`:""))}const x=function(e,t,n){const o={},{aggregatableProperties:r}=n,i=(0,a.getStandardAggregationMethods)(),l=[...i.keys()].map((e=>({value:e}))),p=(0,s.getUsedAggregationMethods)(e,t);for(const e of r){if(e.isCustomAggregate)continue;const t=e.property,n=((e.aggregationMethods?.length?e.aggregationMethods.map((e=>({value:e}))):l)||[]).filter((e=>!p.get(t)?.has(e.value)));n.length&&(o[t]=n.map((({value:e})=>({value:e,text:i.get(e)}))))}return o}(i,l,S);for(const e of A.columns||[])switch(e.name){case d:e.type=u.UI_PROP_TYPE_ENUM,e.allowedValues=Object.keys(x).map((e=>({value:e})));break;case y:e.type=u.UI_PROP_TYPE_DEPENDENT_ENUM,e.allowedDependentValues=x,e.dominatingColumnName=d}return{measures:A,dimensions:C}},t.copyChangedTextAndTextArrangement=function(e,t){let n=!1;const a=e.get("dimensions");if(!a?.length)return{changed:n,changedTableValue:[]};const o=t.uiProperties.availableDimensions;if(!o||(0,u.isTooComplex)(o))return{changed:n,changedTableValue:[]};const r=(0,s.convertToPlainValue)(o);for(const e of a||[]){const t=e.cells,a=o?.rows?.findIndex((e=>(0,s.getCellValueForColumn)(e,"property")===t.property)),i=r[a];i&&(n=!0,i.cells.text=t.text,i.cells.textArrangement=t.textArrangement)}return{changed:n,changedTableValue:r}},t.changeUIPropertiesMeasuresDimensions=function(e,t,n,a){const o=[];for(const r of["measures","dimensions"]){const i="dimensions"===r,l=a.get(r);if(!l)continue;const p=t.uiProperties[r]?.rows;if(l.length>p.length){const t=l.find((e=>!e.key));o.push(...C(e,n,t))}else if(l.length<p.length){const t=p.findIndex((e=>!l.find((t=>t.key===e.key))));o.push(...v(e,n,p,t))}else{const t=p.map((e=>e.key)),a=l.map((e=>e.key)),{found:r,range:c,insertBeforeIndex:u}=(0,s.findSingleMove)(t,a);if(r)o.push(...E(n,p,c,u,i));else for(const[t,a]of l.entries())o.push(...b(e,n,p,a,t,i))}a.delete(r)}return o}},9811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFieldType=void 0;const a=n(78263),o=n(35586),r=n(72691),i=n(23635);t.getFieldType=function(e,t,n,s){const l=(0,i.getLocations)([n,t.valueList,t.valueHelpText,t.valueHelpTextArrangement,t.valueListWithFixedValues,t.cdsValueList,t.presentationVariant]);let p=function(e,t){if(!e.isCdsProject)return[];const n=[],a=["Common.ValueList.entity","ValueList.entity","Common.ValueList.viaAssociation"];for(const o of a){const a=(0,i.getAnnotationIndexKey)(t.path,o),r=e.annotationIndex[a]?.top;r&&n.push({fileUri:r.fileUri,range:r.annotation.origin,reason:i.TooComplexReason.UnsupportedTerm})}return n}(e,t.element);if(p?.length)return{uiPropFieldType:{tooComplex:!0,tooComplexLocations:p,locations:l}};let c=[];if(({tooComplexLocations:p,additionalValueHelpLocations:c}=function(e,t){if(!t.valueList&&t.valueListReferences){return{tooComplexLocations:[{fileUri:t.valueListReferences.top.fileUri,range:t.valueListReferences.top.annotation.origin,reason:i.TooComplexReason.UnsupportedTerm}]}}const n=t.element,o=(0,i.getAnnotationIndexKey)(n.path,"com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers"),r=e.annotationIndex[o]?.top;if(r){return{tooComplexLocations:[{fileUri:r.fileUri,range:r.annotation.origin,reason:i.TooComplexReason.UnsupportedTerm}]}}const{qualifiers:s,locationsWithQualifier:l}=function(e,t){const n=t.path,o="com.sap.vocabularies.Common.v1.ValueList";let r=(0,i.getExistingQualifiers)(e.annotationIndex,n,o,!0);const s=[],l=function(e,t){if(e.pageContext.type!==a.PAGE_TYPE_LR)return"";const n=e.pageContext.configuration.get(i.UI_NODE_TYPE_VISUAL_FILTERS);if(!n)return"";let o="";const r=Array.isArray(n)?n:[n];for(const n of r){if(!n.startsWith(t.name)&&!n.includes(`/${t.name}`))continue;const{target:a,term:r,qualifier:s}=(0,i.resolvePath)(n),l=e.pageBase.entityTypeName;(0,i.resolveMetadataElement)(e.metadataService,`${l}/${a}`,!0).path===t.path&&"com.sap.vocabularies.Common.v1.ValueList"===r&&s&&(o=s)}return o}(e,t);l&&(r=r.filter((e=>e!==l)));for(const t of r){const a=(0,i.getAnnotationIndexKey)(n,o,t),r=e.annotationIndex[a]?.top;r&&t&&s.push({fileUri:r.fileUri,range:r.annotation.origin})}return{qualifiers:r,locationsWithQualifier:s}}(e,n);let p=s.findIndex((e=>!e));if(p<0&&n.isEntityType&&n.structuredType){const t=(0,i.getAnnotationIndexKey)(n.structuredType,a.CDS_TERM_VALUE_LIST),o=e.annotationIndex[t]?.top;o&&(s.unshift(""),p=0)}if(e.pageContext.type!==a.PAGE_TYPE_LR)return{tooComplexLocations:[],additionalValueHelpLocations:l};if(s.length>0&&p<0){const e=i.TooComplexReason.NoValidAnnoCombination;return{tooComplexLocations:l.map((t=>({...t,reason:e})))}}return{tooComplexLocations:[],additionalValueHelpLocations:s.length>1&&p>=0?l:[]}}(e,t)),p?.length)return{uiPropFieldType:{tooComplex:!0,tooComplexLocations:p,locations:l}};c?.length&&l.push(...c);const u={tooComplex:!1,type:i.UI_PROP_TYPE_ENUM,value:"None",allowedValues:[],locations:l},m=[],d=n?.base?.length?(0,i.getValueFromAnnotation)(n.base[0].annotation,i.ExpressionType.Bool):void 0;let y=!1;const g=[];if(t.valueList?.isSplit){const e=(0,o.getTooComplexSplit)(t.valueList,t.valueList?.base[0]?.fileUri);e&&(y=!0,g.push(...e.tooComplexLocations))}const{baseValueList:f,baseValueListLocation:h}=function(e,t){let n,a;if(e.valueList?.base?.length){const o={...e.valueList,app:[],top:e.valueList.base[0]};n=(0,r.resolveValueListAnnotation)(t,o),a=(0,i.getLocation)(e.valueList.base[0])}else e.cdsValueList?.base?.length&&(n=(0,r.resolveCdsValueListAnnotation)(t,e.element,e.cdsValueList.base[0].annotation,e.cdsValueList.base[0].fileUri),a=(0,i.getLocation)(e.cdsValueList.base[0]),n.tooComplex||n.valueListContent.collectionPath&&n.valueListContent.valueListProperty||(n=void 0,a=void 0));return{baseValueList:n,baseValueListLocation:a}}(t,e);let T,P;d?.tooComplexReason?(y=!0,g.push((0,i.getLocation)(n?.base[0]))):T=d?.value?"TextArea":f?"ValueHelp":d?"TextArea":null,"ValueHelp"===T&&f.tooComplex&&(y=!0,g.push(...f.tooComplex.locations));const E=!!t.valueList?.app?.length||!!t.cdsValueList?.app?.length;if(n?.app?.length){const e=(0,o.buildUIPropBoolFromAnnotation)(n.app[0].annotation,s);if((0,i.isTooComplex)(e))return{uiPropFieldType:{...e,locations:l}};if(P={value:e.value},u.value=e.value?"TextArea":"InputField",m.push(...e.locations),!e.value&&f&&!E){const e=t.valueList?.base[0]||t.cdsValueList.base[0],n=m.map((e=>({...e,reason:i.TooComplexReason.NoValidAnnoCombination})));return n.push({reason:i.TooComplexReason.NoValidAnnoCombination,range:e.annotation.origin,fileUri:e.fileUri}),{uiPropFieldType:{tooComplex:!0,tooComplexLocations:n,locations:l}}}if(!e.value&&d?.value&&!E){const e=n?.base[0],t=m.map((e=>({...e,reason:i.TooComplexReason.NoValidAnnoCombination})));return t.push({reason:i.TooComplexReason.NoValidAnnoCombination,range:e.annotation.origin,fileUri:e.fileUri}),{uiPropFieldType:{tooComplex:!0,tooComplexLocations:t,locations:l}}}}else d&&(u.value="None",y?u.baseTooComplex=!0:(T&&(u.baseValue={value:T,text:(0,i.getFormattedText)(T)}),m.push((0,i.getLocation)(n.base[0]))));let v={collectionPath:"",valueListProperty:"",parameterCount:1};if("TextArea"===u.value){if(t.valueList?.app?.length){const e=t.valueList?.app[0],n=m.map((e=>({...e,reason:i.TooComplexReason.NoValidAnnoCombination})));return n.push({reason:i.TooComplexReason.NoValidAnnoCombination,range:e.annotation.origin,fileUri:e.fileUri}),{uiPropFieldType:{tooComplex:!0,tooComplexLocations:n,locations:l}}}}else{const{tooComplexValueHelp:n,fieldType:a,valueListContent:s}=function(e,t,n,a){let s,l,p={collectionPath:"",valueListProperty:"",parameterCount:1};if(t.valueList?.app?.length){if(t.valueList.isSplit){const e=(0,o.getTooComplexSplit)(t.valueList,t.valueList.app[0].fileUri);if(e)return{tooComplexValueHelp:e}}if(({tooComplex:s,valueListContent:p}=(0,r.resolveValueListAnnotation)(e,t.valueList)),s)return{tooComplexValueHelp:s};n.push((0,i.getLocation)(t.valueList.app[0])),l="ValueHelp"}else if("ValueHelp"===a&&(l="None"),t.cdsValueList?.app?.length&&!t.valueList?.top){if(n.push((0,i.getLocation)(t.cdsValueList.app[0])),({tooComplex:s,valueListContent:p}=(0,r.resolveCdsValueListAnnotation)(e,t.element,t.cdsValueList.app[0].annotation,t.cdsValueList.app[0].fileUri)),s)return{tooComplexValueHelp:s};l=p.collectionPath&&p.valueListProperty?"ValueHelp":"InputField"}return{fieldType:l,valueListContent:p}}(e,t,m,T);if(t.valueList?.app?.length?v=s:f?.valueListContent?.collectionPath&&(v=f?.valueListContent),n)return{uiPropFieldType:{...n,locations:l}};u.value=a??u.value,y?u.baseTooComplex=!0:T&&(u.baseValue={value:T,text:(0,i.getFormattedText)(T)}),h&&m.push(h)}return["InputField","None"].includes(u.value)&&n?.app.length&&(u.value="TextArea"),u.value||u.baseValue||(u.value="None",T&&(u.baseValue={value:T,text:(0,i.getFormattedText)(T)})),u.value&&"None"!==u.value&&(u.baseTooComplex=y,T&&(u.baseValue={value:T,text:(0,i.getFormattedText)(T)})),c?.length&&(v.additionalValueHelpVariantsExist=!0),{uiPropFieldType:u,valueListContent:v,baseMultiLine:d,appMultiLine:P}}},53107:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeReferenceFacets=t.changeRecordHiddenValue=t.changeRecordHidden=t.changeHiddenProperty=t.getAllowedValuesForHideByProperty=t.getHidden=void 0;const a=n(41810),o=n(78263),r=n(35586),i=n(23635),s=n(70704),l=n(20576);function p(e,t){const n=e.metadataService,o=(0,a.getPathBaseMetadataElement)(n,t.path),s={allowedTypes:new Set([i.ExpressionType.Bool])},l=(0,r.getAvailableFieldPathsForEntity)(e,o,s),p=l.fieldPaths.filter((e=>e!==t.name));for(const a of l.associations){if(t.structuredType&&t.name!==a)continue;const i=n.getMetadataElement(o.path+"/"+a);if(i?.structuredType){const t=n.getMetadataElement(i?.structuredType);p.push(...(0,r.getAvailableFieldPathsForEntity)(e,t,s).fieldPaths.map((e=>a+"/"+e)))}}return p.map((e=>({value:e})))}function c(e,t){let n=null;const a=(e.annotations||[]).findIndex((e=>"com.sap.vocabularies.UI.v1.Hidden"===e.term&&!e.qualifier)),o=e.annotations?e.annotations[a]?.value:void 0;return o&&"Bool"===o.type?(n=l.ChangeType.Update,o.Bool=t):t?(Array.isArray(e.annotations)||(e.annotations=[]),e.annotations.push({term:"com.sap.vocabularies.UI.v1.Hidden"}),n=l.ChangeType.Insert):a>-1&&(e.annotations.splice(a,1),n=l.ChangeType.Delete),{changeType:n,annotationIndex:a>-1?a:e.annotations.length-1}}function u(e,t){let n=null;const a=(e.annotations||[]).findIndex((e=>"com.sap.vocabularies.UI.v1.Hidden"===e.term&&!e.qualifier));if(t&&![i.ENUM_VALUE_NULL].includes(t)){let o;o=t===i.ENUM_VALUE_NONE?{type:"Bool",Bool:!0}:{type:"Path",Path:t},a>-1?(e.annotations[a].value=o,n=l.ChangeType.Update):(Array.isArray(e.annotations)||(e.annotations=[]),e.annotations.push({term:"com.sap.vocabularies.UI.v1.Hidden",value:o}),n=l.ChangeType.Insert)}else a>-1&&(e.annotations.splice(a,1),n=l.ChangeType.Delete);return{changeType:n,annotationIndex:a>-1?a:e.annotations.length-1}}t.getHidden=function(e,t,n,a){const o=function(e,t,n,a,o=!0){const r=!!a.app.length,l=t.fileUri;let{hiddenProperty:c,hideByProperty:u}=function(e){const t={tooComplex:!1,type:i.UI_PROP_TYPE_BOOL,value:!1,baseValue:!1,useBase:!1,locations:[e]},n={tooComplex:!1,value:i.ENUM_VALUE_NONE,baseValue:{value:i.ENUM_VALUE_NONE,text:(0,i.getFormattedText)(i.ENUM_VALUE_NONE)},type:i.UI_PROP_TYPE_ENUM,allowedValues:[],locations:[e]};return{hiddenProperty:t,hideByProperty:n}}(t);const m=(e.annotations||[]).find((e=>"com.sap.vocabularies.UI.v1.Hidden"===e.term&&!e.qualifier));if(m){let e=(0,i.getValueFromAnnotation)(m,i.ExpressionType.Bool);if(!(0,i.isTooComplex)(c)&&e&&"boolean"==typeof e?.value)r?(c.value=!!e.value,c.baseValue=void 0):(c.value=void 0,c.baseValue=!!e.value,c.useBase=!0);else{if(e=(0,i.getValueFromAnnotation)(m,i.ExpressionType.Path),e.tooComplexReason)return c=(0,i.buildTooComplex)(e.tooComplexReason,e.range,l),u=null,{hidden:c,hideByProperty:c?u:null};{const t={fileUri:l,range:e.range},o=(0,i.makeInvalidPathTooComplex)(n,i.ExpressionType.Path,e.value,a,t,{toManyAssociationsOnly:!1,directPropertiesOnly:!0,deepPathsSupported:!1,excludeValuePropertyNames:[]});if(o)return{hidden:o,hideByProperty:null}}(0,i.isTooComplex)(u)||(r?(u.value=e?.value,u.baseValue={value:i.ENUM_VALUE_NONE}):(u.value=i.ENUM_VALUE_NONE,u.baseValue={value:e?.value}),(0,i.isTooComplex)(c)||(c.value=!!e.value))}c.locations=[{fileUri:l,range:e.range}],u.locations=[{fileUri:l,range:e.range}];const t=(0,i.resolveMetadataElement)(n.metadataService,a.top.target);t&&!(0,i.isTooComplex)(u)&&function(e){const{context:t,mdElement:n,excludeBaseLayerValue:a,hideByProperty:o}=e;(0,i.isTooComplex)(o)||(o.allowedValues=p(t,n),0===o.allowedValues.length?(o.value=i.ENUM_VALUE_NOT_APPLICABLE,o.readonly=!0,o.readonlyTooltip=s.i18n.t("ReadOnlyTooltipHideByProperty_NotApplicable")):(o.allowedValues.unshift({value:i.ENUM_VALUE_NONE,text:(0,i.getFormattedText)(i.ENUM_VALUE_NONE)}),a&&(0,i.isEnumBaseValueDiffers)(o)&&(0,i.excludeValueFromList)(o.allowedValues,o.baseValue.value)))}({context:n,hideByProperty:u,mdElement:t,excludeBaseLayerValue:o})}return{hidden:c,hideByProperty:c?u:null}}(t,n,a,e),r=o.hidden;return{hidden:r,hideByProperty:!(0,i.isTooComplex)(r)&&r.value||!(0,i.isTooComplex)(r)&&r.baseValue?o.hideByProperty:null}},t.getAllowedValuesForHideByProperty=p,t.changeHiddenProperty=function(e,t,n,a=!1){const r=e.top.annotation;let s=[];const p={annotation:r};if("com.sap.vocabularies.UI.v1.Identification"===r.term||"com.sap.vocabularies.UI.v1.LineItem"===r.term)s=r.collection,p.pointer=`/collection/${t}/annotations/`;else if("com.sap.vocabularies.UI.v1.FieldGroup"===r.term){const e=r.record.propertyValues.findIndex((e=>e.name===o.FIELD_GROUP_PROP_NAME_DATA));s=r.record.propertyValues[e].value.Collection,p.pointer=`record/propertyValues/${e}/value/Collection/${t}/annotations/`}else if("com.sap.vocabularies.UI.v1.DataPoint"===r.term){const e=r.record.propertyValues.findIndex((e=>e.name===o.FIELD_GROUP_PROP_NAME_DATA));s=r.record.propertyValues[e].value.Collection,p.pointer=`record/propertyValues/${e}/value/Collection/${t}/annotations/`}const m=s[t],d=a?u(m,n):c(m,n);if(d.changeType)return p.changeType=d.changeType,p.pointer+=d.annotationIndex,d.changeType===l.ChangeType.Update&&(p.pointer+="/value/",n===i.ENUM_VALUE_NONE?p.content={type:l.MOD_TYPE_EXPRESSION,value:{type:i.ExpressionType.Bool,Bool:!0}}:p.content={type:l.MOD_TYPE_EXPRESSION,value:"boolean"==typeof n?{type:i.ExpressionType.Bool,Bool:n}:{type:i.ExpressionType.Path,Path:n}}),p},t.changeRecordHidden=c,t.changeRecordHiddenValue=u,t.changeReferenceFacets=function(e,t,n,a,o){const i=o?u(t,o):c(t,a);if(i.changeType){let t=e.annotationPath.split("@com.sap.vocabularies.UI.v1.Facets/")[1];t=t||e.annotationPath.split("@com.sap.vocabularies.UI.v1.HeaderFacets/")[1];const a={annotation:n,changeType:i.changeType,pointer:(0,r.convertODataPath)(n,t)+`/annotations/${i.annotationIndex}`};return i.changeType===l.ChangeType.Update&&(a.pointer+="/value/"),a}}},95207:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateVisualizationsInSPV=t.updateVisualizationsInPV=t.changeUIPropertyVariant=t.getSvPathKindProperty=t.getPvPathKindProperty=t.changeToNewVariantPV=t.buildVariant=t.resolveValueListAnnotation=t.getReferencedPvFromValueListAnnotation=t.getAnnotationRecordForNewAnnotation=t.convertUINodeInternalValueHelp=t.changeValueHelpTextAndTextArrangement=t.changeValueHelpAnnotations=t.changeTextArrangementReusable=t.changeTextArrangement=t.getText=t.getTargetPathForValueHelpText=t.getAllowedValuesForText=t.addTextArrangementSyncActions=t.changeTextReusable=t.changeText=t.handleDeletionsSemanticObject=t.semanticObjectMappingCreationCallback=t.adaptSemanticObject=t.isTooComplexSelection=t.isFieldControlApplicable=t.getFieldRestrictionForAnnotation=t.getLabel=t.getDefaultLabelAnnotation=t.changeRecordLabel=t.changeDataFieldLabel=t.getFieldType=t.UI_PROP_NAME_DYNAMIC_MEASURES=t.UI_PROP_NAME_DIMENSIONS=t.UI_PROP_NAME_DEFAULT_MEASURES=t.UI_PROP_NAME_DEFAULT_DYNAMIC_MEASURES=t.UI_PROP_NAME_DEFAULT_DIMENSIONS=t.UI_PROP_NAME_AVAILABLE_MEASURES=t.UI_PROP_NAME_AVAILABLE_DYNAMIC_MEASURES=t.UI_PROP_NAME_AVAILABLE_DIMENSIONS=t.UI_PROP_NAME_MEASURES=t.AGGREGATION_METHOD_CUSTOM=t.changeUIPropertiesMeasuresDimensions=t.copyChangedTextAndTextArrangement=t.convertMeasuresAndDimensions=void 0;var a=n(83112);Object.defineProperty(t,"convertMeasuresAndDimensions",{enumerable:!0,get:function(){return a.convertMeasuresAndDimensions}}),Object.defineProperty(t,"copyChangedTextAndTextArrangement",{enumerable:!0,get:function(){return a.copyChangedTextAndTextArrangement}}),Object.defineProperty(t,"changeUIPropertiesMeasuresDimensions",{enumerable:!0,get:function(){return a.changeUIPropertiesMeasuresDimensions}}),Object.defineProperty(t,"AGGREGATION_METHOD_CUSTOM",{enumerable:!0,get:function(){return a.AGGREGATION_METHOD_CUSTOM}}),Object.defineProperty(t,"UI_PROP_NAME_MEASURES",{enumerable:!0,get:function(){return a.UI_PROP_NAME_MEASURES}}),Object.defineProperty(t,"UI_PROP_NAME_AVAILABLE_DIMENSIONS",{enumerable:!0,get:function(){return a.UI_PROP_NAME_AVAILABLE_DIMENSIONS}}),Object.defineProperty(t,"UI_PROP_NAME_AVAILABLE_DYNAMIC_MEASURES",{enumerable:!0,get:function(){return a.UI_PROP_NAME_AVAILABLE_DYNAMIC_MEASURES}}),Object.defineProperty(t,"UI_PROP_NAME_AVAILABLE_MEASURES",{enumerable:!0,get:function(){return a.UI_PROP_NAME_AVAILABLE_MEASURES}}),Object.defineProperty(t,"UI_PROP_NAME_DEFAULT_DIMENSIONS",{enumerable:!0,get:function(){return a.UI_PROP_NAME_DEFAULT_DIMENSIONS}}),Object.defineProperty(t,"UI_PROP_NAME_DEFAULT_DYNAMIC_MEASURES",{enumerable:!0,get:function(){return a.UI_PROP_NAME_DEFAULT_DYNAMIC_MEASURES}}),Object.defineProperty(t,"UI_PROP_NAME_DEFAULT_MEASURES",{enumerable:!0,get:function(){return a.UI_PROP_NAME_DEFAULT_MEASURES}}),Object.defineProperty(t,"UI_PROP_NAME_DIMENSIONS",{enumerable:!0,get:function(){return a.UI_PROP_NAME_DIMENSIONS}}),Object.defineProperty(t,"UI_PROP_NAME_DYNAMIC_MEASURES",{enumerable:!0,get:function(){return a.UI_PROP_NAME_DYNAMIC_MEASURES}});var o=n(9811);Object.defineProperty(t,"getFieldType",{enumerable:!0,get:function(){return o.getFieldType}});var r=n(30033);Object.defineProperty(t,"changeDataFieldLabel",{enumerable:!0,get:function(){return r.changeDataFieldLabel}}),Object.defineProperty(t,"changeRecordLabel",{enumerable:!0,get:function(){return r.changeRecordLabel}}),Object.defineProperty(t,"getDefaultLabelAnnotation",{enumerable:!0,get:function(){return r.getDefaultLabelAnnotation}}),Object.defineProperty(t,"getLabel",{enumerable:!0,get:function(){return r.getLabel}});var i=n(91938);Object.defineProperty(t,"getFieldRestrictionForAnnotation",{enumerable:!0,get:function(){return i.getFieldRestrictionForAnnotation}}),Object.defineProperty(t,"isFieldControlApplicable",{enumerable:!0,get:function(){return i.isFieldControlApplicable}});var s=n(30459);Object.defineProperty(t,"isTooComplexSelection",{enumerable:!0,get:function(){return s.isTooComplexSelection}});var l=n(90241);Object.defineProperty(t,"adaptSemanticObject",{enumerable:!0,get:function(){return l.adaptSemanticObject}}),Object.defineProperty(t,"semanticObjectMappingCreationCallback",{enumerable:!0,get:function(){return l.semanticObjectMappingCreationCallback}}),Object.defineProperty(t,"handleDeletionsSemanticObject",{enumerable:!0,get:function(){return l.handleDeletionsSemanticObject}});var p=n(12840);Object.defineProperty(t,"changeText",{enumerable:!0,get:function(){return p.changeText}}),Object.defineProperty(t,"changeTextReusable",{enumerable:!0,get:function(){return p.changeTextReusable}}),Object.defineProperty(t,"addTextArrangementSyncActions",{enumerable:!0,get:function(){return p.addTextArrangementSyncActions}}),Object.defineProperty(t,"getAllowedValuesForText",{enumerable:!0,get:function(){return p.getAllowedValuesForText}}),Object.defineProperty(t,"getTargetPathForValueHelpText",{enumerable:!0,get:function(){return p.getTargetPathForValueHelpText}}),Object.defineProperty(t,"getText",{enumerable:!0,get:function(){return p.getText}});var c=n(44886);Object.defineProperty(t,"changeTextArrangement",{enumerable:!0,get:function(){return c.changeTextArrangement}}),Object.defineProperty(t,"changeTextArrangementReusable",{enumerable:!0,get:function(){return c.changeTextArrangementReusable}});var u=n(72691);Object.defineProperty(t,"changeValueHelpAnnotations",{enumerable:!0,get:function(){return u.changeValueHelpAnnotations}}),Object.defineProperty(t,"changeValueHelpTextAndTextArrangement",{enumerable:!0,get:function(){return u.changeValueHelpTextAndTextArrangement}}),Object.defineProperty(t,"convertUINodeInternalValueHelp",{enumerable:!0,get:function(){return u.convertUINodeInternalValueHelp}}),Object.defineProperty(t,"getAnnotationRecordForNewAnnotation",{enumerable:!0,get:function(){return u.getAnnotationRecordForNewAnnotation}}),Object.defineProperty(t,"getReferencedPvFromValueListAnnotation",{enumerable:!0,get:function(){return u.getReferencedPvFromValueListAnnotation}}),Object.defineProperty(t,"resolveValueListAnnotation",{enumerable:!0,get:function(){return u.resolveValueListAnnotation}});var m=n(1176);Object.defineProperty(t,"buildVariant",{enumerable:!0,get:function(){return m.buildVariant}}),Object.defineProperty(t,"changeToNewVariantPV",{enumerable:!0,get:function(){return m.changeToNewVariantPV}}),Object.defineProperty(t,"getPvPathKindProperty",{enumerable:!0,get:function(){return m.getPvPathKindProperty}}),Object.defineProperty(t,"getSvPathKindProperty",{enumerable:!0,get:function(){return m.getSvPathKindProperty}}),Object.defineProperty(t,"changeUIPropertyVariant",{enumerable:!0,get:function(){return m.changeUIPropertyVariant}}),Object.defineProperty(t,"updateVisualizationsInPV",{enumerable:!0,get:function(){return m.updateVisualizationsInPV}}),Object.defineProperty(t,"updateVisualizationsInSPV",{enumerable:!0,get:function(){return m.updateVisualizationsInSPV}})},30033:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultLabelAnnotation=t.getLabel=t.changeDataFieldLabel=t.changeRecordLabel=void 0;const a=n(20576),o=n(78263),r=n(35586),i=n(70704),s=n(23635);function l(e,t){let n=null;const r=e.propertyValues.findIndex((e=>e.name===o.DATA_FIELD_PROP_NAME_LABEL));if(t){const i={type:"String",String:t};r>-1?(e.propertyValues[r].value=i,n=a.ChangeType.Update):(e.propertyValues.push({name:o.DATA_FIELD_PROP_NAME_LABEL,value:i}),n=a.ChangeType.Insert)}else r>-1&&(e.propertyValues.splice(r,1),n=a.ChangeType.Delete);return{changeType:n,propIndex:r>-1?r:e.propertyValues.length-1}}t.changeRecordLabel=l,t.changeDataFieldLabel=function(e,t,n){const r=[],i=t.annotation;let s=null,p="";if("com.sap.vocabularies.UI.v1.FieldGroup"===i.term){const t=i.record.propertyValues.findIndex((e=>e.name===o.FIELD_GROUP_PROP_NAME_DATA)),a=i.record.propertyValues[t].value;s=l(("Collection"===a.type?a.Collection:[])[n],e),p=`/record/propertyValues/${t}/value/Collection/${n}`}else"com.sap.vocabularies.UI.v1.Identification"!==i.term&&"com.sap.vocabularies.UI.v1.LineItem"!==i.term||(s=l(i.collection[n],e),p=`/collection/${n}`);if(s.changeType){p+=`/propertyValues/${s.propIndex}`,s.changeType===a.ChangeType.Update&&(p+="/value/String");const e={annotation:i,changeType:s.changeType,pointer:p};r.push({targetPath:t.target,changes:[e]})}return r},t.getLabel=function(e,t,n){const a=(0,r.buildUIPropFromRecordProp)(e,o.DATA_FIELD_PROP_NAME_LABEL,t,{isLanguageDependent:!0});if(a?.tooComplex)return a;let l,p,c=!1,u="";const m=n.label?.top||n.title?.top;if(!m){if(a)return{...a,useBase:!1};const e=[n.location];return{tooComplex:!1,isLanguageDependent:!0,type:s.UI_PROP_TYPE_STRING,value:"",useBase:!1,locations:e}}const d=(0,s.getValueFromAnnotation)(m.annotation,s.ExpressionType.String);if(d.tooComplexReason?(c=!0,l=(0,s.buildTooComplex)(d.tooComplexReason,d.range,m.fileUri).tooComplexLocations):(u=d.value,l=[{fileUri:m.fileUri,range:d.range}],p=d.multilineType),a){const e=a;return e.locations.push(...l),{...e,useBase:!1,baseValue:{value:u},baseTooComplex:c}}const y={tooComplex:!1,type:s.UI_PROP_TYPE_STRING,isLanguageDependent:!0,value:"",useBase:!0,baseTooComplex:c,locations:l};return u&&(y.baseValue={value:u}),p&&(y.readonly=!0,y.readonlyTooltip=i.i18n.t("ReadonlyTooltipMultilineText")),y},t.getDefaultLabelAnnotation=function(e,t,n){let a;const r=(0,s.resolveMetadataElement)(e.metadataService,n+"/"+t,!0);if(r){const t=e.annotationIndex[(0,s.getAnnotationIndexKey)(r.path,"com.sap.vocabularies.Common.v1.Label")],n=e.annotationIndex[(0,s.getAnnotationIndexKey)(r.path,o.CDS_TERM_NAME_TITLE)];a=t||n}return a}},91938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFieldRestrictionForAnnotation=t.isFieldControlApplicable=void 0;const a=n(23635);t.isFieldControlApplicable=function(e){const t=function(e){let t;const n=a.TooComplexReason.ConstantExpressionExpected,o=e.readOnly?.top?.annotation;if(o&&o.value?.type&&"Bool"!==o.value?.type)return t=[{...(0,a.getLocation)(e.readOnly?.top),reason:n}],{tooComplex:!0,tooComplexLocations:t};const r=e.parentAnnoReadOnly?.top?.annotation;if(r&&r.value?.type&&"Bool"!==r.value?.type)return t=[{...(0,a.getLocation)(e.parentAnnoReadOnly?.top),reason:n}],{tooComplex:!0,tooComplexLocations:t};const i=e.updatable?.top?.annotation;if(i&&i.value?.type&&"Bool"!==i.value?.type)return t=[{...(0,a.getLocation)(e.updatable.top),reason:n}],{tooComplex:!0,tooComplexLocations:t};const s=e.updateRestrictions?.top?.annotation;if(s&&s.record.propertyValues[0].value.type&&"Bool"!==s.record.propertyValues[0].value.type)return t=[{...(0,a.getLocation)(e.updateRestrictions.top),reason:n}],{tooComplex:!0,tooComplexLocations:t};const l=e.computed?.top?.annotation;if(l&&l.value?.type&&"Bool"!==l.value?.type)return t=[{...(0,a.getLocation)(e.computed.top),reason:n}],{tooComplex:!0,tooComplexLocations:t};const p=e.fieldControl?.top?.annotation;return!p||p.value?.type&&"EnumMember"===p.value?.type||!e.fieldControl.app.length?void 0:(t=[{...(0,a.getLocation)(e.fieldControl?.top),reason:n}],{tooComplex:!0,tooComplexLocations:t})}(e);if(t)return{tooComplex:t};const n=[],o=e.readOnly?.top?.annotation,r=e.parentAnnoReadOnly?.top?.annotation,i=e.updatable?.top?.annotation,s=e.updateRestrictions?.top?.annotation,l=e.computed?.top?.annotation,p=e.fieldControl?.top?.annotation,c="EnumMember"===p?.value?.type?p.value.EnumMember:"";let u=!1;return!o||"Bool"===o?.value?.type&&!1===o?.value?.Bool?!r||"Bool"===r?.value?.type&&!1===r?.value?.Bool?i&&"Bool"===i?.value?.type&&!1===i?.value?.Bool?(u=!0,n.push((0,a.getLocation)(e.updatable.top))):s&&"Bool"===s?.record.propertyValues[0].value.type&&!1===s?.record.propertyValues[0].value.Bool?(u=!0,n.push((0,a.getLocation)(e.updateRestrictions.top))):!l||"Bool"===l?.value?.type&&!1===l?.value?.Bool?c&&!["com.sap.vocabularies.Common.v1.FieldControlType/Mandatory","com.sap.vocabularies.Common.v1.FieldControlType/Optional","com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly"].includes(c)&&(u=!0,n.push((0,a.getLocation)(e.fieldControl.top))):(u=!0,n.push((0,a.getLocation)(e.computed.top))):(u=!0,n.push({fileUri:e.parentAnnoReadOnly.top.fileUri,range:r.origin})):(u=!0,n.push((0,a.getLocation)(e.readOnly.top))),{isNotApplicable:u,isNotApplicableLocations:n}},t.getFieldRestrictionForAnnotation=function(e){function t(e){switch(e){case"com.sap.vocabularies.Common.v1.FieldControlType/Mandatory":return{value:"Mandatory",text:(0,a.getFormattedText)("Mandatory")};case"com.sap.vocabularies.Common.v1.FieldControlType/Optional":return{value:"Optional",text:(0,a.getFormattedText)("Optional")};case"com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly":return{value:"ReadOnly",text:(0,a.getFormattedText)("ReadOnly")}}return{value:"",text:(0,a.getFormattedText)("")}}const n=[{value:"None",text:(0,a.getFormattedText)("None")},{value:"Mandatory",text:(0,a.getFormattedText)("Mandatory")},{value:"Optional",text:(0,a.getFormattedText)("Optional")},{value:"ReadOnly",text:(0,a.getFormattedText)("ReadOnly")}],o={tooComplex:!1,type:a.UI_PROP_TYPE_ENUM,value:"None",allowedValues:n};return e?.app?.length&&"EnumMember"===e.app[0].annotation.value?.type&&(o.value=t(e.app[0].annotation.value.EnumMember).value,o.text=t(e.app[0].annotation.value.EnumMember).text),e?.base?.length&&("EnumMember"!==e.base[0].annotation.value?.type?o.baseTooComplex=!0:(o.baseValue=t(e.base[0].annotation.value.EnumMember),o.value!==o.baseValue.value&&(0,a.excludeValueFromList)(n,o.baseValue.value))),o}},30459:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTooComplexSelection=t.isEmptyPresentationDataToKeep=t.isMatchingPresentationDataToKeep=t.getPresentationDataToKeep=t.isEmptySelection=t.isSameSelection=t.isMatchingSelection=t.getNormalizedSelectionFromRecord=t.getCurrentSelectionInfo=void 0;const a=n(78263),o=n(35586),r=n(23635),i="Parameters",s="FilterExpression",l="PropertyName";function p(e,t,n){const a={sign:"I",option:"EQ",low:null};let o=(0,r.getValueFromRecord)(e,"Sign",r.ExpressionType.EnumMember);if(!o||o.tooComplexReason)return void(n.tooComplex=!0);if(a.sign=o.value,o=(0,r.getValueFromRecord)(e,"Option",r.ExpressionType.EnumMember),!o||o.tooComplexReason)return void(n.tooComplex=!0);a.option=o.value;let i=e.propertyValues.find((e=>"Low"===e.name));i?.value?(a.low=y(i?.value),i=e.propertyValues.find((e=>"High"===e.name)),i?.value&&(a.high=y(i?.value)),t.push(a)):n.tooComplex=!0}function c(e,t){let n=!1,a=(0,r.getValueFromRecord)(e,l,r.ExpressionType.PropertyPath);if(a||(n=!0,a=(0,r.getValueFromRecord)(e,"PropertyNameFrom",r.ExpressionType.PropertyPath)),!a||a.tooComplexReason)return void(t.tooComplex=!0);const o={name:a.value,value:null},i=n?"PropertyValueFrom":"PropertyValue";let s=e.propertyValues.find((e=>e.name===i));s?.value&&(o.value=y(s?.value)),n?(a=(0,r.getValueFromRecord)(e,"PropertyNameTo",r.ExpressionType.PropertyPath),a&&!a.tooComplexReason?(o.nameTo=a.value,o.valueTo=null,s=e.propertyValues.find((e=>"PropertyValueTo"===e.name)),s?.value&&(o.valueTo=y(s?.value)),t.parameters.push(o)):t.tooComplex=!0):t.parameters.push(o)}function u(e,t){let n=(0,r.getValueFromRecord)(e,l,r.ExpressionType.PropertyPath),a=!1;if(n||(n=(0,r.getValueFromRecord)(e,"DynamicPropertyName",r.ExpressionType.AnnotationPath),a=!0),!n||n.tooComplexReason)return void(t.tooComplex=!0);const o={name:n.value,ranges:[],isDynamicName:a},i=e.propertyValues.find((e=>"Ranges"===e.name));if(i?.value?.type===r.ExpressionType.Collection){for(const e of i.value.Collection)p(e,o.ranges,t);o.ranges.sort(((e,t)=>JSON.stringify(e).localeCompare(JSON.stringify(t)))),t.selectOptions.push(o)}else t.tooComplex=!0}function m(e,t,n){if(e?.value)if(e.value.type===r.ExpressionType.Collection)for(const a of e.value.Collection)n?c(a,t):u(a,t);else t.tooComplex=!0}function d(e){const t={filterString:"",parameters:[],selectOptions:[]},n=e?.propertyValues.find((e=>e.name===i));if(m(n,t,!0),t.tooComplex)return t;const a=e?.propertyValues.find((e=>e.name===s));if(a?.value){if(a.value.type!==r.ExpressionType.String)return t.tooComplex=!0,t;t.filterString=a.value.String}const o=e?.propertyValues.find((e=>"SelectOptions"===e.name));return m(o,t,!1),t.tooComplex||(t.parameters.sort(((e,t)=>JSON.stringify(e).localeCompare(JSON.stringify(t)))),t.selectOptions.sort(((e,t)=>JSON.stringify(e).localeCompare(JSON.stringify(t))))),t}function y(e){let t="";if(e.type===r.ExpressionType.Bool)t=!1===e.Bool?"false":"true";else t=String(e[e.type]);return`${e.type}(${t})`}function g(e,t){return!(!f(e)||!f(t))||!f(e)&&!f(t)&&(!e.tooComplex&&!t.tooComplex&&((!e.filterString&&!t.filterString||e.filterString===t.filterString)&&(!!h(e.parameters,t.parameters)&&h(e.selectOptions,t.selectOptions))))}function f(e){return!e||!(e.tooComplex||e.filterString||e.parameters?.length||e.selectOptions?.length)}function h(e,t){if((e?.length||0)!==(t?.length||0))return!1;for(const[n,a]of(e||[]).entries()){const e=t[n];if(JSON.stringify(a)!==JSON.stringify(e))return!1}return!0}t.getCurrentSelectionInfo=function(e,t,n){let o,i="",s=t?.top?.fileUri,l=null;const p=!n?.isAlp&&!n?.isMultiViewLR&&!n?.isOp;if("com.sap.vocabularies.UI.v1.SelectionVariant"===t?.top.annotation.term){const{term:e,qualifier:n}=t.top.annotation;i=`${t.top.target}/@${e}`+(n?`#${n}`:""),o=t.top.annotation.record,l=d(o)}else if("com.sap.vocabularies.UI.v1.SelectionPresentationVariant"===t?.top.annotation.term){const n=t.top.annotation.record?.propertyValues?.find((e=>e.name===a.SPV_PROP_NAME_SELECTION_VARIANT));if(n?.value?.type===r.ExpressionType.Path){i=`${t?.top.target}/${n.value.Path}`;const{term:a,qualifier:p}=(0,r.resolveRelativeAnnotationPath)(i),c=(0,r.getAnnotationIndexKey)(t?.top.target,a,p),u=e.annotationIndex[c];o=u?.top.annotation.record,s=u.top.fileUri,l=d(o)}else n?.value?.type===r.ExpressionType.Record&&(o=n?.value?.Record,l=d(o))}else if(n?.isTableVisualization&&p&&["com.sap.vocabularies.UI.v1.PresentationVariant","com.sap.vocabularies.UI.v1.LineItem"].includes(t?.top.annotation.term)){const n=(0,r.getAnnotationIndexKey)(t?.top.target,"com.sap.vocabularies.UI.v1.SelectionVariant"),a=e.annotationIndex[n];a&&(o=a.top.annotation.record,s=a.top.fileUri,l=d(o),i=`${t?.top.target}/@com.sap.vocabularies.UI.v1.SelectionVariant`)}return{selection:l,svAnnotationPath:i,svRecord:o,fileUri:s}},t.getNormalizedSelectionFromRecord=d,t.isMatchingSelection=function(e,t,n,i){const s=n?.propertyValues?.find((e=>e.name===a.SPV_PROP_NAME_SELECTION_VARIANT));if(!s?.value)return f(i.selection);if(s.value.type===r.ExpressionType.Path){const{term:n,qualifier:a}=(0,r.resolveRelativeAnnotationPath)(s.value.Path);if(i.svAnnotationPath&&(0,o.annotationMatch)({term:n,qualifier:a},(0,r.resolvePath)(i.svAnnotationPath)))return!0;{const o=(0,r.getAnnotationIndexKey)(t,n,a),s=e.annotationIndex[o]?.top.annotation.record;return g(i.selection,d(s))}}if(s.value.type===r.ExpressionType.Record){const e=d(s?.value.Record);return g(i.selection,e)}return!1},t.isSameSelection=g,t.isEmptySelection=f;const T="MaxItems",P="GroupBy",E="TotalBy",v="Total",b="RequestAtLeast",_="IncludeGrandTotal",A="DynamicTotal",C="InitialExpansionLevel";function N(){return{initialExpansionLevel:y({type:r.ExpressionType.Int,Int:1})}}function I(e,t){return(e||[]).map((e=>e.type!==t?"":e[t])).sort(((e,t)=>e.localeCompare(t)))}function S(e,t,n){let a="";switch(n){case r.ExpressionType.Int:a=0;break;case r.ExpressionType.Bool:a=!1}const o={type:n};o[n]=a;const i=y(o);return(!e||e===i)&&(!t||t===i)}function x(e,t,n){try{(0,o.throwIfSome)([!S(e.maxItems,t.maxItems,r.ExpressionType.Int)&&e.maxItems!==t.maxItems,!O(e.totalBy,t.totalBy),!O(e.total,t.total),!O(e.requestAtLeast,t.requestAtLeast),!S(e.includeGrandTotal,t.includeGrandTotal,r.ExpressionType.Bool)&&e.includeGrandTotal!==t.includeGrandTotal,!O(e.dynamicTotal,t.dynamicTotal),!S(e.initialExpansionLevel,t.initialExpansionLevel,r.ExpressionType.Int)&&e.initialExpansionLevel!==t.initialExpansionLevel,(e.sorting?.length||0)!==(t.sorting?.length||0),n&&(e.visualization||"")!==(t.visualization||"")])}catch(e){return!1}return(e.sorting||[]).findIndex(((e,n)=>{const a=t.sorting[n];return e.descending!==a.descending||e.property!==a.property}))<0}function O(e,t){if((e?.length||0)!==(t?.length||0))return!1;for(const[n,a]of(e||[]).entries()){if(a!==t[n])return!1}return!0}t.getPresentationDataToKeep=function(e,t,n){if(!t?.top?.annotation||!n?.isTableVisualization)return N();const{term:o,record:i}=t.top.annotation;let s;switch(o){case"com.sap.vocabularies.UI.v1.SelectionPresentationVariant":{const n=i?.propertyValues.find((e=>e.name===a.SPV_PROP_NAME_PRESENTATION_VARIANT));if(n?.value.type===r.ExpressionType.Record)s=n?.value.Record;else if(n?.value.type===r.ExpressionType.Path){const a=n?.value.Path,{term:o,qualifier:i}=(0,r.resolveRelativeAnnotationPath)(a),l=(0,r.getAnnotationIndexKey)(t.top.target,o,i);s=e.annotationIndex[l]?.top.annotation.record}break}case"com.sap.vocabularies.UI.v1.PresentationVariant":s=i;break;case"com.sap.vocabularies.UI.v1.SelectionVariant":{const n=(0,r.getAnnotationIndexKey)(t.top.target,"com.sap.vocabularies.UI.v1.PresentationVariant");s=e.annotationIndex[n]?.top.annotation.record;break}}return function(e,t){const n=N();if(!e?.propertyValues)return n;let o=e.propertyValues.find((e=>e.name===T))?.value;n.maxItems=y(o||{type:r.ExpressionType.Int,Int:0}),o=e.propertyValues.find((e=>e.name===P))?.value,o=e.propertyValues.find((e=>e.name===E))?.value,n.totalBy=o?.type===r.ExpressionType.Collection?I(o.Collection,r.ExpressionType.PropertyPath):[],o=e.propertyValues.find((e=>e.name===v))?.value,n.total=o?.type===r.ExpressionType.Collection?I(o.Collection,r.ExpressionType.PropertyPath):[],o=e.propertyValues.find((e=>e.name===b))?.value,n.requestAtLeast=o?.type===r.ExpressionType.Collection?I(o.Collection,r.ExpressionType.PropertyPath):[],o=e.propertyValues.find((e=>e.name===_))?.value,n.includeGrandTotal=y(o||{type:r.ExpressionType.Bool,Bool:!1}),o=e.propertyValues.find((e=>e.name===A))?.value,n.dynamicTotal=o?.type===r.ExpressionType.Collection?I(o.Collection,r.ExpressionType.AnnotationPath):[],o=e.propertyValues.find((e=>e.name===C))?.value,n.initialExpansionLevel=y(o||{type:r.ExpressionType.Int,Int:1}),t?.includeSorting&&(n.sorting=function(e){const t=[],n=e.propertyValues.find((e=>e.name===a.PV_PROP_NAME_SORT_ORDER))?.value;if(n?.type===r.ExpressionType.Collection)for(const e of n.Collection||[]){let n=e.propertyValues.find((e=>e.name===a.PV_PROP_NAME_SORT_ORDER_PROPERTY))?.value;n||(n=e.propertyValues.find((e=>e.name===a.PV_PROP_NAME_SORT_ORDER_DYNAMIC_PROPERTY))?.value);const o=e.propertyValues.find((e=>e.name===a.PV_PROP_NAME_SORT_ORDER_DESCENDING))?.value;t.push({property:y(n||{type:r.ExpressionType.PropertyPath,PropertyPath:""}),descending:y(o||{type:r.ExpressionType.Bool,Bool:!1})})}return t}(e));t?.includeVisualization&&(o=e.propertyValues.find((e=>e.name===a.PV_PROP_NAME_VISUALIZATIONS))?.value,n.visualization=o?.type===r.ExpressionType.Collection&&o.Collection[0]?.AnnotationPath||"");return n}(s,n)},t.isMatchingPresentationDataToKeep=x,t.isEmptyPresentationDataToKeep=function(e){return x(e,N())},t.isTooComplexSelection=function(e){const{selection:t,svRecord:n,fileUri:a}=e;if(!t)return null;const o=[];if(t.tooComplex){const e=n?.propertyValuesOrigins;if(e?.length>0){const t={start:e[0].start,end:e[e.length-1].end};o.push({fileUri:a,range:t,reason:r.TooComplexReason.ConstantExpressionExpected})}return{tooComplex:!0,tooComplexLocations:o}}if(t.filterString){const e=n.propertyValues.findIndex((e=>e.name===s)),t=n.propertyValuesOrigins[e];return o.push({fileUri:a,range:t,reason:r.TooComplexReason.UnsupportedProperty}),{tooComplex:!0,tooComplexLocations:o}}if(t.parameters?.length){const e=n.propertyValues.findIndex((e=>e.name===i)),t=n.propertyValuesOrigins[e];return o.push({fileUri:a,range:t,reason:r.TooComplexReason.UnsupportedProperty}),{tooComplex:!0,tooComplexLocations:o}}return null}},90241:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.semanticObjectMappingCreationCallback=t.handleDeletionsSemanticObject=t.adaptSemanticObject=void 0;const a=n(46163),o=n(35586),r=n(23635);t.adaptSemanticObject=function(e,t,n){const{semanticObject:a,semanticObjectPropertyName:i}=r.uiPropertyNames.semanticObject,s=n[i];if(!s||(0,r.isTooComplex)(s))return;const l=t.path,p=(0,r.getAnnotationIndexKey)(l,"com.sap.vocabularies.Common.v1.SemanticObjectMapping"),c=e.annotationIndex[p],u=c?.top?.annotation;if(!u)return;const m=c?.top?.fileUri,d=n[a];if(!(0,r.isTooComplex)(d)){const e=d;if(!(e.useBase?e.baseValue.value:e.value)&&!e.baseTooComplex)return void(n[i]=(0,r.buildTooComplex)(r.TooComplexReason.NoValidAnnoCombination,u.origin,m))}if(!u.collection||1!==u.collection.length)return void(n[i]=(0,r.buildTooComplex)(r.TooComplexReason.CollectionWithSingleValueExpected,u.origin,m));const y=u.collection[0];if(!y.propertyValues.find((e=>"LocalProperty"===e.name))||!y.propertyValues.find((e=>"SemanticObjectProperty"===e.name))){const e=u.collectionOrigins[0];return void(n[i]=(0,r.buildTooComplex)(r.TooComplexReason.MissingProperty,e,m))}const g=y.propertyValues.findIndex((e=>"LocalProperty"===e.name)),f=y.propertyValues[g].value.PropertyPath,h=(0,o.resolveToGeneratedMetadataElement)(e.metadataService,l)?.name;if(f!==h){const e=y.propertyValuesOrigins[g];n[i]=(0,r.buildTooComplex)(r.TooComplexReason.UnsupportedPath,e,m)}},t.handleDeletionsSemanticObject=function(e,t,n,a){const i=[],{semanticObject:s,semanticObjectPropertyName:l}=r.uiPropertyNames.semanticObject;function p(a,o){if(!a)return;const l=t.path,p=(0,r.getAnnotationIndexKey)(l,o),c=e.annotationIndex[p];c?.top&&!c.base?.length&&i.push({targetPath:l,changes:[{annotation:{term:o}}]}),n.delete(s)}let c=!1,u=!1;const m=a[l];if(n.has(s)&&!n.get(s)){const e=m,t=e.useBase?e.baseValue?.value:e.value;(0,o.throwIf)((0,r.isTooComplex)(m)||t&&e.readonly,"Initial value not allowed for Semantic Object (since Semantic Object Property cannot be deleted)"),u=!0,c=!0}return!n.has(l)||n.get(l)||m.readonly||(u=!0),p(c,"com.sap.vocabularies.Common.v1.SemanticObject"),p(u,"com.sap.vocabularies.Common.v1.SemanticObjectMapping"),i};t.semanticObjectMappingCreationCallback=(e,t,n,i)=>{const s=(0,o.resolveToGeneratedMetadataElement)(e.metadataService,i.target),l={type:"com.sap.vocabularies.Common.v1.SemanticObjectMappingType",propertyValues:[{name:"LocalProperty",value:{type:r.ExpressionType.PropertyPath,PropertyPath:s?.name}},{name:"SemanticObjectProperty",value:{type:r.ExpressionType.String,String:""}}]},p={$Type:"com.sap.vocabularies.Common.v1.SemanticObjectMappingType"};p.LocalProperty={type:r.ExpressionType.PropertyPath,PropertyPath:s?.name},p.SemanticObjectProperty={type:r.ExpressionType.String,String:""},p[a.PREVIOUS_INDEX_PROPERTY_NAME]={type:r.ExpressionType.Int,Int:0};const c={0:p},u=(0,r.getAnnotationIndexKey)(i.target,"com.sap.vocabularies.Common.v1.SemanticObjectMapping");return t.set(u,c),{term:"com.sap.vocabularies.Common.v1.SemanticObjectMapping",collection:[l]}}},95521:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeDataPointTargetValue=void 0;const a=n(20576),o=n(78263);t.changeDataPointTargetValue=function(e,t){const n=[],r=t.annotation;let i=null,s="";if("com.sap.vocabularies.UI.v1.DataPoint"===r.term){const l=r.record.propertyValues.findIndex((e=>e.name===o.DATA_POINT_PROP_NAME_TARGET_VALUE));if(l>-1){r.record.propertyValues[l].value={type:"Int",Int:e},i=a.ChangeType.Update,s=`/record/propertyValues/${l}/value/Int`;const o={annotation:r,changeType:i,pointer:s};n.push({targetPath:t.target,changes:[o]})}}return n}},12840:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllowedValuesForText=t.addTextArrangementSyncActions=t.getText=t.getTargetPathForValueHelpText=t.changeTextReusable=t.changeText=void 0;const a=n(41810),o=n(20576),r=n(78263),i=n(70704),s=n(23635),l=n(91310),p=n(35586);function c(e,t,n,a,i,p,c){let u,m,d=!1;if(a===s.ENUM_VALUE_NONE)e?.app.length?(u={annotation:{term:"com.sap.vocabularies.Common.v1.Text"}},d=!0):e?.base.length;else if(a!==s.ENUM_VALUE_NONE&&e?.app.length){const t=e.top.annotation;t.value.Path=a,u={annotation:t,changeType:o.ChangeType.Update,pointer:"/value/Path"}}else if(a!==s.ENUM_VALUE_NONE)if(e?.top){const t=e.top.annotation;t.value.Path=a,u={annotation:t,changeType:o.ChangeType.Update,pointer:"/value/Path"}}else{const e={term:"com.sap.vocabularies.Common.v1.Text",value:{type:"Path",Path:a}};p&&c&&function(e,t,n,a,o){if((0,s.isTooComplex)(t.entitySet)||!t.entitySet.value)return;const r=(0,s.getTextArrangementValueFromLayer)(n.text,n.textArrangement,"base"),i=r.embedded||r.separate,p=(0,l.findAssociationsToEntitySet)(e,n.element,t.entitySet.value),c=(0,s.getTextArrangementSyncActions)(t,p,!i||i.tooComplex?void 0:i.value);if(c?.text&&c.text.changedProperties.find((e=>e.propertyName===s.UI_PROP_NAME_TEXT))?.value===o){const e=c.text.changedProperties.find((e=>e.propertyName===s.UI_PROP_NAME_TEXT_ARRANGEMENT));e&&(a.annotations=[{term:"com.sap.vocabularies.UI.v1.TextArrangement",value:{type:"EnumMember",EnumMember:e.value}}])}}(i,p,c,e,a),m={top:{fileUri:"",target:n,annotation:e},app:[],base:[],isSplit:!1,readonly:!1},u={annotation:e}}const y=u?[u]:[];d&&t?.app.length&&y.push({annotation:{term:r.CDS_TERM_NAME_TEXT_ARRANGEMENT}});return{targetChanges:y.length>0?[{targetPath:n,changes:y}]:[],commonTextDeleted:d,layeredAnnotationTextNew:m}}function u(e,t,n){let o;if(t?.app?.length&&!function(e,t,n){if([s.ENUM_VALUE_NONE,s.ENUM_VALUE_NULL,s.ENUM_VALUE_NOT_APPLICABLE].includes(n.value))return!0;return function(e,t,n){const o=t.top.target,r=(0,a.getPathBaseMetadataElement)(e.metadataService,o).name,i=(0,s.resolveRelativeAnnotationPath)(n.value).relativePath;if(!i)return!1;const l=`${r}/${i}`;return!!(0,s.resolveMetadataElement)(e.metadataService,l)}(e,t,n)&&n.allowedValues.some((e=>e.value===n.value))}(e,t,n)){const n=t.top.fileUri,{range:a,value:r,tooComplexReason:i}=(0,s.getPathCheckedValueFromAnnotation)(t.top.annotation,s.ExpressionType.Path,{allowedPathsOptions:{allowedTypes:new Set([s.ExpressionType.String])},context:e,fileUri:n,target:t});o=i?(0,s.buildTooComplex)(i,a,n,void 0,r):(0,s.buildTooComplex)(s.TooComplexReason.UnsupportedPath,a,n)}return o}function m(e,t,n){const o=e.metadataService,r=(0,a.getPathBaseMetadataElement)(o,t.path),i={allowedTypes:new Set([s.ExpressionType.String]),ignoreHidden:!0},l=(0,p.getAvailableFieldPathsForEntity)(e,r,i),c=l.fieldPaths.filter((e=>e!==t.name));if(!n)for(const n of l.associations){if(t.structuredType&&t.name!==n)continue;const a=o.getMetadataElement(r.path+"/"+n);if(a?.structuredType){const t=o.getMetadataElement(a?.structuredType);c.push(...(0,p.getAvailableFieldPathsForEntity)(e,t,i).fieldPaths.map((e=>n+"/"+e)))}}return c.map((e=>({value:e})))}t.changeText=function(e,t,n,a,o,r=!1){const i=r?t.valueHelpText:t.text,s=r?t.valueHelpTextArrangement:t.textArrangement,{targetChanges:l,commonTextDeleted:p,layeredAnnotationTextNew:u}=c(i,s,n,e,a,o,t);return u&&(r?t.valueHelpText=u:t.text=u),{targetChanges:l,commonTextDeleted:p}},t.changeTextReusable=c,t.getTargetPathForValueHelpText=function(e,t,n){let a;try{const o=(0,p.getEntityTypeNameByEntitySet)(e.metadataService,t),r=(0,s.resolveMetadataElement)(e.metadataService,o+"/"+n,!0);r&&(a=r.path)}catch(e){}return a},t.getText=function(e,t,n,a,o=!0,r=!1){const l=(0,s.getTextAndTextArrangement)(e,t,n),p=l.textArrangement;let c=l.text;!(0,s.isTooComplex)(c)&&!c.baseTooComplex&&r&&c.baseValue?.value.includes("/")&&(c.baseTooComplex=!0),a&&!(0,s.isTooComplex)(c)&&(!function(e){const{context:t,mdElement:n,excludeBaseLayerValue:a,omitAssociationsForText:o,text:r,textArrangement:i}=e;r.allowedValues=m(t,n,o),0===r.allowedValues.length?r.value=s.ENUM_VALUE_NOT_APPLICABLE:(a&&(0,s.isEnumBaseValueDiffers)(r)&&(0,s.excludeValueFromList)(r.allowedValues,r.baseValue.value),i.tooComplex&&r.value!==s.ENUM_VALUE_NONE||r.allowedValues.unshift({value:s.ENUM_VALUE_NONE}))}({context:n,mdElement:a,text:c,textArrangement:p,excludeBaseLayerValue:o,omitAssociationsForText:r}),c=u(n,e,c)||c);const{isDisabled:d,tooltip:y}=function(e,t){const n=(0,s.isTooComplex)(e)&&e.tooComplexLocations[0].reason===s.TooComplexReason.NoValidPath;if(!(0,s.isTooComplex)(e)&&e.value!==s.ENUM_VALUE_NONE&&e.value!==s.ENUM_VALUE_NOT_APPLICABLE)return{isDisabled:!1};if((0,s.isTooComplex)(e)&&!n&&!(0,s.isTooComplex)(t))return{isDisabled:!0,tooltip:i.i18n.t("ReadOnlyTooltipTextArrangement_TextValueIsTooComplex")};if(!(0,s.isTooComplex)(e)&&e.baseValue?.value===s.ENUM_VALUE_NONE&&e.value===s.ENUM_VALUE_NONE)return{isDisabled:!0,tooltip:i.i18n.t("ReadOnlyTooltipTextArrangement_NoTextAnnotation")};if(!(0,s.isTooComplex)(t)&&t.value===s.ENUM_VALUE_NOT_APPLICABLE)return{isDisabled:!0,tooltip:i.i18n.t("ReadOnlyTooltipTextArrangement_NotApplicable")};return{isDisabled:!1}}(c,p);return(0,s.isTooComplex)(p)||!d||p.readonly||(p.readonly=!0,p.readonlyTooltip=y),{text:c,textArrangement:p}},t.addTextArrangementSyncActions=function(e,t,n,a){const o=(0,s.getTextArrangementSyncActions)(e,t,n,a);Object.keys(o??{}).forEach((t=>(t=>{const n=e[t];n&&!(0,s.isTooComplex)(n)&&o[t]&&(n.action=o[t])})(t)))},t.getAllowedValuesForText=m},44886:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeTextArrangementReusable=t.changeTextArrangement=void 0;const a=n(20576),o=n(78263),r=n(23635);function i(e,t,n,i,p){const c=e=>(e?.annotations||[]).findIndex((e=>"com.sap.vocabularies.UI.v1.TextArrangement"===e.term&&!e.qualifier)),u=[],m=e?.top.annotation,d=e?.base.find((e=>c(e.annotation)>-1))?.annotation,y=p||e?.top.target,g=c(m),f=c(d),h=function(e,t,n,a,o){let i;if([r.ENUM_VALUE_NONE,r.ENUM_VALUE_NULL].includes(e))i=function(e,t,n,a,o){let i;e>=0?i=t<0||a===r.ENUM_VALUE_NONE?s(n,e):o?l(null,e,n):s(n,e):t>=0&&a===r.ENUM_VALUE_NULL&&(i=l(null,e,n));return i}(t,n,a,e,o);else{i=l(`com.sap.vocabularies.UI.v1.TextArrangementType/${e}`,t,a)}return i}(n,g,f,m,i.isCdsProject);if(h&&u.push({targetPath:y,changes:[h]}),!h&&![r.ENUM_VALUE_NONE,r.ENUM_VALUE_NULL].includes(n)||!t?.top)return u;if(t.base?.length&&[r.ENUM_VALUE_NONE,r.ENUM_VALUE_NULL].includes(n)){if(n===r.ENUM_VALUE_NONE&&t.app?.length){const e=(0,r.getValueFromAnnotation)(t.app[0].annotation,r.ExpressionType.EnumMember);(0,r.isTooComplex)(e)||u.push({targetPath:y,changes:[{annotation:{term:o.CDS_TERM_NAME_TEXT_ARRANGEMENT}}]})}if(n===r.ENUM_VALUE_NULL&&t.base.length)if(t.app.length){const e=(0,r.getValueFromAnnotation)(t.app[0].annotation,r.ExpressionType.EnumMember);(0,r.isTooComplex)(e)||u.push({targetPath:y,changes:[{changeType:a.ChangeType.Update,pointer:"/value/EnumMember",content:{type:a.MOD_TYPE_PRIMITIVE,value:null,expressionType:r.ExpressionType.Null},annotation:{term:o.CDS_TERM_NAME_TEXT_ARRANGEMENT,value:{type:r.ExpressionType.Null}}}]})}else{if(e?.top.annotation&&0===e?.app.length&&!h){const t=e.top.annotation,n=(0,r.getPathCheckedValueFromAnnotation)(e.top.annotation,r.ExpressionType.Path,{fileUri:e.top.fileUri,context:i,allowedPathsOptions:{allowedTypes:new Set([r.ExpressionType.String])},target:e});(0,r.isTooComplex)(n)||u.push({targetPath:y,changes:[{annotation:{term:t.term,value:t.value,annotations:f>=0?[{term:"com.sap.vocabularies.UI.v1.TextArrangement",value:{type:r.ExpressionType.Null}}]:[]}}]})}u.push({targetPath:y,changes:[{changeType:a.ChangeType.Insert,annotation:{term:o.CDS_TERM_NAME_TEXT_ARRANGEMENT,value:{type:r.ExpressionType.Null}}}]})}}else u.push({targetPath:y,changes:[{annotation:{term:o.CDS_TERM_NAME_TEXT_ARRANGEMENT}}]});return u}function s(e,t){return e.annotations.splice(t,1),{annotation:e,changeType:a.ChangeType.Delete,pointer:`/annotations/${t}`}}function l(e,t,n){if(t>=0)return null===e?(n.annotations[t].value.type=r.ExpressionType.Null,{annotation:n,changeType:a.ChangeType.Update,pointer:`/annotations/${t}/value/`,content:{type:a.MOD_TYPE_EXPRESSION,value:{type:r.ExpressionType.Null}}}):(n.annotations[t].value.type=r.ExpressionType.EnumMember,n.annotations[t].value.EnumMember=e,{annotation:n,changeType:a.ChangeType.Update,pointer:`/annotations/${t}/value/`,content:{type:a.MOD_TYPE_EXPRESSION,value:{type:r.ExpressionType.EnumMember,EnumMember:e}}});{n.annotations||(n.annotations=[]);const t={term:"com.sap.vocabularies.UI.v1.TextArrangement",value:null===e?{type:"Null"}:{type:"EnumMember",EnumMember:e}},o=`/annotations/${n.annotations.length}`;return n.annotations.push(t),{annotation:n,changeType:a.ChangeType.Insert,pointer:o,content:{type:a.MOD_TYPE_ANNOTATION,value:t}}}}t.changeTextArrangement=function(e,t,n,a=""){return i(a?t.valueHelpText:t.text,a?t.valueHelpTextArrangement:t.textArrangement,e,n,a)},t.changeTextArrangementReusable=i},72691:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDummyPresentationVariantAnnotation=t.getReferencedPvFromValueListAnnotation=t.adaptValueHelpResultListSorting=t.adaptValueHelpResultList=t.isValueHelpBaseValueAllowed=t.changeValueHelpTextAndTextArrangement=t.getAnnotationRecordForNewAnnotation=t.changeValueHelpLabelI18n=t.updateValueHelpLabel=t.changeValueHelpAnnotations=t.convertUINodeInternalValueHelp=t.getValueHelpDefaultProps=t.resolveCdsValueListAnnotation=t.resolveValueListAnnotation=t.copyValueListFromBase=void 0;const a=n(70704),o=n(41810),r=n(95207),i=n(20576),s=n(78263),l=n(35586),p=n(19777),c=n(46163),u=n(23635),m="$IN_OUT$",d=["CollectionRoot","DistinctValuesSupported","SearchSupported","FetchValues","SelectionVariantQualifier"];function y(e){return!d.includes(e.name)||("SearchSupported"===e.name&&!0===e.value?.Bool||"DistinctValuesSupported"===e.name&&(!e.value||!1===e.value?.Bool))}function g(e,t){const n=[];for(const a of e.propertyValues)y(a)?n.push(a):t&&n.push({name:a.name,value:{type:u.ExpressionType.Null}});const a={propertyValues:n};return e.type&&(a.type=e.type),a}function f(e,t,n,a=!1,o){const r=t.top.annotation,i=a?s.VALUE_LIST_PROP_NAME_SELECTION_VARIANT_QUALIFIER:s.VALUE_LIST_PROP_NAME_PRESENTATION_VARIANT_QUALIFIER;let l=r.record.propertyValues.findIndex((e=>e.name===i)),p=null,c="";l<0&&e.isCdsProject&&t.app.length&&t.base.length&&(({annotation:p,fileUri:c}=t.base[t.base.length-1]),l=p.record.propertyValues.findIndex((e=>e.name===i)));const{record:m,origin:d}=p||r,y=c||t.top.fileUri,g=l>=0?m.propertyValuesOrigins[l]:null,f=l>=0?m.propertyValues[l]:null;if(o&&!a){if(l<0)return{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.MissingProperty,d,y)};if(f?.value.type===u.ExpressionType.Null)return{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedValue,g,y)}}if(f&&![u.ExpressionType.String,u.ExpressionType.Null].includes(f.value?.type))return{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.ConstantExpressionExpected,g,y)};const h=f?.value?.String||"";return h&&!M(e,n,h,a)?{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedValue,g,y)}:{qualifier:h}}function h(e,t,n,a){const o=(0,u.getValueFromAnnotation)(n,u.ExpressionType.Bool);if(o.tooComplexReason)return{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.ConstantExpressionExpected,n.origin,a)};let r,i;return o?.value&&({collectionPath:r,valueListProperty:i}=T(e,t)),{valueListContent:{collectionPath:r,valueListProperty:i,parameterCount:1}}}function T(e,t){const n={collectionPath:null,valueListProperty:null,parameterCount:1};if(t.isEntityType){const a=t.structuredType.split("/").pop();n.collectionPath=(0,l.getEntitySetNameByEntityType)(e.metadataService,a,e.pageBase.entitySetName);const o=e.metadataService.getMetadataElement(t.structuredType);n.collectionPath&&o?.keys.length&&(n.valueListProperty=o.keys[0])}return n}function P(e,t,n){let a=!!t.valueList?.base?.length&&e.isCdsProject;if(a){const{record:e}=t.valueList.base[t.valueList.base.length-1].annotation;a=!!e?.propertyValues.find((e=>e.name===n&&e.value?.String))}return a}function E(e,t,n){const a=[],o="true"===t.cells[u.uiPropertyNames.valueHelp.resultListSortingColumns.descending],r=e.propertyValues.findIndex((e=>e.name===s.PV_PROP_NAME_SORT_ORDER_DESCENDING));if(r>=0){const t=e.propertyValues[r].value;t.type===u.ExpressionType.Bool&&t.Bool!==o&&a.push({annotation:null,changeType:i.ChangeType.Update,pointer:`${n}/propertyValues/${r}/value/Bool`,content:{type:i.MOD_TYPE_PRIMITIVE,value:o,expressionType:u.ExpressionType.Bool}})}else o&&a.push({annotation:null,changeType:i.ChangeType.Insert,pointer:`${n}/propertyValues/${e.propertyValues.length}`,content:{type:i.MOD_TYPE_PROP_VALUE,value:{name:s.PV_PROP_NAME_SORT_ORDER_DESCENDING,value:{type:u.ExpressionType.Bool,Bool:o}}}});return a}function v(e,t,n){const a=(t||[]).map((e=>b(e)));return{targetPath:e,changes:[{annotation:{term:"com.sap.vocabularies.UI.v1.PresentationVariant",qualifier:n,record:{type:"com.sap.vocabularies.UI.v1.PresentationVariantType",propertyValues:[{name:s.PV_PROP_NAME_SORT_ORDER,value:{type:u.ExpressionType.Collection,Collection:a}}]}}}]}}function b(e){const{property:t,descending:n}=u.uiPropertyNames.valueHelp.resultListSortingColumns;return{type:"com.sap.vocabularies.Common.v1.SortOrderType",propertyValues:[{name:s.PV_PROP_NAME_SORT_ORDER_PROPERTY,value:{type:u.ExpressionType.PropertyPath,PropertyPath:e.cells[t]}},{name:s.PV_PROP_NAME_SORT_ORDER_DESCENDING,value:{type:u.ExpressionType.Bool,Bool:"true"===e.cells[n]}}]}}function _(e,t,n){const a=[],o=e.record,r=o.propertyValues.findIndex((e=>e.name===s.VALUE_LIST_PROP_NAME_LABEL)),l=r>=0?o.propertyValues[r]:null,p=l?.value?.String||"";if(p&&!t)n?(a.push({changeType:i.ChangeType.Update,pointer:`/record/propertyValues/${r}/value`,content:{type:i.MOD_TYPE_EXPRESSION,value:{type:u.ExpressionType.String,String:""}},annotation:e}),o.propertyValues[r].value={type:u.ExpressionType.String,String:""}):(a.push({changeType:i.ChangeType.Delete,pointer:`/record/propertyValues/${r}`,annotation:e}),o.propertyValues.splice(r,1));else if(t)if(l)if(l.value.type===u.ExpressionType.Null){const n={type:u.ExpressionType.String,String:t};a.push({changeType:i.ChangeType.Update,pointer:`/record/propertyValues/${r}/value`,content:{type:i.MOD_TYPE_EXPRESSION,value:n},annotation:e}),o.propertyValues[r].value=n}else p!==t&&(a.push({changeType:i.ChangeType.Update,pointer:`/record/propertyValues/${r}/value/String`,content:{type:i.MOD_TYPE_PRIMITIVE,value:t,expressionType:u.ExpressionType.String},annotation:e}),o.propertyValues[r].value.String=t);else{const n={name:s.VALUE_LIST_PROP_NAME_LABEL,value:{type:u.ExpressionType.String,String:t}};a.push({changeType:i.ChangeType.Insert,pointer:`/record/propertyValues/${o.propertyValues.length}`,content:{type:i.MOD_TYPE_PROP_VALUE,value:n},annotation:e}),o.propertyValues.push(n)}return a}function A(e,t,n,a,o){let r=!1,s=[];return r||({done:r,changes:s}=function(e,t,n,a){const o=[];let r=!1;const s=[],p=new Map;let c=-1;for(const[n,a]of e.entries()){const e=t.indexOf(a);e>=0?(s.push(a),c=e):p.set(n,c)}if((0,l.areIdentical)(t,s)){for(const[t,r]of p){const s=a(n.get(e[t]));o.push({changeType:i.ChangeType.Insert,pointer:`${r+1}`,content:{type:i.MOD_TYPE_RECORD,value:s},annotation:null})}r=!0}return{done:r,changes:o}}(e,t,n,a)),r||({done:r,changes:s}=function(e,t){const n=[];let a=!1;const o=[],r=[];for(const[n,a]of t.entries())e.includes(a)?o.push(a):r.push(n);if((0,l.areIdentical)(o,e)){const e=(0,l.buildRanges)(r);for(const t of e){const e=t.to-t.from+1;let a=`${t.from}`;e>1&&(a+=`-${t.to}`),n.push({changeType:i.ChangeType.Delete,pointer:a,annotation:null})}a=!0}return{done:a,changes:n}}(e,t)),r||({done:r,changes:s}=function(e,t,n){const a=[];let o=!1;if((0,l.containSameEntries)(t,e)){const{found:r,range:s,insertBeforeIndex:p}=(0,l.findSingleMove)(t,e,n);if(r){const e=s.to-s.from+1;let t=`${s.from}`;e>1&&(t+=`-${s.to}`),a.push({changeType:i.ChangeType.Move,pointer:`${p}`,moveFromPointer:t,annotation:null}),o=!0}}return{done:o,changes:a}}(e,t,o)),{done:r,changes:s}}function C(e,t,n){const a=[];e.type!==t.cells.type&&a.push({annotation:null,changeType:i.ChangeType.Update,pointer:`${n}/type`,content:{type:i.MOD_TYPE_RECORD_TYPE,value:t.cells.type}});const o=e.propertyValues.findIndex((e=>e.name===s.VALUE_LIST_PROP_NAME_LOCAL_DATA_PROPERTY));return o<0?t.cells.localDataProperty&&"com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly"!==t.cells.type&&a.push({annotation:null,changeType:i.ChangeType.Insert,pointer:`${n}/propertyValues/${e.propertyValues.length}`,content:{type:i.MOD_TYPE_PROP_VALUE,value:{name:s.VALUE_LIST_PROP_NAME_LOCAL_DATA_PROPERTY,value:{type:u.ExpressionType.PropertyPath,PropertyPath:t.cells.localDataProperty}}}}):t.cells.localDataProperty?a.push({annotation:null,changeType:i.ChangeType.Update,pointer:`${n}/propertyValues/${o}/value/PropertyPath`,content:{type:i.MOD_TYPE_PRIMITIVE,value:t.cells.localDataProperty,expressionType:u.ExpressionType.PropertyPath}}):a.push({annotation:null,changeType:i.ChangeType.Delete,pointer:`${n}/propertyValues/${o}`}),a}function N(e,t){const n=t.propertyValues.find((e=>e.name===s.PV_PROP_NAME_SORT_ORDER_DESCENDING));return(n?.value.type===u.ExpressionType.Bool&&n.value.Bool)!==("true"===e.cells[u.uiPropertyNames.valueHelp.resultListSortingColumns.descending])}function I(e,t){let n=!1,a=!1;if(t.type!==e.cells.type)n=!0,"com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly"!==t.type&&"com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly"!==e.cells.type||(a=!0);else if("com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly"!==t.type){const a=t.propertyValues.find((e=>e.name===s.VALUE_LIST_PROP_NAME_LOCAL_DATA_PROPERTY));(a.value.type===u.ExpressionType.PropertyPath?a.value.PropertyPath:"")!==e.cells.localDataProperty&&(n=!0)}return{cellsHaveChanged:n,tooComplexCellChange:a}}function S(e,t,n,a,o,r){const i=x(a,t),l=(n||[]).map((e=>O(e))),p={type:"com.sap.vocabularies.Common.v1.ValueListType",propertyValues:[{name:s.VALUE_LIST_PROP_NAME_COLLECTION_PATH,value:{type:u.ExpressionType.String,String:e}},{name:s.VALUE_LIST_PROP_NAME_PARAMETERS,value:{type:u.ExpressionType.Collection,Collection:[i,...l]}}]};return r&&p.propertyValues.push({name:s.VALUE_LIST_PROP_NAME_LABEL,value:{type:u.ExpressionType.String,String:r}}),o&&p.propertyValues.push({name:s.VALUE_LIST_PROP_NAME_PRESENTATION_VARIANT_QUALIFIER,value:{type:u.ExpressionType.String,String:o}}),p}function x(e,t){return{type:"com.sap.vocabularies.Common.v1.ValueListParameterInOut",propertyValues:[{name:s.VALUE_LIST_PROP_NAME_LOCAL_DATA_PROPERTY,value:{type:u.ExpressionType.PropertyPath,PropertyPath:e}},{name:s.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY,value:{type:u.ExpressionType.String,String:t}}]}}function O(e){const{localDataProperty:t,type:n,valueListProperty:a}=u.uiPropertyNames.valueHelp.resultListColumns,o=e.cells[n],r=e.cells[a],i={type:o,propertyValues:[{name:s.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY,value:{type:u.ExpressionType.String,String:r}}]};if("com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly"!==o){const n=e.cells[t];i.propertyValues.push({name:s.VALUE_LIST_PROP_NAME_LOCAL_DATA_PROPERTY,value:{type:u.ExpressionType.PropertyPath,PropertyPath:n}})}return i}function D(e,t,n,a,o){if(e.tooComplexReason)return{tooComplex:(0,u.buildTooComplex)(e.tooComplexReason,e.range,o)};if(!["com.sap.vocabularies.Common.v1.ValueListParameterIn","com.sap.vocabularies.Common.v1.ValueListParameterOut","com.sap.vocabularies.Common.v1.ValueListParameterInOut","com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly"].includes(e.record?.type||""))return{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedType,e.range,o)};const r=e.record;let i=(0,u.getValueFromRecord)(r,s.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY,u.ExpressionType.String);if(i?.value){const e=i?.value;if(n.has(e))return R(i.range,n.get(e),o);n.set(e,i.range)}if("com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly"===r?.type)return{};if(i=(0,u.getValueFromRecord)(r,s.VALUE_LIST_PROP_NAME_LOCAL_DATA_PROPERTY,u.ExpressionType.PropertyPath),i?.value){const n=i?.value;if(t.has(n))return R(i.range,t.get(n),o);if(t.set(n,i?.range),"com.sap.vocabularies.Common.v1.ValueListParameterInOut"===r?.type&&n===a)return{inOutRecord:r,inOutRecordRange:e.range}}return{}}function R(e,t,n){const a=(0,u.buildTooComplex)(u.TooComplexReason.NonUniqueEntryInCollection,e,n);return a.tooComplexLocations.push({fileUri:n,range:t,reason:u.TooComplexReason.NonUniqueEntryInCollection}),{tooComplex:a}}function M(e,t,n,a=!1){const{entityContainerMdElement:o,entitySets:r}=(0,l.getEntityContainerData)(e.metadataService);if(!r.includes(t))return null;const i=`${o.name}/${t}`,s=e.metadataService.getMetadataElement(i)?.structuredType,p=a?"com.sap.vocabularies.UI.v1.SelectionVariant":"com.sap.vocabularies.UI.v1.PresentationVariant";let c=(0,u.getAnnotationIndexKey)(i,p,n),m=e.annotationIndex[c];return m||(c=(0,u.getAnnotationIndexKey)(s,p,n),m=e.annotationIndex[c]),m?.top?.annotation?m:null}t.copyValueListFromBase=g,t.resolveValueListAnnotation=function(e,t,n){const{fileUri:a,target:o,annotation:r}=t.top;if(!r.record)return{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.ConstantExpressionExpected,r.origin,a)};const i=function(e,t=!1,n=!1){const a=e.top.fileUri,o=e.top.annotation.record;let r=null,i="";if(t&&e.app.length&&e.base.length){const t=e.base[e.base.length-1];i=t.fileUri,r=t.annotation.record}for(const e of d){if(n&&e===s.VALUE_LIST_PROP_NAME_SELECTION_VARIANT_QUALIFIER)continue;let t=o.propertyValues.findIndex((t=>t.name===e)),l=o,p=a;if(t<0&&r&&(t=r.propertyValues.findIndex((t=>t.name===e)),l=r,p=i),t<0)continue;const c=l.propertyValues[t];if(c.value.type===u.ExpressionType.Null||y(c))continue;const m=l.propertyValuesOrigins[t];return(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedProperty,m,p)}}(t,e.isCdsProject,n);if(i)return{tooComplex:i};let p=(0,u.getValueFromRecord)(r.record,s.VALUE_LIST_PROP_NAME_LABEL,u.ExpressionType.String);if(p?.tooComplexReason)return{tooComplex:(0,u.buildTooComplex)(p.tooComplexReason,p.range,a)};if(p=(0,u.getValueFromRecord)(r.record,s.VALUE_LIST_PROP_NAME_COLLECTION_PATH,u.ExpressionType.String),!p)return{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.MissingProperty,r.origin,a)};if(p.tooComplexReason)return{tooComplex:(0,u.buildTooComplex)(p.tooComplexReason,p.range,a)};const c=p.value;if(!(0,l.getEntityContainerData)(e.metadataService).entitySets.includes(c))return{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.UnsupportedValue,p.range,a)};const m=e.metadataService.getMetadataElement(o),g=(0,l.getLocalDataPropertyName)(e.metadataService,m).elementName,{tooComplex:h,inOutRecord:T,inOutRecordRange:P,parameterCount:E}=function(e,t,n,a){const o=(0,u.getValueFromRecord)(e,s.VALUE_LIST_PROP_NAME_PARAMETERS,u.ExpressionType.Collection);if(!o)return{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.MissingProperty,t,a)};if(o.tooComplexReason)return{tooComplex:(0,u.buildTooComplex)(o.tooComplexReason,o.range,a)};if(0===o.collection.length)return{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.NoEntryInCollection,o.range,a)};const{collection:r,collectionOrigins:i,range:l}=o;let p,c;const m=new Map,d=new Map;for(let e=0;e<r.length;e++){const t=D((0,u.getValueFromCollection)(r,i,e,u.ExpressionType.Record),m,d,n,a);if(t.tooComplex)return t;t.inOutRecord&&({inOutRecord:p,inOutRecordRange:c}=t)}if(!p)return{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.MissingEntryInCollection,l,a)};return{inOutRecord:p,inOutRecordRange:c,parameterCount:r?.length||0}}(r.record,r.origin,g,a);if(h)return{tooComplex:h};if(p=(0,u.getValueFromRecord)(T,s.VALUE_LIST_PROP_NAME_LOCAL_DATA_PROPERTY,u.ExpressionType.PropertyPath),!p)return{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.MissingProperty,P,a)};if(p.tooComplexReason)return{tooComplex:(0,u.buildTooComplex)(p.tooComplexReason,p.range,a)};const v=p.value;if(p=(0,u.getValueFromRecord)(T,s.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY,u.ExpressionType.String),!p)return{tooComplex:(0,u.buildTooComplex)(u.TooComplexReason.MissingProperty,P,a)};if(p.tooComplexReason)return{tooComplex:(0,u.buildTooComplex)(p.tooComplexReason,p.range,a)};const b=p.value,{tooComplex:_,qualifier:A}=f(e,t,c,!1,n);if(_)return{tooComplex:_};const C={collectionPath:c,valueListProperty:b,presentationVariantQualifier:A,parameterCount:E};if(n){const{tooComplex:a,qualifier:o}=f(e,t,c,!0,n);if(a)return{tooComplex:a};C.selectionVariantQualifier=o}return{valueListContent:C,localDataProperty:v}},t.resolveCdsValueListAnnotation=h,t.getValueHelpDefaultProps=T,t.convertUINodeInternalValueHelp=function(e,t,n,o,i){const p=o.path.split("/")[0],c=(0,l.getLocalDataPropertyName)(e.metadataService,o).elementName,m={valueListTarget:{tooComplex:!1,type:u.UI_PROP_TYPE_STRING,isLanguageDependent:!1,value:`${p}/${c}`},asDropDown:null,entitySet:null,entitySetProperty:null,valueHelpText:null,valueHelpTextArrangement:null};let d=!1,{collectionPath:y,valueListProperty:g}=n;if(n.additionalValueHelpVariantsExist&&(m.infoMessage=a.i18n.t("MessageAdditionalValueHelpVariants")),!y||!g){const{collectionPath:t,valueListProperty:n}=T(e,o);!y&&t&&(y=t,d=!0),!g&&n&&(g=n,d=!0)}if(d&&y&&g){const n=(0,r.getTargetPathForValueHelpText)(e,y,g);if(n){const a=(0,u.getAnnotationIndexKey)(n,"com.sap.vocabularies.Common.v1.Text"),o=(0,u.getAnnotationIndexKey)(n,s.CDS_TERM_NAME_TEXT_ARRANGEMENT);t.valueHelpText=e.annotationIndex[a],t.valueHelpTextArrangement=e.annotationIndex[o]}}m.entitySet={tooComplex:!1,type:u.UI_PROP_TYPE_ENUM,value:y||u.ENUM_VALUE_NOT_APPLICABLE,allowedValues:[]},m.entitySetProperty={tooComplex:!1,type:u.UI_PROP_TYPE_DEPENDENT_ENUM,value:g||u.ENUM_VALUE_NOT_APPLICABLE,allowedValues:{}},t.valueList?.readonly&&(m.entitySet.readonly=!0,m.entitySetProperty.readonly=!0,m.entitySet.readonlyTooltip=t.valueList?.readonlyTooltip,m.entitySetProperty.readonlyTooltip=t.valueList?.readonlyTooltip),function(e,t,n,a){e.entitySetProperties||(e.entitySetProperties=(0,l.getEntitySetProperties)(e));for(const[o,r]of e.entitySetProperties){n.allowedValues[o]=[];for(const[e,t]of r)a===t&&n.allowedValues[o].push(e);n.allowedValues[o].length?t.allowedValues.push({value:o}):delete n.allowedValues[o]}}(e,m.entitySet,m.entitySetProperty,i),({text:m.valueHelpText,textArrangement:m.valueHelpTextArrangement}=(0,r.getText)(t.valueHelpText,t.valueHelpTextArrangement,e,null,!1));const f=t.valueListWithFixedValues?.top;return f?(m.asDropDown=(0,l.buildUIPropBoolFromAnnotation)(f.annotation,f.fileUri),!(0,u.isTooComplex)(m.asDropDown)&&t.valueListWithFixedValues.readonly&&(m.asDropDown.readonly=!0,m.asDropDown.readonlyTooltip=t.valueListWithFixedValues.readonlyTooltip)):m.asDropDown={tooComplex:!1,type:u.UI_PROP_TYPE_BOOL,value:!0},m},t.changeValueHelpAnnotations=function(e,t,n,a,r){const p=r.valueList?.top?.annotation,c=r.cdsValueList?.top?.annotation,d=r.presentationVariant?.top?.annotation,y=function(e,t,n,a){if(!n)return!1;const{tooComplex:o,valueListContent:r}=h(e,a,n,"");return!o&&!t.valueHelpLabel&&r.collectionPath&&r.valueListProperty&&r.collectionPath===t.entitySet&&r.valueListProperty===t.entitySetProperty&&!t.resultList?.length&&!t.resultListSorting?.length}(e,a,c,n);if(y)return{removeValueListAnno:!!p,valueHelpTargetChanges:[]};const{generatedQualifier:f,entityType:T,entitySetChanged:D}=function(e,t,n,a){let o="",r="";n&&(o=(0,u.getValueFromRecord)(n.record,s.VALUE_LIST_PROP_NAME_PRESENTATION_VARIANT_QUALIFIER,u.ExpressionType.String)?.value,r=(0,u.getValueFromRecord)(n.record,s.VALUE_LIST_PROP_NAME_COLLECTION_PATH,u.ExpressionType.String)?.value);const i=r!==a.entitySet,p=a.resultListSorting.length>0&&(!o||i),c=`${(0,l.getEntityContainerData)(e.metadataService).entityContainerMdElement.name}/${a.entitySet}`,m=e.metadataService.getMetadataElement(c).structuredType;let d="";if(p){const n="com.sap.vocabularies.UI.v1.PresentationVariant",a=(0,u.getExistingQualifiers)(e.annotationIndex,m,n);a.push(...(0,u.getExistingQualifiers)(e.annotationIndex,c,n));const o=`vh_${t.split(".").pop().replace("/","_")}`;d=(0,l.generateId)(a,o,!0)}return{generatedQualifier:d,entityType:m,entitySetChanged:i}}(e,t,p,a),R=function(e,t){let n=t;const a=(0,o.getPathBaseMetadataElement)(e.metadataService,t)?.path;a&&n.startsWith(a)&&(n=n.slice(a.length+1));const r=(0,l.resolveToGeneratedMetadataElement)(e.metadataService,a+"/"+n);return n=r?.name||n,n}(e,t),M=P(e,r,s.VALUE_LIST_PROP_NAME_PRESENTATION_VARIANT_QUALIFIER),V=P(e,r,s.VALUE_LIST_PROP_NAME_LABEL),U=[];if(p){const n=r.valueList.readonly?[]:function(e,t,n,a,o,r){const l=[],p=e.record;l.push(..._(e,t.valueHelpLabel,r));let c=(0,u.getValueFromRecord)(p,s.VALUE_LIST_PROP_NAME_COLLECTION_PATH,u.ExpressionType.String);c.tooComplexReason||c.value===t.entitySet||(p.propertyValues[c.propIndex].value.String=t.entitySet,l.push({changeType:i.ChangeType.Update,pointer:`/record/propertyValues/${c.propIndex}/value/String`,content:{type:i.MOD_TYPE_PRIMITIVE,value:t.entitySet,expressionType:u.ExpressionType.String},annotation:e}));c=(0,u.getValueFromRecord)(p,s.VALUE_LIST_PROP_NAME_PARAMETERS,u.ExpressionType.Collection);const d=c.propIndex,y=c.collection,g=`/record/propertyValues/${d}/value/Collection`,f=y.findIndex((e=>{if("com.sap.vocabularies.Common.v1.ValueListParameterInOut"!==e.type)return!1;const t=(0,u.getValueFromRecord)(e,s.VALUE_LIST_PROP_NAME_LOCAL_DATA_PROPERTY,u.ExpressionType.PropertyPath);return t&&t.value===n})),{changes:h,parametersCollectionNew:T}=function(e,t,n,a){const{arrayOld:o,arrayNew:r,mapNew:l}=function(e,t,n){const a=e.map(((e,t)=>{if(t===n)return m;const{value:a}=(0,u.getValueFromRecord)(e,s.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY,u.ExpressionType.String);return a})),o=[],r=new Map;for(const e of t){const t=e.cells[u.uiPropertyNames.valueHelp.resultListColumns.valueListProperty];o.push(t),r.set(t,e)}let i=!1;for(let e=n-1;e>=0&&!i;e--){const t=o.indexOf(a[e]);t>=0&&(o.splice(t+1,0,m),i=!0)}i||o.splice(0,0,m);return{arrayOld:a,arrayNew:o,mapNew:r}}(e,t.resultList,n),p=r.map((e=>e===m?x(a,t.entitySetProperty):O(l.get(e)))),{unchanged:c,cellChangeOnly:d,rowChangeOnly:y}=function(e,t,n,a){let o=!1,r=!1,i=!1,l=-1;const p=new Set;for(const[c,m]of e.entries()){if(c===n)continue;l++;const e=t[l],d=m.propertyValues.find((e=>e.name===s.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY)),y=d?.value.type===u.ExpressionType.String?d.value.String:"";if(p.add(y),e?.cells.valueListProperty!==y&&(o=!0),a.has(y)){const e=I(a.get(y),m);r=r||e.cellsHaveChanged,i=i||e.tooComplexCellChange}if(o&&r)break}o||(o=[...a.keys()].some((e=>!p.has(e))));return{unchanged:!o&&!r,cellChangeOnly:r&&!i&&!o,rowChangeOnly:!r&&o}}(e,t.resultList,n,l);let g=[],f=!1;c?f=!0:d?(g=function(e,t,n){const a=[];let o=-1;for(const[r,i]of e.entries()){if(r===t)continue;o++;const e=n.resultList[o];a.push(...C(i,e,`${r}`))}return a}(e,n,t),f=!0):y&&({done:f,changes:g}=A(r,o,l,O,n));f?g.push(...function(e,t,n){const a=[],o=e[t],r=(0,u.getValueFromRecord)(o,s.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY,u.ExpressionType.String);r.tooComplexReason||r.value===n.entitySetProperty||(o.propertyValues[r.propIndex].value.String=n.entitySetProperty,a.push({changeType:i.ChangeType.Update,pointer:`${t}/propertyValues/${r.propIndex}/value/String`,content:{type:i.MOD_TYPE_PRIMITIVE,value:n.entitySetProperty,expressionType:u.ExpressionType.String},annotation:null}));return a}(e,n,t)):g.push({annotation:null,changeType:i.ChangeType.Update,pointer:"",content:{type:i.MOD_TYPE_COLLECTION,value:p}});return{changes:g,parametersCollectionNew:p}}(y,t,f,n);h.length>0&&(y.splice(0,y.length,...T),h.forEach((t=>{t.annotation=e,t.pointer=`${g}/${t.pointer}`,t.moveFromPointer=t.moveFromPointer?`${g}/${t.moveFromPointer}`:"",l.push(t)})));const P=t.resultListSorting?.length>0;return l.push(...function(e,t,n,a){const o=[],r=e.record,l=r.propertyValues.findIndex((e=>e.name===s.VALUE_LIST_PROP_NAME_PRESENTATION_VARIANT_QUALIFIER)),p=l>=0?r.propertyValues[l]:null,c=p?.value?.String||"";if(c&&!t)a?(o.push({changeType:i.ChangeType.Update,pointer:`/record/propertyValues/${l}/value`,content:{type:i.MOD_TYPE_EXPRESSION,value:{type:u.ExpressionType.Null}},annotation:e}),r.propertyValues[l].value={type:u.ExpressionType.Null}):(o.push({changeType:i.ChangeType.Delete,pointer:`/record/propertyValues/${l}`,annotation:e}),r.propertyValues.splice(l,1));else if(t)if(p)if(p.value.type===u.ExpressionType.Null){const t={type:u.ExpressionType.String,String:n};o.push({changeType:i.ChangeType.Update,pointer:`/record/propertyValues/${l}/value`,content:{type:i.MOD_TYPE_EXPRESSION,value:t},annotation:e}),r.propertyValues[l].value=t}else n&&c!==n&&(o.push({changeType:i.ChangeType.Update,pointer:`/record/propertyValues/${l}/value/String`,content:{type:i.MOD_TYPE_PRIMITIVE,value:n,expressionType:u.ExpressionType.String},annotation:e}),r.propertyValues[l].value.String=n);else{const t={name:s.VALUE_LIST_PROP_NAME_PRESENTATION_VARIANT_QUALIFIER,value:{type:u.ExpressionType.String,String:n}};o.push({changeType:i.ChangeType.Insert,pointer:`/record/propertyValues/${r.propertyValues.length}`,content:{type:i.MOD_TYPE_PROP_VALUE,value:t},annotation:e}),r.propertyValues.push(t)}return o}(e,P,a,o)),l}(p,a,R,f,M,V);n?.length&&(!r.valueList.app.length&&r.valueList.base.length&&(n[0].annotation.record=g(n[0].annotation.record,e.isCdsProject)),U.push({targetPath:t,changes:n})),f?U.push(v(T,a.resultListSorting,f)):d&&!D&&(a.resultListSorting.length>0||r.valueList.readonly)&&U.push(...function(e,t,n){const a=(0,u.getValueFromRecord)(n.record,s.PV_PROP_NAME_SORT_ORDER,u.ExpressionType.Collection),o=a?.collection||[],{arrayOld:r,arrayNew:l,mapNew:p}=function(e,t){const n=e.map((e=>{const{value:t}=(0,u.getValueFromRecord)(e,s.PV_PROP_NAME_SORT_ORDER_PROPERTY,u.ExpressionType.PropertyPath);return t})),a=[],o=new Map;for(const e of t){const t=e.cells[u.uiPropertyNames.valueHelp.resultListSortingColumns.property];a.push(t),o.set(t,e)}return{arrayOld:n,arrayNew:a,mapNew:o}}(o,t),c=(l||[]).map((e=>b(p.get(e))));if(!a){const t=`/record/propertyValues/${n.record.propertyValues.length}`,a={name:s.PV_PROP_NAME_SORT_ORDER,value:{type:u.ExpressionType.Collection,Collection:c}},o={type:i.MOD_TYPE_PROP_VALUE,value:a},r=[{annotation:n,changeType:i.ChangeType.Insert,pointer:t,content:o}];return n.record.propertyValues.push(a),[{targetPath:e,changes:r}]}const m=`/record/propertyValues/${a.propIndex}/value/Collection`,{unchanged:d,cellChangeOnly:y,rowChangeOnly:g}=function(e,t,n){let a=!1,o=!1;const r=!1,i=new Set,{property:l,descending:p}=u.uiPropertyNames.valueHelp.resultListSortingColumns;for(const[r,p]of e.entries()){const e=t[r],c=p.propertyValues.find((e=>e.name===s.PV_PROP_NAME_SORT_ORDER_PROPERTY)),m=c?.value.type===u.ExpressionType.PropertyPath?c.value.PropertyPath:"";if(i.add(m),e?.cells[l]!==m&&(a=!0),n.has(m)&&(o=o||N(n.get(m),p)),a&&o)break}a||(a=[...n.keys()].some((e=>!i.has(e))));return{unchanged:!a&&!o,cellChangeOnly:o&&!r&&!a,rowChangeOnly:!o&&a}}(o,t,p);let f=[],h=!1;d?h=!0:y?(f=function(e,t){const n=[];for(const[a,o]of e.entries()){const e=t[a];n.push(...E(o,e,`${a}`))}return n}(o,t),h=!0):g&&({done:h,changes:f}=A(l,r,p,b));h||f.push({annotation:null,changeType:i.ChangeType.Update,pointer:"",content:{type:i.MOD_TYPE_COLLECTION,value:c}});function T(e){return e.annotation=n,e.pointer=`${m}/${e.pointer}`,e.moveFromPointer=e.moveFromPointer?`${m}/${e.moveFromPointer}`:"",e}return o.splice(0,r.length,...c),f.length?[{targetPath:e,changes:f.map(T)}]:[]}(T,a.resultListSorting,d))}else{const e={term:"com.sap.vocabularies.Common.v1.ValueList",record:S(a.entitySet,a.entitySetProperty,a.resultList,R,f,a.valueHelpLabel)};U.push({targetPath:t,changes:[{annotation:e}]}),f&&U.push(v(T,a.resultListSorting,f))}return{removeValueListAnno:!1,valueHelpTargetChanges:U}},t.updateValueHelpLabel=_,t.changeValueHelpLabelI18n=function(e,t,n){if(n?.entitySet||!n?.valueHelpLabel)return[];const a=[],o=t.element.path;if(t.valueList?.readonly)return a;const r=t.valueList?.top?.annotation;if(!r)return a;const i=_(r,n.valueHelpLabel,!1);return i?.length&&(!t.valueList.app.length&&t.valueList.base.length&&(i[0].annotation.record=g(i[0].annotation.record,e.isCdsProject)),a.push({targetPath:o,changes:i})),a},t.getAnnotationRecordForNewAnnotation=S,t.changeValueHelpTextAndTextArrangement=function(e,t,n,a){const o=[],i=(0,r.getTargetPathForValueHelpText)(e,a.entitySet,a.entitySetProperty);if(!i)return o;n.valueHelpText=e.annotationIndex[(0,u.getAnnotationIndexKey)(i,"com.sap.vocabularies.Common.v1.Text")];const p=function(e,t,n){const a=(0,u.getValueFromAnnotation)(t.valueHelpText?.top.annotation,u.ExpressionType.Path),o=t.valueHelpText?.app.length>0;return!!n.valueHelpText&&(!a||n.valueHelpText!==e.valueHelpText.value||n.valueHelpText!==a.value&&("None"!==n.valueHelpText||o))}(t,n,a);n.valueHelpTextArrangement=e.annotationIndex[(0,u.getAnnotationIndexKey)(i,s.CDS_TERM_NAME_TEXT_ARRANGEMENT)];const c=function(e,t,n){const a=t.valueHelpText&&(t.valueHelpText.top.annotation.annotations||[]).find((e=>"com.sap.vocabularies.UI.v1.TextArrangement"===e.term));let o;o=a?(0,u.getValueFromAnnotation)(a,u.ExpressionType.EnumMember):(0,u.getValueFromAnnotation)(t.valueHelpTextArrangement?.top.annotation,u.ExpressionType.EnumMember);const r=(a?t.valueHelpText?.app.length:t.valueHelpTextArrangement?.app.length)>0;return!!n.valueHelpTextArrangement&&(n.valueHelpTextArrangement!==e.valueHelpTextArrangement.value||!o||!!o.tooComplexReason&&r||o.value!==n.valueHelpTextArrangement&&("None"!==n.valueHelpTextArrangement||r))}(t,n,a);t.valueHelpText.allowedValues=[];const m=t.valueHelpText.allowedValues;e.entitySetProperties||(e.entitySetProperties=(0,l.getEntitySetProperties)(e));for(const[t,n]of e.entitySetProperties.get(a.entitySet)||new Map)"String"===n&&m.push({value:t});if(m.push({value:u.ENUM_VALUE_NONE}),!(0,l.getEntityTypeNameByEntitySet)(e.metadataService,a.entitySet))return o;let d=!1;if(!(0,u.isTooComplex)(t.valueHelpText)&&m.find((e=>e.value===a.valueHelpText))&&p){const e=(0,r.changeText)(a.valueHelpText,n,i,void 0,void 0,!0);o.push(...e.targetChanges),d=e.commonTextDeleted}if(!(0,u.isTooComplex)(t.valueHelpTextArrangement)&&c&&(!d||a.valueHelpTextArrangement!==u.ENUM_VALUE_NONE)){const t=(0,r.changeTextArrangement)(a.valueHelpTextArrangement,n,e,i);o.push(...t)}return o},t.isValueHelpBaseValueAllowed=function(e){return!!e.valueList?.base.length||!e.cdsValueList?.app.length},t.adaptValueHelpResultList=function(e,t,n,a){const{resultList:o,resultListColumns:r}=u.uiPropertyNames.valueHelp,i=a.uiProperties[o];if(!i||(0,u.isTooComplex)(i))return;(0,u.isTooComplex)(t)&&delete a.uiProperties[o];const s=(0,l.getLocalDataPropertyName)(e.metadataService,n).elementName,{localDataProperty:p,type:c}=r,m=i.columns.find((e=>e.name===p));m.allowedValues=(m.allowedValuesTree?.nodes||[]).filter((e=>e.value!==s)),i.rows=i.rows.filter((e=>"com.sap.vocabularies.Common.v1.ValueListParameterInOut"!==(0,l.getCellValueForColumn)(e,c)||s!==(0,l.getCellValueForColumn)(e,p))),i.rows.forEach(((e,t)=>{e.key=`${t}`;const n=(0,l.getCellForColumn)(e,p);if(!n||!(0,u.isTooComplex)(n))return;const a=n.tooComplexLocations.find((e=>!!e.message?.wrongValue));a?.message?.wrongValue&&(e.data.cells[p]={value:a?.message?.wrongValue})}))},t.adaptValueHelpResultListSorting=function(e,t,n){const{resultListSorting:a,resultListSortingColumns:o}=u.uiPropertyNames.valueHelp,r=t.uiProperties?.[a];if(!r||(0,u.isTooComplex)(r))return;if((0,u.isTooComplex)(e)&&delete t.uiProperties[a],!n.presentationVariant&&n.valueList?.readonly){const e=t.uiProperties[a];e.readonly=!0,e.readonlyTooltip=n.valueList.readonlyTooltip}const i=r.columns.find((e=>e.name===p.names.resultListSortingColumns.descending)),s=i?.allowedValues?.findIndex((e=>e.value===u.ENUM_VALUE_NONE));s>=0&&i.allowedValues.splice(s,1),r.rows.forEach(((e,t)=>{e.key=`${t}`;const n=(0,l.getCellForColumn)(e,o.property);if(!n||!(0,u.isTooComplex)(n))return;const a=n.tooComplexLocations.find((e=>!!e.message?.wrongValue));a?.message?.wrongValue&&(e.data.cells[o.property]={value:a?.message?.wrongValue})}))},t.getReferencedPvFromValueListAnnotation=function(e,t){const n=t?.top.annotation?.record;if(!n)return null;let a=n.propertyValues.find((e=>e.name===s.VALUE_LIST_PROP_NAME_PRESENTATION_VARIANT_QUALIFIER));if(!a&&t.app.length&&t.base.length){a=t.base[t.base.length-1].annotation.record?.propertyValues.find((e=>e.name===s.VALUE_LIST_PROP_NAME_PRESENTATION_VARIANT_QUALIFIER))}if(!a)return null;const o=a.value?.String||"",r=(0,u.getValueFromRecord)(n,s.VALUE_LIST_PROP_NAME_COLLECTION_PATH,u.ExpressionType.String);return r?M(e,r.value,o):null},t.getDummyPresentationVariantAnnotation=function(){const e=(0,c.getDummyRange)(),t={type:u.ExpressionType.Collection,Collection:[]},n={annotation:{term:"com.sap.vocabularies.UI.v1.PresentationVariant",record:{propertyValues:[{name:s.PV_PROP_NAME_SORT_ORDER,value:t}],propertyValuesOrigins:[e]},origin:(0,c.getDummyRange)()},fileUri:"dummyFileUri",target:""};return{app:[n],base:[],top:n,isSplit:!1,readonly:!1}}},1176:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSvPathKindProperty=t.getPvPathKindProperty=t.updateVisualizationsInSPV=t.updateVisualizationsInPV=t.changeToNewVariantPV=t.changeUIPropertyVariant=t.buildVariant=void 0;const a=n(70704),o=n(20576),r=n(78263),i=n(35586),s=n(30459),l=n(23635);function p(e,t){const{qualifier:n,isAlp:o,isTableVisualization:r}=t||{},i=n?`${e}#${n}`:e,s=r?"FromChart":"FromTable",l=o?`${a.i18n.t(s)}:`:"";let p="";switch(e){case"com.sap.vocabularies.UI.v1.LineItem":p="Table";break;case"com.sap.vocabularies.UI.v1.Chart":p="Chart";break;case"com.sap.vocabularies.UI.v1.PresentationVariant":p="PresentationVariant";break;case"com.sap.vocabularies.UI.v1.SelectionVariant":p="SelectionVariant";break;case"com.sap.vocabularies.UI.v1.SelectionPresentationVariant":p="SelectionPresentationVariant"}p+=n?`#${n}`:"";const c=[l,p].filter((e=>!!e)).join(" "),u={value:i,text:c};return o&&(u.tooltip=a.i18n.t(r?"VariantReuseAlpChartTooltip":"VariantReuseAlpTableTooltip")),u}function c(e,t,n){const a=(0,l.getExistingQualifiers)(e.annotationIndex,n,"com.sap.vocabularies.UI.v1.PresentationVariant"),{term:o,qualifier:r}=(0,l.resolveRelativeAnnotationPath)(t),s=r||("com.sap.vocabularies.UI.v1.Chart"===o?"chart":"table"),p=(0,i.generateId)(a,s,!0);return{changes:[{annotation:{term:"com.sap.vocabularies.UI.v1.PresentationVariant",qualifier:p,record:(0,i.createPresentationVariantRecord)(t)}}],configuredPathVariant:`@com.sap.vocabularies.UI.v1.PresentationVariant#${p}`,qualifierVariant:p}}function u(e,t,n,a="/record"){const s=[];s.push(...m(e,n.text));const p={type:l.ExpressionType.AnnotationPath,AnnotationPath:t},c=e.propertyValues.findIndex((e=>e.name===r.PV_PROP_NAME_VISUALIZATIONS));if((0,i.throwIf)(c<0&&!!t,"Creation of SPV/PV Visualizations property not supported"),c>=0){e.propertyValues[c].value=e.propertyValues[c]?.value||{type:l.ExpressionType.Collection,Collection:[]};const r=e.propertyValues[c].value;r.Collection=r?.Collection||[];const i=n?.isLineItemVisualization?"com.sap.vocabularies.UI.v1.LineItem":"com.sap.vocabularies.UI.v1.Chart",u=r.Collection.findIndex((e=>(0,l.resolveRelativeAnnotationPath)(e.AnnotationPath).term===i)),m=r.Collection[u];if(u>0&&""===t){r.Collection.splice(0,u);const e=1===u?"0":"0-"+(u-1);s.push({annotation:null,changeType:o.ChangeType.Delete,pointer:`${a}/propertyValues/${c}/value/Collection/${e}`})}else t&&m?.AnnotationPath!==t&&(r.Collection.unshift(p),s.push({annotation:null,changeType:o.ChangeType.Insert,pointer:`${a}/propertyValues/${c}/value/Collection/0`,content:{type:o.MOD_TYPE_EXPRESSION,value:p}}))}return s}function m(e,t){const n=[];if(t&&!e.propertyValues.find((e=>e.name===r.PV_PROP_NAME_TEXT))){const a={name:r.PV_PROP_NAME_TEXT,value:{type:l.ExpressionType.String,String:t}};e.propertyValues.push(a),n.push({annotation:null,changeType:o.ChangeType.Insert,pointer:"/record/propertyValues/"+(e.propertyValues.length-1),content:{type:o.MOD_TYPE_PROP_VALUE,value:a}})}return n}function d(e,t,n,a,s){const p=[];s?.text&&p.push(...m(n,s.text));const c=n.propertyValues.findIndex((e=>e.name===r.SPV_PROP_NAME_PRESENTATION_VARIANT));if(c<0){const e=(0,i.createPresentationVariantRecord)(a),t={name:r.SPV_PROP_NAME_PRESENTATION_VARIANT,value:{type:l.ExpressionType.Record,Record:e}};n.propertyValues.push(t),p.push({annotation:null,changeType:o.ChangeType.Insert,pointer:`/propertyValues/${n.propertyValues.length}`,content:{type:o.MOD_TYPE_PROP_VALUE,value:t}})}else{const o=n.propertyValues[c].value,r={...s,text:""};if(o.type===l.ExpressionType.Path){const{relativePath:n,term:s,qualifier:c}=(0,l.resolveRelativeAnnotationPath)(o.Path);(0,i.throwIf)(!!n,`Not supported: UI.SelectionPresentationVariant referencing UI.PresentationVariant on different target (relativePath '${n}')`);const m=(0,l.getAnnotationIndexKey)(t,s,c),d=e.annotationIndex[m];if((0,i.throwIf)(!d.top.annotation.record,`Constant Expression Expected: UI.PresentationVariant (target: '${t}', qualifier: '${c}')`),a||c){const e=u(d.top.annotation.record,a,r);p.push(...e.map((e=>({...e,annotation:d.top.annotation}))))}}else if(o.type===l.ExpressionType.Record){const e=`/record/propertyValues/${c}/value/Record`;p.push(...u(o.Record,a,r,e))}else(0,i.throwError)("Constant Expression Expected: UI.SelectionPresentationVariant.PresentationVariant")}return p}function y(e,t,n){if(!t||!n?.top?.annotation||!n?.top?.annotation?.record)return!1;const{record:a,term:o}=n.top.annotation;let i;if("com.sap.vocabularies.UI.v1.SelectionPresentationVariant"===o){const t=a.propertyValues.find((e=>e.name===r.SPV_PROP_NAME_PRESENTATION_VARIANT));if(t.value.type===l.ExpressionType.Record)i=t.value.Record;else if(t.value.type===l.ExpressionType.Path){const{term:a,qualifier:o}=(0,l.resolveRelativeAnnotationPath)(t.value.Path),r=(0,l.getAnnotationIndexKey)(n?.top.target,a,o);i=e.annotationIndex[r]?.top?.annotation?.record}}else"com.sap.vocabularies.UI.v1.PresentationVariant"===o&&(i=n?.top?.annotation?.record);if(!i)return!1;const s=i.propertyValues.find((e=>e.name===r.PV_PROP_NAME_VISUALIZATIONS));if(s?.value?.type!==l.ExpressionType.Collection)return!1;const p=s?.value.Collection[0];return"@com.sap.vocabularies.UI.v1.LineItem"===p?.AnnotationPath}function g(e,t=!1){const n=`${(0,i.getEntityContainerData)(e.metadataService).entityContainerMdElement.name}/${e.pageBase.entitySetName}`,a=e.metadataService.getMetadataElement(n).structuredType;if(e.annotationIndex[(0,l.getAnnotationIndexKey)(a,"com.sap.vocabularies.UI.v1.SelectionPresentationVariant")])return p("com.sap.vocabularies.UI.v1.SelectionPresentationVariant");if(t){if(e.annotationIndex[(0,l.getAnnotationIndexKey)(a,"com.sap.vocabularies.UI.v1.SelectionVariant")])return p("com.sap.vocabularies.UI.v1.SelectionVariant")}else if(e.annotationIndex[(0,l.getAnnotationIndexKey)(a,"com.sap.vocabularies.UI.v1.PresentationVariant")])return p("com.sap.vocabularies.UI.v1.PresentationVariant");return null}t.buildVariant=function(e,t,n,o,c){const u=function(e,t,n,o){const r={value:l.ENUM_VALUE_NONE,text:a.i18n.t("None"),tooltip:a.i18n.t(e?.isOp?"VariantNoneOpSectionTooltip":"VariantNoneTooltip")},i={value:l.ENUM_VALUE_NONE,text:a.i18n.t("None"),tooltip:a.i18n.t("SelectionVariantNoneTooltip")},s=!e?.isAlp&&!e?.isMultiViewLR&&!e?.isOp;let c,u=r,m=i;if(n){const{term:e,qualifier:t}=(0,l.resolvePath)(n);["com.sap.vocabularies.UI.v1.SelectionPresentationVariant","com.sap.vocabularies.UI.v1.PresentationVariant"].includes(e)&&(u=p(e,{qualifier:t}));["com.sap.vocabularies.UI.v1.SelectionPresentationVariant","com.sap.vocabularies.UI.v1.SelectionVariant"].includes(e)&&(m=p(e,{qualifier:t}))}if(s&&m.value===l.ENUM_VALUE_NONE){const e=(0,l.resolvePath)(t).target,n=(0,l.getAnnotationIndexKey)(e,"com.sap.vocabularies.UI.v1.SelectionVariant"),a=o.annotationIndex[n];a&&(m=p("com.sap.vocabularies.UI.v1.SelectionVariant"),c={fileUri:a.top.fileUri,range:a.top.annotation.origin})}else e.isAlp&&(m.value=l.ENUM_VALUE_NOT_APPLICABLE);return{currentVariant:u,variantNone:r,currentSelectionVariant:m,defaultSvLocation:c}}(c,o,t,e),{currentVariant:m,variantNone:d,currentSelectionVariant:f,defaultSvLocation:h}=u,T=[m],P="com.sap.vocabularies.UI.v1.LineItem"===(0,l.resolvePath)(o).term,E={...c,isTableVisualization:P},v=(0,s.getCurrentSelectionInfo)(e,n,E),b=(0,s.getPresentationDataToKeep)(e,n,E);m.value!==l.ENUM_VALUE_NONE&&function(e,t,n,a,o){if(o?.isTableVisualization){const t=(0,s.getPresentationDataToKeep)(e,n,o);if(!(0,s.isEmptyPresentationDataToKeep)(t))return!1}if(o?.isOp)return!0;if(o?.isAlp){if((0,s.isEmptySelection)(a.selection))return!0}else{if(!o?.isMultiViewLR){if(!y(e,t,n)||g(e))return!1;const o=g(e,!0)?.value;if(!o&&(0,s.isEmptySelection)(a.selection))return!0;const r=(0,l.getAnnotationIndexKey)(n?.top?.target||"","com.sap.vocabularies.UI.v1.SelectionVariant"),i=e.annotationIndex[r]?.top.annotation?.record;if(!i)return!1;const p=(0,s.getNormalizedSelectionFromRecord)(i);return(0,s.isSameSelection)(a.selection,p)}if(o?.isTableVisualization&&y(e,t,n))return!0}}(e,t,n,v,E)&&T.push(d);const _=function(e,t,n,a){if(!a?.isAlp)return null;let o;const r=a.isTableVisualization?l.UI_NODE_TYPE_ANALYTICAL_CHART:l.UI_NODE_TYPE_LIST,c=(0,i.getRootNodeConfig)(e,r).configuredPath,{term:u,qualifier:m}=(0,l.resolvePath)(c);if("com.sap.vocabularies.UI.v1.LineItem"!==u&&"com.sap.vocabularies.UI.v1.Chart"!==u){const r=(0,l.resolvePath)(t).target,i=(0,l.getAnnotationIndexKey)(r,u,m),c=e.annotationIndex[i]?.top?.annotation?.record;(0,s.isMatchingSelection)(e,r,c,n)&&(o=p(u,{...a,qualifier:m}))}return o}(e,o,v,E);_&&(m.value===_.value?(m.text=_.text,m.tooltip=_.tooltip):T.push(_)),[l.ENUM_VALUE_NONE,_?.value].includes(m.value)&&(0,s.isEmptyPresentationDataToKeep)(b)&&T.push({value:l.ENUM_VALUE_NEW,text:a.i18n.t("New"),tooltip:a.i18n.t("VariantNewTooltip")});const A={tooComplex:!1,type:l.UI_PROP_TYPE_ENUM,allowedValues:T,value:m.value,text:m.text,locations:[]},C=function(e,t,n,o,i,p,c){if(c.isOp)return{tooComplex:!1,type:l.UI_PROP_TYPE_ENUM,value:l.ENUM_VALUE_NOT_APPLICABLE,allowedValues:[]};const u=[o],m={...c,includeSorting:!0,includeVisualization:!0},d=(0,s.getPresentationDataToKeep)(e,t,m);o.value!==l.ENUM_VALUE_NONE&&function(e,t,n,a,o,i){if(!i?.isTableVisualization)return!1;if(i?.isAlp||i?.isMultiViewLR)return!1;if((0,s.isTooComplexSelection)(o))return!1;const p=g(e),c=g(e,!0);if(y(e,t,n)&&!p&&!c&&(0,s.isEmptyPresentationDataToKeep)(a))return!0;if(!c&&function(e){if(!e?.top.annotation)return!1;const{term:t,record:n}=e.top.annotation;if("com.sap.vocabularies.UI.v1.SelectionPresentationVariant"!==t)return!1;const a=n.propertyValues.find((e=>e.name===r.SPV_PROP_NAME_PRESENTATION_VARIANT))?.value;if(!a)return!1;if(a.type!==l.ExpressionType.Path)return!1;{const{relativePath:e,term:t,qualifier:n}=(0,l.resolveRelativeAnnotationPath)(a.Path);return!e&&"com.sap.vocabularies.UI.v1.PresentationVariant"===t&&!n}}(n))return!0;if(!c&&p){const t=(0,l.getAnnotationIndexKey)(n.top.target,"com.sap.vocabularies.UI.v1.PresentationVariant"),o=e.annotationIndex[t],r={...i,includeSorting:!0,includeVisualization:!0},p=(0,s.getPresentationDataToKeep)(e,o,r);return(0,s.isMatchingPresentationDataToKeep)(a,p,!0)}}(e,n,t,d,i,c)&&u.push(p);(function(e,t,n,a){if(!a?.isTableVisualization)return!1;if(a?.isAlp)return!1;if(a?.isMultiViewLR)return!1;if(!(t&&"com.sap.vocabularies.UI.v1.SelectionPresentationVariant"===t.top.annotation.term||g(e,!0)||(0,s.isTooComplexSelection)(n)))return!0})(e,t,i,c)&&u.push({value:l.ENUM_VALUE_NEW,text:a.i18n.t("New"),tooltip:a.i18n.t("VariantNewTooltip")});return{tooComplex:!1,type:l.UI_PROP_TYPE_ENUM,allowedValues:u,value:o.value,text:o.text,locations:[]}}(e,n,t,f,v,d,c);if(n){const e={fileUri:n.top.fileUri,range:n.top.annotation.origin};A.locations.push(e),C.locations&&C.locations.push(h||e)}return{variant:A,selectionVariant:C,isAlpSharedVariant:m?.value===_?.value}},t.changeUIPropertyVariant=function(e,t,n,a,p,m){let y,g,f=[];if(t&&n)y=(0,l.resolvePath)(t).target,g=n.top.target;else{y=`${(0,i.getEntityContainerData)(e.metadataService).entityContainerMdElement.name}/${e.pageBase.entitySetName}`,g=e.metadataService.getMetadataElement(y).structuredType}const{isAlp:h,isMultiViewLR:T,isOp:P,isSvChange:E}=m;let v="";if(T&&n){const e=n.top.annotation.record.propertyValues.find((e=>e.name===r.SPV_PROP_NAME_TEXT));v=e?.value.type===l.ExpressionType.String?e?.value.String:""}let b="";switch(a){case l.ENUM_VALUE_NEW:({changes:f,configuredPathVariant:b}=P?c(e,p,g):function(e,t,n,a,o,p){const{pvAnnotationPath:c,svAnnotationPath:u,svRecord:m}=function(e,t,n,a){let o="",i="";t&&({term:o,qualifier:i}=t.top.annotation);let p,c="",u="";"com.sap.vocabularies.UI.v1.SelectionVariant"===o?c=`@${o}`+(i?`#${i}`:""):a?.isSvChange?"com.sap.vocabularies.UI.v1.PresentationVariant"!==o||i||(u="@com.sap.vocabularies.UI.v1.PresentationVariant"):({svAnnotationPath:c,svRecord:p}=function(e,t,n,a){let o,i="";const p="com.sap.vocabularies.UI.v1.LineItem"===(0,l.resolveRelativeAnnotationPath)(n).term,c={...a,isOp:!1,isTableVisualization:p},u=(0,s.getCurrentSelectionInfo)(e,t,c);if(u.svAnnotationPath){const{term:e,qualifier:t}=(0,l.resolvePath)(u.svAnnotationPath);i=`@${e}`+(t?`#${t}`:"")}if(!i&&!(0,s.isEmptySelection)(u.selection)){const e=t?.top.annotation.record?.propertyValues?.find((e=>e.name===r.SPV_PROP_NAME_SELECTION_VARIANT));o=e?.value?.type===l.ExpressionType.Record?e.value.Record:null}return{svAnnotationPath:i,svRecord:o}}(e,t,n,a));return{pvAnnotationPath:u,svAnnotationPath:c,svRecord:p}}(e,t,n,p),d=(0,i.createSpvRecord)({visualizationPath:n,pvAnnotationPath:c,svAnnotationPath:u,svRecord:m,text:o}),y=(0,l.getExistingQualifiers)(e.annotationIndex,a,"com.sap.vocabularies.UI.v1.SelectionPresentationVariant"),{term:g,qualifier:f}=(0,l.resolveRelativeAnnotationPath)(n),h=f||("com.sap.vocabularies.UI.v1.Chart"===g?"chart":"table"),T=(0,i.generateId)(y,h,!0);return{changes:[{annotation:{term:"com.sap.vocabularies.UI.v1.SelectionPresentationVariant",qualifier:T,record:d}}],configuredPathVariant:`@com.sap.vocabularies.UI.v1.SelectionPresentationVariant#${T}`}}(e,n,p,g,v,{isAlp:h,isMultiViewLR:T,isSvChange:E}));break;case l.ENUM_VALUE_NONE:h||P?b=p:T?({changes:f,configuredPathVariant:b}=function(e,t){const n=[],a=t.top.target,{record:s}=t.top.annotation,p=s.propertyValues.find((e=>e.name===r.SPV_PROP_NAME_TEXT)),c=p?.value.type===l.ExpressionType.String?p?.value.String:"",u=s.propertyValues.find((e=>e.name===r.SPV_PROP_NAME_SELECTION_VARIANT));let m,d;u?.value?u.value.type===l.ExpressionType.Record?d=JSON.parse(JSON.stringify(u?.value.Record)):u.value.type===l.ExpressionType.Path&&(m=u?.value.Path,n.push(...function(e,t,n,a){if(!a)return[];const{term:i,qualifier:s}=(0,l.resolveRelativeAnnotationPath)(t),p=(0,l.getAnnotationIndexKey)(n,i,s),c=e.annotationIndex[p]?.top.annotation,u=c?.record;if(!u||u.propertyValues.find((e=>e.name===r.SV_PROP_NAME_TEXT)))return[];const m=`/record/propertyValues/${u.propertyValues.length}`,d={name:r.SV_PROP_NAME_TEXT,value:{type:l.ExpressionType.String,String:a}};u.propertyValues.push(d);const y={type:o.MOD_TYPE_PROP_VALUE,value:d};return[{annotation:c,changeType:o.ChangeType.Insert,content:y,pointer:m}]}(e,m,a,c))):d=(0,i.createSelectionVariantRecord)();if(!d)return{changes:n,configuredPathVariant:m};const y=(0,l.getExistingQualifiers)(e.annotationIndex,t.top.target,"com.sap.vocabularies.UI.v1.SelectionVariant"),g=(0,i.generateId)(y,"table",!0);c&&!d.propertyValues.find((e=>e.name===r.SV_PROP_NAME_TEXT))&&d.propertyValues.push({name:r.SV_PROP_NAME_TEXT,value:{type:l.ExpressionType.String,String:c}});const f={term:"com.sap.vocabularies.UI.v1.SelectionVariant",qualifier:g,record:d};return n.push({annotation:f}),m=`@com.sap.vocabularies.UI.v1.SelectionVariant#${g}`,{changes:n,configuredPathVariant:m}}(e,n)):b="";break;default:({changes:f,configuredPathVariant:b}=function(e,t,n,a,o){const{term:r,qualifier:s}=(0,l.resolveRelativeAnnotationPath)(`@${n}`),p=(0,l.getAnnotationIndexKey)(a,r,s),c=e.annotationIndex[p]?.top.annotation;c?.record||(0,i.throwError)(`Annotation '${n}' not found (target '${a}')`);const m="com.sap.vocabularies.UI.v1.LineItem"===(0,l.resolveRelativeAnnotationPath)(t).term,y={text:o,isLineItemVisualization:m},g=[];if("com.sap.vocabularies.UI.v1.SelectionPresentationVariant"===c.term){const n=d(e,a,c.record,t,y);n.forEach((e=>{e.annotation=e.annotation||c})),g.push(...n)}else if("com.sap.vocabularies.UI.v1.PresentationVariant"===c.term){const e=u(c.record,t,y);g.push(...e.map((e=>({...e,annotation:c}))))}return{changes:g,configuredPathVariant:s?`@${r}#${s}`:`@${r}`}}(e,p,a,g,v))}return b=b?`/${y}/${b}`:"",!b||h||P||T||(0,l.resolvePath)(b).qualifier||(b=""),{targetChanges:f?.length?[{targetPath:g,changes:f}]:[],configuredPathVariant:b}},t.changeToNewVariantPV=c,t.updateVisualizationsInPV=u,t.updateVisualizationsInSPV=d,t.getPvPathKindProperty=function(e){return{tooComplex:!1,type:l.UI_PROP_TYPE_STRING,value:(()=>{const t=e?.top?.annotation;if(!t)return l.PresentationVariantPathKind.None;const{term:n,record:a}=t;if("com.sap.vocabularies.UI.v1.PresentationVariant"===n)return l.PresentationVariantPathKind.PV;if("com.sap.vocabularies.UI.v1.SelectionPresentationVariant"!==n)return l.PresentationVariantPathKind.None;if(!a)return l.PresentationVariantPathKind.None;return a.propertyValues.find((e=>e.name===r.SPV_PROP_NAME_PRESENTATION_VARIANT))?.value?.type===l.ExpressionType.Path?l.PresentationVariantPathKind.SPV_PV:l.PresentationVariantPathKind.SPV})(),isLanguageDependent:!1}},t.getSvPathKindProperty=function(e,t){return{tooComplex:!1,type:l.UI_PROP_TYPE_STRING,value:(()=>{if(t?.isOp||t?.isAlp)return l.SelectionVariantPathKind.None;const n=e?.top?.annotation;if(!n)return l.SelectionVariantPathKind.None;const{term:a,record:o}=n;if("com.sap.vocabularies.UI.v1.SelectionVariant"===a)return l.SelectionVariantPathKind.SV;if("com.sap.vocabularies.UI.v1.SelectionPresentationVariant"!==a)return l.SelectionVariantPathKind.None;if(!o)return l.SelectionVariantPathKind.None;return o.propertyValues.find((e=>e.name===r.SPV_PROP_NAME_SELECTION_VARIANT))?.value?.type===l.ExpressionType.Path?l.SelectionVariantPathKind.SPV_SV:l.SelectionVariantPathKind.SPV})(),isLanguageDependent:!1}}},23418:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAggregatedPropertyAnnotation=t.getUsedAggregationMethods=t.getAnalyticalChartSupportedSection=t.getAnalyticalChartSupportedMultiView=t.getAnalyticalChartSupported=t.getApplySupportedInfo=t.getFieldsWithRangeRestrictions=t.getFilterFieldsForVisualFilter=t.getAnalyticalChartSupport=void 0;const a=n(53308),o=n(70704),r=n(78263),i=n(79538),s=n(74181),l=n(2697),p=n(75668),c=n(23635);function u(e,t,n){const a=new Set;for(const e of n?.subnodes||[])(0,c.isTooComplex)(e)||(0,c.isTooComplex)(e.path)||a.add(e.path.value);const o=e.pageBase.entityTypeName,r=m(e,o),s=e.metadataService.getMetadataElement(o),{fieldPaths:l}=(0,p.getAvailableFieldPathsForEntity)(e,s,{noHiddenFilter:!0,noComplexProperties:!0}),u=l.filter((e=>!a.has(e)&&!r.has(e))),d=function(e,t){const n=new Set;return Object.keys(t.dimensions).forEach((a=>{for(const o of t.dimensions[a]){const r=t.entityTypeForEntitySet[a],s=e.metadataService.getMetadataElement(`${r}/${o.value}`);n.add((0,i.getDataTypeFromMdElement)(s,e.metadataService))}})),n}(e,t),y={},g=[];for(const t of u){const n=e.metadataService.getMetadataElement(`${o}/${t}`),a=(0,i.getDataTypeFromMdElement)(n,e.metadataService);d.has(a)&&(y[t]=a,g.push({value:t}))}return{filterFields:g,filterFieldDataTypes:y}}function m(e,t){const n=new Set,a=(0,c.getAnnotationIndexKey)(t,"Org.OData.Capabilities.V1.FilterRestrictions"),o=e.annotationIndex[a]?.top.annotation,r=o?.record?.propertyValues.find((e=>"FilterExpressionRestrictions"===e.name));return(r?.value?.type===c.ExpressionType.Collection?r?.value.Collection:[]).forEach((e=>{const t=e?.propertyValues.find((e=>"AllowedExpressions"===e.name)),a=t?.value.type===c.ExpressionType.String?t.value.String:"";if(!["SingleRange","MultiRange"].includes(a))return;const o=e?.propertyValues.find((e=>"Property"===e.name)),r=o?.value.type===c.ExpressionType.PropertyPath?o.value.PropertyPath:"";r&&n.add(r)})),n}function d(e,t,n){const a=e.annotationIndex,o=a[(0,c.getAnnotationIndexKey)(t,"Org.OData.Aggregation.V1.ApplySupported")]?.top,i=o?.annotation?.record;if(!i)return{aggregatableProperties:[],customAggregatePropNames:[],dynamicMeasures:[],groupablePropNames:[]};const s=(i?.propertyValues||[]).find((e=>e.name===r.APPLY_SUPPORTED_PROP_NAME_GROUPABLE))?.value,l=s?.Collection,p=(l||[]).map((e=>e.PropertyPath)),u=(0,c.getExistingQualifiers)(a,t,"Org.OData.Aggregation.V1.CustomAggregate"),{aggregatablePropNames:m,aggregatableProperties:d,customAggregatePropNames:g}=function(e,t){const n=new Set,a=[],o=[],i=(e?.propertyValues||[]).find((e=>e.name===r.APPLY_SUPPORTED_PROP_NAME_AGGREGATABLE))?.value,s=i?.Collection||[];for(const e of s){const i=e.propertyValues.find((e=>e.name===r.APPLY_SUPPORTED_PROP_NAME_PROPERTY))?.value,s=i?.PropertyPath;if(!s)continue;const l=t.includes(s);l?o.push(s):n.add(s);const p=e.propertyValues.find((e=>e.name===r.APPLY_SUPPORTED_PROP_NAME_AGGREGATION_METHODS)),c="Collection"===p?.value.type?p?.value.Collection:[];a.push({property:s,isCustomAggregate:l,aggregationMethods:c})}return{aggregatablePropNames:n,aggregatableProperties:a,customAggregatePropNames:o}}(i,u),f=[],h=(0,c.getExistingQualifiers)(a,t,"com.sap.vocabularies.Analytics.v1.AggregatedProperty");for(const a of h){const o=(0,c.getAnnotationIndexKey)(t,"com.sap.vocabularies.Analytics.v1.AggregatedProperty",a),r=e.annotationIndex[o].top?.annotation,i=y(r);i&&((n||m.has(i.aggregatableProperty))&&f.push(i))}return{dynamicMeasures:f,aggregatableProperties:d,customAggregatePropNames:g,groupablePropNames:p}}function y(e){const t=e?.record,n=t?.propertyValues.find((e=>e.name===r.AGGREGATED_PROPERTY_PROP_NAME_NAME)),a="String"===n?.value.type?n?.value.String:"",o=t?.propertyValues.find((e=>e.name===r.AGGREGATED_PROPERTY_PROP_NAME_AGGREGATION_METHOD)),i="String"===o?.value.type?o?.value.String:"",s=t?.propertyValues.find((e=>e.name===r.AGGREGATED_PROPERTY_PROP_NAME_AGGREGATABLE_PROPERTY)),l="PropertyPath"===s?.value.type?s?.value.PropertyPath:"";if(a&&i&&l){const n=t?.annotations?.find((e=>"com.sap.vocabularies.Common.v1.Label"===e.term)),o="String"===n?.value?.type?n?.value?.String:"";return{qualifier:e.qualifier,name:a,label:o,aggregationMethod:i,aggregatableProperty:l}}}function g(e,t){const{metadataService:n,annotationIndex:a}=e,i=o.i18n.t("AnalyticalChartDisabledOnEntity",{entityTypeName:t}),s=a[(0,c.getAnnotationIndexKey)(t,"Org.OData.Aggregation.V1.ApplySupported")]?.top.annotation?.record;if(!s?.propertyValues){return{supported:!1,unsupportedTooltip:[i,o.i18n.t("AnalyticalChartDisabledMissingTerms",{missingTermsText:"@Aggregation.ApplySupported"})].join(" ")}}const l=(s?.propertyValues||[]).find((e=>e.name===r.APPLY_SUPPORTED_PROP_NAME_GROUPABLE))?.value,p=l?.Collection;if(!p?.length){return{supported:!1,unsupportedTooltip:[i,o.i18n.t("AnalyticalChartDisabledNoGroupable")].join(" ")}}const u=(s?.propertyValues||[]).find((e=>e.name===r.APPLY_SUPPORTED_PROP_NAME_AGGREGATABLE))?.value,m=(u?.Collection||[]).map((e=>{const t=e.propertyValues.find((e=>e.name===r.APPLY_SUPPORTED_PROP_NAME_PROPERTY))?.value;return t?.PropertyPath}));if(!m.length){return{supported:!1,unsupportedTooltip:[i,o.i18n.t("AnalyticalChartDisabledNoAggregatable")].join(" ")}}if(!p.map((e=>e.PropertyPath)).find((e=>!!n.getMetadataElement(`${t}/${e}`)))){return{supported:!1,unsupportedTooltip:[i,o.i18n.t("AnalyticalChartDisabledNoValidGroupable")].join(" ")}}if(!m.find((e=>!!n.getMetadataElement(`${t}/${e}`)))){return{supported:!1,unsupportedTooltip:[i,o.i18n.t("AnalyticalChartDisabledNoValidAggregatable")].join(" ")}}return{supported:!0}}function f(e,t=!1){const{entitySets:n,entityContainerMdElement:a}=(0,i.getEntityContainerData)(e.metadataService);return h(e,n,a.name,t)}function h(e,t,n,r=!1){let i,s=!1;const l=[],p={},c={},u={},m={},y={},f=(0,a.getStandardAggregationMethods)();let h={};for(const a of t){const t=`${n}/${a}`,o=e.metadataService.getMetadataElement(t)?.structuredType;if(!e.metadataService.getMetadataElement(o||"")?.isEntityType)continue;if(!e.metadataService.getEdmTargetKinds(o).includes("EntityType"))continue;const{supported:i}=g(e,o);if(i&&(s=!0),r&&i){const t=d(e,o),n=P(e,o);l.push({value:a}),p[a]=o,c[a]=t.customAggregatePropNames.map((e=>({value:e}))),u[a]=t.groupablePropNames.map((e=>({value:e}))),y[a]=t.dynamicMeasures.map((e=>({value:e.name})));const r=T(a,t,n,f);m[a]=r.aggregatableProperties,h={...h,...r.propertyAggregationMethods}}if(!r&&s)break}return s||(i=o.i18n.t("AnalyticalChartAddNotSupportedNoEntityEnabled")),{supported:s,unsupportedTooltip:i,entitySets:l,entityTypeForEntitySet:p,measures:c,dimensions:u,dynamicMeasures:y,aggregatableProperties:m,propertyAggregationMethods:h}}function T(e,t,n,a){const o={},r=[],i=[...a.keys()].map((e=>({value:e})));for(const s of t.aggregatableProperties){if(s.isCustomAggregate)continue;const t=s.property,l=((s.aggregationMethods?.length?s.aggregationMethods.map((e=>({value:e}))):i)||[]).filter((e=>!n.get(t)?.has(e.value)));l.length>0&&(r.push({value:t}),o[`${e}/${t}`]=l.map((({value:e})=>({value:e,text:a.get(e)||e}))))}return{aggregatableProperties:r,propertyAggregationMethods:o}}function P(e,t){const n=new Map,a=(0,c.getExistingQualifiers)(e.annotationIndex,t,"com.sap.vocabularies.Analytics.v1.AggregatedProperty",!0);for(const o of a){const a=(0,c.getAnnotationIndexKey)(t,"com.sap.vocabularies.Analytics.v1.AggregatedProperty",o),i=e.annotationIndex[a]?.top.annotation?.record?.propertyValues,s=(i||[]).find((e=>e.name===r.AGGREGATED_PROPERTY_PROP_NAME_AGGREGATION_METHOD)).value,l=s.type===c.ExpressionType.String?s.String:"",p=(i||[]).find((e=>e.name===r.AGGREGATED_PROPERTY_PROP_NAME_AGGREGATABLE_PROPERTY)).value,u=p.type===c.ExpressionType.PropertyPath?p.PropertyPath:"";u&&l&&(n.has(u)||n.set(u,new Set),n.get(u).add(l))}return n}t.getAnalyticalChartSupport=function(e,t,n=!1){let a,i,l,p;const m=(0,s.getRootNodeConfig)(e,c.UI_NODE_TYPE_ANALYTICAL_CHART),d=(0,s.getRootNodeConfig)(e,c.UI_NODE_TYPE_VIEWS),y=g(e,t);if(y.supported)switch(e.pageContext.type){case r.PAGE_TYPE_LR:{a=!m.configured&&!d.configured,i=o.i18n.t((h=m.configured,T=d.configured,h?"AnalyticalChartDisabledPresent":T?"AnalyticalChartDisabledMultiView":"AnalyticalChartAdd"));const t=function(e,t){let n,a;if(t.configured){const t=(0,s.getRootNodeConfig)(e,c.UI_NODE_TYPE_LIST),r=(0,c.resolvePath)(t.configuredPath||t.annotationPath);"com.sap.vocabularies.UI.v1.PresentationVariant"===r.term&&r.qualifier?(n=!1,a=o.i18n.t("AnalyticalChartDeleteNotSupported")):(n=!0,a=o.i18n.t("AnalyticalChartDelete"))}return{deletionEnabled:n,deletionTooltip:a}}(e,m);l=t.deletionEnabled,p=t.deletionTooltip;break}case r.PAGE_TYPE_OP:a=!0,i=o.i18n.t("AddChartSection")}else a=!1,i=y.unsupportedTooltip||"";var h,T;const P={creationEnabled:a,creationTooltip:i};if(e.pageContext.type===r.PAGE_TYPE_LR){const t=function(e,t){let n,a;if(e.configured)n=!1,a=o.i18n.t("AnalyticalChartAddNotSupportedALP");else{const e=f(t);e.supported?(n=!0,a=o.i18n.t("AnalyticalChartAddToMultiView")):(n=!1,a=e.unsupportedTooltip||"")}return{addEnabled:n,addTooltip:a}}(m,e);P.addToMultiViewEnabled=t.addEnabled,P.addToMultiViewTooltip=t.addTooltip}if(n){const{enabled:t,tooltip:n}=function(e){const t=f(e);let n=!1,a="";if(t.supported){u(e,f(e,!0)).filterFields?.length||(a=o.i18n.t("DisableMenuTooltipVisualFiltersNoFields"))}else a=o.i18n.t("DisableMenuTooltipVisualFiltersNoAnalytics");a?n=!1:(n=!0,a=o.i18n.t("VisualFilterAddTooltip"));return{enabled:n,tooltip:a}}(e);P.visualFiltersCreationEnabled=t,P.visualFiltersCreationTooltip=n}return void 0!==l&&(P.deletionEnabled=l,P.deletionTooltip=p),P},t.getFilterFieldsForVisualFilter=u,t.getFieldsWithRangeRestrictions=m,t.getApplySupportedInfo=d,t.getAnalyticalChartSupported=g,t.getAnalyticalChartSupportedMultiView=f,t.getAnalyticalChartSupportedSection=function(e,t=!1){const n=e.pageBase.entityTypeName,a=e.metadataService.getMetadataElement(n);return h(e,(0,i.getAvailableManyAssociationPathsForEntity)(e.metadataService,a),n,t)},t.getUsedAggregationMethods=P,t.createAggregatedPropertyAnnotation=function(e,t,n,o,i){const s=`${n}_${o}`,p=e.metadataService.getMetadataElement(t).content.map((e=>e.name)),u=[...i.map((e=>e.name)),...p],m=function(e,t,n){const o={type:"com.sap.vocabularies.Analytics.v1.AggregatedPropertyType",propertyValues:[{name:r.AGGREGATED_PROPERTY_PROP_NAME_NAME,value:{type:c.ExpressionType.String,String:e}},{name:r.AGGREGATED_PROPERTY_PROP_NAME_AGGREGATABLE_PROPERTY,value:{type:c.ExpressionType.PropertyPath,PropertyPath:t}},{name:r.AGGREGATED_PROPERTY_PROP_NAME_AGGREGATION_METHOD,value:{type:c.ExpressionType.String,String:n}}]},i=(0,a.getStandardAggregationMethods)().get(n),s=`${t} (${i||n})`;return o.annotations=o.annotations||[],o.annotations.push({term:"com.sap.vocabularies.Common.v1.Label",value:{type:c.ExpressionType.String,String:s}}),o}((0,l.generateId)(u,s,!0),n,o),d=(0,c.getExistingQualifiers)(e.annotationIndex,t,"com.sap.vocabularies.Analytics.v1.AggregatedProperty");return{term:"com.sap.vocabularies.Analytics.v1.AggregatedProperty",qualifier:(0,l.generateId)(d,s,!0),record:m}}},6024:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.annotationMatch=t.moveWithInlineToggle=t.resolveAnnotationPathInRecord=t.getFacets=t.buildUIPropBoolFromAnnotation=t.buildUIPropFromRecordProp=t.moveInCollection=void 0;const a=n(23635),o=n(20576),r=n(78263),i=n(91310),s=n(35586);t.moveInCollection=function(e,t,n,a=1){let o;const r=e.slice(t,t+a);o=n>t?e.slice(0,t).concat(e.slice(t+a,n),r,e.slice(n)):e.slice(0,n).concat(r,e.slice(n,t),e.slice(t+a)),e.splice(0,e.length,...o)},t.buildUIPropFromRecordProp=function(e,t,n,o){const r=o?.expectedType||a.ExpressionType.String,i=(0,a.getValueFromRecord)(e,t,r);if(!i)return null;if(i.tooComplexReason)return(0,a.buildTooComplex)(i.tooComplexReason,i.range,n);const s=o?.propType||a.UI_PROP_TYPE_STRING,l=[{fileUri:n,range:i.range}];if(s===a.UI_PROP_TYPE_BOOL)return{tooComplex:!1,type:s,value:i.value,locations:l};if(s===a.UI_PROP_TYPE_STRING){const e={tooComplex:!1,type:s,value:i.value,isLanguageDependent:o?.isLanguageDependent??!1,locations:l};return i.multilineType&&(e.readonly=!0,e.readonlyTooltip="multi line ..."),e}return s===a.UI_PROP_TYPE_ENUM?{tooComplex:!1,type:s,value:i.value,locations:l,allowedValues:[]}:null},t.buildUIPropBoolFromAnnotation=function(e,t){const n=(0,a.getValueFromAnnotation)(e,a.ExpressionType.Bool);if(n.tooComplexReason)return(0,a.buildTooComplex)(n.tooComplexReason,n.range,t);const o=n.value;return{tooComplex:!1,type:a.UI_PROP_TYPE_BOOL,value:o,locations:[{fileUri:t,range:n?.range}]}},t.getFacets=function(e){let t=e.facets?.top;return t||(t=e.headerFacets?.top),{facetsTop:t,facetsTopAnnotation:t.annotation}},t.resolveAnnotationPathInRecord=function(e,t,n,o,i){const l=(0,a.getValueFromRecord)(t,r.DATA_FIELD_PROP_NAME_TARGET,a.ExpressionType.AnnotationPath);if(l||(0,s.throwError)("UI.DataFieldForAnnotation entry with no 'Target' property"),l.tooComplexReason)throw(0,a.buildTooComplexNode)(l.tooComplexReason,l.range,n.fileUri,o);const p=l.value,[c,u]=p.split("@"),m=c?c.slice(0,-1):"",[d,y]=u.split("#"),g=i+(m?"/"+m:""),f=(0,a.resolveMetadataElement)(e.metadataService,g,!0);if(!f)throw(0,a.buildTooComplexNode)(a.TooComplexReason.NoValidPath,l.range,n.fileUri,o,void 0,m||i);const h=(0,a.getAnnotationIndexKey)(f.path,d,y),T=e.annotationIndex[h];if(!T)throw(0,a.buildTooComplexNode)(a.TooComplexReason.NoValidAnnotationPath,l.range,n.fileUri,o,void 0,(0,s.getName)(e,n.fileUri,u));return{referencedAnnotation:T,entityMdElement:f,relativePath:m}},t.moveWithInlineToggle=function(e,t,n,l,p){const c=[],u=e.nodeType;let m,d,y,g;u===a.UI_NODE_TYPE_LIST?(m=e,d=m.lineItems?.top,y=d.annotation.collection,g="/collection"):u===a.UI_NODE_TYPE_SECTION?(m=e,d=m.referencedAnnotation.top,({collection:y,pointer:g}=(0,i.getDataFieldsCollectionForSection)(d.annotation))):u===a.UI_NODE_TYPE_PAGE_ACTIONS&&(m=e,d=m.identification.top,y=d.annotation.collection,g="/collection");const f=d.annotation,h=e.subnodes.findIndex((e=>(0,s.isSameNodeId)(e.nodeId,[...m.nodeId,n])));if(n<=l&&l<=n+t){for(let e=h;e<h+t;e++){const t=y[e];let n;p.toggleInline?n=(0,i.toggleBooleanPropForDataField)(t,r.DATA_FIELD_PROP_NAME_INLINE):p.toggleDetermining&&(n=(0,i.toggleBooleanPropForDataField)(t,r.DATA_FIELD_PROP_NAME_DETERMINING)),n?.changeType&&(n.annotation=f,n.pointer=`${g}/${e}/${n.pointer}`,c.push({targetPath:d.target,changes:[n]}))}return c}{const e=y.splice(h,t);m.subnodes.splice(h,t);let a={annotation:f,pointer:`${g}/${n}`,changeType:o.ChangeType.Delete};t>1&&(a.pointer+="-"+(n+t-1)),c.push({targetPath:d.target,changes:[a]});let u=m.subnodes.findIndex((e=>(0,s.isSameNodeId)(e.nodeId,[...m.nodeId,l])));-1===u&&(u=m.subnodes.length),y.splice(u,0,...e);for(const t of e)p.toggleInline&&(0,i.toggleBooleanPropForDataField)(t,r.DATA_FIELD_PROP_NAME_INLINE),p.toggleDetermining&&(0,i.toggleBooleanPropForDataField)(t,r.DATA_FIELD_PROP_NAME_DETERMINING),a={annotation:f,changeType:o.ChangeType.Insert,pointer:`${g}/${l}`,content:{type:o.MOD_TYPE_RECORD,value:t}},c.push({targetPath:d.target,changes:[a]});return c}},t.annotationMatch=function(e,t){return e.term===t.term&&(!e.qualifier&&!t.qualifier||e.qualifier===t.qualifier)}},57962:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDeleteAnnotationList=t.getDeletionChanges=void 0;const a=n(41810),o=n(78263),r=n(79538),i=n(74181),s=n(28033),l=n(35586),p=n(23635);function c(e,t,n){return e&&!t.includes(n)&&!function(e,t){const n=e.filter((e=>e.split("/").length<2)),a=t.split("/@")[1];return n.includes(a)}(t,n)}async function u(e,t,n,a,o){const r=t.annotationIndex,i=[],l=["com.sap.vocabularies.UI.v1.FieldGroup","com.sap.vocabularies.UI.v1.LineItem","com.sap.vocabularies.UI.v1.Identification","com.sap.vocabularies.UI.v1.Chart","com.sap.vocabularies.UI.v1.DataPoint","com.sap.vocabularies.UI.v1.PresentationVariant","com.sap.vocabularies.UI.v1.SelectionPresentationVariant","com.sap.vocabularies.UI.v1.SelectionVariant","com.sap.vocabularies.UI.v1.MultiLineText","com.sap.vocabularies.Common.v1.ValueList","com.sap.vocabularies.Common.v1.ValueListWithFixedValues","com.sap.vocabularies.Common.v1.FieldControl","com.sap.vocabularies.Common.v1.Text","com.sap.vocabularies.Communication.v1.Contact","com.sap.vocabularies.UI.v1.ConnectedFields"],p=await async function(e,t,n){const{appName:a,project:o}=t;let r;for(const[t,i]of n){const n=(0,s.findUsedEntities)(i);if(e.isCdsProject){r=(await Promise.all(n.map((e=>(0,s.getCapServiceName)(o.root,e.service))))).reduce(((e,a,o)=>{e[t]||(e[t]={},e[t].serviceName=a,e[t].entities=[]);return e[t].entities.push(n[o].entity),e}),{})}else r=n.reduce(((e,n)=>{const r=o?.apps?.[a]?.services,i=Object.keys(r).find((e=>r[e].uri===n.service));e[t]||(e[t]={},e[t].serviceName=i,e[t].entities=[]);return e[t].entities.push(n.entity),e}),{})}return r}(t,e,a),u=function(e,t,n){const a=new Map(t);for(const t of a.keys()){n[t]?.serviceName!==e&&a.delete(t)}return a}(e.serviceName,a,p),m=[...u.values()].flatMap(((e,n)=>{const a=[...u][n][0],o=p[a].entities;return e?function(e,t,n){const a=[];t&&a.push(...function(e,t,n){const a=[],o=t["sap.ui5"]?.routing?.targets,r=o?Object.keys(o):[];for(const t of r){const r=o[t];"type"in r&&"Component"===r.type&&(a.push(...T(e,r,n)),a.push(...P(e,r,n)))}return a}(e,t,n));return a}(t,e,o):[]}));for(const e of l){const a=Object.keys(r).filter((t=>t.includes(e)));for(const e of a){const a=r[e].app[0]?.fileUri===n;c(a,m,e)&&(d(t,e,r[e].app,o,a),i.push(e)),d(t,e,r[e].base,o,!1)}}return i}function m(e,t){const{candidate:n,fileUri:a,manifestContentMap:o,referencedTargets:r,toBeDeleted:s,valueListMaps:c}=t,{target:u,term:m,qualifier:d}=(0,i.splitAnnotationIndexKey)(n),y=[...o.values()].some((e=>function(e,t,n){const a=new RegExp(`[/"']@?${t?`${e}#${t}`:e}['"]`);return!!(function(e){let t=!1;return["com.sap.vocabularies.Common.v1.ValueListWithFixedValues","com.sap.vocabularies.Common.v1.FieldControl","com.sap.vocabularies.UI.v1.MultiLineText","com.sap.vocabularies.Common.v1.Text"].includes(e)&&(t=!0),t}(e)&&t||function(e){let t=!1;return["com.sap.vocabularies.UI.v1.LineItem","com.sap.vocabularies.UI.v1.SelectionPresentationVariant","com.sap.vocabularies.UI.v1.PresentationVariant","com.sap.vocabularies.UI.v1.SelectionVariant","com.sap.vocabularies.UI.v1.FieldGroup","com.sap.vocabularies.UI.v1.Chart","com.sap.vocabularies.UI.v1.DataPoint","com.sap.vocabularies.UI.v1.Identification","com.sap.vocabularies.Communication.v1.Contact"].includes(e)&&(t=!0),t}(e)&&!t||(n||"").match(a))}(m,d,e)));if(y)return!1;let g=(0,l.getReferences)(e,a,u,m,d)||[];const{cdsValueListSources:f,valueListTargetMap:h,valueListTargetMapExternal:T,valueListPVQualifier:P,valueListSVQualifier:E}=c,v=P.get(n)||[],b=E.get(n)||[];g=[...g,...v,...b];const _=0===e.annotationIndex[n].base.length&&g.find((e=>e.uri!==a));if(g.find((e=>!s.has((0,p.getAnnotationIndexKey)(e.target,e.term,e.qualifier))))||_||r[u]&&!d)return!1;let A=!1;if("com.sap.vocabularies.Common.v1.Text"===m){const t=e.metadataService.getMetadataElement(u),n=t&&f.has(t.path);h.has(u)&&0!==h.get(u).size||T.has(u)||n||(A=!0)}else A=!0;return A}function d(e,t,n,a,o){const{target:r,term:s}=(0,i.splitAnnotationIndexKey)(t);if(["com.sap.vocabularies.UI.v1.Identification","com.sap.vocabularies.UI.v1.FieldGroup","com.sap.vocabularies.UI.v1.LineItem"].includes(s))for(const t of n)y(r,t.annotation,e,a,o)}function y(e,t,n,a,o){return(0,l.getMetadataElementsForFields)(n,t,e).forEach((e=>{const n=t.qualifier?`${t.term}#${t.qualifier}`:t.term;g(a,e.path,n,o)})),a}function g(e,t,n,a){e[t]||(e[t]={}),e[t][n]||(e[t][n]={});const o=e[t][n];a?(o.app=!0,o?.base||(o.base=!1)):(o?.app||(o.app=!1),o.base=!0)}function f(e,t){const{target:n}=(0,i.splitAnnotationIndexKey)(e);t.valueListTargetMap.forEach((e=>{e.delete(n)}));for(const[n,a]of t.valueListPVQualifier){const o=a.findIndex((t=>(0,p.getAnnotationIndexKey)(t.target,t.term,t.qualifier)===e));if(o>-1&&(t.valueListPVQualifier.get(n).splice(o,1),0===t.valueListPVQualifier.get(n).length)){t.valueListPVQualifier.delete(n);break}}}function h(e,t,n,a,o=""){const i=[];if(RegExp(/[\s\S]{0,100}((com\.sap\.vocabularies)|(Org\.OData))\.[a-zA-Z0-9]{0,100}\.[vV]\d[\s\S]{0,500}/).test(t)){if(a?.includes(n)){const a=(0,r.getEntityTypeNameByEntitySet)(e.metadataService,n);let i="";if(t.indexOf("/")>-1){const e=t.split("/");t=e.pop(),i=e.join("/")}const s=`${a}`+(i?`/${i}`:"")+(o?`/${o}`:""),l=(0,p.resolveMetadataElement)(e.metadataService,s,!0)?.path,c=0===t.indexOf("@")?t.substring(1):t,[u,m]=c.split("#");t=(0,p.getAnnotationIndexKey)(l,u,m)}i.push(t)}return i}function T(e,t,n){const a=[],o=t?.options?.settings,r=o?.views?.paths,i=v(e,t,n).entitySetName;return(r||[]).forEach((t=>{const o=t?.annotationPath;if(o){const r=t?.entitySet?t?.entitySet:i;a.push(...h(e,o,r,n)),delete t?.annotationPath}const r=t?.primary||[];for(let t=r.length-1;t>=0;t--){const o=r[t];a.push(...h(e,o.annotationPath,i,n)),delete o.annotationPath}const s=t?.secondary||[];for(let t=s.length-1;t>=0;t--){const o=s[t];a.push(...h(e,o.annotationPath,i,n)),delete o.annotationPath}})),o?.defaultTemplateAnnotationPath&&(a.push(...h(e,o.defaultTemplateAnnotationPath,i,n)),delete o?.defaultTemplateAnnotationPath),a}function P(e,t,n){const a=[],o=t?.options?.settings?.controlConfiguration;if(o){const r=Object.keys(t?.options?.settings?.controlConfiguration).filter((e=>!!e.split("/").filter((e=>e.startsWith("@"))).length)),i=v(e,t,n).entitySetName;(r||[]).forEach((t=>{a.push(...h(e,t,i,n))}));const s=o?.["@com.sap.vocabularies.UI.v1.SelectionFields"]?.filterFields;if(s){const t=Object.keys(s);for(let o=t.length-1;o>=0;o--){const r=t[o],l=s[r],p=l?.visualFilter?.valueList;p&&(a.push(...h(e,p,i,n,r)),delete l?.visualFilter?.valueList)}}}return a}function E(e,t,n){if(e.annotationIndex[t]){const{target:a,term:o,qualifier:r}=(0,i.splitAnnotationIndexKey)(t),s=r?`${o}#${r}`:o,p=e.annotationIndex[t].app[0].annotation;let c;c="com.sap.vocabularies.UI.v1.SelectionFields"===o?(0,l.getMetadataElementsForPropertyPathCollection)(e,p,a):(0,l.getMetadataElementsForFields)(e,p,a),c.forEach((e=>{!function(e,t,n){if(e[t]){const a=e[t];if(a[n]){a[n].base||(delete a[n],0===Object.keys(a).length&&delete e[t])}}}(n,e.path,s)}))}}function v(e,t,n){const{entitySet:a,contextPath:r}=t?.options?.settings||{},s=(t?.name||"").includes("ListReport")?o.PAGE_TYPE_LR:o.PAGE_TYPE_OP;if(n?.includes(a)){const t={entitySetName:a,contextPath:r,type:s};return(0,i.resolvePageBase)(e.metadataService,t)}return{entityTypeName:"",entitySetName:"",contextPath:""}}t.getDeletionChanges=async function(e,t,n,a){const s={},c=new Map([...a.entries()].map((e=>[e[0],e[1]?JSON.parse(e[1]):void 0]))),d=await u(e,t,n,c,s),y=new Map([...c.entries()].map((([e,t])=>[e,t?JSON.stringify(t):""]))),h=function(e,t){const n=new Map,a=new Map,s=new Set,c=new Map,u=new Map;function m(){Object.keys(e.annotationIndex).filter((e=>e.includes("com.sap.vocabularies.Common.v1.ValueList"))).forEach((o=>{const r=[],{target:s}=(0,i.splitAnnotationIndexKey)(o);r.push(...e.annotationIndex[o].app,...e.annotationIndex[o].base),r.forEach((o=>{const i=(0,l.getValueListSourceMetadataElement)(e,o.annotation),p=o.fileUri===t;if(i){const e=i.path,t=p?n:a;t.has(e)||t.set(e,new Set),t.get(e).add(s)}y(o,r,!1),y(o,r,!0)}))}))}function d(){Object.keys(e.annotationIndex).filter((e=>e.includes(o.CDS_TERM_VALUE_LIST)&&e.indexOf("#")<0)).forEach((t=>{const n=[],{target:a}=(0,i.splitAnnotationIndexKey)(t);n.push(...e.annotationIndex[t].app,...e.annotationIndex[t].base),n.reverse().forEach((t=>{const n=e.metadataService.getMetadataElement(a);let o;if(n?.keys?.length){const e=n.keys[0];o=n.path+"/"+e}if(o){const e=(0,p.getValueFromAnnotation)(t.annotation,p.ExpressionType.Bool);e.tooComplexReason||e.value?s.add(o):s.delete(o)}}))}))}function y(t,n,a){const i=a?o.VALUE_LIST_PROP_NAME_SELECTION_VARIANT_QUALIFIER:o.VALUE_LIST_PROP_NAME_PRESENTATION_VARIANT_QUALIFIER,s=(0,p.getValueFromRecord)(t.annotation.record,i,p.ExpressionType.String);if(s){const i=(0,p.getValueFromRecord)(t.annotation.record,o.VALUE_LIST_PROP_NAME_COLLECTION_PATH,p.ExpressionType.String),l=a?"com.sap.vocabularies.UI.v1.SelectionVariant":"com.sap.vocabularies.UI.v1.PresentationVariant",m=`${(0,r.getEntityTypeNameByEntitySet)(e.metadataService,i.value)}/@${l}#${s.value}`,d=n.map((e=>({qualifier:e.annotation.qualifier??"",target:e.target,uri:e.fileUri,term:e.annotation.term})));if(d.length>0){const e=a?u:c;e.get(m)||e.set(m,[]);const t=e.get(m);e.set(m,[...d,...t])}}}return m(),d(),{valueListTargetMap:n,valueListTargetMapExternal:a,cdsValueListSources:s,valueListPVQualifier:c,valueListSVQualifier:u}}(t,n);!function(e,t,n){Object.keys(e.annotationIndex).filter((e=>e.includes("com.sap.vocabularies.UI.v1.SelectionFields"))).forEach((a=>{const o=[];o.push(...e.annotationIndex[a].app,...e.annotationIndex[a].base);const{target:r,term:s,qualifier:p}=(0,i.splitAnnotationIndexKey)(a);o.forEach((a=>{(0,l.getMetadataElementsForPropertyPathCollection)(e,a.annotation,r).forEach((e=>{const o=p?`${s}#${p}`:s,r=a.fileUri===n;g(t,e.path,o,r)}))}))}))}(t,s,n);const T=new Set;let P;do{P=T.size;for(const e of d){const{term:a}=(0,i.splitAnnotationIndexKey)(e);m(t,{toBeDeleted:T,referencedTargets:s,candidate:e,valueListMaps:h,fileUri:n,manifestContentMap:y})&&(T.add(e),E(t,e,s),"com.sap.vocabularies.Common.v1.ValueList"===a&&f(e,h))}}while(T.size>P);return function(e){const t=[];function n(e,n){const a=t.find((t=>t.targetPath===e));a?a.changes.push(n):t.push({targetPath:e,changes:[n]})}for(const t of e){const{target:e,term:a,qualifier:o}=(0,i.splitAnnotationIndexKey)(t),r={annotation:{term:a}};o?.trim().length>0&&(r.annotation.qualifier=o),n(e,r)}return t}(T)},t.getDeleteAnnotationList=function(e,t,n){const o=[],{annotationService:r}=e,i=r.getGenericAnnotationService(),s=i.fileCache[t].serviceFile.content,l=(0,a.getAliasInformation)([s.namespace,...s.references],i.context.metadata.getNamespaces());return n.forEach((e=>{const t=e.annotation.qualifier?"#"+e.annotation.qualifier:"",n=e.annotation.term.split("."),a=n.pop(),r=n.join("."),i=`${l.reverseAliasMap[r]}.${a}${t}`;o.push(i)})),o}},17121:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getValueListSourceMetadataElement=t.getMetadataElementsForPropertyPathCollection=t.getMetadataElementsForFields=t.getElementForAnnotation=t.getReferences=void 0;const a=n(41810),o=n(79538),r=n(98879),i=n(78263),s=n(23635);function l(e,t,n,o,r){const i=e.fileCache[t].serviceFile.content,s=(0,a.getAliasInformation)([i.namespace,...i.references],e.context.metadata.getNamespaces());let l;return i.targets.filter((e=>n===(0,a.resolveName)(e.name,s.aliasMap)?.qName)).find((e=>(l=e.terms.find((e=>{const t=e.attributes?.Term?.value??"",n=e.attributes?.Qualifier?.value??"";return(0,a.resolveName)(t,s.aliasMap)?.qName===o&&(r??"")===n})),!!l)))?l:void 0}t.getReferences=function(e,t,n,o,i){const s=[],{annotationService:p}=e,c=p.getGenericAnnotationService(),u=l(c,t,n,o,i);if(!u||!u?.attributes.Term.valueRange)throw new r.ApiError("Internal error. Annotation position not found");const m=c.getReferences(t,u.attributes.Term.valueRange.start)||[];for(const e of m){const t=c.fileCache[e.uri].serviceFile.content,{cursorContext:n}=c.getPositionContext(t,e.range.start),o=(0,a.getAliasInformation)([t.namespace,...t.references],c.context.metadata.getNamespaces());n.targetPath&&n.annotation&&s.push({target:n.targetPath,term:(0,a.resolveName)(n.annotation.attributes.Term.value,o.aliasMap).qName,qualifier:n.annotation.attributes.Qualifier?.value||"",uri:e.uri})}return s},t.getElementForAnnotation=l,t.getMetadataElementsForFields=function(e,t,n){const a=[];let o;if("com.sap.vocabularies.UI.v1.FieldGroup"===t.term){const e=t.record?.propertyValues.find((e=>e.name===i.FIELD_GROUP_PROP_NAME_DATA));o="Collection"===e?.value.type&&e.value.Collection}else"com.sap.vocabularies.UI.v1.Identification"!==t.term&&"com.sap.vocabularies.UI.v1.LineItem"!==t.term||(o=t.collection);return(o||[]).forEach((t=>{const o=(0,s.getValueFromRecord)(t,i.DATA_FIELD_PROP_NAME_VALUE,s.ExpressionType.Path);if(o&&!o.tooComplexReason){const t=o.value;if(t){const o=(0,s.resolveMetadataElement)(e.metadataService,[n,t].join("/"),!0);o&&a.push(o)}}})),a},t.getMetadataElementsForPropertyPathCollection=function(e,t,n){const a=[];return(t.collection??[]).forEach((t=>{if(t.type===s.ExpressionType.PropertyPath){const o=t.PropertyPath;if(o){const t=(0,s.resolveMetadataElement)(e.metadataService,[n,o].join("/"),!0);t&&a.push(t)}}})),a},t.getValueListSourceMetadataElement=function(e,t){const n=(0,s.getValueFromRecord)(t.record,i.VALUE_LIST_PROP_NAME_COLLECTION_PATH,s.ExpressionType.String);if(n&&!n.tooComplexReason){const a=(0,s.getValueFromRecord)(t.record,i.VALUE_LIST_PROP_NAME_PARAMETERS,s.ExpressionType.Collection);if(a){const t=a.collection[0],r=(0,s.getValueFromRecord)(t,i.VALUE_LIST_PROP_NAME_VALUE_LIST_PROPERTY,s.ExpressionType.String);if(r&&!r.tooComplexReason)try{const t=(0,o.getEntityTypeNameByEntitySet)(e.metadataService,n.value);return(0,s.resolveMetadataElement)(e.metadataService,t+"/"+r.value,!0)}catch(e){}}}}},72998:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDialogsContext=void 0;const a=n(78263),o=n(23418),r=n(79538),i=n(74181),s=n(70704),l=n(53308);function p(e,t,n,a){for(const o of Object.keys(e.associations)){const r=e.associations[o];for(const e of t.get(r)?.entitySets||new Set)n[e]&&(n[e].associations[o]=n[e].associations[o]||[],n[e].associations[o].push(a))}}function c(e,t,n,a){const o={entitySets:new Set,associations:{},properties:{}};for(const e of t?.content||[])e.edmPrimitiveType?o.properties[e.name]=l.primitiveTypeMap[e.edmPrimitiveType]?.constantExpressionName||"":e.isEntityType&&e?.structuredType&&!e?.isCollectionValued&&(o.associations[e.name]=e.structuredType);a.set(n,o)}function u(e,t,n){for(const a of t?.content||[]){e.getEdmTargetKinds(a.path).includes("EntitySet")&&!a.name.endsWith("_texts")&&(n[a.name]={entityTypeName:a.structuredType,associations:{}})}}t.getDialogsContext=function(e,t){const{entitySets:n,entityTypesMap:l}=function(e){const t=e.metadataService,n={},a=new Map;for(const[e,o]of t.getRootMetadataElements()){const r=t.getEdmTargetKinds(e);r.includes("EntityContainer")?u(t,o,n):r.includes("EntityType")&&c(t,o,e,a)}for(const e of Object.keys(n)){const{entityTypeName:t}=n[e];a.get(t)&&a.get(t).entitySets.add(e)}for(const[e,t]of a)p(t,a,n,e);return{entitySets:n,entityTypesMap:a}}(e),{texts:m,textArrangements:d}=function(e,t){const n=["com.sap.vocabularies.Common.v1.Text",a.CDS_TERM_NAME_TEXT_ARRANGEMENT],o={},r={};return Object.keys(e.annotationIndex).filter((e=>!e.includes("#")&&n.includes(e.split("@").pop()))).forEach((n=>{const[i,s]=n.split("/@"),[l,...p]=i.split("/");for(const i of t.get(l)?.entitySets||new Set){const t=[i,...p].join("/");"com.sap.vocabularies.Common.v1.Text"===s?o[`${t}`]=e.annotationIndex[n]:s===a.CDS_TERM_NAME_TEXT_ARRANGEMENT&&(r[`${t}`]=e.annotationIndex[n])}})),{texts:o,textArrangements:r}}(e,l);e.entitySetProperties||(e.entitySetProperties=(0,r.getEntitySetProperties)(e));const y={};for(const[t,n]of e.entitySetProperties)for(const[e,a]of n)"String"===a&&(y[`${t}`]?y[`${t}`].push(e):y[`${t}`]=[e]);const g={};for(const[e,t]of[...l.entries()])g[e]={entitySets:[...t.entitySets.keys()],associations:t.associations,properties:t.properties};const f={isCdsProject:e.isCdsProject,entitySets:n,texts:m,textArrangements:d,stringProperties:y,entityTypes:g,suppressTableViewDeletionNodeId:e.suppressTableViewDeletionNodeId};return e.pageContext.type===a.PAGE_TYPE_LR&&(f.analyticalChartSupport=(0,o.getAnalyticalChartSupport)(e,e.pageBase.entityTypeName,t)),e.pageContext.type===a.PAGE_TYPE_OP&&function(e,t){let n="";const a=(0,i.getEntityTypeNameForAssociations)(e,e.pageBase.entityTypeName);for(const r of a){const a=(0,o.getAnalyticalChartSupport)(e,r);if(n=`${n} ${a.creationTooltip}`,a.creationEnabled){n="",t.analyticalChartSupport=a;break}}(n||a.length<1)&&(t.analyticalChartSupport={creationEnabled:!1,creationTooltip:s.i18n.t("AnalyticalChartDisabledForObjectPage")})}(e,f),f}},79258:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeTableColumnsDynamicProp=t.changeUIPropertyPrepareDynamicProp=t.PROP_NAME_DYNAMIC_PROPERTY=t.PROP_NAME_PROPERTY=void 0;const a=n(23635),o=n(35586);function r(e,n,r){const i=(0,o.getCellForColumn)(e,t.PROP_NAME_PROPERTY);if(!i||(0,a.isTooComplex)(i)||"string"!=typeof i.value)return"";const s=r?.noDynamicProperties||!1,l=r?.duplicatePropertyNameAllowed||!1,p=i.value;if(!(0,a.isTooComplex)(e.data)&&s&&p&&p.includes("@")){const{range:n,fileUri:o}=e.data.location,r=(0,a.buildTooComplex)(a.TooComplexReason.UnsupportedProperty,n,o);return e.data.cells[t.PROP_NAME_PROPERTY]=r,""}if(!l){const e={value:p};n.get(p)!==p&&(e.text=n.get(p)),i.allowedValues=[e]}return p}t.PROP_NAME_PROPERTY="property",t.PROP_NAME_DYNAMIC_PROPERTY="dynamicProperty",t.changeUIPropertyPrepareDynamicProp=function(e,n,r){const i=n[e];r.get(e)?.forEach((e=>{if(!e.cells)return;const n=e.cells[t.PROP_NAME_PROPERTY],r=i.rows.find((t=>t.key===e.key));if(!r||(0,a.isTooComplex)(r.data)||Object.keys(e.cells).length)if(n)n?.includes("@")?(e.cells[t.PROP_NAME_DYNAMIC_PROPERTY]=n,e.cells[t.PROP_NAME_PROPERTY]=a.ENUM_VALUE_NONE):e.cells[t.PROP_NAME_DYNAMIC_PROPERTY]=a.ENUM_VALUE_NONE;else{const n=(0,o.getCellForColumn)(r,t.PROP_NAME_DYNAMIC_PROPERTY);e.cells[t.PROP_NAME_PROPERTY]=a.ENUM_VALUE_NONE,e.cells[t.PROP_NAME_DYNAMIC_PROPERTY]=n.value}else Object.keys(r.data.cells).forEach((t=>{const n=r.data.cells[t];e.cells[t]=(0,a.isTooComplex)(n)?null:n.value}))}))},t.mergeTableColumnsDynamicProp=function(e,n,i){const s=n[e];if(!s||(0,a.isTooComplex)(s))return;const l=(0,o.mergeColumns)(s,t.PROP_NAME_PROPERTY,t.PROP_NAME_DYNAMIC_PROPERTY);if(n[e]=l,(0,a.isTooComplex)(l))return;const p=i?.noDynamicProperties||!1,c=i?.duplicatePropertyNameAllowed||!1,u=l.columns.find((e=>e.name===t.PROP_NAME_PROPERTY)),m=new Set,d=new Map(u.allowedValues.map((e=>[e.value,e.text||e.value])));for(const e of l.rows){const t=r(e,d,i);m.add(t)}u.allowedValues=u.allowedValues.filter((e=>!(!c&&m.has(e.value))&&(e.value!==a.ENUM_VALUE_NONE&&!(p&&e.value.includes("@")))))}},57306:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiLocalAnnotationFileMissing=t.ApiComplexityError=void 0;const a=n(98879);class ApiComplexityError extends a.ApiError{constructor(e,t){super(e,a.ApiErrorCode.ComplexityViolation,new Map),this.complexityViolation=t||{tooComplex:!0,tooComplexLocations:[]}}toString(e=!1){let t=super.toString();if(e&&this.complexityViolation.tooComplex){t+=". Complexity violations:";for(const e of this.complexityViolation.tooComplexLocations||[])t+=`\n${e.reason}: ${e.fileUri} ${n=e.range,`[(${n.start.line}, ${n.start.character}),(${n.end.line}, ${n.end.character})]`}`}var n;return t}}t.ApiComplexityError=ApiComplexityError;class ApiLocalAnnotationFileMissing extends a.ApiError{constructor(e){super(e,a.ApiErrorCode.LocalAnnotationFileNotFound,new Map)}}t.ApiLocalAnnotationFileMissing=ApiLocalAnnotationFileMissing},75668:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectableActions=t.measuresAvailable=t.getAvailableFieldPathsForEntity=t.removeNode=t.getValueHelpNodeSubnodes=t.expandValueHelpTreeForPath=t.resolveValueHelpTreeId=t.buildValueHelpTreeId=t.buildValueHelpNode=t.isValidPath=t.isValidPathForValueHelpTree=t.removeValueHelpNodeByPath=t.getValueHelpNodeByPath=t.filterValueHelpNodesByPath=t.getPathValueHelpTree=t.draftSpecificNavProperties=t.draftSpecificFields=void 0;const a=n(53308),o=n(20576),r=n(79538),i=n(23635);function s(e,t){const n=[];let a=e,o=null;const r=[],i=t.split("/");for(const e of i){if(o?.expandable&&(!o.subnodes||0===o.subnodes.length))break;const t=(a||[]).findIndex((t=>t.value===e));if(t<0)return null;n.push(t),o=a[t],a=o.subnodes,r.push(e)}return{path:r.join("/"),nodeId:n,node:o}}function l(e,t,n,a){const o=s(n,a);if(o){if(o.path===a)return!0;{const{pathBase:o,options:r}=u(t),{errorMessage:i}=g(e,o,r,a,n);return!i}}return!1}function p(e){return{value:e.name,expandable:e.usages!==o.SegmentUsage.asLastSegmentOnly,selectable:e.usages!==o.SegmentUsage.asIntermediateSegmentOnly,subnodes:[]}}function c(e,t,n="paths"){let a=`${n}://${e}`;const o=[];if(t?.allowedTypes?.size){const e=[...t.allowedTypes].join(" ");o.push(`allowedTypes=${e}`)}if(t?.suppressedTypes?.size){const e=[...t.suppressedTypes].join(" ");o.push(`suppressedTypes=${e}`)}return t?.ignoreIncludedTypes&&o.push("ignoreIncludedTypes"),t?.noHiddenFilter&&o.push("noHiddenFilter"),t?.ignoreHidden&&o.push("ignoreHidden"),o.length&&(a+=`?${o.join("&")}`),a}function u(e){const[t,n]=e.split("://"),[a,o]=n.split("?");if(!o)return{schema:t,pathBase:a};const r={},i=o.split("&");for(const e of i){const[t,n]=e.split("=");switch(t){case"allowedTypes":case"suppressedTypes":r[t]=new Set(n.split(" "));break;case"ignoreIncludedTypes":case"noHiddenFilter":case"ignoreHidden":r[t]=!0}}return{schema:t,pathBase:a,options:r}}function m(e,t,n,a){const o=function(e,t,n,a=!1){const o=[],r=(0,i.getAllowedTypes)(n);let s=e.annotationService.getNextPathSegments(t,r,[]);s=y(e,[...t.split("/")],s,n);for(const i of s||[]){const s=p(i);if(s.expandable&&a){let a=e.annotationService.getNextPathSegments(t,r,[s.value]);if(a=y(e,[...t.split("/"),i.name],a,n),0===a.length&&!s.selectable)continue;s.subnodes=a.map((e=>p(e)))}o.push(s)}return{id:c(t,n),nodes:o}}(e,t,n,a?.expandFirstLevel);if(a?.expandToPaths?.size)for(const r of a.expandToPaths){const{nodeId:i}=g(e,t,n,r,o.nodes);i&&a.removeExpandToNodes&&f(o.nodes,i)}return o}function d(e,t){const n=e.usages!==o.SegmentUsage.asLastSegmentOnly;return n===(t.usages!==o.SegmentUsage.asLastSegmentOnly)?e.name.localeCompare(t.name):n?1:-1}function y(e,n,a,o){const r=new Set;return a=a.filter((a=>function(e,n,a,o){const r=n.join("/"),s=n[n.length-1];if(t.draftSpecificFields.includes(s))return!1;if(t.draftSpecificNavProperties.includes(s))return!1;const l=(0,i.resolveMetadataElement)(e.metadataService,r);if(!l)return!1;let p=!1;if(!o?.ignoreHidden){let t=l.path+"/@com.sap.vocabularies.UI.v1.Hidden",n=(0,i.getValueFromAnnotation)(e.annotationIndex[t]?.top.annotation,i.ExpressionType.Bool);if(!0===n?.value&&(p=!0),o?.noHiddenFilter&&!p&&(t=l.path+"/@com.sap.vocabularies.UI.v1.HiddenFilter",n=(0,i.getValueFromAnnotation)(e.annotationIndex[t]?.top.annotation,i.ExpressionType.Bool),!0===n?.value&&(p=!0)),p){if(!l.structuredType||!l.isEntityType)return!1;e.metadataService.getMetadataElement(l.structuredType)?.keys?.forEach((e=>a.add(`${s}_${e}`)))}}return!0}(e,[...n,a.name],r,o))),r.size>0&&(a=a.filter((e=>!r.has(e.name)))),a.sort(d)}function g(e,t,n,a,o){let r="";o=o||[];const s=(0,i.getAllowedTypes)(n),l=[],c=[];let u=o,m="";const d=a.split("/");for(const[a,o]of d.entries()){if(m&&l.push(m),0===u.length){let a=e.annotationService.getNextPathSegments(t,s,l);a=y(e,[...t.split("/"),...l],a,n),u.push(...a.map((e=>p(e))))}const i=u.findIndex((e=>e.value===o)),g=i>=0?u[i]:null,f=a===d.length-1,h=`'${d.join("/")}' on '${t}', types: '${s.join(",")}'`;if(!g){r=`Invalid Path starting with '${o}' (${h})`;break}if(!f&&!g.expandable){r=`Invalid Path - not expandable: '${o}' (${h})`;break}if(f&&!g.selectable){r=`Incomplete Path ${h}`;break}c.push(i),f||(g.subnodes=g.subnodes||[],u=g.subnodes,m=o)}return{errorMessage:r,valueHelpNodes:o,nodeId:r?null:c}}function f(e,t){const n=[...t],a=n.pop();let o=e;if(n.length>0){const{node:t}=function(e,t){let n=e||[],a=null;const o=[];for(const e of t){if(a=n[e],!a)return null;o.push(a.value),n=a.subnodes||[]}return{path:o.join("/"),nodeId:t,node:a}}(e,n);o=t.subnodes}o.splice(a,1),0===o.length&&n.length>0&&f(e,n)}function h(e,n,o,r){const s=e.metadataService;let l=[];const p=[],c=new Set,u=function(e,t){if(!e.noHiddenFilter)return[];let n=t.pageBase.contextPath+"/@Org.OData.Capabilities.V1.FilterRestrictions";n.startsWith("/")&&(n=n.substring(1));let a=t.annotationIndex[n]?.top.annotation?.record;a||(n=t.pageBase.entityTypeName+"/@Org.OData.Capabilities.V1.FilterRestrictions",a=t.annotationIndex[n]?.top.annotation?.record);const o=(0,i.getValueFromRecord)(a,"NonFilterableProperties",i.ExpressionType.Collection);return o?.collection?.length?o.collection.map((e=>e.PropertyPath)):[]}(o,e);(n?.content??[]).forEach((n=>{if(t.draftSpecificFields.includes(n.name))return;if(t.draftSpecificNavProperties.includes(n.name))return;const m=function(e,t,n){if(n.ignoreHidden)return!1;const a=t.path+"/@com.sap.vocabularies.UI.v1.Hidden";if(!0===(0,i.getValueFromAnnotation)(e.annotationIndex[a]?.top.annotation,i.ExpressionType.Bool)?.value)return!0;if(!n?.noHiddenFilter)return!1;const o=t.path+"/@com.sap.vocabularies.UI.v1.HiddenFilter";if(!0===(0,i.getValueFromAnnotation)(e.annotationIndex[o]?.top.annotation,i.ExpressionType.Bool)?.value)return!0;const{pathPrefixFromEntitySet:r,nonFilterablePathsFromEntitySet:s}=n,l=r?`${n?.pathPrefixFromEntitySet}/${t.name}`:t.name;return s.includes(l)}(e,n,{ignoreHidden:o.ignoreHidden,noHiddenFilter:o.noHiddenFilter,pathPrefixFromEntitySet:r,nonFilterablePathsFromEntitySet:u});if(m){if(!n.structuredType||!n.isEntityType)return;s.getMetadataElement(n.structuredType)?.keys?.forEach((e=>c.add(`${n.name}_${e}`)))}if(n?.edmPrimitiveType?.startsWith("Edm.")){if(!n?.isCollectionValued){const e=a.primitiveTypeMap[n?.edmPrimitiveType]?.constantExpressionName;o.allowedTypes&&o.allowedTypes.has(e)||o.suppressedTypes&&!o.suppressedTypes.has(e)?l.push(n.name):o.allowedTypes||o.suppressedTypes||l.push(n.name)}}else if(n.structuredType)if(n.isEntityType&&!n.isCollectionValued)p.push(n.name);else if(n.isEntityType&&o.allowCollectionValues)p.push(n.name);else if(n.isComplexType&&!o?.noComplexProperties){const t=s.getMetadataElement(n.structuredType),a=h(e,t,o);l.push(...a.fieldPaths.map((e=>n.name+"/"+e))),p.push(...a.associations.map((e=>n.name+"/"+e)))}})),l=l.filter((e=>!c.has(e)));const m=(e,t)=>e.localeCompare(t);return{fieldPaths:l.sort(m),associations:p.sort(m)}}t.draftSpecificFields=["IsActiveEntity","HasActiveEntity","HasDraftEntity"],t.draftSpecificNavProperties=["SiblingEntity","DraftAdministrativeData"],t.getPathValueHelpTree=function(e,t,n){let a;n?.numericOnly?a=new Set([i.ExpressionType.Int,i.ExpressionType.Decimal,i.ExpressionType.Float]):n?.stringOnly&&(a=new Set([i.ExpressionType.String]));const o={allowedTypes:a||n.allowedTypes,suppressedTypes:a?void 0:n.suppressedTypes,ignoreHidden:n?.ignoreHidden,noHiddenFilter:n?.noHiddenFilter,ignoreIncludedTypes:n?.ignoreIncludedTypes},r={expandToPaths:n?.expandToPaths,removeExpandToNodes:n?.removeExpandToNodes,expandFirstLevel:n?.expandFirstLevel};return m(e,t.path,o,r)},t.filterValueHelpNodesByPath=function(e,t){const n=s(e,t)?.nodeId||[];let a=e;for(const e of n)e<a.length&&(a.splice(0,e),a.splice(1,a.length-1),a=a[0].subnodes||[])},t.getValueHelpNodeByPath=s,t.removeValueHelpNodeByPath=function(e,t){const n=s(e,t);return n?.nodeId?.length?(f(e,n.nodeId),e):e},t.isValidPathForValueHelpTree=l,t.isValidPath=function(e,t,n,a,o){const{id:r,nodes:i}=m(e,n,a,o);return l(e,r,i,t)},t.buildValueHelpNode=p,t.buildValueHelpTreeId=c,t.resolveValueHelpTreeId=u,t.expandValueHelpTreeForPath=function(e,t,n){const{pathBase:a,options:o}=u(t.id);return g(e,a,o,n,t.nodes)},t.getValueHelpNodeSubnodes=function(e,t,n){const{pathBase:a,options:o}=u(t),r=(0,i.getAllowedTypes)(o);let s=e.annotationService.getNextPathSegments(a,r,n??[]);return s=y(e,[...a.split("/"),...n],s,o),s.map((e=>p(e)))},t.removeNode=f,t.getAvailableFieldPathsForEntity=h,t.measuresAvailable=function(e,t){const n={allowedTypes:new Set([i.ExpressionType.Int,i.ExpressionType.Decimal,i.ExpressionType.Float])},a=h(e,t,n);if(a.fieldPaths?.length>0)return!0;let o=!1;for(const r of a.associations){const a=e.metadataService.getMetadataElement(t.name+"/"+r);if(a?.structuredType){const t=e.metadataService.getMetadataElement(a?.structuredType);if(h(e,t,n).fieldPaths?.length){o=!0;break}}}return o},t.getSelectableActions=function(e,t){const{entityTypeName:n,nodeId:a,ignoreUsed:o}=t||{};let i;if(n?i=[...(0,r.getAvailableActions)(e.metadataService,n).keys()]:(e.actions||(e.actions=(0,r.getAvailableActions)(e.metadataService)),i=[...e.actions.keys()]),o)return i;const s=a?JSON.stringify(a):"",l=e.selectable.actionsUsed.get(s)||new Set;return i.filter((e=>!l.has(e)))}},74181:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalDataPropertyName=t.getName=t.setReadonlyAndTooltip=t.isEnumStringOrTablePropWithoutValue=t.checkPrerequisitesForChartSection=t.getEntityTypeNameForAssociations=t.setVariantPathToFacet=t.addFacetIds=t.isSectionNodeDeletable=t.createPresentationVariantRecord=t.createSelectionVariantRecord=t.createSpvRecord=t.isTypeContained=t.findVisualizationRelativePath=t.getRootNodeTerm=t.resolveConfiguredPath=t.ROOT_NODE_TERM_ANY=t.getRootNodeConfig=t.CUSTOM_VIEW_PREFIX=t.getDataType=t.getTextAndTextArrangementForFields=t.resolvePageBase=t.convertODataPath=t.throwError=t.throwIfSome=t.doIf=t.throwIf=t.throwTooComplexIf=t.getTooComplexSplit=t.buildAnnotationIndexLegacy=t.buildAnnotationIndex=t.setReadonlyInUiProperties=t.splitAnnotationIndexKey=void 0;const a=n(68047),o=n(41810),r=n(98879),i=n(20576),s=n(78263),l=n(35586),p=n(70704),c=n(23635),u=n(91310),m=n(12840),d=n(79538);function y(e,t,n,a,o,r,i){const s=(0,c.getAnnotationIndexKey)(e,n.term,n.qualifier),l={target:e,fileUri:(0,c.toRealFileUri)(t),annotation:n};a[s]=a[s]||{app:[],base:[],top:l,isSplit:!1,readonly:!1};const u=!t.startsWith("!")&&o.has(s);if(!a[s].isSplit&&u){const e=a[s].top.fileUri;a[s].top={...l,fileUri:e,annotation:r(s)}}a[s].isSplit=a[s].isSplit||u,o.add(s),i.isSiblingAppFile&&!a[s].app.length&&(a[s].readonly=!0,a[s].readonlyAppName=i.siblingAppName,a[s].readonlyTooltip=p.i18n.t("ReadonlyTooltipAnnoInSiblingApp",{appName:i.siblingAppName})),i.isAppLayerFile?(a[s].app.push(l),a[s].readonly=!1,delete a[s].readonlyAppName,delete a[s].readonlyTooltip):a[s].base.push(l)}function g(e,t){e&&f("function"==typeof t?t()??"":t??"")}function f(e){throw new r.ApiError(e,r.ApiErrorCode.General)}function h(e,t){let n="";const a=t.split("/");let o=e;for(const e of a){if(!o){n=null;break}const t=isNaN(parseFloat(e))?-1:parseInt(e,10);if(-1===t){const t=o?.record||o?.value?.Record||o,a=(t?.propertyValues||[]).findIndex((t=>t.name===e));if(!(t&&a>=0)){n=null;break}o.record?(n+=`/record/propertyValues/${a}`,o=o.record.propertyValues[a]):o?.value?.Record?(n+=`/value/Record/propertyValues/${a}`,o=o.value.Record.propertyValues[a]):(n+=`/propertyValues/${a}`,o=o.propertyValues[a])}else if(o?.collection?.[t])n+=`/collection/${e}`,o=o.collection[t];else{if(!o?.value?.Collection?.[t]){n=null;break}n+=`/value/Collection/${e}`,o=o.value.Collection[t]}}return n}function T(e,n,a,r){let i="",s="";if(a.startsWith(t.CUSTOM_VIEW_PREFIX))return"";const{target:l,term:p,qualifier:u}=(0,c.resolvePath)(a);s=l.startsWith(n.name)?e.metadataService.getMetadataElement(l).structuredType:l;const m=(0,c.getAnnotationIndexKey)(s,p,u),d=e.annotationIndex[m]?.top;if(g(!d&&"com.sap.vocabularies.UI.v1.LineItem"!==p,`No valid configured path '${a}'`),r===t.ROOT_NODE_TERM_ANY||r===p)i=`/${s}/@${p}`+(u?`#${u}`:"");else if(r||"com.sap.vocabularies.UI.v1.SelectionVariant"!==p){const t=v(e,d,r);g(!t&&!!r,`No annotation path to '${r}' found in '${a}'`),g(!t,`No visualization found in '${a}'`);const n=(0,c.resolveRelativeAnnotationPath)(t);if(n.relativePath){const t=(0,o.getPathBaseMetadataElement)(e.metadataService,s);s=(0,c.resolveMetadataElement)(e.metadataService,`${t}/${n.relativePath}`)?.path}i=`/${s}/@${n.term}`+(n.qualifier?`#${n.qualifier}`:"")}else i=`/${s}/@com.sap.vocabularies.UI.v1.LineItem`;return i}function P(e,n,a,o,r){let i=e;if(i.startsWith(t.CUSTOM_VIEW_PREFIX))return i;if(!i.startsWith("/"))return i=i.includes("/@")?`/${n.name}/${i}`:i.startsWith("@")?`${a}/${i}`:`${a}/@${i}`,i;const{target:s,term:l,qualifier:p}=(0,c.resolvePath)(i);if(s.includes("/"))return i;if((0,c.resolveMetadataElement)(r.metadataService,a.substring(1)).structuredType===s)return`${a}/@${l}`+(p?`#${p}`:"");for(const e of o){const t=`${n.name}/${e}`;if(r.metadataService.getMetadataElement(t).structuredType===s){i=`/${t}/@${l}`+(p?`#${p}`:"");break}}return i}function E(e){let t="";switch(e){case c.UI_NODE_TYPE_FILTER_FIELDS:t="com.sap.vocabularies.UI.v1.SelectionFields";break;case c.UI_NODE_TYPE_ANALYTICAL_CHART:t="com.sap.vocabularies.UI.v1.Chart";break;case c.UI_NODE_TYPE_LIST:t="com.sap.vocabularies.UI.v1.LineItem";break;case c.UI_NODE_TYPE_FORM:t="com.sap.vocabularies.UI.v1.Facets";break;case c.UI_NODE_TYPE_HEADER_INFO:t="com.sap.vocabularies.UI.v1.HeaderInfo";break;case c.UI_NODE_TYPE_HEADER_SECTIONS:t="com.sap.vocabularies.UI.v1.HeaderFacets"}return t}function v(e,t,n){n&&!["com.sap.vocabularies.UI.v1.Chart","com.sap.vocabularies.UI.v1.LineItem"].includes(n)&&f(`Not yet supported: finding term '${n}' in configured paths`);const{target:a,annotation:r}=t,{value:i,record:s,term:l}=r;if(n||["com.sap.vocabularies.UI.v1.PresentationVariant","com.sap.vocabularies.UI.v1.SelectionPresentationVariant"].includes(l||"")||f(`Search for term in configured view: only PV and SPV supported (not '${l}')`),i?.type===c.ExpressionType.Path&&i.Path){let t=(0,o.getPathBaseMetadataElement)(e.metadataService,a).path;const{relativePath:r,term:s,qualifier:l}=(0,c.resolveRelativeAnnotationPath)(i.Path);r&&(t=(0,c.resolveMetadataElement)(e.metadataService,`${t}/${r}`)?.path);const p=(0,c.getAnnotationIndexKey)(t,s,l);return v(e,e.annotationIndex[p].top,n)}if(s){let t="";switch(l){case"com.sap.vocabularies.UI.v1.SelectionPresentationVariant":t="com.sap.vocabularies.UI.v1.SelectionPresentationVariantType";break;case"com.sap.vocabularies.UI.v1.PresentationVariant":t="com.sap.vocabularies.UI.v1.PresentationVariantType"}return b(e,a,{...s,type:t},n)}}function b(e,t,n,a){switch(n.type){case"com.sap.vocabularies.UI.v1.SelectionPresentationVariantType":return function(n){switch(n?.value?.type){case c.ExpressionType.Path:{const{term:o,qualifier:r}=(0,c.resolveRelativeAnnotationPath)(n.value.Path),i=(0,c.getAnnotationIndexKey)(t,o,r),s=e.annotationIndex[i].top;return v(e,s,a)}case c.ExpressionType.Record:{const o={...n.value.Record,type:"com.sap.vocabularies.UI.v1.PresentationVariantType"};return b(e,t,o,a)}default:return""}}(n.propertyValues.find((e=>e.name===s.SPV_PROP_NAME_PRESENTATION_VARIANT)));case"com.sap.vocabularies.UI.v1.PresentationVariantType":{const o=n.propertyValues.find((e=>e.name===s.PV_PROP_NAME_VISUALIZATIONS));if(o?.value?.type!==c.ExpressionType.Collection||!o?.value?.Collection?.length){const n=(0,c.getAnnotationIndexKey)(t,"com.sap.vocabularies.UI.v1.LineItem");return!!e.annotationIndex[n]?"@com.sap.vocabularies.UI.v1.LineItem":""}let r="";const i=o.value.Collection||[];for(const[e,t]of i.entries()){const{term:n}=(0,c.resolveRelativeAnnotationPath)(t.AnnotationPath);if(n===a||!a&&0===e){r=t.AnnotationPath;break}}return r}}return""}function _(){return{type:"com.sap.vocabularies.UI.v1.SelectionVariantType",propertyValues:[{name:"SelectOptions",value:{type:c.ExpressionType.Collection,Collection:[]}}]}}function A(e){const t=[];return e&&t.push({type:c.ExpressionType.AnnotationPath,AnnotationPath:e}),{type:"com.sap.vocabularies.UI.v1.PresentationVariantType",propertyValues:[{name:s.PV_PROP_NAME_VISUALIZATIONS,value:{type:c.ExpressionType.Collection,Collection:t}}]}}function C(e,t){const n=[];if(!e.toManyAssociations){const n=e.metadataService.getMetadataElement(t);e.toManyAssociations=(0,d.getAvailableManyAssociationPathsForEntity)(e.metadataService,n)}for(const a of e.toManyAssociations){const o=`${t}/${a}`;n.push(e.metadataService.getMetadataElement(o).structuredType)}return n}function N(e){if((0,c.isTooComplex)(e))return!1;switch(e.type){case c.UI_PROP_TYPE_ENUM:{const t=e.baseValue;return e.value===c.ENUM_VALUE_NONE&&(!t?.value||t.value===c.ENUM_VALUE_NONE)}case c.UI_PROP_TYPE_STRING:return!e.value&&!e?.baseValue?.value;case c.UI_PROP_TYPE_TABLE:return!e.rows?.length}return!1}t.splitAnnotationIndexKey=function(e){return(0,c.resolvePath)(e)},t.setReadonlyInUiProperties=function(e,t,n){const{target:a,term:o,qualifier:r}=(0,c.resolvePath)(t),i=(0,c.getAnnotationIndexKey)(a,o,r),s=e.annotationIndex[i]?.readonlyAppName;if(s)for(const t of n)t&&!(0,c.isTooComplex)(t)&&(t.readonly=!0,N(t)?t.readonlyTooltip=p.i18n.t("ReadonlyTooltipAnnoParentChangeInSiblingApp",{appName:s}):t.locations?.length&&!t.locations.find((e=>e.fileUri.indexOf(s)>=0))?t.readonlyTooltip=p.i18n.t("ReadonlyTooltipAnnoChangeInSiblingApp",{appName:s}):t.readonlyTooltip=e.annotationIndex[i].readonlyTooltip)},t.buildAnnotationIndex=function(e,t){let n;const o={},r=e.getSchema(),s=Object.keys(r.schema.annotations).map((e=>({type:i.AnnotationFileType.Changeable,fileUri:e,content:r.schema.annotations[e]})));function l(e){if(!n){n=new Map;const e=(0,a.mergeAnnotations)(r.references,...Object.keys(r.schema.annotations).map((e=>({name:e,annotationList:r.schema.annotations[e]}))));for(const t in e)for(const a of e[t]){const e=(0,c.getAnnotationIndexKey)(t,a.term,a.qualifier);n.set(e,a)}}return n.get(e)}for(let e=s.length-1;e>=0;e--){const n=s[e],a=new Set,r=t(n.fileUri);for(const e of n.content)for(const t of e.annotations)y(e.target,n.fileUri,t,o,a,l,r)}return o},t.buildAnnotationIndexLegacy=function(e,t){let n;function a(t){if(!n){n=new Map;const t=e.getMergedAnnotations(!0);for(const e of t)for(const t of e.annotations){const a=(0,c.getAnnotationIndexKey)(e.target,t.term,t.qualifier);n.set(a,t)}}return n.get(t)}const o={},r=e.getAnnotationFiles(!0);for(let e=r.length-1;e>=0;e--){const n=r[e],i=new Set,s=t(n.fileUri);for(const e of n.content)for(const t of e.annotations)y(e.target,n.fileUri,t,o,i,a,s)}return o},t.getTooComplexSplit=function(e,t){if(!e?.isSplit||!t)return null;const n=(0,c.getAllLocations)(e).filter((e=>e.fileUri===t)).map((e=>({...e,reason:c.TooComplexReason.SplitAnnotation})));return n?.length>1?{tooComplex:!0,tooComplexLocations:n}:null},t.throwTooComplexIf=function(e,t){if(e)throw"function"==typeof t?t():t},t.throwIf=g,t.doIf=function(e,t){e&&"function"==typeof t&&t()},t.throwIfSome=function(e,t){e.some((e=>!!e))&&f(t??"")},t.throwError=f,t.convertODataPath=h,t.resolvePageBase=function(e,t){const{type:n,contextPath:a,entitySetName:o}=t,r=(0,d.getEntityContainerData)(e)?.entityContainerMdElement?.name;if(g(!r,"Cannot find entity container in metadata"),a){const t=a.split("/").filter((e=>!!e)),o=t.shift(),i=o.indexOf(".")<0?o:t.shift(),l=(0,d.getEntityTypeNameByEntitySet)(e,i),p=t.length?(0,c.resolveMetadataElement)(e,[l,...t].join("/")):e.getMetadataElement(l);g(!p,`Cannot resolve EntityTypeName for contextPath "${a}"`);const u=["",r,i,...t].join("/"),m=p.structuredType||p.name;if(t.length){const t=((0,d.getEntityContainerData)(e)?.entityContainerMdElement?.content||[]).find((e=>e.structuredType===m))?.name||"";return g(n===s.PAGE_TYPE_LR&&!t,`For LR page no entitySet could be determined from contextPath "${a}"`),{entityTypeName:m,entitySetName:t,contextPath:u}}return{entityTypeName:m,entitySetName:i,contextPath:u}}if(o){const t=(0,d.getEntityTypeNameByEntitySet)(e,o),n=o.split("/").pop(),a=["",r,n].join("/");return{entityTypeName:t,entitySetName:n,contextPath:a}}if(n===s.PAGE_TYPE_CP)return{entityTypeName:"",entitySetName:"",contextPath:""};f('Neither "entitySet" nor "contextPath" provided in pageAnnotationHelper')},t.getTextAndTextArrangementForFields=function(e,t,n){({text:t.text,textArrangement:t.textArrangement}=(0,m.getText)(n.text,n.textArrangement,e,n.element,!1));const a=(0,c.getTextArrangementValueFromLayer)(n.text,n.textArrangement,"base"),o=n.text?.app?.length>0;let r=a.embedded||a.separate;if(!e.isCdsProject&&o&&(r=void 0),!(0,c.isTooComplex)(t.type)&&"ValueHelp"===t.type.value&&!(0,c.isTooComplex)(t.entitySet)&&t.entitySet.value!==c.ENUM_VALUE_NONE){const a=(0,u.findAssociationsToEntitySet)(e,n.element,t.entitySet.value);(0,m.addTextArrangementSyncActions)(t,a,!r||r.tooComplex?void 0:r.value)}(0,c.excludeBaseLayerValues)(t.text,t.textArrangement)},t.getDataType=function(e,t){const n=e?(0,d.getDataTypeFromMdElement)(e,t):null;return n?{type:c.UI_PROP_TYPE_STRING,value:n,tooComplex:!1,isLanguageDependent:!1}:{tooComplex:!0}},t.CUSTOM_VIEW_PREFIX="customView(",t.getRootNodeConfig=function(e,t){const n=e.pageContext.configuration.get(t),{entityContainerMdElement:a,entitySets:o}=(0,d.getEntityContainerData)(e.metadataService),r=E(t);if(!n){return{configured:!1,annotationPath:r?`/${e.pageBase.entityTypeName}/@${r}`:""}}const i=Array.isArray(n)?n:[n],s=[],l=[];for(const p of i){if(!p)continue;const i=P(p,a,e.pageBase.contextPath,o,e);s.push(i);const u=T(e,a,i,r);if(u||Array.isArray(n)||f(`No valid configured path '${i}' (nodeType '${t}')`),u&&!e.annotationIndex[u.slice(1)]){const{target:n,term:a,qualifier:o}=(0,c.resolvePath)(u);g(n!==e.pageBase.entityTypeName||"com.sap.vocabularies.UI.v1.LineItem"!==a||!!o,`Missing annotation '${u}' for configured path '${i}' (nodeType '${t}')`)}l.push(u)}return Array.isArray(n)?{configured:!0,annotationPaths:l,configuredPaths:s}:{configured:!0,annotationPath:l[0],configuredPath:s[0]}},t.ROOT_NODE_TERM_ANY="*",t.resolveConfiguredPath=T,t.getRootNodeTerm=E,t.findVisualizationRelativePath=v,t.isTypeContained=function(e,t){return e===t||(!(t!==c.ExpressionType.Float||![c.ExpressionType.Decimal,c.ExpressionType.Int].includes(e))||t===c.ExpressionType.Decimal&&e===c.ExpressionType.Int)},t.createSpvRecord=function(e){let t,n;t=e?.pvAnnotationPath?{type:c.ExpressionType.Path,Path:e?.pvAnnotationPath}:{type:c.ExpressionType.Record,Record:A(e?.visualizationPath)},n=e?.svAnnotationPath?{type:c.ExpressionType.Path,Path:e?.svAnnotationPath}:{type:c.ExpressionType.Record,Record:e?.svRecord||_()};const a=[{name:s.SPV_PROP_NAME_PRESENTATION_VARIANT,value:t},{name:s.SPV_PROP_NAME_SELECTION_VARIANT,value:n}];if(e?.text){const t={type:c.ExpressionType.String,String:e?.text};a.push({name:s.SPV_PROP_NAME_TEXT,value:t})}return{type:"com.sap.vocabularies.UI.v1.SelectionPresentationVariantType",propertyValues:a}},t.createSelectionVariantRecord=_,t.createPresentationVariantRecord=A,t.isSectionNodeDeletable=function({nodeType:e,subNodeType:t}){return e===c.UI_NODE_TYPE_FORM||e===c.UI_NODE_TYPE_HEADER_SECTIONS||e===c.UI_NODE_TYPE_SECTION&&"Collection"===t},t.addFacetIds=function e(t,n){t.forEach((t=>{const a=t.propertyValues.find((e=>e.name===s.FACETS_PROP_NAME_ID))?.value.String;a&&n.add(a);const o=t.propertyValues.find((e=>e.name===s.FACETS_PROP_NAME_FACETS))?.value.Collection;o?.length&&e(o,n)}))},t.setVariantPathToFacet=function(e,t,n){const a=t.facet,o=a.propertyValues.findIndex((e=>e.name===s.FACETS_PROP_NAME_TARGET)),r=a.propertyValues[o].value.AnnotationPath,{relativePath:l}=(0,c.resolveRelativeAnnotationPath)(r),{term:p,qualifier:u}=(0,c.resolvePath)(n),m=(l?`${l}/`:"")+`@${p}`+(u?`#${u}`:"");a.propertyValues[o].value={type:c.ExpressionType.AnnotationPath,AnnotationPath:m};const d=(0,c.resolvePath)(t.annotationPath),y=(0,c.getAnnotationIndexKey)(d.target,d.term,d.qualifier),g=e.annotationIndex[y].top.annotation,f={type:i.MOD_TYPE_PRIMITIVE,value:m,expressionType:c.ExpressionType.AnnotationPath};let T=h(g,t.annotationPath.split("@com.sap.vocabularies.UI.v1.Facets/")[1]);T+=`/propertyValues/${o}/value/AnnotationPath`;const P={annotation:g,changeType:i.ChangeType.Update,pointer:T,content:f};return[{targetPath:d.target,changes:[P]}]},t.getEntityTypeNameForAssociations=C,t.checkPrerequisitesForChartSection=function(e,t){return C(e,t).some((t=>(0,l.getAnalyticalChartSupported)(e,t).supported))?[`${c.UI_NODE_TYPE_SECTION}/analyticalChart`]:[]},t.isEnumStringOrTablePropWithoutValue=N,t.setReadonlyAndTooltip=function(e,t){e.readonly&&(t.readonly=!0,t.readonlyTooltip=e.readonlyTooltip)},t.getName=function(e,t,n){const{annotationService:a}=e,r=a.getGenericAnnotationService(),i=r.fileCache[t].serviceFile.content,s=(0,o.getAliasInformation)([i.namespace,...i.references],r.context.metadata.getNamespaces());return"@"+(0,o.resolveName)(n,s.reverseAliasMap).qName},t.getLocalDataPropertyName=function(e,t){let n,a=t.name;return t.isEntityType&&t.structuredType&&(n=e.getMetadataElement(t.structuredType)?.keys?.[0],a=n?`${a}_${n}`:a),{elementName:a,key:n}}},2697:(e,t)=>{"use strict";function n(e,t,n){let a=(t||"").replace(/[^a-zA-Z0-9_]/g,"")||"_";n&&(a=t.length&&/^[a-zA-Z_]$/.test(t.slice(0,1))?a:"_"+a,a=a.length>126?a.slice(0,126):a);let o=0;const r=a;for(;(e||[]).includes(a);)o++,a=r+o;return{id:a,index:o}}Object.defineProperty(t,"__esModule",{value:!0}),t.generateIdAndIndex=t.generateId=void 0,t.generateId=function(e,t,a){return n(e,t,a).id},t.generateIdAndIndex=n},35586:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.generateId=t.getLocalDataPropertyName=t.getName=t.isTypeContained=t.checkPrerequisitesForChartSection=t.throwIfSome=t.throwIf=t.throwError=t.splitAnnotationIndexKey=t.setVariantPathToFacet=t.setReadonlyAndTooltip=t.setReadonlyInUiProperties=t.resolvePageBase=t.isEnumStringOrTablePropWithoutValue=t.isSectionNodeDeletable=t.getTooComplexSplit=t.getTextAndTextArrangementForFields=t.getRootNodeConfig=t.getDataType=t.findVisualizationRelativePath=t.CUSTOM_VIEW_PREFIX=t.createSpvRecord=t.createSelectionVariantRecord=t.createPresentationVariantRecord=t.convertODataPath=t.buildAnnotationIndex=t.buildAnnotationIndexLegacy=t.addFacetIds=t.getDialogsContext=t.getReferences=t.getValueListSourceMetadataElement=t.getMetadataElementsForPropertyPathCollection=t.getMetadataElementsForFields=t.getElementForAnnotation=t.resolveAnnotationPathInRecord=t.moveWithInlineToggle=t.moveInCollection=t.getFacets=t.buildUIPropFromRecordProp=t.buildUIPropBoolFromAnnotation=t.annotationMatch=t.getUsedAggregationMethods=t.getFieldsWithRangeRestrictions=t.getFilterFieldsForVisualFilter=t.getAnalyticalChartSupportedSection=t.getAnalyticalChartSupport=t.getAnalyticalChartSupportedMultiView=t.getAnalyticalChartSupported=t.getApplySupportedInfo=t.createAggregatedPropertyAnnotation=void 0,t.moveUINodeSameParent=t.findSingleMove=t.containSameEntries=t.buildRanges=t.areIdentical=t.getCellValueForColumn=t.getCellDataForColumn=t.getCellForColumn=t.convertToPlainValue=t.deduplicate=t.mergeColumns=t.sort=t.filter=t.union=t.join=t.resolveValueHelpTreeId=t.removeValueHelpNodeByPath=t.measuresAvailable=t.isValidPathForValueHelpTree=t.isValidPath=t.getValueHelpNodeSubnodes=t.getValueHelpNodeByPath=t.getSelectableActions=t.getPathValueHelpTree=t.getAvailableFieldPathsForEntity=t.filterValueHelpNodesByPath=t.expandValueHelpTreeForPath=t.draftSpecificFields=t.buildValueHelpTreeId=t.buildValueHelpNode=t.getRootNodeIdForCreation=t.resolveNodeIdRange=t.resolveNodeId=t.isSameNodeId=t.isChildOf=t.isBefore=t.haveSameParent=t.getRootNodeIndex=t.getParentNodeId=t.buildRangeArray=t.resolveToGeneratedMetadataElement=t.getMetadataElementProperties=t.getEntityTypeNameByEntitySet=t.getEntitySetProperties=t.getEntitySetNameByEntityType=t.getEntityContainerData=t.getDataTypeFromMdElement=t.getAvailableManyAssociationPathsForEntity=t.getAvailableActions=t.generateIdAndIndex=void 0,t.PROP_NAME_DYNAMIC_PROPERTY=t.PROP_NAME_PROPERTY=t.mergeTableColumnsDynamicProp=t.changeUIPropertyPrepareDynamicProp=t.MACRO_NAME_MICRO_CHART=t.MACRO_NAME_FIELD=t.MACRO_NAME_FORM_ELEMENT=t.MACRO_NAME_FORM=t.MACRO_NAME_TABLE=t.MACRO_NAME_FILTER_BAR=t.MACRO_NAME_CHART=t.MACRO_ATTRIBUTE_NAME_META_PATH=t.MACRO_ATTRIBUTE_NAME_CONTEXT_PATH=t.getSupportedMacroNames=t.getPropertyPathFromMacro=t.getAnnotationPathFromMacro=t.moveUINodeDifferentParent=void 0;var r=n(23418);Object.defineProperty(t,"createAggregatedPropertyAnnotation",{enumerable:!0,get:function(){return r.createAggregatedPropertyAnnotation}}),Object.defineProperty(t,"getApplySupportedInfo",{enumerable:!0,get:function(){return r.getApplySupportedInfo}}),Object.defineProperty(t,"getAnalyticalChartSupported",{enumerable:!0,get:function(){return r.getAnalyticalChartSupported}}),Object.defineProperty(t,"getAnalyticalChartSupportedMultiView",{enumerable:!0,get:function(){return r.getAnalyticalChartSupportedMultiView}}),Object.defineProperty(t,"getAnalyticalChartSupport",{enumerable:!0,get:function(){return r.getAnalyticalChartSupport}}),Object.defineProperty(t,"getAnalyticalChartSupportedSection",{enumerable:!0,get:function(){return r.getAnalyticalChartSupportedSection}}),Object.defineProperty(t,"getFilterFieldsForVisualFilter",{enumerable:!0,get:function(){return r.getFilterFieldsForVisualFilter}}),Object.defineProperty(t,"getFieldsWithRangeRestrictions",{enumerable:!0,get:function(){return r.getFieldsWithRangeRestrictions}}),Object.defineProperty(t,"getUsedAggregationMethods",{enumerable:!0,get:function(){return r.getUsedAggregationMethods}});var i=n(6024);Object.defineProperty(t,"annotationMatch",{enumerable:!0,get:function(){return i.annotationMatch}}),Object.defineProperty(t,"buildUIPropBoolFromAnnotation",{enumerable:!0,get:function(){return i.buildUIPropBoolFromAnnotation}}),Object.defineProperty(t,"buildUIPropFromRecordProp",{enumerable:!0,get:function(){return i.buildUIPropFromRecordProp}}),Object.defineProperty(t,"getFacets",{enumerable:!0,get:function(){return i.getFacets}}),Object.defineProperty(t,"moveInCollection",{enumerable:!0,get:function(){return i.moveInCollection}}),Object.defineProperty(t,"moveWithInlineToggle",{enumerable:!0,get:function(){return i.moveWithInlineToggle}}),Object.defineProperty(t,"resolveAnnotationPathInRecord",{enumerable:!0,get:function(){return i.resolveAnnotationPathInRecord}});var s=n(17121);Object.defineProperty(t,"getElementForAnnotation",{enumerable:!0,get:function(){return s.getElementForAnnotation}}),Object.defineProperty(t,"getMetadataElementsForFields",{enumerable:!0,get:function(){return s.getMetadataElementsForFields}}),Object.defineProperty(t,"getMetadataElementsForPropertyPathCollection",{enumerable:!0,get:function(){return s.getMetadataElementsForPropertyPathCollection}}),Object.defineProperty(t,"getValueListSourceMetadataElement",{enumerable:!0,get:function(){return s.getValueListSourceMetadataElement}}),Object.defineProperty(t,"getReferences",{enumerable:!0,get:function(){return s.getReferences}});var l=n(72998);Object.defineProperty(t,"getDialogsContext",{enumerable:!0,get:function(){return l.getDialogsContext}});var p=n(74181);Object.defineProperty(t,"addFacetIds",{enumerable:!0,get:function(){return p.addFacetIds}}),Object.defineProperty(t,"buildAnnotationIndexLegacy",{enumerable:!0,get:function(){return p.buildAnnotationIndexLegacy}}),Object.defineProperty(t,"buildAnnotationIndex",{enumerable:!0,get:function(){return p.buildAnnotationIndex}}),Object.defineProperty(t,"convertODataPath",{enumerable:!0,get:function(){return p.convertODataPath}}),Object.defineProperty(t,"createPresentationVariantRecord",{enumerable:!0,get:function(){return p.createPresentationVariantRecord}}),Object.defineProperty(t,"createSelectionVariantRecord",{enumerable:!0,get:function(){return p.createSelectionVariantRecord}}),Object.defineProperty(t,"createSpvRecord",{enumerable:!0,get:function(){return p.createSpvRecord}}),Object.defineProperty(t,"CUSTOM_VIEW_PREFIX",{enumerable:!0,get:function(){return p.CUSTOM_VIEW_PREFIX}}),Object.defineProperty(t,"findVisualizationRelativePath",{enumerable:!0,get:function(){return p.findVisualizationRelativePath}}),Object.defineProperty(t,"getDataType",{enumerable:!0,get:function(){return p.getDataType}}),Object.defineProperty(t,"getRootNodeConfig",{enumerable:!0,get:function(){return p.getRootNodeConfig}}),Object.defineProperty(t,"getTextAndTextArrangementForFields",{enumerable:!0,get:function(){return p.getTextAndTextArrangementForFields}}),Object.defineProperty(t,"getTooComplexSplit",{enumerable:!0,get:function(){return p.getTooComplexSplit}}),Object.defineProperty(t,"isSectionNodeDeletable",{enumerable:!0,get:function(){return p.isSectionNodeDeletable}}),Object.defineProperty(t,"isEnumStringOrTablePropWithoutValue",{enumerable:!0,get:function(){return p.isEnumStringOrTablePropWithoutValue}}),Object.defineProperty(t,"resolvePageBase",{enumerable:!0,get:function(){return p.resolvePageBase}}),Object.defineProperty(t,"setReadonlyInUiProperties",{enumerable:!0,get:function(){return p.setReadonlyInUiProperties}}),Object.defineProperty(t,"setReadonlyAndTooltip",{enumerable:!0,get:function(){return p.setReadonlyAndTooltip}}),Object.defineProperty(t,"setVariantPathToFacet",{enumerable:!0,get:function(){return p.setVariantPathToFacet}}),Object.defineProperty(t,"splitAnnotationIndexKey",{enumerable:!0,get:function(){return p.splitAnnotationIndexKey}}),Object.defineProperty(t,"throwError",{enumerable:!0,get:function(){return p.throwError}}),Object.defineProperty(t,"throwIf",{enumerable:!0,get:function(){return p.throwIf}}),Object.defineProperty(t,"throwIfSome",{enumerable:!0,get:function(){return p.throwIfSome}}),Object.defineProperty(t,"checkPrerequisitesForChartSection",{enumerable:!0,get:function(){return p.checkPrerequisitesForChartSection}}),Object.defineProperty(t,"isTypeContained",{enumerable:!0,get:function(){return p.isTypeContained}}),Object.defineProperty(t,"getName",{enumerable:!0,get:function(){return p.getName}}),Object.defineProperty(t,"getLocalDataPropertyName",{enumerable:!0,get:function(){return p.getLocalDataPropertyName}});var c=n(2697);Object.defineProperty(t,"generateId",{enumerable:!0,get:function(){return c.generateId}}),Object.defineProperty(t,"generateIdAndIndex",{enumerable:!0,get:function(){return c.generateIdAndIndex}});var u=n(79538);Object.defineProperty(t,"getAvailableActions",{enumerable:!0,get:function(){return u.getAvailableActions}}),Object.defineProperty(t,"getAvailableManyAssociationPathsForEntity",{enumerable:!0,get:function(){return u.getAvailableManyAssociationPathsForEntity}}),Object.defineProperty(t,"getDataTypeFromMdElement",{enumerable:!0,get:function(){return u.getDataTypeFromMdElement}}),Object.defineProperty(t,"getEntityContainerData",{enumerable:!0,get:function(){return u.getEntityContainerData}}),Object.defineProperty(t,"getEntitySetNameByEntityType",{enumerable:!0,get:function(){return u.getEntitySetNameByEntityType}}),Object.defineProperty(t,"getEntitySetProperties",{enumerable:!0,get:function(){return u.getEntitySetProperties}}),Object.defineProperty(t,"getEntityTypeNameByEntitySet",{enumerable:!0,get:function(){return u.getEntityTypeNameByEntitySet}}),Object.defineProperty(t,"getMetadataElementProperties",{enumerable:!0,get:function(){return u.getMetadataElementProperties}}),Object.defineProperty(t,"resolveToGeneratedMetadataElement",{enumerable:!0,get:function(){return u.resolveToGeneratedMetadataElement}});var m=n(14559);Object.defineProperty(t,"buildRangeArray",{enumerable:!0,get:function(){return m.buildRangeArray}}),Object.defineProperty(t,"getParentNodeId",{enumerable:!0,get:function(){return m.getParentNodeId}}),Object.defineProperty(t,"getRootNodeIndex",{enumerable:!0,get:function(){return m.getRootNodeIndex}}),Object.defineProperty(t,"haveSameParent",{enumerable:!0,get:function(){return m.haveSameParent}}),Object.defineProperty(t,"isBefore",{enumerable:!0,get:function(){return m.isBefore}}),Object.defineProperty(t,"isChildOf",{enumerable:!0,get:function(){return m.isChildOf}}),Object.defineProperty(t,"isSameNodeId",{enumerable:!0,get:function(){return m.isSameNodeId}}),Object.defineProperty(t,"resolveNodeId",{enumerable:!0,get:function(){return m.resolveNodeId}}),Object.defineProperty(t,"resolveNodeIdRange",{enumerable:!0,get:function(){return m.resolveNodeIdRange}}),Object.defineProperty(t,"getRootNodeIdForCreation",{enumerable:!0,get:function(){return m.getRootNodeIdForCreation}});var d=n(75668);Object.defineProperty(t,"buildValueHelpNode",{enumerable:!0,get:function(){return d.buildValueHelpNode}}),Object.defineProperty(t,"buildValueHelpTreeId",{enumerable:!0,get:function(){return d.buildValueHelpTreeId}}),Object.defineProperty(t,"draftSpecificFields",{enumerable:!0,get:function(){return d.draftSpecificFields}}),Object.defineProperty(t,"expandValueHelpTreeForPath",{enumerable:!0,get:function(){return d.expandValueHelpTreeForPath}}),Object.defineProperty(t,"filterValueHelpNodesByPath",{enumerable:!0,get:function(){return d.filterValueHelpNodesByPath}}),Object.defineProperty(t,"getAvailableFieldPathsForEntity",{enumerable:!0,get:function(){return d.getAvailableFieldPathsForEntity}}),Object.defineProperty(t,"getPathValueHelpTree",{enumerable:!0,get:function(){return d.getPathValueHelpTree}}),Object.defineProperty(t,"getSelectableActions",{enumerable:!0,get:function(){return d.getSelectableActions}}),Object.defineProperty(t,"getValueHelpNodeByPath",{enumerable:!0,get:function(){return d.getValueHelpNodeByPath}}),Object.defineProperty(t,"getValueHelpNodeSubnodes",{enumerable:!0,get:function(){return d.getValueHelpNodeSubnodes}}),Object.defineProperty(t,"isValidPath",{enumerable:!0,get:function(){return d.isValidPath}}),Object.defineProperty(t,"isValidPathForValueHelpTree",{enumerable:!0,get:function(){return d.isValidPathForValueHelpTree}}),Object.defineProperty(t,"measuresAvailable",{enumerable:!0,get:function(){return d.measuresAvailable}}),Object.defineProperty(t,"removeValueHelpNodeByPath",{enumerable:!0,get:function(){return d.removeValueHelpNodeByPath}}),Object.defineProperty(t,"resolveValueHelpTreeId",{enumerable:!0,get:function(){return d.resolveValueHelpTreeId}});var y=n(98669);Object.defineProperty(t,"join",{enumerable:!0,get:function(){return y.join}}),Object.defineProperty(t,"union",{enumerable:!0,get:function(){return y.union}}),Object.defineProperty(t,"filter",{enumerable:!0,get:function(){return y.filter}}),Object.defineProperty(t,"sort",{enumerable:!0,get:function(){return y.sort}}),Object.defineProperty(t,"mergeColumns",{enumerable:!0,get:function(){return y.mergeColumns}}),Object.defineProperty(t,"deduplicate",{enumerable:!0,get:function(){return y.deduplicate}}),Object.defineProperty(t,"convertToPlainValue",{enumerable:!0,get:function(){return y.convertToPlainValue}}),Object.defineProperty(t,"getCellForColumn",{enumerable:!0,get:function(){return y.getCellForColumn}}),Object.defineProperty(t,"getCellDataForColumn",{enumerable:!0,get:function(){return y.getCellDataForColumn}}),Object.defineProperty(t,"getCellValueForColumn",{enumerable:!0,get:function(){return y.getCellValueForColumn}});var g=n(88048);Object.defineProperty(t,"areIdentical",{enumerable:!0,get:function(){return g.areIdentical}}),Object.defineProperty(t,"buildRanges",{enumerable:!0,get:function(){return g.buildRanges}}),Object.defineProperty(t,"containSameEntries",{enumerable:!0,get:function(){return g.containSameEntries}}),Object.defineProperty(t,"findSingleMove",{enumerable:!0,get:function(){return g.findSingleMove}}),Object.defineProperty(t,"moveUINodeSameParent",{enumerable:!0,get:function(){return g.moveUINodeSameParent}}),Object.defineProperty(t,"moveUINodeDifferentParent",{enumerable:!0,get:function(){return g.moveUINodeDifferentParent}});var f=n(84382);Object.defineProperty(t,"getAnnotationPathFromMacro",{enumerable:!0,get:function(){return f.getAnnotationPathFromMacro}}),Object.defineProperty(t,"getPropertyPathFromMacro",{enumerable:!0,get:function(){return f.getPropertyPathFromMacro}}),Object.defineProperty(t,"getSupportedMacroNames",{enumerable:!0,get:function(){return f.getSupportedMacroNames}}),Object.defineProperty(t,"MACRO_ATTRIBUTE_NAME_CONTEXT_PATH",{enumerable:!0,get:function(){return f.MACRO_ATTRIBUTE_NAME_CONTEXT_PATH}}),Object.defineProperty(t,"MACRO_ATTRIBUTE_NAME_META_PATH",{enumerable:!0,get:function(){return f.MACRO_ATTRIBUTE_NAME_META_PATH}}),Object.defineProperty(t,"MACRO_NAME_CHART",{enumerable:!0,get:function(){return f.MACRO_NAME_CHART}}),Object.defineProperty(t,"MACRO_NAME_FILTER_BAR",{enumerable:!0,get:function(){return f.MACRO_NAME_FILTER_BAR}}),Object.defineProperty(t,"MACRO_NAME_TABLE",{enumerable:!0,get:function(){return f.MACRO_NAME_TABLE}}),Object.defineProperty(t,"MACRO_NAME_FORM",{enumerable:!0,get:function(){return f.MACRO_NAME_FORM}}),Object.defineProperty(t,"MACRO_NAME_FORM_ELEMENT",{enumerable:!0,get:function(){return f.MACRO_NAME_FORM_ELEMENT}}),Object.defineProperty(t,"MACRO_NAME_FIELD",{enumerable:!0,get:function(){return f.MACRO_NAME_FIELD}}),Object.defineProperty(t,"MACRO_NAME_MICRO_CHART",{enumerable:!0,get:function(){return f.MACRO_NAME_MICRO_CHART}});var h=n(79258);Object.defineProperty(t,"changeUIPropertyPrepareDynamicProp",{enumerable:!0,get:function(){return h.changeUIPropertyPrepareDynamicProp}}),Object.defineProperty(t,"mergeTableColumnsDynamicProp",{enumerable:!0,get:function(){return h.mergeTableColumnsDynamicProp}}),Object.defineProperty(t,"PROP_NAME_PROPERTY",{enumerable:!0,get:function(){return h.PROP_NAME_PROPERTY}}),Object.defineProperty(t,"PROP_NAME_DYNAMIC_PROPERTY",{enumerable:!0,get:function(){return h.PROP_NAME_DYNAMIC_PROPERTY}}),o(n(57306),t)},84382:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPropertyPathFromMacro=t.getAnnotationPathFromMacro=t.getSupportedMacroNames=t.MACRO_ATTRIBUTE_NAME_CONTEXT_PATH=t.MACRO_ATTRIBUTE_NAME_META_PATH=t.MACRO_NAME_MICRO_CHART=t.MACRO_NAME_FIELD=t.MACRO_NAME_FORM_ELEMENT=t.MACRO_NAME_FORM=t.MACRO_NAME_TABLE=t.MACRO_NAME_CHART=t.MACRO_NAME_FILTER_BAR=void 0;const a=n(74181),o=n(79538),r=n(23635);t.MACRO_NAME_FILTER_BAR="FilterBar",t.MACRO_NAME_CHART="Chart",t.MACRO_NAME_TABLE="Table",t.MACRO_NAME_FORM="Form",t.MACRO_NAME_FORM_ELEMENT="FormElement",t.MACRO_NAME_FIELD="Field",t.MACRO_NAME_MICRO_CHART="MicroChart",t.MACRO_ATTRIBUTE_NAME_META_PATH="metaPath",t.MACRO_ATTRIBUTE_NAME_CONTEXT_PATH="contextPath",t.getSupportedMacroNames=function(){return[t.MACRO_NAME_FILTER_BAR,t.MACRO_NAME_CHART,t.MACRO_NAME_TABLE]},t.getAnnotationPathFromMacro=function(e,n,i){const{entityContainerMdElement:s,entitySets:l}=(0,o.getEntityContainerData)(e.metadataService),p=function(e,t,n,o){const r=(e||"").split("/").filter((e=>!!e));if(!r.length)return t;if(r[0]===n)return(0,a.throwIf)(!r[1]||!o.includes(r[1]),`Could not resolve entitySet '${r[1]}'`),"/"+r.join("/");if(o.includes(r[0]))return`/${n}/`+r.join("/");return"/"+r.join("/")}(n.attributes.get(t.MACRO_ATTRIBUTE_NAME_CONTEXT_PATH),e.pageBase.contextPath,s.name,l),c=n.attributes.get(t.MACRO_ATTRIBUTE_NAME_META_PATH)||"",u=i?(0,a.getRootNodeTerm)(i):a.ROOT_NODE_TERM_ANY,m=`${p}/${c}`,d=(0,r.resolvePath)(m).target,y=(0,r.resolveMetadataElement)(e.metadataService,d)?.path||d,g=d!==y?m.replace(d,y):m;let f="";try{f=(0,a.resolveConfiguredPath)(e,s,g,u)}catch(e){f=""}return{annotationPath:f,configuredPath:g}},t.getPropertyPathFromMacro=function(e,n){let a=`${n.attributes.get(t.MACRO_ATTRIBUTE_NAME_CONTEXT_PATH)||e.pageBase.contextPath}/${n.attributes.get(t.MACRO_ATTRIBUTE_NAME_META_PATH)}`;return a.startsWith("/")&&(a=a.slice(1)),(0,r.resolveMetadataElement)(e.metadataService,a)?.path}},79538:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDataTypeFromMdElement=t.getMetadataElementProperties=t.getEntityTypeNameByEntitySet=t.getEntitySetProperties=t.getEntitySetNameByEntityType=t.getEntityContainerData=t.getAvailableActions=t.getAvailableManyAssociationPathsForEntity=t.resolveToGeneratedMetadataElement=void 0;const a=n(72926),o=n(54993),r=n(98879);function i(e){let t=null;const n=[];for(const[n,a]of e.getRootMetadataElements().entries())if(e.getEdmTargetKinds(n).includes("EntityContainer")){t=a;break}const a=t?t.content:[];return n.push(...a.filter((t=>e.getEdmTargetKinds(t.path).includes("EntitySet")&&!t.name.endsWith("_texts"))).map((e=>e.name))),{entityContainerMdElement:t,entitySets:n}}function s(e,t){let n="";for(const a of t.content||[]){const o=t.path+"/"+a.name;if(e.getEdmTargetKinds(o).includes("Parameter")){const t=e.getMetadataElement(o);n=t?.isEntityType?t?.structuredType:"";break}}return n}t.resolveToGeneratedMetadataElement=function(e,t){const n=e.getMetadataElement(t);let a;if(n?.structuredType&&n?.isEntityType){const o=e.getMetadataElement(n?.structuredType)?.keys?.[0];o&&(a=e.getMetadataElement(`${t}_${o}`))}return a||n},t.getAvailableManyAssociationPathsForEntity=function(e,t){const n=[];for(const e of t?.content??[])e.name.endsWith("_texts")||e?.isEntityType&&e?.isCollectionValued&&n.push(e.name);return n},t.getAvailableActions=function(e,t){const n=new Map,a=new Set,o=[];for(const[t,r]of e.getRootMetadataElements()){const i=e.getEdmTargetKinds(t);if(i.includes("EntityContainer"))for(const t of r.content){const o=r.path+"/"+t.name,i=e.getEdmTargetKinds(o);if(i.includes("FunctionImport")||i.includes("ActionImport")||"functionImport"===t.kind||"actionImport"===t.kind){const t=e.getMetadataElement(o).structuredType;n.set(o,t),a.add(t)}}else(i.includes("Function")||i.includes("Action"))&&o.push(r)}for(const r of o){const o=r.name.split("(")[0];a.has(o)||(t?t===s(e,r)&&n.set(o,r.name):n.set(o,r.name))}return n},t.getEntityContainerData=i,t.getEntitySetNameByEntityType=function(e,t,n){const{entityContainerMdElement:a,entitySets:o}=i(e);return o.find((o=>{if(o===n)return!1;return e.getMetadataElement(a.path+"/"+o)?.structuredType===t}))},t.getEntitySetProperties=function(e){const t=new Map,n=(0,o.getAvailableEntitySetProperties)(e.metadataService);for(const[e,a]of n.entitySetPropertyMap)t.set(e.split("/").pop(),a);return t},t.getEntityTypeNameByEntitySet=function(e,t){let n;if(t.includes("/"))n=e.getMetadataElement(t);else{const a=e.getRootMetadataElements();let o=null;if(a.forEach((t=>{e.getEdmTargetKinds(t.path).includes("EntityContainer")&&(o=t)})),!o||!o.content.find((e=>e.name===t)))throw new r.ApiError(`EntitySet '${t}' not found`,r.ApiErrorCode.General);const i=o.name+"/"+t;n=e.getMetadataElement(i)}if(!n?.structuredType)throw new r.ApiError(`No EntityType found for EntitySet '${t}'`,r.ApiErrorCode.General);return n?.structuredType},t.getMetadataElementProperties=function e(t,n,a,o,r){const i=(o="number"==typeof o?++o:1)<=2,s=[];return(t.getMetadataElement(n)?.content??[]).forEach((n=>{n.structuredType&&!n.isCollectionValued&&i?s.push(...e(t,n.structuredType,(a?a+"/":"")+n.name,o,r)):r&&!r(n)||s.push({value:(a?a+"/":"")+n.name})})),s},t.getDataTypeFromMdElement=function e(t,n){let o=null;if(t?.edmPrimitiveType?.startsWith("Edm.")&&!t?.isCollectionValued)o=a.primitiveTypeMap[t?.edmPrimitiveType]?.constantExpressionName;else if(n&&t?.isEntityType&&t?.structuredType){const a=n.getMetadataElement(t.structuredType);if(a?.keys?.[0]){const t=`${a.name}/${a?.keys?.[0]}`;return e(n.getMetadataElement(t))}}return o}},88048:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildRanges=t.containSameEntries=t.areIdentical=t.findSingleMove=t.moveUINodeDifferentParent=t.moveUINodeSameParent=void 0;const a=n(98879),o=n(20576),r=n(78263),i=n(91310),s=n(35586),l=n(23635);function p(e,t,n,a,o){const r=[...e.nodeId,o],{uiNode:i,uiNodeInternal:p}=(0,s.resolveNodeId)(r,t,n);let c;switch(p.nodeType){case l.UI_NODE_TYPE_FORM_FIELD:c=i.path.value;break;case l.UI_NODE_TYPE_CONTACT:case l.UI_NODE_TYPE_CONNECTED_FIELDS:{const t=i.relativePath.value||"";c=[...(e.relativePath||"").split("/"),...t.split("/")].filter((e=>!!e)).join("/");break}}if(void 0===c)return;const u=e,m=a.relativePath;if(u.relativePath===m)return;(0,s.throwIf)(!c.startsWith(m),`Field with path ('${c}' cannot be moved to a FieldGroup reached via relative path '${m}')`);const d=c.slice(m?m.length+1:0);switch(p.nodeType){case l.UI_NODE_TYPE_FORM_FIELD:{const e=p.dataField.propertyValues.find((e=>"Value"===e.name));"Path"===e?.value.type&&(e.value.Path=d);break}case l.UI_NODE_TYPE_CONTACT:case l.UI_NODE_TYPE_CONNECTED_FIELDS:{const e=p.record.propertyValues.find((e=>"Target"===e.name));if(e?.value.type===l.ExpressionType.AnnotationPath){const t=e.value.AnnotationPath.split("/").pop();e.value.AnnotationPath=`${d?d+"/":""}${t}`}break}}}function c(e,t){if(e?.length!==t.length)return!1;for(const[n,a]of e.entries())if(t[n]!==a)return!1;return!0}function u(e){const t=[];if(!e?.length)return t;let n={from:e[0],to:e[0]};t.push(n);for(let a=1;a<e.length;a++)e[a]===n.to+1?n.to=e[a]:(n={from:e[a],to:e[a]},t.push(n));return t}t.moveUINodeSameParent=function(e,t){const{nodeType:n,parentUINode:r,parentUINodeInternal:p,rootUINodeInternal:c,nodeIdRange:u,options:m}=e;if((0,l.isTooComplex)(r))return;const{fromIndex:d,toIndex:y,count:g}=(0,s.resolveNodeIdRange)(u);function f(){const e=[];if(d<=t&&t<=y+1);else{const n=r.nodeType===l.UI_NODE_TYPE_SECTION?p:null,a=(0,i.moveSection)(c,d,g,t,n,n);e.push(a)}return e}const h=p;switch(h.nodeType){case l.UI_NODE_TYPE_HEADER_SECTIONS:return f();case l.UI_NODE_TYPE_LIST:return(0,i.isMoveWithToggling)(r,m).result?(0,s.moveWithInlineToggle)(h,g,d,t,m):(0,i.getMoveChangesForList)(h,d,t,g);case l.UI_NODE_TYPE_FILTER_FIELDS:return(0,i.getMoveChangesForFilterFields)(p,d,t,g)}switch(n){case l.UI_NODE_TYPE_SECTION:case l.UI_NODE_TYPE_DATA_POINT:return f();case l.UI_NODE_TYPE_FORM_FIELD:case l.UI_NODE_TYPE_CONNECTED_FIELDS:case l.UI_NODE_TYPE_ACTION:case l.UI_NODE_TYPE_NAVIGATION:case l.UI_NODE_TYPE_COLUMN:case l.UI_NODE_TYPE_CONTACT:case l.UI_NODE_TYPE_CHART:if(m?.toggleDetermining&&n===l.UI_NODE_TYPE_NAVIGATION)throw new a.ApiError(`Cannot move (moving node of type "${n}" from "${h.nodeType}" header to footer not supported)`);return function(e,t,n,a,r,p,c){const u=[];if((0,i.isMoveWithToggling)(e,t).result)u.push(...(0,s.moveWithInlineToggle)(n,a,r,p,t));else if(r<=p&&p<=c+1);else if(e.nodeType===l.UI_NODE_TYPE_CONNECTED_FIELDS)u.push(...function(e,t){const n=e.delimiter;if((0,l.isTooComplex)(n))return[];const a=(0,i.generateTemplateChange)(t.target.annotation,{swapKeys:!0});if(!a)return[];return[{targetPath:t.target.annotation.top.target,changes:[a]}]}(e,n));else{const e=n,t=e.nodeType===l.UI_NODE_TYPE_SECTION?e.referencedAnnotation.top:e.identification.top,c=t.annotation,{collection:m,pointer:d}=(0,i.getDataFieldsCollectionForSection)(c);let y=e.subnodes.findIndex((t=>(0,s.isSameNodeId)(t.nodeId,[...e.nodeId,p])));-1===y&&(y=e.subnodes.length);const g=e.subnodes.findIndex((t=>(0,s.isSameNodeId)(t.nodeId,[...e.nodeId,r])));(0,s.moveInCollection)(m,g,y,a),(0,s.moveInCollection)(e.subnodes,g,y,a);const f={annotation:c,changeType:o.ChangeType.Move,pointer:`${d}/${p}`,moveFromPointer:`${d}/${r}`};a>1&&(f.moveFromPointer+="-"+(r+a-1)),u.push({targetPath:t.target,changes:[f]})}return u}(r,m,p,g,d,t,y)}throw new a.ApiError(`Cannot move (moving node of type "${n}" not supported)`)},t.moveUINodeDifferentParent=function(e,t,n,c,u){const{nodeType:m,parentUINode:d,parentUINodeInternal:y,rootUINodeInternal:g,nodeIdRange:f,targetChanges:h,options:T}=e,{fromIndex:P,toIndex:E,count:v}=(0,s.resolveNodeIdRange)(f),{parentUINode:b,parentUINodeInternal:_}=(0,s.resolveNodeId)(u,t,n,!0);if((0,l.isTooComplex)(d))return;if(T?.toggleDetermining&&m===l.UI_NODE_TYPE_NAVIGATION)throw new a.ApiError(`Cannot move (moving node of type "${m}" from "${d.nodeType}" to pageAction footer not supported)`);if((0,l.isTooComplex)(b))throw new s.ApiComplexityError(`Move target UINode '${u}' too complex`,b);if((0,l.isTooComplex)(c))throw new s.ApiComplexityError(`Move source UINode '${f.from}' too complex`,c);(c.allowedParentNodes||{})[JSON.stringify(b.nodeId)]||(0,s.throwError)(`Moving node ${c.nodeId} into node ${b.nodeId} not supported`);const A=u[u.length-1];switch(m){case l.UI_NODE_TYPE_SECTION:{const e=d.nodeType===l.UI_NODE_TYPE_SECTION?y:null,t=b.nodeType===l.UI_NODE_TYPE_SECTION?_:null,n=(0,i.moveSection)(g,P,v,A,e,t);h.push(n);break}case l.UI_NODE_TYPE_FORM_FIELD:case l.UI_NODE_TYPE_ACTION:case l.UI_NODE_TYPE_NAVIGATION:case l.UI_NODE_TYPE_COLUMN:case l.UI_NODE_TYPE_CONTACT:case l.UI_NODE_TYPE_CONNECTED_FIELDS:!function(e,t,n,a,o,r){for(let i=e;i<=t;i++)p(n,a,o,r,i)}(P,E,d,t,n,b),function(e,t,n,a,p,c,u,m,d,y){const g=p;let f;f=g.nodeType===l.UI_NODE_TYPE_PAGE_ACTIONS?p.identification.top:p.referencedAnnotation.top;const h=f.annotation,{collection:T,pointer:P}=(0,i.getDataFieldsCollectionForSection)(h),E=g.subnodes.findIndex((e=>(0,s.isSameNodeId)(e.nodeId,[...g.nodeId,t]))),v=T.splice(E,c);g.subnodes.splice(E,c);let b={annotation:h,pointer:`${P}/${t}`,changeType:o.ChangeType.Delete};c>1&&(b.pointer+="-"+(t+c-1));u.push({targetPath:f.target,changes:[b]});const _=m;let A;A=_.nodeType===l.UI_NODE_TYPE_PAGE_ACTIONS?_.identification.top:_.referencedAnnotation.top;const C=A.annotation,{collection:N,pointer:I}=(0,i.getDataFieldsCollectionForSection)(C);let S=_.subnodes.findIndex((e=>(0,s.isSameNodeId)(e.nodeId,[..._.nodeId,d])));-1===S&&(S=_.subnodes.length);N.splice(S,0,...v);const x=(0,i.isMoveWithToggling)(n,y,a);for(const e of v){if(x.result){const t=x.removeToggledProperty;y?.toggleInline&&(0,i.toggleBooleanPropForDataField)(e,r.DATA_FIELD_PROP_NAME_INLINE,t),y?.toggleDetermining&&(0,i.toggleBooleanPropForDataField)(e,r.DATA_FIELD_PROP_NAME_DETERMINING,t)}else _.nodeType===l.UI_NODE_TYPE_SECTION&&(0,i.toggleBooleanPropForDataField)(e,r.DATA_FIELD_PROP_NAME_DETERMINING,!0);b={annotation:C,changeType:o.ChangeType.Insert,pointer:`${I}/${d}`,content:{type:o.MOD_TYPE_RECORD,value:e}},u.push({targetPath:A.target,changes:[b]})}}(0,P,d,b,y,v,h,_,A,T);break;default:throw new a.ApiError(`Moving node "${m}" to different parent not supported)`)}},t.findSingleMove=function(e,t,n=-1){if(c(e,t))return{found:!1};const a=t.map((t=>e.indexOf(t)));if(a.includes(-1))return{found:!1};const o=u(a);if(o.length>4)return{found:!1};const r=[...o].sort(((e,t)=>e.from<t.from?-1:1));let i,s;for(const[t,a]of o.entries()){const l=r.indexOf(a);if(l!==t&&(n<a.from||a.to<n)){s=a,i=o[t+1]?.from??e.length,o.splice(t,1),o.splice(l,0,a);break}}return!o.find(((e,t)=>r.indexOf(e)!==t))?{found:!0,range:s,insertBeforeIndex:i}:{found:!1}},t.areIdentical=c,t.containSameEntries=function(e,t){return c([...e].sort(),[...t].sort())},t.buildRanges=u},14559:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRootNodeIdForCreation=t.resolveNodeId=t.resolveNodeIdRange=t.buildRangeArray=t.haveSameParent=t.isBefore=t.isChildOf=t.isSameNodeId=t.getRootNodeIndex=t.getParentNodeId=void 0;const a=n(98879),o=n(23635);function r(e,t){if(!e?.length||!t?.length)return!1;if(e.length!==t.length)return!1;let n=!0;for(const a in e)if(e[a]!==t[a]){n=!1;break}return n}function i(e,t){const n=[...e];n.pop();const a=[...t];return a.pop(),r(n,a)}t.getParentNodeId=function(e){const t=[...e];return t.pop(),t},t.getRootNodeIndex=function(e){return Array.isArray(e[0])?e[0][0]:e[0]},t.isSameNodeId=r,t.isChildOf=function(e,t){const n=JSON.stringify(e||[]),a=JSON.stringify(t||[]);return n!==a&&("[]"!==n&&"[]"!==a&&n.startsWith(a.substring(0,a.length-1)))},t.isBefore=function(e,t){let n=null;const a=Math.min(e.length,t.length);for(let o=0;o<a;o++)if(e[o]!==t[o]){n=e[o]<t[o];break}return null===n&&e.length!==t.length&&(n=e.length<t.length),n},t.haveSameParent=i,t.buildRangeArray=function(e){if(!Array.isArray(e[0]))return[{from:e,to:e}];const t=[],n=[...e];for(;n.length>0;){const e=n.shift(),a={from:e,to:e};for(;n.length>0&&i(e,n[0])&&a.to[a.to.length-1]+1===n[0][n[0].length-1];)a.to=n.shift();t.push(a)}return t},t.resolveNodeIdRange=function(e){const t=e.from[e.from.length-1],n=e.to[e.to.length-1];return{fromIndex:t,toIndex:n,count:n-t+1}},t.resolveNodeId=function(e,t,n,o){let i,s,l,p,c={nodeId:[],annotationPath:"",tooComplex:!1,nodeType:"Dummy",location:null,subnodes:t},u=n?{nodeId:[],annotationPath:"",tooComplex:!1,nodeType:"Dummy",location:null,subnodes:n}:null,m=0;for(const t of e){m+=1,i=c;let e=c?.subnodes[t];const n=[...i.nodeId,t];if(e&&r(e.nodeId,n)||(e=(c?.subnodes||[]).find((e=>r(e.nodeId,n)))),c=e,l||(l=c),u){s=u;let e=u?.subnodes[t];const n=[...s.nodeId,t];e&&r(e.nodeId,n)||(e=(u?.subnodes||[]).find((e=>r(e.nodeId,n)))),u=e,p||(p=u)}if(!c)break}if(!c){let t=!1;if(o){const n=e[e.length-1];let a=-1;(i.subnodes||[]).forEach((e=>{e.nodeId[e.nodeId.length-1]>a&&(a=e.nodeId[e.nodeId.length-1])})),t=m===e.length&&a===n-1}if(!t)throw new a.ApiError(`UI Node ${e} does not exist`)}return{uiNode:c,parentUINode:i,rootUINode:l,uiNodeInternal:u,parentUINodeInternal:s,rootUINodeInternal:p}},t.getRootNodeIdForCreation=function(e,t,n){const a=n?.nodeType||t;let r;return a===o.UI_NODE_TYPE_SECTION?r=n?.isHeaderFacet?o.UI_NODE_TYPE_HEADER_SECTIONS:o.UI_NODE_TYPE_FORM:a===o.UI_NODE_TYPE_DATA_POINT?r=o.UI_NODE_TYPE_HEADER_SECTIONS:a===o.UI_NODE_TYPE_FILTER_FIELD?r=o.UI_NODE_TYPE_FILTER_FIELDS:a===o.UI_NODE_TYPE_VISUAL_FILTER?r=o.UI_NODE_TYPE_VISUAL_FILTERS:[o.UI_NODE_TYPE_COLUMN,o.UI_NODE_TYPE_ACTION].includes(a)&&(r=o.UI_NODE_TYPE_LIST),(e||[]).find((e=>!(0,o.isTooComplex)(e)&&e.nodeType===r))?.nodeId}},98669:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPlainValue=t.getCellValueForColumn=t.getCellDataForColumn=t.getCellForColumn=t.sort=t.mergeColumns=t.filter=t.deduplicate=t.union=t.join=void 0;const a=n(70704),o=n(23635);function r(e,t,n,a){return!(t.readonly&&a.readonly)&&(t.readonly||a.readonly)&&(t.readonly&&e<n.length||a.readonly&&e>=n.length)?t.readonlyTooltip||a.readonlyTooltip:""}function i(e,t,n,r){const i=JSON.parse(JSON.stringify(e));if(i.key=`${t}`,(0,o.isTooComplex)(i.data))return i;const s=i.data.cells;n&&Object.keys(s).forEach((e=>{const t=s[e];(0,o.isTooComplex)(t)||(t.readonly=!0,t.readonlyTooltip=t.readonlyTooltip||n)}));for(const e of r?.keys()||[])if(!s[e]){const{defaultValue:t,copySource:n}=r.get(e),o={readonly:!0,readonlyTooltip:a.i18n.t("ReadonlyTooltipCannotBeChanged")};void 0!==t?s[e]={value:t,...o}:n&&(s[e]={...s[n],...o})}return i}function s(e,t,n,a){const r=e||t,i=r.data,{isJoinedColumnDef:s,readonlyColumns:l,readonlyTooltip:p}=a||{},c={...i.cells};if(s&&(c[s.name]={value:!!t}),l?.size)for(const e of[...l]){const t=c[e];t?t&&!(0,o.isTooComplex)(t)&&(t.readonly=!0,t.readonlyTooltip=p):c[e]={value:"",readonly:!0,readonlyTooltip:p}}const u={key:`${n}`,data:{location:t?.data?.location||i.location,cells:c}};return r.rowTitle&&(u.rowTitle=r.rowTitle),r.deletionDisabled&&(u.deletionDisabled=!0,u.deletionDisabledTooltip=r.deletionDisabledTooltip),u}function l(e,t){return(0,o.isTooComplex)(e.data)?null:e.data.cells[t]}function p(e,t){const n=l(e,t);return n?(0,o.isTooComplex)(n)?n:n.value:null}function c(e,t,n){for(const a of e){const e=p(a,t);if(null!==e){if((0,o.isTooComplex)(e)&&(0,o.isTooComplex)(n)&&u(e,n))return a;if(!(0,o.isTooComplex)(e)&&!(0,o.isTooComplex)(n)&&n===e)return a}}return null}function u(e,t){const n=e=>{const t=(e.tooComplexLocations||[]).find((e=>e.reason&&e.message.wrongValue));if(t)return{reason:t.reason,wrongValue:t.message.wrongValue}},a=n(e),o=n(t);return!!a&&!!o&&a.reason===o.reason&&a.wrongValue===o.wrongValue}function m(e,t){if(!e.value&&!e.baseValue&&!e.baseTooComplex)return!0;if(t!==o.UI_PROP_TYPE_ENUM&&t!==o.UI_PROP_TYPE_DEPENDENT_ENUM)return!1;if(e.value===o.ENUM_VALUE_NONE){if(e.baseTooComplex)return!1;{const t=e.baseValue;return!t||t.value===o.ENUM_VALUE_NONE}}}t.join=function(e,t,n,a){if(e.tooComplex)return e;if(t.tooComplex)return t;const r=e,i=t,l={tooComplex:!1,type:o.UI_PROP_TYPE_TABLE,columns:[...r.columns],locations:[...r?.locations||[],...i?.locations||[]],allowedValuesMap:{},rows:[]},u=function(e){const{isJoinedColumnDef:t}=e||{};if(t){const e={name:t.name,type:t.type};return void 0!==t.defaultValue&&(e.default=t.defaultValue),e}}(a);u&&l.columns.push(u);const{joinedRightRowKeys:m,rows:d}=function(e,t,n,a){const r=new Set,i=[];for(const[l,u]of e.rows.entries()){if((0,o.isTooComplex)(u.data)){i.push(u);continue}const e=p(u,n),m=c(t.rows,n,e);r.add(m?.key),i.push(s(u,m,l,a))}return{rows:i,joinedRightRowKeys:r}}(r,i,n,a);l.rows.push(...d);const y=function(e,t,n,a,r,i){const l=[];let p=a;for(const a of e.rows){if(r.has(a.key))continue;if((0,o.isTooComplex)(a.data)){l.push(a);continue}const e=new Set([...(i.readonlyColumns||new Set).keys(),...t.columns.map((e=>e.name))]),c=s(null,a,p,{...i,readonlyColumns:e});if(!(0,o.isTooComplex)(c.data)){const{cells:e,location:t}=c.data,a=e&&e[n];(0,o.isTooComplex)(a)||(e[n]=(0,o.buildTooComplex)(o.TooComplexReason.UnsupportedValue,t.range,t.fileUri))}l.push(c),p++}return l}(i,r,n,l.rows.length,m,a);return l.rows.push(...y),i.readonly&&(l.readonly=!0,l.readonlyTooltip=i.readonlyTooltip),l},t.union=function(e,t,n){if(e.tooComplex)return e;if(t.tooComplex)return t;const a=e,s=t,l=[...a.columns],p=new Set(l.map((e=>e.name)));for(const e of s.columns)p.has(e.name)||(l.push(e),p.add(e.name));const{nullCellContent:c}=n||{},u=[],m=a.readonly&&s.readonly,d=a.rows||[],y=s.rows||[];for(const[e,t]of[...d,...y].entries()){const n=r(e,a,d,s);u.push(i(t,e,n,c))}const g={tooComplex:!1,type:o.UI_PROP_TYPE_TABLE,locations:[...a?.locations||[],...s?.locations||[]],allowedValuesMap:{},columns:l,rows:u};return m&&(g.readonly=!0,g.readonlyTooltip=a.readonlyTooltip||s.readonlyTooltip),g},t.deduplicate=function(e,t){if(e.tooComplex)return e;const n=e,a=new Set,r=n.rows.filter((e=>{const n=l(e,t),r=(0,o.isTooComplex)(n)?JSON.stringify(n.tooComplexLocations):String(n?.value||""),i=a.has(r);return a.add(r),!i}));return r.forEach(((e,t)=>e.key=`${t}`)),{...e,rows:r}},t.filter=function(e,t,n){if(e.tooComplex)return e;const a=e.rows.filter((e=>{const a=l(e,t);return a&&!(0,o.isTooComplex)(a)&&n.includes(a.value)}));return a.forEach(((e,t)=>e.key=`${t}`)),{...e,rows:a}},t.mergeColumns=function(e,t,n){if(e.tooComplex)return e;const a=e,r=a.columns,i=r.find((e=>e.name===t)),s=r.findIndex((e=>e.name===n)),p=r[s],c=a.rows;if(c.forEach((e=>{(0,o.isTooComplex)(e.data)||function(e,t,n,a,r){const i=l(e,t),s=l(e,n),p=e.data;if((0,o.isTooComplex)(i)||(0,o.isTooComplex)(s))e.data=(0,o.isTooComplex)(i)?i:s;else if(m(i,a.type)||m(s,r.type))m(i,a.type)&&(p.cells[t]=l(e,n)),delete p.cells[n];else{const{fileUri:t,range:n}=p.location;e.data=(0,o.buildTooComplex)(o.TooComplexReason.NoValidPropertyCombination,n,t)}}(e,t,n,i,p)})),r.splice(s,1),i.allowedValues?.length||p.allowedValues?.length){let e=[].concat(i?.allowedValues||[]).concat(p?.allowedValues||[]);e=e.sort(((e,t)=>(e.text||e.value).localeCompare(t.text||t.value))),e=e.filter(((t,n)=>e[n-1]?.value!==t.value)),i.allowedValues=e}return{...e,rows:c,columns:r}},t.sort=function(e,t){if(e.tooComplex)return e;const n=e.rows.sort(t);return n.forEach(((e,t)=>e.key=`${t}`)),{...e,rows:n}},t.getCellForColumn=l,t.getCellDataForColumn=function(e,t){const n=l(e,t);return n?(0,o.isTooComplex)(n)?null:n:null},t.getCellValueForColumn=p,t.convertToPlainValue=function(e){if((0,o.isTooComplex)(e))return[];const t=[];for(const n of e.rows){const e={},a=n.data;(0,o.isTooComplex)(a)||Object.keys(a.cells).forEach((t=>{const n=a.cells[t],r=(0,o.isTooComplex)(n)?null:n.value;e[t]=r})),t.push({key:n.key,cells:e})}return t}},56890:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PageAnnotationHelper=t.APP_MODELER_NEW_ANNOTATION_API_FEATURE=void 0;const i=n(37705),s=n(6950),l=r(n(89001));t.APP_MODELER_NEW_ANNOTATION_API_FEATURE="sap.ux.appModeler.testBetaFeatures.newAnnotationAPI";const p=(0,i.isFeatureEnabled)(t.APP_MODELER_NEW_ANNOTATION_API_FEATURE);t.PageAnnotationHelper=p?l.PageAnnotationHelper:s.PageAnnotationHelper},66799:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventSubscriptionDisposable=t.EventHandlerDisposable=void 0;class EventHandlerDisposable{constructor(e){this.callOnDispose=e}dispose(){this.callOnDispose&&this.callOnDispose()}}t.EventHandlerDisposable=EventHandlerDisposable;t.EventSubscriptionDisposable=class EventSubscriptionDisposable{constructor(e){this.handler=e,this.disposable=new EventHandlerDisposable(this.dispose.bind(this))}async callHandler(e,t){this.handler&&await this.handler(e,t)}dispose(){this.handler=void 0}}},34606:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.registerFileSystemEventHandler=t.FILE_DELETED_EVENT_TYPE=t.FILE_CHANGED_EVENT_TYPE=t.FILE_CREATED_EVENT_TYPE=void 0;const o=n(63940),r=a(n(36279)),i=n(66799);t.FILE_CREATED_EVENT_TYPE="FileCreatedEvent",t.FILE_CHANGED_EVENT_TYPE="FileChangedEvent",t.FILE_DELETED_EVENT_TYPE="FileDeletedEvent",t.registerFileSystemEventHandler=function(e,n,a){let s;const l=[],p=new i.EventHandlerDisposable((()=>{l.forEach((e=>e.dispose()))}));return(n||[]).forEach((n=>{try{if(s=n&&new r.default.RelativePattern(e,n.fileSelector),s){const e=r.default.workspace.createFileSystemWatcher(s);if(!e)return;e.onDidCreate((async e=>{a({type:t.FILE_CREATED_EVENT_TYPE,uri:e})})),e.onDidChange((async e=>{a({type:t.FILE_CHANGED_EVENT_TYPE,uri:e})})),e.onDidDelete((async e=>{a({type:t.FILE_DELETED_EVENT_TYPE,uri:e})})),l.push(e)}}catch(e){o.logger.log("error","File access: error registering File System event handler - "+e)}})),p}},91996:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Notifier=void 0;const a=n(71017),o=n(92719),r=n(34606),i=n(66799);t.Notifier=class Notifier{constructor(e,t,n,a){let o;this.project=e,this.eventContext={projectRoot:this.project.root,serviceName:t,serviceType:n},o=a&&this.project.apps[a]?a:this.project.apps[""]?"":Object.keys(this.project.apps)[0]||"",o&&(this.eventContext.appName=o),this.fsEventSubscriptions=[],this.fsEventPromise=Promise.resolve()}subscribeToFSEvents(e){const t=e.map((e=>{return{fileSelector:(t=e,"string"==typeof t?t:t.pattern)};var t}));this.disposable=(0,r.registerFileSystemEventHandler)(this.project.root,t,this.onFileChangeEventHandler.bind(this))}onFileChangeEventHandler(e){this.fsEventPromise=this.fsEventPromise.then((async()=>{const t=(0,a.relative)(this.project.root,e.uri.fsPath);for(const e of this.fsEventSubscriptions)try{await e.callHandler(this.eventContext,t)}catch(e){o.uxLogger.error(`Error in file change handler: ${e}`)}}))}onFileChanged(e){const t=new i.EventSubscriptionDisposable(e);return this.fsEventSubscriptions.push(t),t.disposable}dispose(){this.disposable?.dispose()}}},20576:(e,t)=>{"use strict";var n,a,o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.MOD_TYPE_RECORD_RANGE=t.MOD_TYPE_ANNOTATION=t.MOD_TYPE_COLLECTION=t.MOD_TYPE_RECORD_TYPE=t.MOD_TYPE_RECORD=t.MOD_TYPE_PROP_VALUE=t.MOD_TYPE_EXPRESSION=t.MOD_TYPE_PRIMITIVE=t.ChangeType=t.AnnotationFileType=t.SegmentUsage=t.ServiceType=void 0,function(e){e[e.EDMX=0]="EDMX",e[e.CDS=1]="CDS"}(n||(t.ServiceType=n={})),function(e){e.asLastSegmentOnly="Last",e.asIntermediateSegmentOnly="Intermediate",e.asLastOrIntermediateSegment="LastOrIntermediate"}(a||(t.SegmentUsage=a={})),function(e){e[e.Readonly=0]="Readonly",e[e.Changeable=1]="Changeable"}(o||(t.AnnotationFileType=o={})),function(e){e.Insert="Insert",e.Delete="Delete",e.Move="Move",e.Update="Update"}(r||(t.ChangeType=r={})),t.MOD_TYPE_PRIMITIVE="primitive",t.MOD_TYPE_EXPRESSION="expression",t.MOD_TYPE_PROP_VALUE="propertyValue",t.MOD_TYPE_RECORD="record",t.MOD_TYPE_RECORD_TYPE="recordType",t.MOD_TYPE_COLLECTION="collection",t.MOD_TYPE_ANNOTATION="annotation",t.MOD_TYPE_RECORD_RANGE="recordRange"},24825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expressionNames=void 0,t.expressionNames={String:"string",Bool:"boolean",Decimal:"number",Date:"string",Float:"number",Int:"number",Path:"string",PropertyPath:"string",AnnotationPath:"string",NavigationPropertyPath:"string",EnumMember:"string",Collection:"array",Record:"object",Apply:"object",Null:"null"}},55834:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.FileType=void 0,function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"}(n||(t.FileType=n={}))},42394:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.collectAnnotationModifications=t.getAliasedPath=void 0;const i=n(41810),s=r(n(79142)),l=n(34799),p=n(24825);function c(e,t){return e.split("/").map((e=>function(e,t){let n="";const a=t.indexOf("@");if(a>=0){const o=(0,i.toAliasQualifiedName)(t.substring(a+1),e);n=t.substring(0,a)+"@"+o}else n=t.indexOf(".")>-1?(0,i.toAliasQualifiedName)(t,e):t;return n}(t,e))).join("/")}function u(e,t,n,a,o,r){let i=!1;const s=e+"/"+a,p=t.hasOwnProperty(a),c=n.hasOwnProperty(a);return p&&!c?(o.push({kind:l.ChangeType.Delete,pointer:s}),i=!0):!p&&c?(o.push({kind:l.ChangeType.Insert,pointer:s,content:r}),i=!0):p||c?p&&c&&"object"!=typeof n[a]&&(t[a]!==n[a]&&o.push({kind:l.ChangeType.Update,pointer:s,content:r}),i=!0):i=!0,i}function m(e){const t=s.default(e);let n=0;if(0===t.length)return"0";for(let e=0;e<t.length;e++){n=(n<<5)-n+t.charCodeAt(e),n&=n}return n.toString()}function d(e,t,n,a,o,r){const i=new Set,s=function(e){const t=new Map;return e.forEach(((e,n)=>{const a=m(e);t.has(a)||t.set(a,{value:e,indices:new Set}),t.get(a).indices.add(n)})),t}(t),c=new Set;t.forEach(((e,t)=>{c.add(t)})),n.forEach(((e,t)=>{i.add(t)})),n.forEach(((t,n)=>{const r=e+"/"+n;if(s.has(m(t))){const p=s.get(m(t)).indices;if(p.size>0){let t;p.has(n)?t=n:(t=function(e){let t=-1;return e.forEach((e=>{t=-1===t?e:Math.min(t,e)})),t}(p),a.push({kind:l.ChangeType.Move,pointer:r,content:{type:o},moveFromPointer:e+"/"+t})),p.delete(t),c.delete(t),i.delete(n)}}})),i.forEach((i=>{const s=n[i],m=e+"/"+i;if(c.has(i)){switch(o){case l.MOD_TYPE_ANNOTATION:f(m,t[i],n[i],a,r);break;case l.MOD_TYPE_PROP_VALUE:!function(e,t,n,a,o){const r={type:l.MOD_TYPE_PRIMITIVE,value:n.name};u(e,t,n,"name",a,r);const i={type:l.MOD_TYPE_EXPRESSION,value:n.value};u(e,t,n,"value",a,i)||y(e+"/value",t.value,n.value,a,o);d(e+"/annotations",t.annotations||[],n.annotations||[],a,l.MOD_TYPE_ANNOTATION,o)}(m,t[i],n[i],a,r);break;case l.MOD_TYPE_COLLECTION:if("object"==typeof n[i])n[i].type&&p.expressionNames[n[i].type]?y(m,t[i],n[i],a,r):g(m,t[i],n[i],a,r);else{const o={type:l.MOD_TYPE_PRIMITIVE,value:n[i]},r=i.toString(10);u(e,t,n,r,a,o)}}c.delete(i)}else{let e=o;e===l.MOD_TYPE_COLLECTION&&(e="object"==typeof s?s.type&&p.expressionNames[s.type]?l.MOD_TYPE_EXPRESSION:l.MOD_TYPE_RECORD:l.MOD_TYPE_PRIMITIVE);const t={type:e,value:n[i]};a.push({kind:l.ChangeType.Insert,pointer:m,content:t})}})),c.forEach((t=>{a.push({kind:l.ChangeType.Delete,pointer:e+"/"+t})}))}function y(e,t,n,a,o){if(t.type!==n.type){const t={type:l.MOD_TYPE_EXPRESSION,value:n};a.push({pointer:e,kind:l.ChangeType.Update,content:t})}else{const r=n.type;let s,p;switch(n.type){case"Collection":d(e+"/Collection",t.Collection,n.Collection,a,l.MOD_TYPE_COLLECTION,o);break;case"Record":g(e+"/Record",t.Record,n.Record,a,o);break;default:p=n[n.type],p&&"EnumMember"===n.type?p=p.split(" ").map((e=>(0,i.toAliasQualifiedName)(e,o))).join(" "):p&&n.type.indexOf("Path")>=0&&(p=c(p,o)),s={type:l.MOD_TYPE_PRIMITIVE,value:p},u(e,t,n,r,a,s)}}}function g(e,t,n,a,o){const r=n.type?(0,i.toAliasQualifiedName)(n.type,o):n.type;u(e,t,n,"type",a,{type:l.MOD_TYPE_PRIMITIVE,value:r}),d(e+"/propertyValues",t.propertyValues||[],n.propertyValues||[],a,l.MOD_TYPE_PROP_VALUE,o),d(e+"/annotations",t.annotations||[],n.annotations||[],a,l.MOD_TYPE_ANNOTATION,o)}function f(e,t,n,a,o){const r=(0,i.toAliasQualifiedName)(n.term,o);u(e,t,n,"term",a,{type:l.MOD_TYPE_PRIMITIVE,value:r}),n.hasOwnProperty("qualifier")&&void 0===n.qualifier&&delete n.qualifier,t.hasOwnProperty("qualifier")&&void 0===t.qualifier&&delete t.qualifier;u(e,t,n,"qualifier",a,{type:l.MOD_TYPE_PRIMITIVE,value:n.qualifier});u(e,t,n,"value",a,{type:l.MOD_TYPE_EXPRESSION,value:n.value})||y(e+"/value",t.value,n.value,a,o),n.record&&n.record.hasOwnProperty("type")&&void 0===n.record.type&&delete n.record.type,t.record&&t.record.hasOwnProperty("type")&&void 0===t.record.type&&delete t.record.type;u(e,t,n,"record",a,{type:l.MOD_TYPE_RECORD,value:n.record})||g(e+"/record",t.record,n.record,a,o);u(e,t,n,"collection",a,{type:l.MOD_TYPE_COLLECTION,value:n.collection})||d(e+"/collection",t.collection,n.collection,a,l.MOD_TYPE_COLLECTION,o),d(e+"/annotations",t.annotations||[],n.annotations||[],a,l.MOD_TYPE_ANNOTATION,o)}t.getAliasedPath=c,t.collectAnnotationModifications=f},33461:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addCommentsCds=t.getPathsInTarget=t.getTextEditsToDeleteAnnotations=t.isAvailable=void 0;const a=n(32217),o=n(41810),r=n(74448),i=n(19311);var s;t.isAvailable=(e,t,n,a)=>!!t.filter((t=>{let o=(0,r.toAbsoluteUri)(e,n);return"win32"===process.platform&&(o=o.charAt(0).toUpperCase()+o.slice(1)),!(!t.uri||t.uri!==o)&&!(t.name&&a&&!a.startsWith(t.name))})).length,function(e){e.UNDEFINED="Undefined",e.TERM_NAME="TermName",e.TERM_FQ_NAME="TermFqName",e.ANNOTATION="Annotation",e.TARGET_ELEMENT="TargetElement",e.TARGET_ELEMENTS_LIST="TargetElementsList",e.TARGET_PARAMETER="TargetParameter",e.TARGET_BOUND_ACTION="TargetBoundAction",e.TARGET_ARTIFACT="TargetArtifact",e.TARGET_FROM_WITH="TargetFromWith"}(s||(s={}));const l=["ABSTRACT","ACTION","ANNOTATE","ANNOTATION","ASPECT","CONTEXT","DEFINE","ENTITY","EVENT","EXTEND","FUNCTION","SERVICE","TYPE","USING","VIEW"],p={Undefined:"",TermName:",",TermFqName:",",Annotation:"",TargetElement:";",TargetElementsList:"",TargetBoundAction:";",TargetParameter:",",TargetArtifact:";",TargetFromWith:""},c=(e,t)=>{const n=e.findIndex((e=>e.line===t.start.line+1&&e.column===t.start.character));let a=-1;return n>-1&&(a=e.slice(n).findIndex((e=>e.line>t.end.line+1||e.line===t.end.line+1&&e.column>=t.end.character)),a=n+a-1),{start:n,end:a}},u=e=>e?{line:e.line-1,character:e.column}:null,m=(e,t)=>{const n=e[t.start],a=e[t.end+1];return{start:u(n),end:u(a)}},d=e=>e?.text?.startsWith("//")||e?.text?.startsWith("/*"),y=e=>{switch(e){case"Element":return"TargetElement";case"BoundAction":return"TargetBoundAction";case"Param":return"TargetParameter";default:return"Undefined"}},g=(e,t,n)=>{function a(e,t,n=!1){let a=t+(n?1:-1);if(!e[a])return-1;for(;d(e[a]);)if(a+=n?1:-1,!e[a])return-1;return a}let o=t;for(let t=0;t<Math.abs(n)&&o>=0;t++)o=a(e,o,n>0);return o},f=(e,t,n)=>e[g(e,t,n)],h=(e,t)=>{let n=!1,a=-1,o=-1,r=t;for(;r&&e[r]&&-1===a&&!n;){const t=e[r];[";","@"].includes(t.text)?a=";"!==t.text&&o>0?o:r:l.includes((t.text||"").toUpperCase())?a=o>0?o:r:["(","{"].includes(t.text)&&(n=!0),o<0&&d(t)&&(o=r),o>0&&!d(t)&&(o=-1),r++}return a},T=(e,t)=>{const{beforeTokenIndex:n}=t,a=e[n];if(!a||!d(a))return!1;if(0===n)return!0;const o=f(e,n,-1);return!o||o.line<a.line},P=(e,t)=>{e.tokenRange.start=t.beforeTokenIndex},E=(e,t,n)=>{const{afterTokenIndex:a}=n,o=t[a];if(!d(o))return!1;if(o.line>t[e.tokenRange.end].line)return!1;const r=f(t,a,1);return!r||r.line>o.line},v=(e,t)=>{e.tokenRange.end=t.afterTokenIndex},b=(e,t,n,a)=>{const{separator:o}=n,r=g(t,e.tokenRange.start,-1),i=g(t,e.tokenRange.end,1),s=a?"{":"(",l=a?"}":")";return!!(a?["TermName","TargetElement","TargetBoundAction"]:["TermFqName","TargetParameter"]).includes(e.kind)&&(t[r].text===s&&(t[i].text===l||t[i].text===o&&f(t,i,1)?.text===l))},_=(e,t,n,a)=>{const{vocabularyAliases:o}=n,r=g(t,e.tokenRange.start,-1),i=g(t,e.tokenRange.end,1),s=a?"}":")";e.tokenRange={start:r,end:t[i].text===s?i:g(t,i,1)},a&&"TermName"===e.kind&&":"===f(t,r,-1)?.text&&o.has(f(t,r,-2)?.text)?(e.tokenRange.start=g(t,r,-2),e.kind="TermFqName"):a&&"TargetElement"===e.kind&&(e.kind="TargetElementsList")},A=(e,t,n,a)=>{if(!n.includeTarget)return!1;if(((e,t)=>{let n=!1,a=!1,o=!1,r=t;for(;r&&!n&&!a&&!o;){r--;const t=e[r];"ANNOTATE"===t.text.toUpperCase()?n=!0:["ACTION","FUNCTION"].includes(t.text.toUpperCase())?a=!0:";"===t.text&&(o=!0)}return!!a||!n})(t,e.tokenRange.start))return!1;if("boundParameter"===e.printPattern){if(!["Annotation","TargetParameter"].includes(e.kind))return!1}else if("Annotation"!==e.kind)return!1;let o,r,i=a?n.afterTokenIndex:n.beforeTokenIndex;for(;d(t[i]);)i+=a?1:-1;if(a?(o=e.tokenRange.start,r=i):(o=i,r=e.tokenRange.end),["element"].includes(e.printPattern)&&(!["{",";"].includes(f(t,o,-1).text)||!["}",";"].includes(f(t,r,1).text)))return!1;switch(t[i]?.isIdentifier){case"Element":return"element"===e.printPattern;case"Param":return["parameter","boundParameter"].includes(e.printPattern);case"BoundAction":return!("TargetParameter"===e.kind&&!["{",";"].includes(f(t,i,-1)?.text))&&["boundAction","boundParameter"].includes(e.printPattern);default:return!1}},C=(e,t,n,a)=>{let o=!0;const r=a?n.afterTokenIndex+1:n.afterTokenIndex;return"boundAction"===e.printPattern&&((e,t)=>{let n=!1,a=!1,o=t;for(;o&&e[o]&&!a&&!n;){const t=e[o];"}"===t.text?a=!0:"("===t.text&&(n=!0),o++}return n})(t,r)?o=!1:a?(e.tokenRange.end=g(t,e.tokenRange.end,1),e.kind=y(t[e.tokenRange.end]?.isIdentifier)):(e.tokenRange.start=g(t,e.tokenRange.start,-1),e.kind=y(t[e.tokenRange.start]?.isIdentifier)),o},N=(e,t,n,a,o)=>{if(!n.includeTarget)return!1;if("Annotation"===e.kind){if("artifact"!==e.printPattern)return!1}else if("TargetElementsList"===e.kind){if("element"!==e.printPattern)return!1}else if("TargetParameter"===e.kind){if("parameter"!==e.printPattern)return!1}else{if("TargetBoundAction"!==e.kind)return!1;if(!["boundAction","boundParameter"].includes(e.printPattern))return!1}if(h(t,n.afterTokenIndex)<0)return!1;let r=n.beforeTokenIndex;for(;d(t[r]);)--r;return a?o?"ACTIONS"===t[r].text.toUpperCase():"ACTIONS"===t[r].text.toUpperCase()&&"WITH"===f(t,r,-1)?.text.toUpperCase()&&"Annotate"===f(t,r,-2)?.isIdentifier:"WITH"===t[r].text.toUpperCase()&&"Annotate"===f(t,r,-1)?.isIdentifier},I=(e,t,n,a,r,i)=>{let s=a.beforeTokenIndex;for(;d(t[s]);)--s;let l=s;i||(l=g(t,l,r?-3:-2));let p=!1;if(!i){let e=!1;for(;!e;)"ANNOTATE"===t[l].text.toUpperCase()?e=!0:"."===t[l].text||"Annotate"===t[l]?.isIdentifier||d(t[l])?l--:(l=-1,e=!0)}const c=h(t,e.tokenRange.end);if(l>-1&&c>-1){e.tokenRange.end=c-1;const a=u(t[l]);i?(e.tokenRange.start=l,e.kind="TargetFromWith"):((e,t)=>{let n,a;return t.targets.forEach((t=>{t.terms.forEach((r=>{const i=r.attributes?.Term?.valueRange?.end;i&&(0,o.isBefore)(i,e)&&(a&&!(0,o.isBefore)(a,i)||(a=i,n=t))}))})),n?.nameRange?.end&&(0,o.isBefore)(e,n?.nameRange?.end)})(a,n)?(e.tokenRange.start=r?g(t,s,-1):s,e.kind="TargetFromWith"):(e.tokenRange.start=l,e.kind="TargetArtifact"),p=!0}return p},S=(e,t,n,a,o)=>{n.filter((e=>!e.isExpanded)).forEach((n=>{let r;do{r=!0;const i={separator:p[n.kind],beforeTokenIndex:n.tokenRange.start-1,afterTokenIndex:n.tokenRange.end+1,vocabularyAliases:e,includeTarget:a};T(t,i)?P(n,i):E(n,t,i)?v(n,i):b(n,t,i,!0)?_(n,t,i,!0):b(n,t,i)?_(n,t,i):"TermFqName"===n.kind&&"@"===t[i.beforeTokenIndex].text?(n.tokenRange.start=i.beforeTokenIndex,n.kind="Annotation"):r=A(n,t,i)?C(n,t,i):A(n,t,i,!0)?C(n,t,i,!0):N(n,t,i)?I(n,t,o,i):N(n,t,i,!0)?I(n,t,o,i,!0):!!N(n,t,i,!0,!0)&&I(n,t,o,i,!0,!0)}while(r);n.isExpanded=!0}))},x=(e,t)=>{let n=!1;for(let a=0;a<t.length;a++){const o=t[a];let r;do{r=!1;const i=a+1<t.length?t[a+1]:null;if(i&&o.termRange.end+1===i.termRange.start){const s=[];let l=o.tokenRange.end;do{l=g(e,l,1),l>0&&l<i.tokenRange.start&&s.push(l)}while(l>0&&l<i.tokenRange.start);(0===s.length||1===s.length&&e[s[0]].text===p[o.kind])&&(r=!0),r&&(o.termRange.end=i.termRange.end,o.tokenRange.end=i.tokenRange.end,o.isExpanded=!1,t.splice(a+1,1),n=!0)}}while(r)}return n};t.getTextEditsToDeleteAnnotations=(e,t,n,o,s,l)=>{const u=new a.VocabularyService(!0),d=new Set;u.getVocabularies().forEach((e=>d.add(e.defaultAlias)));const y=(0,r.toAbsoluteUri)(e,t),f=l.getTokensForUri(y),h=[];s.forEach((e=>{const t=n.terms[e],a=t.attributes.Term?.value||"",o=u.cdsVocabulary.reverseNameMap.get(a)||"",r=c(f,t.range),s=((e,t,n,a)=>{let o;for(let r=n.start;r<n.end&&!o;r++)o=a&&t[r].text===a||e.has(t[r].text)&&"."===t[r+1].text?"TermFqName":/^[a-zA-Z0-9_]+$/.test(t[r].text)?"TermName":"Undefined";return o})(d,f,r,o);h.push({kind:s,printPattern:(0,i.resolveTarget)(n.name).printPattern,termRange:{start:e,end:e},tokenRange:r,isExpanded:!1})}));const T=s.length===n.terms.length;let P;do{S(d,f,h,T,o),P=x(f,h)}while(P);const E=[];return h.forEach((e=>{e=((e,t)=>{const n=p[t.kind];if(!n)return t;const a=t.tokenRange.end,o=g(e,a,1),r=e[o];let i=!1;if(r&&r.text===n){t.tokenRange.end=o,i=!0;const n=e[t.tokenRange.end+1];n&&n.text.startsWith("//")&&e[t.tokenRange.end].line===n.line&&++t.tokenRange.end}if(!i){const a=t.tokenRange.start,o=g(e,a,-1);e[o].text===n&&"TargetArtifact"!==t.kind&&(t.tokenRange.start=o)}return t})(f,e);const t=m(f,e.tokenRange);E.push({range:t,newText:""})})),E};const O=(e,t,n)=>{const a=[];return Object.keys(e.attributes||{}).forEach((o=>{if(o.indexOf("Path")>=0){let r=e.attributes[o].value;r.startsWith("/")||(r=t+"/"+r),a.push({path:r,posPointer:n+"/attributes/"+o+"/value"})}})),(e.content||[]).forEach(((o,r)=>{if("text"===o.type&&e.name.indexOf("Path")>=0){let e=o.text;e.startsWith("/")||(e=t+"/"+e),a.push({path:e,posPointer:n+"/content/"+r+"/text"})}else"element"===o.type&&a.push(...O(o,t,n+"/content/"+r))})),a};t.getPathsInTarget=(e,t,n,a)=>{const r=[];r.push({path:e.name,posPointer:""});const i=(0,o.getPathBaseMetadataElement)(t,e.name,n)?.path||e.name;return e.terms.forEach(((t,s)=>{const l=(0,o.getElementAttributeValue)(t,"Term"),p=(0,o.resolveName)(l,n.aliasMapVocabulary)?.qName,c=(0,o.getElementAttributeValue)(t,"Qualifier"),u=p+(c?"#"+c:"");a.has(u)||r.push({path:e.name+"/@"+l+(c?"#"+c:""),posPointer:"/terms/"+s+"/attributes/Term/value",forOverriding:!0}),r.push(...O(t,i,"/terms/"+s))})),r},t.addCommentsCds=function(e,t){const n=e.length-1,a=t?c(e,t):{start:n,end:n};let o,r=!1;do{o=!0;const t={beforeTokenIndex:a.start-1,afterTokenIndex:a.end+1};T(e,t)?(a.start=t.beforeTokenIndex,r=!0):E({tokenRange:a},e,t)?(a.end=t.afterTokenIndex,r=!0):o=!1}while(o);return r?m(e,a):t}},29208:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertMetaDataToAvtSchema=void 0,t.convertMetaDataToAvtSchema=function(e){const t=e.getRootMetadataElements(),n=[],a=[],o=[];let r;const i=[];t.forEach(((t,s)=>{const l=e.getEdmTargetKinds(t.path);if(l.includes("EntityContainer")&&(r={_type:"EntityContainer",name:t.name,fullyQualifiedName:s},t.content.forEach((t=>{const n=e.getEdmTargetKinds(t.path);if(n.includes("EntitySet")){const e={_type:"EntitySet",name:t.name,entityTypeName:t.structuredType,navigationPropertyBinding:{},fullyQualifiedName:t.path};o.push(e)}if("2.0"===e.ODataVersion&&n.includes("FunctionImport")){const n={_type:"Action",name:t.name,fullyQualifiedName:t.path,parameters:[],isBound:!1,sourceType:null,returnType:null,isFunction:!1};t.content.forEach((t=>{if(t){const a=e.getEdmTargetKinds(t.path);if(a.includes("Parameter")){"_it"===t.name&&(n.sourceType=t.structuredType);const e={_type:"ActionParameter",isEntitySet:!1,fullyQualifiedName:t.path,type:t.structuredType||t.edmPrimitiveType};n.parameters.push(e)}else a.includes("ReturnType")&&(n.returnType=t.structuredType||t.edmPrimitiveType)}})),i.push(n)}}))),l.includes("EntityType")){const a=[],o=[],r=[];t.content.forEach((n=>{const i=e.getEdmTargetKinds(n.path);if(i.includes("Property")){const e={_type:"Property",name:n.name,type:n.edmPrimitiveType||n.structuredType,fullyQualifiedName:n.path};a.push(e),t.keys&&t.keys.includes(n.name)&&r.push(e)}if(i.includes("NavigationProperty")){const e={_type:"NavigationProperty",name:n.name,fullyQualifiedName:n.path,targetTypeName:n.structuredType,isCollection:!1,containsTarget:!1,partner:void 0,referentialConstraint:[]};o.push(e)}}));const i={_type:"EntityType",name:t.name,fullyQualifiedName:s,entityProperties:a,keys:r,navigationProperties:o,actions:{}};n.push(i)}if(l.includes("ComplexType")){const n=[],o=[];t.content.forEach((t=>{const a=e.getEdmTargetKinds(t.path);if(a.includes("Property")){const e={_type:"Property",name:t.name,type:t.edmPrimitiveType||t.structuredType,fullyQualifiedName:t.path};n.push(e)}if(a.includes("NavigationProperty")){const e={_type:"NavigationProperty",name:t.name,fullyQualifiedName:t.path,targetTypeName:t.structuredType,isCollection:!1,containsTarget:!1,partner:void 0,referentialConstraint:[]};o.push(e)}}));const r={_type:"ComplexType",name:t.name,fullyQualifiedName:s,properties:n,navigationProperties:o};a.push(r)}if(l.includes("EntitySet")){const e={_type:"EntitySet",name:t.name,entityTypeName:t.structuredType||(l.includes("EntityType")?t.name:""),navigationPropertyBinding:{},fullyQualifiedName:t.path};o.push(e)}if(l.includes("Action")||l.includes("Function")){const n={_type:"Action",name:t.name,fullyQualifiedName:t.path,parameters:[],isBound:null,sourceType:null,returnType:null,isFunction:!1};t.content.forEach((t=>{const a=e.getEdmTargetKinds(t.path);if(a.includes("Parameter")){const e={_type:"ActionParameter",isEntitySet:!1,fullyQualifiedName:t.path,type:t.structuredType||t.edmPrimitiveType};n.parameters.push(e)}else a.includes("ReturnType")&&(n.returnType=t.structuredType||t.edmPrimitiveType)})),i.push(n)}}));const s=e.getNamespaces()[0];if(r){const e="dummyEntityContainer";r={_type:"EntityContainer",name:e,fullyQualifiedName:s?s+"."+e:e}}return{namespace:s,annotations:{},entitySets:o,complexTypes:a,entityContainer:r,actions:i,entityTypes:n,associations:[],singletons:[],associationSets:[],typeDefinitions:[],actionImports:[]}}},82392:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.saveFiles=t.readFileData=t.readProjectFileData=t.readFilesForSelectors=void 0;const o=a(n(36279)),r=n(71017),i=a(n(68405)),s=n(63940),l=a(n(37865)),p=a(n(26692)),c=n(73837);async function u(e){const[t,n]=await Promise.all([o.default.workspace.fs.readFile(e),o.default.workspace.fs.stat(e)]);return{uri:e,contents:Buffer.from(t).toString("utf-8"),stat:n}}t.readFilesForSelectors=async function(e,t){const n=[];(t||[]).forEach((t=>{n.push(async function(e,t){let n=[];try{let a,s;if("string"==typeof t?a=new o.default.RelativePattern(e,t):t&&(a=new o.default.RelativePattern(e,t.pattern),t.excludePattern&&(s=new o.default.RelativePattern(e,t.excludePattern))),a){const c=await o.default.workspace.findFiles(a,s);if(Array.isArray(c)&&0===c.length&&"string"==typeof t){(await(0,l.default)([(0,p.default)((0,r.join)(e,t))],{})).forEach((e=>{c.push(i.default.file(e))}))}const u=(c||[]).map((async t=>{const n=await o.default.workspace.fs.readFile(t),a=Buffer.from(n).toString("utf8");return{fileUri:(0,r.relative)(e,t.fsPath),fileContent:a}}));n=await Promise.all(u)}}catch(e){s.logger.log("error","File access: error reading files by selector - "+e)}return n}(e.root,t))}));const a=await Promise.all(n),c=[];return a.forEach((e=>c.push(...e))),c},t.readProjectFileData=async function(e,t){try{const n=(0,r.join)(e.root,t),a=i.default.file(n),s=await u(a);return s.stat.type===o.default.FileType.File?{stat:s.stat,contents:s.contents,uri:a}:null}catch(e){return null}},t.readFileData=u,t.saveFiles=async function(e,t){let n=!0;const a=[],s=[...t.keys()];try{for(let n=0;n<s.length;n++){const a=s[n],l=t.get(a),p=i.default.parse(i.default.file((0,r.join)(e,a)).toString());await o.default.workspace.fs.writeFile(p,(new c.TextEncoder).encode(l))}}catch(e){n=!1,a.push(e.toString())}return{done:n,messages:a}}},64206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertTargetAnnotationsToInternal=t.convertAnnotationToInternal=t.convertRecordToInternal=t.convertApplyToInternal=t.convertPropertyValueToInternal=t.convertCollectionToInternal=t.convertExpressionToInternal=t.convertPrimitiveValueToInternal=t.convertTargetsFromInternal=t.convertMessages=t.resolveEnumMemberValue=t.resolvePath=t.buildEmptyTarget=t.buildEmptyElement=t.buildAttribute=void 0;const a=n(41810),o=n(53308),r=n(24825),i=n(91400),s=n(92719),l=n(55351),p=n(42394);function c(e,t){return{type:a.ATTRIBUTE_TYPE,name:e,value:t,range:void 0,nameRange:void 0,valueRange:void 0}}function u(e,t,n){const o={type:a.ELEMENT_TYPE,name:e,range:void 0,nameRange:void 0,attributes:{},content:[]};return t&&(o.content=[]),n&&(o.attributes={}),o}function m(e){return{type:"target",name:e,terms:[],range:void 0,nameRange:void 0,termsRange:void 0}}function d(e,t){return e.split("/").map((e=>(0,a.getSegmentWithoutAlias)(t,e))).join("/")}function y(e,t){return e.split(" ").map((e=>d(e,t))).join(" ")}function g(e,t,n){return((0,l.mergeEmbeddedAnnotations)(e,n).content||[]).filter((e=>e.type===a.ELEMENT_TYPE&&"Annotation"===e.name)).map((a=>T(a,t,n,!0,e)))}function f(e,t,n){let o,r,i,s;switch(e.name){case"Record":o=function(e,t,n){const o=[],r=(0,a.getElementAttributeValue)(e,"Type");let i,s=e;r&&(i=(0,a.resolveName)(r,t.aliasMap).qName);n.mergeRecords&&(s=(0,l.getMergedRecord)(e,i,n),i||(i=(0,a.getElementAttributeValue)(s,"Type")));const p=(s.content||[]).filter((e=>e.type===a.ELEMENT_TYPE&&"PropertyValue"===e.name)).map((e=>{n.addOrigins&&o.push(e.range);const r=(0,a.getElementAttributeValue)(e,"Property"),i=[...n.structureProperty.propertyPathSegments,r],s={name:r,value:h(e,t,{...n,structureProperty:{...n.structureProperty,propertyPathSegments:i}},!0)},l=g(e,t,{...n,structureProperty:{...n.structureProperty,propertyPathSegments:i}});return l&&l.length&&(s.annotations=l),"Unknown"===s.value.type&&1===Object.keys(s.value).length&&(s.value={type:"Bool",Bool:!0}),s})),c={propertyValues:p};n.addOrigins&&(c.propertyValuesOrigins=o);i&&(c.type=i);const u=g(e,t,n);u&&u.length&&(c.annotations=u);return c}(e,t,n);break;case"Collection":({collection:o,origins:r}=function(e,t,n){const o=[],r=(e.content||[]).filter((e=>e.type===a.ELEMENT_TYPE)).map((e=>{n.addOrigins&&o.push(e.range);const a=h(e,t,{...n,mergeRecords:!1});let r=a;return a&&a.type&&("Record"===a.type?r=a.Record:"String"===a.type&&(r=a.String)),r}));return{collection:r,origins:o}}(e,t,n));break;case"Apply":o=function(e,t){return I(JSON.parse(JSON.stringify(e)),t)}(e,t);break;default:i=(0,a.getSingleTextNode)(e),s=i?.multilineType,o=i?i.text:"",o&&"EnumMember"===e.name?o=y(o,t):o&&e.name.indexOf("Path")>=0&&(o=d(o,t))}return{value:o,origins:r,multilineType:s}}function h(e,t,n,o){const{name:i,value:s,origins:l,multilineType:p}=function(e,t,n,o){let i,s,l,p="";if(!e&&r.expressionNames[t.name])return p=t.name,({value:i,origins:s,multilineType:l}=f(t,n,o)),{name:p,value:i,origins:s,multilineType:l};if(p=Object.keys(t.attributes).find((e=>r.expressionNames[e]&&(0,a.getElementAttribute)(t,e))),p)return i=(0,a.getElementAttribute)(t,p).value,i&&"EnumMember"===p?i=y(i,n):i&&p.indexOf("Path")>=0&&(i=d(i,n)),{name:p,value:i,origins:s,multilineType:l};return(t.content??[]).filter((e=>e.type===a.ELEMENT_TYPE)).forEach((e=>{e.type===a.ELEMENT_TYPE&&!p&&r.expressionNames[e.name]&&(p=e.name,({value:i,origins:s,multilineType:l}=f(e,n,o)))})),{name:p,value:i,origins:s,multilineType:l}}(o,e,t,n),c={type:i||"Unknown"};return i&&"Null"!==i?(c[i]=s&&"string"==typeof s?function(e,t){let n;switch(t){case"boolean":return void 0!==e&&"TRUE"===e.toUpperCase();case"number":return n=parseFloat(e),Number.isInteger(n)?parseInt(e,10):n;default:return e}}(s,r.expressionNames[i]):s,"Collection"===i&&n.addOrigins&&l&&(c.collectionOrigins=l),"String"===i&&p&&(c.multilineType=p),c):c}function T(e,t,n,r,i){const s=(0,a.resolveName)((0,a.getElementAttributeValue)(e,"Term"),t.aliasMapVocabulary);let l=s.qName;s.namespace===n.cdsVocabulary.namespace&&n.cdsVocabulary.reverseNameMap.has(n.cdsVocabulary.alias+"."+s.name)&&(l=n.cdsVocabulary.reverseNameMap.get(n.cdsVocabulary.alias+"."+s.name));const p=(0,a.getElementAttributeValue)(e,"Qualifier");let c;c=r?{...n.structureProperty,propertyPathSegments:[...n.structureProperty.propertyPathSegments,`${"Record"===i.name?"":"$Element"}@${l+(p?"#"+p:"")}`]}:{targetPath:n.structureProperty.targetPath,term:l,qualifier:p,propertyPathSegments:[]};const u={...n,structureProperty:c},m={term:l,value:h(e,t,u,!0)};n.addOrigins&&(m.origin=e.range);const d=g(e,t,u);return d&&d.length&&(m.annotations=d),p&&(m.qualifier=p),"Record"===m.value.type?(m.record=m.value.Record,delete m.value):"Collection"===m.value.type?(m.collection=m.value.Collection,n.addOrigins&&(m.collectionOrigins=m.value.collectionOrigins),delete m.value):"Unknown"===m.value.type&&1===Object.keys(m.value).length&&function(e,t,n,a){if(a.mergeRecords&&e.annotations?.length){const r=(0,o.getSplitStructurePropertyValue)(a.genericAnnotationService.context,t);r&&"string"!=typeof r?(e.value=h(r,n,a,!0),a.addOrigins&&(e.origin=r.range)):delete e.value}else delete e.value}(m,c,t,u),m}function P(e,t,n){let a=String(t);return a&&"EnumMember"===e?a=N(a,n):a&&e.indexOf("Path")>=0&&(a=(0,p.getAliasedPath)(a,n)),a}function E(e,t,n){const o=r.expressionNames[e.type]?e.type:"";let i=n||(o?u(o):null);if(i){let r,s,l,p;switch(e.type){case"Collection":r=v(e.Collection,t),n?(i.content=i.content||[],i.content.push(r)):i=r;break;case"Record":s=A(e.Record,t),n?(i.content=i.content||[],i.content.push(s)):i=s;break;case"Apply":s=_(e.Apply,t),n?(i.content=i.content||[],i.content.push(s)):i=s;break;case"Null":l=u(o),n?(i.content=i.content||[],i.content.push(l)):i=l;break;default:p=P(e.type,e[e.type],t),n?(i.attributes=i.attributes||{},i.attributes[e.type]=c(e.type,p)):(i.content=i.content||[],i.content.push({type:a.TEXT_TYPE,text:p,range:null}))}}return i}function v(e,t){const n=u("Collection",!0);return e.forEach((e=>{let o;"object"==typeof e?o=e.type&&r.expressionNames[e.type]?E(e,t):A(e,t):"string"==typeof e?(o=u("String",!0),o.content.push({type:a.TEXT_TYPE,text:String(e),range:null})):"boolean"==typeof e&&(o=u("Bool",!0),o.content.push({type:a.TEXT_TYPE,text:e?"true":"false",range:null})),o&&n.content.push(o)})),n}function b(e,t){const n=u("PropertyValue",!1,!0);return n.attributes.Property=c("Property",e.name),E(e.value,t,n),e.annotations&&e.annotations.length&&(n.content=n.content||[],e.annotations.forEach((e=>{n.content.push(C(e,t))}))),n}function _(e,t){return I(JSON.parse(JSON.stringify(e)),t,!0)}function A(e,t){const n=u("Record",!0,!!e.type);return e.type&&(n.attributes.Type=c("Type",(0,a.toAliasQualifiedName)(e.type,t))),e.propertyValues.forEach((e=>{const a=b(e,t);n.content.push(a)})),e.annotations&&e.annotations.length&&(n.content=n.content||[],e.annotations.forEach((e=>{n.content.push(C(e,t))}))),n}function C(e,t){const n=u("Annotation",!1,!0);return n.attributes.Term=c("Term",(0,a.toAliasQualifiedName)(e.term,t)),e.qualifier&&(n.attributes.Qualifier=c("Qualifier",e.qualifier)),e.collection?(n.content=n.content||[],n.content.push(v(e.collection,t))):e.record?(n.content=n.content||[],n.content.push(A(e.record,t))):e.value&&E(e.value,t,n),e.annotations&&e.annotations.length&&e.annotations.forEach((e=>{n.content=n.content||[],n.content.push(C(e,t))})),n}function N(e,t){return e.split(" ").map((e=>(0,a.toAliasQualifiedName)(e,t))).join(" ")}function I(e,t,n){const o=e;Object.keys(o.attributes||{}).forEach((e=>{const r=o.attributes[e];"Term"===e||"Type"===e?r.value=n?(0,a.toAliasQualifiedName)(r.value,t):(0,a.resolveName)(r.value,t.aliasMap)?.qName:"EnumMember"===e?r.value=n?N(r.value,t):y(r.value,t):e.endsWith("Path")&&(r.value=n?(0,p.getAliasedPath)(r.value,t):d(r.value,t))})),(o.content||[]).some((e=>e.type===a.ELEMENT_TYPE))&&(o.content=o.content.filter((e=>!(e.type===a.TEXT_TYPE&&!(e.text||"").trim()))));for(const e of o.content)if(e.type===a.ELEMENT_TYPE)I(e,t,n);else if(e.type===a.TEXT_TYPE){const r=e.text;"EnumMember"===o.name?e.text=n?N(r,t):y(r,t):e.type===a.TEXT_TYPE&&o.name.endsWith("Path")&&(e.text=n?(0,p.getAliasedPath)(r,t):d(r,t))}return o}t.buildAttribute=c,t.buildEmptyElement=u,t.buildEmptyTarget=m,t.resolvePath=d,t.resolveEnumMemberValue=y,t.convertMessages=function(e,t,n){const r=[],l=[],p={},c=(0,a.getAllNamespacesAndReferences)(e?.namespace,e.references),u=(0,a.getAliasInformation)(c,t.metadata.getNamespaces());return n.forEach((n=>{let r=null,c=!1;if(n.range){const i=n.range.start.line;let l=n.range.start.character;i===n.range.end.line&&l===n.range.end.character||l++;const p=(0,a.findPathToPosition)(e,{line:i,character:l}),c=p?(0,a.getPositionData)(e,p.path):void 0;r=c?(0,o.resolvePathToCursorContext)(t,e,u,c.path,s.uxLogger):void 0}if(r&&r.targetPath&&(r.targetPath=d(r.targetPath,u)),r&&r.annotation){const e=(0,i.convertPathInAnnotationFromInternal)(r.annotation,r.path),t=(0,a.getElementAttributeValue)(r.annotation,"Term"),o={term:(0,a.resolveName)(t,u.aliasMapVocabulary).qName,qualifier:(0,a.getElementAttributeValue)(r.annotation,"Qualifier")},s=o.term+(o.qualifier?"#"+o.qualifier:"");c=!0,p[r.targetPath]=p[r.targetPath]||{},p[r.targetPath][s]=p[r.targetPath][s]||[],p[r.targetPath][s].push({text:n.message,severity:n.severity,range:n.range,origin:e,rule:n.rule??"unknown"})}c||l.push({text:n.message,severity:n.severity,range:n.range,origin:null,rule:n.rule??"unknown"})})),l.length&&r.push({target:"",annotationKey:null,messages:l}),Object.keys(p).forEach((e=>{Object.keys(p[e]).forEach((t=>{const[n,a]=t.split("#"),o={term:n,qualifier:a};r.push({target:e,annotationKey:o,messages:p[e][t]})}))})),r},t.convertTargetsFromInternal=function(e,t,n,a,o,r){const i=[];return(e||[]).forEach((e=>{const s=[],l=[],p=d(e.name,t),c={fileUri:n,genericAnnotationService:a,mergeRecords:o&&!!a.context.supportSplit,addOrigins:r,structureProperty:{targetPath:p,propertyPathSegments:[],term:null},reversedFileSequence:[...a.annotationFileSequence].reverse(),cdsVocabulary:a.context.vocabularies.cdsVocabulary};e.terms.forEach((e=>{s.push(T(e,t,c,!1,null)),l.push(e.range)}));const u={target:d(e.name,t),annotations:s,origins:l};i.push(u)})),i},t.convertPrimitiveValueToInternal=P,t.convertExpressionToInternal=E,t.convertCollectionToInternal=v,t.convertPropertyValueToInternal=b,t.convertApplyToInternal=_,t.convertRecordToInternal=A,t.convertAnnotationToInternal=C,t.convertTargetAnnotationsToInternal=function(e,t){const n=m((0,p.getAliasedPath)(e.target,t));return e.annotations.forEach((e=>{n.terms.push(C(e,t))})),n}},83237:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pathFromUri=t.toUnifiedUri=t.addComments=t.convertModificationsToTextEdits=t.findAnnotationElement=t.getKey=void 0;const a=n(41810),o=n(53308),r=n(24825),i=n(72307),s=n(34799),l=n(64206),p=n(91400),c=n(98879),u=n(23635),m=n(57310);function d(e,t,n,o,r,i,s,p,c){let u;const m=p&&isNaN(parseFloat(p))?void 0:parseInt(p,10);if(i.isSplitSupported()||"Record"===t.type||"Collection"===t.type||"Collection"===n.name){let a;a="Collection"===t.type?(0,l.convertCollectionToInternal)(t.Collection,r):"Record"===t.type?(0,l.convertRecordToInternal)(t.Record,r):(0,l.convertExpressionToInternal)(t,r);const p=y(i,n,o,s,"Collection"===n.name?null:t.type,m);return"Annotation"===n.name&&!n.contentRange&&n.range&&i.isSplitSupported()?{range:p,newText:": "+i.serializeElementInParent(a,n,m,e)}:{range:p,newText:i.serializeElementInParent(a,n,m,e)}}{const o=String((0,l.convertPrimitiveValueToInternal)(t.type,t[t.type],r)),s=(0,l.buildAttribute)(t.type,o);return u=function(e,t,n){let o=t.nameRange.end;for(const r of Object.keys(t?.attributes||{})){if(t.attributes[r]?.valueRange?.end){const n=t.attributes[r]?.valueRange?.end.character,a=t.attributes[r]?.valueRange?.end.line;o={character:'"'===e.split("\n")[a].charAt(n)?n+1:n,line:a}}const i=n?.findIndex((e=>""===e.newText&&(0,a.rangeContained)(e.range,t.attributes[r].nameRange)));i>=0&&(o=t.attributes[r]?.nameRange?.start);break}return o}(e,n,c),{range:{start:u,end:u},newText:" "+i.serializeAttribute(s)}}}function y(e,t,n,o,r,i){let s=-1,l=null,p=null;(t.content||[]).forEach(((e,t,n)=>{"Annotation"===r&&0===i&&e.type===a.ELEMENT_TYPE&&(p=e.range),e.type!==a.ELEMENT_TYPE||r&&e.name!==r||(s++,i>0&&s<i?p=e.range:0!==i||p||l||(l=e.range))}));let c=p?o(p).end:l?o(l).start:null;return!c&&t.contentRange&&(c=t.contentRange.end),"Annotation"===t.name&&!t.contentRange&&t.range&&e.isSplitSupported()?c={line:t.range.end.line,character:t.range.end.character}:c||t.contentRange||!t.range||(c={line:t.range.end.line,character:t.range.end.character-1},n.set(t.range.end.line+";"+(t.range.end.character-2),t)),c?{start:c,end:c}:null}function g(e,t,n,r,i,p,u,m){const g=[],f=isNaN(parseFloat(r))?-1:parseInt(r,10);let h,P,E,v,b,_,A,C,N,I,S,x;switch(i.type){case s.MOD_TYPE_PRIMITIVE:if(h=i,f>-1){const o=(0,l.buildEmptyElement)("String",!0);o.content.push({type:a.TEXT_TYPE,text:String(h.value)}),g.push({range:y(u,t,n,m,"String",f),newText:u.serializeElementInParent(o,t,f,e)});break}if(u.isSplitSupported())throw new c.ApiError("Create Attribute in CDS",c.ApiErrorCode.General);r&&r.length&&(r=r.substring(0,1).toUpperCase()+r.substring(1)),A=(0,l.buildAttribute)(r,String(h.value)),N=t.nameRange.end,g.push({range:{start:N,end:N},newText:" "+u.serializeAttribute(A)});break;case s.MOD_TYPE_EXPRESSION:P=i,g.push(d(e,P.value,t,n,p,u,m,r,g));break;case s.MOD_TYPE_PROP_VALUE:v=i,C=(0,l.convertPropertyValueToInternal)(v.value,p),g.push({range:y(u,t,n,m,"PropertyValue",parseInt(r,10)),newText:u.serializeElementInParent(C,t,f,e)});break;case s.MOD_TYPE_RECORD:E=i,C=(0,l.convertRecordToInternal)(E.value,p),I=isNaN(parseFloat(r))?y(u,t,n,m):y(u,t,n,m,"Record",f),g.push({range:I,newText:u.serializeElementInParent(C,t,f,e)});break;case s.MOD_TYPE_COLLECTION:if(u.isSplitSupported())throw new c.ApiError("Create collection in CDS",c.ApiErrorCode.General);_=i,C=(0,l.convertCollectionToInternal)(_.value,p),g.push({range:y(u,t,n,m),newText:u.serializeElement(C,t.range.start.character)});break;case s.MOD_TYPE_ANNOTATION:if(b=i,C=(0,l.convertAnnotationToInternal)(b.value,p),({result:S,embeddedAnnotationsCount:x}=(0,o.hasValueAsSingleNonRecordChildElement)(t)),u.isSplitSupported()&&S&&0===x){const n=JSON.parse(JSON.stringify(t)),o=b?.newTarget;o&&function(e,t){e.content=(e.content||[]).filter((e=>e.type===a.TEXT_TYPE||"Annotation"===e.name)),e.content.push(T(t))}(n,o),n.content.push(C);let r=u.serializeElementInParent(n,t,f,e);r=" "+r.substring(r.indexOf("{"),r.lastIndexOf("}")+1),g.push({range:t.contentRange,newText:r})}else g.push({range:y(u,t,n,m,"Annotation",parseInt(r,10)),newText:u.serializeElementInParent(C,t,f,e)})}return g}function f(e,t){const n={element:t,path:e,parentElement:null,index:-1};let a=!1;for(;n.path.indexOf("['content']")>=0&&!a;){const e=(0,o.getPathTargetInElement)(n.path,n.element);e.isTextSubNode?a=!0:(n.parentElement=n.element,n.element=e.element,n.index=e.nodeIndex,n.path=e.remainingPathForElement)}return n}function h(e,t,n=-1){const o=e.split("\n");if(t.start.line===t.end.line)return o[t.start.line].substring(t.start.character,t.end.character);if(n>-1){const e=(0,a.getIndentLevel)(n,a.printOptions.tabWidth)+1,r=(0,a.indent)(a.printOptions.tabWidth,a.printOptions.useTabs,e);let i="\n"+r+o[t.start.line].substring(t.start.character);for(let e=t.start.line+1;e<t.end.line;e++)i+="\n"+o[e];return i+="\n"+o[t.end.line].substring(0,t.end.character)+"\n"+r,i}{let e=o[t.start.line].substring(t.start.character);for(let n=t.start.line+1;n<t.end.line;n++)e+="\n"+o[n];return e+="\n"+o[t.end.line].substring(0,t.end.character),e}}function T(e){return{type:a.ELEMENT_TYPE,name:e.type,nameRange:null,content:[{type:a.TEXT_TYPE,text:e[e.type]}],attributes:{}}}t.getKey=function(e){return e.term+(e.qualifier?"#"+e.qualifier:"")},t.findAnnotationElement=function(e,t,n,o){let r=null;return e.targets.forEach((e=>{const i=(0,l.resolvePath)(e.name,n);t.trim()===i&&e.terms.forEach((e=>{const t=(0,a.resolveName)((0,a.getElementAttributeValue)(e,"Term"),n.aliasMap);if(t&&t.qName===o.term){const t=(0,a.getElementAttributeValue)(e,"Qualifier");(t||o.qualifier)&&t!==o.qualifier||(r=e)}}))})),r},t.convertModificationsToTextEdits=function(e,t,n,i,c,m,P){const E=[];return m.isSplitSupported()&&c.length>1&&function(e,t){const n=(e.content||[]).filter((e=>e.type===a.ELEMENT_TYPE&&"Annotation"===e.name)).length,o=0===n?s.ChangeType.Insert:1===n?s.ChangeType.Delete:null;if(!o)return;const r=t.filter((e=>e.kind===o&&e.pointer.startsWith("/annotations/")&&3===e.pointer.split("/").length&&(!e.content||e.content?.type===s.MOD_TYPE_ANNOTATION)));for(const e of r){const n=t.findIndex((e=>e.kind===s.ChangeType.Update&&e.content?.type===s.MOD_TYPE_PRIMITIVE&&e.pointer.startsWith("/value/")&&3===e.pointer.split("/").length));if(n>-1){const a=t.splice(n,1)[0].content,o={type:a.expressionType};if(o[a.expressionType]=a.value,e.content)e.content.newTarget=o;else{const t={type:s.MOD_TYPE_ANNOTATION,value:null,newTarget:o};e.content=t}}}}(t,c),P||(P=e=>e),c.forEach((c=>{let v=c.pointer,b="";if(c.kind===s.ChangeType.Insert||c.kind===s.ChangeType.Move){const e=v.split("/");b=e.pop(),v=e.join("/")}let _=1;if(v.indexOf("-")>0){const[e,t]=v.split("/").pop().split("-").map((e=>Number(e)));_=t-e+1,v=v.split("-")[0]}const A=f((0,p.convertPathInAnnotationToInternal)(t,v),t),C=(0,o.getPathTargetInElement)(A.path,A.element);let N,I,S,x,O,D,R,M,V,U,F,w,L,j,k,Y,$,B="";switch(c.kind){case s.ChangeType.Move:if(F=1,U=c.moveFromPointer,U.indexOf("-")>0){w=U.split("/").pop().split("-").map((e=>Number(e))),F=w[1]-w[0]+1,U=U.split("-")[0];const e=U.split("/");e.pop(),e.push(String(w[1])),B=e.join("/")}if(I=(0,p.convertPathInAnnotationToInternal)(t,U),S=f(I,t),x=m.getRangeForDeletion(S.element,S.parentElement,S.index,F,P),j=S.element.range,F>1){const e=f((0,p.convertPathInAnnotationToInternal)(t,B),t);j={start:j.start,end:e.element.range.end}}R=h(e,P(j),m.isSplitSupported()?-1:A.element.range.start.character),E.push({newText:"",range:x}),D=c.content?.type===s.MOD_TYPE_PROP_VALUE?"PropertyValue":c.content?.type===s.MOD_TYPE_ANNOTATION?"Annotation":"",L=c.moveFromPointer.split("/"),V=parseInt(L.pop(),10),M=parseInt(b,10),O=y(m,A.element,n,P,D,M),R=function(e,t,n,o,r=-1){let i=o;if(e&&"Collection"===t.name){const e=(0,a.getIndentLevel)(r,a.printOptions.tabWidth)+1;i=function(e,t,n){let a;const o=t.split("\n");return 1===o.length&&""!==o[0].trim()&&(a=function(e,t,n){let a;return 0===n?a=t+"\n"+e:n>0&&(a="\n"+e+t),a}(e,t,n)),o.length>1&&(a=function(e,t){let n;return 0===e&&""===t[0].trim()&&(t.shift(),n=t.join("\n").trimStart()),e>0&&""===t[t.length-1].trim()&&(t.pop(),n=t.join("\n")),n}(n,o)),a}((0,a.indent)(a.printOptions.tabWidth,a.printOptions.useTabs,e),o,n)||o}return i}(!m.isSplitSupported(),A.element,M,R,A.element.range.start.character),E.push({newText:m.serializeElementInParent(A.element,A.parentElement,M,e,R),range:O});break;case s.ChangeType.Update:if(c.content.type===s.MOD_TYPE_PRIMITIVE){const e=c.content,t=(0,l.convertPrimitiveValueToInternal)(e.expressionType||"String",e.value,i);C.isAttributeValue?E.push({newText:t,range:C.attribute.valueRange}):C.isTextSubNode&&(m.isSplitSupported()&&e.expressionType===u.ExpressionType.EnumMember&&A.element.name===u.ExpressionType.EnumMember?E.push({newText:t,range:A.element.range}):E.push({newText:t,range:C.textNode.range}))}else if(c.content.type===s.MOD_TYPE_RECORD_TYPE&&C.isAttributeValue){const e=c.content.value,t=(0,a.toAliasQualifiedName)(e,i);E.push({newText:t,range:C.attribute.valueRange})}else if(c.content.type===s.MOD_TYPE_EXPRESSION&&A.element){const t=function(e){const t=[];return Object.keys(e.attributes||{}).forEach((n=>{if(r.expressionNames[n]){const a=e.attributes[n],o=a.range||{start:a.nameRange.start,end:{line:a.valueRange.end.line,character:a.valueRange.end.character+1}};t.push({range:o,newText:""})}})),(e.content||[]).filter((e=>e.type===a.ELEMENT_TYPE)).forEach((e=>{r.expressionNames[e.name]&&t.push({range:e.range,newText:""})})),t}(A.element);E.push(...t),N=c.content;const o=d(e,N.value,A.element,n,i,m,P,"",E),s=o?.range?.start;s&&(0,a.positionContained)(t[0]?.range,s)?t[0].newText=o.newText:E.push(o)}else if(c.content.type===s.MOD_TYPE_COLLECTION&&A.element){const t=c.content,n=(0,l.convertCollectionToInternal)(t.value,i),a=m.serializeElementInParent(n,A.parentElement,-1,e);E.push({newText:a,range:A.element.range})}break;case s.ChangeType.Delete:if(C.attribute){const e=(H=C.attribute).range?H.range:H.valueRange?{start:H.nameRange.start,end:{line:H.valueRange.end.line,character:H.valueRange.end.character+1}}:H.nameRange;E.push({newText:"",range:P(e)})}else if(C.textNode)E.push({newText:"",range:P(C.textNode.range)});else if(C.isElementSubNode){const e=m.getRangeForDeletion(C.element,A.element,C.nodeIndex,_,P);E.push({newText:"",range:e})}else if(A.element)if(({result:k,embeddedAnnotationsCount:Y,singleValueElement:$}=(0,o.hasValueAsSingleNonRecordChildElement)(A.parentElement)),m.isSplitSupported()&&k&&1===Y){const e=c.content?.newTarget;e&&($=T(e));const t=" "+m.serializeElement($);E.push({newText:t,range:A.parentElement.contentRange})}else{const e=m.getRangeForDeletion(A.element,A.parentElement,A.index,_,P);E.push({newText:"",range:e})}break;case s.ChangeType.Insert:A.element&&E.push(...g(e,A.element,n,b,c.content,i,m,P))}var H})),E},t.addComments=function(e,t,n){const r="\x3c!--",s=i.Range.create(i.Position.create(n.start.line,n.start.character),i.Position.create(n.end.line,n.end.character)),l=(0,a.findPathToPosition)(e,i.Position.create(n.start.line,n.start.character+1))?.path;if(!l)return s;const p=(0,a.getPositionData)(e,l);if(!p||!1===p.found)return s;const[c,u]=(0,o.getPathSegments)(p.path).filter((e=>"number"==typeof e)),m=e.targets[c];let d,y,g;if(void 0===u){const t=e.namespace?.contentRange;g=c,d={name:"Schema",nameRange:null,content:e.targets.map((e=>({name:"Annotations",nameRange:null,type:a.ELEMENT_TYPE,range:e.range,attributes:{},content:[]}))),contentRange:t,type:a.ELEMENT_TYPE,attributes:{}},y={name:"Annotations",nameRange:null,type:a.ELEMENT_TYPE,range:m.range,attributes:{},content:[]}}else{const e=m.terms[u];let t,n="$"+p.path.split(`['terms'][${u}]`)[1];y=e,d={name:"Annotations",nameRange:null,content:m.terms,contentRange:m.termsRange,type:a.ELEMENT_TYPE,attributes:{}},g=u;do{t=(0,o.getPathTargetInElement)(n,y),t.isElementSubNode&&t.element&&(d=y,y=t.element,g=t.nodeIndex,n=t.remainingPathForElement)}while(t.isElementSubNode&&t.element&&n.includes("['content']"))}if(!y||!d||g<0)return s;let f=null;for(let e=g-1;e>=0&&!f;e--)d.content[e].type===a.ELEMENT_TYPE&&(f=d.content[e]);let T=f?.range?.end?f.range.end:d.contentRange?.start;if(!T)return s;T=i.Position.create(T.line+1,0);let P=h(t,i.Range.create(T,n.start))||"",E=P.indexOf(r);if(E>=0){const e=P.slice(0,E).split("\n");s.start=i.Position.create(T.line+e.length-1,e.length>1?e[e.length-1].length:T.character+e[0].length)}P=h(t,i.Range.create(n.end,i.Position.create(n.end.line+1,0)))||"",P=P.split("\n")[0],E=P.indexOf(r);const v=P.indexOf("--\x3e");return E>=0&&v>0&&""===P.slice(v+"--\x3e".length).trim()&&(s.end.character+=v+3),s},t.toUnifiedUri=function(e,t=!0){const n=(e||"").replace(/\\/g,"/").replace(/\/\//g,"/");return t?n.replace(a.GHOST_FILENAME_PREFIX,""):n},t.pathFromUri=function(e){const t=(0,m.fileURLToPath)(e);return"win32"===process.platform?((n=t.charAt(0)).toLowerCase()===n?n.toUpperCase():n.toLowerCase())+t.slice(1):t;var n}},92719:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uxLogger=void 0;const a=n(63940);t.uxLogger=new class LoggerUX{error(e){a.logger.error(e)}warn(e){a.logger.warn(e)}info(e){a.logger.info(e)}}},91400:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModContentForPath=t.convertPathInAnnotationToInternal=t.convertPathInAnnotationFromInternal=void 0;const a=n(53308),o=n(34799),r=n(24825),i=n(41810);function s(e,t,n){const a={subElement:null,subElementIndex:-1};let o=-1;return e.content.forEach(((e,r)=>{e.type!==i.ELEMENT_TYPE||t&&e.name!==t||(o++,o===n&&(a.subElement=e,a.subElementIndex=r))})),a}function l(e,t,n){let a=0;for(let o=0;o<Math.min(e.content.length,n);o++){const n=e.content[o];n.type!==i.ELEMENT_TYPE||t&&n.name!==t||a++}return a}function p(e){let t=e;return e&&(t=e.slice(0,1).toUpperCase()+e.slice(1)),t}t.convertPathInAnnotationFromInternal=function(e,t){let n="/",o=e,i=!0,s=!1,p=!1,c=t,u=!1;for(;n&&o&&c&&"$"!==c;){const e=i;i=!1;const t=s;s=!1;const m=p;p=!1;const d=(0,a.getPathTargetInElement)(c,o);if(u&&d.isElementSubNode){n+=l(d.element,"",d.nodeIndex)+"/",u=!1}if(d.isElementSubNodeName)o=null;else if(d.isElementSubNode){let a=-1;switch(d.element.name){case"Record":t&&(n+="value/"),m||(n+=e?"record/":"Record/");break;case"Collection":t&&(n+="value/"),n+=e?"collection/":"Collection/",u=!0,p=!0;break;case"Annotation":a=l(o,"Annotation",d.nodeIndex),n+="annotations/"+a+"/",i=!0;break;case"PropertyValue":a=l(o,"PropertyValue",d.nodeIndex),n+="propertyValues/"+a+"/",s=!0;break;default:r.expressionNames[d.element.name]&&("String"===d.element.name&&m||(e||t)&&(n+="value/"),n+=d.element.name+"/")}o=d.element,c=d.remainingPathForElement}else d.isAttributeName?o=null:d.isAttributeValue?(d.attribute?["Term","Qualifier","Type"].includes(d.attribute.name)?n+=d.attribute.name.toLowerCase()+"/":"Property"===d.attribute.name?n+="name/":r.expressionNames[d.attribute.name]&&((e||t)&&(n+="value/"),n+=d.attribute.name+"/"):o=null,o=null):(d.isTextSubNode||d.isName)&&(o=null)}return n.slice(0,n.length-1)},t.convertPathInAnnotationToInternal=function(e,t){let n="$";const a=t.split("/").filter((e=>!!e));let o=e,l=null;return a.forEach((e=>{if(o&&n){let t={subElement:null,subElementIndex:-1};switch(e){case"annotations":l="Annotation";break;case"record":case"Record":t=s(o,"Record",0),n+=t.subElementIndex>=0?"['content']["+t.subElementIndex+"]":"";break;case"propertyValues":l="PropertyValue";break;case"collection":case"Collection":t=s(o,"Collection",0),n+=t.subElementIndex>=0?"['content']["+t.subElementIndex+"]":"",l="";break;case"value":break;case"type":n+="['attributes']['Type']['value']";break;default:if(e.indexOf("-")>0){if(null!==l){const[t,a]=e.split("-").map((e=>Number(e))),r=s(o,l,t).subElementIndex,i=s(o,l,a).subElementIndex;n+="['content']['"+r+"-"+i+"']",l=null}}else if(isNaN(Number(e)))if(r.expressionNames[e])if(o.attributes&&o.attributes[e])n+="['attributes']['"+e+"']['value']";else if(o.name===e){let e=-1;o.content.forEach(((t,n)=>{t.type===i.TEXT_TYPE&&(e=n)})),e>=0?n+="['content']["+e+"]":n=""}else if(t=s(o,e,0),t.subElementIndex>=0){n+="['content']["+t.subElementIndex+"]";let e=-1;o.content[t.subElementIndex].content.forEach(((t,n)=>{t.type===i.TEXT_TYPE&&(e=n)})),e>=0?n+="['content']["+e+"]":n=""}else n="";else o.attributes[p(e)]?n+="['attributes']['"+p(e)+"']['value']":"name"===e?n+="['attributes']['Property']['value']":n="";else null!==l&&(t=s(o,l,Number(e)),n+=t.subElementIndex>=0?"['content']["+t.subElementIndex+"]":"",l=null)}t.subElement&&(o=t.subElement)}else n=""})),n},t.getModContentForPath=function(e,t,n){const a=t.split("/").filter((e=>!!e));let i,s={type:o.MOD_TYPE_ANNOTATION,value:e};return a.forEach((e=>{if(s)switch(e){case"term":s={type:o.MOD_TYPE_PRIMITIVE,value:s.value.term};break;case"qualifier":s={type:o.MOD_TYPE_PRIMITIVE,value:s.value.qualifier};break;case"type":s={type:o.MOD_TYPE_PRIMITIVE,value:s.value.type};break;case"name":s={type:o.MOD_TYPE_PRIMITIVE,value:s.value.name};break;case"annotations":i=o.MOD_TYPE_ANNOTATION;break;case"record":case"Record":s={type:o.MOD_TYPE_RECORD,value:s.value.record||s.Record||s.value.Record};break;case"propertyValues":i=o.MOD_TYPE_PROP_VALUE;break;case"collection":case"Collection":s={type:o.MOD_TYPE_COLLECTION,value:s.value.collection||s.value.Collection},i="";break;case"value":s={type:o.MOD_TYPE_EXPRESSION,value:s.value.value};break;default:if(e.indexOf("-")>0){const[t,n]=e.split("-").map((e=>Number(e))),a=s.value.slice(t,n+1);s={type:o.MOD_TYPE_RECORD_RANGE,value:a}}else if(isNaN(Number(e)))if(r.expressionNames[e]&&s.type===o.MOD_TYPE_EXPRESSION){let t=s.value[e];t=n?n.serializePrimitiveValue(e,t):t,s={type:o.MOD_TYPE_PRIMITIVE,value:t,expressionType:e}}else s=null;else{if(i===o.MOD_TYPE_PROP_VALUE){const t=s.value.propertyValues[Number(e)];s={type:o.MOD_TYPE_PROP_VALUE,value:t}}else if(i===o.MOD_TYPE_ANNOTATION){const t=s.value.annotations[Number(e)];s={type:o.MOD_TYPE_ANNOTATION,value:t}}else{const t=s.value[Number(e)];s="string"==typeof t?{type:o.MOD_TYPE_PRIMITIVE,value:t}:r.expressionNames[t.type]?{type:o.MOD_TYPE_EXPRESSION,value:t}:{type:o.MOD_TYPE_RECORD,value:t}}i=void 0}}})),s}},55351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeEmbeddedAnnotations=t.getMergedRecord=void 0;const a=n(41810),o=n(94872);t.getMergedRecord=(e,t,n)=>{let r=e;if(n.mergeRecords){r=Object.assign({},e),r.content=[...e.content??[]];const i=n.genericAnnotationService.context,s=(0,o.getSplitStructurePropertySources)(i,n.structureProperty,!1);s.fileUris&&(t||(t=(0,o.getSplitStructureType)(i,n.structureProperty,!0))&&(r.attributes=r.attributes??{},r.attributes.Type={name:"Type",nameRange:null,type:"attribute",value:t,valueRange:null}),Object.keys(s.nestedProperties).forEach((e=>{if("$Type"!==e&&!e.includes("@")){const t=n.reversedFileSequence.find((t=>s.nestedProperties[e].has(t)));if(t){const s=[...n.structureProperty.propertyPathSegments,e],l=(0,o.getSplitStructurePropertyValue)(i,{...n.structureProperty,propertyPathSegments:s},!1,new Set([t]),!0);if(l){const t=r.content.findIndex((t=>t.type===a.ELEMENT_TYPE&&"PropertyValue"===t.name&&(0,a.getElementAttributeValue)(t,"Property")===e));t>=0?r.content[t]=l:r.content.push(l)}}}})))}return r},t.mergeEmbeddedAnnotations=function(e,t){let n=e;if(t.mergeRecords){n=Object.assign({},e),n.content=[...(e.content||[]).filter((e=>!(e.type===a.ELEMENT_TYPE&&"Annotation"===e.name)))];const r=t.genericAnnotationService.context,i=(0,o.getSplitStructurePropertySources)(r,t.structureProperty,!1);i.fileUris&&Object.keys(i.nestedProperties).filter((t=>t.startsWith("Record"===e.name?"@":"$Element@"))).forEach((e=>{const a=t.reversedFileSequence.find((t=>i.nestedProperties[e].has(t)));if(a){const i=[...t.structureProperty.propertyPathSegments,e],s=(0,o.getSplitStructurePropertyValue)(r,{...t.structureProperty,propertyPathSegments:i},!1,new Set([a]));s&&n.content.push(s)}}))}return n}},82382:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=r(n(57147)),p=s(n(68405)),c=s(n(37865)),u=n(71017),m=s(n(26692)),d=n(55834);class Disposable{constructor(e){this.disposed=!1,this.callback=e}dispose(){this.disposed||"function"!=typeof this.callback||(this.callback(),this.disposed=!0)}}const y={fs:function(){const e=e=>{if(e){if(e.isFile())return d.FileType.File;if(e.isSymbolicLink())return d.FileType.SymbolicLink;if(e.isDirectory())return d.FileType.Directory}return d.FileType.Unknown};return{readFile:e=>l.promises.readFile(e.fsPath),writeFile:(e,t)=>l.promises.writeFile(e.fsPath,t),delete:async t=>{const n=await l.promises.stat(t.fsPath),a=e(n);if(a===d.FileType.Directory)await l.promises.rmdir(t.fsPath);else{if(a===d.FileType.Unknown)throw"Not a file or directory";await l.promises.unlink(t.fsPath)}},stat:async t=>{const n=await l.promises.stat(t.fsPath);return n?{ctime:n.ctimeMs,mtime:n.mtimeMs,size:n.size,type:e(n)}:void 0}}}(),findFiles:(e,t)=>{const n=e=>{if(!e)return;let t;if("string"==typeof e)t=e.includes("file:")?p.default.parse(e).fsPath:e;else{const n=e.base.includes("file:")?p.default.parse(e.base).fsPath:e.base;t=(0,u.join)(n,e.pattern)}return(0,m.default)(t)},a=n(e),o=t?[n(t)]:[];return(0,c.default)(a,{onlyFiles:!0,absolute:!0,ignore:o}).then((e=>e.map((e=>p.default.file(e)))))},createFileSystemWatcher:(e,t,n,a)=>{const o=new Disposable((()=>null));return{ignoreChangeEvents:n,ignoreCreateEvents:t,ignoreDeleteEvents:a,onDidCreate:e=>o,onDidChange:e=>o,onDidDelete:e=>o,dispose:()=>null}}};i(n(55834),t),t.default={RelativePattern:class RelativePattern{constructor(e,t){this.base="string"==typeof e?e:e.uri.fsPath,this.pattern=t}},Disposable,workspace:y,FileType:d.FileType}},36279:(e,t,n)=>{var a;try{if(a=n(66828),0===Object.keys(a).length)throw new Error("vscode module empty")}catch{a=n(82382)}e.exports=a},94521:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CdsDomainAdapter=void 0;const a=n(57310),o=n(71017),r=n(41810),i=n(19311),s=n(32217),l=n(99864),p=n(72307),c=n(97765),u=n(28608);t.CdsDomainAdapter=class CdsDomainAdapter{getEdmOperatorMap(){return this.edmOperatorMap||(this.edmOperatorMap=(0,c.getEdmOperatorMap)()),this.edmOperatorMap}constructor(e){this.toAbsoluteUriString=(e,t)=>(0,a.pathToFileURL)((0,o.join)(e.root,t)).toString(),this.vocabularyService=e||new s.VocabularyService(!0)}getFileSelectors(){return["**/*.cds"]}setDiagnosticsHandler(e){this.diagnosticsHandler=e}toServiceFile(e,t,n,a,o,r){const s=r.cdsCompilerFacade,p=r.compileMessagesMap,c=this.toAbsoluteUriString(a,e),u=(0,i.toTargetMap)(s.blitzIndex.forUri(c),c,this.vocabularyService,s),m=(0,l.createMetadataCollector)(r.metadataElementMap,s),{file:d}=(0,i.toAnnotationFile)(e,this.vocabularyService,u,m,void 0,r.propagationMap),y=d.namespace?.name===o?d.namespace:void 0,g=y?y.alias:"";d.targets=d.targets.filter((e=>e.name.startsWith(o+".")||g&&e.name.startsWith(g+".")));const f={uri:e,serviceName:o,content:d};return this.diagnosticsHandler(e,p.has(e)?p.get(e).messages:[]),f}serializeTarget(e){return(0,i.printTarget)(e)}serializeElement(e){return e?(0,i.indent)((0,i.printCsdlNode)(e,{...r.printOptions,useSnippetSyntax:!1})):""}serializeReference(e){return e.namespace?e.alias?`using ${e.namespace} as ${e.alias} from '${e.referenceUri}';`:`using ${e.namespace} from '${e.referenceUri}';`:`using from '${e.referenceUri}';`}serializeAttribute(){return""}serializePrimitiveValue(e,t){let n=(0,i.printPrimitiveValue)(e,t);return n&&n.length>=2&&n.startsWith("'")&&n.endsWith("'")&&(n=n.slice(1,n.length-1)),n}interceptDiagnostics(e,t){return this.adaptDiagnosticMessage(t),{quickFixTextEdits:[],suppressDiagnostics:!1}}getNewAnnotationFile(){return{fileContent:"",position:null}}adaptDiagnosticIncompleteExpressionCcForwardSlash(e,t){const n=d(t,e.range.start);return e.message="string"===n?u.i18n.t("incomplete_use_slash",e.data):"path"===n?u.i18n.t("incomplete_use_dot",e.data):u.i18n.t("incomplete_use_CC_or_slash_or_dot",e.data),e}adaptDiagnosticIncompleteExpressionForwardSlash(e,t){const n=d(t,e.range.start);return"string"===n?e.message=u.i18n.t("incomplete_use_slash",e.data):"path"===n&&(e.message=u.i18n.t("incomplete_use_dot",e.data)),e}adaptDiagnosticMissingI18nKey(e,t,n,a){const o=e.data;if(o&&(o.value.startsWith("{@i18n>")||o.value.startsWith("{i18n>")||!n))t.splice(a,1);else if(o.multilineType)t.splice(a,1);else{let t=u.i18n.t("Missing_i18n_value",{value:o.value});t=t.replace("&gt;",">"),e.message=t}return{item:e,diagnostics:t}}adaptDiagnosticInvalidPathExpression(e){const t=e.data;return t.value.includes("@")&&"AnnotationPath"===t.name&&(e.severity=p.DiagnosticSeverity.Warning,e.message=u.i18n.t("Invalid_path_for_0_expression_using_statement",e.data)),e}adaptDiagnosticTermNotApplicable(e){const t=e.data,n=["EntitySet","EntityType"],a=["Property","NavigationProperty"],o=Array.from(new Set(t.wrong.split(",").map((e=>n.includes(e.trim())?"Entity":e)))).join(", "),r=Array.from(new Set(t.correct.split(",").map((e=>a.includes(e.trim())?"Element":e)))).join(", ");return e.message=u.i18n.t("Term_0_cannot_be_applied_for_target_kind_1_It_can_be_applied_to_2",{name:this.vocabularyService.cdsVocabulary.reverseNameMap.get(t.name)||t.name,wrong:o,correct:r}),e}adaptDiagnosticNotInapplicableTermConstraint(e){const t=e.data;return e.message=u.i18n.t("Term_0_is_not_in_applicable_term_constraint_allowed_terms_are_1",{name:this.vocabularyService.cdsVocabulary.reverseNameMap.get(t.name)||t.name}),e}adaptDiagnosticRecordCollectionPathNotAllowed(e,t){const n=d(t,e.range.start),a=e.data;let o=a?.type?.name;if(o){const e=o.split("."),t=e.slice(0,-1).join("."),n=this.vocabularyService.getDefaultAlias(t);o=n?`${n}.${e.pop()}`:o}const r=a.type?.asCollection?"Element_0_not_allowed_here_collection_1":"Element_0_not_allowed_here_1";return"Record"===a.name?e.message=u.i18n.t(r,{name:"{ }",type:o}):"Collection"===a.name?e.message=u.i18n.t(r,{name:"[ ]",type:o}):[c.OPERATOR_TYPE,c.EXPRESSION_TYPES].includes(n)&&this.getEdmOperatorMap().has(a.name)?e.message=u.i18n.t(r,{name:this.getEdmOperatorMap().get(a.name).join(" or "),type:o}):e.message=u.i18n.t(r,{name:a.name,type:o}),e}adaptOdataFunctionWrongReturnType(e,t){const n=e.data;let a=n?.type?.name;if(a){const e=a.split("."),t=e.slice(0,-1).join("."),n=this.vocabularyService.getDefaultAlias(t);a=n?`${n}.${e.pop()}`:a}const o=d(t,e.range.start),r=n.type?.asCollection?"Function_0_not_allowed_here_collection_1":"Function_0_not_allowed_here_1";return[...c.EXPRESSION_TYPES,c.OPERATOR_TYPE].includes(o)&&this.getEdmOperatorMap().has(n.name)?e.message=u.i18n.t(r,{name:this.getEdmOperatorMap().get(n.name).join(" or "),type:a}):e.message=u.i18n.t(r,{name:n.name,type:a}),e}adaptDiagnosticInvalidEnumMemberType(e){const t=e.data?.caseCheck;if(t?.value&&t?.proposedValue){const{value:n,proposedValue:a}=t,o=n.split("/").pop(),r=a.split("/").pop();let i=u.i18n.t("Invalid_enum_value_0",{value:o});i=`${i}. ${u.i18n.t("Did_you_mean_0",{proposedValue:r})}`,t.proposedValue=`#${r}`,t.value=`#${o}`,e.message=i}else{let{value:t}=e.data;t=t.split("/").pop();const n=u.i18n.t("Invalid_enum_value_0",{value:t});e.message=n}return e}adaptDiagnosticIncompletePathWithType(e,t){const{pathValue:n,abstractName:a,expectedType:o}=e.data,r=d(t,e.range.start,!1);return r&&(e.message=u.i18n.t("Path_0_leads_to_1_The_path_should_lead_to_type_2",{pathValue:String(r)||n,abstractName:a,expectedType:o}).split("&#x2F;").join("/")),e}adaptDiagnosticIncompletePathWithCompatibleTypes(e,t){const{pathValue:n,abstractName:a,expectedType:o,expressionName:r,isCollection:i}=e.data,s=d(t,e.range.start,!1);return s&&(e.message=u.i18n.t(i?"Path_0_leads_to_1_The_path_should_lead_to_a_collection_representing_2":"Path_0_leads_to_1_The_path_should_lead_to_type_representing_2_3",{pathValue:String(s)||n,abstractName:a,expressionName:r,expectedType:o}).split("&#x2F;").join("/")),e}adaptDiagnosticUnknownTerm(e,t,n,a){const o=e.data;if(m(o.name)||o.alias===this.vocabularyService.cdsVocabulary.alias)t.splice(n,1);else if(o.isVocabulary){const t=y(a,e.range.start);t&&(e.message=u.i18n.t("Vocabulary_0_is_already_specified_in_line_1",{vocabulary:t.name.value,line:t.range.start.line+1}))}else if(e.message=u.i18n.t("Annotation_0_is_not_available_in_vocabulary_1",{term:o.name,alias:o.alias}),e.data?.caseCheck?.proposedValue){const t=e.data?.caseCheck.proposedValue.split(".").pop(),n=u.i18n.t("Did_you_mean_0",{proposedValue:t});e.message+=`. ${n}`}return{item:e,diagnostics:t}}adaptDiagnosticMessage(e,t=!0,n){for(let a=e.length-1;a>=0;a--){let o=e[a];if(!o)return[];switch(o.rule){case r.INVALID_PRIMITIVE_TYPE:h(a,e,o.data.name);break;case r.VALUE_REQUIRED:f(a,e);break;case r.INCOMPLETE_EXPRESSION_CC_FORWARD_SLASH:o=this.adaptDiagnosticIncompleteExpressionCcForwardSlash(o,n);break;case r.INCOMPLETE_EXPRESSION_FORWARD_SLASH:o=this.adaptDiagnosticIncompleteExpressionForwardSlash(o,n);break;case r.MISSING_REQUIRED_VALUE_FOR_ATTRIBUTE:o.message=u.i18n.t("missing_required_value_for_$Type");break;case r.ATTRIBUTE_NOT_ALLOWED_HERE:o.message=u.i18n.t("Property_is_not_allowed_here",o.data);break;case r.IGNORE_TARGET_VALIDATION:e.splice(a,1);break;case r.UNKNOWN_TERM:({item:o,diagnostics:e}=this.adaptDiagnosticUnknownTerm(o,e,a,n));break;case r.UN_SUPPORTED_VOCABULARY:case r.NO_UNDEFINED_NAMESPACE_TYPE:e.splice(a,1);break;case r.MISSING_I18N_KEY:({item:o,diagnostics:e}=this.adaptDiagnosticMissingI18nKey(o,e,t,a));break;case r.IGNORE_DUPLICATE:e.splice(a,1);break;case r.INVALID_PATH_EXPRESSION:o=this.adaptDiagnosticInvalidPathExpression(o);break;case r.TERM_NOT_APPLICABLE:o=this.adaptDiagnosticTermNotApplicable(o);break;case r.NOT_IN_APPLICABLE_TERMS_CONSTRAINT:o=this.adaptDiagnosticNotInapplicableTermConstraint(o);break;case r.RECORD_COLLECTION_PATH_NOT_ALLOWED:o=this.adaptDiagnosticRecordCollectionPathNotAllowed(o,n);break;case r.ODATA_FUNCTION_WRONG_RETURN_TYPE:o=this.adaptOdataFunctionWrongReturnType(o,n);break;case r.NO_VALIDATION_FOR_SUBNODES:{const e=o.data;o.message=u.i18n.t("Element_0_and_subnodes_are_not_validated",{name:"EdmJson"===e.name?"$edmJson":e.name}),o.severity=p.DiagnosticSeverity.Information;break}case r.INVALID_ENUM_MEMBER_TYPE:o=this.adaptDiagnosticInvalidEnumMemberType(o);break;case r.INCOMPLETE_PATH_WITH_TYPE:o=this.adaptDiagnosticIncompletePathWithType(o,n);break;case r.INCOMPLETE_PATH_WITH_COMPATIBLE_TYPES:o=this.adaptDiagnosticIncompletePathWithCompatibleTypes(o,n)}}return e.map((({rule:e,message:t,range:n,severity:a,data:o})=>e===r.MISSING_I18N_KEY?{code:"no-translation-text",message:t,range:n,severity:a,data:{...o},source:"annotation-service"}:{message:t,range:n,severity:a,data:{...o},source:"annotation-service"}))}isSplitSupported(){return!0}getRangeForDeletion(e,t,n,a,o){o||(o=e=>e);const i=o(e.range),s=a>1&&o(t.content[n+a-1]?.range)||i;if(t&&n>-1){let n,l;const p=t.content||[],c=t.attributes?.Type?.nameRange;t.attributes?.Type?.valueRange&&(c.end=t.attributes?.Type?.valueRange.end,++c.end.character);const u=[...p,{type:c?r.ELEMENT_TYPE:null,name:"",nameRange:c,range:c}].filter((e=>e.type===r.ELEMENT_TYPE)).sort(((e,t)=>1e6*e.range.start.line+e.range.start.character-1e6*t.range.start.line-t.range.start.character)),m=u.findIndex((t=>t===e)),d=a?m+a-1:m;for(let e=0;e<u.length&&!n;e++){const t=u[e];t.type===r.ELEMENT_TYPE&&(e<m&&(l=t),e>d&&(n=t))}if(n)return{start:i.start,end:o(n.range).start};if(l)return{start:o(l.range).end,end:s.end};if(t.contentRange)return(0,r.positionContained)(t.contentRange,i.start)?t.contentRange:i}return i}serializeElementInParent(e,t,n,a,o){let i="",s="";if(void 0!==t?.range?.start.line){const e=a.split("\n")[t?.range?.start.line],n=e.indexOf(e.trim().slice(0,1));i=r.printOptions.useTabs?"\t":" ".repeat(r.printOptions.tabWidth),s=e.substring(0,n)+i}const l="Annotation"===e.name;let p="",c="";if(t&&n>-1){let a,o=0;for(let i=0;i<=t.content.length;i++){const s=t.content[i];s?.type!==r.ELEMENT_TYPE||s.name!==e.name&&!l||(o++,o<=n&&(a=s),l&&0===n&&i===t.content.length-1&&(a=s))}if(a)p=`,\n${s}`;else{"Collection"===t.name&&0===n&&0===t.content.length&&(p=t.contentRange.start.line===t.contentRange.end.line?`\n${s}`:i);c=t.content.find((t=>t.type===r.ELEMENT_TYPE&&t.name===e.name))?`,\n${s}`:","}}let u=o;return u||(u=this.serializeElement(e),u=u.split("\n").join(`\n${s}`)),p+u+c}};const m=e=>!!{title:"title",description:"description",readonly:"readonly",equires_:"equires_",insertonly:"insertonly",restrict:"restrict",requires:"requires",mandatory:"mandatory",default:"default",Insertable:"Insertable",Updatable:"Updatable",Deletable:"Deletable",Readable:"Readable","assert.unique":"assert.unique","assert.integrity":"assert.integrity","assert.format":"assert.format","assert.range":"assert.range","assert.enum":"assert.enum",path:"path",impl:"impl","odata.etag":"odata.etag","odata.Type":"odata.Type","odata.MaxLength":"odata.MaxLength","odata.singleton":["odata.singleton","odata.singleton.nullable"],"odata.draft":"enabled","cds.on":["cds.on.insert","cds.on.update"],"cds.autoexpose":"cds.autoexpose","cds.api":"cds.api.ignore","cds.query":"cds.query.limit","cds.localized":"cds.localized","cds.valid":"cds.valid.from/to","cds.persistence":["cds.persistence.exists","cds.persistence.table","cds.persistence.skip","cds.persistence.mock","cds.persistence.name","cds.persistence.name"],"cds.odata":"valuelist",cascade:"cascade","ValueList.entity":"ValueList.entity",ValueList:"ValueList",TextArrangement:"Common.TextArrangement",requires_:"requires_",restrict_:"restrict_","fiori.draft":"fiori.draft.enabled"}[e],d=(e,t,n=!0)=>{if(void 0===e)return"";const a=[...e].map((([,e])=>e.assignments));let o;for(let e=0;e<a.length;e++){const r=(0,c.findAnnotationNode)(a[e][0],{position:t,includeDelimiterCharacters:!0});if(r){if(o=(0,c.getNode)(a[e][0],r),!n)return o&&o.value||"";break}}return o?.type},y=(e,t)=>{if(void 0===e)return;const n=[...e].map((([,e])=>e.assignments));for(let e=0;e<n.length;e++){if((0,c.findAnnotationNode)(n[e][0],{position:t,includeDelimiterCharacters:!0}))return n[e][0]}},g=e=>{e=e.split(".").pop();let t=!1;return["Date","DateTimeOffset","TimeOfDay","Binary"].includes(e)&&(t=!0),t},f=(e,t)=>{const n=t[e];n.rule===r.VALUE_REQUIRED&&(g(n.data.name)?t.splice(e,1):n.message=u.i18n.t("path-value_is_required",n.data))},h=(e,t,n)=>{g(n)&&t.splice(e,1)}},28608:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initI18n=t.i18n=void 0;const o=a(n(23527)),r=a(n(71466));t.i18n=o.default.createInstance(),t.initI18n=async function(){await t.i18n.init({resources:{en:{translation:r.default}},lng:"en",fallbackLng:"en",joinArrays:"\n\n"})}},89832:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initI18n=t.CdsDomainAdapter=void 0;var a=n(94521);Object.defineProperty(t,"CdsDomainAdapter",{enumerable:!0,get:function(){return a.CdsDomainAdapter}});var o=n(28608);Object.defineProperty(t,"initI18n",{enumerable:!0,get:function(){return o.initI18n}})},11014:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationAssignmentTokenImpl=t.NEWLINE_REGEX=void 0;const a=n(72307),o=n(3454);t.NEWLINE_REGEX=/\r?\n/g;class AnnotationAssignmentTokenImpl extends o.GenericTokenImpl{constructor(e,t,n,a,o,r,i,s,l){super(e,t,n,a,o,l),this.uri=e,this.tokenIndex=t,this.text=n,this.line=a,this.character=o,this.carrierName=r,this.carrier=i,this.carrierNameRange=s,this.annotationValue=l}get range(){if(!this._range){const e=this.text.split(t.NEWLINE_REGEX);this._range=a.Range.create(this.line,this.character,this.line+e.length-1,1===e.length?this.character+this.text.length:e.slice(-1)[0].length)}return this._range}}t.AnnotationAssignmentTokenImpl=AnnotationAssignmentTokenImpl},56342:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createIndex=void 0;const a=n(57310),o=n(87981),r=n(41289),i=e=>({into:t=>{for(const n of e)t.add(n)}}),s=e=>(t,n)=>{let o;if(o=e.get(t),!o&&"win32"===process.platform){const n=(0,a.fileURLToPath)(t);t=(0,a.pathToFileURL)(n).toString(),o=e.get(t),o||(t=(0,r.toggleCase)(n.charAt(0))+n.slice(1),t=(0,a.pathToFileURL)(t).toString(),o=e.get(t))}if(o)return o;if(void 0!==n)throw new Error("Create parameter is not supported.");throw new Error("File index not found.")};t.createIndex=function(e){const t=new Map,n=[],[r,l]=(e=>{const t=new Map,n=[],r=Object.keys(e.sources||{});for(const i of r){const r=e.sources[i],s=(0,a.pathToFileURL)(r.realname).toString(),l=(0,o.createFileIndexFromSource)(s,r,e.compiler);t.set(s,l),n.push(s)}return[t,n]})(e),p=new Map([...r]);return n.push(...l),Object.freeze({builtUris:n,getTransitiveDependencies:function(e){let n=t.get(e)??function(e){function n(e){const a=t.get(e);if(a)return a;let o=new Set;t.set(e,o);const r=p.get(e)?.directDependentUris??[];i(r).into(o);for(const a of r){const r=n(a);r.has(e)?(i(o).into(r),o=r,t.set(e,o),r.isShared=!0):i(r).into(o)}return o}return e.map((e=>n(e)))}([e])[0];return n.isShared&&(n=new Set(n),n.delete(e),t.set(e,n)),n},forUri:s(p)})}},79444:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileUriMap=t.severityMap=void 0;const a=n(57310),o=n(72307);t.severityMap={Debug:o.DiagnosticSeverity.Hint,Error:o.DiagnosticSeverity.Error,Warning:o.DiagnosticSeverity.Warning,Info:o.DiagnosticSeverity.Information},t.getFileUriMap=function(e){const t=new Map;return e?.sources?(Object.keys(e.sources).forEach((n=>{const o=e.sources[n].location?.file,r=(0,a.pathToFileURL)(n).toString();o&&t.set(o,r.toString())})),t):t}},24869:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getCompilerErrorMessages=t.getCdsArtifacts=void 0;const i=n(71017),s=r(n(22037)),l=n(72307),p=n(99864),c=n(56342),u=n(48516),m=n(79444),d=n(5836),y=n(20852),g=n(41289);function f(e,t,n=!1){for(let a=e.length-1;a>=0;a--){const o=e[a];if(0===t.get(o)?.size)return n&&t.delete(o),o}return null}function h(e,t){const n=new Map,a=Object.keys(t.sources);let o=e.root||"";o&&"win32"===s.platform()&&!a.some((e=>e.startsWith(o.at(0))))&&(o=(0,g.toggleCase)(o.at(0))+o.substring(1));for(const e of a){const a=(t.sources[e]?.options?.messages??[]).filter((t=>{const n=t?.$location?.file;return n&&(0,i.join)(o,n)===e}));for(const e of a){const t=e?.$location?.file;n.has(t)||n.set(t,{hasSyntaxErrors:!1,messages:[]});const a=n.get(t),o={message:e.message,severity:m.severityMap[e.severity]??l.DiagnosticSeverity.Error,range:(0,u.locationToRange)(e.$location)||l.Range.create(0,0,0,0)};o.severity===l.DiagnosticSeverity.Error&&a&&(a.hasSyntaxErrors=!0),a?.messages.push(o)}}return n}t.getCdsArtifacts=async(e,t,n,a)=>{if(n.length){const o=await(0,y.compile)(e.root,n,a),r=(0,c.createIndex)(o),s=h(e,o),l=function(e){const t=Object.keys(e.sources??{}),{incomingEdges:n,layerRepFiles:a,outgoingEdges:o}=function(e){const t=new Map,n=new Map,a=new Map;for(const o of Object.keys(e.sources||{})){const r=e.sources[o]._layerRepresentative,i=r?.realname;if(!i)continue;a.has(i)||a.set(i,new Set),a?.get(i)?.add(o),t.has(i)||t.set(i,new Set),n.has(i)||n.set(i,new Set);Object.keys(r._layerExtends||{}).forEach((e=>{t?.get(i)?.add(e),n.has(e)||n.set(e,new Set),n?.get(e)?.add(i)}))}return{outgoingEdges:t,incomingEdges:n,layerRepFiles:a}}(e),r=[];for(;f(t,n);){const e=f(t,n,!0);if(e){r.unshift(e);const t=o?.get(e);if(t)for(const a of t)n?.get(a)?.delete(e)}}if(n.size>0)return t;const i=[];for(const e of r){const t=a?.get(e);t&&i.push(...t)}return i}(o).map((t=>(0,i.relative)(e.root,t))),u=(0,p.createCdsCompilerFacade)(o),m=(0,d.generateMetadata)(o,u,t);return{fileSequence:l,compileMessagesMap:s,lspIndex:r,metadataElementMap:m,metadataIncluded:!1,cdsCompilerFacade:u,collector:(0,d.createMetadataCollector)(m,u)}}return{fileSequence:[],lspIndex:void 0,compileMessagesMap:new Map,metadataElementMap:new Map,metadataIncluded:!1,cdsCompilerFacade:void 0}},t.getCompilerErrorMessages=h},9357:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCdsDocument=void 0;const a=n(85727),o=n(41289),r=n(48516),i=n(84620);function s(e,t,n,a){return function(o){const s=(0,r.findUsing)(n,o);if(!s)throw new Error("Could not find using!");const p=l(t.find((t=>t.type===e.Using&&t.line===s.location.line&&t.column===s.location.col-1))),c=l(t.find((t=>t.type===e.From&&t.line>=s.location.line&&t.column>=s.location.col-1&&t.line<=o.location.line&&t.column<=o.location.col-1)));if(!p)throw new Error('Could not find "using" token!');if(!c)throw new Error('Could not find "from" token!');const u={type:"dependency",from:c,using:p,module:{type:"string",value:o.val??"",range:(0,r.locationToRange)(o.location)},range:(0,r.locationToRange)(s.location)};if(s.usings){const n=l(t.find((t=>t.type===e.LeftCurly&&t.line>=s.location.line&&t.column>=s.location.col-1&&t.line<=o.location.line&&t.column<=o.location.col-1))),p=l(t.find((t=>t.type===e.RightCurly&&t.line>=s.location.line&&t.column>=s.location.col-1&&t.line<=o.location.line&&t.column<=o.location.col-1))),c=s.usings.map((e=>({type:"named-using",localName:{type:"token",value:e.name.id,range:(0,r.locationToRange)(e.name.location)},importedName:{type:"token",value:(0,i.getNameObj)(e,a).absolute,range:(0,r.locationToRange)(e.name.location)}})));u.names={type:"named-usings",names:c,range:(0,r.locationToRange)(s.location),commas:[],open:n,close:p}}return u}}function l(e){if(e)return{type:"token",value:e.text,range:a.Range.create(e.line-1,e.column,e.line-1,e.column+e.text.length)}}t.getCdsDocument=function(e,t){const n=(0,o.getSourceByUri)(e,t);if(!n)return;const r=function(e){const t=e.tokenStream.tokenSource.getTokenNames(),n=new Map([["USING","Using"],["FROM","From"],["'{'","LeftCurly"],["'}'","RightCurly"],["String","String"]]),a={};for(let e=0;e<t.length;e++){const o=t[e],r=n.get(o);r&&(a[r]=e,n.delete(o))}if(0!==n.size)throw new Error(`Token types for: ${[...n.values()].join(",")} are not found!`);return a}(n),i=n.tokenStream.tokens,p=l(i[i.length-1])?.range?.end??a.Position.create(0,0);return{type:"cds-document",dependencies:n.dependencies.map(s(r,i,n.usings,t.compiler)),annotateDirectives:[],namespace:void 0,range:a.Range.create(a.Position.create(0,0),p)}}},41289:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleCase=t.getSourceByUri=void 0;const a=n(57310);function o(e){return e.toLowerCase()===e?e.toUpperCase():e.toLowerCase()}t.getSourceByUri=function(e,t){const n=(0,a.fileURLToPath)(e);let r=t?.sources[n];return r||"win32"!==process.platform||(e=o(n.charAt(0))+n.slice(1),r=t?.sources[e]),r},t.toggleCase=o},20852:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compile=void 0;const a=n(31980),o=n(71017);t.compile=async(e,t,n)=>{try{const r=[...n?.entries()||[]].reduce(((t,[n,a])=>(t[(0,o.join)(e,n)]=a.fileContent,t)),{}),i={fallbackParser:"cds",attachValidNames:!0,attachTokens:!0,smart:{},messages:[]},s=await a.$lsp?.compile(t,e,i,r);return s.compiler={getArtifactName:a.$lsp.getArtifactName},s}catch(e){const{model:t}=e;return t.compiler={getArtifactName:a.$lsp.getArtifactName},t}}},13068:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCdsCompilerFacade=void 0;const a=n(56342),o=n(57639),r=n(79444),i=n(57310),s=n(5836),l=n(9357),p=n(24869),c=n(41289),u=n(42415);t.createCdsCompilerFacade=function(e){let t;const n=new u.EdmxNameConverter(e);return{get blitzIndex(){return t||(t=(0,a.createIndex)(e)),t},getTokensForUri(t){const n=(0,c.getSourceByUri)((0,i.pathToFileURL)(t).toString(),e),a=[];return n?.tokenStream?.tokens&&a.push(...n?.tokenStream?.tokens),a},getCdsDocument:t=>(0,l.getCdsDocument)(t,e),getMetadata(t){return(0,s.generateMetadata)(e,this,t)},getGhostFiles:t=>(0,o.buildGhostFiles)(e,t),getCompilerErrors:t=>(0,p.getCompilerErrorMessages)(t,e),getUriMap:()=>(0,r.getFileUriMap)(e),getPropagatedTargetMap:(t,n)=>(0,o.toPropagatedTargetMap)(e,t,n),getFileName:t=>e.definitions[t]?.location?.file,getNamespaceAndReference(t){const n=(0,c.getSourceByUri)(t,e),a=new s.Converter(e.compiler,this),o=[];let r;return n&&(o.push(...a.convertUsingsToNamespaces(n.usings,n.dependencies)),n.namespace&&(r=a.convertNamespaceToNamespaces(n.namespace))),{references:o,namespace:r}},getAllSourceUris:()=>Object.keys(e?.sources)||[],getServiceKind:t=>e?.definitions[t]?.kind,collectMetadataForAbsolutePath:(t,n,a)=>(0,s.collectMetadataForAbsolutePath)(t,n,a,e),collectMetadataForRelativePath(t,n,a,o){(0,s.collectMetadataForRelativePath)(t,n,a,o,e)},convertNameToEdmx:e=>n.convertNameToEdmx(e),convertNameFromEdmx:e=>n.convertNameFromEdmx(e)}}},87981:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFileIndexFromSource=void 0;const a=n(57310),o=n(48516),r=n(11014),i=n(64533),s=n(82641),l=n(84620),p=(e,t,n,a,o,r)=>{const i=[];Object.keys(e.elements||e.columns||{}).forEach((t=>{const n=e.elements||e.columns;n?.[t]&&i.push(n[t])}));for(const e of i){const i=e=>{const t=(0,l.getNameObj)(e,r);return[t.absolute,t.element].join(".")};d(e,t,n,a,o,r,i)}},c=(e,t,n,a,o,r)=>{const i=[];Object.keys(e.actions||{}).forEach((t=>{e.actions?.[t]&&i.push(e.actions[t])}));for(const e of i){const i=e=>{const t=(0,l.getNameObj)(e,r);return[t.absolute,t.action].join(".")};d(e,t,n,a,o,r,i);const s=[];Object.keys(e.params||{}).forEach((t=>{e.params?.[t]&&s.push(e.params[t])}));for(const e of s){const i=e=>{const t=(0,l.getNameObj)(e,r);return[t.absolute,t.action,t.param].join(".")};d(e,t,n,a,o,r,i)}}},u=(e,t,n,a,o,r)=>{const i=[];Object.keys(e.params||{}).forEach((t=>{e.params?.[t]&&i.push(e.params[t])}));for(const e of i){const i=e=>{const t=(0,l.getNameObj)(e,r);return[t.absolute,t.param].join(".")};d(e,t,n,a,o,r,i)}};t.createFileIndexFromSource=function(e,t,n){const o=[],r=new Map,i={idTokens:[],annotationAssignments:r};if(o.push(...(e=>{const t=[],n=e.dependencies??[];for(const e of n)if(e.realname){const n=(0,a.pathToFileURL)(e.realname).toString();t.push(n)}return t})(t)),!t.tokenStream)return Object.freeze({directDependentUris:o,idTokens:i.idTokens,compilerMessages:[],i18nTokens:[],stringTokens:[],tokens:[],get annotationAssignments(){return r.values()}});const s=t.tokenStream.tokenSource?.inputStream.strdata??"",m=Object.keys(t.artifacts||{}).map((e=>t.artifacts[e]));m.push(...y(m)),t.extensions&&t.extensions.length&&m.push(...t.extensions);for(const a of m){const o=e=>(0,l.getNameObj)(e,n).absolute;d(a,i,e,t,s,n,o),p(a,i,e,t,s,n),c(a,i,e,t,s,n),u(a,i,e,t,s,n)}return Object.freeze({idTokens:i.idTokens,directDependentUris:o,compilerMessages:[],i18nTokens:[],stringTokens:[],tokens:[],get annotationAssignments(){return r.values()}})};const m=(e,t)=>!!(e&&t&&e.file&&t.location?.file)&&e.file!==t.location.file;function d(e,t,n,a,i,s,p){const c=e.$annotations;if(!m(e.location,a)&&c&&c.length){const u=e.name.path?e.name.path.slice(-1)[0]:e.name,{line:d,col:y}=(0,o.getStartLineColFromLocation)(u.location),f=a.tokenStream.tokens.find((e=>e.line===d&&e.column===y));let h;f&&(h=g(n,f,e,p),t.idTokens.push(h));const T=function(e,t){let n=function(e,t){if("annotate"===e.kind)return e.name?._artifact?.name||e.name;return(0,l.getNameObj)(e,t)}(e,t);const a=[];n?.absolute||(n=(0,l.getNameObj)(e,t));a.push(n.absolute),n.element&&a.push(n.element);n.action&&a.push(n.action);n.param&&a.push(n.param);return a.join(".")}(e?.name?._artifact??e,s);((e,t,n,a,i,s,l,p)=>{for(const c of e){if(m(c.location,a))continue;let e=(0,o.getTextForLocationRange)(c.location,i);e.length&&"@"===e[0]&&(e=e.substr(1));const u=(c.name??c.value.name).path?.slice(0,1)[0].location,{line:d,col:y}=(0,o.getStartLineColFromLocation)(u),f=a.tokenStream.tokens.find((e=>e.line===d&&e.column===y));if(f){const a=g(n,f,void 0,p);t.idTokens.push(a);const o=`${a.range.start.line}:${a.range.start.character}`;if(!t.annotationAssignments.has(o)){const i=new r.AnnotationAssignmentTokenImpl(n,a.tokenIndex,e,a.line,a.character,s,l);t.annotationAssignments.set(o,i)}}}})(c,t,n,a,i,T,h,p)}}function y(e){const t=[];for(const n of e)Object.keys(n.artifacts||{}).forEach((e=>{n.artifacts?.[e]&&t.push(n.artifacts[e])})),t.push(...n.extensions||[]);return t.length?[...t,...y(t)]:t}function g(e,{tokenIndex:t,text:n,line:a,column:o},r,l){const p=r?.name?._artifact??r,c=r?.name&&p?new i.GenericDefinitionImpl(l(p),p.kind):void 0;return new s.IdentifierTokenImpl(e,t,n,a-1,o,c)}},64533:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenericDefinitionImpl=void 0;t.GenericDefinitionImpl=class GenericDefinitionImpl{constructor(e,t,n=e){this.symbolName=e,this.kind=t,this.absoluteName=n}get fullyQualifiedName(){return this.symbolName}}},3454:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenericTokenImpl=void 0;const a=n(72307);t.GenericTokenImpl=class GenericTokenImpl{constructor(e,t,n,a,o,r){this.uri=e,this.tokenIndex=t,this.text=n,this.line=a,this.character=o,this.annotationValue=r}toString(){return`${this.text}@${this.line}:${this.character}`}get range(){return a.Range.create(this.line,this.character,this.line,this.character+this.text.length)}get location(){return a.Location.create(this.uri,this.range)}compare(e){let t=this.line-e.line;return 0===t?(t=e.character-this.character,t<0?1:t<=this.text.length?0:-1):Math.sign(t)}}},82641:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdentifierTokenImpl=void 0;const a=n(3454);class IdentifierTokenImpl extends a.GenericTokenImpl{constructor(e,t,n,a,o,r,i){super(e,t,n,a,o,i),this.uri=e,this.tokenIndex=t,this.text=n,this.line=a,this.character=o,this.definitions=r,this.annotationValue=i}}t.IdentifierTokenImpl=IdentifierTokenImpl},99864:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCdsCompilerFacade=t.getCdsArtifacts=t.createMetadataCollector=t.getMetadataElementsFromMap=void 0;var a=n(5836);Object.defineProperty(t,"getMetadataElementsFromMap",{enumerable:!0,get:function(){return a.getMetadataElementsFromMap}}),Object.defineProperty(t,"createMetadataCollector",{enumerable:!0,get:function(){return a.createMetadataCollector}});var o=n(24869);Object.defineProperty(t,"getCdsArtifacts",{enumerable:!0,get:function(){return o.getCdsArtifacts}});var r=n(13068);Object.defineProperty(t,"createCdsCompilerFacade",{enumerable:!0,get:function(){return r.createCdsCompilerFacade}})},49081:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectMetadataForRelativePath=t.collectMetadataForAbsolutePath=void 0;const a=n(84620),o=n(89754),r=n(99254),i=n(92183),s=n(99409),l="<ServiceName>";function p(e,t,n){const{facade:a,metadataElementMap:o}=e.metadataCollector;let r,i="";for(let e=(n||t.length)-1;e>=0&&!r;e--){const n=t.slice(0,e+1),a=t.slice(e+1);i=n.join(".")+(a.length?"/"+a.join("/"):""),r=o.get(i)}if(r||!a)return{collectorEntry:r,key:i};i="";for(let a=(n||t.length)-1;a>=0&&!r;a--){const n=t.slice(0,a+1),o=t.slice(a+1),{topLevelMdElementName:s,topLevelArtifact:l}=c(e,n);l&&({mdElementName:i,mdEntry:r}=u(e,o,s,l))}return{collectorEntry:r,key:i}}function c(e,t){const{metadataCollector:n,compileModel:a,converter:o}=e,{metadataElementMap:r}=n;let i=t.join(".").split("()").join("");i=e.converter.convertNameFromEdmx(i)??i;const s=y(a?.definitions,i);let l=(s||"").split(".").map(((e,n)=>t[n]?.endsWith("()")?e+"()":e)).join(".");const p=s?a?.definitions[s]:void 0;if(l=e.converter.convertNameToEdmx(l),p&&!r.has(l)){const e=o.convertArtifact(p);e&&r.set(l,{node:e})}return{topLevelMdElementName:l,topLevelArtifact:p}}function u(e,t,n,a){const{metadataCollector:o,compileModel:r}=e,{metadataElementMap:i}=o;let s=i.get(n)?.node,l=n,c=a,u=n;for(const n of t){if(!s)continue;if(g(e,s)){const{collectorEntry:t}=p(e,s?.structuredType?.split(".")||[]);if(l=s.structuredType||l,s=t?.node,c=r?.definitions?.[l],!t||!s||!c){s=void 0;continue}}s.content=s.content||[];const o=m(e,{parentXsnNode:c,parentNode:s,parentKey:l,topLevelArtifact:a},n,t);u=o.mdElementName,c=o.xsnObject,s=i.get(u)?.node,l=u}return{mdElementName:u,mdEntry:s?i.get(u):void 0}}function m(e,t,n,i){const{parentNode:l,parentKey:c,parentXsnNode:u}=t;let m,g=c+"/"+n;if("service"===l.kind){const r=function(e,t,n){const{metadataCollector:r,compileModel:i}=e,{metadataElementMap:s}=r,{parentKey:l,parentNode:c}=t;let u=n;i?.definitions&&y(i.definitions,l+"."+n)||(u=l&&n.lastIndexOf("_")>0?function(e,t,n){const a=`${t}.${n}`.replaceAll("_","."),o=Object.keys(e??{}).find((e=>e.startsWith(`${t}.`)&&e.replaceAll("_",".")===a));return o?o.substring(`${t}.`.length):""}(i.definitions,l,n):"");if(!u)return null;let m=y(i.definitions,l+"."+u);const d=m?i.definitions[m]:void 0,g=d?._service,f=g?(0,a.getNameObj)(g,i.compiler):void 0;if(m?.startsWith(o.ENTITY_PREFIX_LOCALIZED)||f.absolute!==l||"event"===d?.kind||"namespace"===d?.kind)return null;m&&(m=e.converter.convertNameToEdmx(m));const h=l?.length?m?.slice(l.length+1):"",T=l+"/"+h;if(!s.has(T)){let t=c.content.find((e=>e.name===h));t||(t=function(e,t,n,a,o){const{compileModel:r,converter:i}=e;let s;n&&(s=t?.kind&&["action","function"].includes(t.kind)?i.convertActionFunctionImportNode(n,a,o,t):i.convertEntitySetNode(n,a,t));const l=s?.structuredType;l&&r.definitions[i.convertNameFromEdmx(l)||l]&&p(e,l.split("."));return s}(e,d,h,c.path,m),c.content.push(t)),t&&s.set(T,{node:t,parentKey:l})}return{mdElementName:T,xsnObject:d}}(e,t,n);r&&({mdElementName:g,xsnObject:m}=r)}else if(n.endsWith("()")&&u?.actions){const a=function(e,t,n){const{metadataCollector:a,converter:o}=e,{metadataElementMap:r}=a,{parentKey:i,parentXsnNode:s}=t,l=s,p=y(l.actions,n.slice(0,-2));if(!p)return null;const c=i+"/"+p+"()";if(!r.has(c)&&i&&l?.actions?.[p]){const e=o.convertBoundAction(i,p,l?.actions?.[p]);r.set(c,{node:e})}return{mdElementName:c,xsnObject:l?.actions?.[p]}}(e,t,n);a&&({mdElementName:g,xsnObject:m}=a)}else if(c?.endsWith("()")){const r=function(e,t,n,r){const i=t?.parentXsnNode?.params,s=n.toUpperCase();let l,p="";if(i&&(y(i,n)||f(r,n)))({mdElementName:p,xsnObject:l}=function(e,t,n){const{metadataCollector:r,compileModel:i,converter:s}=e,{metadataElementMap:l}=r,{parentKey:p,parentNode:c,parentXsnNode:u,topLevelArtifact:m}=t,g="*"===n&&u?.params?.length?Object.keys(u.params)[0]:y(u?.params,n),f=p+"/"+g;if(!l.has(f)&&g){const t=s.convertParameter(g,c.path,u?.params?.[g]);if(t?.structuredType===o.TYPE_NAME_OF_BINDING_PARAMETER){t.isAnnotatable=!1,t.isEntityType=!0,t.isCollectionValued=!!u?.params?.[g].items;const n=(0,a.getNameObj)(m,i.compiler);t.structuredType=e.converter.convertNameToEdmx(n.absolut)}t&&(c.content.push(t),l.set(f,{node:t,parentKey:p}),d(e,t))}return{mdElementName:f,xsnObject:g?u?.params?.[g]:void 0}}(e,t,n));else if(t?.parentXsnNode?.returns&&s===o.RETURN_PARAM_NAME.toUpperCase())({mdElementName:p,xsnObject:l}=function(e,t){const{metadataCollector:n,converter:a}=e,{metadataElementMap:r}=n,{parentKey:i,parentNode:s,parentXsnNode:l}=t,p=i+"/"+o.RETURN_PARAM_NAME;if(!r.has(p)){const t=a.convertReturnParameter(l,s.path);t&&(s.content.push(t),r.set(p,{node:t,parentKey:i}),d(e,t))}return{mdElementName:p,xsnObject:l?.returns}}(e,t));else{const r=function(e,t,n){const{metadataCollector:r,converter:i}=e,{metadataElementMap:s}=r,{parentKey:l,parentNode:p,parentXsnNode:c,topLevelArtifact:u}=t;if(Object.keys(c?.params||{}).find((t=>{const n=c?.params?.[t],r=e.compileModel.compiler;return(0,a.getNameObj)((n?.items||n)?._effectiveType,r)?.absolute===o.TYPE_NAME_OF_BINDING_PARAMETER})))return null;const m=c?.["@cds.odata.bindingparameter.name"]?.val||c?.["@cds.odata.bindingparameter.collection"]?.val||"in";if(n.toUpperCase()!==m.toUpperCase())return null;const y=l+"/"+m;if(!s.has(y)){const t=i.convertBindingParameter(c,u,p.path);p.content.push(t),s.set(y,{node:t,parentKey:l}),d(e,t)}return{mdElementName:y,xsnObject:u}}(e,t,n);r&&({mdElementName:p,xsnObject:l}=r)}return p?{xsnObject:l,mdElementName:p}:null}(e,t,n,i);r&&({mdElementName:g,xsnObject:m}=r)}else if(function(e,t,n){const i=t.toUpperCase();return(o.IS_ACTIVE_ENTITY_ELEM_NAME.toUpperCase()===i||o.HAS_ACTIVE_ENTITY_ELEM_NAME.toUpperCase()===i)&&!!n&&["entity","view"].includes(n.kind)&&function(e,t){const{metadataCollector:n,compileModel:o}=e,i=n.draftNodesPerService,l=(0,r.getServiceNameForEntity)(t,o);l&&!i.has(l)&&i.set(l,(0,s.getDraftNodesForService)(l,e.converter,o));const p=(0,a.getNameObj)(t,o?.compiler),c=e.converter.convertNameToEdmx(p.absolute)??"";return!!l&&!!i?.get(l)?.has(c)}(e,n)}(e,n,u))g=function(e,t,n){const{metadataCollector:a,converter:r}=e,{metadataElementMap:i}=a,{parentKey:s,parentNode:l,parentXsnNode:p}=t,c=n.toUpperCase(),u=o.IS_ACTIVE_ENTITY_ELEM_NAME.toUpperCase()===c?o.IS_ACTIVE_ENTITY_ELEM_NAME:o.HAS_ACTIVE_ENTITY_ELEM_NAME,m=s+"/"+u;if(p){const e=r.convertDraftPropertyNode(p,u,t.parentKey);l.content.push(e),i.set(s+"/"+u,{node:e,parentKey:s})}return m}(e,t,n);else if(u?.elements){const a=function(e,t,n,a){const{metadataElementMap:o}=e.metadataCollector;let r,i="";if(y(t.parentXsnNode.elements,n)||f(a,n))({mdElementName:i,xsnObject:r}=function(e,t,n){const{metadataCollector:a,converter:o}=e,{metadataElementMap:r}=a,{parentKey:i,parentNode:s,parentXsnNode:l}=t,p=l,c="*"===n&&p?.elements?Object.keys(p?.elements)[0]:y(p.elements,n),u=s.isComplexType&&!s.isAnnotatable?"_":"/",m=i+u+c;if(!r.has(m)){let t;c&&i&&(t=o.convertElement(c,i,p?.elements?.[c])),(t||[]).forEach((t=>{s.content.push(t),r.set(i+"/"+t.name,{node:t,parentKey:i}),d(e,t)}))}return{mdElementName:m,xsnObject:c?p?.elements?.[c]:void 0}}(e,t,n));else if(n.lastIndexOf("_")>0&&!i&&!o.has(i+"/"+n)){const a=function(e,t,n){const a=(e,t)=>{const n=t.split("_");for(let t=n.length-1;t>0;t--){const a=y(e,n.slice(0,t).join("_"));if(a)return a}return""},{metadataCollector:o,converter:r}=e,{metadataElementMap:i}=o,{parentKey:s,parentNode:l,parentXsnNode:p}=t,c=p,u=a(c?.elements,n);if(!u)return;let m,g=[];s&&(g=r.convertElement(u,s,c?.elements?.[u]));return(g||[]).forEach((t=>{i.has(s+"/"+t.name)||(l.content.push(t),i.set(s+"/"+t.name,{node:t,parentKey:s}),d(e,t)),t.name.toUpperCase()===n.toUpperCase()&&(m=s+"/"+t.name)})),m?{mdElementName:m}:void 0}(e,t,n);a&&({mdElementName:i,xsnObject:r}=a)}return i?{xsnObject:r,mdElementName:i}:null}(e,t,n,i);a&&({mdElementName:g,xsnObject:m}=a)}return{xsnObject:m,mdElementName:g}}function d(e,t){const{metadataCollector:n,compileModel:a}=e;if(t.structuredType&&!n.metadataElementMap.has(t.structuredType)&&a?.definitions[e.converter.convertNameFromEdmx(t.structuredType)||t.structuredType]){const n=t.structuredType.split("."),a=p(e,n);a?.collectorEntry?.node?.keys&&a?.collectorEntry?.node?.keys.length&&p(e,[...n,a?.collectorEntry?.node?.keys[0]])}}function y(e,t){return e?.[t]?t:Object.keys(e||{}).find((e=>e.toUpperCase()===t.toUpperCase()))}function g(e,t){const n=e.converter.convertNameFromEdmx(t.structuredType)||t.structuredType||"";return["element","entitySet","param"].includes(t.kind)&&t.structuredType&&!!e.compileModel?.definitions[n]}function f(e,t){return"*"===t&&e.indexOf(t)===e.length-1}t.collectMetadataForAbsolutePath=function(e,t,n,a){let o="";const r={compileModel:a,metadataCollector:n,converter:new i.Converter(a.compiler,n.facade)},s=e.split(".");s.length>1&&["action","function"].includes(t)?s[s.length-1]+="()":s.length>2&&"param"===t&&(s[s.length-2]+="()");const{collectorEntry:l,key:c}=p(r,s);if(l){o=l.node.name;let e=l.parentKey;for(;e;){const t=n.metadataElementMap.get(e),a=t?.node.isComplexType&&!t?.node.isAnnotatable?"_":"/";o=t?.node.name+a+o,e=t?.parentKey}}return o||"element"!==t||(o=s.slice(0,s.length-1).join(".")+"/"+s[s.length-1]),{edmxPath:o||e,collectorKey:c}},t.collectMetadataForRelativePath=function(e,t,n,a,o){const r={compileModel:o,metadataCollector:a,converter:new i.Converter(o.compiler,a.facade)};if(e.startsWith("/"))if(e.slice(1).indexOf("/")>0&&e.includes("EntityContainer")){const[t,n]=e.slice(1).split("/");p(r,[t.split(".").filter((e=>"EntityContainer"!==e)).join("."),n],1)}else!function(e,t,n,a){const{compileModel:o}=e,r=t.split(".").pop();if(r&&o?.definitions[n]?.actions?.[r]){const t=n.split(".");p(e,[...t,r+"()"],t.length)}else if(o?.definitions[t.slice(1)]){p(e,(t.slice(1)+"()").split("."))}else!function(e,t,n){const a=t.split(".").pop(),o=e.compileModel?.definitions[n]?.artifacts,r=Object.keys(o||{}).filter((e=>"entity"===o?.[e].kind));for(const t of r){const o=n+"."+t;if(a&&e.compileModel?.definitions[o]?.actions?.[a]){const t=o.split(".");p(e,[...t,a+"()"],t.length);break}}}(e,t,a)}(r,e,t,n);else if(e.includes(l)){let a;if(n){const t=e.replace(l,n).split("/");({collectorEntry:a}=p(r,t,1))}a||function(e,t,n){const{compileModel:a}=e,o=t.split("."),r=o.slice(0,o.length-1).join("."),i=n.replace("<ServiceName>/",`${r}.`).split("/");if(!p(e,i,1).collectorEntry&&a?.definitions&&n.includes("/")){const t=n.split("/")[1],o=a?.definitions,r=Object.keys(o).find((e=>(e===t||e.endsWith(`.${t}`))&&"entity"===o[e].kind));p(e,n.replace(`<ServiceName>/${t}`,r||"").split("/"),1)}}(r,t,e)}else{const n=t.split(/[./]+/);p(r,[...n,...e.split("/")],n.length)}}},92183:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Converter=void 0;const a=n(85727),o=n(48516),r=n(84620),i=n(89754),s=n(99254),l="@odata.Type",p="@odata.singleton",c="@cds.odata.bindingparameter.collection",u="Edm.Binary",m="Edm.String",d="Edm.Decimal",y={"cds.Association":"","cds.Composition":"","cds.Binary":u,"cds.Boolean":"Edm.Boolean","cds.Date":"Edm.Date","cds.DateTime":"Edm.DateTimeOffset","cds.Decimal":d,"cds.DecimalFloat":d,"cds.Double":"Edm.Double","cds.Integer":"Edm.Int32","cds.Integer64":"Edm.Int64","cds.Int64":"Edm.Int64","cds.Int32":"Edm.Int32","cds.Int16":"Edm.Int16","cds.UInt8":"Edm.Byte","cds.LargeBinary":u,"cds.LargeString":m,"cds.String":m,"cds.Time":"Edm.TimeOfDay","cds.Timestamp":"Edm.DateTimeOffset","cds.UUID":"Edm.Guid","cds.hana.BINARY":u,"cds.hana.CHAR":m,"cds.hana.CLOB":m,"cds.hana.NCHAR":m,"cds.hana.REAL":"Edm.Single","cds.hana.SMALLDECIMAL":d,"cds.hana.SMALLINT":"Edm.Int16","cds.hana.ST_GEOMETRY":"Edm.Geometry","cds.hana.ST_POINT":"Edm.GeometryPoint","cds.hana.TINYINT":"Edm.Byte","cds.hana.VARCHAR":m,"cds.hana.Object":u},g=new Map(Object.entries({service:["EntityContainer","Schema"],entitySet:["EntitySet"],entity:["EntityType","EntitySet"],view:["EntityType","EntitySet"],aspect:["ComplexType","EntityType","EntitySet"],element:["Property"],action:["Action","ActionImport"],function:["Function","FunctionImport"],actionImport:["Action"],functionImport:["FunctionImport"],param:["Parameter"],type:["TypeDefinition","Property","Parameter"]}));t.Converter=class Converter{constructor(e,t){this.facade=t,this.convertArtifact=e=>{let t;if("service"===e?.kind){const n=this.getNameObj(e).absolute+".EntityContainer",a=this.buildNode(e.kind,n,"",this.getOrigin(e));a.content=[],t=a}else if("entity"===e?.kind||"view"===e?.kind){const n=e,a=this.getElementName(n),o=this.convertNameToEdmx(this.getNameObj(e).absolute)??"",r=this.buildNode("entity",o,"",this.getOrigin(n));r.isEntityType=!0,r.isCollectionValued=!0,r.content=[],a.length&&(a.sort(),r.keys=a),t=r}else if("action"===e?.kind||"function"===e?.kind){const n=e,a=this.getNameObj(n).absolute+this.getActionNodeSignature(n),o=this.buildNode(n.kind,a,"",this.getOrigin(n));o.content=[],t=o}else if("type"===e?.kind||"aspect"===e?.kind){const n=e,a=e?.elements?"aspect":"type",o=this.buildNode(a,this.getNameObj(n).absolute,"",e.builtin?void 0:this.getOrigin(n),this.getPrimitiveType(e));"aspect"===a&&(o.isComplexType=!0),o.content=[],t=o}return t&&(t.targetKinds=this.getEdmTargetKinds(t)),t},this.convertElement=(e,t,n)=>{const a=[];if(n){const o=this.buildNode(n.kind,e,t,this.getOrigin(n),this.getPrimitiveType(n)),r=(0,s.getAssociation)(n,this.compiler);if(r){if(e===i.ASSOCIATION_NAME_LOCALIZED)return[];o.structuredType=this.convertNameToEdmx(r.target),o.isCollectionValued=r.isToMany,o.isEntityType=!0}const l=n.type?._artifact||n.items?.type?._artifact||n._effectiveType;(n.items||l?.items)&&(o.isCollectionValued=!0),o.targetKinds=this.getEdmTargetKinds(o),a.push(...this.collectElementsFromStructuredType(l,o,e,t)),a.push(o),a.push(...this.getAssociationKeyFieldElements(n,e,t))}return a},this.convertBoundAction=(e,t,n)=>{const a=this.getNamespace(e)+"."+t+this.getActionNodeSignature(n,e),o=this.buildNode(n.kind,a,void 0,this.getOrigin(n));return o.targetKinds=this.getEdmTargetKinds(o),o},this.convertParameter=(e,t,n)=>{let a;return n&&(a=this.buildNode(n.kind,e,t,this.getOrigin(n),this.getPrimitiveType(n)),this.setStructuredType(a,n),n.items&&(a.isCollectionValued=!0)),a.targetKinds=this.getEdmTargetKinds(a),a},this.convertBindingParameter=(e,t,n)=>{const a=(e,t)=>{const n=e?.[t]?.val;return n&&"string"==typeof n?n:void 0};let o,s=Object.keys(e?.params||{}).find((t=>{const n=e?.params?.[t];return(0,r.getNameObj)((n?.items||n)?._effectiveType,this.compiler)?.absolute===i.TYPE_NAME_OF_BINDING_PARAMETER}));s||(s=a(e,"@cds.odata.bindingparameter.name")),s||(s=a(e,c)),s=s||"in",e&&(o=this.getOrigin(e),o.name+="."+s);const l=this.buildNode("param",s,n,o);l.isAnnotatable=!1,l.isCollectionValued=!(!e?.params?.[s]?.items&&!e?.[c]?.val),l.isEntityType=!0;const p=this.getNameObj(t);return l.structuredType=this.convertNameToEdmx(p.absolute),l.targetKinds=this.getEdmTargetKinds(l),l},this.convertReturnParameter=(e,t)=>{const n=e?.returns;let a;e&&(a=this.getOrigin(e),a.name+="."+i.RETURN_PARAM_NAME);const o=this.buildNode("param",i.RETURN_PARAM_NAME,t,a,this.getPrimitiveType(n));return this.setStructuredType(o,n),n?.items&&(o.isCollectionValued=!0),o.targetKinds=this.getEdmTargetKinds(o),o},this.convertDraftPropertyNode=(e,t,n)=>{const a=this.getOrigin(e);a.name+="."+t;const o=this.buildNode("element",t,n,a,"Edm.Boolean");return o.targetKinds=this.getEdmTargetKinds(o),o},this.convertEntitySetNode=(e,t,n)=>{const a=n?this.getOrigin(n):void 0,o=this.buildNode("entitySet",e,t,a),r=n?.[p]&&!1!==n?.[p].val;o.isEntityType=!0,o.isCollectionValued=!r;const i=this.getNameObj(n);return o.structuredType=this.convertNameToEdmx(i.absolute),o.targetKinds=this.getEdmTargetKinds(o),o},this.convertActionFunctionImportNode=(e,t,n,a)=>{const o="action"===a.kind?"actionImport":"functionImport",r=this.buildNode(o,e,t,this.getOrigin(a));return r.structuredType=n,r.targetKinds=this.getEdmTargetKinds(r),r},this.compiler=e}convertNamespaceToNamespaces(e){const t=[];(e.path||[]).forEach((e=>{t.push(e.id)}));return{type:"namespace",name:t.join(".")}}convertUsingsToNamespaces(e,t){const n=[];return(t||[]).forEach((t=>{const a=(0,o.findUsing)(e,t);if(a){const e=a.fileDep?.realname||a.fileDep?.val,t=a.fileDep?.location?(0,o.locationToRange)(a.fileDep?.location):void 0;a.usings?(a.usings||[]).forEach((a=>n.push(this.convertUsingToNamespace(a,e,t)))):n.push(this.convertUsingToNamespace(a,e,t))}else t.realname&&n.push(this.convertDependencyToNamespace(t))})),n}getNameObj(e){return(0,r.getNameObj)(e,this.compiler)}convertNameToEdmx(e){return e&&this.facade?this.facade.convertNameToEdmx(e):e}convertNameFromEdmx(e){return e&&this.facade?this.facade.convertNameFromEdmx(e):e}collectElementsFromStructuredType(e,t,n,a){const o=[];if(e&&["type","element"].includes(e.kind)&&e.name&&e.elements){t.structuredType=this.getNameObj(e).absolute;const r=this.getNameObj(e).element;"element"===e.kind&&r&&(t.isAnnotatable=t.path!==`${t.structuredType}/${r}`,t.structuredType+="."+r),t.isComplexType=!0,t.isCollectionValued||Object.keys(e.elements).forEach((t=>{const r=e.elements[t];o.push(...this.convertElement(n+"_"+t,a,r))}))}return o}getPrimitiveType(e){function t(t){return e?.["@Core.MediaType"]?"Edm.Stream":"string"==typeof e?.[l]?.val?e[l].val:t}const n=e?._effectiveType?.items?._effectiveType||e?._effectiveType;if("type"===n?.kind&&n.builtin&&n.name)return t(y[this.getNameObj(n).absolute]);let a=n?.type?._artifact||n?._origin?.type?._artifact;return!a&&e?.items&&(a=e.items._effectiveType?.type?._artifact),!a?.builtin&&a?._effectiveType?.type?._artifact&&(a=a?._effectiveType?.type?._artifact),"type"===a?.kind&&a.builtin&&a.name?t(y[this.getNameObj(a).absolute]):""}setStructuredType(e,t){if(e.edmPrimitiveType)return;let n=t?.type?._artifact||t?._effectiveType?.type?._artifact;if(!n&&t?.items&&(n=t.items.type?._artifact||t.items?._effectiveType?.type?._artifact),n?.name){e.structuredType=this.convertNameToEdmx(this.getNameObj(n).absolute);const t=n.kind;["entity","view"].includes(t)?e.isEntityType=!0:["type"].includes(t)&&(e.isComplexType=!0)}}getEdmTargetKinds(e){if(!e)return[];const t=[];return t.push(...g.get(e.kind)??[]),"element"===e.kind&&e.structuredType&&e.isEntityType&&t.unshift("NavigationProperty"),(t.includes("EntitySet")||e.isCollectionValued)&&t.push("Collection"),t}buildNode(e,t,n,a,o){const r={name:t,path:n?`${n}/${t}`:t,content:[],kind:e,isEntityType:!1,isCollectionValued:!1,isComplexType:!1,isAnnotatable:!0,targetKinds:[]};return a&&(r.originalName=a.name,r.location=a.location,r.importUri=a.importUri),o&&(r.edmPrimitiveType=o),r}getNamespace(e){const t=e.split(".");return t.pop(),t.join(".")}getOrigin(e){const t=this.getRecursiveOrigin(e),n=e._origin&&"entity"!==e.kind?e._origin:e;let r;if(n){const e=this.getNameObj(n);r={importUri:n.location.file,name:e.absolute+(e.element?"."+e.element:"")+(e.action?"."+e.action:"")+(e.param?"."+e.param:"")};const i=this.getNameObj(t)?.location||t.location,s=(0,o.locationToRange)(i);i&&s&&(r.location=a.Location.create(this.adaptFilePath(i),s))}return r}getRecursiveOrigin(e){return e._origin&&"entity"!==e.kind?this.getRecursiveOrigin(e._origin):e}adaptFilePath(e){let t=e.file;const n=t.indexOf("node_modules");return n>-1&&(t=t.substring(n)),t}getStructuredType(e){let t,n=e?.type?._artifact||e?._effectiveType?.type?._artifact;return!n&&e?.items&&(n=e.items.type?._artifact||e.items._effectiveType?.type?._artifact),n&&(t=this.getNameObj(n)),n?.name&&t?this.convertNameToEdmx(t.absolute)??"":""}getActionNodeSignature(e,t){if("action"===e.kind)return t?"("+t+")":"()";{const n=this.getActionOrFunctionParams(e);if(t){return"("+[t,...n].join(",")+")"}return"("+n.join(",")+")"}}getKeyNamesAndTypes(e){const t=[];if(e){const n=Object.keys(e);for(const a of n){const n=e[a];if("key"!==n.kind)continue;const o=n.targetElement?._artifact?.foreignKeys;if(o){const e=this.getKeyNamesAndTypes(o);for(const{name:n,type:o}of e)t.push({name:`${a}_${n}`,type:o})}else t.push({name:a,type:this.getPrimitiveType(n.targetElement?._artifact||n)})}}return t}getElementName(e){const t=[];return Object.keys(e.elements||{}).forEach((n=>{const a=e?.elements?.[n];"element"===a?.kind&&a.key&&a.key.val&&!0===a.key.val&&t.push(n)})),t}getActionOrFunctionParams(e){const t=[];return function(e){if(!e||"object"!=typeof e)return[];const t=Object.keys(e||{});if(t.some((t=>!e[t]?.$effectiveSeqNo)))return t;return t.sort(((t,n)=>(e[t]?.$effectiveSeqNo||0)-(e[n]?.$effectiveSeqNo||0)))}(e.params).forEach((n=>{const a=e?.params?.[n];let o=this.getPrimitiveType(a)||this.getStructuredType(a);a?.items&&(o=`Collection(${o})`),o&&t.push(o)})),t}getAssociationKeyFieldElements(e,t,n){const a=[],o=this.getKeyNamesAndTypes(e.foreignKeys);for(const{name:r,type:i}of o){const o=this.buildNode(e.kind,[t,r].join("_"),n,this.getOrigin(e),i);o.targetKinds=this.getEdmTargetKinds(o),a.push(o)}return a}convertUsingToNamespace(e,t,n){return{type:"reference",alias:e.name.id,aliasRange:(0,o.locationToRange)(e.name.location),name:(0,r.getNameObj)(e,this.compiler).absolute,uri:t,uriRange:n}}convertDependencyToNamespace(e){const t={type:"reference",alias:"",name:"",uri:e.realname};return e.location&&(t.uriRange=(0,o.locationToRange)(e.location)),t}}},99409:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDraftNodesForService=void 0;const a=n(84620),o=n(99254),r=n(89754),i="@odata.draft.enabled";function s(e,t,n,r,l){if(["view","entity"].includes(e.kind)){const p=(0,a.getNameObj)(e,t?.compiler),c=r.convertNameToEdmx(p.absolute)??"",u=function(e,t,n){let a=!1;a=n?e[i]&&!1!==e[i].val:t.endsWith("_texts")?Object.keys(e.elements||{}).findIndex((t=>"ID_texts"===t&&e?.elements?.[t].key?.val))>=0:!e[i]||!1!==e[i].val;return a}(e,c,!!l);u&&(n.add(c),Object.keys(e?.elements||{}).forEach((a=>{const i=e?.elements?.[a],l=(0,o.getAssociation)(i,t?.compiler);l&&l.isComposition&&t?.definitions[l.target]&&s(t.definitions[l.target],t,n,r)})))}}t.getDraftNodesForService=function(e,t,n){const o=new Set;return Object.keys(n.definitions||{}).filter((t=>{const o=n.definitions[t]._service;return(o?(0,a.getNameObj)(o,n.compiler):void 0)?.absolute===e&&!t.startsWith(r.ENTITY_PREFIX_LOCALIZED)})).forEach((e=>{const a=n.definitions[e];a&&s(a,n,o,t,!0)})),o}},42415:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EdmxNameConverter=t.convertNameToEdmxInternal=void 0;const n=["namespace","service","context"];function a(e,t){let a=e;const o=e.split("/");let r=o.shift(),i=t.definitions[r];const s=[];for(;i&&(l=i,!n.includes(l.kind));){const e=r.split("."),n=e.pop();s.unshift(n),r=e.join("."),i=t.definitions[r]}var l;return i&&(a=r+(s.length?"."+s.join("_"):""),a=[a,...o].join("/")),a}t.convertNameToEdmxInternal=a;t.EdmxNameConverter=class EdmxNameConverter{constructor(e){this.compileModel=e,this.edmxNamesMap=new Map}convertNameToEdmx(e){const t=this.edmxNamesMap.get(e);if(void 0!==t)return t;const n=a(e,this.compileModel);return this.edmxNamesMap.set(e,n),n}convertNameFromEdmx(e){return[...this.edmxNamesMap.entries()].find((t=>t[1].toUpperCase()===e.toUpperCase()))?.[0]}}},63667:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateMetadata=void 0;const a=n(89754),o=n(99254),r=n(99409),i=n(92183);t.generateMetadata=(e,t,n)=>{const s=new i.Converter(e.compiler,t),l=new Map;let p={};n?(e.definitions[n]&&(p[n]=e.definitions[n],Object.keys(e.definitions).filter((t=>{const o=e.definitions[t]._service;return(o?s.getNameObj(o):void 0)?.absolute===n&&!t.startsWith(a.ENTITY_PREFIX_LOCALIZED)})).forEach((t=>p[t]=e.definitions[t]))),l.set(n,(0,r.getDraftNodesForService)(n,s,e))):(p=e.definitions,Object.keys(p).filter((e=>"service"===p[e].kind)).forEach((t=>{l.set(t,(0,r.getDraftNodesForService)(t,s,e))})));const c={metadataElementMap:new Map,converter:s};return Object.keys(p).filter((e=>!e.startsWith(a.ENTITY_PREFIX_LOCALIZED))).filter((e=>["service","entity","view","action","function","aspect","type"].includes(p[e]?.kind)&&!("type"===p[e].kind&&p[e].builtin))).forEach((t=>function(e,t,n,r,i){const{metadataElementMap:s,converter:l}=e,p=n[t],c=l.convertArtifact(p),u="service"===p.kind?t:c.name;"service"===p.kind&&Object.keys(n||{}).filter((e=>{const t=n[e]._service,o=t?l.getNameObj(t):void 0;return!e.startsWith(a.ENTITY_PREFIX_LOCALIZED)&&o?.absolute===u&&["entity","view","action","function"].includes(n[e].kind)})).forEach((t=>{!function(e,t,n,a){const{metadataElementMap:o,converter:r}=e,i=e.converter.convertNameToEdmx(r.getNameObj(t).absolute)??"",s=i.slice(a.length+1);let l;l=["entity","view"].includes(t.kind)?r.convertEntitySetNode(s,n.name,t):r.convertActionFunctionImportNode(s,n.name,i,t);n.content.push(l),o.set(n.name+"/"+s,{parentKey:n.name,node:l})}(e,n[t],c,u)}));if(function(e,t){const{metadataElementMap:n,converter:o}=e;Object.keys(t.actions||{}).sort().forEach((r=>{const i=t?.actions?.[r];if(i&&["action","function"].includes(i.kind)){const s=o.convertBoundAction(o.getNameObj(t).absolute,r,i),l=s.name;s.content=[];const p=o.convertBindingParameter(i,t,l);p&&(s.content.push(p),n.set(l+"/"+p.name,{parentKey:l,node:p})),function(e,t,n){const{metadataElementMap:o,converter:r}=e;Object.keys(t.params||{}).forEach((e=>{const i=t?.params?.[e];if(i&&["param"].includes(i.kind)){const t=r.convertParameter(e,n,i);t&&t.structuredType!==a.TYPE_NAME_OF_BINDING_PARAMETER&&o.set(n+"/"+e,{parentKey:n,node:t})}}))}(e,i,l),function(e,t,n,o){if(t.returns){const{metadataElementMap:r,converter:i}=e,s=i.convertReturnParameter(t,n);s&&(o.content.push(s),r.set(n+"/"+a.RETURN_PARAM_NAME,{parentKey:n,node:s}))}}(e,i,l,s),n.set(l,{node:s})}}))}(e,p),function(e,t,n,a){const{metadataElementMap:o,converter:r}=e;Object.keys(t.elements||{}).forEach((e=>{const i=t?.elements?.[e],s=r.convertElement(e,n,i);a.content.push(...s);for(const e of s)o.set(n+"/"+e.name,{parentKey:n,node:e})}))}(e,p,u,c),["entity","view"].includes(p.kind)&&r.get((0,o.getServiceNameForEntity)(p,i))?.has(u)){const e=l.convertDraftPropertyNode(p,a.IS_ACTIVE_ENTITY_ELEM_NAME,u);e&&(c.content.push(e),s.set(u+"/"+a.IS_ACTIVE_ENTITY_ELEM_NAME,{parentKey:u,node:e}));const t=l.convertDraftPropertyNode(p,a.HAS_ACTIVE_ENTITY_ELEM_NAME,u);t&&(c.content.push(t),s.set(u+"/"+a.HAS_ACTIVE_ENTITY_ELEM_NAME,{parentKey:u,node:t}))}(function(e,t,n,o){const{metadataElementMap:r,converter:i}=e;if(Object.keys(t.params||{}).sort().forEach((e=>{const a=t?.params?.[e],s=i.convertParameter(e,n,a);s&&(o.content.push(s),r.set(n+"/"+e,{parentKey:n,node:s}))})),t.returns){const e=i.convertReturnParameter(t,n);e&&(o.content.push(e),r.set(n+"/"+a.RETURN_PARAM_NAME,{parentKey:n,node:e}))}})(e,p,u,c),s.set(u,{node:c})}(c,t,p,l,e))),c.metadataElementMap}},5836:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertNameToEdmxInternal=t.EdmxNameConverter=t.Converter=t.generateMetadata=t.collectMetadataForRelativePath=t.collectMetadataForAbsolutePath=t.getMetadataElementsFromMap=t.createMetadataCollector=t.getMetadataCollector=void 0;var a=n(89754);Object.defineProperty(t,"getMetadataCollector",{enumerable:!0,get:function(){return a.getMetadataCollector}}),Object.defineProperty(t,"createMetadataCollector",{enumerable:!0,get:function(){return a.createMetadataCollector}}),Object.defineProperty(t,"getMetadataElementsFromMap",{enumerable:!0,get:function(){return a.getMetadataElementsFromMap}});var o=n(49081);Object.defineProperty(t,"collectMetadataForAbsolutePath",{enumerable:!0,get:function(){return o.collectMetadataForAbsolutePath}}),Object.defineProperty(t,"collectMetadataForRelativePath",{enumerable:!0,get:function(){return o.collectMetadataForRelativePath}});var r=n(63667);Object.defineProperty(t,"generateMetadata",{enumerable:!0,get:function(){return r.generateMetadata}});var i=n(92183);Object.defineProperty(t,"Converter",{enumerable:!0,get:function(){return i.Converter}});var s=n(42415);Object.defineProperty(t,"EdmxNameConverter",{enumerable:!0,get:function(){return s.EdmxNameConverter}}),Object.defineProperty(t,"convertNameToEdmxInternal",{enumerable:!0,get:function(){return s.convertNameToEdmxInternal}})},89754:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMetadataElementsFromMap=t.getMetadataCollector=t.createMetadataCollector=t.ASSOCIATION_NAME_LOCALIZED=t.ENTITY_PREFIX_LOCALIZED=t.HAS_ACTIVE_ENTITY_ELEM_NAME=t.IS_ACTIVE_ENTITY_ELEM_NAME=t.TYPE_NAME_OF_BINDING_PARAMETER=t.RETURN_PARAM_NAME=void 0,t.RETURN_PARAM_NAME="$Return",t.TYPE_NAME_OF_BINDING_PARAMETER="$self",t.IS_ACTIVE_ENTITY_ELEM_NAME="IsActiveEntity",t.HAS_ACTIVE_ENTITY_ELEM_NAME="HasActiveEntity",t.ENTITY_PREFIX_LOCALIZED="localized.",t.ASSOCIATION_NAME_LOCALIZED="localized";function n(e){return{metadataElementMap:e||new Map,draftNodesPerService:new Map}}t.createMetadataCollector=(e,t)=>{const a=n(e);return t&&(a.facade=t),a},t.getMetadataCollector=n;t.getMetadataElementsFromMap=e=>[...e.keys()].filter((t=>!e?.get(t)?.parentKey)).map((t=>e?.get(t)?.node)).filter((e=>void 0!==e))},99254:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getServiceNameForEntity=t.getAssociation=void 0;const a=n(84620);function o(e){let t,n=!1;if(t=e,t.cardinality||(t._origin?.cardinality?t=t._origin:t.type?._artifact?.cardinality&&(t=t?.type?._artifact)),t?.cardinality?.targetMax){const e=t.cardinality.targetMax;n="string"===e.literal&&"*"===e.val}return n}t.getAssociation=function(e,t){let n;if(e){const r=e?._effectiveType;let i;"element"===r?.kind&&(i=r?.target?._artifact,i?.name&&["entity","view"].includes(i?.kind)&&(n={target:(0,a.getNameObj)(i,t).absolute,isToMany:o(r),isComposition:function(e,t){if(e?.type?._artifact)return"cds.Composition"===(0,a.getNameObj)(e.type?._artifact,t).absolute;return!1}(e,t)}))}return n};t.getServiceNameForEntity=(e,t)=>{let n=!1;const o=(0,a.getNameObj)(e,t?.compiler).absolute.split(".");o.pop();let r="";for(let e=0;e<o.length&&!n;e++)r+=r?"."+o[e]:o[e],n="service"===t?.definitions[r].kind;return n?r:""}},57639:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildGhostFiles=t.toPropagatedTargetMap=void 0;const a=n(85727),o=n(41810),r=n(57310),i=n(84620),s=n(15613),l=n(5836),p=["element","entity","type","view","action","function"],c=new Map;function u(e,t,n,a,o,r=!1){const p=[n,...a].join("/");if(!e.visitedTargetMap[p]&&(!e.existingTargetMap||e.existingTargetMap.has(p))){e.visitedTargetMap[p]=!0;const g=function(e,t){return Object.keys(e).filter((e=>e.startsWith("@"))).map((t=>e[t])).filter((e=>"prop"===e.$inferred||t)).reduce(((e,t)=>Array.isArray(t)?[...e,...t]:[...e,t]),[])}(o,r);!function(e,t,n,a){t.forEach((t=>{const o=t.location||t.name?.location;if(o){const t=function(e,t){let n=function(e){const t=d(e);if(c.has(t))return c.get(t);return}(t)||"";if(n)return n;const a=(0,s.locationToRange)(t),o=function(e,t){let n=[];const a=Object.keys(e.sources).find((n=>e.sources[n].location?.file===t.file));if(a){const t=e.sources[a];n=Object.keys(t.artifacts||{}).map((e=>t.artifacts[e])),n.push(...m(n)),t.extensions&&t.extensions.length&&n.push(...t.extensions)}return n}(e,t);if(o.length)for(const t of o.filter((e=>"using"!==e.kind))){const o=n=>(0,i.getNameObj)(n,e.compiler).absolute+(["action","function"].includes(t.kind)?"()":"");if(n=y(t,a,e.compiler,o),n||(n=f(e,t,a)),n)break}return c.set(d(t),n),n}(e,o);if(t&&t!==n){o.file&&a.sourceUris.add(o.file);const r=(0,l.convertNameToEdmxInternal)(t,e),i=(0,l.convertNameToEdmxInternal)(n,e);a.propTargetMap[r]=a.propTargetMap[r]??{},a.propTargetMap[r][i]=!0}}}))}(t,g,p,e);const h=o._effectiveType;if(h){const n="element"===h.kind&&h.target&&h.target._artifact;n&&["entity","view"].includes(n.kind)&&n.name&&u(e,t,(0,i.getNameObj)(n,t.compiler).absolute,[],n,!0)}Object.keys(h?.elements??{}).forEach((o=>{h?.elements?.[o]&&u(e,t,n,[...a,o],h.elements[o],r)}))}}function m(e){const t=[];for(const n of e)t.push(...Object.keys(n.artifacts||{}).map((e=>n?.artifacts?.[e])));return t.length?[...t,...m(t)]:t}t.toPropagatedTargetMap=(e,t,n)=>{const a={propTargetMap:{},existingTargetMap:void 0,visitedTargetMap:{},sourceUris:new Set};if(c.clear(),n&&n.length>0)a.existingTargetMap=new Set,function(e,t,n){const a=[];t.forEach((e=>{a.push(...e.content.targets??[])})),a.forEach((e=>n?.existingTargetMap?.add(e.name))),a.forEach((t=>{const a=t.name.split("/"),o=a.shift(),r=[],i=e.definitions[o];if(i){let t=!1,s=i,l=!1;for(;s&&a.length;){t=t||p.includes(s.kind),t&&u(n,e,o,r,s,l);const i=a.shift();s=(s._effectiveType?.elements??{})[i],s&&(l=l||s&&s._effectiveType!==s&&"prop"===s.type?.$inferred),r.push(i)}s&&u(n,e,o,r,s,l)}}))}(e,n,a);else{const n=function(e,t){const n=[];if(e){if("service"===t.definitions[e]?.kind){const a=Object.keys(t.definitions[e].artifacts??{}).map((n=>t?.definitions?.[e]?.artifacts?.[n]));n.push(...a.filter((e=>p.includes(e.kind))))}}else{const e=m(Object.keys(t.definitions??{}).map((e=>t.definitions[e])));n.push(...e.filter((e=>p.includes(e.kind))))}return n}(t,e);n.forEach((t=>{const n=(0,i.getNameObj)(t,e.compiler).absolute+(["action","function"].includes(t.kind)?"()":"");u(a,e,n,[],t,!1),function(e,t,n,a){Object.keys(e.elements||{}).forEach((o=>{const r=e?.elements?.[o];r&&u(t,a,n,[(0,i.getNameObj)(r,a.compiler).element],r)}))}(t,a,n,e),function(e,t,n,a){Object.keys(e.actions||{}).forEach((o=>{const r=e?.actions?.[o],s=(e=>{const t=e.split(".");return t.pop(),t.join(".")})(n);if(r){const e=`${s}.${(0,i.getNameObj)(r,a.compiler).action}(${n})`;u(t,a,e,[],r),Object.keys(r.params||{}).forEach((n=>{const o=r?.params?.[n];o&&u(t,a,e,[(0,i.getNameObj)(o,a.compiler).param],o)}))}}))}(t,a,n,e);for(const o of Object.keys(t.params||{})){const r=t?.params?.[o];if(r){const t=(0,i.getNameObj)(r,e.compiler).param;u(a,e,n,[t],r)}}}))}return{propagationMap:a.propTargetMap,sourceUris:a.sourceUris}};function d(e){const{start:t,end:n}=(0,s.locationToRange)(e)||a.Range.create(0,0,0,0);return`${e?.file} ${t.line}:${t.character}-${n.line}:${n.character}`}const y=(e,t,n,a)=>{const r=((e,t)=>(e.$annotations??[]).find((e=>!!e?.location&&(0,o.rangeContained)((0,s.locationToRange)(e.location),t))))(e,t);if(r){const t=e?.name?._artifact||e;if((0,i.getNameObj)(t,n)?.absolute)return a(t)}return""};function g(e,t,n,a){let o="";const r=n?.actions?.[e],s=function(e,t){return(0,i.getNameObj)(e,t).action}(r,t.compiler);if(s){const e=e=>(0,i.getNameObj)(e,t.compiler).absolute+(["action","function"].includes(n.kind)?"()":"");if(o=y(r,a,t.compiler,e),!o)for(const n of Object.keys(r.params||{})){const i=r?.params?.[n];if(o=y(i,a,t.compiler,e),o)break}}return o}function f(e,t,n){let a;if(a=function(e,t,n){let a="";for(const o of Object.keys(t.elements||{})){const r=t?.elements?.[o];if(r&&(a=y(r,n,e.compiler,(t=>[(0,i.getNameObj)(t,e.compiler).absolute,(0,i.getNameObj)(t,e.compiler).element].join("/")))),a)break}return a}(e,t,n),!a){if((0,i.getNameObj)(t,e.compiler).absolute)for(const o of Object.keys(t.actions||{}))if(a=g(o,e,t,n),a)break}return a||(a=function(e,t,n){let a="";for(const r of Object.keys(t.params||{})){const s=t?.params?.[r],l=t=>n=>[t,(0,i.getNameObj)(n,e.compiler).param].join("/"),p=(o=t,(0,i.getNameObj)(o,e.compiler).absolute+(["action","function"].includes(t.kind)?"()":""));if(a=y(s,n,e.compiler,l(p)),a)break}var o;return a}(e,t,n)),a}t.buildGhostFiles=function(e,n){const a={},{propagationMap:i,sourceUris:s}=(0,t.toPropagatedTargetMap)(e,"",n);return[...s.values()].forEach((e=>{const t=e.indexOf("node_modules"),o=t>-1?e.slice(t):e,s=n.filter((e=>{const n=(0,r.fileURLToPath)(e.uri);return!(-1===t&&n.includes("node_modules"))&&n.endsWith(o)})).sort(((e,t)=>e.uri.length-t.uri.length))[0];if(!s)return;const l=s.content.targets,p=[];l.forEach((e=>{i[e.name]&&Object.keys(i[e.name]).forEach((t=>{const n=Object.assign({},e);n.name=t,p.push(n)}))})),a[s.uri]=Object.assign({},s.content),a[s.uri].targets=p})),n.filter((e=>!!a[e.uri])).map((e=>({uri:o.GHOST_FILENAME_PREFIX+e.uri,content:a[e.uri],serviceName:"default"})))}},48516:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.locationToRange=t.getTextForLocationRange=t.getStartLineColFromLocation=void 0;var r=n(15613);Object.defineProperty(t,"getStartLineColFromLocation",{enumerable:!0,get:function(){return r.getStartLineColFromLocation}}),Object.defineProperty(t,"getTextForLocationRange",{enumerable:!0,get:function(){return r.getTextForLocationRange}}),Object.defineProperty(t,"locationToRange",{enumerable:!0,get:function(){return r.locationToRange}}),o(n(35794),t)},15613:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStartLineColFromLocation=t.getTextForLocationRange=t.locationToRange=void 0;const a=n(72307);t.locationToRange=function(e){let{line:t,col:n,endLine:o,endCol:r}=e||{};return t=t||1,n=n||1,o=o||t||1,r=r||n||1,e?a.Range.create(t-1,n-1,o-1,r-1):void 0};t.getTextForLocationRange=(e,t)=>{if(!(e&&e.col&&e.line&&e.endCol))return"";if(e.line>e.endLine)return"";const n=t.split("\n");if(e.endLine&&e.line!==e.endLine){let t=n[e.line-1].substring(e.col-1)+"\n";for(let a=e.line+1;a<e.endLine;a++)t+=n[a-1]+"\n";return t+=n[e.endLine-1].substring(0,e.endCol-1),t}{const t=n[e.line-1];return t.length<e.endCol?function(e,t,n){let a=t.substring(e.col-1,e.endCol-1);const o=e.endCol-e.col;let r=1;for(;a.length<o;){const t=n[e.line-1+r];if(a+="\n",t){const e=o-a.length;e<t.length?a+=t.substring(0,e):a+=t.substring(0)}r++}return a}(e,t,n):t.substring(e.col-1,e.endCol-1)}};t.getStartLineColFromLocation=e=>({line:e?.line||0,col:e?.col?e.col-1:-1})},35794:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findUsing=void 0;const a=n(41810),o=n(15613);t.findUsing=function(e,t){return(e||[]).find((e=>{if(e.location&&t.location?.line){const n=a.Position.create(t.location.line-1,t.location.col);return(0,a.positionContained)((0,o.locationToRange)(e.location),n)}return!1}))}},84620:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNameObj=void 0,t.getNameObj=function(e,t){return e?.name?.absolute?e.name:e?.name?t?.getArtifactName(e):void 0}},89273:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initI18n=t.i18n=void 0;const o=a(n(99348)),r=a(n(52673));t.i18n=o.default.createInstance(),t.initI18n=async function(){await t.i18n.init({resources:{en:{translation:r.default}},lng:"en",fallbackLng:"en",joinArrays:"\n\n"})}},19311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initI18n=t.TARGET_TYPE=t.printEdmJson=t.indent=t.printCsdlNode=t.printPrimitiveValue=t.printTarget=t.resolveTarget=t.PrintPattern=t.print=t.toAbsoluteUriString=t.adjustCdsTermNames=t.toTargetMap=t.toAnnotationFile=void 0;var a=n(32588);Object.defineProperty(t,"toAnnotationFile",{enumerable:!0,get:function(){return a.toAnnotationFile}}),Object.defineProperty(t,"toTargetMap",{enumerable:!0,get:function(){return a.toTargetMap}}),Object.defineProperty(t,"adjustCdsTermNames",{enumerable:!0,get:function(){return a.adjustCdsTermNames}}),Object.defineProperty(t,"toAbsoluteUriString",{enumerable:!0,get:function(){return a.toAbsoluteUriString}});var o=n(64056);Object.defineProperty(t,"print",{enumerable:!0,get:function(){return o.print}}),Object.defineProperty(t,"PrintPattern",{enumerable:!0,get:function(){return o.PrintPattern}}),Object.defineProperty(t,"resolveTarget",{enumerable:!0,get:function(){return o.resolveTarget}}),Object.defineProperty(t,"printTarget",{enumerable:!0,get:function(){return o.printTarget}}),Object.defineProperty(t,"printPrimitiveValue",{enumerable:!0,get:function(){return o.printPrimitiveValue}}),Object.defineProperty(t,"printCsdlNode",{enumerable:!0,get:function(){return o.printCsdlNode}});var r=n(81498);Object.defineProperty(t,"indent",{enumerable:!0,get:function(){return r.indent}});var i=n(25411);Object.defineProperty(t,"printEdmJson",{enumerable:!0,get:function(){return i.printEdmJson}});var s=n(95368);Object.defineProperty(t,"TARGET_TYPE",{enumerable:!0,get:function(){return s.TARGET_TYPE}});var l=n(89273);Object.defineProperty(t,"initI18n",{enumerable:!0,get:function(){return l.initI18n}})},64056:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printPrimitiveValue=t.printCsdlNode=t.print=t.printTarget=t.resolveTarget=t.PrintPattern=void 0;const a=n(41810),o=n(22920),r=n(25411),i=n(58170);var s;!function(e){e.artifact="artifact",e.element="element",e.parameter="parameter",e.boundAction="boundAction",e.boundParameter="boundParameter"}(s||(t.PrintPattern=s={}));t.resolveTarget=e=>{let t,n="",a="",o=!1;const r=e.split("/"),i=r.findIndex((e=>e.indexOf("(")>0&&e.indexOf("(")<e.indexOf(")")));i>=0&&r[i].indexOf("()")<0&&(o=!0),n=r[0];const s=r.slice(1);if(i<0)t=1===r.length?"artifact":"element";else if(o){a=n.split("(")[0].split(".").pop(),n=n.match(/\((.{0,127})\)/).pop(),t=i===r.length-1?"boundAction":"boundParameter"}else n=n.split("(")[0],t=i===r.length-1?"artifact":"parameter";return{rootElementName:n,boundActionFunctionName:a,printPattern:t,childSegments:s}};t.printTarget=e=>{const n=(0,t.resolveTarget)(e.name),o=n.rootElementName,r=n.childSegments,s=n.boundActionFunctionName,p={...a.printOptions,useSnippetSyntax:!1};let c=[...e.terms.map((e=>l(e,p)))].join(",\n")+"\n";return r&&0!==r.length?1===r.length&&(c=s?b(e,c,o,s,r[0]):e.terms.length>1?`annotate ${o} with {\n${r[0]} @(${c})};\n`:`annotate ${o} with {\n${r[0]} @${c}};\n`):c=s?b(e,c,o,s):`annotate ${o} with @(\n${c});\n`,c=(0,i.indent)(c),c};t.print=(e,t=a.printOptions,n=!0)=>{if(Array.isArray(e)){const a=e.map((e=>l(e,t)+",")).join("\n");return n?(0,i.indent)(a):a}return n?(0,i.indent)(l(e,t)):l(e,t)};const l=(e,n)=>e.type===a.ELEMENT_TYPE&&"Annotation"===e.name?c(e,!1,n):(0,t.printCsdlNode)(e,n),p=e=>e&&"string"==typeof e?e.replace(/'/g,"''"):e;t.printCsdlNode=(e,t)=>{switch(e.type){case a.ELEMENT_TYPE:return"Record"===e.name?v(e,t):c(e,!0,t);case a.TEXT_TYPE:return p(e.text)}return""};const c=(e,t,n)=>{const a=u(e,t,n);if("Annotation"===e.name||"PropertyValue"===e.name){const n=m(e,t);return void 0===a?(0,o.keyAlone)(n):(0,o.valuePair)(n,a)}return a},u=(e,t,n)=>{const a=(e.content||[]).filter(g),r=y(e,n);if(a.length){const e=(0,o.valuePair)(f(n,"$value"),r),t=a.map((e=>c(e,!0,n)));return(0,o.struct)([e,...t])}return r},m=(e,t)=>{switch(e.name){case"Annotation":return E(e,t);case"PropertyValue":return T(e)}return""},d=e=>n=>{const a=(0,t.printCsdlNode)(n,e);return e.useSnippetSyntax&&a.startsWith("$")?{placeholder:!0,value:a}:a},y=(e,n)=>{switch(e.name){case"Annotation":case"PropertyValue":return h(e,n);case"Collection":{const t=(e.content??[]).filter((e=>e.type===a.ELEMENT_TYPE||""!==e.text.trim())).map(d(n));return(0,o.collection)(t)}case"Null":return(0,t.printPrimitiveValue)(e.name,"");case"If":case"Not":case"Apply":return(0,r.printEdmJson)(e,{...n,includeEdmJson:!0,removeRootElementContainer:!1,skipIndent:!0});default:return e.content&&e.content.length>0?e.content.map((o=>o.type===a.TEXT_TYPE?(0,t.printPrimitiveValue)(e.name,o.text):(0,t.printCsdlNode)(o,n))).join(""):""}},g=e=>e.type===a.ELEMENT_TYPE&&"Annotation"===e.name,f=(e,t)=>e.useSnippetSyntax?t.replace(/\$/g,"\\$"):t,h=(e,n)=>{const i=(e.content??[]).find((e=>e.type===a.ELEMENT_TYPE&&"Annotation"!==e.name))??(e.content??[]).find((e=>e.type!==a.ELEMENT_TYPE&&""!==e.text.trim()));if(i?.type===a.ELEMENT_TYPE&&["If","Not","Apply"].includes(i.name))return(0,r.printEdmJson)(i,{...n,includeEdmJson:!0,removeRootElementContainer:!1,skipIndent:!0});if(i)return(0,t.printCsdlNode)(i,n);const s=(e=>{const n=e.attributes??{},{value:a,placeholder:r}=Object.keys(n).reduce(((e,a)=>o.PRIMITIVE_VALUE_ATTRIBUTE_NAMES.has(a)?{...e,value:(0,t.printPrimitiveValue)(a,n[a].value)}:a.startsWith("$")?{...e,placeholder:a}:e),{});return a||r||void 0})(e);return s||void 0},T=e=>(e.attributes??{}).Property?.value??"",P=(e,t)=>e?(0,o.delimitedIdentifier)(`@${t}`):t,E=(e,t)=>{const n=e.attributes??{},{term:a,qualifier:o}=Object.keys(n).reduce(((a,o)=>"Term"===o?{...a,term:P(t,e.attributes[o].value)}:"Qualifier"===o?{...a,qualifier:n[o].value}:a),{});return a?o?`${a} #${o}`:a:""},v=(e,t)=>{const n=e.content??[],r=void 0!==n.find((e=>e.type===a.ELEMENT_TYPE&&"Annotation"!==e.name)),i=n.filter((e=>!r&&e.type!==a.ELEMENT_TYPE||e.type===a.ELEMENT_TYPE&&"Annotation"!==e.name)).map(d(t)),s=n.filter(g).map((e=>c(e,!0,t))),l=e.attributes?e.attributes.Type:void 0;if(l&&l.value){const e=(0,o.valuePair)(f(t,"$Type"),`'${l.value}'`);return(0,o.struct)([e,...i,...s])}return(0,o.struct)([...i,...s])};function b(e,t,n,a,o){let r=`annotate ${n} with actions {\n${a} `;return e.terms.length>1?r+=o?`(\n${o} @(${t}))\n};`:`@${t}};`:r+=o?`(\n${o} @${t})\n};`:`@${t}};`,r}t.printPrimitiveValue=(e,t)=>{let n,a;switch(e){case"Bool":case"Decimal":case"Duration":case"Float":case"Int":n=t;break;case"Null":n=o.CDS_NULL_EXPRESSION_LITERAL;break;case"DateTimeOffset":case"TimeOfDay":case"Date":case"Guid":case"Binary":case"AnnotationPath":n=(0,o.stringLiteral)(t);break;case"String":n=(0,o.stringLiteral)(p(t));break;case"EnumMember":a=t.split(" "),a.length>1?(n=a.map((e=>"#"+e.split("/").pop())).join(", "),n=`[ ${n} ]`):n="#"+t.split("/").pop();break;case"ModelElementPath":case"NavigationPropertyPath":case"PropertyPath":case"Path":n=(r=t).indexOf("@")>=0?(0,o.delimitedIdentifier)(r):r.split("/").join(".")}var r;return n}},25411:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printEdmJson=void 0;const a=n(41810),o=n(58170),r=n(22920);function i(e,t){return`${t.useSnippetSyntax?"\\":""}$${e}`}function s(e,t,n=!1){switch(e.type){case a.ELEMENT_TYPE:return function(e,t,n){if("String"===e.name)return function(e){if(e.content&&e.content[0]?.type===a.TEXT_TYPE)return(0,r.stringLiteral)(e.content[0].text);return(0,r.stringLiteral)("")}(e);let o="";e?.content?.[0]?.type===a.TEXT_TYPE&&(o=e.content[0].text.trim());const l=function(e,t){return(e??[]).filter((e=>"text"!==e.type||""!==e.text.trim())).map((e=>e.type===a.TEXT_TYPE&&e.text.startsWith("$")?{value:e.text,placeholder:!0}:s(e,t)))}(e.content,t),p=r.PRIMITIVE_VALUE_ATTRIBUTE_NAMES.has(e.name)?(0,r.stringLiteral)(o):(0,r.collection)(l),c=(0,r.valuePair)(i(e.name,t),p),u=function(e,t){return Object.keys(e??{}).map((n=>n.startsWith("$")?{value:(0,r.keyAlone)(n),placeholder:!0}:(0,r.valuePair)(i(n,t),(0,r.stringLiteral)(e[n].value))))}(e.attributes,t),m=[c,...u];if(n&&t.removeRootElementContainer)return(0,r.list)(m,!1).join("\n");return(0,r.struct)(m)}(e,t,n);case a.TEXT_TYPE:return e.text}return""}t.printEdmJson=function(e,t){const n=s(e,t,!0),a=t.includeEdmJson&&!t.removeRootElementContainer?function(e,t){const n=(0,r.valuePair)(i("edmJson",t),e);return(0,r.struct)([n])}(n,t):n;return t.skipIndent?a:(0,o.indent)(a)}},58170:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.indent=void 0;const n=new Set(["[","{","("]),a=new Set(["]","}",")"]);function o(e,t){return`${"    ".repeat(t)}${e}`}function r(e){let t=0;for(const o of e)n.has(o)?t++:a.has(o)&&t--;return t}t.indent=function(e,t={level:0,skipFirstLine:!1}){let n=t.level;const a=e.split("\n");for(let e=0;e<a.length;e++){const i=a[e],s=r(i);s<0&&(n+=s),t.skipFirstLine&&0===e?n+=s:(n>0&&(a[e]=o(i,n)),s>0&&(n+=s))}return a.join("\n")}},81498:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printTarget=t.printPrimitiveValue=t.printCsdlNode=t.print=t.indent=void 0;var a=n(58170);Object.defineProperty(t,"indent",{enumerable:!0,get:function(){return a.indent}});var o=n(64056);Object.defineProperty(t,"print",{enumerable:!0,get:function(){return o.print}}),Object.defineProperty(t,"printCsdlNode",{enumerable:!0,get:function(){return o.printCsdlNode}}),Object.defineProperty(t,"printPrimitiveValue",{enumerable:!0,get:function(){return o.printPrimitiveValue}}),Object.defineProperty(t,"printTarget",{enumerable:!0,get:function(){return o.printTarget}})},22920:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CDS_NULL_EXPRESSION_LITERAL=t.keyAlone=t.valuePair=t.delimitedIdentifier=t.stringLiteral=t.collection=t.struct=t.container=t.list=t.PRIMITIVE_VALUE_ATTRIBUTE_NAMES=void 0,t.PRIMITIVE_VALUE_ATTRIBUTE_NAMES=new Set(["Bool","Decimal","Duration","Float","Int","Null","DateTimeOffset","TimeOfDay","Date","String","EnumMember","Guid","Binary","AnnotationPath","ModelElementPath","NavigationPropertyPath","PropertyPath","Path"]);t.list=(e,t=!0)=>e.map(((e,n,a)=>{const o=n+1!==a.length||t?",":"";return"string"==typeof e?e+o:e.placeholder?e.value:e.value+o}));t.container=(e,n,a)=>[e,...(0,t.list)(a),n].join("\n");t.struct=e=>(0,t.container)("{","}",e);t.collection=e=>(0,t.container)("[","]",e);t.stringLiteral=e=>-1!==e.indexOf("\n")?`\`\`\`${e}\`\`\``:`'${e}'`;t.delimitedIdentifier=e=>`![${e}]`;t.valuePair=(e,t)=>`${e} : ${t}`;t.keyAlone=e=>`${e}`,t.CDS_NULL_EXPRESSION_LITERAL="null"},83607:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertAnnotation=void 0;const a=n(83376),o=n(6291),r=n(44900);t.convertAnnotation=function(e,t){const n=new a.VisitorState(t.vocabularyService);t.position&&(n.position=t.position);const i=[];"annotation-group"===e.type&&n.pushContext({groupName:e.name.value});const s="annotation"===e.type?[e]:e.items.items;for(const e of s){const t={...n.context},a=o.visitor.visit(n,e);n.pushContext(t),a&&i.push(a)}const l={terms:i,diagnostics:n.diagnostics,pathSet:n.pathSet},p=t.position?(0,r.findNode)(e,i,t.position):void 0;return p&&(l.pointer=p.pointer,l.nodeRange=p.range),l}},22053:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPropertyAttribute=t.createQualifierAttribute=t.createTermAttribute=void 0;const a=n(85727);function o(e){return(t,n)=>(0,a.createAttributeNode)(e,t,void 0,n)}t.createTermAttribute=o("Term"),t.createQualifierAttribute=o("Qualifier"),t.createPropertyAttribute=o("Property")},44900:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findNode=void 0;const a=n(97765),o=n(41810);const r=new class PositionVisitor{visit(e,t,n){if(Array.isArray(e))for(let a=0;a<e.length;a++){const o=e[a],r=this.visit(o,t,[a.toString()]);if(r)return{path:[...n,...r.path],range:r.range}}else switch(e.type){case o.TEXT_TYPE:return this.visitText(e,t,n);case o.ELEMENT_TYPE:return this.visitElement(e,t,n);case o.ATTRIBUTE_TYPE:return this.visitAttribute(e,t,n)}}visitText(e,t,n){const{position:a}=t;if((0,o.positionContained)(e.range,a))return{path:[...n,"text"],range:e.range}}visitAttribute(e,t,n){const{position:a}=t;return(0,o.positionContained)(e.nameRange,a)?{path:[...n,"name"],range:e.nameRange}:(0,o.positionContained)(e.valueRange,a)?{path:[...n,"value"],range:e.valueRange}:void 0}visitElement(e,t,n){const{position:a}=t;if((0,o.positionContained)(e.range,a)){const r=Object.keys(e.attributes);if((0,o.positionContained)(e.nameRange,a))return{path:[...n,"name"],range:e.nameRange};for(const a of r){const o=e.attributes[a],r=this.visit(o,t,["attributes",a]);if(r)return{path:[...n,...r.path],range:r.range}}if((0,o.positionContained)(e.contentRange,a))return this.visitContent(e,t,n)}}visitContent(e,t,n){const{position:a}=t;for(let a=0;a<e.content.length;a++){const o=e.content[a],r=this.visit(o,t,["content",a.toString()]);if(r)return{path:[...n,...r.path],range:r.range}}const r=e.content.findIndex((e=>e.range&&(0,o.isBefore)(a,e.range.start,!0)));return{path:[...n,`$${-1===r?e.content.length:r}`],range:e.contentRange}}};t.findNode=function(e,t,n){const i=r.visit(t,{position:n},[""]);if(i){const r=function(e,t,n,r,i){const s=(0,a.getAstNodes)(t,e),l=s?.[s.length-1];if(!l)return r;const p=function(e,t){const[,n,...a]=t;let o=e[n];const r=[];for(const e of a)o=o[e],r.push(o);return r}(n,r.path.filter((e=>!e.startsWith("$"))));if(r=function(e,t,n){if(-1===e.findIndex((e=>!Array.isArray(e)&&e.type===a.RECORD_PROPERTY_TYPE&&e.name.value===a.ReservedProperties.EdmJson)))return t;if(t.path[t.path.length-1].startsWith("$")){const r=e[e.length-1];if(Array.isArray(r))return t;const i=(0,a.nodeRange)(r,!1);if(r.type!==a.RECORD_TYPE||!i)return t;const s=r.properties[0];return void 0===s?t:s.range?.start&&(0,o.isBefore)(n,s.range?.start)?{path:[...t.path.slice(0,-3),"$0"],range:i}:{path:[...t.path.slice(0,-1),"attributes"],range:i}}return t}(s,r,i),r=function(e,t,n,r){const[i,,s]=t.slice(-4);if(i?.type!==o.ELEMENT_TYPE||"EnumMember"!==i.name)return n;const l=function(e,t){for(let n=e.length-1;n>=0;n--){const a=e[n];if(!Array.isArray(a)&&a.type===t)return a}return}(e,a.COLLECTION_TYPE);if(!l)return n;const p=l.items.find((e=>(0,o.positionContained)(e.range,r)));if(s?.type!==o.TEXT_TYPE||p?.type!==a.ENUM_TYPE||void 0===p.range)return n;const c=s.text.indexOf(p.path.value),u=Math.max(p.range.start.character-r.character,0),m=c+u;if(void 0!==p.path.range)return{path:[...n.path,`$${m}`],range:p.path.range};return n}(s,p,r,i),Array.isArray(l))return r;switch(l.type){case a.RECORD_PROPERTY_TYPE:case a.ANNOTATION_TYPE:return function(e,t,n){const r=t.path.slice(-1)[0];if(e.type===a.RECORD_PROPERTY_TYPE&&e.name.value===a.ReservedProperties.Value)return t;if(r?.startsWith("$")&&e.colon?.range?.end&&!(0,o.isBefore)(n,e.colon.range.end)&&e.value?.range?.start&&(0,o.isBefore)(n,e.value.range.start,!0))return{path:t.path.slice(0,-1)};return t}(l,r,i);case a.NUMBER_LITERAL_TYPE:case a.STRING_LITERAL_TYPE:return function(e,t,n){const o=(0,a.nodeRange)(e,!1);if("text"!==t.path.slice(-1)[0])return t;if(!o)return t;const r=n.character-o.start.character;return{path:[...t.path,`$${r}`],range:t.range}}(l,r,i);case a.ENUM_TYPE:return function(e){if(e.path[e.path.length-1].startsWith("$"))return e;return{path:e.path.slice(0,-1),range:e.range}}(r);case a.EMPTY_VALUE_TYPE:return function(e,t){if(e.range)return{path:t.path,range:e.range};return t}(l,r);case a.PATH_TYPE:return function(e,t,n){let a=0;if("text"!==t.path.slice(-1)[0])return t;if(""===e.value)return{path:[...t.path,"$0"],range:t.range};for(const r of e.segments){if(r.range&&(0,o.positionContained)(r.range,n)){const o=e.segments.filter(((e,t)=>t<a)).map((e=>e.value)).join("/"),i=0===a?0:1,s=n.character-r.range.start.character;return{path:[...t.path,`$${o.length+i+s}`],range:r.range}}a++}return t}(l,r,i);default:return r}}((0,a.findAnnotationNode)(e,{position:n,includeDelimiterCharacters:!1}),e,t,i,n);return{pointer:r.path.join("/"),range:r.range}}}},97563:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertFlattenedPath=void 0;const a=n(41810),o=n(22053),r=n(41607),i=n(93318);t.convertFlattenedPath=function(e,t,n){let s,l;const p=function(e,t,n){const s=[],l=e.context.recordType??e.context.termType,p=n?void 0:t[t.length-1];let c=0;for(;c<t.length;){const u=t[c],m=(0,i.createRange)(u.range?.start,n?.end??p?.range?.end);if(u.value.startsWith("@")){const n=u.value.substring(1),l=t[c+1],p=l?`${n}.${l.value}`:n,d=(0,i.createRange)(u.range?.start,l.range?.end),y=(0,a.createElementNode)({name:"Annotation",range:m,attributes:{Term:(0,o.createTermAttribute)(p,d)},content:[]});s.push({kind:"annotation",name:p,vocabularyObject:(0,r.getTerm)(e.vocabularyService,n,l.value),element:y}),c+=2;continue}const d=(0,a.createElementNode)({name:"PropertyValue",range:m,contentRange:m,attributes:{Property:(0,o.createPropertyAttribute)(u.value,u.range)}}),y=s[s.length-1]?.vocabularyObject?.type??l;s.push({kind:"property",name:u.value,vocabularyObject:(0,r.getPropertyType)(e.vocabularyService,y,u.value),element:d}),c++}const u=s[s.length-1];u&&(n?u.element.contentRange=(0,i.copyRange)(n):delete u.element.contentRange);return s}(e,t,n?.range);for(const e of p){if(l){const t=(0,a.createElementNode)({name:"Record",range:e.element.range,content:[e.element],contentRange:e.element.range});l.contentRange=t.range,l.content.push(t)}else s=e.element;l=e.element}const c=p[p.length-1],u={valueType:c.vocabularyObject?.type,isCollection:c.vocabularyObject?.isCollection};if("annotation"===c.kind?u.termType=c.vocabularyObject?.type:u.propertyName=c.element.attributes.Property.value,e.pushContext({...e.context,...u}),s&&l)return{root:s,leaf:l}}},22613:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSubtree=void 0,t.isSubtree=function(e){return void 0===e.type}},89932:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.annotationHandler=void 0;const a=n(97765),o=n(85727),r=n(97563),i=n(41607),s=n(22053);t.annotationHandler={type:a.ANNOTATION_TYPE,convert:function(e,t){const n=(0,o.createElementNode)({name:"Annotation",range:(0,a.nodeRange)(t,!1)}),l=e.elementStack.length>0,p=t.term.segments.map(((e,t)=>0===t&&l?e.value.slice(1):e.value)),c=e.context.groupName&&!l?[e.context.groupName,...p.slice(0,1)].join("."):p.slice(0,2).join(".");n.attributes.Term=(0,s.createTermAttribute)(c,function(e,t,n){const r=e.context.groupName&&!n?t.term.segments.slice(0,1):t.term.segments.slice(0,2);if(r.length===t.term.segments.length)return(0,a.nodeRange)(t.term,!1);const i=r[0],s=r.slice(-1)[0];if(!i||!s)return;const l=(0,a.nodeRange)(i,!1)?.start,p=(0,a.nodeRange)(s,!1)?.end;if(!l||!p)return;return o.Range.create(l,p)}(e,t,l));const[u,m]=c.split("."),d=(0,i.getTerm)(e.vocabularyService,u,m);l?e.pushContext({valueType:d?.type,termType:d?.type,isCollection:d?.isCollection}):d&&e.pushContext({...e.context,valueType:d?.type,termType:d.type,isCollection:d.isCollection});t.qualifier&&(n.attributes.Qualifier=(0,s.createQualifierAttribute)(t.qualifier.value,(0,a.nodeRange)(t.qualifier,!1)));if(t.value&&(n.contentRange=(0,a.nodeRange)(t.value,t.value.type!==a.EMPTY_VALUE_TYPE),t.colon)){const e=t.colon.range.end;n.contentRange.start=o.Position.create(e.line,e.character)}const y=function(e,t,n){const i=function(e,t){const n=e.elementStack.length>0,a=e.context.groupName&&!n?1:2;return t.term.segments.slice(a)}(e,t);if(i.length){const s=(0,r.convertFlattenedPath)(e,i,t.value);if(s){const e=s.root.range?(0,a.copyRange)(s.root.range):void 0;if("PropertyValue"===s.root.name){const t=(0,o.createElementNode)({name:"Record",range:e,contentRange:e});t.content.push(s.root),n.content.push(t)}else n.content.push(s.root);return n.contentRange=e?(0,a.copyRange)(e):void 0,{root:n,leaf:s.leaf}}}return}(e,t,n);if(y)return y;return n},getChildren:(e,t)=>t.value?[t.value]:[]}},66279:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.booleanHandler=void 0;const a=n(97765),o=n(85727);t.booleanHandler={type:a.BOOLEAN_TYPE,convert(e,t){let n="";!0===t.value?n="true":!1===t.value&&(n="false");return(0,o.createElementNode)({name:"Bool",range:(0,a.nodeRange)(t,!0),contentRange:(0,a.nodeRange)(t,!1),content:[(0,o.createTextNode)(n,(0,a.nodeRange)(t,!1))]})}}},31532:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectionHandler=void 0;const a=n(97765),o=n(85727),r=n(32217),i=n(62157);t.collectionHandler={type:a.COLLECTION_TYPE,getChildren:function(e,t){const n=e.context.valueType;if((n?e.vocabularyService.getType(n):void 0)?.kind===r.ENUM_TYPE_KIND)return[];return t.items},convert(e,t){const n=e.context.valueType,s=n?e.vocabularyService.getType(n):void 0;if(e.pushContext({...e.context,isCollection:!1}),n&&s?.kind===r.ENUM_TYPE_KIND)return(0,i.convertFlags)(e,t,n);return(0,o.createElementNode)({name:"Collection",range:(0,a.nodeRange)(t,!0),contentRange:(0,a.nodeRange)(t,!1)})}}},1299:(e,t,n)=>{"use strict";var a,o,r,i,s,l;Object.defineProperty(t,"__esModule",{value:!0}),t.EdmJsonVisitor=void 0;const p=n(41810),c=n(72307),u=n(97765),m=n(89273),d=n(91372),y=n(22613);t.EdmJsonVisitor=class EdmJsonVisitor{constructor(e){this.state=e,this.isElementPathKind=e=>["Path","PropertyPath","AnnotationPath","ModelElementPath","NavigationPropertyPath"].includes(e),this[a]=e=>{const t=(0,p.createElementNode)({name:"",range:(0,u.nodeRange)(e,!0),contentRange:(0,u.nodeRange)(e,!1)});for(let n=0;n<e.properties.length;n++){const a=e.properties[n];a.name.value.startsWith("$")&&(0===n?this.convertElementName(a,t):u.STRING_LITERAL_TYPE===a.value?.type||u.EMPTY_VALUE_TYPE===a.value?.type?this.convertAttribute(a,t):a.value?.range&&this.state.addDiagnostic({range:a.value.range,severity:c.DiagnosticSeverity.Error,message:m.i18n.t("The_attribute_value_must_be_a_string_literal")}))}if(""!==t.name)return t},this[o]=()=>{},this[r]=()=>{},this[i]=e=>{const t=(0,p.createTextNode)(e.value,(0,u.nodeRange)(e,!1));return(0,p.createElementNode)({name:"String",range:(0,u.nodeRange)(e,!0),contentRange:(0,u.nodeRange)(e,!1),content:[t]})},this[s]=e=>{let t="";!0===e.value?t="true":!1===e.value&&(t="false");return(0,p.createElementNode)({name:"Bool",range:(0,u.nodeRange)(e,!0),contentRange:(0,u.nodeRange)(e,!1),content:[(0,p.createTextNode)(t,(0,u.nodeRange)(e,!1))]})},this[l]=e=>{const t=d.numberHandler.convert(this.state,e);if(void 0!==t&&!(0,y.isSubtree)(t))return t}}visit(e){return this[e.type]?this[e.type](e):void console.warn(`No visitor function found for type ${e.type}`)}convertAttribute(e,t){if(e.value){const n=e.name.value.substring(1);t.attributes[n]=(0,p.createAttributeNode)(n,e.value?.type===u.STRING_LITERAL_TYPE?e.value.value:"",(0,u.nodeRange)(e.name,!1),e.value.range),e.value.type===u.STRING_LITERAL_TYPE&&this.isElementPathKind(n)&&this.state.addPath(e.value.value)}}convertElementName(e,t){if(t.name=e.name.value.substring(1),t.nameRange=e.name.range,e.value?.type===u.STRING_LITERAL_TYPE){const n=(0,p.createTextNode)(e.value.value,(0,u.nodeRange)(e.value,!1));t.content=[n],this.isElementPathKind(t.name)&&this.state.addPath(e.value.value)}else if(e.value?.type===u.COLLECTION_TYPE)this.convertCollection(e.value.items,t);else if(e.value){const n=this.visit(e.value);n&&t.content.push(n)}}convertCollection(e,t){for(const n of e){const e=this.visit(n);e&&t.content.push(e)}}},a=u.RECORD_TYPE,o=u.COLLECTION_TYPE,r=u.EMPTY_VALUE_TYPE,i=u.STRING_LITERAL_TYPE,s=u.BOOLEAN_TYPE,l=u.NUMBER_LITERAL_TYPE},62157:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertFlags=t.enumHandler=t.toEnumValue=t.ENUM_MEMBER_DELIMITER=t.ENUM_VALUE_DELIMITER=void 0;const a=n(97765),o=n(85727);t.ENUM_VALUE_DELIMITER=" ",t.ENUM_MEMBER_DELIMITER="/";t.toEnumValue=(e,n)=>[e,n].join(t.ENUM_MEMBER_DELIMITER),t.enumHandler={type:a.ENUM_TYPE,convert(e,n){if(!e.context.valueType)return;const r=(0,t.toEnumValue)(e.context.valueType,n.path.value),i=(0,o.createTextNode)(r,(0,a.nodeRange)(n,!1)),s=(0,a.nodeRange)(n,!0);return s&&(i.fragmentRanges=[s]),(0,o.createElementNode)({name:"EnumMember",range:(0,a.nodeRange)(n,!0),contentRange:(0,a.nodeRange)(n,!1),content:[i]})}},t.convertFlags=function(e,n,r){const i=n.items.filter((e=>e.type===a.ENUM_TYPE)),s=[],l=[];let p=!1;for(const e of i){const n=(0,t.toEnumValue)(r,e.path.value);s.push(n),e.range?l.push((0,a.copyRange)(e.range)):p=!0}const c=s.join(t.ENUM_VALUE_DELIMITER);return(0,o.createElementNode)({name:"EnumMember",range:(0,a.nodeRange)(n,!0),contentRange:(0,a.nodeRange)(n,!1),content:[(0,o.createTextNode)(c,(0,a.nodeRange)(n,!1),p?void 0:l)]})}},5373:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unknownOperatorExpressionHandler=t.incorrectExpressionHandler=t.correctExpressionHandler=void 0;const a=n(97765),o=n(85727);t.correctExpressionHandler={type:a.CORRECT_EXPRESSION_TYPE,getChildren:(e,t)=>(0,a.containsIncorrectExpressions)(t)?[]:t.operands,convert(e,t){if((0,a.containsIncorrectExpressions)(t))return;return function(e,t){const n=a.operatorMap[e.operatorName],r=n.edmName,i=r.startsWith("odata.")?"Apply":r,s=(0,o.createElementNode)({name:i,contentRange:t,range:(0,a.nodeRange)(e,!0)}),l=e.operators[0].range;"Apply"===i?s.attributes={Function:(0,o.createAttributeNode)("Function",r,void 0,l)}:s.nameRange=l;if(n.edmName&&n.edmNot){return{root:(0,o.createElementNode)({name:"Not",nameRange:l,contentRange:t,content:[s]}),leaf:s}}return s.contentRange=t,s}(t,{start:(0,a.nodeRange)(t.operands[0],!0).start,end:(0,a.nodeRange)(t.operands[t.operands.length-1],!0).end})}},t.incorrectExpressionHandler={type:a.INCORRECT_EXPRESSION_TYPE,convert(){}},t.unknownOperatorExpressionHandler={type:a.UNSUPPORTED_OPERATOR_EXPRESSION_TYPE,getChildren:()=>[],convert:(e,t)=>(0,o.createElementNode)({name:t.unsupportedOperator.value,nameRange:t.unsupportedOperator.range,range:t.unsupportedOperator.range})}},36099:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nodeHandlerConfig=void 0;const a=n(89932),o=n(31532),r=n(95925),i=n(16508),s=n(66279),l=n(62157),p=n(5373),c=n(91372),u=n(10449),m=n(93274),d=n(71056),y=n(43954);t.nodeHandlerConfig={[a.annotationHandler.type]:a.annotationHandler,[r.recordHandler.type]:r.recordHandler,[i.recordPropertyHandler.type]:i.recordPropertyHandler,[o.collectionHandler.type]:o.collectionHandler,[s.booleanHandler.type]:s.booleanHandler,[u.stringHandler.type]:u.stringHandler,[u.multiLineStringHandler.type]:u.multiLineStringHandler,[l.enumHandler.type]:l.enumHandler,[p.correctExpressionHandler.type]:p.correctExpressionHandler,[p.unknownOperatorExpressionHandler.type]:p.unknownOperatorExpressionHandler,[p.incorrectExpressionHandler.type]:p.incorrectExpressionHandler,[c.numberHandler.type]:c.numberHandler,[m.quotedLiteralHandler.type]:m.quotedLiteralHandler,[d.pathHandler.type]:d.pathHandler,[y.tokenHandler.type]:y.tokenHandler}},91372:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNumberType=t.numberHandler=void 0;const a=n(97765),o=n(85727);function r(e,t){return"Edm.Decimal"===e?"Decimal":"Edm.Double"===e||"Edm.Single"===e?"Float":"Edm.Int64"===e?"Int":"number"==typeof t?"Edm.String"===e?"String":Number.isInteger(t)?"Int":"Decimal":"String"}t.numberHandler={type:a.NUMBER_LITERAL_TYPE,convert(e,t){const n=r(e.context.valueType,t.value);return(0,o.createElementNode)({name:n,range:(0,a.nodeRange)(t,!0),contentRange:(0,a.nodeRange)(t,!0),content:[(0,o.createTextNode)(t.value.toString(),(0,a.nodeRange)(t,!1))]})}},t.getNumberType=r},71056:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pathHandler=void 0;const a=n(97765),o=n(85727),r=n(89273),i=n(73814);function s(e,t){if(!t.range)return;const n=r.i18n.t("Wrong_path_separator_0_Did_you_mean_1",{currentValue:"/",proposedValue:".",interpolation:{escapeValue:!1}}),a=o.Diagnostic.create(t.range,n,o.DiagnosticSeverity.Warning);a.data={caseCheck:{value:"/",proposedValue:".",lookupPath:[],isNamespacedValue:!1}},e.addDiagnostic(a)}t.pathHandler={type:a.PATH_TYPE,convert(e,t){const n=(e.context.valueType?(0,i.pathLikeTypeElementName)(e.context.valueType):void 0)??"Path",l=t.value.split("@").map(((e,t)=>0===t?e.replace(/\./g,"/"):e)).join("@"),p=function(e,t){const n=[...t.segments,...t.separators].sort(((e,t)=>{const n=e.range?.start?.character,a=t.range?.start?.character;if(n&&a&&n!==a)return n-a;const o=e.range?.end?.character,r=t.range?.end?.character;return o&&r?o-r:0}));return function(e,t,n){const i=[];let l=0;for(;l<n.length;l++){const t=n[l];if(t.type===a.IDENTIFIER_TYPE){if(t.value.includes("@"))break;if(!t.range)return[];const e={image:t.value,range:(0,a.copyRange)(t.range)};i.push(e)}else"/"!==t.value||t.escaped||s(e,t)}const p=function(e,t,n,i){const s=[];let l=!1,p=i;for(;p<n.length;){let e=n[p];if(!e.range)return[];const t={image:"",range:o.Range.create((0,a.copyPosition)(e.range.start),(0,a.copyPosition)(e.range.start))};for(;e?.type===a.IDENTIFIER_TYPE||"."===e?.value;)t.image+=e.value,t.range&&e.range&&(t.range.end=(0,a.copyPosition)(e.range.end)),p++,e=n[p],e?.type!==a.SEPARATOR_TYPE||"/"!==e.value||e.escaped||(l=!0);s.push(t),p++}l&&function(e,t,n,i){const s=n[i],l=n.slice(-1)[0];if(!s?.range||!l?.range)return;const p={rule:o.ODATA_PATH_SEPARATOR_RULE,message:r.i18n.t("Path_escaping_brackets_should_be_used"),range:o.Range.create((0,a.copyPosition)(s.range.start),(0,a.copyPosition)(l.range.end)),severity:o.DiagnosticSeverity.Warning},c="@"+t.value.split("@").slice(1).join("@"),u=s.type===a.IDENTIFIER_TYPE&&s.quoted?"":"![",m="]",d=c.replace(/[![\]]/g,"");p.data={value:c,proposedValue:u+d+m},e.addDiagnostic(p)}(e,t,n,i);return s}(e,t,n,l);return[...i,...p].filter((e=>e.image.length))}(e,t,n).map((e=>e.range))}(e,t);e.addPath(l);return(0,o.createElementNode)({name:n,range:(0,a.nodeRange)(t,!0),contentRange:(0,a.nodeRange)(t,!1),content:[(0,o.createTextNode)(l,(0,a.nodeRange)(t,!1),p)]})}}},93274:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quotedLiteralHandler=void 0;const a=n(97765),o=n(85727);function r(e){switch(e){case"time":return"TimeOfDay";case"date":return"Date";case"timestamp":return"DateTimeOffset";case"binary":return"Binary"}}t.quotedLiteralHandler={type:a.QUOTED_LITERAL_TYPE,convert:(e,t)=>(0,o.createElementNode)({name:r(t.kind),nameRange:(0,a.nodeRange)(t,!1),range:(0,a.nodeRange)(t,!0)})}},16508:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recordPropertyHandler=void 0;const a=n(97765),o=n(85727),r=n(97563),i=n(41607),s=n(22053);t.recordPropertyHandler={type:a.RECORD_PROPERTY_TYPE,getChildren:(e,t)=>t.value?[t.value]:[],convert(e,t){if(e.context.inValueContainer){const e=(0,o.createElementNode)({name:"Annotation",range:(0,a.nodeRange)(t,!0)});return e.attributes.Term=(0,s.createTermAttribute)(t.name.value,(0,a.nodeRange)(t.name,!1)),t.value&&(e.contentRange=(0,a.nodeRange)(t.value,!0)),e}if(1===t.name.segments.length){const n=(0,o.createElementNode)({name:"PropertyValue",range:(0,a.nodeRange)(t,!0)});n.attributes.Property=(0,s.createPropertyAttribute)(t.name.value,(0,a.nodeRange)(t.name,!1));const r=(0,i.getImplicitPropertyType)(e.vocabularyService,e.context,t.name.value)?.type;if(e.pushContext({...e.context,valueType:r,propertyName:t.name.value}),t.value&&(n.contentRange=(0,a.nodeRange)(t.value,!0),t.colon)){const e=t.colon.range.end;n.contentRange.start=o.Position.create(e.line,e.character)}return n}return(0,r.convertFlattenedPath)(e,t.name.segments,t.value)}}},95925:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recordHandler=void 0;const a=n(97765),o=n(85727),r=n(89273),i=n(1299);t.recordHandler={type:a.RECORD_TYPE,getChildren:function(e,t){const{edmJsonProperty:n,valueProperty:o}=d(t.properties);if(n)return[];if(g(e,o)){const e=[];return o?.value&&e.push(o.value),Array.prototype.push.apply(e,t.properties.filter((e=>e!==o))),t.annotations&&Array.prototype.push.apply(e,t.annotations),e}return[...t.properties.filter((e=>e.name.value!==a.ReservedProperties.Type&&e.name.value.toUpperCase()!==a.ReservedProperties.Value.toUpperCase())),...t.annotations??[]]},convert(e,t){const n=(0,o.createElementNode)({name:"Record",range:(0,a.nodeRange)(t,!0),contentRange:(0,a.nodeRange)(t,!1)}),{typeProperty:c,valueProperty:m,edmJsonProperty:f}=d(t.properties),h=function(e,t){if(e?.value?.type===a.STRING_LITERAL_TYPE&&e?.name?.value===a.ReservedProperties.Type)return e.value.value;if(t.valueType===s)return l}(c,e.context),T=p(c,e.context),P=h??T;if(f)return function(e,t){if(t&&(y(e,a.ReservedProperties.EdmJson,t),t.value&&t.name.value===a.ReservedProperties.EdmJson)){return new i.EdmJsonVisitor(e).visit(t.value)}return}(e,f);const E=g(e,m);return function(e,t,n,i){if(n){if(!i&&t.range){const n=r.i18n.t("Mandatory_property_not_provided_0",{property:a.ReservedProperties.Value});e.addDiagnostic(o.Diagnostic.create(t.range,n,o.DiagnosticSeverity.Error))}y(e,a.ReservedProperties.Value,i),function(e,t,n){const i=e.context.valueType?e.vocabularyService.getType(e.context.valueType):void 0;if(n?.name?.value===a.ReservedProperties.Value||"ComplexType"!==i?.kind||e.context.isCollection)for(const n of t.properties)n.name.range&&n.name.value.toUpperCase()!==u&&e.addDiagnostic({message:r.i18n.t("Property_is_not_allowed_here",{name:n.name.value}),range:n.name.range,severity:o.DiagnosticSeverity.Warning})}(e,t,i)}}(e,t,E??!1,m),e.pushContext({...e.context,recordType:P,inValueContainer:E}),E?void 0:(y(e,a.ReservedProperties.Type,c),void 0!==h&&(n.attributes.Type=(0,o.createAttributeNode)("Type",h,c?(0,a.nodeRange)(c.name,!0):void 0,c?.value?.type===a.STRING_LITERAL_TYPE?(0,a.nodeRange)(c.value,!1):void 0)),n)}};const s="com.sap.vocabularies.UI.v1.DataFieldAbstract",l="com.sap.vocabularies.UI.v1.DataField",p=(e,t)=>e?.value?.type===a.STRING_LITERAL_TYPE?e.value.value:t.valueType?t.valueType===s?l:t.valueType:t.termType===s?l:void 0;const c=a.ReservedProperties.Type.toUpperCase(),u=a.ReservedProperties.Value.toUpperCase(),m=a.ReservedProperties.EdmJson.toUpperCase();function d(e){const t={};for(const n of e){const e=n.name.value.toUpperCase();e===c?t.typeProperty=n:e===u?t.valueProperty=n:(e===m||e.startsWith("$EDMJ")&&n.name.value.length<=m.length)&&(t.edmJsonProperty=n)}return t}function y(e,t,n){if(n&&n.name.value!==t&&n.name.range){const a=n.name.value,i={message:r.i18n.t("Wrong_element_0_Did_you_mean_1",{currentValue:a,proposedValue:t}),range:n.name.range,severity:o.DiagnosticSeverity.Error,data:{caseCheck:{value:a,proposedValue:t,lookupPath:[],isNamespacedValue:!1}}};return e.addDiagnostic(i),!1}return!0}function g(e,t){const n=e.context.valueType?e.vocabularyService.getType(e.context.valueType):void 0;return void 0!==t||void 0!==e.context.valueType&&("ComplexType"!==n?.kind||!0===e.context.isCollection)}},10449:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiLineStringHandler=t.stringHandler=void 0;const a=n(97765),o=n(85727),r=n(73814);function i(e,t){const n=(0,r.pathLikeTypeElementName)(e.context.valueType)??"String",i=(0,o.createElementNode)({name:n,range:(0,a.nodeRange)(t,!0),contentRange:(0,a.nodeRange)(t,!1),content:[(0,o.createTextNode)((0,r.unescapeText)(t.value),(0,a.nodeRange)(t,!1),void 0,s(t))]});return"String"!==n?e.addPath(t.value):"Action"===e.context.propertyName?e.addPath("/"+t.value):"TargetProperties"===e.context.propertyName&&e.addPath(t.value),i}function s(e){if(e.type!==a.STRING_LITERAL_TYPE)return e.stripIndentation?"StripIndentation":"KeepIndentation"}t.stringHandler={type:a.STRING_LITERAL_TYPE,convert:i},t.multiLineStringHandler={type:a.MULTI_LINE_STRING_LITERAL_TYPE,convert:i}},43954:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tokenHandler=void 0;const a=n(97765),o=n(85727);t.tokenHandler={type:a.TOKEN_TYPE,convert(e,t){if("null"===t.value)return(0,o.createElementNode)({name:"Null",nameRange:(0,a.nodeRange)(t,!1),range:(0,a.nodeRange)(t,!0)})}}},69623:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertAnnotation=void 0;var a=n(83607);Object.defineProperty(t,"convertAnnotation",{enumerable:!0,get:function(){return a.convertAnnotation}})},73814:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unescapeText=t.pathLikeTypeElementName=void 0;const n=new Set(["Edm.AnnotationPath","Edm.ModelElementPath","Edm.NavigationPropertyPath","Edm.PropertyPath","Edm.AnyPropertyPath","Edm.Path"]);t.pathLikeTypeElementName=function(e){if(void 0!==e&&n.has(e)){const t=e.split(".")[1];return"AnyPropertyPath"===t?"PropertyPath":t}},t.unescapeText=function(e){return e&&"string"==typeof e?e.replace(/''/g,"'"):e}},93318:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRange=t.copyRange=t.copyPosition=void 0;const a=n(41810);t.copyPosition=e=>a.Position.create(e.line,e.character);t.copyRange=e=>e?a.Range.create((0,t.copyPosition)(e.start),(0,t.copyPosition)(e.end)):void 0;t.createRange=(e,n)=>e&&n?a.Range.create((0,t.copyPosition)(e),(0,t.copyPosition)(n)):void 0},41607:(e,t)=>{"use strict";function n(e,t,n){if(!t)return;const a=[...e.getDerivedTypeNames(t)];for(const t of a){const a=e.getComplexTypeProperty(t,n);if(a)return a}}function a(e,t){const[n]=t.split(".").slice(-1),a=e.getVocabularyNamespace(t);if(a)return[a,n].join(".")}Object.defineProperty(t,"__esModule",{value:!0}),t.getTerm=t.getFullyQualifiedType=t.getPropertyType=t.getImplicitPropertyType=void 0,t.getImplicitPropertyType=function(e,t,o){let r;return t.recordType&&(r=a(e,t.recordType)),!r&&t.termType&&(r=e.getTerm(t.termType)?.type),n(e,r,o)},t.getPropertyType=function(e,t,o){if(!t)return;return n(e,a(e,t),o)},t.getFullyQualifiedType=a,t.getTerm=function(e,t,n){const a=e.getVocabulary(t);if(a&&n){const t=[a.namespace,n].join("."),o=e.getTerm(t);if(o)return o}}},83376:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VisitorState=void 0;t.VisitorState=class VisitorState{get context(){const e=this._contextStack[this._contextStack.length-1];return e||{}}get contextDepth(){return this._contextStack.length}get diagnostics(){return this._diagnostics}get pathSet(){return this._pathSet}constructor(e,t){this.vocabularyService=e,this.position=t,this.elementStack=[],this._contextStack=[],this._diagnostics=[],this._pathSet=new Set}pushContext(e){this._contextStack.push(Object.seal({...e}))}popContext(){this._contextStack.splice(-1)}addDiagnostic(e){this._diagnostics.push(e)}addPath(e){this._pathSet.add(e)}}},6291:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.visitor=t.Visitor=void 0;const a=n(36099),o=n(22613);class Visitor{visit(e,t){const n=a.nodeHandlerConfig[t.type];if(!n)return;const r=e.contextDepth,i=n.convert(e,t),s=n.getChildren?n.getChildren(e,t):[];if(!i&&0===s.length&&0===e.elementStack.length)return;const[l,p]=function(e,t){if(void 0===t)return[void 0,e];if((0,o.isSubtree)(t))return[t.root,t.leaf];return[t,t]}(e.elementStack[e.elementStack.length-1],i);i&&e.elementStack.push(p);for(const t of s){const n=this.visit(e,t);n&&p.content.push(n)}for(i&&e.elementStack.pop();e.contextDepth>r;)e.popContext();return l}}t.Visitor=Visitor,t.visitor=new Visitor},95368:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toAnnotationFile=t.toTargetMap=t.toTarget=t.toAssignment=t.adjustCdsTermNames=t.TARGET_TYPE=void 0;const a=n(72307),o=n(97765),r=n(69623),i=n(41810);var s=n(85727);Object.defineProperty(t,"TARGET_TYPE",{enumerable:!0,get:function(){return s.TARGET_TYPE}});function l(e,t){const n=t.split(".");n.forEach(((t,n)=>{e[n]&&(e[n].value=t)})),n.length>e.length?n.slice(e.length).forEach((t=>{e.push({type:"identifier",value:t})})):n.length<e.length&&e.splice(n.length,e.length-n.length)}t.adjustCdsTermNames=(e,t)=>{if(e?.type===o.ANNOTATION_TYPE){if(t.nameMap.has(e.term.value)){const n=t.nameMap.get(e.term.value);e.term.value=n,l(e.term.segments,n)}else if(e.term.segments.length>2&&t.groupNames.has(e.term.segments[0].value)){const n=e.term.segments.map((e=>e.value.slice(0,1).toUpperCase()+e.value.slice(1))),a=t.alias+"."+n.join("");e.term.value=a,l(e.term.segments,a)}}else if(e?.type===o.ANNOTATION_GROUP_TYPE&&t.groupNames.has(e.name.value)){0===(e?.items?.items||[]).filter((n=>!t.nameMap.has(e.name.value+"."+n.term.value))).length&&((e?.items?.items||[]).forEach((n=>{const a=t.nameMap.get(e.name.value+"."+n.term.value).slice(t.alias.length+1);n.term.value=a,l(n.term.segments,a)})),e.name.value=t.alias)}return e};t.toAssignment=(e,n)=>{let r=e.text;e.range&&e.carrier?.range&&(0,i.positionContained)(e.range,e.carrier.range.start)&&(r=e.text.substring(0,e.text.length-(e.carrier.range.end.character-e.carrier.range.start.character)));const s=(0,o.parse)(r,a.Position.create(e.line,e.character));return(0,t.adjustCdsTermNames)(s,n.cdsVocabulary),s};t.toTarget=(e,t,n)=>{const a=Array.isArray(e?.definitions)?e.definitions[0].kind:e?.definitions?.kind||"entity";return["entity","view"].includes(a)&&(t=n?.convertNameToEdmx(t)??t),{type:i.TARGET_TYPE,name:t,nameRange:e?.range,assignments:[],kind:a}};t.toTargetMap=(e,n,r,s)=>{const l=function(e,n,a){const r=new Map;for(const i of e.annotationAssignments){const e=(0,t.toAssignment)(i,n),{range:s}=i.carrier,l=JSON.stringify(s);if(r.has(l)){const t=r.get(l);e&&t.assignments.push(e)}else{const n=(0,t.toTarget)(i.carrier,i.carrierName,a);e?(n.range=e.range,n.assignments.push(e)):n.range=(0,o.copyRange)(i.range),r.set(l,n)}}return r}(e,r,s);l.forEach((e=>{const{start:t,end:n}=e.assignments.reduce(((e,t)=>((0,i.isBefore)(t.range.start,e.start)&&(e.start=(0,o.copyPosition)(t.range.start)),(0,i.isBefore)(e.end,t.range.end)&&(e.end=(0,o.copyPosition)(t.range.end)),e)),(0,o.copyRange)(e.range));e.range=a.Range.create(t,n)}));let p,c=[];const u=s?.getNamespaceAndReference(n);return u&&(p=u.namespace,c=u.references),{targetMap:l,references:c,namespace:p}};t.toAnnotationFile=(e,t,n,s,l,c)=>{const u=[...t.getVocabularies().values()],m={file:{type:"annotation-file",uri:e,namespace:n.namespace,targets:[],contentRange:a.Range.create(0,0,0,0),range:a.Range.create(0,0,0,0),references:[...n.references,...u.map((e=>({type:i.REFERENCE_TYPE,name:e.namespace,alias:e.defaultAlias})))]}};let d=[];return m.file.targets=[...n.targetMap].map((([,e],n)=>{const{terms:a,mdPathSet:c,diag:u}=function(e,t,n,a,s){let l=[];const p=new Set,c=e.assignments.reduce(((e,c)=>{const u={vocabularyService:t};s&&c.range&&(0,i.positionContained)(c.range,s)&&(u.position=s);const{nodeRange:m,terms:d,pointer:y,pathSet:g,diagnostics:f}=(0,r.convertAnnotation)(c,u);if(f?.length>0&&(l=l.concat(f)),u.position)if(y){const[t,...o]=y.split("/").slice(1),r=e.length+parseInt(t,10);n.pointer=["","targets",a,"terms",r,...o].join("/"),n.nodeRange=m}else c.type===o.ANNOTATION_GROUP_TYPE&&(n.pointer=["","targets",a].join("/"),n.nodeRange=c.items.range);return(g||new Set).forEach((e=>{let t=e.split("@")[0];t.endsWith("/")&&(t=t.substr(0,t.length-1)),t&&p.add(t)})),[...e,...d]}),[]);return{terms:c,mdPathSet:p,diag:l}}(e,t,m,n,l);!function(e,t){e.filter((e=>["Common.ValueList","com.sap.vocabularies.Common.v1.ValueList"].includes((0,i.getElementAttributeValue)(e,"Term")))).forEach((e=>{const n=function(e){const t={collectionPath:null,parameters:[]};try{const n=(0,i.elementsWithName)("Record",e)[0];if(n){t.collectionPath=function(e){let t;const n=p(e,"CollectionPath");if(n){const e=(0,i.getElementAttribute)(n,"String");if(e)t=e.value;else{const e=(0,i.elementsWithName)("String",n);e.length&&(t=(0,i.getSingleTextNode)(e[0])?.text)}}return t}(n);const e=p(n,"Parameters");if(e){const n=(0,i.elementsWithName)("Collection",e)[0];n&&t.parameters.push(...function(e){const t=[];return(0,i.elementsWithName)("Record",e).forEach((e=>{const n=(0,i.getElementAttributeValue)(e,"Type")??"";if(n){const a=function(e){let t;const n=p(e,"ValueListProperty");if(n){const e=(0,i.getElementAttribute)(n,"String");if(e)t=e.value;else{const e=(0,i.elementsWithName)("String",n);e.length&&(t=(0,i.getSingleTextNode)(e[0])?.text)}}return t}(e);n.indexOf("ValueListParameter")>=0&&t.push(a)}})),t}(n))}}}catch(e){}return t}(e);n.collectionPath&&(t.add(`<ServiceName>/${n.collectionPath}`),n.parameters.forEach((e=>{e&&t.add(`<ServiceName>/${n.collectionPath}/${e}`)})))}))}(a,c),d=d.concat(u),l&&!m.pointer&&(0,i.positionContained)(e.range,l)&&(m.pointer=["","targets",n].join("/"),m.nodeRange=e.range);const{edmxPath:y,collectorKey:g}=s.facade?s.facade.collectMetadataForAbsolutePath(e.name,e.kind,s):{edmxPath:e.name,collectorKey:""};return function(e,t,n,a){if(t&&n.size>0&&a?.facade){const o=e.split("/")[0].split("(")[0].split(".");let r=o.slice(0,o.length-1).join(".");"service"!==a?.facade.getServiceKind(r)&&(r="");let i=t,s=a.metadataElementMap.get(i);const l=["entity","view","action","function","aspect"];let p=s?.parentKey?a?.metadataElementMap?.get(s.parentKey)?.node?.kind:void 0;for(;s?.parentKey&&p&&!l?.includes(p);)i=s.parentKey,s=a.metadataElementMap.get(i),p=s?.parentKey?a?.metadataElementMap?.get(s.parentKey)?.node?.kind:void 0;for(;s?.parentKey&&p&&l?.includes(p);)i=s.parentKey,s=a.metadataElementMap.get(i),p=s?.parentKey?a?.metadataElementMap?.get(s.parentKey)?.node?.kind:void 0;for(const e of[...n])a?.facade?.collectMetadataForRelativePath(e,i,r,a)}}(y,g,c,s),e.range&&(m.file.range.end=(0,o.copyPosition)(e.range.end),m.file.contentRange.end=(0,o.copyPosition)(e.range.end)),{type:i.TARGET_TYPE,name:y,nameRange:e.nameRange||null,range:e.range,termsRange:e.range,terms:a}})),m.diagnostics=d,function(e,t){if(t){const n=e.file.targets,a=[];n.forEach((e=>{t[e.name]&&Object.keys(t[e.name]).forEach((t=>{const n=Object.assign({},e);n.name=t,a.push(n)}))})),e.file.targets=a}}(m,c),m};const p=(e,t)=>(e?.content??[]).find((e=>e.type===i.ELEMENT_TYPE&&"PropertyValue"===e.name&&(0,i.getElementAttributeValue)(e,"Property")===t))},32588:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toAbsoluteUriString=t.adjustCdsTermNames=t.toTargetMap=t.toAnnotationFile=void 0;var a=n(95368);Object.defineProperty(t,"toAnnotationFile",{enumerable:!0,get:function(){return a.toAnnotationFile}}),Object.defineProperty(t,"toTargetMap",{enumerable:!0,get:function(){return a.toTargetMap}}),Object.defineProperty(t,"adjustCdsTermNames",{enumerable:!0,get:function(){return a.adjustCdsTermNames}});var o=n(59163);Object.defineProperty(t,"toAbsoluteUriString",{enumerable:!0,get:function(){return o.toAbsoluteUriString}})},59163:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toAbsoluteUriString=void 0;const a=n(71017),o=n(57310);t.toAbsoluteUriString=(e,t)=>(0,o.pathToFileURL)((0,a.join)(e.root,t)).toString()},34328:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.getAppStudioProxyURL=t.getAppStudioBaseURL=t.isAppStudio=t.ENV=void 0,function(e){e.PROXY_URL="HTTP_PROXY",e.H2O_URL="H2O_URL"}(n||(t.ENV=n={})),t.isAppStudio=function(){return!!process.env[n.H2O_URL]},t.getAppStudioBaseURL=function(){return process.env[n.H2O_URL]},t.getAppStudioProxyURL=function(){return process.env[n.PROXY_URL]}},66690:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.toPosixPath=void 0;const o=a(n(71017));t.toPosixPath=function(e){return o.default.normalize(e).split(/[\\/]/g).join(o.default.posix.sep)}},46779:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.getHelpUrl=t.GUIDED_ANSWERS_LAUNCH_CMD_ID=t.GUIDED_ANSWERS_EXTENSION_ID=t.HELP_NODES=t.HELP_TREE=void 0,function(e){e[e.FIORI_TOOLS=3046]="FIORI_TOOLS"}(n||(t.HELP_TREE=n={})),t.HELP_NODES={FIORI_TOOLS:45995,DEV_PLATFORM:45996,FIORI_APP_GENERATOR:48363,BAS_CATALOG_SERVICES_REQUEST_FAILED:48366,APPLICATION_PREVIEW:52881,CERTIFICATE_ERROR:53643,DESTINATION_MISCONFIGURED:54336,DESTINATION_UNAVAILABLE:51208,DESTINATION_NOT_FOUND:51208,BAD_GATEWAY:48366,DESTINATION_BAD_GATEWAY_503:52526,NO_V4_SERVICES:57573},t.GUIDED_ANSWERS_EXTENSION_ID="saposs.sap-guided-answers-extension",t.GUIDED_ANSWERS_LAUNCH_CMD_ID="sap.ux.guidedAnswer.openGuidedAnswer";t.getHelpUrl=function(e,t){let n="";return t.length>0&&(n=`/actions/${t.join(":")}`),`https://ga.support.sap.com/dtp/viewer/index.html#/tree/${e}${n}`}},43895:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.filterReferenceUri=t.getFioriToolsDirectory=t.FioriToolsSettings=t.getAppStudioProxyURL=t.getAppStudioBaseURL=t.isAppStudio=void 0;const i=n(22037),s=r(n(71017));var l,p=n(34328);Object.defineProperty(t,"isAppStudio",{enumerable:!0,get:function(){return p.isAppStudio}}),Object.defineProperty(t,"getAppStudioBaseURL",{enumerable:!0,get:function(){return p.getAppStudioBaseURL}}),Object.defineProperty(t,"getAppStudioProxyURL",{enumerable:!0,get:function(){return p.getAppStudioProxyURL}}),o(n(66690),t),o(n(4101),t),o(n(44248),t),o(n(46779),t),function(e){e.dir=".fioritools"}(l||(t.FioriToolsSettings=l={}));t.getFioriToolsDirectory=()=>s.default.join((0,i.homedir)(),l.dir),t.filterReferenceUri=function(e){return e?.replace(/ Uri="(http|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:/~+#-]*[0])/g,' Uri=".')}},4101:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allSettled=void 0,t.allSettled=function(e){if(!e||0===e.length)return Promise.resolve([]);const t=Array(e.length);let n=0;return new Promise((a=>{e.forEach((async(o,r)=>{try{const i=await Promise.resolve(o);t[r]={status:"fulfilled",value:i},n++,n===e.length&&a(t)}catch(o){t[r]={status:"rejected",reason:o},n++,n===e.length&&a(t)}}))}))}},44248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escapeRegExp=void 0,t.escapeRegExp=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},37696:(e,t,n)=>{"use strict";let a;Object.defineProperty(t,"__esModule",{value:!0}),t.isInternalFeaturesSettingEnabled=t.isFeatureEnabled=t.enableFeature=t.FeatureToggleAccess=t.ExperimentalFeatures=t.FeatureToggleKey=void 0;try{a=n(66828)}catch(e){}const o={AnnotationModeler:"sap.ux.annotationModeler",AppGenerator:"sap.ux.appGenerator",ApplicationModeler:"sap.ux.applicationModeler",Help:"sap.ux.help",RequirementsGathering:"sap.ux.requirementsGathering",ServiceModeler:"sap.ux.serviceModeler",Internal:"sap.ux.internal"},r={"dummy.test.testBetaFeatures.someTokenFeature":"77e0469d-1448-42bf-8d47-0944896dd9ed","sap.ux.help.testBetaFeatures.enableAppStudioGDContribution":"c8c52f0b-0d7d-4697-997a-d6f29814f42e","sap.ux.help.testBetaFeatures.enableAbapCdsSupport":"794cae98-3456-491a-ae20-3215a98b56df","sap.ux.help.testBetaFeatures.showTestGuides":"fbb03f42-0a86-4fd5-9fc4-8c9b38a4d1a3","sap.ux.help.testBetaFeatures.enableFioriAI":"165a0e31-35ea-4bee-8d47-b8593435a82d","sap.ux.applicationModeler.testBetaFeatures.manifestEditor":!0,"sap.ux.appGenerator.testBetaFeatures.newAnnotationAPI":!0};t.FeatureToggleKey="testBetaFeatures",t.ExperimentalFeatures="sap.ux.applicationModeler.enableExperimentalFeatures";class FeatureToggleAccess{static getFeatureToggle(e){let n;if((e.includes(t.FeatureToggleKey)||e===t.ExperimentalFeatures)&&FeatureToggleAccess.vscode){const t=e.slice(0,e.lastIndexOf(".")),a=e.slice(e.lastIndexOf(".")+1,e.length);n=FeatureToggleAccess.vscode.workspace.getConfiguration(t)?.get(a)}else n=!1;if(process.env.TOOLSUITE_FEATURES){n=!!process.env.TOOLSUITE_FEATURES.split(",").includes(e)||n}r[e]&&(n=r[e]===n);return{feature:e,isEnabled:!0===n&&n}}static getAllFeatureToggles(){const e=[];return FeatureToggleAccess.vscode&&Object.keys(o).forEach((n=>{const a=`${o[n]}.${t.FeatureToggleKey}`;let r={};try{r=JSON.parse(JSON.stringify(FeatureToggleAccess.vscode.workspace.getConfiguration(a)))}catch(e){}Object.keys(r).forEach((t=>{const n=FeatureToggleAccess.vscode.workspace.getConfiguration(`${a}`).get(`${t}`),o={feature:`${a}.${t}`,isEnabled:n||!1};e.push(o)}))})),e}}t.FeatureToggleAccess=FeatureToggleAccess,FeatureToggleAccess.vscode=a,t.enableFeature=function(e){let t=[];process.env.TOOLSUITE_FEATURES?(t=process.env.TOOLSUITE_FEATURES.split(","),t.includes(e)||t.push(e)):t.push(e),process.env.TOOLSUITE_FEATURES=t.join()},t.isFeatureEnabled=function(e){return FeatureToggleAccess.getFeatureToggle(e).isEnabled},t.isInternalFeaturesSettingEnabled=function(){let e=!1;if(FeatureToggleAccess.vscode){e=!0===(!!FeatureToggleAccess.vscode.workspace&&FeatureToggleAccess.vscode.workspace.getConfiguration()?.get("sap.ux.internal.enableInternalFeatures"))}return process.env.TOOLSUITE_INTERNAL&&"true"===process.env.TOOLSUITE_INTERNAL&&(e=!0),e}},37705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentalFeatures=t.enableFeature=t.isInternalFeaturesSettingEnabled=t.isFeatureEnabled=t.FeatureToggleKey=t.FeatureToggleAccess=void 0;var a=n(37696);Object.defineProperty(t,"FeatureToggleAccess",{enumerable:!0,get:function(){return a.FeatureToggleAccess}}),Object.defineProperty(t,"FeatureToggleKey",{enumerable:!0,get:function(){return a.FeatureToggleKey}}),Object.defineProperty(t,"isFeatureEnabled",{enumerable:!0,get:function(){return a.isFeatureEnabled}}),Object.defineProperty(t,"isInternalFeaturesSettingEnabled",{enumerable:!0,get:function(){return a.isInternalFeaturesSettingEnabled}}),Object.defineProperty(t,"enableFeature",{enumerable:!0,get:function(){return a.enableFeature}}),Object.defineProperty(t,"ExperimentalFeatures",{enumerable:!0,get:function(){return a.ExperimentalFeatures}})},2438:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertAnnotationFile=void 0;const a=n(85727),o=n(41810),r=n(59773);function i(e,t,n,a){const r=(0,o.getElementAttributeValue)(n,"Term"),i=(0,o.parseIdentifier)(r);let l=(0,o.toFullyQualifiedName)(e,"",i);const c=(0,o.getElementAttributeValue)(n,"Qualifier");if(l?.startsWith("com.sap.vocabularies.CDS.v1.")){const e=a?.vocabularyService?.cdsVocabulary.reverseNameMap.get(i.namespaceOrAlias+"."+i.name);e&&(l=e)}const u={term:l??r,value:p(e,t,n,a)};a?.addOrigins&&(u.origin=n.range),c&&(u.qualifier=c),"Record"===u.value?.type?(u.record=u.value.Record,delete u.value):"Collection"===u.value?.type?(u.collection=u.value.Collection,a?.addOrigins&&(u.collectionOrigins=u.value.collectionOrigins),delete u.value):"Unknown"===u.value?.type&&1===Object.keys(u.value).length&&delete u.value;const m=s(e,t,n,a);return m&&m.length&&(u.annotations=m),u}function s(e,t,n,o){return(n.content??[]).filter((e=>e.type===a.ELEMENT_TYPE&&"Annotation"===e.name)).map((n=>i(e,t,n,o)))}t.convertAnnotationFile=function(e,t,n){const o=[];if(e.references){const s=function(e){const t={};for(const n of e)t[n.name]=n.name,n.alias&&(t[n.alias]=n.name);return t}(e.references),l=e.uri.startsWith(a.GHOST_FILENAME_PREFIX)||!e.namespace?t:e.namespace?.name??"",p=e.namespace?.alias??"";Object.freeze(s);for(const t of e.targets){const e=[],a=[],c={...s,[l]:l};p&&(c[p]=l);for(const o of t.terms)e.push(i(c,t.name,o,n)),a.push(o.range);const u={target:(0,r.resolvePath)(c,l,t.name),annotations:e};n?.addOrigins&&(u.origins=a),o.push(u)}}return o};const l=new Set(["String","Bool","Decimal","Date","Float","Int","Path","PropertyPath","AnnotationPath","NavigationPropertyPath","EnumMember","Collection","Record","Apply","Null"]);function p(e,t,n,r){const i=[];l.has(n.name)&&i.push(u(e,t,n,r));for(const a of Object.keys(n.attributes))if(l.has(a)){const r=(0,o.getElementAttribute)(n,a);r&&i.push(c(e,t,r.name,r.value))}const s=(n.content??[]).filter((e=>e.type===a.ELEMENT_TYPE&&l.has(e.name)));for(const n of s)i.push(u(e,t,n,r));return i[0]}function c(e,t,n,a){switch(n){case"String":return{type:"String",String:a};case"Bool":return{type:"Bool",Bool:"true"===a};case"Decimal":return{type:"Decimal",Decimal:parseFloat(a)};case"Date":return{type:"Date",Date:a};case"Int":return{type:"Int",Int:parseInt(a,10)};case"Path":return{type:"Path",Path:(0,r.resolvePath)(e,t,a)};case"PropertyPath":return{type:"PropertyPath",PropertyPath:(0,r.resolvePath)(e,t,a)};case"AnnotationPath":return{type:"AnnotationPath",AnnotationPath:(0,r.resolvePath)(e,t,a)};case"NavigationPropertyPath":return{type:"NavigationPropertyPath",NavigationPropertyPath:(0,r.resolvePath)(e,t,a)};case"EnumMember":return{type:"EnumMember",EnumMember:(0,r.resolveEnumMemberValue)(e,t,a)};case"Null":return{type:"Null"};default:return{type:"Unknown"}}}function u(e,t,n,r){switch(n.name){case"Collection":{const{collection:o,collectionOrigins:i}=function(e,t,n,o){const r=[],i=[];return(n.content||[]).filter((e=>e.type===a.ELEMENT_TYPE)).forEach((n=>{const a=p(e,t,n,o);let s=a;a&&a.type&&("Record"===a.type?s=a.Record:"String"===a.type&&(s=a.String)),r.push(s),o?.addOrigins&&n.range&&i.push(n.range)})),{collection:r,collectionOrigins:i}}(e,t,n,r),s={type:"Collection",Collection:o};return r?.addOrigins&&(s.collectionOrigins=i),s}case"Record":return{type:"Record",Record:m(e,t,n,r)};case"Apply":return{type:"Apply",Apply:d(e,t,n)};default:{const a=(0,o.getSingleTextNode)(n)?.text??"";return c(e,t,n.name,a)}}}function m(e,t,n,r){const i=[],l=(0,o.getElementAttributeValue)(n,"Type");let c;if(l){const t=(0,o.parseIdentifier)(l);c=(0,o.toFullyQualifiedName)(e,"",t)}const u=(n.content||[]).filter((e=>e.type===a.ELEMENT_TYPE&&"PropertyValue"===e.name)).map((n=>{r?.addOrigins&&i.push(n.range);const a={name:(0,o.getElementAttributeValue)(n,"Property"),value:p(e,t,n,r)},l=s(e,t,n,r);return l&&l.length&&(a.annotations=l),"Unknown"===a?.value?.type&&1===Object.keys(a?.value).length&&(a.value={type:"Bool",Bool:!0}),a})),m={propertyValues:u};r?.addOrigins&&(m.propertyValuesOrigins=i),c&&(m.type=c);const d=s(e,t,n,r);return d&&d.length&&(m.annotations=d),m}function d(e,t,n){return y(e,t,JSON.parse(JSON.stringify(n)))}function y(e,t,n){const i=n;return Object.keys(i.attributes||{}).forEach((n=>{const a=i.attributes[n];if("Term"===n||"Type"===n){const t=(0,o.parseIdentifier)(a.value),n=(0,o.toFullyQualifiedName)(e,"",t);n&&(a.value=n)}else"EnumMember"===n?a.value=(0,r.resolveEnumMemberValue)(e,t,a.value):n.endsWith("Path")&&(a.value=(0,r.resolvePath)(e,t,a.value))})),(i.content||[]).some((e=>e.type===a.ELEMENT_TYPE))&&(i.content=i.content.filter((e=>!(e.type===a.TEXT_TYPE&&!(e.text||"").trim())))),function(e,t,n){for(const o of n.content||[])if(o.type===a.ELEMENT_TYPE)y(e,t,o);else if(o.type===a.TEXT_TYPE){const i=o.text;"EnumMember"===n.name?o.text=(0,r.resolveEnumMemberValue)(e,t,i):o.type===a.TEXT_TYPE&&n.name.endsWith("Path")&&(o.text=(0,r.resolvePath)(e,t,i))}}(e,t,i),i}},78168:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isExpression=t.expressionNames=void 0,t.expressionNames={String:"string",Bool:"boolean",Decimal:"number",Date:"string",Float:"number",Int:"number",Path:"string",PropertyPath:"string",AnnotationPath:"string",NavigationPropertyPath:"string",EnumMember:"string",Collection:"array",Record:"object",Apply:"object",Null:"null"},t.isExpression=function(e){return"object"==typeof e&&void 0!==e.type&&void 0!==t.expressionNames[e.type]}},66747:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAvtNodeFromPointer=void 0,t.getAvtNodeFromPointer=function(e,t){const n=t.split("/");if(0===n.length)return;let a=e;for(const e of n){const t=a[e];if(!t)return;a=t}return a}},73682:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAvtNodeFromPointer=t.resolvePath=t.convertPointerInAnnotationToInternal=t.convertRecordToInternal=t.convertPropertyValueToInternal=t.convertPrimitiveValueToInternal=t.convertExpressionToInternal=t.convertCollectionToInternal=t.convertCollectionElement=t.convertApplyToInternal=t.convertAnnotationToInternal=t.convertMetadataToAvtSchema=t.convertAnnotationFile=void 0;var a=n(2438);Object.defineProperty(t,"convertAnnotationFile",{enumerable:!0,get:function(){return a.convertAnnotationFile}});var o=n(74255);Object.defineProperty(t,"convertMetadataToAvtSchema",{enumerable:!0,get:function(){return o.convertMetadataToAvtSchema}});var r=n(24425);Object.defineProperty(t,"convertAnnotationToInternal",{enumerable:!0,get:function(){return r.convertAnnotationToInternal}}),Object.defineProperty(t,"convertApplyToInternal",{enumerable:!0,get:function(){return r.convertApplyToInternal}}),Object.defineProperty(t,"convertCollectionElement",{enumerable:!0,get:function(){return r.convertCollectionElement}}),Object.defineProperty(t,"convertCollectionToInternal",{enumerable:!0,get:function(){return r.convertCollectionToInternal}}),Object.defineProperty(t,"convertExpressionToInternal",{enumerable:!0,get:function(){return r.convertExpressionToInternal}}),Object.defineProperty(t,"convertPrimitiveValueToInternal",{enumerable:!0,get:function(){return r.convertPrimitiveValueToInternal}}),Object.defineProperty(t,"convertPropertyValueToInternal",{enumerable:!0,get:function(){return r.convertPropertyValueToInternal}}),Object.defineProperty(t,"convertRecordToInternal",{enumerable:!0,get:function(){return r.convertRecordToInternal}});var i=n(54665);Object.defineProperty(t,"convertPointerInAnnotationToInternal",{enumerable:!0,get:function(){return i.convertPointerInAnnotationToInternal}});var s=n(59773);Object.defineProperty(t,"resolvePath",{enumerable:!0,get:function(){return s.resolvePath}});var l=n(66747);Object.defineProperty(t,"getAvtNodeFromPointer",{enumerable:!0,get:function(){return l.getAvtNodeFromPointer}})},74255:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertMetadataToAvtSchema=void 0,t.convertMetadataToAvtSchema=function(e){return new MetadataConverter(e).convert()};class MetadataConverter{constructor(e){this.metadataService=e,this.entityTypes=[],this.complexTypes=[],this.entitySets=[],this.actions=[],this.actionImports=[],this.entityContainer={_type:"EntityContainer",fullyQualifiedName:""},this.singletons=[]}convert(){const e=this.metadataService.getRootMetadataElements();for(const[t,n]of e)this.convertAction(n.targetKinds,n),this.convertComplexType(n.targetKinds,n,t),this.convertEntityType(n.targetKinds,n,t),this.convertEntityContainer(n.targetKinds,n,t);const[t]=[...this.metadataService.getNamespaces()];if(this.entityContainer.fullyQualifiedName&&t){const e="EntityContainer";this.entityContainer={_type:"EntityContainer",name:e,fullyQualifiedName:t?`${t}.${e}`:e}}return{namespace:t,annotations:{},entitySets:this.entitySets,complexTypes:this.complexTypes,entityContainer:this.entityContainer,actions:this.actions,entityTypes:this.entityTypes,actionImports:this.actionImports,associations:[],singletons:this.singletons,associationSets:[],typeDefinitions:[]}}convertAction(e,t){if(!["Action","Function"].some((t=>e.includes(t))))return;const a={_type:"Action",name:t.name,fullyQualifiedName:t.path,parameters:[],isBound:!1,sourceType:"",returnType:"",isFunction:"Function"===t.kind||"function"===t.kind};for(const e of t.content??[]){const t=this.metadataService.getEdmTargetKinds(e.path);if(n(t,e))a.returnType=e.structuredType??e.edmPrimitiveType??"";else if(t.includes("Parameter")){const n={_type:"ActionParameter",isCollection:t.includes("Collection"),name:e.name,annotations:{},fullyQualifiedName:e.path,type:e.structuredType??e.edmPrimitiveType??""};"_it"===e.name&&(a.sourceType=e.structuredType??""),a.parameters.push(n)}}this.actions.push(a)}convertEntityContainer(e,t,n){if(e.includes("EntityContainer")){this.entityContainer={_type:"EntityContainer",name:t.name,fullyQualifiedName:n};for(const e of t.content??[]){const t=this.metadataService.getEdmTargetKinds(e.path);this.convertEntitySet(t,e),this.convertSingleton(t,e),this.convertFunctionImport(t,e)}}}convertFunctionImport(e,t){const a=this.metadataService.ODataVersion;if(e.includes("FunctionImport")||e.includes("ActionImport"))if("4.0"===a){const e={_type:"ActionImport",name:t.name,fullyQualifiedName:t.path,actionName:o(t.structuredType??"")};this.actionImports.push(e)}else{const a=function(e,t,a){const o={_type:"Action",name:e.name,fullyQualifiedName:e.path,parameters:[],isBound:!1,sourceType:"",returnType:"",isFunction:t.includes("FunctionImport")};for(const t of e.content){const e=a.getEdmTargetKinds(t.path);if(n(e,t))o.returnType=t.structuredType??t.edmPrimitiveType??"";else if(e.includes("Parameter")){"_it"===t.name&&(o.sourceType=t.structuredType??"");const e={_type:"ActionParameter",isCollection:t.isCollectionValued??!1,fullyQualifiedName:t.path,annotations:{},name:t.name,type:t.structuredType??t.edmPrimitiveType??""};o.parameters.push(e)}}return o}(t,e,this.metadataService);this.actions.push(a)}}convertEntitySet(e,t){if(e.includes("EntitySet")&&!e.includes("ComplexType"))if(t.isCollectionValued){const n={_type:"EntitySet",name:t.name,entityTypeName:t.structuredType||(e.includes("EntityType")?t.name:""),navigationPropertyBinding:{},fullyQualifiedName:t.path};this.entitySets.push(n)}else this.convertSingleton([...e,"Singleton"],t)}convertSingleton(e,t){if(e.includes("Singleton")){const n={_type:"Singleton",nullable:!1,name:t.name,entityTypeName:t.structuredType||(e.includes("EntityType")?t.name:""),navigationPropertyBinding:{},fullyQualifiedName:t.path};this.singletons.push(n)}}convertComplexType(e,t,n){if(e.includes("ComplexType")){const e=[],a=[];for(const n of t.content??[]){const o=this.metadataService.getEdmTargetKinds(n.path);if(o.includes("Property")){const t={_type:"Property",name:n.name,type:n.edmPrimitiveType??n.structuredType??"",fullyQualifiedName:n.path};e.push(t)}if(o.includes("NavigationProperty")){const e={_type:"NavigationProperty",name:n.name,fullyQualifiedName:n.path,targetTypeName:n.structuredType??"",isCollection:!!t.isCollectionValued,containsTarget:!1,partner:"",referentialConstraint:[]};a.push(e)}}const o={_type:"ComplexType",name:t.name,fullyQualifiedName:n,properties:e,navigationProperties:a};this.complexTypes.push(o)}}convertEntityType(e,t,n){if(e.includes("EntityType")&&!e.includes("ComplexType")){const e=[],a=[],o=[];for(const n of t.content??[]){const r=this.metadataService.getEdmTargetKinds(n.path);this.convertProperty(e,o,t,r,n),this.convertNavigationProperty(a,r,n)}const r={_type:"EntityType",name:t.name,fullyQualifiedName:n,entityProperties:e,keys:o,navigationProperties:a,actions:{}};this.entityTypes.push(r)}}convertProperty(e,t,n,a,o){if(a.includes("Property")&&!a.includes("NavigationProperty")){const a={_type:"Property",name:o.name,type:o.edmPrimitiveType??o.structuredType??"",fullyQualifiedName:o.path};e.push(a),n.keys?.includes(o.name)&&t.push(a)}}convertNavigationProperty(e,t,n){if(t.includes("NavigationProperty")){const t={_type:"NavigationProperty",name:n.name,fullyQualifiedName:n.path,targetTypeName:n.structuredType??"",isCollection:!!n.isCollectionValued,containsTarget:!1,partner:"",referentialConstraint:[]};e.push(t)}}}function n(e,t){return e.includes("Parameter")&&"$Return"===t.name||e.includes("ReturnType")}const a={};function o(e){if(!e)return e;const t=["@","/","("],n=[];let o=0;for(let r=0,i=!0;r<e.length;r++){const s=e[r];if(i&&"."===s){const t=e.substring(o,r);n.push(a[t]??t),o=r,i=!1}t.includes(s)&&(n.push(e.substring(o,r+1)),o=r+1,i=!0)}return n.push(e.substring(o)),n.join("")}},54665:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertPointerInAnnotationToInternal=void 0;const a=n(85727),o=n(78168);function r(e,t,n){const o={subElement:void 0,subElementIndex:-1};let r=-1;for(let i=0;i<e.content.length;i++){const s=e.content[i];s.type!==a.ELEMENT_TYPE||t&&s.name!==t||(r++,r===n&&(o.subElement=s,o.subElementIndex=i))}return o}function i(e){let t=e;return e&&(t=e.slice(0,1).toUpperCase()+e.slice(1)),t}t.convertPointerInAnnotationToInternal=function(e,t,n){let s=[""];const l=t.split("/").filter((e=>!!e));let p,c=e;return l.forEach((e=>{if(c&&s){let t={subElement:void 0,subElementIndex:-1};switch(e){case"annotations":p="Annotation";break;case"record":case"Record":t=r(c,"Record",0),t?.subElementIndex>=0&&s.push("content",t.subElementIndex.toString());break;case"propertyValues":p="PropertyValue";break;case"collection":case"Collection":t=r(c,"Collection",0),t?.subElementIndex>=0&&s.push("content",t.subElementIndex.toString()),p="";break;case"value":if(void 0!==n)if(c.attributes[n])s.push("attributes",n);else{const e=c.content.findIndex((e=>e.type===a.ELEMENT_TYPE&&e.name===n));-1!==e&&s.push("content",e.toString())}break;case"type":s.push("attributes","Type","value");break;default:if(isNaN(Number(e)))if(o.expressionNames[e])if(c.attributes&&c.attributes[e])s.push("attributes",e,"value");else if(c.name===e){let e=-1;c.content.forEach(((t,n)=>{t.type===a.TEXT_TYPE&&(e=n)})),e>=0?s.push("content",e.toString()):s=[]}else if(t=r(c,e,0),t.subElementIndex>=0){s.push("content",t.subElementIndex.toString());let e=-1;c.content[t.subElementIndex].content.forEach(((t,n)=>{t.type===a.TEXT_TYPE&&(e=n)})),e>=0?s.push("content",e.toString()):s=[]}else s=[];else c.attributes[i(e)]?s.push("attributes",i(e),"value"):"name"===e?s.push("attributes","Property","value"):s=[];else null!==p&&(t=r(c,p,Number(e)),t?.subElementIndex>=0&&s.push("content",t.subElementIndex.toString()),p=void 0)}t?.subElement&&(c=t.subElement)}else s=[]})),s.join("/")}},24425:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertPrimitiveValueToInternal=t.convertApplyToInternal=t.convertExpressionToInternal=t.convertPropertyValueToInternal=t.convertRecordToInternal=t.convertCollectionElement=t.convertCollectionToInternal=t.convertAnnotationToInternal=t.buildEmptyTarget=t.convertTargetAnnotationsToInternal=void 0;const a=n(41810),o=n(85727),r=n(78168),i=n(59773);function s(e){return{type:"target",name:e,terms:[],range:void 0,nameRange:void 0,termsRange:void 0}}function l(e,t){const n=(0,o.createElementNode)({name:"Annotation"});return n.attributes.Term=(0,o.createAttributeNode)("Term",(0,a.toAliasQualifiedName)(e.term,t)),e.qualifier&&(n.attributes.Qualifier=(0,o.createAttributeNode)("Qualifier",e.qualifier)),e.collection?(n.content=n.content||[],n.content.push(p(t,e.collection))):e.record?(n.content=n.content||[],n.content.push(u(t,e.record))):e.value&&d(t,e.value,n),e.annotations&&e.annotations.length&&e.annotations.forEach((e=>{n.content=n.content||[],n.content.push(l(e,t))})),n}function p(e,t){const n=(0,o.createElementNode)({name:"Collection"});for(const a of t){const t=c(e,a);t&&n.content.push(t)}return n}function c(e,t){return"object"==typeof t?(0,r.isExpression)(t)?d(e,t):u(e,t):"string"==typeof t?(0,o.createElementNode)({name:"String",content:[(0,o.createTextNode)(t.toString())]}):"boolean"==typeof t?(0,o.createElementNode)({name:"Bool",content:[(0,o.createTextNode)(t?"true":"false")]}):void 0}function u(e,t){const n=(0,o.createElementNode)({name:"Record"});return t.type&&(n.attributes.Type=(0,o.createAttributeNode)("Type",(0,a.toAliasQualifiedName)(t.type,e))),t.propertyValues.forEach((t=>{const a=m(e,t);n.content.push(a)})),t.annotations&&t.annotations.length&&(n.content=n.content||[],t.annotations.forEach((t=>{n.content.push(l(t,e))}))),n}function m(e,t){const n=(0,o.createElementNode)({name:"PropertyValue"});return n.attributes.Property=(0,o.createAttributeNode)("Property",t.name),d(e,t.value,n),t.annotations&&t.annotations.length&&(n.content=n.content||[],t.annotations.forEach((t=>{n.content.push(l(t,e))}))),n}function d(e,t,n){const a=r.expressionNames[t.type]?t.type:"";let i=n||(a?(0,o.createElementNode)({name:a}):void 0);if(i){let r,s,l,c;switch(t.type){case"Collection":r=p(e,t.Collection),n?(i.content=i.content||[],i.content.push(r)):i=r;break;case"Record":s=u(e,t.Record),n?(i.content=i.content||[],i.content.push(s)):i=s;break;case"Apply":s=y(e,t.Apply),n?(i.content=i.content||[],i.content.push(s)):i=s;break;case"Null":l=(0,o.createElementNode)({name:a}),n?(i.content=i.content||[],i.content.push(l)):i=l;break;case"Unknown":return;default:c=h(t.type,t[t.type],e),n?(i.attributes=i.attributes||{},i.attributes[t.type]=(0,o.createAttributeNode)(t.type,c)):i.content.push((0,o.createTextNode)(c))}}return i}function y(e,t){return g(JSON.parse(JSON.stringify(t)),e,!0)}function g(e,t,n){const r=e;Object.keys(r.attributes||{}).forEach((e=>{const o=r.attributes[e];"Term"===e||"Type"===e?o.value=n?(0,a.toAliasQualifiedName)(o.value,t):(0,a.resolveName)(o.value,t.aliasMap)?.qName:"EnumMember"===e?o.value=n?(0,i.getAliasedEnumMember)(t,o.value):(0,i.resolveEnumMemberValue)(t.aliasMap,t.currentFileNamespace,o.value):e.endsWith("Path")&&(o.value=n?f(t,o.value):(0,i.resolvePath)(t.aliasMap,t.currentFileNamespace,o.value))})),(r.content||[]).some((e=>e.type===o.ELEMENT_TYPE))&&(r.content=r.content.filter((e=>!(e.type===o.TEXT_TYPE&&!(e.text||"").trim()))));for(const e of r.content)if(e.type===o.ELEMENT_TYPE)g(e,t,n);else if(e.type===o.TEXT_TYPE){const a=e.text;"EnumMember"===r.name?e.text=n?(0,i.getAliasedEnumMember)(t,a):(0,i.resolveEnumMemberValue)(t.aliasMap,t.currentFileNamespace,a):e.type===o.TEXT_TYPE&&r.name.endsWith("Path")&&(e.text=n?f(t,a):(0,i.resolvePath)(t.aliasMap,t.currentFileNamespace,a))}return r}function f(e,t){return t.split("/").map((t=>function(e,t){let n="";const o=t.indexOf("@");if(o>=0){const r=(0,a.toAliasQualifiedName)(t.substr(o+1),e);n=t.substr(0,o)+"@"+r}else n=t.indexOf(".")>-1?(0,a.toAliasQualifiedName)(t,e):t;return n}(e,t))).join("/")}function h(e,t,n){let a=String(t);return a&&"EnumMember"===e?a=(0,i.getAliasedEnumMember)(n,a):a&&e.indexOf("Path")>=0&&(a=f(n,a)),a}t.convertTargetAnnotationsToInternal=function(e,t){const n=s(f(t,e.target));return n.terms=e.annotations.map((e=>l(e,t))),n},t.buildEmptyTarget=s,t.convertAnnotationToInternal=l,t.convertCollectionToInternal=p,t.convertCollectionElement=c,t.convertRecordToInternal=u,t.convertPropertyValueToInternal=m,t.convertExpressionToInternal=d,t.convertApplyToInternal=y,t.convertPrimitiveValueToInternal=h},59773:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAliasedEnumMember=t.resolveEnumMemberValue=t.resolvePath=void 0;const a=n(41810);function o(e,t,n){const o=(0,a.parsePath)(n);return(0,a.toFullyQualifiedPath)(e,t,o)}t.resolvePath=o,t.resolveEnumMemberValue=function(e,t,n){return n.split(" ").map((n=>o(e,t,n))).join(" ")},t.getAliasedEnumMember=function(e,t){return t.split(" ").map((t=>(0,a.toAliasQualifiedName)(t,e))).join(" ")}},19331:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CDSAnnotationServiceAdapter=void 0;const a=n(57310),o=n(71017),r=n(24632),i=n(99864),s=n(85727),l=n(6164),p=n(97765),c=n(41810),u=n(19311),m=n(53298),d=n(461),y=n(87148),g=n(21077),f=n(38101),h=n(13594),T=n(12043);function P(e,t,n){const a=(0,c.getAllNamespacesAndReferences)(e.namespace,e.references),o=(0,c.getAliasInformation)(a,t.getNamespaces());return(0,g.addAllVocabulariesToAliasInformation)(o,n.getVocabularies())}t.CDSAnnotationServiceAdapter=class CDSAnnotationServiceAdapter{constructor(e,t,n,a){this.service=e,this.project=t,this.vocabularyService=n,this.appName=a,this.metadataService=new l.MetadataService,this.documents=new Map,this.metadata=[],this.fileCache=new Map}setFileCache(e){this.fileCache=e}setFacade(e){this.facade=e}async sync(e){const t=[...this.service.serviceFiles.map((e=>(0,a.fileURLToPath)(e.uri)))],n=await(0,f.compile)(this.project.root,t,e),r=(0,i.createCdsCompilerFacade)(n);this.setFacade(r);const p=r.getCompilerErrors(this.project);if([...p].findIndex((([e,t])=>t.messages.filter((e=>e.severity===s.DiagnosticSeverity.Error)).length&&!e.startsWith("../")))>-1)return console.log(JSON.stringify([...p.values()],void 0,2)),p;this.documents.clear(),this.setFileCache(e);const c=r.getMetadata(this.service.serviceName),u=(0,i.createMetadataCollector)(new Map,r),{propagationMap:m,sourceUris:d}=r.getPropagatedTargetMap(this.service.serviceName);for(const t of this.service.serviceFiles){const n=(0,f.getDocument)(this.vocabularyService,r,e,t,u);if(this.documents.set(t.uri,n),d.has((0,o.relative)(this.project.root,(0,a.fileURLToPath)(t.uri)))){const n=(0,f.getGhostFileDocument)(this.service.serviceName,this.vocabularyService,r,e,t,u,m);this.documents.set(n.annotationFile.uri,n)}}const y=(0,i.getMetadataElementsFromMap)(c);return this.metadataService=new l.MetadataService({uriMap:r?.getUriMap()||new Map}),this.metadataService.import(y,"DummyMetadataFileUri"),new Map}getAllFiles(){return[...this.service.serviceFiles]}getInitialFileContent(e,t){if(this.facade){const n=this.facade.getFileName(e)||"";let a=(0,o.relative)((0,o.dirname)(t),(0,o.join)(this.project.root,(0,o.dirname)(n))).replace(/\\/g,"/");return a=(0,o.join)(a,(0,o.basename)(n,".cds")),a=a.split(o.sep).join("/"),`using ${e} as service from '${a}';\n`}return""}getCompiledService(){const e=[];return this.documents.forEach(((t,n)=>{if(!t)throw new m.ApiError(`Could not compile service. Missing document ${n}`,m.ApiErrorCode.General);e.push(t.annotationFile)})),Object.freeze({odataVersion:"4.0",annotationFiles:e.reverse(),metadata:this.metadata})}getWorkspaceEdit(e){const t={};let n=new Set;const a=new Map;let i=-1;for(const t of e){++i;let l=a.get(t.uri);const g=this.documents.get(t.uri),f=this.fileCache?.get(t.uri);if(!g||!f)continue;if(!l){const e=r.TextDocument.create(t.uri,"cds",0,f);l=new d.CDSWriter(this.vocabularyService,g.ast,g.comments,g.tokens,e,this.project.root),a.set(t.uri,l)}const E=P(g.annotationFile,this.metadataService,this.vocabularyService);switch(t.type){case"insert-target":{const e="targets";if(!e)throw new m.ApiError(`Could not process change ${t.type} ${t.uri} ${t.target}`,m.ApiErrorCode.General);{l.addChange({type:"insert-target",pointer:e,target:t.target});const a=(0,y.getMissingRefs)(this.documents,t.uri,t.target.name,t.target,E,this.metadataService,{apps:Object.keys(this.project.apps),projectRoot:this.project.root,appName:this.appName});n=new Set([...n,...a])}break}case"delete-element":{const{pointer:e}=(0,h.convertPointer)(g.annotationFile,t.pointer,g.ast),[n,a]=(0,h.getAstNodesFromPointer)(g.ast,e).reverse();if(n?.type===p.RECORD_PROPERTY_TYPE)l.addChange({type:"delete-record-property",pointer:e});else if(n?.type===p.ANNOTATION_TYPE&&a.type===p.RECORD_TYPE)l.addChange({type:"delete-embedded-annotation",pointer:e});else if(n.type===u.TARGET_TYPE||n?.type===p.ANNOTATION_TYPE&&a.type===u.TARGET_TYPE)l?.addChange({type:"delete-annotation",pointer:e,target:t.target||n.name});else{if(n?.type!==p.RECORD_TYPE)throw new m.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} `,m.ApiErrorCode.General);l.addChange({type:"delete-record",pointer:e})}break}case"insert-element":{const{pointer:e}=(0,h.convertPointer)(g.annotationFile,t.pointer,g.ast),[a]=(0,h.getAstNodesFromPointer)(g.ast,e).slice(-1);if(a.type===u.TARGET_TYPE)l.addChange({type:"insert-annotation",pointer:e,element:t.element});else if(a.type===p.ANNOTATION_TYPE)"Annotation"===t.element.name?l.addChange({type:"insert-embedded-annotation",pointer:e,element:t.element}):"Collection"===t.element.name?l.addChange({type:"insert-collection",pointer:e,element:t.element}):"Record"===t.element.name?l.addChange({type:"insert-record",pointer:e,element:t.element}):T.PRIMITIVE_TYPE_NAMES.includes(t.element.name)&&l?.addChange({type:d.INSERT_PRIMITIVE_VALUE,pointer:e,element:t.element});else if(a.type===p.RECORD_TYPE){if("PropertyValue"===t.element.name)l.addChange({type:"insert-record-property",pointer:[...e.split("/"),"properties"].join("/"),element:t.element,index:t.index});else if("Annotation"===t.element.name)l.addChange({type:"insert-embedded-annotation",pointer:e,element:t.element,index:t.index});else if("Record"===t.element.name){const n=e.split("/"),a=Number(n.pop());l?.addChange({type:"insert-record",pointer:n.join("/"),element:t.element,index:a})}}else if(a.type===p.RECORD_PROPERTY_TYPE)T.PRIMITIVE_TYPE_NAMES.includes(t.element.name)&&l.addChange({type:d.INSERT_PRIMITIVE_VALUE,pointer:e,element:t.element,index:t.index});else{if(a.type!==p.COLLECTION_TYPE)throw new m.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} ${t.element.name}`,m.ApiErrorCode.General);"Record"===t.element.name?l.addChange({type:"insert-record",pointer:e,element:t.element,index:t.index}):T.PRIMITIVE_TYPE_NAMES.includes(t.element.name)&&l.addChange({type:d.INSERT_PRIMITIVE_VALUE,pointer:e,element:t.element,index:t.index})}const o=(0,y.getMissingRefs)(this.documents,t.uri,t.target,t.element,E,this.metadataService,{apps:Object.keys(this.project.apps),projectRoot:this.project.root,appName:""});n=new Set([...n,...o]);break}case"delete-attribute":{const{pointer:e}=(0,h.convertPointer)(g.annotationFile,t.pointer,g.ast);if(!e)throw new m.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer}`,m.ApiErrorCode.General);l.addChange({type:"delete-attribute",pointer:e});break}case"update-attribute-value":{const{pointer:e}=(0,h.convertPointer)(g.annotationFile,t.pointer,g.ast);if(!e)throw new m.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} ${t.newValue}`,m.ApiErrorCode.General);l.addChange({type:"update-attribute-value",pointer:e,newValue:t.newValue});break}case"replace-attribute":{const{pointer:e}=(0,h.convertPointer)(g.annotationFile,t.pointer,g.ast),[n]=(0,h.getAstNodesFromPointer)(g.ast,e).slice(-1);if(!e)throw new m.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer}`,m.ApiErrorCode.General);n.type===p.RECORD_PROPERTY_TYPE&&t.newAttributeValue&&l.addChange({type:"update-attribute-value",pointer:e+"/value",newValue:t.newAttributeValue});break}case"replace-element":{const{pointer:e}=(0,h.convertPointer)(g.annotationFile,t.pointer,g.ast),n=(0,T.getGenericNodeFromPointer)(g.annotationFile,t.pointer),[a]=(0,h.getAstNodesFromPointer)(g.ast,e).slice(-1);if(!e)throw new m.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} ${t.newElement.name}`,m.ApiErrorCode.General);n?.type===s.ELEMENT_TYPE&&"PropertyValue"===n.name?l.addChange({type:"replace-record-property",pointer:e,newProperty:t.newElement}):n?.type===s.ELEMENT_TYPE&&T.PRIMITIVE_TYPE_NAMES.includes(n.name)||a?.type===p.RECORD_PROPERTY_TYPE&&a.name.value===p.ReservedProperties.Value?l.addChange({type:"replace-element",pointer:e+"/value",newElement:t.newElement}):l.addChange({type:"replace-element",pointer:e,newElement:t.newElement});break}case"replace-text":{const{pointer:e}=(0,h.convertPointer)(g.annotationFile,t.pointer,g.ast);if(!e)throw new m.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} ${t.text}`,m.ApiErrorCode.General);l?.addChange({type:"replace-text-value",pointer:e,newValue:t.text.text});break}case"replace-element-content":{const{pointer:e}=(0,h.convertPointer)(g.annotationFile,t.pointer,g.ast),[n]=(0,h.getAstNodesFromPointer)(g.ast,e).slice(-1),a=(0,T.getGenericNodeFromPointer)(g.annotationFile,t.pointer),o=t.newValue[0];if(!e||!n||o?.type!==s.TEXT_TYPE)throw new m.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} ${t.newValue}`,m.ApiErrorCode.General);{const t=o.text.split(" ").length>1;a?.type===s.ELEMENT_TYPE&&"EnumMember"===a.name&&t?l.addChange({type:"set-flags",pointer:e+"/value",value:o.text}):l.addChange({type:"update-attribute-value",pointer:e+"/value",newValue:o.text})}break}case"insert-attribute":{const{pointer:e}=(0,h.convertPointer)(g.annotationFile,t.pointer,g.ast),[n]=(0,h.getAstNodesFromPointer)(g.ast,e).slice(-1);if(!e)throw new m.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} ${t.name}`,m.ApiErrorCode.General);n.type===p.ANNOTATION_TYPE&&"Qualifier"===t.name&&l.addChange({type:"insert-qualifier-attribute",pointer:e,name:t.name,value:t.value}),n.type===p.RECORD_PROPERTY_TYPE&&l.addChange({type:"insert-primitive-value",pointer:e,element:(0,s.createElementNode)({name:t.name,content:[(0,s.createTextNode)(t.value)]})}),n.type===p.RECORD_TYPE&&"Type"===t.name&&l.addChange({type:"insert-record-property",pointer:e+"/properties",index:0,element:(0,s.createElementNode)({name:"PropertyValue",attributes:{Property:(0,s.createAttributeNode)("Property","$Type")},content:[(0,s.createElementNode)({name:"String",content:[(0,s.createTextNode)(t.value)]})]})});break}case"move-element":{const{pointer:e,index:n}=t,{pointer:a}=(0,h.convertPointer)(g.annotationFile,e,g.ast),o=(0,T.getGenericNodeFromPointer)(g.annotationFile,e);a&&(0,c.isElementWithName)(o,"Collection")&&l.addChange({type:"move-collection-value",pointer:a,index:n,fromPointers:t.fromPointers.map((e=>{const{pointer:t}=(0,h.convertPointer)(g.annotationFile,e,g.ast);return t}))})}}if(i===e.length-1&&n.size){const e="/references",t=[...n].map((e=>{if(e.startsWith("file://")){const t=(0,T.pathFromUri)(e);return(0,o.relative)(this.project.root,t)}return e}));l.addChange({type:"insert-reference",pointer:e,references:t})}}for(const[e,n]of a.entries()){const a=this.documents.get(e);if(!a)continue;const o=n.getTextEdits(a?.annotationFile);t[e]=o}return{changes:t}}async validateChanges(e){return this.sync(e)}serializeTarget(e){return(0,u.printTarget)(e)}}},92600:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectComments=void 0;const n=e=>32===e.type||30===e.type;function a(e){const t=e.text;let n;if(30===e.type){const a=e.text.split("\n");n={start:{line:e.line-1,character:e.column},end:{line:e.line-1+a.length,character:t.split("\n")[t.split("\n").length-1].length}}}else 32===e.type&&(n={start:{line:e.line-1,character:e.column},end:{line:e.line-1,character:e.column+t.length}});return{value:t,range:n}}t.collectComments=function(e){const t=[];for(const o of e)if(n(o)){const{range:e,value:n}=a(o);e&&n&&t.push({type:"comment",value:n,range:e})}return t}},38101:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getGhostFileDocument=t.getCdsCompiler=t.getDocument=t.compile=void 0;const o=a(n(22037)),r=n(57310),i=n(9949),s=n(19311),l=n(92600),p=n(12043);function c(e,t,n=!0,a){const o=e.get(t.uri);if(null==o)throw new Error(`File ${t.uri} not found in cache!`);const i=a.getTokensForUri((0,r.fileURLToPath)(t.uri));return n?[]:(0,l.collectComments)(i)}async function u(e){try{const t=await(0,i.loadModuleFromProject)(e,"@sap/cds-compiler");return{compiler:t,home:(await(0,i.loadModuleFromProject)(e,"@sap/cds")).home}}catch(e){throw new Error("Not able to cds-compiler module")}}t.compile=async function(e,t,n){let a;try{const{compiler:i,home:s}=await u(e);a=i;const l=[...n?.entries()||[]].reduce(((e,[t,n])=>{let a=(0,r.fileURLToPath)(t);return"win32"===o.default.platform()&&(a=a.charAt(0).toUpperCase()+a.slice(1)),e[a]=n,e}),{}),p={fallbackParser:"cds",attachValidNames:!0,cdsHome:s,attachTokens:!0,smart:{},messages:[]},c=await a.$lsp.compile(t,e,p,l);return c.compiler={getArtifactName:a.$lsp.getArtifactName},c}catch(e){const{model:t}=e;return t.compiler={getArtifactName:a.$lsp.getArtifactName},t}},t.getDocument=function(e,t,n,a,o){const r=c(n,a,!1,t),i=(0,s.toTargetMap)(t.blitzIndex.forUri(a.uri),a.uri,e,t),l=t.getTokensForUri((0,p.pathFromUri)(a.uri)),u={start:{line:0,character:0},end:{line:n.get(a.uri)?.split("\n").length||0,character:n.get(a.uri)?.split("\n").pop()?.length||0}},m={type:"document",uri:a.uri,range:u,namespace:i.namespace,references:i.references,targets:[...i.targetMap||[]].map((([,e])=>e))},d=(0,s.toAnnotationFile)(a.uri,e,i,o).file;return{uri:a.uri,comments:r,ast:m,annotationFile:d,tokens:l}},t.getCdsCompiler=u,t.getGhostFileDocument=function(e,t,n,a,o,r,i){const l=c(a,o,!1,n),u=n.getTokensForUri((0,p.pathFromUri)(o.uri)),m=(0,s.toTargetMap)(n.blitzIndex.forUri(o.uri),o.uri,t,n),d=(0,s.toAnnotationFile)(o.uri,t,m,r,void 0,i).file,y=d.namespace?.name===e?d.namespace:void 0,g=y?y.alias:"";d.targets=d.targets.filter((t=>t.name.startsWith(e+".")||g&&t.name.startsWith(g+"."))),d.uri="!"+d.uri;const f={type:"document",uri:d.uri,namespace:m.namespace,references:m.references,targets:[...m.targetMap||[]].map((([,e])=>e))};return{uri:d.uri,comments:l,tokens:u,ast:f,annotationFile:d}}},15662:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findTermKind=t.getTextEditsForDeletionRanges=void 0;const a=n(41810),o=n(85727),r=["ABSTRACT","ACTION","ANNOTATE","ANNOTATION","ASPECT","CONTEXT","DEFINE","ENTITY","EVENT","EXTEND","FUNCTION","SERVICE","TYPE","USING","VIEW"],i={Undefined:"",TermName:",",TermFqName:",",Annotation:"",TargetElement:";",TargetBoundAction:";",TargetParameter:",",TargetArtifact:";",TargetFromWith:""};function s(e,t,n,a,o){n.filter((e=>!e.isExpanded)).forEach((n=>{let r;do{r=!0;const s={separator:i[n.kind],beforeTokenIndex:n.tokenRange.start-1,afterTokenIndex:n.tokenRange.end+1,vocabularyAliases:e,includeTarget:o};d(t,s)?y(n,s):g(n,t,s)?f(n,s):h(n,t,s,!0)?T(n,t,s,!0):h(n,t,s)?T(n,t,s):"TermFqName"===n.kind&&"@"===t[s.beforeTokenIndex].text?(n.tokenRange.start=s.beforeTokenIndex,n.kind="Annotation"):r=c(n,t,s)?u(n,t,s):c(n,t,s,!0)?u(n,t,s,!0):m(n,t,s)?P(n,t,s,a):m(n,t,s,!0)?P(n,t,s,a,!0):!!m(n,t,s,!0,!0)&&P(n,t,s,a,!0,!0)}while(r);n.isExpanded=!0}))}function l(e,t){let n=!1;for(let a=0;a<t.length;a++){const o=t[a];let r;do{r=!1;const s=a+1<t.length?t[a+1]:null;if(s&&o.termRange.end+1===s.termRange.start){const l=[];let c=o.tokenRange.end;do{c=p(e,c,1),c>0&&c<s.tokenRange.start&&l.push(c)}while(c>0&&c<s.tokenRange.start);(0===l.length||1===l.length&&e[l[0]].text===i[o.kind])&&(r=!0),r&&(o.termRange.end=s.termRange.end,o.tokenRange.end=s.tokenRange.end,o.isExpanded=!1,t.splice(a+1,1),n=!0)}}while(r)}return n}function p(e,t,n){function a(e,t,n=!1){let a=t+(n?1:-1);if(!e[a])return-1;for(;E(e[a]);)if(a+=n?1:-1,!e[a])return-1;return a}let o=t;for(let t=0;t<Math.abs(n)&&o>=0;t++)o=a(e,o,n>0);return o}function c(e,t,n,a){if(!n.includeTarget)return!1;if(function(e,t){let n=!1,a=!1,o=!1,r=t;for(;r&&!n&&!a&&!o;){r--;const t=e[r];"ANNOTATE"===t.text.toUpperCase()?n=!0:["ACTION","FUNCTION"].includes(t.text.toUpperCase())?a=!0:";"===t.text&&(o=!0)}return!!a||!n}(t,e.tokenRange.start))return!1;if("boundParameter"===e.printPattern){if(!["Annotation","TargetParameter"].includes(e.kind))return!1}else if("Annotation"!==e.kind)return!1;let o,r,i=a?n.afterTokenIndex:n.beforeTokenIndex;for(;E(t[i]);)i+=a?1:-1;if(a?(o=e.tokenRange.start,r=i):(o=i,r=e.tokenRange.end),["element"].includes(e.printPattern)&&(!["{",";"].includes(v(t,o,-1).text)||!["}",";"].includes(v(t,r,1).text)))return!1;switch(t[i]?.isIdentifier){case"Element":return"element"===e.printPattern;case"Param":return["parameter","boundParameter"].includes(e.printPattern);case"BoundAction":return!("TargetParameter"===e.kind&&!["{",";"].includes(v(t,i,-1)?.text))&&["boundAction","boundParameter"].includes(e.printPattern);default:return!1}}function u(e,t,n,a){let o=!0;const r=a?n.afterTokenIndex+1:n.afterTokenIndex;return"boundAction"===e.printPattern&&function(e,t){let n=!1,a=!1,o=t;for(;o&&e[o]&&!a&&!n;){const t=e[o];"}"===t.text?a=!0:"("===t.text&&(n=!0),o++}return n}(t,r)?o=!1:a?(e.tokenRange.end=p(t,e.tokenRange.end,1),e.kind=_(t[e.tokenRange.end]?.isIdentifier)):(e.tokenRange.start=p(t,e.tokenRange.start,-1),e.kind=_(t[e.tokenRange.start]?.isIdentifier)),o}function m(e,t,n,a,o){if(!n.includeTarget)return!1;if("Annotation"===e.kind){if("artifact"!==e.printPattern)return!1}else if("TargetElement"===e.kind){if("element"!==e.printPattern)return!1}else if("TargetParameter"===e.kind){if("parameter"!==e.printPattern)return!1}else{if("TargetBoundAction"!==e.kind)return!1;if(!["boundAction","boundParameter"].includes(e.printPattern))return!1}if(b(t,n.afterTokenIndex)<0)return!1;let r=n.beforeTokenIndex;for(;E(t[r]);)--r;return a?o?"ACTIONS"===t[r].text.toUpperCase():"ACTIONS"===t[r].text.toUpperCase()&&"WITH"===v(t,r,-1)?.text.toUpperCase()&&"Annotate"===v(t,r,-2)?.isIdentifier:"WITH"===t[r].text.toUpperCase()&&"Annotate"===v(t,r,-1)?.isIdentifier}function d(e,t){const{beforeTokenIndex:n}=t,a=e[n];if(!a||!E(a))return!1;if(0===n)return!0;const o=v(e,n,-1);return!o||o.line<a.line}function y(e,t){e.tokenRange.start=t.beforeTokenIndex}function g(e,t,n){const{afterTokenIndex:a}=n,o=t[a];if(!E(o))return!1;if(o.line>t[e.tokenRange.end].line)return!1;const r=v(t,a,1);return!r||r.line>o.line}function f(e,t){e.tokenRange.end=t.afterTokenIndex}function h(e,t,n,a){const{separator:o}=n,r=p(t,e.tokenRange.start,-1),i=p(t,e.tokenRange.end,1),s=a?"{":"(",l=a?"}":")";return!!(a?["TermName","TargetElement","TargetBoundAction"]:["TermFqName","TargetParameter"]).includes(e.kind)&&(t[r].text===s&&(t[i].text===l||t[i].text===o&&v(t,i,1)?.text===l))}function T(e,t,n,a){const{vocabularyAliases:o}=n,r=p(t,e.tokenRange.start,-1),i=p(t,e.tokenRange.end,1),s=a?"}":")";e.tokenRange={start:r,end:t[i].text===s?i:p(t,i,1)},a&&"TermName"===e.kind&&":"===v(t,r,-1)?.text&&o.has(v(t,r,-2)?.text)&&(e.tokenRange.start=p(t,r,-2),e.kind="TermFqName")}function P(e,t,n,o,r,i){let s=n.beforeTokenIndex;for(;E(t[s]);)--s;let l=s;i||(l=p(t,l,r?-3:-2));let c=!1;if(!i){let e=!1;for(;!e;)"ANNOTATE"===t[l].text.toUpperCase()?e=!0:"."===t[l].text||"Annotate"===t[l]?.isIdentifier||E(t[l])?l--:(l=-1,e=!0)}const u=b(t,e.tokenRange.end);if(l>-1&&u>-1){e.tokenRange.end=u-1;const n=A(t[l]);i?(e.tokenRange.start=l,e.kind="TargetFromWith"):n&&function(e,t){let n,o;return t.targets.forEach((t=>{t.terms.forEach((r=>{const i=r.attributes?.Term?.valueRange?.end;i&&(0,a.isBefore)(i,e)&&(o&&!(0,a.isBefore)(o,i)||(o=i,n=t))}))})),!!n?.nameRange?.end&&(0,a.isBefore)(e,n?.nameRange?.end)}(n,o)?(e.tokenRange.start=r?p(t,s,-1):s,e.kind="TargetFromWith"):(e.tokenRange.start=l,e.kind="TargetArtifact"),c=!0}return c}function E(e){return e?.text?.startsWith("//")||e?.text?.startsWith("/*")}function v(e,t,n){return e[p(e,t,n)]}function b(e,t){let n=!1,a=-1,o=-1,i=t;for(;i&&e[i]&&-1===a&&!n;){const t=e[i];[";","@"].includes(t.text)?a=";"!==t.text&&o>0?o:i:r.includes((t.text||"").toUpperCase())?a=o>0?o:i:["(","{"].includes(t.text)&&(n=!0),o<0&&E(t)&&(o=i),o>0&&!E(t)&&(o=-1),i++}return a}function _(e){switch(e){case"Element":return"TargetElement";case"BoundAction":return"TargetBoundAction";case"Param":return"TargetParameter";default:return"Undefined"}}function A(e){return e?o.Position.create(e.line-1,e.column):void 0}function C(e,t){const n=e[t.start],a=e[t.end+1],r=A(n),i=A(a);if(r&&i)return o.Range.create(r,i)}function N(e,t){const n=i[t.kind];if(!n)return t;const a=p(e,t.tokenRange.end,1),o=e[a];let r=!1;if(o&&o.text===n){t.tokenRange.end=a,r=!0;const n=e[t.tokenRange.end+1];n&&n.text.startsWith("//")&&e[t.tokenRange.end].line===n.line&&++t.tokenRange.end}if(!r){const a=p(e,t.tokenRange.start,-1);e[a].text===n&&"TargetArtifact"!==t.kind&&(t.tokenRange.start=a)}return t}t.getTextEditsForDeletionRanges=function(e,t,n,a,r){let i;do{s(t,n,e,a,r),i=l(n,e)}while(i);const p=[];for(const t of e){const e=C(n,N(n,t).tokenRange);e&&p.push(o.TextEdit.del(e))}return p},t.findTermKind=function(e,t,n,a){let o;for(let r=n.start;r<n.end&&!o;r++)o=a&&t[r].text===a||e.has(t[r].text)&&"."===t[r+1].text?"TermFqName":/^[a-zA-Z0-9_]+$/.test(t[r].text)?"TermName":"Undefined";return o??"Undefined"}},30021:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CDS_DOCUMENT_TYPE=void 0,t.CDS_DOCUMENT_TYPE="document"},54813:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(1206),t)},13594:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAstNodesFromPointer=t.getAstNodeFromPointer=t.convertPointer=void 0;const a=n(97765),o=n(19311),r=n(41810),i=n(85727),s=n(53298),l=n(12043);t.convertPointer=function(e,t,n){const[a,...o]=t.split("/");if(""!==a)throw new s.ApiError(`Invalid pointer! ${t} must be absolute pointer starting with "/".`);const r=(new Visitor).document(n,e,o);return{...r,pointer:["",...r.pointer].join("/")}};class Visitor{document(e,t,n){const[a,o,...r]=n,i=parseInt(o,10);if(!isNaN(i)&&"targets"===a){const n=this.target(e.targets[i],t.targets[i],r);return n?(n.pointer=[a,o,...n.pointer],n):{pointer:[a,o]}}return{pointer:[]}}target(e,t,n){if(e.type===o.TARGET_TYPE){const[a,o,...r]=n,i=parseInt(o,10),s=t.terms[i];if("terms"===a){if(!s?.range)return{pointer:[]};{const t=p(e.assignments,s.range),n=e.assignments[t];if(-1!==t&&n){const e=this.assignment(n,s,r);return e?(e.pointer=["assignments",t.toString(),...e.pointer],e):{pointer:[]}}}}}}assignment(e,t,n){if(e.type===a.ANNOTATION_TYPE){const a=this.annotation(e,t,n);return a||{pointer:[]}}if(e.type===a.ANNOTATION_GROUP_TYPE&&t.range){const a=p(e.items.items,t.range),o=e.items.items[a],r=this.annotation(o,t,n);return r?(r.pointer=["items","items",a.toString(),...r.pointer],r):{pointer:["items","items",a.toString()]}}}annotation(e,t,n){const[a,o,...r]=n,i=parseInt(o,10);if(!isNaN(i)&&"content"===a&&e.value){const n=t.content[i];if(n){const t=this.value(e.value,n,r);return t?(t.pointer=["value",...t.pointer],t):{pointer:["value"]}}}return"attributes"===a&&"Qualifier"===o&&e.qualifier?{pointer:["qualifier"]}:"attributes"===a&&"Term"===o&&e.term?{pointer:["term"]}:void 0}value(e,t,n){if(e.type===a.COLLECTION_TYPE&&t.type===i.ELEMENT_TYPE&&"Collection"===t.name){const[a,o,...r]=n,i=parseInt(o,10);if(isNaN(i)){if(0===n.length)return{pointer:[]}}else{const n=e.items[i];if("content"===a&&n){const e=this.value(n,t.content[i],r);return e?(e.pointer=["items",o,...e.pointer],e):{pointer:["items",o]}}}}if(e.type===a.RECORD_TYPE&&t.type===i.ELEMENT_TYPE&&"Record"===t.name){const[a,o,...r]=n,s=parseInt(o,10);if(!isNaN(s)){const n=t.content[s];if("content"===a&&n.type===i.ELEMENT_TYPE&&n.range){const t=p(e.properties,n.range),a=e.properties[t];if("PropertyValue"===n.name&&a){const e=this.recordProperty(a,n,r);return e?(e.pointer=["properties",t.toString(),...e.pointer],e):{pointer:["properties",t.toString()]}}if("Annotation"===n.name&&e.annotations){const t=p(e.annotations,n.range),a=e.annotations?.[t];if(a){const e=this.annotation(a,n,r);return e?(e.pointer=["annotations",t.toString(),...e.pointer],e):{pointer:["annotations",t.toString()]}}}}}}if(e.type===a.RECORD_TYPE&&t.type===i.ELEMENT_TYPE&&"Record"!==t.name&&t.range){const o=e.properties.findIndex((e=>e.name.value===a.ReservedProperties.Value)),r=e.properties[o];if(r)if("Annotation"===t.name&&e.annotations){const a=p(e.annotations,t.range),o=e.annotations?.[a];if(o){const e=this.annotation(o,t,n);return e?(e.pointer=["annotations",a.toString(),...e.pointer],e):{pointer:["annotations",a.toString()]}}}else if(r.value){const e=this.value(r.value,t,n);return e?(e.pointer=["properties",o.toString(),"value",...e.pointer],e):{pointer:["properties",o.toString()]}}}if(t.type===i.ELEMENT_TYPE&&l.PRIMITIVE_TYPE_NAMES.includes(t.name)){const[e]=n.slice(-1);if("text"===e)return{pointer:[]}}}recordProperty(e,t,n){if(t.type===i.ELEMENT_TYPE&&"PropertyValue"===t.name){const[a,o,...r]=n;if("attributes"===a){if("Property"===o)return{pointer:["name"]}}else if("content"===a){const n=parseInt(o,10);if(!isNaN(n)&&"content"===a&&e.value){const a=this.value(e.value,t.content[n],r);if(a)return a.pointer=["value",...a.pointer],a}}}}}function p(e,t){for(let n=0;n<e.length;n++){const a=e[n];if(a.range&&(0,r.rangeContained)(a.range,t))return n}return-1}t.getAstNodeFromPointer=function(e,t,n=!1){const[,...a]=t.split("/");if(0===a.length)return;let o;for(let t=0;t<a.length;t++){const r=a[t],i=o?.[r]||e[r];if(!i)return;n&&t===a.length-1&&Array.isArray(i)||(o=i)}return o},t.getAstNodesFromPointer=function(e,t){const[,...n]=t.split("/"),a=[];if(0===n.length)return[];let o=e;for(let e=0;e<n.length;e++){const t=o?.[n[e]];if(!t)return a;Array.isArray(t)||a.push(t),o=t}return a}},1206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCDSService=void 0;const a=n(9949),o=n(57310);t.getCDSService=async function(e,t){const{model:n}=await(0,a.getCapModelAndServices)(e);return{type:"cap-cds",serviceName:t,serviceFiles:(n?.$sources||[]).map((e=>({uri:(0,o.pathToFileURL)(e).toString(),isReadOnly:!(-1===e.indexOf("node_modules"))}))).reverse()}}},87148:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toAbsoluteUri=t.toUnifiedUri=t.isSubDirectory=t.getMissingRefs=t.resolvePath=t.isAvailable=t.getPathsInElement=void 0;const a=n(22037),o=n(85727),r=n(53298),i=n(71017),s=n(41810),l=n(57310);function p(e,t,n,a,r){for(const i of a.terms){const a=i.attributes.Qualifier?.value,s=i.attributes.Term.value,l=a?`#${a}`:"",p=`${n.path}/@${s}${l}`;if(i.range&&(g(e,r,p),u(e,r,p,i),"Analytics.AggregatedProperties"===s)){const e=i.content.find((e=>e.type===o.ELEMENT_TYPE&&"Collection"===e.name));if(!e)continue;c(t,r,n,e)}}}function c(e,t,n,a){for(const r of a.content)if(r.type===o.ELEMENT_TYPE&&"Record"===r.name){const a=r.content.find((e=>e.type===o.ELEMENT_TYPE&&"PropertyValue"===e.name&&"Name"===e.attributes.Property?.value));if(a){const r=a.content.find((e=>e.type===o.ELEMENT_TYPE&&"String"===e.name));if(r){const a=r.content.find((e=>e.type===o.TEXT_TYPE));e.set(`${n.path}/${a?.text}`,t)}}}}function u(e,t,n,a){for(const o of a.content)"element"===o.type&&("Annotation"===o.name?y(e,t,n,o):"Record"===o.name?d(e,t,n,o):"Collection"===o.name&&m(e,t,n,o))}function m(e,t,n,a){const r=a.content.filter((e=>e.type===o.ELEMENT_TYPE));for(let a=0;a<r.length;a++){const o=r[a],i=`${n}/${a.toString()}`;if(o.range){g(e,t,i);for(const n of o.content)"element"===n.type&&u(e,t,i,n)}}}function d(e,t,n,a){for(const o of a.content){if("element"!==o.type||"PropertyValue"!==o.name)continue;const r=o.attributes.Property?.value,i=`${n}/${r??""}`;if(a.range){g(e,t,i);for(const n of o.content)"element"===n.type&&u(e,t,i,n)}}}function y(e,t,n,a){const o=a.attributes.Qualifier?.value,r=o?`#${o}`:"",i=`${n}@${a.attributes.Term.value}${r}`;a.range&&(g(e,t,i),u(e,t,i,a))}function g(e,t,n){const a=e.get(n),r=t.startsWith(o.GHOST_FILENAME_PREFIX)?t.substring(1):t;a?a.push(r):e.set(n,[r])}function f(e,t){const n=[];return Object.keys(e.attributes||{}).forEach((a=>{if(a.indexOf("Path")>=0){let o=e.attributes[a].value;o.startsWith("/")||(o=t+"/"+o),n.push({path:o})}})),(e.content||[]).forEach((a=>{if("text"===a.type&&e.name.indexOf("Path")>=0){let e=a.text;e.startsWith("/")||(e=t+"/"+e),n.push({path:e})}else"element"===a.type&&n.push(...f(a,t))})),n}function h(e,t,n,o,r=new Set){if(!r.has(e)){r.add(e);let s=(0,l.pathToFileURL)((0,i.join)(n,e)).toString();if("win32"===(0,a.platform)()&&!o.has(s)){let e=s[8];e=e===e.toLowerCase()?e.toUpperCase():e.toLowerCase(),s=s.slice(0,8)+e+s.slice(9)}const p=o.get(s)?.annotationFile;if(p){p.references.filter((e=>!!e?.uri)).forEach((e=>{const a=e?.uri;if(a){const s=(0,i.relative)(n,a);t.set(e.name+"|"+s,{uri:a,name:e.name,type:"reference"}),h(s,t,n,o,r)}}))}}}t.getPathsInElement=f;function T(e,t){return e.split("/").map((e=>(0,s.getSegmentWithoutAlias)(t,e))).join("/")}function P(e,n,a,o,r,s,p,c){const u=s.path.indexOf("@"),m=T(u>=0?s.path.substring(0,Math.max(0,u-1)):s.path,n),d=m.split("/"),y=r.get(m);y&&!(0,t.isAvailable)(c,a,(0,i.relative)(c,(0,l.fileURLToPath)(y)),m)&&o.add(y);const g=function(e,n,a,o,r,i){let s;for(const l of o){let o=r.getMetadataElement(l);if(s&&(o=r.getMetadataElement(s+"/"+l)),!o)break;s=o.path;const p=o.importUri;if([e,void 0].includes(p)||(0,t.isAvailable)(i,n,o?.importUri,o.originalName)||a.add(p),r.getEdmTargetKinds(s).includes("NavigationProperty")){const e=o?.structuredType;s=e?r.getMetadataElement(e)?.path:""}}return s}(e,a,o,d,p,c);let f;if(-1!==u){const e=s.path.slice(u-1);f=`${s.forOverriding?m:g}${e}`}return f}function E(e,t,n){const a=[];if(n){const o=t.get(n);if(o){const t=(0,i.relative)(e,(0,l.fileURLToPath)(o[0]));a.push(t)}}return a}function v(e,t,n){let a="";return b(_(`${t}/`),e)||(n||[]).forEach((t=>{b(_(`${t}/`),e)&&(a=t)})),a}function b(e,t){const n=(0,i.relative)(e,t);return!(!n||n.startsWith("..")||(0,i.isAbsolute)(n))}function _(e,t=!0){const n=(e||"").replace(/\\/g,"/").replace(/\/\//g,"/");return t?n.replace(o.GHOST_FILENAME_PREFIX,""):n}function A(e,n,a,o){if(0===e.length)return!1;for(const r of e)if(r===n||(0,t.isAvailable)(o,a,r))return!1;return!0}t.isAvailable=(e,t,n,a)=>t.filter((t=>{let o=(0,i.join)(e,n||"");return o&&"win32"===process.platform&&(o=o.charAt(0).toUpperCase()+o.slice(1)),!(!t.uri||t.uri!==o)&&!(t.name&&a&&!a.startsWith(t.name))})).length>0,t.resolvePath=T,t.getMissingRefs=function(e,t,n,a,o,c,u){const m=(0,i.relative)(u.projectRoot,(0,l.fileURLToPath)(t)),{appName:d,apps:y,projectRoot:g}=u,T=new Set;let b;if("target"===a.type)b=function(e,t,n){const a=[];a.push({path:e.name});const o=(0,s.getPathBaseMetadataElement)(t,e.name,n)?.path||e.name;return e.terms.forEach((t=>{const n=(0,s.getElementAttributeValue)(t,"Term"),r=(0,s.getElementAttributeValue)(t,"Qualifier");a.push({path:e.name+"/@"+n+(r?"#"+r:""),forOverriding:!0}),a.push(...f(t,o))})),a}(a,c,o);else{b=f(a,(0,s.getPathBaseMetadataElement)(c,n,o)?.path||n)}const C=new Map;h(m,C,g,e);const N=[...C.values()],I=[...e].map((([,e])=>e.annotationFile)),{definitionIndex:S,virtualProperties:x}=function(e,t){const n=new Map,a=new Map;for(const o of t.reverse())for(const t of o.targets){const r=e.getMetadataElement(t.name);r&&p(n,a,r,t,o.uri)}return{definitionIndex:n,virtualProperties:a}}(c,I);for(const e of b){const t=E(g,S,P(m,o,N,T,x,e,c,g));if(!A(t,m,N,g))continue;const n=t[0],a=v(_(n),d,y);if(a&&e.forOverriding){const e=`Aborted to avoid cross app using statement in '${m}' pointing to '${a}'`;throw new r.ApiError(e,r.ApiErrorCode.General)}a||T.add(n)}return T},t.isSubDirectory=b,t.toUnifiedUri=_;t.toAbsoluteUri=(e,t)=>(0,i.join)(e,t)},461:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIndentLevelFromPointer=t.CDSWriter=t.insertTarget=t.MOVE_COLLECTION_VALUE=t.INSERT_PRIMITIVE_VALUE=void 0;const a=n(41810),o=n(6157),r=n(30021),i=n(97765),s=n(19311),l=n(71017),p=n(87148),c=n(57310),u=n(15662),m=n(13594),d=n(12043),y={...a.printOptions,useSnippetSyntax:!1};t.INSERT_PRIMITIVE_VALUE="insert-primitive-value",t.MOVE_COLLECTION_VALUE="move-collection-value";const g=/annotate/i,f=/@/i;t.insertTarget=function(e,t,n){const a={type:o.INSERT_TARGET,pointer:e,target:t};return void 0!==n&&(a.index=n),a};function h(e,t,n,i,l){if(0===i.length)return[];if(n.type===r.CDS_DOCUMENT_TYPE){if(i.findIndex((e=>e.type===o.INSERT_TARGET))>-1){let e="",t=a.Position.create(0,0);n?.range&&(t=n?.range?.end,n?.range?.end&&n?.range?.end.character>0&&(e="\n",t.character=0));const o=e+i.map((e=>(0,s.printTarget)(e.target))).join("\n")+"\n";return[a.TextEdit.insert(t,o)]}}else if(Array.isArray(t))return P(e,t,n,i,l);return[]}function T(e,t,n){if(t.range){const o=v(f,e,t.range?.end);if(!o)return[];const r=e[o.tokenIndex+1];if(!r||"("===r.text)return[];const i=v(void 0,e,t.range?.end);if(!i||";"!==i.text)return[];const l=(0,s.indent)("",{level:n+1,skipFirstLine:!1}),p="    ".repeat(n);return[a.TextEdit.insert(a.Position.create(o.line-1,o.column+1),`(\n${l}`),a.TextEdit.insert(a.Position.create(i.line-1,i.column),`\n${p})`)]}return[]}function P(e,n,o,r,l,p=n){const c=[],[u,m]=function(e){const t=new Map,n=[];for(const a of e){let e=t.get(a.index);e||(e=[],n.push(a.index),t.set(a.index,e)),e.push(a)}return[n,t]}(r);for(const r of u){const u=m.get(r),d=E(e,p,o,r??-1);if(!u||!d)continue;const g=[];let f="",h="";if("number"==typeof r&&r>-1)f=",\n";else if(n[n.length-1]?.range?.end){const e=o?.commas?.[n.length-1],t=n[n.length-1].range?.end;t&&(d.position=t),e?.range?d.position.character=e.range.end.character:(h=",\n",d.requiresNewLine=!1)}const T=u.map((e=>e.type===t.INSERT_PRIMITIVE_VALUE?(0,s.printPrimitiveValue)(e.element.name,e.element.content.pop()?.text):o?.type===i.RECORD_TYPE&&"Annotation"===e.element.name?(0,s.printCsdlNode)(e.element,y):(0,s.print)(e.element,y))).join(",\n");g.push(h),g.push(T),g.push(f);let P=g.join("");P=R(P);const v=(0,s.indent)((d.requiresNewLine?"\n":"")+P,{level:l+1,skipFirstLine:!0});c.push(a.TextEdit.insert(d.position,v))}return c}function E(e,t,n,o=-1){const r=o>-1?t[o]:void 0;if(!r){let e;const o=t.length;o?e=t.findIndex((e=>e.type===s.TARGET_TYPE&&e.assignments))>-1?n.range:t[o-1].range:n.type!==s.TARGET_TYPE&&(e=n.openToken?.range);return{position:a.Position.create(e?.end?.line,e?.end?.character),requiresNewLine:!0}}{const a=r.range,i=function(e,t,n){if(t){const a=t.start.line-1;for(const o of e){if(o.range.end.line===a){if(n&&n.start.line>a)continue;return{comment:o,position:"before"}}if(t.end.line===o.range.start.line&&o.range.start.character>t.end.character)return{comment:o,position:"inline"}}}return}(e,a,n.range)?.comment,s=function(e,t,n){if(0===n)return e[0]?.range??t.range;return e[n-1]?.range}(t,n,o);if(s){const e=i?i.range.start:a?.start,t=n.range?.start.line===e?.line;if(e){return{position:e,requiresNewLine:t}}}}}function v(e,t,n){let a;for(const o of t){if(b(o,n))return a;e&&!e.test(o.text)||(a=o)}}function b(e,t){const n=e.line-1;return n>t.line||n===t.line&&e.column>t.character}function _(e,t,n){const a=(0,m.getAstNodesFromPointer)(e,n).reverse().shift();return a?A(t,a):0}function A(e,t){const n=y.useTabs?1:y.tabWidth,a=function(e,t){if(!e?.range)return 0;if(e.type===s.TARGET_TYPE&&e.range){if("element"===e.kind&&e.nameRange)return e.nameRange.start.character;const n=v(g,t,e.range.end);if(n)return n.column}const n=e.range.start.line;let a=0,o=t.length;for(;a<=o;){const e=Math.floor((a+o)/2);let r=t[e];const i=r.line-1;if(i<n)a=e+1;else{if(!(i>n)){let n=e-1,a=t[n];for(;a&&r.line===a.line;)r=a,a=t[n],n--;return r.column}o=e-1}}return 0}(t,e),o=a/n;return Math.floor(o)}function C(e,t,n){const a=[];for(const r of e){const e=N(n,(0,l.relative)(n,(0,c.fileURLToPath)(t)),r);a.push((o={namespace:"",referenceUri:e}).namespace?o.alias?`using ${o.namespace} as ${o.alias} from '${o.referenceUri}';`:`using ${o.namespace} from '${o.referenceUri}';`:`using from '${o.referenceUri}';`)}var o;return a.join("\n")+"\n"}function N(e,t,n){let a="";const o=n.lastIndexOf("node_modules");if(o>=0){const e=n.lastIndexOf(".");a=e>o+13?n.slice(o+13,e):n.slice(o+13)}if(!a){const o=(0,l.dirname)((0,p.toAbsoluteUri)(e,t));a=(0,l.relative)(o,(0,p.toAbsoluteUri)(e,n)),a.startsWith(".")||(a="./"+a)}const r=a.lastIndexOf(".")>0?a.slice(a.lastIndexOf(".")+1):"";return["CDS","JSON"].includes(r.toUpperCase())&&(a=a.slice(0,a.length-r.length-1)),a.split(l.sep).join("/")}function I(e,t){const n=e.findIndex((e=>e.line===t.start.line+1&&e.column===t.start.character));let a=-1;return n>-1&&(a=e.slice(n).findIndex((e=>e.line>t.end.line+1||e.line===t.end.line+1&&e.column>=t.end.character)),a=n+a-1),{start:n,end:a}}function S(e,t){let n;return t.forEach((t=>{!(0,a.isBefore)(e,t.start)||n&&!(0,a.isBefore)(t.start,n.start)||(n=t)})),n}function x(e,t){let n;return t.forEach((t=>{!(0,a.isBefore)(t.end,e)||n&&!(0,a.isBefore)(n.end,t.end)||(n=t)})),n}function O(e,t){return!(!e||!t)&&(e.start.line===t.start.line&&e.start.character===t.start.character&&e.end.line===t.end.line&&e.end.character===t.end.character)}function D(e){switch(e){case"time":return"TimeOfDay";case"date":return"Date";case"timestamp":return"DateTimeOffset";case"binary":return"Binary";case"path":return"Path";case"boolean":return"Bool";case"string":return"String";case"enum":return"EnumMember";case"number":return"Decimal";default:return}}function R(e){return e.split("\n").map((e=>e.trimStart())).join("\n")}function M(e){const t=e[e.length-1]?.uriRange;if(!t)return{position:a.Position.create(0,0),prependNewLine:!1};const n=(0,i.copyPosition)(t.end);return n.character++,{position:n,prependNewLine:!0}}function V(e,t,n){let a,o=!1;if(void 0===n&&t?.length){const n=t?.[t?.length-1];a=n?.range?.end;const r=e.commas[t?.length-1];r?.range?a=r.range?.end:o=!0}else if(0!==n&&t?.length){if(n){const r=n;a=t[Math.min(n,e.items.length-1)].range?.end;const s=e.commas[r-1];s?.range?a=(0,i.copyPosition)(s?.range.end):o=!0}}else a=e.openToken?.range?.end;return{position:a,requiresComma:o}}function U(e,t,n){const a=[],o=n.reduce(((e,t)=>{const n=t.split("/"),a=n.slice(0,-2).join("/"),o=parseInt(n.slice(-1)[0],10),r=e.get(a);return r?r.push(o):e.set(a,[o]),e}),new Map);for(const[n,r]of o){const o=(0,m.getAstNodeFromPointer)(e,n);if("collection"===o?.type){const e=A(t,o);r.sort();for(let t=1,n=r[0],i=r[0];t<=r.length;t++){const s=r[t];void 0===s?a.push({parent:o,start:n,end:i,indentLevel:e}):i+1===s?i=s:(a.push({parent:o,start:n,end:i,indentLevel:e}),n=i=s)}}}return a}function F(e,t){return e.range?t.range?(0,a.isBefore)(e.range.start,t.range.start)?-1:(0,a.isBefore)(t.range.start,e.range.start)?1:0:-1:1}function w(e,t,n,o,r){const i=[],s=[];for(const n of o){k(e,L(n.parent,t),n,r,s,i)}return i.push(a.TextEdit.insert(n,"".concat(...s))),i}function L(e,t){const n=(void 0!==e.range?t.filter((t=>(0,a.rangeContained)(e.range,t.range))):[]).filter((t=>!e.items.some((e=>e.range&&(0,a.rangeContained)(e.range,t.range)))));return[...e.commas,...e.items,...n].sort(F)}function j(e){return"token"===e?.type&&","===e.value}function k(e,t,n,o,r,s){const{parent:l,start:p,end:c}=n,u=l.items[p-1],{startContentIndex:m,endContentIndex:d}=function(e,t,n){let a=-1,o=-1;for(let r=0,i=0;r<n.length;r++){const s=n[r];if("comment"!==s.type&&("token"!==s.type||","!==s.value)){if(e===i&&(a=r),t===i){o=r;break}i++}}return{startContentIndex:a,endContentIndex:o}}(p,c,t),y=t[d];let g,f=0===p?l.openToken?.range?.end:u?.range?.end,h=y?.range?.end;if(f&&(f=(0,i.copyPosition)(f)),h&&(h=(0,i.copyPosition)(h)),!f||!h)return;const T=function(e,t){for(let n=t;n>=0;n--){const t=e[n];if(j(t))return t.range}return}(t,m-1);let P=t[d+1];if(T&&Y(f,T.end),j(P)){const e=t[d+2];"comment"===e?.type&&e.range?.start.line===y.range?.end.line&&(P=e),P.range&&Y(h,P.range.end)}else if("comment"===P?.type&&y.range){const t=(0,i.copyRange)(a.Range.create(y.range?.end,P.range.end));s.push(a.TextEdit.del(t)),g=","+e.getText(t)}else g=",";const E=(0,i.copyRange)(a.Range.create(f,h)),v=e.getText(E);r.push(function(e,t,n,a){let o=e;const r=a-n.indentLevel;if(r>0){const e="    ".repeat(r);o=o.replaceAll("\n","\n"+e)}else if(r<0){const e="    ".repeat(-1*r);o=o.replaceAll("\n"+e,"\n")}return void 0!==t?o+t:o}(v,g,n,o)),s.push(a.TextEdit.del(E))}function Y(e,t){e.line=t.line,e.character=t.character}t.CDSWriter=class CDSWriter{constructor(e,t,n,a,o,r){this.vocabularyService=e,this.document=t,this.comments=n,this.tokens=a,this.textDocument=o,this.projectRoot=r,this.changes=[]}addChange(e){this.changes.push(e)}getTextEdits(e){const n=[],r={};for(const e of this.changes){let t=r[e.pointer];t||(t=new Map,r[e.pointer]=t);let n=t.get(e.type);n||(n=[],t.set(e.type,n)),n.push(e)}const l=new Set;for(const[,e]of this.vocabularyService.getVocabularies())l.add(e.defaultAlias);const p=new Map;for(const e of Object.keys(r)){const c=r[e],g=e.split("/"),f=g.pop(),[E,v]=(0,m.getAstNodesFromPointer)(this.document,e).reverse(),b=c.get("delete-attribute")??[];b.length&&n.push(...b.reduce((e=>{if(E?.type===i.QUALIFIER_TYPE&&E?.range){const t={start:{line:E.range.start.line,character:E.range.start.character-1},end:E?.range?.end};e.push(a.TextEdit.del(t))}return e}),new Array));if((c.get("delete-annotation")??[]).length){let t,n;if(E?.type===s.TARGET_TYPE){const e=E.assignments[0];e&&(t="annotation-group"===e.type?e.items.items[0]:e),n=E.name}else E?.type===i.ANNOTATION_TYPE&&v?.type===s.TARGET_TYPE&&(t=E,v?.type===s.TARGET_TYPE&&(n=v.name));if(t?.range){const a=e.split("/").slice(0,2).join("/");p.has(a)||p.set(a,{deletionRanges:[],totalAssignmentLength:E?.assignments?.length||v?.assignments?.length||0});const o=p.get(a),r=t.term.value,i=this.vocabularyService.cdsVocabulary.reverseNameMap.get(r)||"",c=I(this.tokens,t.range),m=(0,u.findTermKind)(l,this.tokens,c,i);o?.deletionRanges.push({kind:m,printPattern:(0,s.resolveTarget)(n).printPattern,termRange:{start:Number(f),end:Number(f)},tokenRange:c,isExpanded:!1})}}const A=c.get("delete-embedded-annotation")??[];A.length&&E?.type===i.ANNOTATION_TYPE&&v.type===i.RECORD_TYPE&&n.push(...A.reduce((e=>{const t=E?.range?.start;if(t&&E.range){const n=v.commas.find((e=>!!e.range&&(0,a.positionContained)(E.range,e.range.start))),o=x(E.range.start,[...v.properties.map((e=>e.range)),...(v.annotations??[]).map((e=>e.range)),v.openToken?.range].filter((e=>!!e))),r=S(E.range.end,[...v.properties.map((e=>e.range)),...(v.annotations??[]).map((e=>e.range)),v.closeToken?.range].filter((e=>!!e)));let s;s=O(r,v.closeToken?.range)?{start:o?.end??t,end:E.range.end}:{start:t,end:r?.start??n?.range?.end??E.range.end};const l=v.properties[0];1===v.annotations?.length&&1===v.properties.length&&l.name.value===i.ReservedProperties.Value&&v.range&&l.value?.range?e.push(a.TextEdit.del({start:v.range.start,end:l.value.range.start}),a.TextEdit.del({start:l.value.range.end,end:v.range.end})):e.push(a.TextEdit.del(s))}return e}),new Array));const N=c.get("delete-record-property")??[];N.length&&n.push(...N.reduce((e=>{const t=E?.range?.start;if(t){const n={start:t,end:v?.commas?.[Number(f)]?.range.end||E?.range?.end};e.push(a.TextEdit.del(n))}return e}),new Array));const L=c.get("delete-record")??[];if(L.length)if(v.type===i.COLLECTION_TYPE)n.push(...L.reduce((e=>{let t=E?.range?.start,n=Number(f);Number(n)>0&&(n-=1,t=v?.commas?.[Number(n)]?.range?.end||E?.range?.start);const o=v?.commas?.[Number(f)]?.range?.end||E?.range?.end;if(t&&o){const n={start:t,end:o};e.push(a.TextEdit.del(n))}return e}),new Array));else{let e;if([i.ANNOTATION_TYPE,i.RECORD_PROPERTY_TYPE].includes(v.type)){const t=Number(g.pop()),n=(0,m.getAstNodeFromPointer)(this.document,g.join("/"),!0);n?.type!==i.ANNOTATION_GROUP_ITEMS_TYPE&&n?.type!==i.RECORD_TYPE||(e=n?.commas?.[t]?.range?.end)}n.push(...L.map((()=>{const t={start:v?.colon?.range.start,end:e||E?.range?.end};return a.TextEdit.del(t)})))}const j=c.get("insert-reference")??[];j.length&&j.forEach((e=>{const t=e.references,{position:o,prependNewLine:r}=M(this.document.references),i=`${r?"\n":""}${C(t,this.document.uri,this.projectRoot)}`;n.push(a.TextEdit.insert(o,i))}));const k=c.get(o.INSERT_TARGET)??[],Y=_(this.document,this.tokens,e);if(k.length){const e=h(this.comments,this.document.targets,this.document,k,0);n.push(...e)}const $=c.get("insert-annotation")??[];if($.length&&"target"===E.type){const e=h(this.comments,E.assignments,E,$,Y);n.push(...e);const t=T(this.tokens,E,Y);t.length&&n.push(...t)}const B=c.get("insert-embedded-annotation")??[];if(B.length)if(E?.type===i.RECORD_TYPE){const e=E.annotations?.length?[...E.properties,...E.annotations].sort(F):E.properties,t=P(this.comments,e,E,B,Y,E.annotations);n.push(...t)}else if(E?.type===i.ANNOTATION_TYPE){const t=E.value;if("record"===t?.type){const e=t.annotations?.length?[...t.properties,...t.annotations].sort(F):t.properties,a=P(this.comments,e,t,B,Y,t.annotations);n.push(...a)}else if(E.value?.range){const t=" ".repeat(Y*y.tabWidth),o=" ".repeat((Y+1)*y.tabWidth),i=(0,s.printCsdlNode)(B[0].element,y),l=[a.TextEdit.insert(E.value.range.start,`{\n${o}$value : `),a.TextEdit.insert(E.value.range.end,`,\n${o}${i}\n${t}}`)],p=r[[e,"value"].join("/")]?.get("replace-element");if(!p?.length){let e=E.value.range.start.line+1;const t=" ".repeat(4);for(;e<=E.value.range.end.line;)l.push(a.TextEdit.insert(a.Position.create(e,0),t)),e++}n.push(...l)}}const H=c.get("insert-collection")??[];if(H.length){const[e]=H.slice(-1),t=` : ${e.element.content.length?(0,s.print)(e.element):"[]"}`,o=E?.range?.end;if(o){const e=(0,s.indent)(t,{level:Y+1,skipFirstLine:!0});n.push(a.TextEdit.insert(o,e))}}const G=c.get("insert-record")??[];if(G.length){if(E&&[i.ANNOTATION_TYPE,i.RECORD_PROPERTY_TYPE].includes(E.type)&&E.range){const[e]=G.slice(-1),t=" : "+(0,s.indent)(R((0,s.print)(e.element,y)),{level:Y,skipFirstLine:!0}),o=E.range.end;n.push(a.TextEdit.insert(o,t))}if(E?.type===i.COLLECTION_TYPE){const e=P(this.comments,E.items,E,G,Y);n.push(...e)}}const q=c.get("insert-record-property")??[];if(q.length&&E.type===i.RECORD_TYPE){const e=h(this.comments,E.properties,E,q,Y);n.push(...e)}const K=c.get(t.INSERT_PRIMITIVE_VALUE)??[];if(K.length)if(E.type===i.COLLECTION_TYPE){const e=h(this.comments,E.items,E,K,Y);n.push(...e)}else if(E&&[i.RECORD_PROPERTY_TYPE,i.ANNOTATION_TYPE].includes(E.type)){const e=K.map((e=>" : "+(0,s.indent)((0,s.printPrimitiveValue)(e.element.name,e.element.content.pop()?.text)))).join("\n"),t=E?.range?.end;t&&n.push(a.TextEdit.insert(t,e))}const W=c.get("update-attribute-value")??[];if(W.length){const[e]=W.slice(-1);if(e&&E.range)if(E.type===i.STRING_LITERAL_TYPE){const t=(0,i.copyRange)(E.range);t.start.character++,t.end.character--,n.push(a.TextEdit.replace(t,e.newValue))}else E.type===i.ENUM_TYPE&&E.path.range?n.push(a.TextEdit.replace(E.range,(0,s.printPrimitiveValue)("EnumMember",e.newValue))):n.push(a.TextEdit.replace(E.range,e.newValue))}const z=c.get("set-flags")??[];if(z.length){const[e]=z.slice(-1);e&&E.type===i.COLLECTION_TYPE&&E.range&&n.push(a.TextEdit.replace(E.range,(0,s.printPrimitiveValue)("EnumMember",e.value)))}const Q=c.get("insert-qualifier-attribute")??[];if(Q.length&&E.type===i.ANNOTATION_TYPE){const e=E.term.range?.end;e&&n.push(...Q.map((t=>a.TextEdit.insert(e,` #${t.value}`))))}const X=c.get("replace-element")??[];if(X.length){let t=_(this.document,this.tokens,e);const o=r[e.split("/").slice(0,-1).join("/")]?.get("insert-embedded-annotation");o?.length&&t++;const i=Array.isArray(E)?v?.range:E?.range;if(i){const[e]=X.slice(-1),o=(0,s.print)(e.newElement,y),r=(0,d.increaseIndent)(o,t,!0);n.push(a.TextEdit.replace(i,r))}}const J=c.get("replace-text-value")??[];if(J.length){const e=E?.range;let t="";E?.type&&(t=D(E.type)),e&&n.push(...J.map((n=>a.TextEdit.replace(e,(0,s.printPrimitiveValue)(t,n.newValue)))))}const Z=c.get("replace-record-property")??[];if(Z.length){const t=_(this.document,this.tokens,e),o=E?.range;o&&n.push(...Z.map((e=>{const n=(0,s.indent)((0,s.print)(e.newProperty,y,!1),{level:t+1,skipFirstLine:!0});return a.TextEdit.replace(o,n)})))}const ee=c.get(t.MOVE_COLLECTION_VALUE)??[];ee.length&&E.type===i.COLLECTION_TYPE&&ee.forEach((e=>{if(E.type!==i.COLLECTION_TYPE)return;const{requiresComma:t,position:o}=V(E,E.items,e.index);t&&n.push(a.TextEdit.insert(o,","));const r=U(this.document,this.tokens,e.fromPointers),s=w(this.textDocument,this.comments,o,r,Y);if(n.push(...s),E.closeToken?.range&&E.closeToken?.range?.end?.line===E.openToken?.range?.end?.line){const e="    ".repeat(Y);n.push(a.TextEdit.insert(E.closeToken.range.start,"\n"+e))}}))}for(const t of p.keys()){const a=p.get(t);if(a?.deletionRanges.length){let t=!1;a?.deletionRanges.length===a.totalAssignmentLength&&(t=!0);const o=(0,u.getTextEditsForDeletionRanges)(a?.deletionRanges,l,this.tokens,e,t);n.push(...o)}}return n}},t.getIndentLevelFromPointer=_},53298:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ApiError=t.ApiErrorCode=void 0,function(e){e[e.General=1]="General",e[e.CompileError=2]="CompileError",e[e.ComplexityViolation=3]="ComplexityViolation",e[e.LocalAnnotationFileNotFound=4]="LocalAnnotationFileNotFound"}(n||(t.ApiErrorCode=n={}));class ApiError extends Error{constructor(e,t,a){super(e),this.messageMap=a??new Map,this.errorCode=t??n.General}toString(e=!1){let t=super.toString();if(e){t+=`. Error code: ${this.errorCode}. ${this.messageMap.size>0?"Other messages:":""}`;for(const e of this.messageMap.keys())t+=`\n[${e}]:`,this.messageMap.get(e)?.forEach((e=>t+=`\n- ${e}`))}return t}getExtendedMessage(){let e=this.message;if(this.messageMap.size>0){e+=". Other messages:";for(const t of this.messageMap.keys())e+=`\n[${t}]:`,this.messageMap.get(t)?.forEach((t=>e+=`\n- ${t}`))}return e}}t.ApiError=ApiError},17404:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyWorkspaceEdits=t.FioriAnnotationService=void 0;const a=n(24632),o=n(32217),r=n(85727),i=n(41810),s=n(73682),l=n(60109),p=n(54813),c=n(21077),u=n(6157),m=n(53298),d=n(19331),y=n(12043),g=n(24425);function f(e,t,n){if("record"===n.content.type){const{content:t}=n;return(0,s.convertRecordToInternal)(e,t.value)}if("property-value"===n.content.type){const{content:t}=n;return(0,s.convertPropertyValueToInternal)(e,t.value)}if("collection"===n.content.type){const{content:t}=n;return(0,s.convertCollectionToInternal)(e,t.value)}if("expression"===n.content.type){const{content:t}=n;return(0,s.convertExpressionToInternal)(e,t.value)}if("primitive"===n.content.type){const{content:e}=n;if(e.expressionType===u.ExpressionType.Null)return(0,r.createElementNode)({name:"Null"})}}function h(e,t,n){return{type:"reference",name:e,alias:t,uri:n}}function T(e,t){const n=E(t.reference,t.uri);switch(t.kind){case u.ChangeType.InsertEmbeddedAnnotation:return void(e.content.value.annotations?e.content.value.annotations.push(t.content.value):e.content.value.annotations=[t.content.value]);case u.ChangeType.Insert:{const a=(0,s.getAvtNodeFromPointer)(e.content.value,t.pointer);if(!a)throw new m.ApiError(`Change merge for '${n}' failed! Could not resolve '${t.pointer}'.`,m.ApiErrorCode.General);if(Array.isArray(a)&&"record"===t.content.type)return void(void 0===t.index||t.index>=a.length?a.push(t.content.value):a.splice(t.index,0,t.content.value));throw new m.ApiError(`Change merge for '${n}' failed! Change value type '${t.content.type}' is not supported.`,m.ApiErrorCode.General)}}throw new m.ApiError(`Change merge for '${n}' failed! Change type '${t.kind}' is not supported.`,m.ApiErrorCode.General)}function P(e,t,n){for(let a=0;a<t.targets.length;a++){const o=t.targets[a];if(b(e.aliasMap,e.currentFileNamespace,o.name)===n.target)for(let t=0;t<o.terms.length;t++){const r=o.terms[t],s=(0,i.getElementAttributeValue)(r,"Qualifier"),l=(0,i.resolveName)((0,i.getElementAttributeValue)(r,"Term"),e.aliasMap).qName;if(n.term===l&&(!s&&!n.qualifier||s===n.qualifier))return{element:r,target:o,pointer:`/targets/${a}/terms/${t}`}}}const a=E(n);throw new m.ApiError(`Term '${a}' does not exist`,m.ApiErrorCode.General)}function E(e,t){const n=e.qualifier?`#${e.qualifier}`:"",a=`${e.target}/${e.term}${n}`;return t?`${t} ${a}`:a}function v(e,t,n,o){const r=a.TextDocument.create(e,t,0,o),i=n.changes?n.changes[e]??[]:[];return a.TextDocument.applyEdits(r,i)}function b(e,t,n){const a=(0,i.parsePath)(n);return a.segments=a.segments.map(((e,n)=>void 0===e.namespaceOrAlias&&0===n?{...e,namespaceOrAlias:t}:e)),(0,i.toFullyQualifiedPath)(e,t,a)}t.FioriAnnotationService=class FioriAnnotationService{constructor(e,t,n,a){this.vocabularyAPI=e,this.adapter=t,this.fs=n,this.serviceName=a,this.changes=[],this.fileCache=new Map,this.isInitialSyncCompleted=!1,this.projectInfo={appName:"",apps:[],projectRoot:""}}static async createService(e,t,n,a){const r=new o.VocabularyService("Cap"===e.type),i=await async function(e,t,n){if("Edmx"===e.type)return(0,l.getLocalEDMXService)(e,t,n);if("Cap"===e.type)return(0,p.getCDSService)(e.root,t);throw new Error(`Unsupported project type "${e.type}"!`)}(e,t,n),s=function(e,t,n,a){if("local-edmx"===t.type)return new l.XMLAnnotationServiceAdapter(t);if("cap-cds"===t.type)return new d.CDSAnnotationServiceAdapter(t,e,n,a);throw new Error(`Unsupported service type "${t.type}"!`)}(e,i,r,n),c=new this(r,s,a,t);return c.setProjectInfo(e,n),c}getAdapter(){return this.adapter}getMetadataService(){return this.adapter.metadataService}getAllFiles(){return this.adapter.getAllFiles()}setProjectInfo(e,t){this.projectInfo={apps:Object.keys(e.apps)||[],appName:t||"",projectRoot:e.root}}async sync(){this.fileCache.clear();const e=await Promise.all(this.adapter.getAllFiles().map((async e=>{const t=(0,y.pathFromUri)(e.uri),n=(await this.fs.promises.readFile(t,{encoding:"utf-8"})).toString();return{...e,content:n}})));for(const t of e)this.fileCache.set(t.uri,t.content);await this.adapter.sync(this.fileCache),this.isInitialSyncCompleted=!0}getInitialFileContent(e){return this.adapter.getInitialFileContent?.(this.serviceName,e)??""}getSchema(){const e=this.adapter.getCompiledService(),t={version:this.adapter.metadataService.ODataVersion,identification:"metadataFile",schema:(0,s.convertMetadataToAvtSchema)(this.adapter.metadataService),references:[]};return function(e,t,n,a){for(const o of[...e.annotationFiles]){const e=(0,s.convertAnnotationFile)(o,n,{addOrigins:!0,vocabularyService:a.vocabulary});t.schema.annotations[o.uri]=e}}(e,t,this.serviceName,{vocabulary:this.vocabularyAPI}),t}edit(e){Array.isArray(e)?this.changes.push(...e):this.changes.push(e)}async save(e){this.isInitialSyncCompleted||await this.sync();const t={},n=this.convertChanges(this.changes),a=this.adapter.getWorkspaceEdit(n),o=a.changes??{},i=Object.keys(o),s=new Map(this.fileCache);for(const e of i){const n=(0,y.pathFromUri)(e),o=v(e,"",a,(await this.fs.promises.readFile(n,{encoding:"utf-8"})).toString());this.fileCache.set(e,o),t[n]=o}if(this.changes=[],"function"==typeof this.adapter.validateChanges){const e=await this.adapter.validateChanges(this.fileCache);if(e?.size){this.fileCache=new Map(s);const t=function(e){const t=new Map;return[...e.entries()].forEach((e=>{const[n,a]=e;if(a.hasSyntaxErrors&&!n.startsWith("../")){const e=a.messages.filter((e=>e.severity===r.DiagnosticSeverity.Error)).map((e=>e.message));t.set(n,e)}})),t}(e);throw new m.ApiError(u.COMPILE_ERROR_MSG,m.ApiErrorCode.CompileError,t)}for(const e of Object.keys(t)){const n=t[e];await this.saveFile(e,n)}}else e?.resyncAfterSave&&await this.adapter.sync(this.fileCache);return this.changes=[],{files:i.length}}getAliasInformation(e){return(0,i.getAliasInformation)(e,this.adapter.metadataService.getNamespaces())}async saveFile(e,t){await this.fs.promises.writeFile(e,t)}convertChanges(e){const t=[],n=this.adapter.getCompiledService(),a=new Map,o=function(e){const t=[],n=e.filter((e=>e.kind===u.ChangeType.InsertAnnotation)).reduce(((e,t)=>{const n=E({target:t.content.target,term:t.content.value.term,qualifier:t.content.value.qualifier},t.uri);return e.set(n,t),e}),new Map);for(const a of e){if(a.kind===u.ChangeType.InsertAnnotation){t.push(a);continue}const e=E(a.reference,a.uri),o=n.get(e);o?T(o,a):t.push(a)}return t}(e),l=new Map;for(const e of o){const o=n.annotationFiles.find((t=>t.uri===e.uri));if(!o)throw new Error(`Invalid change. File ${e.uri} does not exist.`);const p=(0,i.getAllNamespacesAndReferences)(o.namespace||{name:this.serviceName,type:"namespace"},o.references),m=this.getAliasInformation(p),d=(0,c.addAllVocabulariesToAliasInformation)(m,this.vocabularyAPI.getVocabularies());if(e.kind===u.ChangeType.InsertAnnotation){const r=n.annotationFiles.find((t=>t.uri===e.uri)),p=(0,i.toAliasQualifiedName)(e.content.target,m),c=r?.targets.findIndex((e=>(0,i.toAliasQualifiedName)(e.name,m)===p));if(-1===c){const t=l.get(e.uri);if(t){const n=t.get(p);n?n.push(e):t.set(p,[e])}else l.set(e.uri,new Map([[p,[e]]]))}else{const n={type:"insert-element",uri:e.uri,target:p,pointer:`/targets/${c}`,element:(0,s.convertAnnotationToInternal)(e.content.value,d)};t.push(n)}const u=e.content.value.term;let y=a.get(o.uri);y||(y=new Set,a.set(o.uri,y));let g=(0,i.resolveName)(u,m.aliasMap);if(void 0!==g.namespace)continue;g=(0,i.resolveName)(u,d.aliasMap),g.namespace&&y.add(g.namespace)}else if(e.kind===u.ChangeType.InsertEmbeddedAnnotation){const{reference:n,content:r}=e,{element:l,pointer:p}=P(m,o,n),c=(0,s.convertPointerInAnnotationToInternal)(l,e.pointer),u={type:"insert-element",uri:e.uri,target:e.reference.target,element:(0,s.convertAnnotationToInternal)(e.content.value,d),pointer:p+c};t.push(u);const y=e.content.value.term;let g=a.get(o.uri);g||(g=new Set,a.set(o.uri,g));let f=(0,i.resolveName)(y,m.aliasMap);if(void 0!==f.namespace)continue;f=(0,i.resolveName)(y,d.aliasMap),f.namespace&&g.add(f.namespace)}else if(e.kind===u.ChangeType.Insert){const n=this.convertInsert(o,m,e);n&&t.push(n)}else if(e.kind===u.ChangeType.Delete){const{reference:n}=e,{element:a,pointer:r,target:i}=P(m,o,n),l=(0,s.convertPointerInAnnotationToInternal)(a,e.pointer),p=l.split("/").slice(-3);if("attributes"===p[0]&&3===p.length){const[,,n]=p;if("value"===n){const n={type:"delete-attribute",uri:e.uri,pointer:r+l.split("/").slice(0,-1).join("/")};t.push(n)}}else if(""===e.pointer&&i.terms.length<=1){const n={type:"delete-element",target:i.name,uri:e.uri,pointer:r.split("/").slice(0,-2).join("/")};t.push(n)}else if(""===e.pointer&&i.terms.length>1){const n={type:"delete-element",target:i.name,uri:e.uri,pointer:r};t.push(n)}else if(""!==l){const n={type:"delete-element",uri:e.uri,target:i.name,pointer:r+l};t.push(n)}}else if(e.kind===u.ChangeType.Update){const{reference:n,content:a}=e,{element:i,pointer:l}=P(m,o,n),p="expression"===a.type?a.previousType??a.value.type:void 0,c=(0,s.convertPointerInAnnotationToInternal)(i,e.pointer,p);if(""===c){const n=this.convertInsert(o,m,e);n&&t.push(n)}else{const n=c.split("/").slice(-3);if("attributes"===n[0]&&3===n.length){const[,,a]=n;if("value"===a){const n={type:"update-attribute-value",uri:e.uri,pointer:l+c.split("/").slice(0,-1).join("/"),newValue:e.content.value.toString()};t.push(n)}}else if("expression"===a.type){const n=(0,s.convertPrimitiveValueToInternal)(a.value.type,a.value[a.value.type],m),i=a.previousType??a.value.type,p=(0,y.getGenericNodeFromPointer)(o,l+c);if(p?.type===r.ELEMENT_TYPE){if(void 0===a.previousType){if(p.attributes[i]){const a={type:"update-attribute-value",uri:e.uri,pointer:l+c+`/attributes/${i}`,newValue:n};t.push(a)}else if(p.name===i){const a={type:"replace-element-content",uri:e.uri,pointer:l+c,newValue:[(0,r.createTextNode)(n)]};t.push(a)}}else if(p.attributes[i]){const o={type:"replace-attribute",uri:e.uri,pointer:l+c+`/attributes/${i}`,newAttributeName:a.value.type,newAttributeValue:n};t.push(o)}else if(p.name===i){const o={type:"replace-element",uri:e.uri,pointer:l+c,newElement:(0,r.createElementNode)({name:a.value.type,content:[(0,r.createTextNode)(n)]})};t.push(o)}}else if(p?.type===r.ATTRIBUTE_TYPE)if(void 0===a.previousType){const a={type:"update-attribute-value",uri:e.uri,pointer:l+c,newValue:n};t.push(a)}else{const o={type:"replace-attribute",uri:e.uri,pointer:l+c,newAttributeName:a.value.type,newAttributeValue:n};t.push(o)}}else if("primitive"===a.type&&a.value){const n=(0,s.convertPointerInAnnotationToInternal)(i,e.pointer,a.expressionType),o={type:"replace-text",uri:e.uri,pointer:l+n+"/text",text:(0,r.createTextNode)(a.value.toString())};t.push(o)}else{const n=f(m,o,e);if(n){const a={type:"replace-element",uri:e.uri,pointer:l+c,newElement:n};t.push(a)}}}}else if(e.kind===u.ChangeType.Move){const{reference:n,index:a,moveReference:r}=e,{element:i,pointer:l}=P(m,o,n),p=(0,s.convertPointerInAnnotationToInternal)(i,e.pointer),c={type:"move-element",uri:e.uri,pointer:l+p,index:a,fromPointers:r?.reduce(((t,n)=>{const{element:a,pointer:r}=P(m,o,n.reference||e.reference);return t.push(...n.fromPointer.map((e=>{const t=(0,s.convertPointerInAnnotationToInternal)(a,e);return r+t}))),t}),new Array)};t.push(c)}}const p=[];for(const[e,t]of l){const a=n.annotationFiles.find((t=>t.uri===e));if(!a)throw new Error(`Invalid change. File ${e} does not exist.`);const o=(0,i.getAllNamespacesAndReferences)(a.namespace||{name:this.serviceName,type:"namespace"},a.references),r=this.getAliasInformation(o),l=(0,c.addAllVocabulariesToAliasInformation)(r,this.vocabularyAPI.getVocabularies());for(const[n,a]of t){const t={type:"insert-target",uri:e,target:{type:"target",name:n,terms:a.map((e=>(0,s.convertAnnotationToInternal)(e.content.value,l)))}};p.push(t)}}t.unshift(...p);for(const[e,n]of a.entries())for(const a of n.values()){const n=this.vocabularyAPI.getVocabulary(a);if(!n)continue;const o={type:"insert-reference",uri:e,reference:h(a,n.defaultAlias,n.defaultUri)};t.push(o)}return t}serializeTarget(e,t){const n=this.adapter.getCompiledService().annotationFiles.find((e=>e.uri===t));let a=null,o=[];return n&&(o=(0,i.getAllNamespacesAndReferences)(n.namespace,n.references)),a=(0,i.getAliasInformation)(o,this.getMetadataService().getNamespaces()),n||(a=(0,c.addAllVocabulariesToAliasInformation)(a,this.vocabularyAPI.getVocabularies())),this.adapter.serializeTarget((0,g.convertTargetAnnotationsToInternal)(e,a))}convertInsert(e,t,n){const{reference:a,content:o}=n,{element:l,pointer:p}=P(t,e,a),c=(0,s.convertPointerInAnnotationToInternal)(l,n.pointer);if("record"===o.type){return{type:u.INSERT_ELEMENT,uri:n.uri,target:n.reference.target,pointer:p+c,element:(0,s.convertRecordToInternal)(t,o.value),index:n.kind===u.ChangeType.Insert?n.index:void 0}}if("property-value"===o.type){return{type:u.INSERT_ELEMENT,uri:n.uri,target:n.reference.target,pointer:p+c,element:(0,s.convertPropertyValueToInternal)(t,o.value),index:n.kind===u.ChangeType.Insert?n.index:void 0}}if("collection"===o.type){return{type:u.INSERT_ELEMENT,uri:n.uri,target:n.reference.target,pointer:p+c,element:(0,s.convertCollectionToInternal)(t,o.value),index:n.kind===u.ChangeType.Insert?n.index:void 0}}if("expression"===o.type){const e=(0,s.convertExpressionToInternal)(t,o.value);if(e){return{type:u.INSERT_ELEMENT,uri:n.uri,target:n.reference.target,pointer:p+c,element:e}}}else if("primitive"===o.type)if(o.expressionType===u.ExpressionType.Unknown){const e=(0,s.convertPointerInAnnotationToInternal)(l,n.pointer.split("/").slice(0,-1).join("/")),a=function(e){const t=e.split("/").slice(-1)[0];if(t?.length)return t.substring(0,1).toUpperCase()+t.substring(1);return}(n.pointer);if(a){const r="Type"===a?(0,i.toAliasQualifiedName)(o.value.toString(),t):o.value.toString();return{type:"insert-attribute",uri:n.uri,pointer:p+e,name:a,value:r}}}else{if(o.expressionType===u.ExpressionType.Null){return{type:u.INSERT_ELEMENT,uri:n.uri,target:n.reference.target,pointer:p+c,element:(0,r.createElementNode)({name:"Null"})}}if("string"==typeof o.expressionType){return{type:"insert-attribute",uri:n.uri,pointer:p+c,name:o.expressionType,value:o.value.toString()}}}}},t.applyWorkspaceEdits=v},37054:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.FioriAnnotationService=void 0;var r=n(17404);Object.defineProperty(t,"FioriAnnotationService",{enumerable:!0,get:function(){return r.FioriAnnotationService}}),o(n(92035),t),o(n(47467),t)},92035:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAllVocabulariesToAliasInformation=t.ApiErrorCode=t.ApiError=void 0;var a=n(53298);Object.defineProperty(t,"ApiError",{enumerable:!0,get:function(){return a.ApiError}}),Object.defineProperty(t,"ApiErrorCode",{enumerable:!0,get:function(){return a.ApiErrorCode}});var o=n(21077);Object.defineProperty(t,"addAllVocabulariesToAliasInformation",{enumerable:!0,get:function(){return o.addAllVocabulariesToAliasInformation}})},47467:(e,t)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeType=t.MOD_TYPE_RECORD_RANGE=t.MOD_TYPE_EMBEDDED_ANNOTATION=t.MOD_TYPE_ANNOTATION=t.MOD_TYPE_COLLECTION=t.MOD_TYPE_RECORD=t.MOD_TYPE_PROP_VALUE=t.MOD_TYPE_EXPRESSION=t.MOD_TYPE_PRIMITIVE=t.ExpressionType=void 0,function(e){e.String="String",e.Bool="Bool",e.Decimal="Decimal",e.Date="Date",e.DateTimeOffset="DateTimeOffset",e.Float="Float",e.Guid="Guid",e.Int="Int",e.Path="Path",e.PropertyPath="PropertyPath",e.AnnotationPath="AnnotationPath",e.NavigationPropertyPath="NavigationPropertyPath",e.EnumMember="EnumMember",e.Collection="Collection",e.Record="Record",e.Unknown="Unknown",e.Null="Null"}(n||(t.ExpressionType=n={})),t.MOD_TYPE_PRIMITIVE="primitive",t.MOD_TYPE_EXPRESSION="expression",t.MOD_TYPE_PROP_VALUE="property-value",t.MOD_TYPE_RECORD="record",t.MOD_TYPE_COLLECTION="collection",t.MOD_TYPE_ANNOTATION="annotation",t.MOD_TYPE_EMBEDDED_ANNOTATION="embedded-annotation",t.MOD_TYPE_RECORD_RANGE="recordRange",function(e){e.InsertAnnotation="insert-annotation",e.InsertEmbeddedAnnotation="insert-embedded-annotation",e.Insert="insert",e.Delete="delete",e.Update="update",e.Move="Move"}(a||(t.ChangeType=a={}))},6157:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_ELEMENT_NAME=t.UPDATE_ATTRIBUTE_VALUE=t.MOVE_ELEMENT=t.INSERT_TARGET=t.INSERT_ELEMENT=t.INSERT_ATTRIBUTE=t.DELETE_ELEMENT=t.DELETE_ATTRIBUTE=void 0;var r=n(64346);Object.defineProperty(t,"DELETE_ATTRIBUTE",{enumerable:!0,get:function(){return r.DELETE_ATTRIBUTE}}),Object.defineProperty(t,"DELETE_ELEMENT",{enumerable:!0,get:function(){return r.DELETE_ELEMENT}}),Object.defineProperty(t,"INSERT_ATTRIBUTE",{enumerable:!0,get:function(){return r.INSERT_ATTRIBUTE}}),Object.defineProperty(t,"INSERT_ELEMENT",{enumerable:!0,get:function(){return r.INSERT_ELEMENT}}),Object.defineProperty(t,"INSERT_TARGET",{enumerable:!0,get:function(){return r.INSERT_TARGET}}),Object.defineProperty(t,"MOVE_ELEMENT",{enumerable:!0,get:function(){return r.MOVE_ELEMENT}}),Object.defineProperty(t,"UPDATE_ATTRIBUTE_VALUE",{enumerable:!0,get:function(){return r.UPDATE_ATTRIBUTE_VALUE}}),Object.defineProperty(t,"UPDATE_ELEMENT_NAME",{enumerable:!0,get:function(){return r.UPDATE_ELEMENT_NAME}}),o(n(47467),t),o(n(42677),t)},64346:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MOVE_ELEMENT=t.DELETE_ELEMENT=t.DELETE_ATTRIBUTE=t.UPDATE_ELEMENT_NAME=t.INSERT_ATTRIBUTE=t.INSERT_ELEMENT=t.INSERT_TARGET=t.DELETE_REFERENCE=t.INSERT_REFERENCE=t.UPDATE_ATTRIBUTE_VALUE=void 0,t.UPDATE_ATTRIBUTE_VALUE="update-attribute-value",t.INSERT_REFERENCE="insert-reference",t.DELETE_REFERENCE="delete-reference",t.INSERT_TARGET="insert-target",t.INSERT_ELEMENT="insert-element",t.INSERT_ATTRIBUTE="insert-attribute",t.UPDATE_ELEMENT_NAME="update-element-name",t.DELETE_ATTRIBUTE="delete-attribute",t.DELETE_ELEMENT="delete-element",t.MOVE_ELEMENT="move-element"},42677:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMPILE_ERROR_MSG=void 0,t.COMPILE_ERROR_MSG="Update rejected due to changes leading to compile errors"},44124:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PRIMITIVE_TYPE_NAMES=void 0,t.PRIMITIVE_TYPE_NAMES=["Bool","String","Decimal","EnumMember","Binary","Date","DateTimeOffset","TimeOfDay","Duration","Float","Int","Null","Guid","ModelElementPath","NavigationPropertyPath","PropertyPath","Path","AnnotationPath"]},47781:(e,t)=>{"use strict";function n(e,t,n){return`${e.repeat(t)}${n}`}Object.defineProperty(t,"__esModule",{value:!0}),t.increaseIndent=void 0,t.increaseIndent=function(e,t=0,a=!1){if(0===t)return e;const o=e.split("\n");for(let e=a?1:0;e<o.length;e++){const a=o[e];o[e]=n("    ",t,a)}return o.join("\n")}},12043:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.increaseIndent=t.getGenericNodeFromPointer=t.PRIMITIVE_TYPE_NAMES=t.pathFromUri=void 0;var a=n(60459);Object.defineProperty(t,"pathFromUri",{enumerable:!0,get:function(){return a.pathFromUri}});var o=n(44124);Object.defineProperty(t,"PRIMITIVE_TYPE_NAMES",{enumerable:!0,get:function(){return o.PRIMITIVE_TYPE_NAMES}});var r=n(20499);Object.defineProperty(t,"getGenericNodeFromPointer",{enumerable:!0,get:function(){return r.getGenericNodeFromPointer}});var i=n(47781);Object.defineProperty(t,"increaseIndent",{enumerable:!0,get:function(){return i.increaseIndent}})},60459:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pathFromUri=void 0;const a=n(57310);t.pathFromUri=function(e){const t=(0,a.fileURLToPath)(e);return"win32"===process.platform?((n=t.charAt(0)).toLowerCase()===n?n.toUpperCase():n.toLowerCase())+t.slice(1):t;var n}},20499:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGenericNodeFromPointer=void 0,t.getGenericNodeFromPointer=function(e,t){const n=t.slice(1).split("/");let a=e;for(const e of n){const t=a[e];if(!t)return;a=t}return a}},21077:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAllVocabulariesToAliasInformation=void 0,t.addAllVocabulariesToAliasInformation=function(e,t){const n=JSON.parse(JSON.stringify(e));return t.forEach(((t,a)=>{e.aliasMapVocabulary[a]||(n.aliasMapVocabulary[t.namespace]=t.namespace,n.aliasMapVocabulary[t.defaultAlias]=t.namespace,n.aliasMap[t.namespace]=t.namespace,n.aliasMap[t.defaultAlias]=t.namespace,n.reverseAliasMap[t.namespace]=t.defaultAlias)})),n}},60466:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XMLAnnotationServiceAdapter=void 0;const a=n(10383),o=n(69311),r=n(99476),i=n(85727),s=n(6164),l=n(6157),p=n(48434),c=n(13250),u=n(53298),m=n(24632);function d(e){const t=(0,i.createElementNode)({name:"Include",namespaceAlias:"Edmx",attributes:{Namespace:(0,i.createAttributeNode)("Namespace",e.name)}});return e.alias&&(t.attributes.Alias=(0,i.createAttributeNode)("Alias",e.alias)),(0,i.createElementNode)({name:"Reference",namespaceAlias:"Edmx",content:[t],attributes:{Uri:(0,i.createAttributeNode)("Uri",e.uri??"")}})}function y(e){if(e.rootElement)return"/rootElement"}function g(e){if(!e.rootElement)return;const t=e.rootElement.subElements.findIndex((e=>"DataServices"===e.name));if(-1===t)return;const n=e.rootElement.subElements[t].subElements.findIndex((e=>"Schema"===e.name));return-1!==n?`/rootElement/subElements/${t}/subElements/${n}`:void 0}function f(e,t,n=!0){const r=e.get(t.uri);if("string"!=typeof r)throw new Error(`File ${t.uri} not found in cache!`);const{cst:i,tokenVector:s}=(0,o.parse)(r),l=n?[]:(0,c.collectComments)(s);return{ast:(0,a.buildAst)(i,s),comments:l}}function h(e,t){let n=e;return t.split("/").map(((e,t)=>{if("content"===e||"targets"===e||"terms"===e)return n&&(n=n[e]),"subElements";if(0!==t&&n){let t=-1;const a=Number.parseInt(e,10),o=n[e];if(Number.isSafeInteger(a)&&Array.isArray(n))for(let e=0;e<=a&&e<n.length;e++){n[e].type===i.ELEMENT_TYPE&&t++}else o&&o.type===i.ATTRIBUTE_TYPE&&(t=Object.keys(n).findIndex((t=>t===e)));if(n=o,-1!==t)return t.toString()}return e})).join("/")}t.XMLAnnotationServiceAdapter=class XMLAnnotationServiceAdapter{constructor(e){this.service=e,this.metadataService=new s.MetadataService,this.documents=new Map,this.metadata=[],this.fileCache=new Map}setFileCache(e){this.fileCache=e}sync(e){this.documents.clear(),this.setFileCache(e);const{ast:t,comments:n}=f(e,this.service.metadataFile);this.documents.set(this.service.metadataFile.uri,{uri:this.service.metadataFile.uri,comments:n,ast:t,annotationFile:(0,r.convertDocument)(this.service.metadataFile.uri,t)});for(const t of this.service.annotationFiles){const{ast:n,comments:a}=f(e,t,!1),o=(0,r.convertDocument)(t.uri,n);this.documents.set(t.uri,{uri:t.uri,comments:a,ast:n,annotationFile:o})}this.metadata=(0,r.convertMetadataDocument)(this.service.metadataFile.uri,t),this.metadataService=new s.MetadataService({ODataVersion:this.service.odataVersion,isCds:!1}),this.metadataService.import(this.metadata,this.service.metadataFile.uri)}getAllFiles(){return[this.service.metadataFile,...this.service.annotationFiles]}getCompiledService(){const e=[this.service.metadataFile,...this.service.annotationFiles],t=[];for(const n of e){const e=this.documents.get(n.uri);if(!e)throw new u.ApiError(`Could not compile service. Missing document ${n.uri}`,u.ApiErrorCode.General);t.push(e.annotationFile)}return Object.freeze({odataVersion:this.service.odataVersion,annotationFiles:t,metadata:this.metadata})}getWorkspaceEdit(e){const t={},n=new Map;for(const t of e){let e=n.get(t.uri);const a=this.documents.get(t.uri);if(a){if(!e){const o=m.TextDocument.create(t.uri,"cds",0,this.fileCache?.get(t.uri)||"");e=new p.XMLWriter(a.ast,a.comments,o),n.set(t.uri,e)}switch(t.type){case"insert-target":{const n=g(a.ast);if(!n)throw new u.ApiError(`Could not process change ${t.type} ${t.uri} ${t.target}`,u.ApiErrorCode.General);e.addChange({type:l.INSERT_ELEMENT,pointer:n,element:(0,i.createElementNode)({name:"Annotations",attributes:{Target:(0,i.createAttributeNode)("Target",t.target.name)},content:t.target.terms})});break}case"insert-reference":{const n=y(a.ast);if(!n||!a.ast.rootElement)throw new u.ApiError(`Could not process change ${t.type} ${t.uri} ${t.reference.name}`,u.ApiErrorCode.General);e.addChange({type:l.INSERT_ELEMENT,pointer:n,element:d(t.reference),index:a.ast.rootElement.subElements.length>0?0:void 0});break}case l.INSERT_ELEMENT:{const n=g(a.ast);if(!n)throw new u.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} ${t.element.name}`,u.ApiErrorCode.General);e.addChange({type:l.INSERT_ELEMENT,pointer:n+h(a.annotationFile,t.pointer),element:t.element,index:t.index});break}case"delete-element":{const n=g(a.ast);if(!n)throw new u.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} `,u.ApiErrorCode.General);e.addChange({type:"delete-element",pointer:n+h(a.annotationFile,t.pointer)});break}case"delete-attribute":{const n=g(a.ast);if(!n)throw new u.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} `,u.ApiErrorCode.General);e.addChange({type:"delete-attribute",pointer:n+h(a.annotationFile,t.pointer)});break}case l.UPDATE_ATTRIBUTE_VALUE:{const n=g(a.ast);if(!n)throw new u.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} `,u.ApiErrorCode.General);e.addChange({type:l.UPDATE_ATTRIBUTE_VALUE,pointer:n+h(a.annotationFile,t.pointer),newValue:t.newValue});break}case"replace-attribute":{const n=g(a.ast);if(!n)throw new u.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} `,u.ApiErrorCode.General);e.addChange({type:"update-attribute-name",pointer:n+h(a.annotationFile,t.pointer),newName:t.newAttributeName}),e.addChange({type:l.UPDATE_ATTRIBUTE_VALUE,pointer:n+h(a.annotationFile,t.pointer),newValue:t.newAttributeValue});break}case"replace-element":{const n=g(a.ast);if(!n)throw new u.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} `,u.ApiErrorCode.General);e.addChange({type:"replace-element",pointer:n+h(a.annotationFile,t.pointer),newElement:t.newElement});break}case"replace-element-content":{const n=g(a.ast);if(!n)throw new u.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} `,u.ApiErrorCode.General);e.addChange({type:p.REPLACE_ELEMENT_CONTENT,pointer:n+h(a.annotationFile,t.pointer),newValue:t.newValue});break}case"insert-attribute":{const n=g(a.ast);if(!n)throw new u.ApiError(`Could not process change ${t.type} ${t.uri} ${t.pointer} ${t.name}`,u.ApiErrorCode.General);e.addChange({type:"insert-attribute",pointer:n+h(a.annotationFile,t.pointer),name:t.name,value:t.value});break}case"move-element":{const n=g(a.ast);if(n){const o=n+h(a.annotationFile,t.pointer);e?.addChange({type:"move-collection-value",pointer:o,index:t.index,fromPointers:t.fromPointers.map((e=>n+h(a.annotationFile,e)))})}}}}}for(const[e,a]of n.entries()){const n=a.getTextEdits();t[e]=n}return{changes:t}}validateChanges(e){return this.sync(e)}serializeTarget(e){return(0,r.serializeTarget)(e)}}},13250:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectComments=void 0;const a=n(85727);function o(e){const t=e.startLine??-1,n=e.startColumn??-1,o=e.endLine??-1,r=e.endColumn??-1;if(-1!==t&&-1!==n&&-1!==o&&-1!==r)return a.Range.create(t-1,n-1,o-1,r)}t.collectComments=function(e){const t=[];for(const n of e){if(3!==n.tokenTypeIdx)continue;const e=o(n);e&&t.push({value:n.image,range:e})}return t}},60109:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalEDMXService=t.XMLAnnotationServiceAdapter=void 0;var a=n(60466);Object.defineProperty(t,"XMLAnnotationServiceAdapter",{enumerable:!0,get:function(){return a.XMLAnnotationServiceAdapter}});var o=n(58311);Object.defineProperty(t,"getLocalEDMXService",{enumerable:!0,get:function(){return o.getLocalEDMXService}})},58311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalEDMXService=void 0;const a=n(57310),o=n(71017);function r(e,t){const n=(0,o.join)(e,t);return(0,a.pathToFileURL)(n).toString()}t.getLocalEDMXService=function(e,t,n){const a=e.apps[function(e,t){return e&&t.apps[e]?e:t.apps[""]?"":Object.keys(t.apps)[0]||""}(n,e)],o=a?.services[t];if(!o?.local)throw new Error(`Metadata file for service ${t} in app ${n} is not found!`);const i=o.local??"",s=r(e.root,i),l=o?.annotations?.local??"",p=r(e.root,l),c={uri:s,isReadOnly:!0},u=(a?.annotations?.[t]??[]).map((t=>{const n=r(e.root,t);return{uri:n,isReadOnly:n===p}}));return{type:"local-edmx",odataVersion:o.odataVersion??"2.0",metadataFile:c,annotationFiles:u}}},48434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeFromPointer=t.XMLWriter=t.insertElement=t.MOVE_COLLECTION_VALUE=t.UPDATE_ATTRIBUTE_NAME=t.REPLACE_ELEMENT_CONTENT=void 0;const a=n(41810),o=n(85727),r=n(99476),i=n(10383),s={...o.printOptions,useSnippetSyntax:!1};t.REPLACE_ELEMENT_CONTENT="replace-element-content",t.UPDATE_ATTRIBUTE_NAME="update-attribute-name",t.MOVE_COLLECTION_VALUE="move-collection-value",t.insertElement=function(e,t,n){const a={type:"insert-element",pointer:e,element:t};return void 0!==n&&(a.index=n),a};function l(e,t,n){if(void 0===n){const n=!0===e.syntax.isSelfClosing?2:1;return o.Position.create(t.end.line,t.end.character-n)}const a=e.attributes[n];if(!a)return;const i=(0,r.transformRange)(a.position);return i?o.Position.create(i.start.line,i.start.character-1):void 0}function p(e,t,n,i){if(0===n.length)return[];if(t){const l=b(t),p=(0,r.transformRange)(t.syntax.openBody);if(t.syntax.isSelfClosing&&p){const e=[">","\n",c(n,i,l)];e.push("\n");const a="    ".repeat(i>0?i-1:0);return e.push(`${a}</${t.name}>`),[o.TextEdit.replace(o.Range.create(p.end.line,p.end.character-2,p.end.line,p.end.character),e.join(""))]}return function(e,t,n,r,i){const l=[],[p,u]=function(e){const t=new Map,n=[];for(const a of e){let e=t.get(a.index);e||(e=[],n.push(a.index),t.set(a.index,e)),e.push(a)}return[n,t]}(n);for(const n of p){const p=u.get(n);if(!p)continue;const m=d(e,t,n??-1);if("none"===m.type)continue;const y=[];t.syntax.openBody?.endLine!==t.syntax.closeBody?.startLine||m.requiresNewLine||y.push("\n");const g=c(p,r,i)+"\n";if(m.requiresNewLine&&y.push("\n"),y.push(g),m.requiresNewLine){const e=(0,a.indent)(s.tabWidth,s.useTabs,r);y.push(e),m.redundantWhitespace&&l.push(o.TextEdit.del(m.redundantWhitespace))}l.push(o.TextEdit.insert(m.position,y.join("")))}return l}(e,t,n,i,l)}{const e=n.slice(-1)[0],t=function(e){const t={};for(const n of Object.keys(e.attributes)){if(!n.startsWith("xmlns"))continue;const{name:a,value:i}=e.attributes[n],[,s]=a.split(":");void 0!==s&&(i===r.EDMX_V4_NAMESPACE?t[o.EDMX_NAMESPACE_ALIAS]=s:i===r.EDM_V4_NAMESPACE&&(t[o.EDM_NAMESPACE_ALIAS]=s))}return t}(e.element),a=c([e],i,t);return[o.TextEdit.insert(o.Position.create(0,0),a)]}}function c(e,t,n){return e.map((e=>(0,r.printCsdlNodeToXmlString)((0,o.createElementNode)(e.element),s,{namespaces:n,cursorIndentLevel:t}))).join("\n")}function u(e,t,n){return(0,r.printCsdlNodeToXmlString)((0,o.createElementNode)(e.newElement),s,{namespaces:n,cursorIndentLevel:t}).trim()}function m(e,t,n){return(0,r.printCsdlNodeToXmlString)(e.newValue,s,{namespaces:n,cursorIndentLevel:t}).trim()}function d(e,t,n=-1){const a=-1!==n?t.subElements[n]:void 0;if(a){const r=g(a.position),i=function(e,t){const n=t.start.line-1;for(const a of e)if(a.range.end.line===n||a.range.start.line===t.end.line)return a;return}(e,r),s=y(t,n);if(s){const e=i?i.range.start:r.start,t=e.line===s.end.line;return{type:"child",position:t?e:o.Position.create(e.line,0),requiresNewLine:t,redundantWhitespace:t?o.Range.create(s.end,e):void 0}}return{type:"none"}}const i=(0,r.transformRange)(t.syntax.closeBody),s=y(t,t.subElements.length);if(i&&s){const e=i.start;return{type:"parent",position:e.line===s.end.line?e:o.Position.create(e.line,0),requiresNewLine:!1}}return{type:"none"}}function y(e,t){const n=e.subElements[t-1];return 0===t?(0,r.transformRange)(e.syntax.openBody):n?g(n.position):void 0}function g(e){return o.Range.create(e.startLine-1,e.startColumn-1,e.endLine-1,e.endColumn)}function f(e){if("XMLElement"===e?.type){const t=(0,r.transformRange)(e.syntax.openBody);if(t)return(0,a.getIndentLevel)(t.start.character,s.tabWidth)+1}return 0}function h(e,t){const n=t.slice(1).split("/");if(0===n.length)return;let a=e;for(const e of n){const t=a[e];if(!t)return;a=t}return a}function T(e,t){const n=[],a=t.reduce(((e,t)=>{const n=t.split("/"),a=n.slice(0,-2).join("/"),o=parseInt(n.slice(-1)[0],10),r=e.get(a);return r?r.push(o):e.set(a,[o]),e}),new Map);for(const[t,o]of a){const a=h(e,t);if("XMLElement"===a?.type){o.sort();for(let e=1,t=o[0],r=o[0];e<=o.length;e++){const i=o[e];void 0===i?n.push({parent:a,start:t,end:r}):r+1===i?r=i:(n.push({parent:a,start:t,end:r}),t=r=i)}}}return n}function P(e,t,n,a){const i=t.subElements[n-1],s=t.subElements[a],l=0===n?(0,r.transformRange)(t.syntax.openBody)?.end:E(i)?.end,p=E(s);if(l&&p){const t=o.Range.create(l,p.end),n=function(e,t){for(const n of e)if(n.range.start.line===t.end.line&&n.range.start.character>=t.end.character)return n}(e,p);return n?o.Range.create(t.start,n.range.end):t}}function E(e){return e.syntax.isSelfClosing?(0,r.transformRange)(e.syntax.openBody):(0,r.transformRange)(e.syntax.closeBody)}function v(e,t){if(0===e){return(0,r.transformRange)(t.syntax.openBody)?.end}if(void 0===e||e>=t.subElements.length){const e=t.subElements[t.subElements.length-1];if(!e)return;return(0,r.transformRange)(e.syntax.closeBody??e.syntax.openBody)?.end}if(e>0){const n=t.subElements[e-1];return(0,r.transformRange)(n.syntax.closeBody??n.syntax.openBody)?.end}}function b(e){const t={};for(const n of Object.keys(e.namespaces)){if(n===i.DEFAULT_NS)continue;const a=e.namespaces[n];a===r.EDMX_V4_NAMESPACE?t[o.EDMX_NAMESPACE_ALIAS]=n:a===r.EDM_V4_NAMESPACE&&(t[o.EDM_NAMESPACE_ALIAS]=n)}return t}t.XMLWriter=class XMLWriter{constructor(e,t,n){this.document=e,this.comments=t,this.textDocument=n,this.changes=[]}addChange(e){this.changes.push(e)}getTextEditsForClosingTag(e,t,n,a){const i=[],s=(0,r.transformRange)(e.syntax.closeBody);if(n&&s)if(t){const e=(0,r.transformRange)(t.syntax.closeBody);e&&i.push(o.TextEdit.del(o.Range.create(e.end,s.end)))}else i.push(o.TextEdit.del(o.Range.create(a.end,s.end)));return i}getTextEdits(){const e=[],n={};for(const e of this.changes){let t=n[e.pointer];t||(t=new Map,n[e.pointer]=t);let a=t.get(e.type);a||(a=[],t.set(e.type,a)),a.push(e)}for(const a of Object.keys(n)){const i=n[a],s=h(this.document,a),c=i.get("insert-element")??[],d=f(s);if(void 0===s||"XMLElement"===s.type){const t=p(this.comments,s,c,d);e.push(...t)}const y=i.get("update-element-name")??[];if(y.length>0&&"XMLElement"===s?.type){const t=y[y.length-1].newName,n=(0,r.transformRange)(s.syntax.openBody),a=(0,r.transformRange)(s.syntax.closeBody);if(n){const r=s.name?.length??0;n.start.character++,n.end.character=n.start.character+r,(s.syntax.isSelfClosing||a)&&e.push(o.TextEdit.replace(n,t)),a&&(a.start.character+=2,a.end.character--,e.push(o.TextEdit.replace(a,t)))}}const g=i.get("replace-element")??[],E=i.get(t.REPLACE_ELEMENT_CONTENT)??[],_=i.get("delete-element")??[],A=i.get("insert-attribute")??[],C=i.get("move-collection-value")??[];if("XMLElement"===s?.type)if(_.length>0){const t=(0,r.transformRange)(s.syntax.openBody),n=s.parent;if("XMLElement"===n.type){const i=parseInt(a.split("/").slice(-1)[0],10),l=n.subElements[i+1],p=n.subElements[i-1],c=(0,r.transformRange)(n.syntax.openBody),u=(0,r.transformRange)(n.syntax.closeBody);if(s.syntax.isSelfClosing&&t&&c&&!l&&!p&&u)e.push(o.TextEdit.del(o.Range.create(c.end,u.start)));else if(s.syntax.isSelfClosing&&t){const n=(0,r.transformRange)(p?.syntax?.closeBody??p?.syntax?.openBody);n?e.push(o.TextEdit.del(o.Range.create(n.end,t.start))):c&&e.push(o.TextEdit.del(o.Range.create(c.end,t.start))),e.push(o.TextEdit.del(t))}else if(t&&c){const n=this.getTextEditsForClosingTag(s,p,t,c);e.push(...n)}}else if(s.syntax.isSelfClosing&&t)e.push(o.TextEdit.del(t));else{const n=(0,r.transformRange)(s.syntax.closeBody);t&&n&&e.push(o.TextEdit.del(o.Range.create(t.start,n.end)))}}else if(g.length>0){const t=(0,r.transformRange)(s.syntax.openBody),n=(0,r.transformRange)(s.syntax.closeBody),a=u(g.slice(-1)[0],d-1,b(s));s.syntax.isSelfClosing&&t?e.push(o.TextEdit.replace(t,a)):t&&n&&e.push(o.TextEdit.replace(o.Range.create(t.start,n.end),a))}else if(E.length>0){const t=(0,r.transformRange)(s.syntax.openBody),n=(0,r.transformRange)(s.syntax.closeBody),a=m(E.slice(-1)[0],d-1,b(s));s.syntax.isSelfClosing&&t?e.push(o.TextEdit.replace(o.Range.create(t.end.line,t.end.character-2,t.end.line,t.end.character),`>${a}</${s.name}>`)):t&&n&&e.push(o.TextEdit.replace(o.Range.create(t.end,n.start),a))}else if(C.length>0)for(const t of C){const n=[],a=v(t.index,s);if(!a)continue;const i=T(this.document,t.fromPointers);for(const{parent:t,start:a,end:r}of i){const i=P(this.comments,t,a,r);i&&(n.push(this.textDocument.getText(i)),e.push(o.TextEdit.del(i)))}const l=(0,r.transformRange)(s.syntax.openBody);if(s.syntax.isSelfClosing&&l){const t="    ".repeat(d-1);e.push(o.TextEdit.replace(o.Range.create(l.end.line,l.end.character-2,l.end.line,l.end.character),`>${n.join("")}\n${t}</${s.name}>`))}else e.push(o.TextEdit.insert(a,n.join("")))}else{const t=(0,r.transformRange)(s.syntax.openBody);if(t){const n=new Map;for(const e of A){let t=n.get(e.index);t||(t=[],n.set(e.index,t)),t.push(e)}for(const[a,i]of n.entries()){const n=[],p=l(s,t,a);if(p){for(const e of i)n.push(`${e.name}="${(0,r.escapeAttribute)(e.value)}"`);if(n.length>0){const t=` ${n.join(" ")}`;e.push(o.TextEdit.insert(p,t))}}}}}else if("XMLAttribute"===s?.type){if((i.get("delete-attribute")??[]).length>0){const t=(0,r.transformRange)(s.position);t&&(t.start.character--,e.push(o.TextEdit.del(t)))}else{const t=i.get("update-attribute-name")??[],n=(0,r.transformRange)(s.syntax.key);if(n&&t.length>0){const a=t[t.length-1].newName;e.push(o.TextEdit.replace(n,a))}const a=i.get("update-attribute-value")??[],l=(0,r.transformRange)(s.syntax.value);if(l&&a.length>0){const t=a[a.length-1].newValue;l.start.character++,l.end.character--,e.push(o.TextEdit.replace(l,t))}}}}return e}},t.getNodeFromPointer=h},14219:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initI18n=t.i18n=void 0;const o=a(n(73577)),r=a(n(74316));t.i18n=o.default.createInstance(),t.initI18n=async function(){await t.i18n.init({resources:{en:{translation:r.default}},lng:"en",fallbackLng:"en",joinArrays:"\n\n"})}},3524:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.i18n=t.initI18n=t.rangeAt=t.positionAt=t.Range=t.Position=t.convertToPascalCase=t.convertToCamelCase=t.getI18nUniqueKey=t.extractI18nKey=t.getI18nTextType=t.getI18nMaxLength=t.getLineOffsets=t.printPropertiesFileI18nAnnotation=t.printPropertiesFileI18nEntry=t.loadPropertiesTexts=t.geI18ntDocumentation=void 0;var r=n(28075);Object.defineProperty(t,"geI18ntDocumentation",{enumerable:!0,get:function(){return r.geI18ntDocumentation}}),Object.defineProperty(t,"loadPropertiesTexts",{enumerable:!0,get:function(){return r.loadPropertiesTexts}}),Object.defineProperty(t,"printPropertiesFileI18nEntry",{enumerable:!0,get:function(){return r.printPropertiesFileI18nEntry}}),Object.defineProperty(t,"printPropertiesFileI18nAnnotation",{enumerable:!0,get:function(){return r.printPropertiesFileI18nAnnotation}});var i=n(8300);Object.defineProperty(t,"getLineOffsets",{enumerable:!0,get:function(){return i.getLineOffsets}});var s=n(11581);Object.defineProperty(t,"getI18nMaxLength",{enumerable:!0,get:function(){return s.getI18nMaxLength}}),Object.defineProperty(t,"getI18nTextType",{enumerable:!0,get:function(){return s.getI18nTextType}});var l=n(77981);Object.defineProperty(t,"extractI18nKey",{enumerable:!0,get:function(){return l.extractI18nKey}}),Object.defineProperty(t,"getI18nUniqueKey",{enumerable:!0,get:function(){return l.getI18nUniqueKey}});var p=n(41025);Object.defineProperty(t,"convertToCamelCase",{enumerable:!0,get:function(){return p.convertToCamelCase}}),Object.defineProperty(t,"convertToPascalCase",{enumerable:!0,get:function(){return p.convertToPascalCase}});var c=n(44666);Object.defineProperty(t,"Position",{enumerable:!0,get:function(){return c.Position}}),Object.defineProperty(t,"Range",{enumerable:!0,get:function(){return c.Range}});var u=n(27406);Object.defineProperty(t,"positionAt",{enumerable:!0,get:function(){return u.positionAt}}),Object.defineProperty(t,"rangeAt",{enumerable:!0,get:function(){return u.rangeAt}}),o(n(45924),t);var m=n(14219);Object.defineProperty(t,"initI18n",{enumerable:!0,get:function(){return m.initI18n}}),Object.defineProperty(t,"i18n",{enumerable:!0,get:function(){return m.i18n}});const d=n(14219);(async()=>{await(0,d.initI18n)()})()},77981:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getI18nUniqueKey=t.extractI18nKey=void 0;t.extractI18nKey=(e,t)=>t?e.replace(/{i18n>|{i18n&gt;/,"").replace("}","").trim():e.replace(/{@i18n>|{@i18n&gt;/,"").replace("}","").trim();t.getI18nUniqueKey=(e,n,a=e,o=1)=>{const r=e;let i=!1;return i=Array.isArray(n)?-1!==n.findIndex((t=>t.key.value===e)):void 0!==n[e],i?(e=`${a}${o}`,o++,(0,t.getI18nUniqueKey)(e,n,a,o)):r}},8300:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLineOffsets=void 0,t.getLineOffsets=function(e){const t=[0];for(let n=0;n<e.length;n++){const a=e[n];"\n"===a?t.push(n+1):"\r"===a&&(n+1<e.length&&"\n"===e[n+1]&&n++,t.push(n+1))}return t}},44666:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Range=t.Position=void 0,t.Position={create:(e,t)=>({line:e,character:t})},t.Range={create:function(e,n,a,o){if(!("number"!=typeof e||isNaN(e)||"number"!=typeof n||isNaN(n)||"number"!=typeof a||isNaN(a)||"number"!=typeof o||isNaN(o)))return{start:t.Position.create(e,n),end:t.Position.create(a,o)};if("object"==typeof e&&"object"==typeof n)return{start:e,end:n};throw new Error(`Range#create called with invalid arguments ${e}, ${n}, ${a}, ${o}`)}}},27406:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rangeAt=t.positionAt=void 0;const a=n(44666);function o(e,t,n){const o=Math.max(Math.min(t,n),0);let r=0,i=e.length;if(0===i)return a.Position.create(0,o);for(;r<i;){const t=Math.floor((r+i)/2);e[t]>o?i=t:r=t+1}const s=r-1;return a.Position.create(s,o-e[s])}t.positionAt=o,t.rangeAt=function(e,t,n,r){return a.Range.create(o(e,t,r),o(e,n,r))}},28075:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.geI18ntDocumentation=t.printPropertiesFileI18nEntry=t.printPropertiesFileI18nAnnotation=t.loadPropertiesTexts=void 0;const a=n(14219),o=n(44666),r=n(76754),i=n(11581);function s(e,t,n){const{start:a}=e.range;return-1!==t?{value:e.value.slice(1,t),range:o.Range.create(a.line,a.character,a.line,a.character+t)}:-1!==n?{value:e.value.slice(1,n),range:o.Range.create(a.line,a.character+1,a.line,a.character+n)}:{value:e.value.slice(1),range:o.Range.create(a.line,a.character,a.line,a.character+e.value.length)}}function l(e,t){if(!t){const t=(0,i.getI18nMaxLength)(e);return`${(0,i.getI18nTextType)(t)},${t}`}if("string"==typeof t){return`${e.length<=120?"X":"Y"}${t}`}if("object"==typeof t){const{textType:e,note:n,maxLength:a}=t,o=[e];return void 0!==a&&o.push(",",a.toString()),n&&o.push(":"," ",n.trim()),o.join("")}return""}t.loadPropertiesTexts=(e,t="")=>{const n=[],a=(0,r.parseProperties)(e);for(let e=0;a.length>e;e++){const r=a[e];if("key-element-line"===r.type){const i=a[e-1],l={filePath:t,key:{value:r.key.value,range:r.key.range},value:{value:r.element.value,range:r.element.range}};if("comment-line"===i?.type){const{start:e}=i.range,t=i.value.indexOf(","),n=i.value.indexOf(":");l.annotation={textType:s(i,t,n)},-1!==t&&(l.annotation.maxLength={value:parseInt(i.value.slice(t+1,-1===n?void 0:n)),range:o.Range.create(e.line,e.character+t+1,e.line,e.character+(-1===n?i.value.length:n))}),-1!==n&&(l.annotation.note={value:i.value.slice(n+1),range:o.Range.create(e.line,e.character+n+1,e.line,e.character+i.value.length)})}n.push(l)}}return n},t.printPropertiesFileI18nAnnotation=l,t.printPropertiesFileI18nEntry=function(e,t,n){return`\n${`#${l(t,n)}`}\n${`${e}=${t}`}\n`};t.geI18ntDocumentation=e=>{const t=[],n=`**${a.i18n.t("Text_Key")}:** ${e.key.value}`,o=`**${a.i18n.t("Text_Value")}:** ${e.value.value}`;if(t.push(n,o),e.annotation){const n=l(e.value.value,{maxLength:e.annotation.maxLength?.value,textType:e.annotation.textType.value,note:e.annotation.note?.value});t.push(`**${a.i18n.t("Additional_Information")}:** ${n}`)}return t.join("\n\n")}},76754:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tokenize=t.createToken=t.parseProperties=void 0;const a=n(8300),o=n(44666),r=n(27406);t.parseProperties=function(e){const t=y(e),n=(0,a.getLineOffsets)(e),i=e.length;let s=0;const l=e=>e?t[s+e]:t[s],p=()=>t[s++],c=()=>s>=t.length;function u(){const e=p();return{type:"comment-line",value:e.image,range:(0,r.rangeAt)(n,e.start,e.end,i)}}function m(){const e=p(),t={type:"text",value:e.image,range:(0,r.rangeAt)(n,e.start,e.end,i)};let a,s,u=!0;if("whitespace"===l().type&&p(),"separator"===l().type){a=s=p().end,"whitespace"===l().type&&p()}let m="";for(;!c()&&"end-of-line"!==l()?.type;){for(;!c()&&"end-of-line"!==l()?.type&&"continuation-line-marker"!==l()?.type;)if("text"===l()?.type||"whitespace"===l()?.type){const e=p();u&&(a=e.start,u=!1),s=e.end,m+=e.image}"continuation-line-marker"===l()?.type&&(p(),"whitespace"===l().type&&p())}const d={type:"text",value:m,range:(0,r.rangeAt)(n,a??0,s??0,i)};return{type:"key-element-line",key:t,element:d,range:o.Range.create(t.range.start,d.range.end)}}return function(){const e=[];for(;!c();){const t=l();"comment"===t.type?e.push(u()):"text"===t.type&&e.push(m()),"end-of-line"!==l()?.type&&"whitespace"!==l()?.type||p()}return e}()};const i=/=|:/,s=/#|!/,l=/\r|\n|\r\n/,p=/[ \t\f]+/,c=/[0-9a-fA-F]/,u={"\\\\":"\\","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t"},m={...u,"\\=":"=","\\:":":"};function d(e,t,n,a){return{type:e,image:t,start:n,end:a}}function y(e){const t=[];let n=0,a="",o=0;for(;n<e.length;){let r=e[n];if("\n"===r)t.push(d("end-of-line","\n",o,n+1)),o=n+1;else if("\r"===r)n+1<e.length&&"\n"===e[n+1]?(t.push(d("end-of-line",r+e[n+1],n,n+2)),o=n+2,n++):(t.push({type:"end-of-line",image:r,start:n,end:n+1}),o=n+1);else if(s.test(r)){for(a+=r;n+1<e.length;){const t=e[n+1];if(l.test(t))break;a+=t,n++}t.push(d("comment",a,o,n+1)),a="",o=n+1}else if(p.test(r)){for(a+=r;n+1<e.length;){const t=e[n+1];if(!p.test(t)||l.test(t))break;a+=t,n++}t.push(d("whitespace",a,o,n+1)),a="",o=n+1}else{for(;n<e.length;)if(r=e[n],"\\"!==r){if(p.test(r)||i.test(r)||l.test(r))break;a+=r,n++}else{const t=e[n+1];if(void 0!==t){const o=m[r+t];if(void 0!==o)a+=o,n+=2;else if(r+t==="\\u"){const t=n+4+1;let o="";for(let a=n+2;a<=t;a++){const t=e[a];if(!c.test(t))break;o+=t}4===o.length?(a+=String.fromCharCode(parseInt(o,16)),n+=6):(a+="\\u"+o,n+=2+o.length)}else n++}}if(t.push(d("text",a,o,n)),a="",o=n,p.test(r)){for(a+=r;n+1<e.length;){const t=e[n+1];if(!p.test(t)||l.test(t))break;a+=t,n++}t.push(d("whitespace",a,o,n+1)),a="",o=n+1,n++,r=e[n]}if(i.test(r)&&(t.push(d("separator",r,o,n+1)),o=n+1,n++,r=e[n]),p.test(r)){for(a=r;n+1<e.length;){const t=e[n+1];if(!1===p.test(t)||l.test(t))break;a+=t,n++}t.push(d("whitespace",a,o,n+1)),a="",o=n+1,n++,r=e[n]}if("\n"===r)t.push(d("end-of-line","\n",o,n+1)),o=n+1;else if("\r"===r)n+1<e.length&&"\n"===e[n+1]?(t.push(d("end-of-line",r+e[n+1],n,n+2)),o=n+2,n++):(t.push({type:"end-of-line",image:r,start:n,end:n+1}),o=n+1);else{for(;n<e.length;)if(r=e[n],"\\"!==r)if(p.test(r)){for(a&&(t.push(d("text",a,o,n)),a="",o=n),a=r;n+1<e.length;){const t=e[n+1];if(!1===p.test(t)||l.test(t))break;a+=t,n++}t.push(d("whitespace",a,o,n+1)),a="",o=n+1,n++,r=e[n]}else{if(l.test(r))break;a+=r,n++}else{const i=e[n+1];if(void 0!==i){const s=u[r+i];if(void 0!==s)a+=s,n+=2;else if(r+i==="\\u"){const t=n+4+1;let o="";for(let a=n+2;a<=t;a++){const t=e[a];if(!c.test(t))break;o+=t}4===o.length?(a+=String.fromCharCode(parseInt(o,16)),n+=6):(a+="\\u"+o,n+=2+o.length)}else"\n"===i?(t.push(d("text",a,o,n)),t.push(d("continuation-line-marker","\\\n",n,n+2)),o=n+2,n+=2,a=""):"\r"===i?n+1<e.length&&"\n"===e[n+2]?(t.push(d("text",a,o,n)),t.push(d("continuation-line-marker","\\\r\n",n,n+3)),o=n+3,n+=3,a=""):(t.push(d("text",a,o,n)),t.push(d("continuation-line-marker","\\\r",n,n+2)),o=n+2,n+=2,a=""):n++}}if(t.push(d("text",a,o,n)),a="",o=n,l.test(r))continue}}n++}return t}t.createToken=d,t.tokenize=y},11581:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getI18nTextType=t.getI18nMaxLength=void 0;const a=n(45924);t.getI18nMaxLength=e=>{const t=e.length;return t<8?5*t:t<=30?3*t:1.5*t};t.getI18nTextType=e=>e<=120?a.SapShortTextType.Label:a.SapLongTextType.MessageText},41025:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPascalCase=t.convertToCamelCase=void 0;t.convertToCamelCase=(e="",t=4)=>{let n="";const a=e.replace(/[^a-zA-Z0-9 ]/g,"").trim().split(" "),o=a.length>=t?t:a.length;for(let e=0;o>e;e++){const t=a[e];if(0===e)n+=t.toLowerCase();else{n+=`${t.charAt(0).toUpperCase()}${t.substr(1).toLowerCase()}`}}return n};t.convertToPascalCase=(e,t=4)=>{let n="";const a=e.replace(/[^a-zA-Z0-9 ]/g,"").trim().split(" "),o=a.length>=t?t:a.length;for(let e=0;o>e;e++){const t=a[e];n+=`${t.charAt(0).toUpperCase()}${t.substr(1).toLowerCase()}`}return n}},45924:(e,t)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.NOT_RELEVANT_FOR_TRANSLATION=t.SapLongTextType=t.SapShortTextType=void 0,function(e){e.Accessibility="XACT",e.AlternativeText="XALT",e.BreadcrumbStep="XBCB",e.BulletListItemText="XBLI",e.ButtonText="XBUT",e.Caption="XCAP",e.Cell="XCEL",e.Checkbox="XCKL",e.ColumnHeader="XCOL",e.Tabstrip="XCRD",e.DataNavigationText="XDAT",e.Label="XFLD",e.Frame="XFRM",e.Term="XGLS",e.GroupTitle="XGRP",e.Heading="XHED",e.LegendText="XLGD",e.HyperlinkText="XLNK",e.LogEntry="XLOG",e.ListBoxItem="XLST",e.MenuHeader="XMEN",e.MenuItem="XMIT",e.MessageText="XMSG",e.RadioButton="XRBL",e.RoadmapStep="XRMP",e.TableRowHeading="XROW",e.SelectionText="XSEL",e.TabStripText="XTBS",e.TableTitle="XTIT",e.TreeNodeText="XTND",e.QuickInfoText="XTOL",e.GeneralText="XTXT"}(n||(t.SapShortTextType=n={})),function(e){e.Accessibility="YACT",e.BulletListItemText="YBLI",e.Definition="YDEF",e.Description="YDES",e.Explanation="YEXP",e.FaqAnswer="YFAA",e.Faq="YFAQ",e.GlossaryDefinition="YGLS",e.Information="YINF",e.Instruction="YINS",e.LogEntry="YLOG",e.ErrorMessage="YMSE",e.MessageText="YMSG",e.InformationMessageLong="YMSI",e.WarningMessage="YMSW",e.TechnicalText="YTEC",e.Ticker="YTIC",e.GeneralTextLong="YTXT"}(a||(t.SapLongTextType=a={})),t.NOT_RELEVANT_FOR_TRANSLATION="NOTR"},63940:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogSeverity=t.ChannelName=t.logger=t.createLogger=void 0;var a=n(36700);Object.defineProperty(t,"createLogger",{enumerable:!0,get:function(){return a.createLogger}}),Object.defineProperty(t,"logger",{enumerable:!0,get:function(){return a.logger}});var o=n(82959);Object.defineProperty(t,"ChannelName",{enumerable:!0,get:function(){return o.ChannelName}}),Object.defineProperty(t,"LogSeverity",{enumerable:!0,get:function(){return o.LogSeverity}})},36700:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.createLogger=void 0;const i=r(n(14503));function s(e){return i.createLogger({level:e||"info",transports:new i.transports.Console})}t.createLogger=s,t.logger=s("info")},82959:(e,t)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelName=t.LogSeverity=void 0,function(e){e.Error="error",e.Warn="warn",e.Info="info",e.Debug="debug"}(n||(t.LogSeverity=n={})),function(e){e.AnnotationModeler="SAP Fiori tools - XML Annotation Language Server",e.AppGenerator="SAP Fiori tools - Application Generator",e.ApplicationModeler="SAP Fiori tools - Application Modeler",e.Help="SAP Fiori tools - Help",e.Prototyping="SAP Fiori tools - Requirement Gathering",e.ProjectValidation="SAP Fiori tools - Project Validation",e.ServiceModeler="SAP Fiori tools - Service Modeler",e.FioriToolsAI="SAP Fiori tools - AI"}(a||(t.ChannelName=a={}))},26770:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveApiHubApiKey=t.getApiHubApiKey=void 0;const a=n(8420),o=n(89389),r=n(45116);async function i(e=console){const t=(0,o.getSecureStore)(e),n=a.ServiceName.ApiHub,i=await t.retrieve(n,r.API_HUB_API_KEY);return i&&e.info("Retrieved stored API hub key"),i}t.getApiHubApiKey=i,t.saveApiHubApiKey=async function(e,t=console){const n=(0,o.getSecureStore)(t),s=a.ServiceName.ApiHub;return void 0!==await i(t)&&await n.delete(s,r.API_HUB_API_KEY),n.save(s,r.API_HUB_API_KEY,e)}},39077:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtoCatalog=void 0;const a=n(83835),o=n(86303),r=n(19947);t.AtoCatalog=class AtoCatalog{static async getATOData({system:e,credentials:t,log:n=console,connection:a,systemInstance:i}){let s,l;if(i){s={...i.config,service:r.ATO_CATALOG_URL_PATH};const e=i.serialize();l={username:e.username,password:e.password,serviceKeysContents:e.serviceKeys}}else s={...e,service:r.ATO_CATALOG_URL_PATH},t&&(l=t);const p=await new o.ODataClient({system:s,credentials:l,log:n,connection:a,autoAddTrailingSlash:!1}).get();return this.getAtoData(p)}static getAtoData(e){const t=(0,a.xmlToJson)(e)?.settings;if(!t)throw new Error("ATO settings unavailable");return{tenantType:t.tenantType,operationsType:t.operationsType,isExtensibilityDevSystem:!0===t.isExtensibilityDevelopmentSystem,devPackage:t.developmentPackage,devPrefix:t.developmentPrefix,isConfigured:t.isConfigured}}}},19947:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CATALOG_REQ_TYPE=t.Catalog=t.ODataVersion=t.ODATA_SKIP_QUERY=t.ODATA_COUNT_QUERY=t.ATO_CATALOG_URL_PATH=t.V2_ODATA_CATALOG_FILTER_FOR_S4_HANA_SERVICES=t.V4_RECOMMENDED_SERVICES_PATH_PROD=t.V4_SERVICES_PATH_PROD=t.V4_SERVICES_PATH_DEV=t.V2_RECOMMENDED_SERVICES_PATH=t.V2_SERVICES_PATH=t.V4_CATALOG_URL_PATH_PROD=t.V4_CATALOG_URL_PATH_DEV=t.V2_CATALOG_URL_PATH=void 0;const a=n(86303);var o,r;t.V2_CATALOG_URL_PATH="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2",t.V4_CATALOG_URL_PATH_DEV="/sap/opu/odata4/iwfnd/config/default/iwfnd/catalog/0001",t.V4_CATALOG_URL_PATH_PROD="/sap/opu/odata4/iwfnd/config/default/iwfnd/catalog/0002",t.V2_SERVICES_PATH="/ServiceCollection",t.V2_RECOMMENDED_SERVICES_PATH="/RecommendedServiceCollection",t.V4_SERVICES_PATH_DEV="/ServiceGroups('%2FIWBEP%2FALL')?$expand=Systems($expand=Services)",t.V4_SERVICES_PATH_PROD="/ServiceGroups?$expand=DefaultSystem($expand=Services)",t.V4_RECOMMENDED_SERVICES_PATH_PROD="/ServiceGroups?$expand=DefaultSystem($expand=RecommendedServices)",t.V2_ODATA_CATALOG_FILTER_FOR_S4_HANA_SERVICES="?%24filter=((IsSapService%20eq%20true)and(ReleaseStatus%20eq%20%27RELEASED%27))or((IsSapService%20eq%20false))",t.ATO_CATALOG_URL_PATH="/sap/bc/adt/ato/settings",t.ODATA_COUNT_QUERY="$count=true",t.ODATA_SKIP_QUERY="$skiptoken",function(e){e.v2="2",e.v4="4"}(o||(t.ODataVersion=o={}));class Catalog extends a.ODataClient{}t.Catalog=Catalog,function(e){e[e.RECOMMENDED=0]="RECOMMENDED",e[e.LEGACY=1]="LEGACY"}(r||(t.CATALOG_REQ_TYPE=r={}))},79101:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.getCatalog=void 0;const r=n(21148);o(n(19947),t),o(n(39077),t),o(n(36579),t),o(n(32791),t),o(n(13185),t),t.getCatalog=function(e){return e.odataVersion===r.ODataVersion.v4?new r.V4Catalog(e):new r.V2Catalog(e)}},13185:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isS4HanaCloudSystem=void 0,t.isS4HanaCloudSystem=function(e){return"CUSTOMER"===e.tenantType&&"C"===e.operationsType&&!0===e.isExtensibilityDevSystem&&""!==e.devPrefix&&""!==e.devPackage}},36579:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.V2Catalog=void 0;const a=n(48269),o=n(39077),r=n(19947),i=n(13185);class V2Catalog extends r.Catalog{constructor({system:e,credentials:t,log:n=console,connection:o,postConnectionCallback:i,ignoreCertError:s}){if(t?.serviceKeys||t?.serviceKeysContents){const n=(0,a.getServiceInfo)(t);t.serviceInfo=n,e.url=n.url,n.catalogs?.abap?.path&&(e.service=n.catalogs.abap.path)}else e.service||(e.service=r.V2_CATALOG_URL_PATH);super({system:e,credentials:t,log:n,connection:o,postConnectionCallback:i,ignoreCertError:s})}async listServices(e=!1){let t;if(e)t=await this.get(r.V2_RECOMMENDED_SERVICES_PATH);else{let e=!1;try{await this.getConnection(),e=(0,i.isS4HanaCloudSystem)(await o.AtoCatalog.getATOData({system:this.system,connection:this.connection,log:this.log,credentials:this.credentials}))}catch(e){}t=await this.get(e?r.V2_SERVICES_PATH+r.V2_ODATA_CATALOG_FILTER_FOR_S4_HANA_SERVICES:r.V2_SERVICES_PATH)}if(!Array.isArray(t))throw new Error("Error parsing service list");return t}async findService({title:e,path:t}){let n=1;if(!e){const a=t.replace(/\/$/,"").split("/").pop().split(";");e=a[0];const o=a.slice(1);if(!e)throw new Error(`Cannot determine service title from path: ${t}`);o.forEach((e=>{const[t,a]=e.split("=");"v"===t&&(n=parseInt(a,10))}))}e=e.toUpperCase();const a=encodeURI(`/ServiceCollection/?$filter=Title eq '${e}' and TechnicalServiceVersion eq ${n}&$format=json`),o=await this.get(a);if(o.length>1){const e=o.filter((e=>e.ServiceUrl?.toUpperCase().includes(t.toUpperCase())));if(e.length>1)this.log.warn("Service filter was not sufficient to identify one service.");else if(e.length>0)return this.log.info(`Service filter chose service: ${e[0].TechnicalServiceName}`),e[0]}return o.length>0?o[0]:void 0}async getAnnotations({id:e,title:t,path:n}){if(!e&&!t&&!n)throw new Error("No filter parameters passed in");const a=await this.getServiceAnnotations({id:e,title:t,path:n}),o=[];if(a)for(const e of a){const t=`/Annotations(TechnicalName='${encodeURIComponent(e.TechnicalName)}',Version='${e.Version}')/$value/`,n=await this.get(t);n?o.push({TechnicalName:e.TechnicalName,Version:e.Version,Definitions:n,Uri:this.system.service+t}):this.log.warn(`No annotations found for TechnicalName=${e.TechnicalName}, Version=${e.Version}`)}return o}async getServiceAnnotations({id:e,title:t,path:n}){if(!e){const a=await this.findService({title:t,path:n});a&&(e=a.ID)}return e?this.get(`/ServiceCollection('${encodeURIComponent(e)}')/Annotations?$format=json`):void 0}}t.V2Catalog=V2Catalog},32791:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.V4Catalog=void 0;const a=n(48269),o=n(19947);class V4Catalog extends o.Catalog{constructor({system:e,credentials:t,log:n=console,connection:r,postConnectionCallback:i,ignoreCertError:s}){if(t?.serviceKeys||t?.serviceKeysContents){const n=(0,a.getServiceInfo)(t);t.serviceInfo=n,e.url=n.url}e.service=o.V4_CATALOG_URL_PATH_PROD,super({system:e,credentials:t,log:n,connection:r,postConnectionCallback:i,ignoreCertError:s})}parseServiceData(e,t){if(e&&Array.isArray(e)){const n=t?"RecommendedServices":"Services",a=[];return e.forEach((({DefaultSystem:e,GroupId:t})=>{a.push(...e[n].map((e=>Object.assign(e,{GroupId:t}))))})),a}return[]}async listServices(e=!1){if(!this.services){const t=e?o.V4_RECOMMENDED_SERVICES_PATH_PROD:o.V4_SERVICES_PATH_PROD;this.services=[];const n=await this.get(`${t}&${o.ODATA_COUNT_QUERY}`);if(!Array.isArray(n.value))throw new Error("Error parsing service list");if(this.services=this.services.concat(this.parseServiceData(n.value,e)),n["@odata.nextLink"]){let a=parseInt(n["@odata.nextLink"]?.split("skiptoken=")[1]);for(;!isNaN(a)&&a>0;){const n=await this.get(`${t}&${o.ODATA_SKIP_QUERY}=${a}`);this.services.push(...this.parseServiceData(n.value,e)),a=parseInt(n["@odata.nextLink"]?.split("skiptoken=")[1])}}}return this.services}async getAnnotations(){return Promise.resolve([])}}t.V4Catalog=V4Catalog},60465:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.newHttpClient=void 0;const s=r(n(28887)),l=n(81247),p=i(n(95687)),c=n(57310);t.newHttpClient=async function({system:e,credentials:t,log:n,existingConnection:a,autoAddTrailingSlash:o=!0,timeout:r,ignoreCertError:i,postConnectionCallback:u,disableSAML:m=!1}){const d=a||await(0,l.connect)({target:e,credentials:t,log:n,autoAddTrailingSlash:o,timeout:r,ignoreCertError:i,postConnectionCallback:u,disableSAML:m}),y=new s.AxiosHeaders;y.Cookie=d.cookies.toString(),d.xsrfToken&&(y["x-csrf-token"]=d.xsrfToken);const g={baseURL:new c.URL(e.service,e.url).toString(),headers:y,withCredentials:!0,httpsAgent:new p.default.Agent({rejectUnauthorized:!i})};return d?.auth&&(g.auth=d.auth),s.default.defaults.headers.common.Accept="application/json,application/xml,text/plain,*/*",{connection:d,httpClient:s.default.create(g)}}},21148:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(86303),t),o(n(79101),t),o(n(22860),t),o(n(69599),t)},22860:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.printErrorDetails=t.prettyPrintError=t.prettyPrintMessage=void 0;const o=a(n(90995)),r=(0,a(n(84983)).default)("ux-odata-client");function i(e,t,n){n.info("Click this link for more information:");const a=t.concat(e).replace(/'/g,"%27");n.info(a)}function s(e,t,n,a=!1){e?"success"===(e=e.toLowerCase())?n.info(o.default.greenBright(t)):("warning"===e&&(e="warn"),n[e](t)):a?n.error(t):n.info(t)}function l(e,t,n){e&&e.forEach((e=>{e.message.startsWith("<![CDATA")||("error"===e.severity?s(e.severity,e.message,t,!0):r(e.message)),e.longtext_url&&n?.frontendUrl&&i(e.longtext_url,n.frontendUrl,t)}))}t.prettyPrintMessage=function(e,t,n){s(e.severity,e.message,t),e.longtextUrl&&n.frontendUrl&&i(e.longtextUrl,n.frontendUrl,t),e.details&&e.details.forEach((e=>{s(e.severity,e.message,t)}))},t.prettyPrintError=function(e,t,n){if(e){if(t.error(`Backend error message: ${e.message?.value}`),t.error("<<< Backend error details"),e.innererror?.errordetails&&l(e.innererror.errordetails,t,n),e.innererror?.Error_Resolution)for(const n in e.innererror.Error_Resolution)t.error(`${n}: ${e.innererror.Error_Resolution[n]}`);t.error(">>>")}},t.printErrorDetails=l},86303:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ODataClient=void 0;const o=n(8420),r=n(43895),i=n(60465),s=n(22860),l=n(41785),p=n(69599),c=n(83835),u=n(74969),m=a(n(69206));class ODataClient{constructor({system:e,credentials:t,log:n=console,connection:a,autoAddTrailingSlash:o=!0,timeout:r,ignoreCertError:i,postConnectionCallback:s,disableSAML:l=!1}){this.autoAddTrailingSlash=!0,this.system=e,this.credentials=t,this.log=n,this.connection=a,this.autoAddTrailingSlash=o,this.timeout=r,this.ignoreCertError=i,this.postConnectionCallback=s,this.disableSAML=l,this.initDebugLogger(),e&&p.TlsPatch.isPatchRequired(e.url)&&p.TlsPatch.apply(),this.validateSysAuthType(e,t)}initDebugLogger(){ODataClient.hasAxiosDebugLoggerConfig||((0,m.default)({request:(e,t)=>{e(`Request ${t.method?.toUpperCase()} ${this.buildFullUrl(t)}`),e(t)},response:(e,t)=>{e(`Response ${t.status} ${t.statusText} ${this.buildFullUrl(t.config)}`),e(t)},error:(e,t)=>{e(`Error ${t.response?.config?.method?.toUpperCase()} ${t.response?.status} ${this.buildFullUrl(t.response?.config??{})}\n`),e(t.response),e(t)}}),ODataClient.hasAxiosDebugLoggerConfig=!0)}buildFullUrl(e){return e.baseURL?`${e.baseURL}${e.url}`:`${e.url}`}validateSysAuthType(e,t){if(e.authenticationType=e.authenticationType||(0,c.guessAuthType)({credentials:t,fallback:!0}),!Object.values(o.AuthenticationType).includes(e.authenticationType))throw new u.UnknownSystemAuthenticationType(e.authenticationType)}logError(e,t){this.log.error(e.message),e.isAxiosError&&e.response.data.error&&(0,s.prettyPrintError)(e.response.data.error,this.log,t)}async getClient(){if(!this.client){(0,r.isAppStudio)()&&await(0,l.updateSystemConfig)(this.system);const{connection:e,httpClient:t}=await(0,i.newHttpClient)({system:this.system,credentials:this.credentials,log:this.log,existingConnection:this.connection,autoAddTrailingSlash:this.autoAddTrailingSlash,timeout:this.timeout,ignoreCertError:this.ignoreCertError,updateUserInfo:this.updateUserInfo,postConnectionCallback:this.postConnectionCallback,disableSAML:this.disableSAML});this.connection=e,this.client=t}return this.client}async getConnection(){return this.connection||await this.getClient(),this.connection}async metadata(e=!0){const t=this.system.service?.endsWith("/")?"$metadata":"/$metadata",n=await this.get(t,{Accept:"application/xml"});try{return e?(0,r.filterReferenceUri)(n):n}catch{return n}}async get(e,t){const n=await this.getClient(),a=await(n.get(e,void 0===t?{}:{headers:t})?.catch((e=>{if(e.request?._isRedirect&&e.request?._options?.path)return n.get(e.request._options.path,void 0===t?{}:{headers:t});throw e})));return a?.data?.d?a.data.d.results?a.data.d.results:a.data.d:a?.data?.value?a.data:a?.data}async icfLogOff(){const e=await this.getClient();try{await e.get("bc/icf/logoff")}catch(e){console.log(`Error ending security session ${e.message}`)}}}t.ODataClient=ODataClient,ODataClient.hasAxiosDebugLoggerConfig=!1},69599:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TlsPatch=void 0;const o=a(n(24404)),r=n(78285);class TlsPatch{static get isPatched(){return TlsPatch._patched}static isPatchRequired(e){return!TlsPatch.isPatched&&e&&(e.includes(".sap.corp")||e.includes(".net.sap"))}static apply(){if(TlsPatch.isPatched)return;const e=o.default.createSecureContext;o.default.createSecureContext=t=>{const n=e(t);return r.globalRootCaPem.replace(/\r\n/g,"\n").match(/-----BEGIN CERTIFICATE-----\n[\s\S]+?\n-----END CERTIFICATE-----/g).forEach((e=>{n.context.addCACert(e.trim())})),n},TlsPatch._patched=!0}}t.TlsPatch=TlsPatch},8420:(e,t,n)=>{"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.hasHTML5DynamicDestinationAttrib=t.hasFullUrlDestAttribute=t.hasDestinationAttrib=t.DestinationProxyType=t.destinationPropertyId=t.DestinationAttributeProperty=t.DestinationProperties=t.AuthenticationType=t.ServiceName=void 0,function(e){e.SystemInfo="fiori/system/info",e.RefreshToken="fiori/system/refreshToken",e.ApiHub="fiori/system/apiHub"}(a||(t.ServiceName=a={}));var o,r,i=n(89389);Object.defineProperty(t,"AuthenticationType",{enumerable:!0,get:function(){return i.AuthenticationType}}),function(e){e.WebIDEUsage="WebIDEUsage",e.WebIDEEnabled="WebIDEEnabled",e.WebIDESystem="WebIDESystem",e.SapClient="sap-client",e.WebIDEAdditionalData="WebIDEAdditionalData",e.HTML5ForwardAuthToken="HTML5.ForwardAuthToken",e.HTML5Timeout="HTML5.Timeout",e.HTML5PreserveHostHeader="HTML5.PreserveHostHeader",e.HTML5DynamicDestination="HTML5.DynamicDestination",e.HTML5SetXForwardedHeaders="HTML5.SetXForwardedHeaders",e.TrustAll="TrustAll",e.ProxyType="ProxyType"}(o||(t.DestinationProperties=o={})),t.DestinationAttributeProperty={ODATA_GENERIC:"odata_gen",FULL_URL:"full_url",ODATA_ABAP:"odata_abap",DEV_ABAP:"dev_abap",ABAP_CLOUD:"abap_cloud"},t.destinationPropertyId=Object.keys(t.DestinationAttributeProperty),function(e){e.ON_PREMISE="OnPremise",e.INTERNET="Internet",e.PRIVATE_LINK="PrivateLink"}(r||(t.DestinationProxyType=r={})),t.hasDestinationAttrib=function(e,t,n={}){return(n&&n[e]?.includes(t))??!1},t.hasFullUrlDestAttribute=function(e){return(e&&e.WebIDEAdditionalData?.includes(t.DestinationAttributeProperty.FULL_URL))??!1},t.hasHTML5DynamicDestinationAttrib=function(e){return(e&&"true"===e["HTML5.DynamicDestination"])??!1}},16136:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CSRF=void 0,function(e){e.requestHeaderName="X-Csrf-Token",e.requestHeaderValue="Fetch",e.responseHeaderName="x-csrf-token"}(n||(t.CSRF=n={}))},50880:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.connectWithReentranceTicket=void 0;const o=a(n(28887)),r=n(16136),i=a(n(559)),s=a(n(13685)),l=a(n(95687)),p=n(21880),c=n(99343),u=n(78285),m=n(81247),d=n(72735);class ABAPSystem{static uiHostname(e){const[t,...n]=e.split(".");return[t.replace("-api",""),...n].join(".")}static apiHostname(e){const[t,...n]=e.split(".");return t.match(/.*-api$/)?e:[t+"-api",...n].join(".")}static logoffUrl(e){return this.uiHostname(e)+"/sap/public/bc/icf/logoff"}}t.connectWithReentranceTicket=async function({target:e,ignoreCertError:t=!1,logger:n=console}){const a=await async function({backendUrl:e,logger:t,timeout:n=c.timeoutMs}){return new Promise(((a,o)=>{const r=(0,i.default)(),l=s.default.createServer(r),m=()=>{l.close(),o(new p.TimeoutError(`Timeout. Did not get a response within ${(0,c.timeString)(n)}`))};class Redirect{static url(e){return"http://localhost:"+e+Redirect.path}}Redirect.path="/redirect";const g=setTimeout(m,n);r.get(Redirect.path,((n,o)=>{const r=n.query["reentrance-ticket"]?.toString();t.info("Got reentrance ticket: "+r),o.set("Content-Type","text/html"),o.send(Buffer.from((0,u.redirectSuccessHtml)(ABAPSystem.logoffUrl(e)))),g&&clearTimeout(g),l.close(),a(r)})),l.listen();const f=l.address().port,h=`${ABAPSystem.uiHostname(e)}${y}?redirect-url=${Redirect.url(f)}`;d(h)}))}({backendUrl:e.url,logger:n}),g=await o.default.get(ABAPSystem.apiHostname(e.url)+e.service+"/",{params:{},headers:{MYSAPSSO2:a,[r.CSRF.requestHeaderName]:r.CSRF.requestHeaderValue},httpsAgent:new l.default.Agent({rejectUnauthorized:!t})});return{cookies:(new m.Cookies).setCookie(g),xsrfToken:g.headers[r.CSRF.responseHeaderName]}};const y="/sap/bc/adt/core/http/reentranceticket"},83549:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cookies=void 0;t.Cookies=class Cookies{constructor(){this.cookies={}}setCookie(e){return e?.headers?.["set-cookie"]&&e.headers["set-cookie"].forEach((e=>this.addCookie(e))),this}addCookie(e){const t=e.split(";"),[,n,a]=t[0].match(/(.*?)=(.*)/);return e.indexOf("Max-Age=0")>=0?delete this.cookies[n]:n&&a&&(this.cookies[n]=a),this}toString(){const e=[];return Object.keys(this.cookies).forEach((t=>{e.push(`${t}=${this.cookies[t]}`)})),e.join("; ")}}},41785:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateSystemConfig=t.replaceUrlForAppStudio=t.listDestinations=void 0;const o=a(n(28887)),r=n(8420),i=n(43895),s=n(75836);async function l(){const e={};await o.default.get((0,i.getAppStudioProxyURL)()+"/reload");return(await o.default.get((0,i.getAppStudioBaseURL)()+"/api/listDestinations"))?.data?.forEach((t=>{t.WebIDEEnabled&&(e[t.Name]=t)})),e}async function p(e,t,n){e.originalUrl=e.url,t&&n?(e.url=`https://${t}.dest`,e.basDestinationInstanceCred=await async function(e){try{const t=(await(0,s.apiGetInstanceCredentials)(e)).credentials,n=t.uaa?.clientid||t.clientid,a=t.uaa?.clientsecret||t.clientsecret;return Buffer.from(`${encodeURIComponent(n)}:${encodeURIComponent(a)}`).toString("base64")}catch(t){throw new Error(`An error occurred while retrieving service key for the destination instance ${e}: ${t}`)}}(n)):(e.url=(0,i.getAppStudioBaseURL)(),e.service=`/destinations/${t??e.destination}${e.service?.replace(/^\/?/,"/")??""}`),delete e.scp,delete e.client}t.listDestinations=async function(){return(0,i.isAppStudio)()?l():{}},t.replaceUrlForAppStudio=p,t.updateSystemConfig=async function(e){if((0,i.isAppStudio)()&&e.destination)if(e.destinationInstance)await p(e,e.destination,e.destinationInstance);else{const t=await l();if(t[e.destination]){const n=t[e.destination];e.destinationAuthType=n.Authentication,(0,r.hasFullUrlDestAttribute)({WebIDEAdditionalData:n.WebIDEAdditionalData})&&(e.isDestinationFullUrl=!0,e.destinationServiceUrl=new URL(n.Host).pathname),e.isDestinationFullUrl&&delete e.service,await p(e,n.Name)}}}},21880:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UAATimeoutError=t.TimeoutError=t.ConnectionError=void 0;const a=n(74969);class ConnectionError extends a.BaseError{constructor(e,t){super(e,t),this.name=this.constructor.name}}t.ConnectionError=ConnectionError;class TimeoutError extends a.BaseError{constructor(e,t){super(e,t),this.name=this.constructor.name}}t.TimeoutError=TimeoutError;t.UAATimeoutError=class UAATimeoutError extends TimeoutError{constructor(e,t){super(e,t),this.name=this.constructor.name}}},81247:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Cookies=t.connect=t.SAP_CLIENT=void 0;const i=r(n(28887)),s=n(83549);Object.defineProperty(t,"Cookies",{enumerable:!0,get:function(){return s.Cookies}});const l=n(8420),p=n(43895),c=n(48269),u=r(n(95687)),m=n(57310),d=n(16136),y=n(50880),g=r(n(68978));async function f({target:e,credentials:n,autoAddTrailingSlash:a=!0,timeout:o,ignoreCertError:r=!1,logger:l=console,disableSAML:c=!1}){const y=new m.URL(e.service,e.url).toString(),g=!!n?.username?.length,f={params:{},headers:{[d.CSRF.requestHeaderName]:d.CSRF.requestHeaderValue},withCredentials:g,httpsAgent:new u.default.Agent({rejectUnauthorized:!r})};if(g&&(f.auth=n),"number"==typeof o&&o>0){const e=i.default.CancelToken.source();setTimeout((()=>{e.cancel("CONNECT_TIMEOUT")}),o),f.cancelToken=e.token}e.params&&Object.assign(f.params,e.params),e.client&&(f.params[t.SAP_CLIENT]=e.client);const T=(0,p.isAppStudio)()&&e.destination;(T||c)&&(f.params.saml2="disabled");const P=!y?.endsWith("/")&&a?`${y}/`:y;f?.auth&&Object.keys(f.auth).length>0?f.withCredentials=!0:(delete f.auth,f.withCredentials=!1);let E=await i.default.get(P,f);return!T&&function(e){return 200===e?.status&&h(e)&&"string"==typeof e.data&&!!e.data.match(/saml/i)}(E)&&(l.warn("Disabling SAML2. Falling back to basic authentication"),f.params.saml2="disabled",E=await i.default.get(P,f)),function(e){if(200!==e?.status)return;if("ICFLOGONREQUIRED"===e.headers["sap-err-id"]||function(e){return h(e)&&"string"==typeof e.data&&!!e.data.match(/log[io]n/i)}(e)){const e=new Error;throw e.response={status:401},e.isAxiosError=!0,e.toJSON=()=>({status:401}),e}}(E),{auth:f.auth,cookies:(new s.Cookies).setCookie(E),xsrfToken:E?.headers[d.CSRF.responseHeaderName]}}function h(e){return(t=e.headers["content-type"],n=e.data,t?t.toLowerCase():"string"==typeof n?(0,g.default)(Buffer.from(n))?.toLowerCase()??"":"").startsWith("text/html");var t,n}t.SAP_CLIENT="sap-client",t.connect=async function({target:e,credentials:t,log:n,autoAddTrailingSlash:a=!0,timeout:o,ignoreCertError:r=!1,postConnectionCallback:i,disableSAML:s=!1}){const p=e.authenticationType;return p===l.AuthenticationType.OAuth2RefreshToken?(0,c.connectUsingUaa)({target:e,credentials:t,log:n,postConnectionCallback:i}):p===l.AuthenticationType.OAuth2ClientCredential?(0,c.connectUsingUaaClientCredential)({target:e,credentials:t,log:n}):p===l.AuthenticationType.ReentranceTicket?(0,y.connectWithReentranceTicket)({target:e,logger:n,ignoreCertError:r}):f({target:e,credentials:t,autoAddTrailingSlash:a,timeout:o,ignoreCertError:r,logger:n,disableSAML:s})},o(n(41785),t),o(n(21880),t)},48269:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.connectUsingUaaClientCredential=t.connectUsingUaa=t.defaultUtils=t.getServiceInfo=void 0;const o=n(72735),r=a(n(13685)),i=a(n(28887)),s=a(n(559)),l=n(57147),p=n(81247),c=n(16136),u=n(78285),m=n(21880),d=a(n(52722)),y=n(99343);class Redirect{constructor(e){this.port=e}url(){return`http://localhost:${this.port}${Redirect.path}`}}async function g(e,t){const n=await i.default.request(e.getUserinfoRequest(t));return n?.data?.email||n?.data?.name}Redirect.path="/oauth/client/redirect";class Uaa{constructor(e){this.validatePropertyExists(e.uaa.clientid,"Client ID missing"),this.validatePropertyExists(e.uaa.clientsecret,"Client Secret missing"),this.validatePropertyExists(e.uaa.url,"UAA URL missing"),this.serviceInfo=e}validatePropertyExists(e,t){if(!e)throw Error(t)}get url(){return this.serviceInfo.uaa.url}get clientid(){return this.serviceInfo.uaa.clientid}get clientsecret(){return this.serviceInfo.uaa.clientsecret}get username(){return this.serviceInfo.uaa.username}get password(){return this.serviceInfo.uaa.password}get logoutUrl(){return this.url+"/logout.do"}get systemId(){return this.serviceInfo.systemid}getAuthCodeUrl({redirectUri:e}){return this.url+"/oauth/authorize?"+d.default.stringify({response_type:"code",redirect_uri:e,client_id:this.clientid})}getTokenRequestForAuthCode({redirectUri:e,authCode:t}){return{url:this.url+"/oauth/token",auth:{username:this.clientid,password:this.clientsecret},method:"POST",data:d.default.stringify({code:t,grant_type:"authorization_code",redirect_uri:e,response_type:"token"}),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}}}getAccessTokenRequestUsingClientCredential(){return{url:this.url,method:"POST",data:d.default.stringify({grant_type:"password",username:this.username,password:this.password}),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:`Basic ${Buffer.from(this.clientid+":"+this.clientsecret).toString("base64")}`}}}getTokenRequestForRefreshToken(e){return{url:this.url+"/oauth/token",auth:{username:this.clientid,password:this.clientsecret},method:"POST",data:d.default.stringify({grant_type:"refresh_token",refresh_token:e}),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}}}getUserinfoRequest(e){return{url:this.url+"/userinfo",method:"GET",headers:{authorization:`bearer ${e}`}}}}function f(e){try{return e.serviceKeysContents?"string"==typeof e.serviceKeyContents?JSON.parse(e.serviceKeysContents):e.serviceKeysContents:JSON.parse((0,l.readFileSync)(e.serviceKeys,"utf-8"))}catch(e){throw new Error("Error parsing service keys")}}t.getServiceInfo=f,t.defaultUtils={serviceInfo:f,connection:async function(e,t){const n=`${e.url}${e.service}${e.client?"?sap-client="+e.client:""}`,a=await i.default.get(n,{headers:{authorization:`bearer ${t}`,[c.CSRF.requestHeaderName]:c.CSRF.requestHeaderValue,"x-sap-security-session":"create"}});return{cookies:(new p.Cookies).setCookie(a),xsrfToken:a.headers?.[c.CSRF.responseHeaderName]}},accessToken:async function({uaa:e,log:t,postConnectionCallback:n,refreshToken:a}){let l,p,c=!1;if(a){t.info("Refresh token passed in");const n=e.getTokenRequestForRefreshToken(a);try{l=await i.default.request(n),401===l.status||"invalid_token"===l.data.error?(c=!0,t.warn("Cannot use stored refresh token. Starting fresh request")):a!==l.data.refresh_token&&(t.info("New refresh token issued"),p=l.data.refresh_token)}catch(e){c=!0}}if(!a||c){const{authCode:n,redirect:a}=await function({uaa:e,log:t,timeout:n=y.timeoutMs}){return new Promise(((a,i)=>{const l=(0,s.default)(),p=r.default.createServer(l);let c;const d=setTimeout((()=>{p.close(),i(new m.UAATimeoutError(`Timeout. Did not get a response within ${(0,y.timeString)(n)}`))}),n);l.get(Redirect.path,((n,o)=>{o.set("Content-Type","text/html"),o.send(Buffer.from((0,u.redirectSuccessHtml)(e.logoutUrl,e.systemId))),t.info("Got authCode"),a({authCode:n.query.code+"",redirect:c}),d&&clearTimeout(d),p.close()})),p.listen(),c=new Redirect(p.address().port);const g=e.getAuthCodeUrl({redirectUri:c.url()});o(g)}))}({uaa:e,log:t}),c=e.getTokenRequestForAuthCode({redirectUri:a.url(),authCode:n});l=await i.default.request(c),t.info("Storing refresh token"),p=l.data.refresh_token}return n&&await async function({log:e,uaa:t,accessToken:n,postConnectionCallback:a,newRefreshToken:o}){if(!a.sync)return async function({log:e,uaa:t,accessToken:n,updateFunction:a,newRefreshToken:o,fetchUserInfo:r}){if(o){e.info("Trying to save refreshToken");try{await a({refreshToken:o})}catch(t){e.warn(t.message)}}r&&(e.info("Scheduling user info fetch"),setTimeout((async()=>{try{e.info("Fetching user info");const o=await g(t,n);e.info(`Username: [${o}]`),o&&(e.info("Trying to update user name in system details"),await a({user:o}))}catch(t){e.warn(t.message)}}),1))}({log:e,uaa:t,accessToken:n,updateFunction:a.fn,fetchUserInfo:a.updateUserInfo,newRefreshToken:o});try{let e;a.updateUserInfo&&(e=await g(t,n)),a.fn({user:e,refreshToken:o})}catch(t){e.warn(t)}}({log:t,uaa:e,accessToken:l.data.access_token,postConnectionCallback:n,newRefreshToken:p}),t.info("Got access token successfully"),l?.data?.access_token},accessTokenByUaaClientCredential:async function({uaa:e,log:t}){try{const n=e.getAccessTokenRequestUsingClientCredential(),a=await i.default.request(n);return t.info("Receiving response from OAuth2 Client Credential grant type"),a.data.access_token}catch(e){if(e instanceof m.ConnectionError)throw e;throw new m.ConnectionError(e.message,e)}}},t.connectUsingUaa=async function({target:e,credentials:n,log:a=console,uaaUtils:o=t.defaultUtils,postConnectionCallback:r}){try{const t=new Uaa(n.serviceInfo||o.serviceInfo(n)),i=await o.accessToken({uaa:t,log:a,postConnectionCallback:r,refreshToken:n.refreshToken});return await o.connection(e,i)}catch(e){if(a.error(e.message),e instanceof m.ConnectionError)throw e;throw new m.ConnectionError(e.message,e)}},t.connectUsingUaaClientCredential=async function({target:e,credentials:n,log:a=console,uaaUtils:o=t.defaultUtils}){let r;try{const e=new Uaa(n.serviceInfo);r=await o.accessTokenByUaaClientCredential({uaa:e,log:a})}catch(e){if(a.error(`Failed to obtain OAuth2 access token: ${e.message}`),e instanceof m.ConnectionError)throw e;throw new m.ConnectionError(e.message,e)}try{return await o.connection(e,r)}catch(e){if(a.error(e.message),e instanceof m.ConnectionError)throw e;throw new m.ConnectionError(e.message,e)}}},99343:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeString=t.timeoutMs=void 0,t.timeoutMs=6e4;t.timeString=(e=t.timeoutMs)=>{const n=e/60/1e3;return n>1?`${n} minutes`:1===n?"1 minute":e/1e3+" seconds"}},45116:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.API_HUB_API_KEY=void 0,t.API_HUB_API_KEY="API_HUB_API_KEY"},74969:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownSystemAuthenticationType=t.BaseError=void 0;class BaseError extends Error{constructor(e,t){super(e),this.cause=t}}t.BaseError=BaseError;t.UnknownSystemAuthenticationType=class UnknownSystemAuthenticationType extends BaseError{constructor(e,t){super(`Unknown authenication type: [${e}]`,t),this.name=this.constructor.name}}},77090:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(21148),t),o(n(83835),t),o(n(8420),t),o(n(81247),t),o(n(26770),t),o(n(36828),t)},78285:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.redirectSuccessHtml=t.globalRootCaPem=void 0,t.globalRootCaPem="\n-----BEGIN CERTIFICATE-----\nMIIGTDCCBDSgAwIBAgIQXQPZPTFhXY9Iizlwx48bmTANBgkqhkiG9w0BAQsFADBO\nMQswCQYDVQQGEwJERTERMA8GA1UEBwwIV2FsbGRvcmYxDzANBgNVBAoMBlNBUCBB\nRzEbMBkGA1UEAwwSU0FQIEdsb2JhbCBSb290IENBMB4XDTEyMDQyNjE1NDE1NVoX\nDTMyMDQyNjE1NDYyN1owTjELMAkGA1UEBhMCREUxETAPBgNVBAcMCFdhbGxkb3Jm\nMQ8wDQYDVQQKDAZTQVAgQUcxGzAZBgNVBAMMElNBUCBHbG9iYWwgUm9vdCBDQTCC\nAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAOrxJKFFA1eTrZg1Ux8ax6n/\nLQRHZlgLc2FZpfyAgwvkt71wLkPLiTOaRb3Bd1dyydpKcwJLy0dzGkunzNkPRSFz\nbKy2IPS0RS45hUCCPzhGnqQM6TcDYWeWpSUvygqujgb/cAG0mSJpvzAD3SMDQ+VJ\nAz5Ryq4IrP7LkfCb63LKZxLsHEkEcNKoGPsSsd4LTwuEIyM3ZHcCoA97m6hvgLWV\nGLzLIQMEblkswqX29z7JZH+zJopoqZB6eEogE2YpExkw52PufytEslDY3dyVubjp\nGlvD4T03F2zm6CYleMwgWbATLVYvk2I9WfqPAP+ln2IU9DZzegSMTWHCE+jizaiq\nb5f5s7m8f+cz7ndHSrz8KD/S9iNdWpuSlknHDrh+3lFTX/uWNBRs5mC/cdejcqS1\nv6erflyIfqPWWO6PxhIs49NL9Lix3ou6opJo+m8K757T5uP/rQ9KYALIXvl2uFP7\n0CqI+VGfossMlSXa1keagraW8qfplz6ffeSJQWO/+zifbfsf0tzUAC72zBuO0qvN\nE7rSbqAfpav/o010nKP132gbkb4uOkUfZwCuvZjA8ddsQ4udIBRj0hQlqnPLJOR1\nPImrAFC3PW3NgaDEo9QAJBEp5jEJmQghNvEsmzXgABebwLdI9u0VrDz4mSb6TYQC\nXTUaSnH3zvwAv8oMx7q7AgMBAAGjggEkMIIBIDAOBgNVHQ8BAf8EBAMCAQYwEgYD\nVR0TAQH/BAgwBgEB/wIBATAdBgNVHQ4EFgQUg8dB/Q4mTynBuHmOhnrhv7XXagMw\ngdoGA1UdIASB0jCBzzCBzAYKKwYBBAGFNgRkATCBvTAmBggrBgEFBQcCARYaaHR0\ncDovL3d3dy5wa2kuY28uc2FwLmNvbS8wgZIGCCsGAQUFBwICMIGFHoGCAEMAZQBy\nAHQAaQBmAGkAYwBhAHQAZQAgAFAAbwBsAGkAYwB5ACAAYQBuAGQAIABDAGUAcgB0\nAGkAZgBpAGMAYQB0AGkAbwBuACAAUAByAGEAYwB0AGkAYwBlACAAUwB0AGEAdABl\nAG0AZQBuAHQAIABvAGYAIABTAEEAUAAgAEEARzANBgkqhkiG9w0BAQsFAAOCAgEA\n0HpCIaC36me6ShB3oHDexA2a3UFcU149nZTABPKT+yUCnCQPzvK/6nJUc5I4xPfv\n2Q8cIlJjPNRoh9vNSF7OZGRmWQOFFrPWeqX5JA7HQPsRVURjJMeYgZWMpy4t1Tof\nlF13u6OY6xV6A5kQZIISFj/dOYLT3+O7wME5SItL+YsNh6BToNU0xAZt71Z8JNdY\nVJb2xSPMzn6bNXY8ioGzHlVxfEvzMqebV0KY7BTXR3y/Mh+v/RjXGmvZU6L/gnU7\n8mTRPgekYKY8JX2CXTqgfuW6QSnJ+88bHHMhMP7nPwv+YkPcsvCPBSY08ykzFATw\nSNoKP1/QFtERVUwrUXt3Cufz9huVysiy23dEyfAglgCCRWA+ZlaaXfieKkUWCJaE\nKw/2Jqz02HDc7uXkFLS1BMYjr3WjShg1a+ulYvrBhNtseRoZT833SStlS/jzZ8Bi\nc1dt7UOiIZCGUIODfcZhO8l4mtjh034hdARLF0sUZhkVlosHPml5rlxh+qn8yJiJ\nGJ7CUQtNCDBVGksVlwew/+XnesITxrDjUMu+2297at7wjBwCnO93zr1/wsx1e2Um\nXn+IfM6K/pbDar/y6uI9rHlyWu4iJ6cg7DAPJ2CCklw/YHJXhDHGwheO/qSrKtgz\nPGHZoN9jcvvvWDLUGtJkEotMgdFpEA2XWR83H4fVFVc=\n-----END CERTIFICATE-----\n";t.redirectSuccessHtml=(e,t)=>`\n<html>\n\n<head>\n    <meta http-equiv="content-type" content="text/html; charset=windows-1252">\n    <title>${t?t+": ":""}Authentication Successful</title>\n    <style>\n        body {\n            background: #ffffff;\n            text-align: center;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n        }\n\n        .content {\n            display: table;\n            position: absolute;\n            width: 100%;\n            height: 80%;\n        }\n\n        .valigned {\n            display: table-cell;\n            vertical-align: middle;\n        }\n\n        .lowerCenter {\n            display: table-cell;\n            vertical-align: bottom;\n        }\n\n        .footer {\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            width: 100%;\n            z-index: -1;\n        }\n\n        .footerLeft {\n            float: left;\n            margin-left: 20px;\n        }\n\n        .footerRight {\n            float: right;\n            margin-right: 20px;\n            position: absolute;\n            bottom: 0px;\n            right: 0px;\n        }\n\n        .centerText {\n            font-style: normal;\n            font-family: Arial;\n            font-size: 26px;\n            color: #444444;\n            z-index: 1;\n        }\n        .centerLink {\n            font-style: normal;\n            font-family: Arial, Helvetica, sans-serif;\n            font-size: 18px;\n            text-decoration: none;\n            color: #224679;\n        }\n\n        .errorTextHeader {\n            font-style: normal;\n            font-family: Arial;\n            font-size: 40px;\n            color: #444444;\n        }\n\n        .bottomText {\n            align: center;\n            font-style: normal;\n            font-family: Arial;\n            font-size: 14px;\n            color: #444444;\n        }\n\n        .biggerBottomText {\n            align: center;\n            font-style: normal;\n            font-family: Arial;\n            font-size: 16px;\n            color: #444444;\n        }\n\n        .detailTable {\n            align: bottom;\n            vertical-align: middle;\n            margin-left: auto;\n            margin-right: auto;\n            font-style: normal;\n            font-family: Arial;\n            font-size: 16px;\n            color: #444444;\n        }\n    </style>\n</head>\n\n<body>\n    <div class="content">\n        <div class="valigned">\n            <p class="centerText"><span class="errorTextHeader">You can close this tab now.</span></p>\n            ${e?'<a class="centerLink" href="'+e+'">(Click here to log off the current user)</a>':""}\n        </div>\n    </div>\n    <div class="footer">\n        <div class="footerLeft"><img width='150' height='80' title='' alt='SAP logo'\n                src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAABQCAYAAAGMt7zdAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAFhpJREFUeNpiZEAAJiBmZCAd/IdhmGYWhu0ffzNQAjz5mVigTGa291/JNudXlBQHA5K32P////8DWQHv9LsMnzOVGWTm3mf4+OsfmI0sBwNfslQ4gdRPkDeZkA24/OoHg1DHFTCGaX6SrMjA+vE7mA0SBwEQH4SRDUI2h120+sx/GDh67xOYhokhy8H4QD0cuCKMfcXJl/8lCo7+xwYevf0BpkHyIIzPIFiYYQDp9AP/Vx17jsLHZxBMkE02cc9PQrH2eL4L1jBCN4wZaiMzDlv/gVIAFP/HZRlAADEi0YzUyAGMYFdt//iNgtTPCiT/sMAMIzcHAFM/PzQY4BlcCDkWeabdwcqG8WEYqE8AGs5wg+AAlvphKR6W2mFyM868BecMaOoXBAp/BuK/DGhFD4rLPnz/8x8fQHcRA7zogQLJwmNg+nm/FQM/B4Y6uPyLCdZYXYTTZbDUDsJoqR+rixjQ0hc/MAe8J5D68boI2TA2UP7EkWj/Qw34gc8gEAAIIEY07zJBvcHEQF/wD4r/wnITC5IDQWwO5vWvPzIMAPgbKMqNFKIMLGjRAKyjILn9W6IcXJPFxhcMl979gvN3eorD2e7bX2IVP/TiB0PrecJ+/J4kLwiN2t/QUPuPHJWgqAOVIdzAxPkWpsl79SOGLEMhBm8VHgb+/ptgsUwjQYYOezEUw2FyHwvVwfSRJ98Y5PhYwRhdDQx8KtLA6iCMfIkNbA2FhJpI00UGmBUwR4HE3tTpg9k5WjwMM0++gesLmHcbTMPkwSXPZ0j9/rbeAK+DsOVzUE4SEi898R+G8QGQfPeuJyh8bODjtz9gOWj5gK++wporsUYluUA65zCc/WyqHUkhhCsq/8um7qc4h4F8+WSOE1kOQnfYf6jm30y//1LkqEcLXQWg7RCyHIStgIUVGeQ2tpE9+J9cB8EAQAAx4mgHMVDgOFI9gt6GQnEAclXESMcC/z9SVfQPvSpiBjbufjIMFPDkZ8daPzL/+DUg7vm/ZbbsP7RcCG9LM3//TXcH/V3dpfRv/YR3yDkWucxiZP4BcdQsW2GGGBVuMHvzo+8M4XtfoxgEq5g3P/zGMOXaZ4zKGgQW3/7CsOQO/ub579VtKn+3z3yNrbJmhHVjgM3sz8idT/ROKrhfmaTIwM/OhCGOSx96JxYGfq7vUvm9e9ZLaNfoD3ofAQ6QDc7c+RyM4Qp//AFjZAchiyMDUAsCGSiwMcLVgfCvNe04HYS39bDy/FsUGlfr+1GWCoNi/3UUMb8l98D0uwodMD3dVZzBb9l9SJTdO+34a99cnA5iwNc8BhkIwlM9pRiYfv0FY5gl4Ab+B0hO5WdnBsuhGApVD1f7/ieY//fmCccvs5PO4HMQA1pzmQd92AB9CAEGZh59gcLHpw8mLxAzwwFkB7QTwkSomoEndGBb6DO8LNMWZJgfrwZX+PH7XwZ+TkgkSpSdhHTQuswJZnmQ2l+Pzjm+X5lFVAhhOEqi4OhnWSF2hsfvEAU7qOdIKoD1KsG97yfnHN+tySXaQRgJfWKEMkOYuTjlbStoM+jn0/OO7zbkk+QgDEcx/sPe4vj0/Q8DHydEqUzGQRS5JzPsMYP/zz+Gv19e5b4lw0EY0SeTsu8zVaoOoIOer4hYQI6D0Fug/xn//qPcQV+BDloVRbaDYI6CxdlfXNFHtIO+vcl5thruoL/kOAi9kccM7eGwkDgC9x9p3OAvNHTIdhC2gRBqDAmS3WmAAYAAYsST+LGxhzNA7vCgszGKKka0mGRGGt5iwtH5GcoBgzEYjTSk9g8tJf7H1qpCHvtjYdr87jPDCAP/962Q+t+f9RaaILAOYKGnGnBgDUQ3Z6DA33X9Cv9WdLxFGlX+j6/FwIiOB6qjSk/wewWwy7dt+hukWukvUjbEWWZhFPSwntS1CBkGeV4Woix/+PkPg9W6ZwwffiFqQj1hNobjQVJY1XPPfoAh9jVVgWjPHn7+g8FjywvSA2ktsNe3c9ZbaCD9YUAb/seWshixDKPB2g9sDz/+eos8SE0MaD/5jqH9FOrA6qdcVZzqL7/5yWC9/BHR6vEBvsm3Car5ualL5deeOSQFEjEpiwFbQAn0XMeqFtTHB6m//PonSk/vQ4kmXsfrirAz2ImxMRx5jH8yFN1ebOZ2WgkzVO5/iVX/j609Kj8PzCMrkAh253EBkCNBeJmfNIMg4z8G5p9/wPjLp18M1558hfNBGKQGHVTtfoYhtiVcHkUfNoAsD8IzTr3BUKMHDHh0df9uHHf8WKolCAwoUCj+gDbhfyMFGNGNVbzZUKTu3NvXjYZEB2TX/ucM3Qcg5YeOBCfD/kwNDDWi9ecZPDX4GRZFKmGVAwFsdh598AVuLrZpYBAw6r8KH5P59eCM46dFaRcoSUkkBZZYBaLwkRVgZ9ibr43TochArfEcw616Iwxx8crTcPbLdlPMEbOzbxjy1tzHKkeMnR9//GX49eis44dlmVQNJKICS6LoON4pMNAQzqlqQwZqAtPW8wynCZh59dlXhh1X3jP07HyCKLifnHN8vyqbJoFEVAHP+Ocvw7OJ1nD+7IPPGHZeegfnz0vRoHq7B1dASeUfxRrToDGyt+vyaBpIRKUsakyugoBl7SmGx28hU9CWagIMVx9/AQ+NgYfBptkRZYZM1iHUdtKb2wGvVqccpEcgEZOy/sumHQAztGV5GOrDVcAexcgSQI+nTLvC8AQYGKtKDDDkn7z5wfDk5Td4rJy49g4llrQLjjDMydIhHKt//iFGypaFL6FnIBFKWaBAZJNN2vtu0PTdgIH0bGXkgAQStjFS9OEKiocnqRNIr3Ofro5cjDSqSPdAwpUNYWM6IEf9///rW/t/0JrD//+YGP6jrMClIWD8z8AItPL394tP10RtRurY/mVAXZVA95hkxDFKir7kgtwhXUoG5v5jCZwBCSRCI56MBAKU1qOXuEY0BxQABCDnbGPiKMI4/hy2VbHF3oEGUoRaWzTUQqvYKi8lUioRIaZqDLSiidooUWPsB0Pa2jQxIlXAGotNq1ibmFJiNNE2FkrsBxUuMVYjLEZrscLdQSkv5a5SetzerTdz3b293ZnZO3p3e+k9yeRgdmZ297czz8zO/GcNMQJKt4nRUB7OPI3eMZ4WK4DQzAXWTCkQfFXCdQ6M5iNBa6ZUhKMM11MtEygjAOHqvVGnbeZRB6cnZEL9eDLB0wvlxjzwr+5Iqzy0BYuEBN4df6A8nl7P4ynrQnk3xE3PEG+w3O4+91Op+aGM4KXmmODyxBEonnNVLymkDH6ZS2G4KcZNzfKCmq3JKFI4dkGrZgX0cnHhs3ieu/L8netBvbhKfLWizWcZxPkj0SozboYda26FHNOCgPjB/3ho6b8kCYFJhsTENSsWquLlu31EUwqJledC4ccRJ94RdG01ysXNbF1eTABFXe0xEMZXeC4r8eC5KXSgKO0m6KhIDfoa3jRPQgvnCIijrTBXnbyAFdfBpKXZQ18PQ+/EbMigLtdmFYN/bswtm/bx0F53qOuGqBm+mr0oJFDIco3zcV55oNnRR24POi3NkCzg4PpkVTm0YHA65wSKCQs1wz0FySFffG3XeZxXDG1lbL2sPK2y6QdrW+5eBDneh6QsSxWcs9z0a/fMCRQTVlt5GjH+SL8db/JDocE8Dnan/wY3f2tTXWDFsoXMG93+gFET1pDDheX9Som/3LqrMjRAOblLb2TPGRTLwcNjd6lvcv/pyQAtQffgNDR0+3Z/1OWnwHdnHAFd6qrbbtSsFXUPpkDDT2PMNEe4KWjo8S/X195ngndL1DWWKh32+ih7Xe41gWLWLGITu98EmbfcQPQF7/0wqoo7XpUZVLlaPgutBcjTHPh5TLMcyUe5eHs4QDFhcaPk9+jfa7Pwfo/qlYu9T1JgBrQHRGkkQccXT2RIecjvbOqyiVCVaXi3fWp7zrJwgGLCqmk/x8zYUpkOEztW4VCYnoibgDy8nGdS5UGijZ0dNlV8eVaSlI8IQRACyt5XsYQCS3YNPG+/+NbqsIFi+izrhBO48zNYtaJl3zzn26MlqmCQvVOmvqFn2/6hAkH+DZ2PZNW5JijI9PnQgqX0DkMqW/DYx9/OCyso9tDBe+KSfX/A+6eGgy4MSYVYNaTfNo2PHf1VrQpAEiRavjsWL8CQWKA2tf4l1ahIgNKEhUJjlw1LhZAcKBj7e+dqOLxZrb1CciCxzF3HBolA5roRhhu5DD1nHUjIYh+rXxsRUEHBEsPr7QN4q1nWrtPQ/gu9q0f6rUezjar4xpNWqSzHNFkyXrUm9EEwepilH/RhUBf2rIsYKOa7Yeo285RWZqTNQhqtaFvPgAOaOq3410dAsI8250cUFNPBg8d3jq9euReebOGISTr6JmFrcVrE4TR1WKCx00I+KHhBfVgYcVBMWGgguHfLCshfnoQ3ZaJNmk0nhsB6dbNmWY4pKqDEWyWKVLygRj4qigooNiyvb3l6rf+DLqi5IXh6mDjOUoIa/rg4aqCYsPY+kxW2k4iqPbQJFgnjzGd87rAsNxlaX1oZRM0SVDXLtj+6oJi9YfOxf0MqqPn4IDF+95cD+HUFBdQLmv+8KP3f+dt40M1QzIOCF1RytEGxR/BjMyDKJLdVLoUXNqRDUqI6eev3VtjdfhanEWtMwPEuC3MJm5RHdS3jM1LNsn7ysC6gWEOH+ekvntLls15MaJ+W6AZKWbMEZW8YS2b5bIOuoGjN0LcEJMQOLMuhUt1BkWBJq7CGGGE19HmpCQK39OsCilazfGtnMVCzhg5vNMoA6QqK5LOkXegCf6VewCplj09Z4/uN+PATKZXRNVjbNtWDX6UsVyrrAkreG4p/6yVmUyrt5GConw7QG5Z8GKGXTFKpZFGKNWJG2h0LAlzWVzt0daSxJO0OSWath/0vQHvnAtPUFcbxr4ibBge4IauCj/meyEx0m8NFo9lDdGbrTJzC5syyIU50btMQM7vFbOiyqWTL1IE6dUF8MB9RAR9xusWo+IAxKD6CKAIFRbAtFIb09t71HKSW9j7O7W0L9N4vOWnpfZ/74zvfPe33/1QS6OPb3t9/Cu5vxhCOJaTb8QJAIlKqEgGbYt0HLIbwlROuQIK5CHAaFwNYxktVJwwHinlvKGVTEuPaRgUEWU58UDknHgawwCUUlCmgdf7wxhfQcjXaaRuVEFyBBPGUI0RtmRc5BrNy3+SCJ10EeblvMinzDWKg5RsK2VKlcQugaKXD/Z4nazFzancss+lz4yOPpRLzxEmiSucCl8piVXreX42miukjm2fRu1IMIEEUIlAg/mHzXCpZZmz6u4eyUjrrgQ1v0wftZR1ogtiLc2gkCd5dlquUodB/zGrRUfvXv2M9utEArt910O5ARTLdwPqZ2OTWKeperJ8jvVfHgmOK+dAoSkcd/FFD5aYhoJzzUZ1fub4nck/KlQsutuA95IkASIoKhg9GBsHgPoGSrhkVTEWpmrtKm7AIMKldnRtBfGx0jAEZlUTrNn082KP3FKWQnr3bAht1jVBhpnzuoVoPrddQx9P5PBTbl46ivjbiml1nexrs0d6C0srseRFJ0SFYm9fbFpVZgZOiuSx9aj+cmSnGssubYd4JYeVqc+JQr1/f2isGWJtv8CJQlK718AaN5eQWoSGPlgKUJLD6bCytnxzRG3I1EV7vcJQdG5VR3iFL1tneHx0Maa+Fu7X/RX/WQub1Bt51GpOG+8yhfH/5Aay99MCzQB1N1bSe2uoToCSBtehkTf2vb6i93skoHTp6B3+q46DgQCj+SJpHid5xy3Ysbm9oWjYSfGk5ZWaIz66WtA/GNuQ9zPlJ03p6m0+BkgSWscVa71wCj93bWGFWVgUU1wqXjkQFet8a/hTER4Xgv5F8PtpWMF5JGAZi6x+wAfzC1jLO5cblZKrRSH/AMdXdDn9IT1gZE2a/NhJbfLwGaxuIn4ey6FqO/ax5eOa3TgHK3eAdtFptCAlU+IaZLDgjiiTLMvdGA25JOXreR1NH2zRzgGSo2rxeT9g8XQ1JudK8hIpmWK8V9QG6LtT+TRyBQROy+DHBsKdIRMzF0KbWwmPTmvcm3+lMoNpNdM2KlJQU4n+j6PBeUL5sNBiSx8DmGf1tT2w9bB1v9UhDHR8/NlTwHIrvteAmeCNt+0L7ZDsWubdgBM+bFBY8XJD0BUWZrKV504wro4faoEJxA+XUHOWVrYSAgc89FrK0i3WwaGKYqG3iovvi5uqlTLiZWsgnXQeF9oRNsyKJ1l1ypG04/TtBOE5C+zx/uxEqjO5V+cJpkBQj0A+hhB5IaF+0yVKer2nc/klRV/BQHgFLe6wKd2LiK/0kHXzmqGDcAAbaP0MFYlYd13PKXyA7Mn8Y0f7T8+5Dib7Z/p7kfDPmDIGpaTfcuyCOoRDJhqyJjeBVoXAJDa6ZOEKINqAafl/YJYGSFLyHafPxPBYSbPhl9mCY8XyoV07u3G0zLNhdhtUy2g0dj0TsAYncjN/QUSLg5qpxREWC0i/Ugjb3cU2a+9+N9+lT4Tmb19RsL3WJoSwVBRpTRmKXBsrtGAuT56DysSDjJoR/dQUmrCuCvQV1Hj25V5/rg2FInqrGx4sb15dYQUSbXeGicPJ1dgXRtokx4diT8mnoeMtQH7679YaDMpPVRN26PK1uzUtDbVAVdpUYyiseKzz5omCdIlRBPXZMX1xdHTWptv6UHla8TjYhi8uLZd1iXbbzwxHE5zNydT6uBn/vh5e9fiN01c0we8s1fLxHLJhaKws0xj2Lu4WH8ghYz67Ic7sAFhqKEiarYeHk/hDcu4fXLqzBdoN01U0dY50BQaKOiSSAZqddg7vrJnrl/JAu1JazNVBpaO04bVD1j8awL6lbAiUJLPUX5z1SWS1hSn/4VjMEurIhjanl0yOJ1+WUXRJ+CsRAPdi/pFsDJempsF0IAykcXfxmgv3zrEu1uCHpOCGLigiCFYQ3rDNtuZhzZBESIprY1Bdq6g8s9QugJIJFQ+TTvTpAhQzJajlKa8nOMFg04apMG1CHPvMroCSBhcQw81a/2KUuZNsZPS5YGjsuzAb9kzDwGfYfF6J1Sqqa4EKpEWJGhNrW99xPftDcHlgZwSHvYbUNqMPL/BIoSTGWp6rXespKqswwfU2BW9teTZ2ENfQ8Yak5dzhl6JBZzbVL7+6as9ufgZLisZiBiX/hN5E2r/DeJDXMiVHj91LtRGEdrM66CTGjQiF1AXkdalRRmHQIcrYvd16HbZ+O9UxvcgyFVJMNqMy5sgDKXY+FXyMTTgv+Eg2BhoYj/BrWUQm9pLIRGpopIv3D7mzIQ9XsmScroIQ8FgOuv1phHgfvwjvW32/BjZRqvwIKlQDfK0+g+MByLAepYl3OMKAYB1D74mQNFBtYXF7KpakUsFxiqOqseAUokcG7q+qIAtYjD1W3VP9HXCbwp0/JCiiSGMv5b9r/u4MQqP/qk/RZ8zKd4GGDSXZA8cXPctPHYgiW8+lIcaWhyxIoIARArop+fNKJXJCxLZetj1c0SMVBJkabU9ZBg6KaLH6IZET+rYDlwfX9GSyp68rC/gcKtRRHC4+EWgAAAABJRU5ErkJggg=='>\n        </div>\n        <div class="footerRight">\n            <p class="bottomText"><span class="biggerBottomText">&copy;</span>2020 SAP SE, All rights reserved.</p>\n        </div>\n    </div>\n</body>\n\n</html>\n`},36828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SapSystem=t.deleteSapSystem=t.saveSapSystem=t.newSapSystemForDestinaton=t.newS4HCSystem=t.newSapSystemForSteampunk=t.newSapSystemForServiceUrl=t.newSapSystem=t.getSapSystem=t.isSystemNameInUse=t.listSAPSystems=void 0;const a=n(81247),o=n(43895),r=n(36455);Object.defineProperty(t,"SapSystem",{enumerable:!0,get:function(){return r.SapSystem}});const i=n(99184),s=n(57310),l=n(77090),p=n(40867);function c(e){if(!e.isScp())return;let t;return t=e.unSaved?{sync:!0,updateUserInfo:!e.userDisplayName,fn:({user:t,refreshToken:n})=>{t&&e.setUserDisplayName.bind(e)(t),n&&e.setRefreshToken.bind(e)(n)}}:{sync:!1,updateUserInfo:!e.userDisplayName,fn:async({user:t,refreshToken:n})=>{if(t||n){const a={};return t&&(a.userDisplayName=t),n&&(a.refreshToken=n),(await(0,i.getSystemStore)()).partialUpdate({url:e.url,client:e.client,update:a})}}},t}function u(e,t,n,a,o=!1){const i=o?a?.username:void 0;return new r.SapSystem(e,{url:t,client:n},a,i,o,c,p.SapSystemType.URL)}t.listSAPSystems=async function(){if((0,o.isAppStudio)()){const e={},t=await(0,a.listDestinations)();return Object.values(t).sort(((e,t)=>e.Name.localeCompare(t.Name,void 0,{numeric:!0,caseFirst:"lower"}))).forEach((t=>{e[t.Name]=new r.SapSystem(t.Name,{url:t.Host,destination:t.Name,destinationAuthType:t.Authentication,scp:t.WebIDEUsage?.includes("abap_cloud")??!1,destinationAttributes:Object.assign({},t),client:t["sap-client"]})})),e}{const e=await(0,i.getSystemStore)();return function({systems:e,store:t}){const n=[];Object.values(e).forEach((e=>{e.isScp()?e.postConnectionCallbackCreator=c:!e.userDisplayName&&e.username&&(e.setUserDisplayName(e.username),n.push(e))})),n.length>0&&async function({systems:e,store:t}){return new Promise((n=>setTimeout((async()=>{const a=[];for(const n of e)a.push(t.partialUpdate({url:n.url,client:n.client,update:{userDisplayName:n.userDisplayName}}));await(0,o.allSettled)(a),n()}),0)))}({systems:n,store:t}).catch();return e}({systems:await e.getAll(),store:e})}},t.isSystemNameInUse=async function(e){const t=await(await(0,i.getSystemStore)()).getAll(),n=e.trim();return-1!==Object.values(t).findIndex((e=>e.name===n||e.bareName===(0,r.stripOldSCPSuffix)(n)))},t.getSapSystem=async function(e,t){if((0,o.isAppStudio)())throw Error("Not supported in AppStudio.");return(await(0,i.getSystemStore)()).get(e,t)},t.newSapSystem=u,t.newSapSystemForServiceUrl=function(e){const t=new s.URL(e);return{system:u("temp",t.origin,t.searchParams.get("sap-client"),void 0,!1),servicePath:t.pathname,search:t.search}},t.newSapSystemForSteampunk=function(e,t,n=!1){const a="string"==typeof t?JSON.parse(t):t,o={url:a.url,scp:!0};return new r.SapSystem(e,o,{serviceKeysContents:a},void 0,n,c,p.SapSystemType.SteamPunk)},t.newS4HCSystem=function({name:e,url:t,unSaved:n=!1}){return new r.SapSystem(e,{url:t,authenticationType:l.AuthenticationType.ReentranceTicket},void 0,void 0,n,c,p.SapSystemType.S4HC)},t.newSapSystemForDestinaton=function({destination:e,destinationInstance:t,destinationAuthType:n,credentials:a}){return new r.SapSystem(e,{destination:e,destinationAuthType:n,destinationInstance:t},a,void 0,!1,void 0,p.SapSystemType.BTP)},t.saveSapSystem=async function(e){const t=await(0,i.getSystemStore)();await t.save(e)},t.deleteSapSystem=async function(e){return(await(0,i.getSystemStore)()).delete(e)}},36455:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripOldSCPSuffix=t.SapSystem=void 0;const a=n(89389),o=n(77090),r=n(21148),i=n(8420),s=n(40867),l=n(43895),p=n(6480),c=" (BTP)";class SapSystem{postConnectionCallback(){return this.postConnectionCallbackInitialized||(this._postConnectionCallback=this._postConnectionCallbackCreator?.(this),this.postConnectionCallbackInitialized=!0),this._postConnectionCallback}static fromSerialized(e){const t=e.serviceKeys||e.username||e.password?{serviceKeysContents:e.serviceKeys,username:e.username,password:e.password,refreshToken:e.refreshToken}:void 0,n=Object.values(a.AuthenticationType).find((t=>t===e.authenticationType))||(0,o.guessAuthType)({credentials:t,fallback:!1});return new SapSystem(e.name,{url:e.url,client:e.client,authenticationType:n},t,e.userDisplayName,void 0,void 0,s.SapSystemType.URL)}constructor(e,t,n={},a,o=!1,r,i=s.SapSystemType.BTP){this.config=t,this.credentials=n,this._unSaved=!1,this.postConnectionCallbackInitialized=!1,this._name=e,void 0===this.config.scp&&(this.config.scp=!!n?.serviceKeysContents||!!n?.serviceKeys),this._unSaved=o,this._userDisplayName=a,this._postConnectionCallbackCreator=r,this._sapSystemType=i}getConnection(){return this.connection}clone({retainConnection:e,retainSavedStatus:t}={retainConnection:!1,retainSavedStatus:!1}){const n=SapSystem.fromSerialized(this.serialize());return e&&(n.connection=this.connection,n.config.destination=this.config?.destination),t&&(n.unSaved=this.unSaved),n}get refreshToken(){return this.credentials?.refreshToken}set refreshToken(e){this.credentials=Object.assign(this.credentials||{},{refreshToken:e})}get name(){return this._name}set name(e){this._name=e}get username(){return this.credentials?.username}get password(){return this.credentials?.password}get serviceKeys(){return this.credentials?.serviceKeysContents}get unSaved(){return this._unSaved}set unSaved(e){this._unSaved=e}get url(){return this.config.url}get client(){return this.config.client}get userDisplayName(){return this._userDisplayName}set postConnectionCallbackCreator(e){this._postConnectionCallbackCreator=e,this.postConnectionCallbackInitialized=!1,this._postConnectionCallback=void 0}get postConnectionCallbackCreator(){return this._postConnectionCallbackCreator}get destinationODataType(){return this._sapSystemType===s.SapSystemType.BTP?this.isAbapCatalogDest()?p.DestinationODataType.AbapODataCatalogDest:this.isFullUrlDest()?p.DestinationODataType.GenericODataFullUrlDest:this.isPartialUrlDest()?p.DestinationODataType.GenericODataPartialUrlDest:p.DestinationODataType.Unknown:this._sapSystemType===s.SapSystemType.SteamPunk?p.DestinationODataType.SteamPunkDest:this._sapSystemType===s.SapSystemType.S4HC?p.DestinationODataType.S4HCDest:this._sapSystemType===s.SapSystemType.URL?p.DestinationODataType.URLDest:void 0}getDisplayName({includeUserName:e}={includeUserName:!0}){const t=e&&this.userDisplayName?` [${this.userDisplayName}]`:"";let n;return n=this.isScp()?function(e){const t=e.trim();return t.match(`${(0,l.escapeRegExp)(c)}$`)?t:t+c}(this.name):this.isS4HC()?this.addS4HCSuffix(this.name):this.name,n+t}hasSavedCredentials(){return 0!==Object.keys(this.credentials).length}isOnPremSystem(){return(0,i.hasDestinationAttrib)("ProxyType","OnPremise",this.config.destinationAttributes)}isS4HC(){return this.config?.authenticationType===a.AuthenticationType.ReentranceTicket}addS4HCSuffix(e){const t=" (S4HC)";return e?.trim().match(`${(0,l.escapeRegExp)(t)}$`)?e:e+t}get bareName(){return u(this.name)}isScp(){return this.config.scp}isPartialUrlDest(){return!(0,i.hasDestinationAttrib)("WebIDEAdditionalData",i.DestinationAttributeProperty.FULL_URL,this.config.destinationAttributes)&&this.isGenericODataDest()}isGenericODataDest(){return!!this.config.destination&&((0,i.hasDestinationAttrib)("WebIDEUsage",i.DestinationAttributeProperty.ODATA_GENERIC,this.config.destinationAttributes)&&!(0,i.hasDestinationAttrib)("WebIDEUsage",i.DestinationAttributeProperty.ODATA_ABAP,this.config.destinationAttributes))}isFullUrlDest(){return!!this.config.destination&&((0,i.hasDestinationAttrib)("WebIDEAdditionalData",i.DestinationAttributeProperty.FULL_URL,this.config.destinationAttributes)&&this.isGenericODataDest())}isAbapCatalogDest(){return!!this.config.destination&&((0,i.hasDestinationAttrib)("WebIDEUsage",i.DestinationAttributeProperty.ODATA_ABAP,this.config.destinationAttributes)&&!this.isFullUrlDest())}isHTML5DynamicDestination(){return!!this.config.destination&&(0,i.hasHTML5DynamicDestinationAttrib)(this.config.destinationAttributes)}toString(){return this.config?.destination||(()=>{const e=this.config?.url?.trim();if(e){return e+(this.config?.client?`?sap-client=${this.config.client}`:"")}})()||this.getDisplayName()||""}serialize(){return new a.BackendSystem({name:this._name,url:this.config?.url,client:this.config?.client,authenticationType:this.config?.authenticationType,serviceKeys:this.credentials?.serviceKeysContents,refreshToken:this.refreshToken,username:this.credentials?.username,password:this.credentials?.password,userDisplayName:this.userDisplayName})}async getService(e,t){const n=m(this.config);if(n.service=e,this.connection)return new r.ODataClient({system:n,connection:this.connection,postConnectionCallback:this.postConnectionCallback(),ignoreCertError:t});{const e=new r.ODataClient({system:n,credentials:this.credentials,postConnectionCallback:this.postConnectionCallback(),ignoreCertError:t});return this.connection=await e.getConnection(),e}}async endSecuritySession(){const e=m(this.config);if(e.service="/sap/public/",this.connection){const t=new r.ODataClient({system:e,connection:this.connection,postConnectionCallback:this.postConnectionCallback()});await t.icfLogOff()}}setUserDisplayName(e){this._userDisplayName=e}setRefreshToken(e){this.refreshToken=e}async getCatalog(e,t=!1){const n=m(this.config);if(this.connection)return(0,r.getCatalog)({system:n,connection:this.connection,odataVersion:e,postConnectionCallback:this.postConnectionCallback(),ignoreCertError:t});{const a=(0,r.getCatalog)({system:n,credentials:this.credentials,odataVersion:e,postConnectionCallback:this.postConnectionCallback(),ignoreCertError:t});return this.connection=await a.getConnection(),a}}setCredentials(e){this.credentials=e}isSameSystem(e,t){return this.url?.trim()?.replace(/\/$/,"")===e?.trim()?.replace(/\/$/,"")&&this.client===t}getSystemForExport(){return{name:this.name,type:this.isScp()?s.SystemType.Cloud:s.SystemType.OnPremise,url:this.url,client:this.client}}}function u(e){return e.trim().replace(/ \(SCP\)$/,"")}function m(e){return JSON.parse(JSON.stringify(e))}t.SapSystem=SapSystem,t.stripOldSCPSuffix=u},99184:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSystemStore=void 0;const a=n(36455),o=n(89389);class DefaultImplementation{constructor(e,t){this.logger=t,this.storeService=e}static async createInstance(e){const t=await(0,o.getService)({logger:e,entityName:"system"});return new DefaultImplementation(t,e)}async getAll(){return(await this.storeService.getAll()||[]).map((e=>a.SapSystem.fromSerialized(e))).sort(((e,t)=>e.getDisplayName({includeUserName:!1}).localeCompare(t.getDisplayName({includeUserName:!1}),void 0,{numeric:!0,caseFirst:"lower"}))).reduce(((e,t)=>(e[t.name]=t,e)),{})}async get(e,t){const n=await this.storeService.read(new o.BackendSystemKey({url:e,client:t}));return n&&Object.keys(n).length>0?a.SapSystem.fromSerialized(n):void 0}async save(e){"function"!=typeof e?.serialize?this.logger.warn("system does not have a serialize method, unable to save"):await this.storeService.write(e.serialize())}async delete(e){if("function"==typeof e?.serialize)return this.storeService.delete(e.serialize());this.logger.warn("system does not have a serialize method, unable to delete")}async partialUpdate({url:e,client:t,update:n}){await this.storeService.partialUpdate(new o.BackendSystemKey({url:e,client:t}),n)}}t.getSystemStore=async(e=console)=>DefaultImplementation.createInstance(e)},6480:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DestinationODataType=void 0,function(e){e.AbapODataCatalogDest="AbapODataCatalogDest",e.GenericODataFullUrlDest="GenericODataFullUrlDest",e.GenericODataPartialUrlDest="GenericODataPartialUrlDest",e.Unknown="Unknown",e.URLDest="URLDest",e.SteamPunkDest="SteamPunkDest",e.S4HCDest="S4HCDest"}(n||(t.DestinationODataType=n={}))},40867:(e,t)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.SapSystemType=t.SystemType=void 0,function(e){e.OnPremise="abap_onpremise",e.Cloud="abap_btp"}(n||(t.SystemType=n={})),function(e){e[e.URL=0]="URL",e[e.BTP=1]="BTP",e[e.SteamPunk=2]="SteamPunk",e[e.S4HC=3]="S4HC"}(a||(t.SapSystemType=a={}))},83835:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasServices=t.isSystemNameValid=t.getBTPSystem=t.getOnPremSystem=t.guessAuthType=t.xmlToJson=void 0;const a=n(88295),o=n(8420),r=n(77090);t.xmlToJson=function(e){if(!e||!0!==a.XMLValidator.validate(e))return;return new a.XMLParser({attributeNamePrefix:"",ignoreAttributes:!1,ignoreNameSpace:!0,parseAttributeValue:!0,removeNSPrefix:!0}).parse(e,!0)},t.guessAuthType=function({credentials:e,fallback:t=!1}){let n=e?.serviceKeys||e?.serviceKeysContents?o.AuthenticationType.OAuth2RefreshToken:void 0;return!n&&e&&e.serviceInfo?.uaa?.username&&(n=o.AuthenticationType.OAuth2ClientCredential),!n&&t&&(n=o.AuthenticationType.Basic),n},t.getOnPremSystem=async function(e,t=!1){let n=await(0,r.getSapSystem)(e.url,e.client),a=!1;const o={username:e.credentials?.systemUsername,password:e.credentials?.systemPassword};return n?t||(n.name=e.name||"",n.setCredentials(o),n.setUserDisplayName(o.username)):(n=(0,r.newSapSystem)(e.name||"",e.url,e.client,o,!0),a=!0),{sapSystem:n,isNewSapSystem:a}},t.getBTPSystem=async function(e,t){let n,a=!1;if(e.url&&e.credentials===t&&(n=await(0,r.getSapSystem)(e.url,e.client)),n)n.refreshToken?n.name=e.name||"":n=(0,r.newSapSystemForSteampunk)(e.name||"",e.credentials,!1);else{const t=(0,r.newSapSystemForSteampunk)(e.name||"",e.credentials,!0);n=await(0,r.getSapSystem)(t.url,t.client),n||(a=!0,n=t)}return{sapSystem:n,isNewSapSystem:a}},t.isSystemNameValid=async function(e,t){if(!e)return!1;let n=!0;return await(0,r.isSystemNameInUse)(e)&&e!==t&&(n=!1),n},t.hasServices=async function(e){const t=[r.ODataVersion.v2,r.ODataVersion.v4],n={};let a;for(const o of t)try{const t=await e.getCatalog(o),a=await t.listServices();n[o]=a.length}catch(e){n[o]=0,a=e}return await e.endSecuritySession(),{v2Count:n[r.ODataVersion.v2],v4Count:n[r.ODataVersion.v4],error:a}}},59156:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAnnotationFiles=void 0;const a=n(79632);t.getAnnotationFiles=function(e,t){const n=(0,a.getAppConfig)(e,t),o=[];if(n.mainService){const e=n.services[n.mainService];e.local&&o.push(e.local)}return n.annotations&&Object.keys(n.annotations).forEach((e=>{if(n.annotations[e].length)for(const t of n.annotations[e])o.push(t)})),o}},39532:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasExtension=t.writeFragmentFiles=t.readVisualExtensionFiles=t.writeViewControllerFile=t.getCustomViews=void 0;const a=n(8044),o=n(75764),r=n(71017),i=n(8144),s=n(98933),l=n(78702);t.getCustomViews=async function(e){const t=[];let n=[];await(0,l.fileExists)(e)&&(n=await(0,l.readDirectory)(e));for(const e of n){const n=e.split("."),a=n.splice(0,n.length-2).join(".");a&&t.push(a)}return t},t.writeViewControllerFile=async function(e,t,n,a,s=!1,p){if(![o.DirName.View,o.DirName.Controller,o.DirName.Fragment].includes(a))return;const c=(0,i.getAppConfig)(e,p),u=(0,r.join)(e.root,c.ext),m=(0,r.join)(e.root,a===o.DirName.View?c.view:a===o.DirName.Controller?c.controller:c.fragment);await(0,l.fileExists)(u)||await(0,l.createDirectory)(u),await(0,l.fileExists)(m)||await(0,l.createDirectory)(m);const d=(0,r.join)(m,t);!s&&await(0,l.fileExists)(d)||await(0,l.updateFile)(d,n)},t.readVisualExtensionFiles=async function(e,t,n,a){const o=[];let p;try{p=(0,r.join)(t,e);const n=await(0,i.findExtensionFiles)(p,a);for(const e in n){const t=n[e],a=await(0,l.readFile)(t);o.push({dataSourceUri:t,fileContent:a})}}catch(t){const a=s.i18n.t("ERROR_PROJECT_ROOT_WORKSPACE",{root:e,error:t.message});n?n.error(a,t):console.error(a,t)}return o},t.writeFragmentFiles=async function(e,t){if(t)for(let n=0;n<t.length;n++){const a=t[n];if(a.dataSourceUri){a.dataSourceUri=a.dataSourceUri.replace("<root>",e);const t=a.dataSourceUri.split(e)[1].split(r.sep);let n=e;if(t){for(let e=0;e<t.length-1;e++){const a=t[e];""!==a&&(n=(0,r.join)(n,a),await(0,l.fileExists)(n)||await(0,l.createDirectory)(n))}await(0,l.updateFile)(a.dataSourceUri,a.fileContent)}}}};const p=["$['sap.ui5'].extends.extensions.*.*","$['sap.ui5'].routing.targets.*.options.settings.content.body.sections.*.template","$['sap.ui5'].routing.targets.*.options.settings.content.body.sections.*.subSections.*.template","$['sap.ui5'].routing.targets.*.options.settings.content.header.actions.*","$['sap.ui5'].routing.targets.*.options.settings.content.footer.actions.*","$['sap.ui5'].routing.targets.*.options.settings.controlConfiguration.*.columns.*.template","$['sap.ui5'].routing.targets.*.options.settings.content.header.facets.*.template","$['sap.ui5'].routing.targets.*.options.settings.controlConfiguration.*.facets.*.template","$['sap.ui5'].routing.targets.*.options.settings.controlConfiguration.*.fields.*.template","$['sap.ui5'].routing.targets.*.options.settings.controlConfiguration.*.filterFields.*.template","$['sap.ui5'].routing.targets.*.options.settings.viewName","$['sap.ui5'].routing.targets.*.options.settings.views.paths.*.template","$['sap.ui5'].routing.targets.*.options.settings.controlConfiguration.*.actions","$['sap.ui5'].routing.targets.ReuseComponent","$['sap.ui5'].routing.targets.*.options.settings.content.body.sections.ReuseComponentContainer"];t.hasExtension=function(e){let t=!1;for(const n of p){if((0,a.JSONPath)({path:n,json:e}).length>0){t=!0;break}}return t}},78702:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.fsPathToFtfsPath=t.moveFile=t.deleteDirectory=t.isDirectory=t.fileExists=t.createDirectory=t.readDirectory=t.updateJSONWithComments=t.updateJSON=t.updateFile=t.deleteFile=t.readJSONWithComments=t.readJSON=t.readFile=void 0;const i=r(n(57147)),s=n(71017),l=n(78844),p=n(75764),c=n(24529);async function u(e){return new Promise(((t,n)=>{i.readFile(e,{encoding:"utf8"},((e,a)=>{e?n(e):t(a)}))}))}async function m(e){return new Promise(((t,n)=>{i.unlink(e,(e=>{e?n(e):t()}))}))}async function d(e,t){return null==t?m(e):new Promise(((n,a)=>{i.writeFile(e,t,{encoding:"utf8"},(e=>{e?a(e):n()}))}))}async function y(e){return new Promise(((t,n)=>{i.readdir(e,{encoding:"utf8"},((e,a)=>{e?n(e):t(a)}))}))}async function g(e){try{return await i.promises.access(e),!0}catch{return!1}}async function f(e){return new Promise(((t,n)=>{i.stat(e,((e,a)=>{e?n(e):t(a.isDirectory())}))}))}t.readFile=u,t.readJSON=async function(e){return JSON.parse(await u(e))},t.readJSONWithComments=async function(e){return(0,c.parse)(await u(e))},t.deleteFile=m,t.updateFile=d,t.updateJSON=async function(e,t){await d(e,t?JSON.stringify(t,null,4):null)},t.updateJSONWithComments=async function(e,t,n,a={}){const o=await u(t);a.formattingOptions||(a.formattingOptions={tabSize:4,insertSpaces:!0});const r=(0,c.modify)(o,n,e,a),i=(0,c.applyEdits)(o,r);await d(t,i)},t.readDirectory=y,t.createDirectory=async function(e){return new Promise(((t,n)=>{i.mkdir(e,(e=>{e?n(e):t()}))}))},t.fileExists=g,t.isDirectory=f,t.deleteDirectory=async function e(t){if(await g(t)){const n=await y(t);for(const a of n){const n=(0,s.join)(t,a);await f(n)?await e(n):await m(n)}return new Promise(((e,n)=>{i.rmdir(t,(t=>{t?n():e()}))}))}},t.moveFile=async function(e,t){return new Promise(((n,a)=>{i.rename(e,t,(e=>{e?a(e):n()}))}))},t.fsPathToFtfsPath=function(e){let t=e.replace(/\\/g,"/");return s.posix.isAbsolute(t)||(t=`/${t}`),l.URI.parse(`${p.SchemeName.Ftfs}:${t}`).toString()}},96194:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readChanges=void 0;const a=n(78702),o=n(71017);t.readChanges=async function(e){const t=[];try{const n=await(0,a.readDirectory)(e);for(const r of n){const n=await(0,a.readFile)((0,o.join)(e,r));t.push({physicalFileName:r,fileContent:n})}}catch{}return t}},98933:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initI18n=t.i18n=void 0;const o=a(n(73577)),r=a(n(47473));t.i18n=o.default.createInstance(),t.initI18n=async function(){await t.i18n.init({resources:{en:{translation:r.default}},lng:"en",fallbackLng:"en",joinArrays:"\n\n"})}},28033:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.readCapServiceMetadataEdmx=t.getWebappPath=t.getNodeModulesPath=t.getCapCustomPaths=t.getCdsServices=t.getCdsRoots=t.getCdsFiles=t.getCapModelAndServices=t.findAllApps=t.findFioriArtifacts=t.getUi5CustomWebappPath=t.findUsedEntities=void 0,o(n(59156),t),o(n(78702),t),o(n(79632),t),o(n(51247),t);var r=n(67220);Object.defineProperty(t,"findUsedEntities",{enumerable:!0,get:function(){return r.findUsedEntities}}),o(n(96194),t),o(n(14689),t),o(n(39532),t),o(n(98933),t);var i=n(14171);Object.defineProperty(t,"getUi5CustomWebappPath",{enumerable:!0,get:function(){return i.getUi5CustomWebappPath}});const s=n(98933);o(n(43208),t);var l=n(9949);Object.defineProperty(t,"findFioriArtifacts",{enumerable:!0,get:function(){return l.findFioriArtifacts}}),Object.defineProperty(t,"findAllApps",{enumerable:!0,get:function(){return l.findAllApps}}),Object.defineProperty(t,"getCapModelAndServices",{enumerable:!0,get:function(){return l.getCapModelAndServices}}),Object.defineProperty(t,"getCdsFiles",{enumerable:!0,get:function(){return l.getCdsFiles}}),Object.defineProperty(t,"getCdsRoots",{enumerable:!0,get:function(){return l.getCdsRoots}}),Object.defineProperty(t,"getCdsServices",{enumerable:!0,get:function(){return l.getCdsServices}}),Object.defineProperty(t,"getCapCustomPaths",{enumerable:!0,get:function(){return l.getCapCustomPaths}}),Object.defineProperty(t,"getNodeModulesPath",{enumerable:!0,get:function(){return l.getNodeModulesPath}}),Object.defineProperty(t,"getWebappPath",{enumerable:!0,get:function(){return l.getWebappPath}}),Object.defineProperty(t,"readCapServiceMetadataEdmx",{enumerable:!0,get:function(){return l.readCapServiceMetadataEdmx}}),(0,s.initI18n)()},43208:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getReuseType=t.getManifestDependencies=t.getLibraryDependencies=t.getLibraryDesc=t.getManifestDesc=t.getI18nProperty=t.findLibraryManifests=t.getReuseLibs=void 0;const i=n(75764),s=n(71017),l=r(n(23719)),p=n(43908),c=r(n(19459)),u=r(n(57147)),m=n(88295);o(n(43908),t);async function d(e,t,n){return new Promise(((a,o)=>{const r=(0,l.default)(e);r.on("directory",((e,t,n)=>{const a=(0,s.basename)(e);".git"!==a&&"node_modules"!==a&&"dist"!==a||n()})),r.on("file",(async a=>{if(a.endsWith(i.FileName.Manifest)){const n=await JSON.parse(u.default.readFileSync(a).toString()),o=n["sap.app"]?.type,r=(0,s.dirname)(a);if("component"===o||"library"===o){const o=P(r),i=T(n),s=[n["sap.app"].id,o,g(n,r)].filter(Boolean).join(" - ");-1===t.findIndex((e=>e.value.name===n["sap.app"].id))&&t.push({name:s,value:{name:`${n["sap.app"].id}`,path:a,type:o,uri:n["sap.platform.abap"]?.uri||"",dependencies:i,libRoot:e}})}}if(a.endsWith(".library")){n.push((0,s.dirname)(a));const o=u.default.readFileSync(a).toString(),r=new m.XMLParser({removeNSPrefix:!0}).parse(o,!1);if(r&&r?.library?.name){const n=(0,s.dirname)(a),o=r?.library?"library":"component";if("component"===o||"library"===o){const o=P(n),i=h(r),s=[r.library.name,o,f(r,n)].filter(Boolean).join(" - "),l=t.findIndex((e=>e.value.name===r.library.name)),p={name:s,value:{name:`${r.library.name}`,path:a,type:o,uri:r.library?.appData?.manifest?.["sap.platform.abap"]?.uri||"",dependencies:i,libRoot:e}};l>=0?t[l]=p:t.push(p)}}}})),r.on("end",(()=>{a()})),r.on("error",(e=>{o(e)}))}))}function y(e,t){try{return(0,c.default)(e).get(t)?.toString()||""}catch(e){return""}}function g(e,t){const n=e["sap.app"]?.description;if("string"==typeof n&&n.startsWith("{{")){const a=n.replace(/(^{{)|(}}$)/g,"");return y((0,s.join)(t,e["sap.app"].i18n.toString()),a).toString()}return(n||"").toString()}function f(e,t){const n=e?.library?.documentation;if("string"==typeof n&&n.startsWith("{{")){const a=n.replace(/(^{{)|(}}$)/g,"");return y((0,s.join)(t,e.library.appData.manifest.i18n.toString()),a).toString()}return n.toString()}function h(e){const t=[];if(e?.library?.dependencies?.dependency){let n=e.library.dependencies.dependency;Array.isArray(n)||(n=[n]),n.forEach((e=>{p.ui5Libs.some((t=>e.libraryName===t||e.libraryName.startsWith(t+".")))||t.push(e.libraryName)}))}return t}function T(e){const t=[];return Object.values(p.ManifestReuseType).forEach((n=>{e["sap.ui5"]&&e["sap.ui5"].dependencies&&e["sap.ui5"].dependencies[n]&&Object.keys(e["sap.ui5"].dependencies.libs).forEach((e=>{p.ui5Libs.some((t=>e===t||e.startsWith(t+".")))||t.push(e)}))})),t}function P(e){return u.default.existsSync((0,s.join)(e,"/library.js"))?"library":"component"}t.getReuseLibs=async e=>{const t=[],n=[],a=[];try{e.filter((e=>"file"===e.uri.scheme)).forEach((e=>{t.push(e.uri.fsPath)}))}catch(e){return e}for(const e of t)try{await d(e,n,a)}catch(e){return e}for(const e of a)for(const t of n)t.value.path.includes(e)&&""===t.value.libRoot&&(t.value.libRoot=e);return n},t.findLibraryManifests=d,t.getI18nProperty=y,t.getManifestDesc=g,t.getLibraryDesc=f,t.getLibraryDependencies=h,t.getManifestDependencies=T,t.getReuseType=P},43908:(e,t)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.ui5Libs=t.ManifestReuseType=t.ReuseLibType=void 0,function(e){e.LIBRARY="library",e.COMPONENT="component"}(n||(t.ReuseLibType=n={})),function(e){e.library="libs",e.component="components"}(a||(t.ManifestReuseType=a={})),t.ui5Libs=["sap.apf","sap.base","sap.chart","sap.collaboration","sap.f","sap.fe","sap.fileviewer","sap.gantt","sap.landvisz","sap.m","sap.ndc","sap.ovp","sap.rules","sap.suite","sap.tnt","sap.ui","sap.uiext","sap.ushell","sap.uxap","sap.viz","sap.webanalytics","sap.zen"]},18456:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCapI18nFolderNames=t.createI18nEntriesForCap=t.createI18nEntryForEdmx=t.getCapI18nBundle=t.get18nBundle=t.getEdmxI18nBundle=void 0;const a=n(71017),o=n(9949),r=n(3524),i=n(75764),s=n(54145),l=n(78702),p=n(21210),c=n(98933);async function u(e,t,n,o=p.ManifestSection.ui5){const i={};try{const n=(0,a.join)(e,t.i18n[o]),s=await(0,l.readFile)(n),p=(0,r.loadPropertiesTexts)(s,n);for(const e of p)i[e.key.value]?i[e.key.value].push(e):i[e.key.value]=[e]}catch(e){n&&n.error(c.i18n.t("ERROR_RESOLVING_I18N_BUNDLES",{error:e.message}))}return i}async function m(e,t){const n=await(0,o.getCdsFiles)(e,!0),a=await(0,o.getCapEnvironment)(e);return(0,s.getCapI18nBundle)(e,a,n,t)}t.getEdmxI18nBundle=u,t.get18nBundle=async function(e,t,n){const{root:a,apps:o}=e;if("Cap"===e.type){const[e,r,i]=await Promise.all([u(a,o[t],n,p.ManifestSection.app),u(a,o[t],n),m(a,n)]);return{app:e,ui5:r,service:i}}{const[e,r]=await Promise.all([u(a,o[t],n,p.ManifestSection.app),u(a,o[t],n)]);return{app:e,ui5:r,service:{}}}},t.getCapI18nBundle=m,t.createI18nEntryForEdmx=async function(e,t){const n=(0,a.join)(e.root,i.DirName.Webapp,"i18n","i18n.properties");if(!await(0,l.fileExists)(n)){const t=(0,a.join)(e.root,i.DirName.Webapp,"i18n");try{await(0,l.isDirectory)(t)}catch(e){await(0,l.createDirectory)(t)}const o=`# This is the resource bundle for ${(0,a.basename)(e.root)}\n`;await(0,l.updateFile)(n,o);const r=(0,a.join)(e.root,e.apps[""].manifest),s=await(0,l.readJSON)(r);s["sap.ui5"].models["@i18n"]||(s["sap.ui5"].models["@i18n"]={type:"sap.ui.model.resource.ResourceModel",uri:"i18n/i18n.properties"},await(0,l.updateJSON)(r,s))}const o=(await(0,l.readFile)(n)).concat(t);await(0,l.updateFile)(n,o)},t.createI18nEntriesForCap=async function(e,t,n){const a=await(0,o.getCapEnvironment)(e);await(0,s.addI18nEntriesForCdsFile)(a,e,t,n)},t.getCapI18nFolderNames=async function(e){const t=await(0,o.getCapEnvironment)(e);return(0,s.getI18nFolderNames)(t)}},79632:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.findI18nProperty=t.getAppProgrammingLanguage=t.isAdaptationProject=t.findExtensionFiles=t.checkPackageJson=t.getCapAppMockdataDirPath=t.tryGetEdmxAppMockServiceMockdataDir=t.getEdmxAppDefaultMockdataDirPath=t.updateI18nProperties=t.isFioriToolsProject=t.isOVPProject=t.scriptsRegEx=t.hasDependency=t.getAppIdForFile=t.getProjectTypeFromProjectFiles=t.getProjectType=t.checkServeLocalConfig=t.getUI5Version=t.getBackendConfigByPath=t.getLocalUI5Version=t.getUi5CustomMiddleware=t.getVersionFromManifest=t.getI18nProperties=t.readAppJson=t.getAppConfig=t.getMainService=t.findRunnableProjects=t.findRootsForPath=t.findProjectRootsByDependency=t.findAllProjectRoots=t.findAllManifest=t.findLibrary=t.findProjectRoot=t.findAll=t.deleteCapApp=t.getI18nPaths=t.getDetailedProjectType=t.getApplicationId=t.getAppType=void 0;var r=n(8144);Object.defineProperty(t,"getAppType",{enumerable:!0,get:function(){return r.getAppType}}),Object.defineProperty(t,"getApplicationId",{enumerable:!0,get:function(){return r.getApplicationId}}),Object.defineProperty(t,"getDetailedProjectType",{enumerable:!0,get:function(){return r.getDetailedProjectType}}),Object.defineProperty(t,"getI18nPaths",{enumerable:!0,get:function(){return r.getI18nPaths}}),Object.defineProperty(t,"deleteCapApp",{enumerable:!0,get:function(){return r.deleteCapApp}}),Object.defineProperty(t,"findAll",{enumerable:!0,get:function(){return r.findAll}}),Object.defineProperty(t,"findProjectRoot",{enumerable:!0,get:function(){return r.findProjectRoot}}),Object.defineProperty(t,"findLibrary",{enumerable:!0,get:function(){return r.findLibrary}}),Object.defineProperty(t,"findAllManifest",{enumerable:!0,get:function(){return r.findAllManifest}}),Object.defineProperty(t,"findAllProjectRoots",{enumerable:!0,get:function(){return r.findAllProjectRoots}}),Object.defineProperty(t,"findProjectRootsByDependency",{enumerable:!0,get:function(){return r.findProjectRootsByDependency}}),Object.defineProperty(t,"findRootsForPath",{enumerable:!0,get:function(){return r.findRootsForPath}}),Object.defineProperty(t,"findRunnableProjects",{enumerable:!0,get:function(){return r.findRunnableProjects}}),Object.defineProperty(t,"getMainService",{enumerable:!0,get:function(){return r.getMainService}}),Object.defineProperty(t,"getAppConfig",{enumerable:!0,get:function(){return r.getAppConfig}}),Object.defineProperty(t,"readAppJson",{enumerable:!0,get:function(){return r.readAppJson}}),Object.defineProperty(t,"getI18nProperties",{enumerable:!0,get:function(){return r.getI18nProperties}}),Object.defineProperty(t,"getVersionFromManifest",{enumerable:!0,get:function(){return r.getVersionFromManifest}}),Object.defineProperty(t,"getUi5CustomMiddleware",{enumerable:!0,get:function(){return r.getUi5CustomMiddleware}}),Object.defineProperty(t,"getLocalUI5Version",{enumerable:!0,get:function(){return r.getLocalUI5Version}}),Object.defineProperty(t,"getBackendConfigByPath",{enumerable:!0,get:function(){return r.getBackendConfigByPath}}),Object.defineProperty(t,"getUI5Version",{enumerable:!0,get:function(){return r.getUI5Version}}),Object.defineProperty(t,"checkServeLocalConfig",{enumerable:!0,get:function(){return r.checkServeLocalConfig}}),Object.defineProperty(t,"getProjectType",{enumerable:!0,get:function(){return r.getProjectType}}),Object.defineProperty(t,"getProjectTypeFromProjectFiles",{enumerable:!0,get:function(){return r.getProjectTypeFromProjectFiles}}),Object.defineProperty(t,"getAppIdForFile",{enumerable:!0,get:function(){return r.getAppIdForFile}}),Object.defineProperty(t,"hasDependency",{enumerable:!0,get:function(){return r.hasDependency}}),Object.defineProperty(t,"scriptsRegEx",{enumerable:!0,get:function(){return r.scriptsRegEx}}),Object.defineProperty(t,"isOVPProject",{enumerable:!0,get:function(){return r.isOVPProject}}),Object.defineProperty(t,"isFioriToolsProject",{enumerable:!0,get:function(){return r.isFioriToolsProject}}),Object.defineProperty(t,"updateI18nProperties",{enumerable:!0,get:function(){return r.updateI18nProperties}}),Object.defineProperty(t,"getEdmxAppDefaultMockdataDirPath",{enumerable:!0,get:function(){return r.getEdmxAppDefaultMockdataDirPath}}),Object.defineProperty(t,"tryGetEdmxAppMockServiceMockdataDir",{enumerable:!0,get:function(){return r.tryGetEdmxAppMockServiceMockdataDir}}),Object.defineProperty(t,"getCapAppMockdataDirPath",{enumerable:!0,get:function(){return r.getCapAppMockdataDirPath}}),Object.defineProperty(t,"checkPackageJson",{enumerable:!0,get:function(){return r.checkPackageJson}}),Object.defineProperty(t,"findExtensionFiles",{enumerable:!0,get:function(){return r.findExtensionFiles}}),Object.defineProperty(t,"isAdaptationProject",{enumerable:!0,get:function(){return r.isAdaptationProject}}),Object.defineProperty(t,"getAppProgrammingLanguage",{enumerable:!0,get:function(){return r.getAppProgrammingLanguage}}),Object.defineProperty(t,"findI18nProperty",{enumerable:!0,get:function(){return r.findI18nProperty}}),o(n(62026),t),o(n(18456),t)},62026:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProjectProvider=t.ProjectProvider=t.ExtensionType=t.ExtensionFileType=void 0;const a=n(9949),o=n(75764),r=n(21210),i=n(71017),s=n(8144),l=n(78702),p=n(59156),c=n(39532),u=n(51247),m=n(14689),d=n(96194);var y,g;!function(e){e.View="View",e.Fragment="Fragment",e.Handler="Handler"}(y||(t.ExtensionFileType=y={})),function(e){e.JS="js",e.TS="ts"}(g||(t.ExtensionType=g={}));class ProjectProvider{constructor(e){this.project={root:e,apps:{},type:void 0}}async init(){const{apps:e,type:t}=await this.getProject(this.project.root);this.project.apps=e,this.project.type=t}async getProject(e){const t=await(0,a.getProject)(e),n={root:t.root,apps:{},type:"EDMXBackend"===t.projectType?"Edmx":"Cap"};for(const e in t.apps){const a=this.relPath(t.root,(0,i.dirname)(t.apps[e].manifest));n.apps[e]={manifest:this.relPath(t.root,t.apps[e].manifest),changes:this.relPath(t.root,t.apps[e].changes),app:(0,i.join)(e,o.DirName.Sapux,o.FileName.App),i18n:{[r.ManifestSection.app]:this.relPath(this.project.root,t.apps[e].i18n["sap.app"]),[r.ManifestSection.ui5]:t.apps[e].i18n.models.i18n?this.relPath(t.root,t.apps[e].i18n.models.i18n.path):void 0},mainService:t.apps[e].mainService,services:this.convertServices(t.root,a,t.apps[e].services),annotations:this.convertAnnotations(t.root,t.apps[e].services),ext:(0,i.join)(a,o.DirName.Ext),controller:(0,i.join)(a,o.DirName.Ext,o.DirName.Controller),view:(0,i.join)(a,o.DirName.Ext,o.DirName.View),fragment:(0,i.join)(a,o.DirName.Ext,o.DirName.Fragment)}}return n}convertAnnotations(e,t){const n={};for(const a in t)if(Array.isArray(t[a].annotations))for(const o of t[a].annotations)"string"==typeof o.local&&(n[a]??=[],n[a].push(this.relPath(e,o.local)));return n}convertServices(e,t,n){const a={};for(const o in n){let r;const s=Array.isArray(n[o].annotations)?n[o].annotations.find((n=>"string"==typeof n.local&&"string"==typeof n.uri&&this.relPath((0,i.join)(e,t),n.local)!==(0,i.join)(n.uri))):void 0;s&&(r={uri:s.uri,local:this.relPath(e,s.local)}),a[o]={uri:n[o].uri,local:this.relPath(e,n[o].local),annotations:r,odataVersion:n[o].odataVersion}}return a}relPath(e,t){return""===t?"":(0,i.relative)(e,t)}getProjectType(){return this.project.type}getAppIds(){return Object.keys(this.project.apps)}async readManifest(e){const t=(0,s.getAppConfig)(this.project,e);return(0,l.readJSON)((0,i.join)(this.project.root,t.manifest))}async updateManifest(e,t){const n=(0,s.getAppConfig)(this.project,t),a=(0,i.join)(this.project.root,n.manifest),o=await(0,l.readJSON)(a);JSON.stringify(o)!==JSON.stringify(e)&&await(0,l.updateJSON)(a,e)}async readChanges(e){const t=(0,s.getAppConfig)(this.project,e);return(0,d.readChanges)((0,i.join)(this.project.root,t.changes))}async readApp(e){const t=(0,s.getAppConfig)(this.project,e);return(0,s.readAppJson)((0,i.join)(this.project.root,t.app),!1)}async readAppWithPages(e){const t=(0,s.getAppConfig)(this.project,e);return(0,s.readAppJson)((0,i.join)(this.project.root,t.app),!0)}async readSchemas(e){const t=(0,s.getAppConfig)(this.project,e),n={},a=(0,i.join)(this.project.root,t.app.replace(o.FileName.App,o.DirName.Schemas)),r=await(0,l.readDirectory)(a);for(const e of r)n[e]=await(0,l.readJSON)((0,i.join)(a,e));return n}async listAnnotationFiles(e,t){return t&&await this.fillServiceSpecificationForApp(e),(0,p.getAnnotationFiles)(this.project,e)}async readAnnotationFiles(e){const t=[];if("Cap"===this.project.type){const n=(0,s.getAppConfig)(this.project,e);if(n.mainService){const e=n.services[n.mainService],o=await(0,a.readCapServiceMetadataEdmx)(this.project.root,e.uri);t.push({fileContent:o,dataSourceUri:e.uri})}}else{const n=await this.listAnnotationFiles(e);for(const e of n){const n=(0,i.join)(this.project.root,e),a=await(0,l.readFile)(n);t.push({dataSourceUri:n,fileContent:a})}}return t}async getAppId(e){return(0,s.getApplicationId)(e,this.project.root)}async getFragmentFiles(e){return(0,c.readVisualExtensionFiles)(e,this.project.root)}async getViewFiles(e){return(0,c.readVisualExtensionFiles)(e,this.project.root,void 0,o.FileName.View)}async updateFragmentFiles(e){return(0,c.writeFragmentFiles)(this.project.root,e)}async getServiceMetadata(e,t){const n=(0,s.getAppConfig)(this.project,e);t=t||n.mainService;const a=n.services[t];if(!a)return null;if("Cap"===this.project.type){if(a.uri)return(0,u.readCapServiceMetadata)(this.project.root,a.uri)}else if(a.local){const e=(0,i.join)(this.project.root,a.local);return(0,u.readServiceMetadata)(e)}return null}async readI18nProperties(e){const t=this.getI18nPropertiesPath(e);let n={};if(t)try{n=await(0,s.getI18nProperties)(t)}catch{}return n}getI18nPropertiesPath(e,t=r.ManifestSection.ui5){const n=(0,s.getAppConfig)(this.project,e);return n.i18n?.[t]?(0,i.join)(this.project.root,n.i18n[t]):void 0}async writeI18nProperty(e,t,n,a,o=r.ManifestSection.ui5){const i=this.getI18nPropertiesPath(a,o);await(0,s.updateI18nProperty)(i,e,t,n)}async writeI18nProperties(e,t){const n=this.getI18nPropertiesPath(t);await(0,s.updateI18nProperties)(n,e)}async findI18nProperty(e,t){const n=this.getI18nPropertiesPath(t);return(0,s.findI18nProperty)(n,e)}async readControllersContent(e){const t=(0,s.getAppConfig)(this.project),n={};for(const a of e){const e=(0,i.join)(this.project.root,t.controller,a+".controller.js");if(await(0,l.fileExists)(e)){const t=await(0,l.readFile)(e);n[a]=t}}return n}async getExtensionFiles(e,t,n=y.View,a=g.JS){const r=t?(0,i.join)(this.project.root,t):this.project.root;let l,p=1;switch(n){case y.View:l=o.FileName.View;break;case y.Fragment:l=o.FileName.Fragment;break;case y.Handler:l=`.${a}`,p=-3}const c=await(0,s.findExtensionFiles)(r,l),u=[];if(e===o.AppPomXmlArtifactIdPlaceholder){const n=await this.readManifest(t);e=await this.getAppId(n)}for(const t of c){let n=t.split(o.DirName.Webapp)[1];n&&(n=n.split(i.sep).join("."),n=`${e}${n.substring(0,n.length-l.length-p)}`,u.push(n))}return u}async updateViewControllerFile(e,t,n,a=!1,o){return(0,c.writeViewControllerFile)(this.project,e,t,n,a,o)}getViewFilePath(e,t,n){let a=this.project.root;return n&&(a=(0,i.join)(a,n)),a=(0,i.join)(a,o.DirName.Webapp,t),(0,i.join)(a,e)}applyOptionsToManifest(e,t){if(e&&e["sap.app"]&&e["sap.app"].dataSources){const n=e["sap.app"].dataSources,a=Object.keys(n);let r=[],i=0;if(a&&a.length){a.forEach((e=>{n[e]&&n[e].type===o.DataSourceType.OData&&n[e].settings&&n[e].settings.annotations&&n[e].settings.annotations.length&&(r=[...new Set([...r,...n[e].settings.annotations])])}));for(const e of a)if(n[e]){const a=n[e].type,s=a===o.DataSourceType.OData,l=n[e];t&&t.isLocal&&(l.isLocal=void 0!==n[e].settings&&n[e].settings.localUri===n[e].uri),t&&t.order&&(s||!r.includes(e)&&a===o.DataSourceType.ODataAnnotation?(l.order=i,i++):l.order=0),t&&t.isActive&&(l.isActive=!!s)}}r.length?(t&&t.isActive&&r.forEach((e=>{n[e]&&(n[e].isActive=!0)})),r.forEach(((e,t)=>{n[e]&&(n[e].order=i+t)}))):Object.keys(n).forEach(((e,t)=>{n[e]&&(n[e].order=t)})),e["sap.app"].dataSources=n}return e}async getSpecification(e){const t=e?(0,i.join)(this.project.root,e):this.project.root;return(0,m.getSpecification)(t)}async getPageConfigPropertyInfo(e,t){const n=await this.getSpecification(t),a=await this.getVersion();return(0,m.getPageConfigPropertyInfo)(n,a,e)}async getVersion(e){const t=await this.readManifest(e);return(0,s.getVersionFromManifest)(t)}async getSpecificationApiVersion(e){let t={version:"0"};try{const n=await this.getSpecification(e);n.getApiVersion&&(t=n.getApiVersion())}catch(e){}return t}async getSpecificationVersion(e){const t=e?(0,i.join)(this.project.root,e):this.project.root,n=await(0,m.getSpecificationVersion)(t),a={version:n},o=n.split(".");return 3===o.length&&(a.patch=o.splice(o.length-1,1)[0],a.ui5=o.join(".")),a}getSpecificationPath(e){const t=e?(0,i.join)(this.project.root,e):this.project.root;return(0,m.getSpecificationPath)(t)}async hasExtension(e){const t=await this.readManifest(e);return(0,c.hasExtension)(t)}async getAdditionalEntitySets(e){const t=await this.readManifest(e);return(0,s.getAdditionalEntitySetsFromManifest)(t)}async fillServiceSpecificationForApp(e){const{apps:t}=await this.getProject(this.project.root);t[e]&&(this.project.apps[e]=t[e])}}t.ProjectProvider=ProjectProvider,t.createProjectProvider=async function(e){const t=new ProjectProvider(e);return await t.init(),t}},91029:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMockServicesConfiguration=t.getMockServerConfig=t.findMockServiceByMetadataPath=void 0;var a=n(78256);Object.defineProperty(t,"findMockServiceByMetadataPath",{enumerable:!0,get:function(){return a.findMockServiceByMetadataPath}}),Object.defineProperty(t,"getMockServerConfig",{enumerable:!0,get:function(){return a.getMockServerConfig}}),Object.defineProperty(t,"getMockServicesConfiguration",{enumerable:!0,get:function(){return a.getMockServicesConfiguration}})},78256:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.findMockServiceByMetadataPath=t.matchMockServiceByMetadataPath=t.getMockServicesConfiguration=t.getMockServerConfig=void 0;const i=n(71017),s=n(75764),l=n(12607),p=n(98933),c=n(78702);function u(e,t){const{metadataPath:n}=e;return!!n&&t.endsWith((0,i.normalize)(n))}t.getMockServerConfig=async function(e,t=s.FileName.Ui5MockYaml){const n=(await(0,l.getParsedUi5YamlConfig)(e,t)).server?.customMiddleware;if(n){let e;const t="sap-fe-mockserver";if(Array.isArray(n))return e=n.find((e=>e.name===t)),e?.configuration||null;const a=n;return a.name===t&&(e=a),e?.configuration||null}return null},t.getMockServicesConfiguration=async function(e,t){const{mockFolder:a}=t;if(a){return{services:await async function(e,t){const a=(0,i.resolve)(e,t),o=(0,i.join)(a,"config.json"),l=(0,i.join)(a,"config.js"),u=await(0,c.fileExists)(o);let m;try{if(u)m=await(0,c.readJSON)(o);else{m=(await Promise.resolve(`${l}`).then((e=>r(n(84679)(e)))))?.default}}catch(t){throw new Error(p.i18n.t("ERROR_UI5_YAML_DYNAMIC_CFG_IMPORT",{filePath:u?o:l,yamlFile:(0,i.join)(e,s.FileName.Ui5MockYaml)}))}return m?.length?m:null}(e,a),mockFolder:a}}const o=t;return{services:o.service?o.service:o.services}},t.matchMockServiceByMetadataPath=u,t.findMockServiceByMetadataPath=function(e,t){if(Array.isArray(e)){for(const n of e)if(u(n,t))return n;return null}return e&&u(e,t)?e:null}},12607:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getParsedUi5YamlConfig=t.readUi5YamlConfig=void 0;const i=n(71017),s=r(n(24346)),l=n(78702),p=n(98933);async function c(e,t){const n=(0,i.join)(e,t);if(await(0,l.fileExists)(n))return(0,l.readFile)(n);{const e=new Error(p.i18n.t("ERROR_UI5_YAML_MISSING"));throw e.name="Ui5MissingError",e}}t.readUi5YamlConfig=c,t.getParsedUi5YamlConfig=async function(e,t){const n=await c(e,t);try{const e=s.parse(n);if(e?.server?.customMiddleware&&Array.isArray(e.server.customMiddleware))for(const t of e.server.customMiddleware){const e=t?.configuration,n=[];Array.isArray(e?.service)?n.push(...e.service):e?.service&&n.push(e.service),Array.isArray(e?.services)?n.push(...e.services):e?.services&&n.push(e.services);for(const e of n)e.mockdataRootPath&&(e.mockdataPath=e.mockdataRootPath),e.metadataXmlPath&&(e.metadataPath=e.metadataXmlPath)}return e}catch(n){throw new Error(p.i18n.t("ERROR_UI5_YAML_PARSING",{filePath:(0,i.join)(e,t),parsingError:n.message}))}}},8144:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isReuseLib=t.getAdditionalEntitySetsFromManifest=t.isAdaptationProject=t.tryGetEdmxAppMockServiceMockdataDir=t.getEdmxAppDefaultMockdataDirPath=t.getCapAppMockdataDirPath=t.getApplicationId=t.deleteCapApp=t.isOVPProject=t.getAppIdForFile=t.checkServeLocalConfig=t.getUI5Version=t.getLocalUI5Version=t.getUi5CustomMiddleware=t.getBackendConfigByPath=t.getVersionFromManifest=t.getProjectType=t.getProjectTypeFromProjectFiles=t.findI18nProperty=t.updateI18nProperties=t.updateI18nProperty=t.getI18nProperties=t.mergeI18nProperties=t.getI18nPaths=t.readAppJson=t.getAppConfig=t.getMainService=t.findProjectRootsByDependency=t.isFioriToolsProject=t.checkPackageJson=t.findRunnableProjects=t.findRootsForPath=t.getDetailedProjectType=t.getAppType=t.findAllProjectRoots=t.findAllManifest=t.getAppProgrammingLanguage=t.hasDependency=t.findExtensionFiles=t.findAll=t.findLibrary=t.findProjectRoot=t.scriptsRegEx=void 0;const s=n(57147),l=i(n(23719)),p=n(88295),c=n(75764),u=n(21210),m=n(11057),d=n(71017),y=n(98933),g=n(78702),f=r(n(24346)),h=i(n(22037)),T=n(5092),P=n(14171),E=n(59390),v=n(91029),b=n(8044),_=n(9949);async function A(e,t=!0){const n=await m(c.FileName.Package,{cwd:e});if(!n)throw new Error("Could not find any project root. Parameter 'sapuxRequired' was "+(t?"true":"false"));let a=(0,d.dirname)(n);if(t){(await(0,g.readJSON)(n)).sapux||(a=await A((0,d.dirname)(a),t))}return a}async function C(e,t){return N(e,c.FileName.Package,t,[".git","node_modules","dist",c.DirName.Sapux,c.DirName.Webapp,"MDKModule"])}async function N(e,t,n,a){return new Promise(((o,r)=>{const i=(0,l.default)(e);i.on("directory",((e,t,n)=>{const o=(0,d.basename)(e);-1!==a.indexOf(o)&&n()})),i.on("file",(e=>{e.endsWith(t)&&n.push((0,d.dirname)(e))})),i.on("end",(()=>{o()})),i.on("error",(e=>{r(e)}))}))}function I(e){return e&&e.length>0&&void 0!==e[0].uri}t.scriptsRegEx=/fiori run|cds-serve|cds watch|cds run|ui5 serve|mvn spring-boot:run/,t.findProjectRoot=A,t.findLibrary=async function(e,t){return N(e,".library",t,[".git","node_modules","dist"])},t.findAll=N,t.findExtensionFiles=async function(e,t=c.FileName.Fragment){const n=[];return new Promise(((a,o)=>{const r=(0,l.default)(e);r.on("directory",((e,t,n)=>{const a=(0,d.basename)(e);".git"!==a&&"node_modules"!==a&&"dist"!==a&&a!==c.DirName.Sapux||n()})),r.on("file",(e=>{e.endsWith(t)&&n.push(e)})),r.on("end",(()=>{a(n)})),r.on("error",(e=>{o(e)}))}))};t.hasDependency=(e,t)=>e.dependencies&&void 0!==e.dependencies[t]||e.devDependencies&&void 0!==e.devDependencies[t],t.getAppProgrammingLanguage=_.getAppProgrammingLanguage;const S=e=>{if(e.scripts){let n=!1;for(const a in e.scripts){if(e.scripts[a].match(t.scriptsRegEx)){n=!0;break}}return n}};async function x(e,t){let n;I(e)?(n=[],e.filter((e=>"file"===e.uri.scheme)).forEach((e=>{n.push(e.uri.fsPath)}))):n=e||[];const a=[];for(const e of n)try{await C(e,a)}catch(e){O(e,"ERROR_PROJECT_ROOT_WORKSPACE",t)}return a}function O(e,t,n){const a=y.i18n.t(t,{error:e.message});n?n.error(a):console.error(a)}async function D(e,t=!0,n,a){const o=await x(e,n);if(t){const e=[];for(const t of o)try{((await(0,g.readJSON)((0,d.join)(t,c.FileName.Package))).sapux||a&&await j(t))&&e.push(t)}catch(e){O(e,"ERROR_INVALID_PACKAGE_JSON",n)}return e}return o}t.findAllManifest=async function(e){let t;I(e)?(t=[],e.filter((e=>"file"===e.uri.scheme)).forEach((e=>{t.push(e.uri.fsPath)}))):t=e||[];const n=[];for(const e of t)try{await N(e,c.FileName.Manifest,n,[".git","node_modules","dist"])}catch(t){const n=y.i18n.t("ERROR_PROJECT_ROOT_WORKSPACE",{root:e,error:t.message});console.error(n)}return n},t.findAllProjectRoots=D,t.getAppType=async function(e,t){let n="SAPUI5 freestyle";return e===t?await k(t)?n="Fiori Reuse":await async function(e){let t=!1;try{!0===(await(0,g.readJSON)((0,d.join)(e,c.FileName.Package))).sapux&&(t=!0)}catch{}return t}(e)?n="SAP Fiori elements":await(0,g.fileExists)((0,d.join)(e,c.FileName.ExtConfigJson))?n="SAPUI5 Extension":await j(t)&&(n="Fiori Adaptation"):n=await async function(e,t){let n="SAPUI5 freestyle";try{const a=await(0,g.readJSON)((0,d.join)(t,c.FileName.Package));a.sapux?Array.isArray(a.sapux)&&(n=a.sapux.find((n=>(0,d.join)(t,...n.split(/[/\\]/))===e))?"SAP Fiori elements":"SAPUI5 freestyle"):n="SAPUI5 freestyle"}catch{}return n}(e,t),n},t.getDetailedProjectType=async function(e,t){if(e===t)return"EDMX Backend";if(await(0,T.isCapJavaProject)(t))return"CAP Java";if(await(0,T.isCapNodeJsProject)(t))return"CAP Node.js";throw new Error(y.i18n.t("ERROR_DETAIL_PROJECT_TYPE",{appRoot:e,projectRoot:t}))},t.findRootsForPath=async function(e){try{const n=await A(e,!1);if(!n)return null;const a=await(0,g.readJSON)((0,d.join)(n,c.FileName.Package));if(a.sapux)return function(e,t,n){if("boolean"==typeof e&&!0===e)return{appRoot:n,projectRoot:n};if(Array.isArray(e)){const a=t.endsWith(d.sep)?t:t+d.sep,o=e.map((e=>(0,d.join)(...e.split(/\\|\//)))).find((e=>a.startsWith((0,d.join)(n,e)+d.sep)));if(o)return{appRoot:(0,d.join)(n,o),projectRoot:n}}return null}(a.sapux,e,n);if(await(0,T.isCapProject)(n,a))return null;const o=await async function(e){try{const{root:t}=(0,d.parse)(e);let n=(0,d.dirname)(e);for(;n!==t;){if(await(0,T.isCapProject)(n)&&(0,d.join)(n,"app")!==e)return n;n=(0,d.dirname)(n)}}catch(e){}return null}(n);if(o)return{appRoot:n,projectRoot:o};if(((0,s.existsSync)((0,d.join)(n,c.FileName.Ui5LocalYaml))||(0,s.existsSync)((0,d.join)(n,c.FileName.ExtConfigJson)))&&(0,t.hasDependency)(a,"@sap/ux-ui5-tooling")||await k(n))return{appRoot:n,projectRoot:n}}catch(e){console.error(e)}return null};async function R(e,t,n){const a=await(0,g.readJSON)((0,d.join)(e,c.FileName.Package));return!!(a.dependencies&&void 0!==a.dependencies[t]||a.devDependencies&&void 0!==a.devDependencies[t])||!0===n&&!0===a.sapux}function M(e,t,n=u.ManifestSection.ui5){let a;if(n===u.ManifestSection.app)a="string"==typeof t?.[n]?.i18n?t["sap.app"].i18n:"i18n/i18n.properties";else{const e=t?.[u.ManifestSection.ui5]?.models?.i18n||{};if("uri"in e&&"string"==typeof e.uri)a=e.uri;else if("settings"in e&&"object"==typeof e.settings&&"bundleUrl"in e.settings&&"string"==typeof e.settings.bundleUrl)a=e.settings.bundleUrl;else if("settings"in e&&"object"==typeof e.settings&&"bundleName"in e.settings&&"string"==typeof e.settings.bundleName){const n=e.settings.bundleName.replace(t["sap.app"].id,"");a=`${(0,d.join)(...n.split("."))}.properties`}}return a?(0,d.join)(e,a):void 0}async function V(e,t){const n=(await(0,g.readFile)(e)).split(/\r\n|\n/);for(let e=0;e<n.length;e++){const a=n[e];if(a.startsWith("#"))t(a,e);else{const[n,o]=a.includes("=")?a.split("="):a.split(":");t(a,e,n?n.trim():n,o?o.trim():o)}}return n}async function U(e,t){return await V(t,((t,n,a,o)=>{a&&o&&(e[a]=o)})),e}async function F(e,t){if(0===t.length)return;const n=[],a={},o=await V(e,((e,o,r,i)=>{const s=void 0!==i?t.findIndex((e=>e.key===r)):-1;if(-1!==s){const{key:n,value:o}=t[s];e=`${n}=${o}`,a[s]=!0}n.push(e)}));o.length>0&&o[o.length-1].trim()&&t.length&&n.push("");for(const e in t)if(!a[e]){const{comment:a,key:o,value:r}=t[e];a&&n.push(`#${a}`),n.push(`${o}=${r}${h.default.EOL}`)}await(0,g.updateFile)(e,n.join(h.default.EOL))}async function w(e,t){return await(0,T.isCapProject)(e,t)?"Cap":"Edmx"}let L;async function j(e){const t=(0,d.join)(e,".adp","config.json");return(0,g.fileExists)(t)}async function k(e){let t=!1;try{const n=await(0,g.readFile)((0,d.join)(e,c.FileName.Ui5Yaml));"library"===f.parse(n)?.type&&(t=!0)}catch{}return t}t.findRunnableProjects=async(e,n)=>{const a=[],o=await D(e,!1);for(const e of o)try{const n=await(0,g.readJSON)((0,d.join)(e,c.FileName.Package));((0,t.hasDependency)(n,"@sap/ux-ui5-tooling")||await(0,T.isCapProject)(e,n))&&S(n)&&a.push(e)}catch(t){n?.info(`Invalid JSON ${(0,d.join)(e,c.FileName.Package)}. Application Modeler will skip this project.`);continue}return a},t.checkPackageJson=R,t.isFioriToolsProject=async function(e,t,n){try{return await R(e,t,n)}catch(e){return!1}},t.findProjectRootsByDependency=async function(e,t,n){const a=[],o=await x(e,n);for(const e of o)try{await R(e,t,!1)&&a.push(e)}catch(e){O(e,"ERROR_INVALIND_PACKAGE_JSON_FOR_APP",n)}return a},t.getMainService=function(e){const t=e["sap.ovp"]?e["sap.ovp"].globalFilterModel:"";return e["sap.ui5"]&&e["sap.ui5"].models&&e["sap.ui5"].models[t]?e["sap.ui5"].models[t].dataSource:void 0},t.getAppConfig=function(e,t){let n;if(void 0===t){const t=Object.keys(e.apps);if(t.length>1)throw n=y.i18n.t("ERROR_REQUIRED_APP"),new Error(n);return e.apps[t[0]]}{const a=e.apps[t];if(!a)throw n=y.i18n.t("ERROR_INVALID_APP_ID"),new Error(n);return a}},t.readAppJson=async function(e,t=!0){const n=await(0,g.readJSON)(e);if(t){const t=e.replace(c.FileName.App,c.DirName.Pages),a=await(0,g.readDirectory)(t);for(const e of a){const a=e.replace(".json","");n.pages[a]&&(n.pages[a].config=await(0,g.readJSON)((0,d.join)(t,e)))}}return n},t.getI18nPaths=function(e,t){const n=M(e,t,u.ManifestSection.app),a=M(e,t);return{[u.ManifestSection.app]:n,[u.ManifestSection.ui5]:a}},t.mergeI18nProperties=U,t.getI18nProperties=async function(e,t){let n={};return n=await U(n,e),t&&(n=await U(n,e.replace("i18n.",`i18n_${t}.`))),n},t.updateI18nProperty=async function(e,t,n,a){await F(e,[{key:t,value:n,comment:a}])},t.updateI18nProperties=F,t.findI18nProperty=async function(e,t){let n;return await V(e,((e,a,o,r)=>{t&&r&&t===o&&(n={key:t,value:r,lineIndex:a})})),n},t.getProjectTypeFromProjectFiles=w,t.getProjectType=async function(e){return w(e,await(0,g.readJSON)((0,d.join)(e,c.FileName.Package)))},t.getVersionFromManifest=function(e){if(e["sap.ui.generic.app"]||e["sap.ovp"])return u.FioriElementsVersion.v2;if(e["sap.ui5"]?.routing?.targets){let t=!1;return Object.keys(e["sap.ui5"]?.routing?.targets).forEach((n=>{const a=e["sap.ui5"]?.routing?.targets[n];(a.name?.startsWith("sap.fe.templates.")||a.name?.startsWith("sap.fe.core.fpm"))&&(t=!0)})),t?u.FioriElementsVersion.v4:void 0}return u.FioriElementsVersion.v4},t.getBackendConfigByPath=async function(e,t,n="ui5.yaml",a="fiori-tools-proxy"){let o,r;const i=await(0,g.readFile)((0,d.join)(e,n)),s=f.parse(i)?.server?.customMiddleware,l=s?.find((e=>e.name===a)),p=l?.configuration?.backend;if(p){const e=p.find((e=>e.path===t));if(e)r=e;else for(const e of p)t.startsWith(e.path)&&(!o||o.length<e.path.length)&&(o=e.path,r=e)}return r},t.getUi5CustomMiddleware=async function(e){const t=await(0,g.readFile)((0,d.join)(e,c.FileName.Ui5Yaml)),n=f.parse(t)?.server?.customMiddleware;return n?.find((e=>"fiori-tools-proxy"===e.name))},t.getLocalUI5Version=async function(e){const t=(0,d.join)(e,c.FileName.Ui5LocalYaml);if(await(0,g.fileExists)(t)){const e=f.parse(await(0,g.readFile)(t));return e.framework&&e.framework.version}},t.getUI5Version=async function(e){try{let t="latest";const n=await(0,P.getUi5CustomWebappPath)(e),a=(0,d.join)(e,n,c.FileName.Manifest);if(await(0,g.fileExists)(a)){t=(await(0,g.readJSON)(a))["sap.ui5"]?.dependencies?.minUI5Version,isNaN(parseFloat(t))&&(void 0===L&&(L=await(0,E.getLatestSapui5Version)()),t=L||"latest")}return t}catch(e){return"latest"}},t.checkServeLocalConfig=async function(e){const t=(0,d.join)(e,c.FileName.Ui5LocalYaml);if(await(0,g.fileExists)(t)){const e=f.parse(await(0,g.readFile)(t)).server.customMiddleware.find((e=>"fiori-tools-servestatic"===e.name));return!!(e&&e.mountPath&&"/resources|/test-resources"===e.mountPath&&e.configuration&&e.configuration.path)}return!1},t.getAppIdForFile=function(e,t,n){let a="";for(const o of n){const n=(0,d.join)(t,o);if(n===e){a=o;break}const r=(0,d.relative)(n,e);if(r&&!r.startsWith("..")&&!(0,d.isAbsolute)(r)){a=o;break}}return a},t.isOVPProject=function(e){return!!e["sap.ovp"]},t.deleteCapApp=async function(e,t){const n=(0,d.basename)(e),a=await A(e),o=(0,d.join)(a,c.FileName.Package),r=await(0,g.readJSON)(o),i=[(0,d.join)((0,d.dirname)(e),c.FileName.ServiceCds),(0,d.join)((0,d.dirname)(e),c.FileName.IndexCds)];if(!Array.isArray(r.sapux))throw t?.error(y.i18n.t("ERROR_DEL_CAP_APP_SAPUX",{packageJsonPath:o})),Error(y.i18n.t("ERROR_DEL_CAP_APP_SAPUX",{packageJsonPath:o}));t?.info(y.i18n.t("INFO_DEL_CAP_APP",{appName:n,projectRoot:a}));const s=e.replace(/\\/g,"/");r.sapux=r.sapux.filter((e=>!s.endsWith(e))),0===r.sapux.length&&(t?.info(y.i18n.t("INFO_DEL_LAST_CAP_APP",{packageJsonPath:o})),delete r.sapux),r.scripts?.[`watch-${n}`]&&delete r.scripts[`watch-${n}`],await(0,g.updateJSON)(o,r),t?.info(y.i18n.t("INFO_DEL_CAP_APP_FILE_UPDATED",{packageJsonPath:o})),await(0,g.deleteDirectory)(e),t?.info(y.i18n.t("INFO_DEL_CAP_APP_DIR_DELETED",{appPath:e}));const l=`using from './${n}/annotations';`;for(const e of i)if(await(0,g.fileExists)(e))try{let a=await(0,g.readFile)(e);-1!==a.indexOf(l)&&(t?.info(y.i18n.t("INFO_DEL_CAP_APP_DELETE_USING",{appName:n,cdsFilePath:e})),a=a.replace(l,""),""===a.replace(/\n/g,"").trim()?(t?.info(y.i18n.t("INFO_DEL_CAP_APP_DEL_CDS",{cdsFilePath:e})),await(0,g.deleteFile)(e)):await(0,g.updateFile)(e,a))}catch(n){t?.error(y.i18n.t("ERROR_DEL_CAP_APP_MODIFY_CDS",{cdsFilePath:e}))}0===(await(0,g.readDirectory)((0,d.dirname)(e))).length&&(t?.info(y.i18n.t("INFO_DEL_CAP_APP_FOLDER_EMPTY",{appPath:(0,d.dirname)(e)})),await(0,g.deleteDirectory)((0,d.dirname)(e)))},t.getApplicationId=async function(e,t){let n=e["sap.app"].id;if(n===c.AppPomXmlArtifactIdPlaceholder)try{const e=await(0,g.readFile)((0,d.join)(t,"pom.xml")),a=(new p.XMLParser).parse(e);if(!a.project?.artifactId)throw new Error;n=a.project.artifactId}catch(e){n=(0,d.basename)(t)}return n},t.getCapAppMockdataDirPath=function(e){const t=[(0,d.join)(e,c.DirName.Db,c.DirName.Csv),(0,d.join)(e,c.DirName.Db,c.DirName.Sapux,c.DirName.Csv)];for(const e of t)if((0,s.existsSync)(e))return e;return(0,d.join)(e,c.DirName.Db,c.DirName.Data)},t.getEdmxAppDefaultMockdataDirPath=function(e){return(0,d.join)(e,c.DirName.Webapp,c.DirName.LocalService,c.DirName.Data)},t.tryGetEdmxAppMockServiceMockdataDir=async function(e,t){const n=await(0,v.getMockServerConfig)(e);if(n){const{services:a,mockFolder:o}=await(0,v.getMockServicesConfiguration)(e,n);if(a){const n=(0,v.findMockServiceByMetadataPath)(a,t);if(n?.mockdataPath){const t=o?(0,d.resolve)(e,o):e;return(0,d.resolve)(t,n.mockdataPath)}}}},t.isAdaptationProject=j,t.getAdditionalEntitySetsFromManifest=function(e){const t=(0,b.JSONPath)({path:"$['sap.ui5'].routing.targets",json:e})[0],n={};for(const e in t){const a=t[e],o=(0,b.JSONPath)({path:"options.settings.views.paths.*.entitySet",json:a});o.length>0&&(n[e]=o)}if(Object.keys(n).length>0)return n},t.isReuseLib=k},14171:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getUi5CustomWebappPath=void 0;const i=n(78702),s=n(71017),l=r(n(24346)),p=n(75764);t.getUi5CustomWebappPath=async function(e){let t=p.DirName.Webapp;try{const n=await(0,i.readFile)((0,s.join)(e,p.FileName.Ui5Yaml));t=l.parse(n)?.resources?.configuration?.paths?.webapp??p.DirName.Webapp}catch{}return t}},51247:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCapServiceName=t.readCapServiceMetadata=t.findServiceByUri=t.readServiceMetadata=t.parseServiceMetadata=t.getEdmxVersion=t.ParseError=void 0;const s=n(17538),l=n(78702),p=r(n(43822)),c=n(98933),u=i(n(11109)),m=i(n(20762)),d=i(n(1106)),y=i(n(42864)),g=i(n(97066)),f=i(n(74756)),h=i(n(57688)),T=i(n(62760)),P=n(9949),E={"com.sap.vocabularies.Analytics.v1":u.default,"com.sap.vocabularies.CodeList.v1":m.default,"com.sap.vocabularies.Common.v1":d.default,"com.sap.vocabularies.Communication.v1":y.default,"com.sap.vocabularies.Hierarchy.v1":g.default,"com.sap.vocabularies.PersonalData.v1":f.default,"com.sap.vocabularies.Session.v1":h.default,"com.sap.vocabularies.UI.v1":T.default};var v;function b(){}function _(e){const t=p.parser(!0);let n;try{t.onopentag=e=>{if(e.name.toLowerCase().endsWith(":edmx")&&e.attributes)n=e.attributes.Version;else if(e.name.toLowerCase().endsWith(":dataservices")){const t=e.attributes[Object.keys(e.attributes).find((e=>e.toLowerCase().endsWith(":dataserviceversion")))];throw t&&(n=t),new b}},t.write(e).close()}catch(e){if(!(e instanceof b))throw e}return"1.0"===n||"2.0"===n?"2.0":n}function A(e,t,n){if(E[e])n(!1,E[e]);else{n(c.i18n.t("ERROR_VOCABULARY_NOT_FOUND",{namespace:e,uri:t}))}}async function C(e){return new Promise(((t,n)=>{try{const{converter:a,input:o}=function(e){switch(_(e)){case"2.0":return{converter:s.MetadataConverterFactory.createEdmxV20XmlToV40Json(),input:Buffer.from(e,"utf8")};case"4.0":return{converter:s.MetadataConverterFactory.createEdmxV40XmlToV40Json({metadataFactory:A}),input:e};default:throw v.MissingVersion}}(e);a.execute(o,((e,a)=>{e&&n(e),t(a)}))}catch(e){n(e)}}))}function N(e,t){const n=t.replace(/\\|\//g,"");return e.find((e=>e.urlPath.replace(/\\|\//g,"")===n))}!function(e){e.MissingVersion="No valid EDMX version"}(v||(t.ParseError=v={})),t.getEdmxVersion=_,t.parseServiceMetadata=C,t.readServiceMetadata=async function(e){try{return await C(await(0,l.readFile)(e))}catch(t){if(t.message.startsWith("ENOENT"))throw new Error(c.i18n.t("ERROR_METADATA_NOT_FOUND"));{const n=c.i18n.t("ERROR_READING_METADATA",{path:e,error:t.message});throw new Error(n)}}},t.findServiceByUri=N,t.readCapServiceMetadata=async function(e,t){return C(await(0,P.readCapServiceMetadataEdmx)(e,t))},t.getCapServiceName=async function(e,t){const n=(await(0,P.getCapModelAndServices)(e)).services,a=N(n,t);if(!a||!a.name){const e=c.i18n.t("ERROR_SERVICE_NOT_FOUND",{uri:t,services:JSON.stringify(n)});throw Error(e)}return a.name}},67220:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findUsedEntities=void 0;const a=n(28033);t.findUsedEntities=function(e){const t=[],n=(e,n)=>{t.find((t=>t.service+t.entity===e+n))||t.push({service:e,entity:n})},o=(0,a.getMainService)(e),r=e["sap.app"]?.dataSources?.[o]?.uri||"";if("object"==typeof e["sap.ui5"]?.routing?.targets)for(const t in e["sap.ui5"].routing.targets){const a=e["sap.ui5"].routing.targets[t].options?.settings;if(a?.entitySet&&n(r,a.entitySet),Array.isArray(a?.views?.paths))for(const e of a.views.paths)e.entitySet&&n(r,e.entitySet)}return t}},14689:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.findPageConfigPropertyInfo=t.getPageConfigPropertyInfo=void 0,o(n(37122),t);var r=n(36195);Object.defineProperty(t,"getPageConfigPropertyInfo",{enumerable:!0,get:function(){return r.getPageConfigPropertyInfo}}),Object.defineProperty(t,"findPageConfigPropertyInfo",{enumerable:!0,get:function(){return r.findPageConfigPropertyInfo}})},36195:(e,t)=>{"use strict";function n(e){return t=>e[t.replace("#/definitions/","")]}function a(e,t,n,o){if(e.$ref&&a(n(e.$ref),t,n,o),e.anyOf)for(const r of e.anyOf)a(r,t,n,o);if(e.properties){const r=Object.keys(e.properties).filter((e=>"$schema"!==e));for(const i of r)a(e.properties[i],`${t}.${i}`,n,o)}"object"==typeof e.additionalProperties&&a(e.additionalProperties,t,n,o),e.type&&o.set(t,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.findPageConfigPropertyInfo=t.getPageConfigPropertyInfo=void 0,t.getPageConfigPropertyInfo=async function(e,t,o){const r=await e.getGenericSchema(t,o),i=new Map;return a(r,o,n(r.definitions),i),Array.from(i.keys()).sort()},t.findPageConfigPropertyInfo=function(e,t,o){const r=new Map;return a(e,t,n(e.definitions),r),r.get(`${t}.${o}`)}},37122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpecificationVersion=t.getSpecification=t.getSpecificationPath=t.SpecificationError=void 0;const a=n(71017),o=n(78702),r=n(75764),i=n(98933),s=n(9949);class SpecificationError extends Error{constructor(e){super(e),this.name=this.constructor.name}}t.SpecificationError=SpecificationError;t.getSpecificationPath=e=>{try{const t=(0,a.join)("@sap","ux-specification"),o=n(72869).resolve("@sap/ux-specification",{paths:[e]});return o.slice(0,o.indexOf(t)+t.length)}catch(e){throw new Error(e)}};t.getSpecification=async e=>{try{return await(0,s.loadModuleFromProject)(e,"@sap/ux-specification")}catch(t){throw new SpecificationError(i.i18n.t("ERROR_SPECIFICATION_MISSING",{root:e}))}};t.getSpecificationVersion=async e=>{try{const n=(0,t.getSpecificationPath)(e);return(await(0,o.readJSON)((0,a.join)(n,r.FileName.Package))).version}catch(e){return""}}},39761:(e,t)=>{"use strict";var n,a,o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.AppPomXmlArtifactIdPlaceholder=t.AppType=t.RootIntent=t.OdataVersion=t.FioriElementsVersion=void 0,function(e){e.v2="v2",e.v4="v4"}(n||(t.FioriElementsVersion=n={})),function(e){e.v2="v2",e.v4="v4"}(a||(t.OdataVersion=a={})),function(e){e.listReportV2="masterDetail-display",e.listReportV4="fe-lrop-v4",e.ovp="OVP-display"}(o||(t.RootIntent=o={})),function(e){e.FioriElement="SAP Fiori elements",e.UI5Freestyle="SAPUI5 freestyle",e.UI5Extension="SAPUI5 Extension",e.Reuse="Fiori Reuse",e.Adaptation="Fiori Adaptation"}(r||(t.AppType=r={})),t.AppPomXmlArtifactIdPlaceholder="${project.artifactId}"},29018:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SchemeName=t.getFioriToolsDirectory=t.FioriToolsSettings=t.FileName=t.DirName=void 0;const a=n(22037),o=n(71017);var r,i,s;!function(e){e.Sapux="src",e.Schemas=".schemas",e.Pages="pages",e.Webapp="webapp",e.Temp=".tmp",e.Changes="changes",e.LocalService="localService",e.Controller="controller",e.View="view",e.Fragment="fragment",e.Ext="ext",e.VSCode=".vscode",e.AppConfig="appconfig",e.Db="db",e.Csv="csv",e.Data="data",e.Mockdata="mockdata",e.Dist="dist"}(r||(t.DirName=r={})),function(e){e.Manifest="manifest.json",e.App="app.json",e.Package="package.json",e.ServiceMetadata="metadata.xml",e.NeoApp="neo-app.json",e.Pom="pom.xml",e.Fragment="fragment.xml",e.LaunchConfig="launch.json",e.ServiceCds="services.cds",e.IndexCds="index.cds",e.Ui5Yaml="ui5.yaml",e.Ui5LocalYaml="ui5-local.yaml",e.Ui5MockYaml="ui5-mock.yaml",e.Ui5DeployYaml="ui5-deploy.yaml",e.fioriSandboxConfig="fioriSandboxConfig.json",e.View="view.xml",e.ExtConfigJson=".extconfig.json",e.ManifestAppDescrVar="manifest.appdescr_variant",e.TsConfigJson="tsconfig.json"}(i||(t.FileName=i={})),function(e){e.dir=".fioritools",e.migrationSettingsFile="migrationSettings.json"}(s||(t.FioriToolsSettings=s={}));var l;t.getFioriToolsDirectory=()=>(0,o.join)((0,a.homedir)(),s.dir),function(e){e.Ftfs="ftfs"}(l||(t.SchemeName=l={}))},36041:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},22491:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3785:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8251:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(3785),t),o(n(62828),t),o(n(36975),t),o(n(36041),t),o(n(22491),t)},36975:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},62828:(e,t)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.TableMode=t.HAlign=void 0,function(e){e.initial="Initial",e.left="Left",e.center="Center",e.right="Right",e.begin="Begin",e.end="End"}(n||(t.HAlign=n={})),function(e){e.None="None",e.SingleSelect="SingleSelect",e.SingleSelectLeft="SingleSelectLeft",e.SingleSelectMaster="SingleSelectMaster",e.MultiSelect="MultiSelect",e.Delete="Delete"}(a||(t.TableMode=a={}))},75764:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.location=void 0,o(n(39761),t),o(n(8251),t),o(n(6874),t),o(n(98222),t),o(n(29018),t),o(n(50036),t),o(n(13610),t);t.location=()=>__dirname.replace(/\\/g,"/")},50036:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.UI5FlexLayer=void 0,function(e){e.VENDOR="VENDOR",e.CUSTOMER_BASE="CUSTOMER_BASE"}(n||(t.UI5FlexLayer=n={}))},6874:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(53004),t)},53004:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageType=void 0;const a=n(21210);t.PageType={...a.PageTypeV2,...a.PageTypeV4}},13610:(e,t)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.DetailedProjectType=t.ProjectType=void 0,function(e){e.Cap="Cap",e.Edmx="Edmx"}(n||(t.ProjectType=n={})),function(e){e.Edmx="EDMX Backend",e.CAPNode="CAP Node.js",e.CAPJava="CAP Java"}(a||(t.DetailedProjectType=a={}))},6997:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},66759:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},98222:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(6997),t),o(n(66759),t),o(n(26471),t),o(n(82989),t)},26471:function(e,t,n){"use strict";var a,o=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DataSourceType=void 0,r(n(16368),t),r(n(10496),t),r(n(35145),t),function(e){e.OData="OData",e.ODataAnnotation="ODataAnnotation"}(a||(t.DataSourceType=a={}))},35145:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},10496:(e,t)=>{"use strict";var n,a,o;Object.defineProperty(t,"__esModule",{value:!0}),t.ViewTypes=t.FlexibleColumnLayoutType=t.FlexibleColumnLayoutAggregations=t.FIORI_FCL_ROOT_ID=t.FIORI_FCL_ROOT_VIEW_NAME=t.FIORI_FCL_ROUTER_CLASS=void 0,t.FIORI_FCL_ROUTER_CLASS="sap.f.routing.Router",t.FIORI_FCL_ROOT_VIEW_NAME="sap.fe.templates.RootContainer.view.Fcl",t.FIORI_FCL_ROOT_ID="appRootView",function(e){e.BeginColumnPages="beginColumnPages",e.MidColumnPages="midColumnPages",e.EndColumnPages="endColumnPages"}(n||(t.FlexibleColumnLayoutAggregations=n={})),function(e){e.OneColumn="OneColumn",e.TwoColumnsBeginExpanded="TwoColumnsBeginExpanded",e.TwoColumnsMidExpanded="TwoColumnsMidExpanded",e.MidColumnFullScreen="MidColumnFullScreen",e.ThreeColumnsMidExpanded="ThreeColumnsMidExpanded",e.ThreeColumnsEndExpanded="ThreeColumnsEndExpanded",e.ThreeColumnsMidExpandedEndHidden="ThreeColumnsMidExpandedEndHidden",e.ThreeColumnsBeginExpandedEndHidden="ThreeColumnsBeginExpandedEndHidden",e.EndColumnFullScreen="EndColumnFullScreen"}(a||(t.FlexibleColumnLayoutType=a={})),function(e){e.XML="XML",e.HTML="HTML",e.JS="JS",e.JSON="JSON"}(o||(t.ViewTypes=o={}))},16368:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},82989:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},34021:(e,t)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.Entity=t.ServiceName=void 0,function(e){e.OldSystemService="fiori/system/info",e.OldRefreshTokenService="fiori/system/refreshToken",e.ApiHub="fiori/system/apiHub"}(n||(t.ServiceName=n={})),function(e){e.BackendSystem="system"}(a||(t.Entity=a={}))},3297:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getFilesystemWatcherFor=t.FilesystemStore=t.basedir=void 0;const i=r(n(71017)),s=n(57147),l=n(4528),p=n(43895);t.basedir=p.getFioriToolsDirectory;function c(e){const t=e?.trim().toLowerCase();return t&&(0,l.plural)(t)}function u(e){return c(e)+".json"}t.FilesystemStore=class{constructor(e){this.logger=e}async read({entityName:e,id:t}){const n=c(e);if(!n)return this.logger.debug("read: Entity Type is falsy - "+e),Promise.resolve(void 0);const{entities:a,error:o}=this._readAll(n);if(o){if("ENOENT"===o.code)return Promise.resolve(void 0);throw o}if(a)return Promise.resolve(a[t]);this.logger.debug(`read: After parsing, entities is falsy. Entity: ${n}, parsed value: ${a}`)}async getAll({entityName:e}){const t=c(e);if(!t)return this.logger.debug("read: Entity Type is falsy - "+e),Promise.resolve([]);const{entities:n,error:a}=this._readAll(t);if(a){if("ENOENT"===a.code)return Promise.resolve([]);throw a}return n?Promise.resolve(Object.values(n)):(this.logger.debug(`read: After parsing, entities is falsy. Entity: ${t}, parsed value: ${n}`),Promise.resolve([]))}async readAll({entityName:e}){const t=c(e);if(!t)return this.logger.debug("read: Entity Type is falsy - "+e),Promise.resolve({});const{entities:n,error:a}=this._readAll(t);if(a){if("ENOENT"===a.code)return Promise.resolve({});throw a}return n?Promise.resolve(n):(this.logger.debug(`read: After parsing, entities is falsy. Entity: ${t}, parsed value: ${n}`),Promise.resolve({}))}async write({entityName:e,id:t,entity:n}){const a=c(e);if(!a)return this.logger.debug("write: Entity is falsy - "+a),Promise.resolve(void 0);const{entities:o={},error:r}=this._readAll(a);if(r&&"ENOENT"!==r.code)throw r;return o[t]=n,this.writeToFile(a,o),Promise.resolve(n)}async del({entityName:e,id:t}){const n=c(e);if(!n)return this.logger.debug("delete: Entity is falsy - "+n),Promise.resolve(!1);const{entities:a={},error:o}=this._readAll(n);if(o&&"ENOENT"!==o.code)throw o;return!!a[t]?(this.logger.debug(`delete: entity found  for id - ${t}. Deleting`),delete a[t],this.writeToFile(n,a),Promise.resolve(!0)):(this.logger.debug("delete: entity not found"),Promise.resolve(!1))}_readAll(e){let n,a;try{n=s.readFileSync((0,i.join)((0,t.basedir)(),`${e}.json`))?.toString().trim()}catch(e){return this.logger.debug(e.message),{error:e}}if(!n)return{entities:void 0};try{a=JSON.parse(n)?.[e]}catch(e){return{error:e}}return{entities:a}}writeToFile(e,n){const a=(0,t.basedir)(),o=JSON.stringify({[e]:n},null,2),r=u(e);try{s.writeFileSync(i.default.join(a,r),o)}catch(e){if("ENOENT"!==e.code)throw e;this.logger.debug(`Base directory [${a}] does not exist, trying to create it`),s.mkdirSync(a,{recursive:!0}),s.writeFileSync(i.default.join(a,r),o)}}},t.getFilesystemWatcherFor=function(e,n){const a=i.default.join((0,t.basedir)(),u(e));if(s.existsSync(a))return s.watch(a,void 0,(()=>{n(e)}));console.warn(`File Not Found: ${a}`)}},88098:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HybridStore=void 0;const a=n(3297),o=n(85782),r=n(66999),i=n(81981);function s(e){return"fiori/v2/"+e}t.HybridStore=class{constructor(e){this.logger=e,this.filesystem=new a.FilesystemStore(this.logger),this.secureStore=(0,r.getSecureStore)(this.logger)}async read({entityName:e,id:t}){const n=await this.filesystem.read({entityName:e,id:t});n?this.logger.debug("hybrid/read - id: [%s], filesystem: %O",t,n):this.logger.debug(`hybrid/read - id: [${t}], nothing on the filesystem`);const a=await this.secureStore.retrieve(s(e),t);return a?this.logger.debug(`hybrid/read - id: [${t}]. Found sensitive data in secure store`):this.logger.debug(`hybrid/read - id: [${t}], nothing in the secure store`),n||a?{...n,...a}:void 0}async getAll({entityName:e}){return Object.values(await this.readAll({entityName:e}))}async readAll({entityName:e}){const t={},n=await this.filesystem.readAll({entityName:e})||{},a=await this.secureStore.getAll(s(e))||{};for(const e of new Set([...Object.keys(n),...Object.keys(a)])){const o={...n[e],...a[e]};t[e]=o}return t}async write({entityName:e,id:t,entity:n}){const a=(0,i.getSerializableProperties)(n),r=(0,i.getSensitiveDataProperties)(n);if(a.length>0&&r.length>0)for(let e=0;e<a.length;e+=1)-1!==r.indexOf(a[e])&&(this.logger.debug(`hybrid/write - [${a[e]}] is also marked as sensitive. Not writing to filesystem`),a.splice(e,1));const l=(0,o.pick)(n,...a);l?(this.logger.debug("hybrid/write - writing serializable properties: %O",l),await this.filesystem.write({entityName:e,id:t,entity:l})):this.logger.debug("hybrid/write - no serializable properties found in %O",l);const p=(0,o.pick)(n,...r);return p?(this.logger.debug(`hybrid/write - writing sensitive properties to secure store. ID: [${t}]`),await this.secureStore.save(s(e),t,p)):this.logger.debug("hybrid/write - no sensitive properties found in %O",n),n}async del({entityName:e,id:t}){const n=await this.filesystem.del({entityName:e,id:t});this.logger.debug(`hybrid/del - delete result for id [${t}] on the filesystem: ${n}`);const a=await this.secureStore.delete(s(e),t);return this.logger.debug(`hybrid/del - delete result for id [${t}] in the secure store: ${a}`),n||a}}},49047:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFilesystemWatcherFor=void 0;var a=n(3297);Object.defineProperty(t,"getFilesystemWatcherFor",{enumerable:!0,get:function(){return a.getFilesystemWatcherFor}})},43298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemDataProvider=void 0;const a=n(88098),o=n(76578),r=n(88942);t.SystemDataProvider=class{constructor(e){this.entityName=r.Entities.BackendSystem,this.logger=e,this.dataAccessor=new a.HybridStore(this.logger)}async read(e){return this.dataAccessor.read({entityName:this.entityName,id:e.getId()})}async write(e){let t;return t=e instanceof o.BackendSystem?e:new o.BackendSystem({...e}),this.dataAccessor.write({entityName:this.entityName,id:o.BackendSystemKey.from(e).getId(),entity:t})}async delete(e){return this.dataAccessor.del({entityName:this.entityName,id:o.BackendSystemKey.from(e).getId()})}async getAll(){const e=await this.dataAccessor.readAll({entityName:this.entityName});for(const t of Object.keys(e)){e[t]?.url?.trim()||(this.logger.warn(`Filtering system with ID [${t}] as it seems corrupt. Run repair`),delete e[t])}return Object.values(e)}}},88942:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Entities=void 0,function(e){e.BackendSystem="system",e.SystemMigrationStatus="systemMigrationStatus"}(n||(t.Entities=n={}))},41033:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemMigrationStatusDataProvider=void 0;const a=n(3297),o=n(39806),r=n(88942);t.SystemMigrationStatusDataProvider=class{constructor(e){this.entityName=r.Entities.SystemMigrationStatus,this.logger=e,this.dataAccessor=new a.FilesystemStore(this.logger)}read(e){return this.dataAccessor.read({entityName:this.entityName,id:e.getId()})}write(e){return this.dataAccessor.write({entityName:this.entityName,id:(new o.SystemMigrationStatusKey).getId(),entity:e})}delete(e){return this.dataAccessor.del({entityName:this.entityName,id:(new o.SystemMigrationStatusKey).getId()})}getAll(){return this.dataAccessor.getAll({entityName:this.entityName})}}},81981:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSensitiveDataProperties=t.sensitiveData=t.getSerializableProperties=t.serializable=void 0,n(13303);const a=Symbol("serializable");t.serializable=function(e,t){const n=Reflect.getOwnMetadata(a,e.constructor)||new Set;Reflect.defineMetadata(a,n.add(t),e.constructor)},t.getSerializableProperties=function(e){const t=Reflect.getOwnMetadata(a,e.constructor);return t&&Array.from(t.values())||[]};const o=Symbol("sensitive");t.sensitiveData=function(e,t){const n=Reflect.getOwnMetadata(o,e.constructor)||new Set;Reflect.defineMetadata(o,n.add(t),e.constructor)},t.getSensitiveDataProperties=function(e){const t=Reflect.getOwnMetadata(o,e.constructor);return t&&Array.from(t.values())||[]}},76578:function(e,t,n){"use strict";var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.BackendSystem=t.BackendSystemKey=t.AuthenticationType=void 0;const o=n(81981);var r;!function(e){e.Basic="basic",e.ReentranceTicket="reentranceTicket",e.OAuth2RefreshToken="oauth2",e.OAuth2ClientCredential="oauth2ClientCredential"}(r||(t.AuthenticationType=r={}));class BackendSystemKey{static from(e){return new BackendSystemKey({url:e.url,client:e.client})}constructor({url:e,client:t}){this.url=e.trim().replace(/\/$/,""),this.client=t?.trim()}getId(){return this.url+""+(this.client?"/"+this.client:"")}}t.BackendSystemKey=BackendSystemKey;class BackendSystem{constructor({name:e,url:t,client:n,serviceKeys:a,refreshToken:o,username:r,password:i,userDisplayName:s,authenticationType:l,csrfToken:p,cookieString:c}){this.name=e,this.url=t,this.client=n,this.serviceKeys=a,this.refreshToken=o,this.username=r,this.password=i,this.userDisplayName=s,this.authenticationType=l,this.csrfToken=p,this.cookieString=c}}t.BackendSystem=BackendSystem,a([o.serializable],BackendSystem.prototype,"name",void 0),a([o.serializable],BackendSystem.prototype,"url",void 0),a([o.serializable],BackendSystem.prototype,"client",void 0),a([o.serializable],BackendSystem.prototype,"userDisplayName",void 0),a([o.sensitiveData],BackendSystem.prototype,"serviceKeys",void 0),a([o.sensitiveData],BackendSystem.prototype,"refreshToken",void 0),a([o.sensitiveData],BackendSystem.prototype,"username",void 0),a([o.sensitiveData],BackendSystem.prototype,"password",void 0),a([o.sensitiveData],BackendSystem.prototype,"authenticationType",void 0),a([o.sensitiveData],BackendSystem.prototype,"csrfToken",void 0),a([o.sensitiveData],BackendSystem.prototype,"cookieString",void 0)},39806:function(e,t,n){"use strict";var a=this&&this.__decorate||function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.SystemMigrationStatusKey=t.SystemMigrationStatus=void 0;const o=n(81981);class SystemMigrationStatus{constructor({authTypeMigrated:e,migrationDone:t,migrationLogs:n}){this.migrationDone=t,this.authTypeMigrated=e,this.migrationLogs=n}}t.SystemMigrationStatus=SystemMigrationStatus,a([o.serializable],SystemMigrationStatus.prototype,"migrationDone",void 0),a([o.serializable],SystemMigrationStatus.prototype,"authTypeMigrated",void 0),a([o.serializable],SystemMigrationStatus.prototype,"migrationLogs",void 0);t.SystemMigrationStatusKey=class SystemMigrationStatusKey{getId(){return"systemMigration"}}},81879:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.text=t.initI18n=void 0;const o=a(n(73577)),r=a(n(86599)),i=a(n(71017)),s=o.default.createInstance();t.initI18n=async function(){await s.use(r.default).init({initImmediate:!1,fallbackLng:"en",fallbackNS:"default",interpolation:{escapeValue:!1},ns:"ux-store",defaultNS:"ux-store",backend:{loadPath:i.default.join(__dirname,"./translations/{{lng}}.{{ns}}.json")}})},t.text=function(e,t){return s.t(e,t)}},89389:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.Entity=t.getFilesystemWatcherFor=t.getService=void 0;const r=n(34021);Object.defineProperty(t,"Entity",{enumerable:!0,get:function(){return r.Entity}});const i=n(81879),s={system:n(23460).getInstance};t.getService=async function({logger:e=console,entityName:t}){await(0,i.initI18n)();const n=s[t];if(n)return n(e);throw new Error((0,i.text)("error.unsupportedEntity",{entityName:t}))},o(n(7001),t),o(n(66999),t),o(n(76578),t);var l=n(49047);Object.defineProperty(t,"getFilesystemWatcherFor",{enumerable:!0,get:function(){return l.getFilesystemWatcherFor}})},11407:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DummyStore=void 0;t.DummyStore=class DummyStore{constructor(e){this.log=e}async save(e,t,n){return this.log.warn(`Dummy store. Trying to save for service: ${e}, key: ${t}, value type: ${typeof n}`),Promise.resolve(!0)}async retrieve(e,t){return this.log.warn(`Dummy store. Trying to retrieve for service: ${e}, key: ${t}`),Promise.resolve(null)}async delete(e,t){return this.log.warn(`Dummy store. Trying to delete for service: ${e}, key: ${t}`),Promise.resolve(!0)}async getAll(e){return this.log.warn(`Dummy store. Trying to get all values for service: [${e}]`),Promise.resolve({})}}},66999:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.getSecureStore=void 0;const r=n(43895),i=n(11407),s=n(9876);t.getSecureStore=e=>{if((0,r.isAppStudio)()||process.env.UX_TOOLS_DISABLE_KEYSTORE)return new i.DummyStore(e);{const t=function(e){try{return n(74602)}catch(t){let a;e.warn(t),e.warn("Could not \"require('keytar')\". Trying VSCode's copy");try{a=n(66828)}catch(t){return e.warn(t),e.warn("Could not get hold of vscode"),null}try{return n(12937)(`${a?.env?.appRoot}/node_modules.asar/keytar`)}catch(t){e.warn(t),e.warn("Could not get keytar from vscode node_modules.asar")}try{return n(84397)(`${a?.env?.appRoot}/node_modules/keytar`)}catch(t){e.warn(t),e.warn("Could not get keytar from vscode node_modules")}return null}}(e);return t?new s.KeytarStore(e,t):new i.DummyStore(e)}},o(n(41716),t)},9876:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeytarStore=void 0;t.KeytarStore=class KeytarStore{constructor(e,t){this.log=e,this.keytar=t}async save(e,t,n){try{const a=JSON.stringify(n);return await this.keytar.setPassword(e,t,a),!0}catch(n){return this.log.error(`Error saving to secure store. Service: [${e}], key: [${t}]`),this.log.error(n),!1}}async retrieve(e,t){try{const n=await this.keytar.getPassword(e,t);return JSON.parse(n)}catch(n){return this.log.error(`Error retrieving from secure store. Service: [${e}], key: [${t}]`),this.log.error(n),null}}async delete(e,t){try{return await this.keytar.deletePassword(e,t)}catch(n){return this.log.error(`Error deleting from secure store. Service: [${e}], key: [${t}]`),this.log.error(n),!1}}async getAll(e){try{return(await this.keytar.findCredentials(e)).reduce(((e,t)=>{try{e[t.account]=JSON.parse(t.password)}catch(e){this.log.error(`Error parsing credentials for [${t.account}]`)}return e}),{})}catch(t){return this.log.error(`Error getting values for service: [${e}]`),this.log.error(t),{}}}}},41716:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},23460:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInstance=t.SystemService=void 0;const a=n(85782),o=n(43298),r=n(76578),i=n(19468),s=n(81879);class SystemService{constructor(e){this.migrationDone=!1,this.logger=(0,a.getExtendedLogger)(e),this.dataProvider=new o.SystemDataProvider(this.logger)}async partialUpdate(e,t){this.validatePartialUpdateInput(t);const n=await this.readOrThrow(e),a=this.mergeProperties(t,n);return this.write(a)}mergeProperties(e,t){const n={...e};delete n.url,delete n.client;const a={...t,...n};return new r.BackendSystem({...a})}async readOrThrow(e){const t=await this.read(e);if(!t)throw new Error((0,s.text)("error.systemDoesNotExist",{system:e}));return t}validatePartialUpdateInput(e){if(!e||!Object.keys(e).length)throw new Error((0,s.text)("error.noPropertiesSpecified"))}async ensureMigrationDone(){this.migrationDone||(await(0,i.migrate)(this.logger,this.dataProvider),this.migrationDone=!0)}async read(e){return await this.ensureMigrationDone(),this.dataProvider.read(e)}async write(e){return await this.ensureMigrationDone(),this.dataProvider.write(e)}async delete(e){return await this.ensureMigrationDone(),this.dataProvider.delete(e)}async getAll(){return await this.ensureMigrationDone(),this.dataProvider.getAll()}}t.SystemService=SystemService,t.getInstance=function(e){return new SystemService(e)}},7001:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemService=void 0;var a=n(23460);Object.defineProperty(t,"SystemService",{enumerable:!0,get:function(){return a.SystemService}})},19468:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.migrate=void 0;const a=n(34021),o=n(41033),r=n(76578),i=n(39806),s=n(81879),l=n(66999),p=n(85782);class Migration{constructor({logger:e,secureStore:t,systemMigrationStatus:n,systemDataProvider:a}){this.cache={},this.logger=e,this.secureStore=t,this.systemMigrationStatus=n,this.systemDataProvider=a}async run(){let e=!1,t=this.systemMigrationStatus.migrationDone;this.systemMigrationStatus.migrationDone||(this.logger.info(new Date(Date.now()).toString()),await this.migrateFromPureSecureStore(),await this.migrateRefreshTokens(),t=e=!0);let n=this.systemMigrationStatus.authTypeMigrated;return this.systemMigrationStatus.authTypeMigrated||(await this.migrateAuthType(),n=e=!0),{migrationStatus:{...this.systemMigrationStatus,migrationDone:t,authTypeMigrated:n},dirty:e}}async migrateFromPureSecureStore(){const e=await this.secureStore.getAll(a.ServiceName.OldSystemService),t=await this.getExistingSystems();for(const n of Object.keys(e))if(t[n])this.logger.info((0,s.text)("error.systemAlreadyExistsInHybridStore",{systemId:n}));else{const t=e[n];this.logger.debug(`Migrating sytem ID: [${n}]`);const o=await this.getRefreshTokenFromOldStore(t);o&&this.logger.info((0,s.text)("info.foundRefreshToken",{systemId:n})),await this.saveBackendSystem(new r.BackendSystem({...t,refreshToken:o})),await this.secureStore.delete(a.ServiceName.OldSystemService,n),o&&(await this.deleteOldRefreshToken(t,n),this.logger.info((0,s.text)("info.deletingRefreshTokenFromOldStore",{systemId:n})))}}async migrateRefreshTokens(){const e=await this.getExistingSystems();for(const t of Object.keys(e)){const n=e[t],a=await this.getRefreshTokenFromOldStore(n);a&&(this.logger.info((0,s.text)("info.foundRefreshToken",{systemId:t})),await this.updateRefreshTokenInStoredSystem(n,a,t),await this.deleteOldRefreshToken(n,t))}}async migrateAuthType(){const e=await this.getExistingSystems();for(const t of Object.keys(e)){const n=e[t];if(!n.authenticationType){this.logger.info((0,s.text)("info.tryingToUpdateAuthType",{systemId:t}));const e=this.guessAuthType(n);e?(this.logger.info((0,s.text)("info.authTypeDetermined",{authenticationType:e,systemId:t})),await this.saveBackendSystem(new r.BackendSystem({...n,authenticationType:e}))):this.logger.info((0,s.text)("info.authTypeNotDetermined",{systemId:t}))}}}guessAuthType(e){return e.serviceKeys?r.AuthenticationType.OAuth2RefreshToken:e.username?r.AuthenticationType.Basic:void 0}async getRefreshTokenFromOldStore(e){try{const t=new URL(e.url)?.host;return t?await this.secureStore.retrieve(a.ServiceName.OldRefreshTokenService,t):void 0}catch{return}}async deleteOldRefreshToken(e,t){this.logger.info((0,s.text)("info.deletingRefreshTokenFromOldStore",{systemId:t}));try{const t=new URL(e.url)?.host;await this.secureStore.delete(a.ServiceName.OldRefreshTokenService,t)}catch(t){this.logger.info((0,s.text)("error.couldNotDeleteRefreshToken",{url:e.url})),this.logger.info(t.message)}}async updateRefreshTokenInStoredSystem(e,t,n){e.refreshToken!==t&&(this.logger.info((0,s.text)("info.updatingRefreshTokenInNewStore",{systemId:n})),await this.saveBackendSystem(new r.BackendSystem({...e,refreshToken:t})))}async saveBackendSystem(e){return this.cache.existingSystems=void 0,this.systemDataProvider.write(e)}async getExistingSystems(){return this.cache.existingSystems||(this.cache.existingSystems=(await this.systemDataProvider.getAll()).reduce(((e,t)=>(e[new r.BackendSystemKey(t).getId()]=t,e)),{})),this.cache.existingSystems}}function c(e,t){return function(n){e(n),t(n)}}t.migrate=async function(e,t){try{const n=new o.SystemMigrationStatusDataProvider(e),a=await n.read(new i.SystemMigrationStatusKey)||{migrationDone:!1,authTypeMigrated:!1,migrationLogs:[]},r=function(e,t){const n=function(e){const t=(0,p.newDebugLogger)(p.MIGRATION_NAMESPACE);return t.log=t=>{e.push(t?.toString())},(0,p.enableDebugLogger)(p.MIGRATION_NAMESPACE),t}(t);return{info:c(n,e.info),warn:c(n,e.warn),error:c(n,e.error),debug:n}}(e,a.migrationLogs),s=(0,l.getSecureStore)(r),u=new Migration({logger:r,systemMigrationStatus:a,secureStore:s,systemDataProvider:t}),{migrationStatus:m,dirty:d}=await u.run();d&&await n.write(new i.SystemMigrationStatus({...m,migrationLogs:m.migrationLogs.slice(-200)}))}catch(t){e.warn((0,s.text)("error.systemMigrationFailed")),e.debug(t.message)}}},85782:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExtendedLogger=t.pick=t.enableDebugLogger=t.newDebugLogger=t.MIGRATION_NAMESPACE=t.STORE_NAMESPACE=void 0;const a=n(50624);t.STORE_NAMESPACE="ft:store",t.MIGRATION_NAMESPACE=t.STORE_NAMESPACE+":migrate";t.newDebugLogger=(e=t.STORE_NAMESPACE)=>(0,a.debug)(e);t.enableDebugLogger=e=>a.debug.enable(e);t.pick=(e,...t)=>e&&t?.length>0&&t.reduce(((t,n)=>(t[n]=e[n],t)),{})||void 0,t.getExtendedLogger=function(e){return{...e,debug:(0,t.newDebugLogger)()}}},18473:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationInsightClient=void 0;const i=n(26479),s=r(n(4683)),l=n(68192),p=n(67686),c=n(24275),u=n(3782);class ApplicationInsightClient extends i.Client{constructor(e,t,n){super(),this.clients=new Map,super.applicationKey=e,this.extensionVersion=n,this.extensionName=t;const a=this.createTelemetryClient(p.SampleRate.OnePercent),o=this.createTelemetryClient(p.SampleRate.TenPercent),r=this.createTelemetryClient(p.SampleRate.NoSampling);return this.clients.set(p.SampleRate.OnePercent,a),this.clients.set(p.SampleRate.TenPercent,o),this.clients.set(p.SampleRate.NoSampling,r),this}reportBlocking(e,t,n,a,o){if(void 0!==o&&!o||!c.TelemetrySystem.telemetryEnabled)return;const{client:r,event:i}=this.prepareClientAndEvent(e,t,n,a);return this.trackEventBlocking(r,i)}async report(e,t,n,a,o,r){if(void 0!==r&&!r||!c.TelemetrySystem.telemetryEnabled)return;const{client:i,event:s}=this.prepareClientAndEvent(e,t,n,a);this.trackEvent(i,s)}prepareClientAndEvent(e,t,n,a){const o=a||p.SampleRate.NoSampling;return{client:this.clients.get(o),event:{name:new l.EventHeader(this.extensionName,e).toString(),properties:t,measurements:n}}}async trackEventBlocking(e,t){return new Promise((n=>{e.trackEvent(t),e.flush({callback:()=>n()})}))}trackEvent(e,t){return"true"!==process.env.SAP_UX_FIORI_TOOLS_DISABLE_TELEMETRY&&(e.trackEvent(t),!0)}createTelemetryClient(e){let t;switch(e){case p.SampleRate.OnePercent:t=1;break;case p.SampleRate.TenPercent:t=10;break;case p.SampleRate.NoSampling:default:t=100}const n=new s.TelemetryClient(this.applicationKey);return n.config.samplingPercentage=t,(0,u.configAzureTelemetryClient)(n),n}}t.ApplicationInsightClient=ApplicationInsightClient},26479:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;t.Client=class Client{constructor(){this.applicationKey="",this.extensionName="",this.extensionVersion=""}getApplicationKey(){return this.applicationKey}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.extensionName}}},94120:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientFactory=void 0;const i=n(24275),s=r(n(5401)),l=n(56035);class ClientFactory{static getTelemetryClient(){return ClientFactory.getTelemetryClientByClass(l.ToolsSuiteTelemetryClient)}static getTelemetryClientByClass(e){let t=ClientFactory.clientMap.get(e.name);return t||(t=i.TelemetrySystem.manifest?new e(s.azureInstrumentationKey,i.TelemetrySystem.manifest.name,i.TelemetrySystem.manifest.version):new e(s.azureInstrumentationKey,s.name,s.version),ClientFactory.clientMap.set(e.name,t),t)}}t.ClientFactory=ClientFactory,ClientFactory.clientMap=new Map},43159:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ClientType=void 0,function(e){e[e.AzureApplicationInsights=0]="AzureApplicationInsights"}(n||(t.ClientType=n={}))},68192:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventHeader=void 0;t.EventHeader=class EventHeader{constructor(e,t){this.extensionName=e,this.eventName=t}getExtensionName(){return this.extensionName}getEventName(){return this.eventName}toString(){return`${this.extensionName}/${this.eventName}`}}},83064:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.EventName=void 0,function(e){e.Test="test",e.TELEMETRY_SETTINGS_INIT_FAILED="TELEMETRY_SETTINGS_INIT_FAILED",e.DISABLE_TELEMETRY="DISABLE_TELEMETRY",e.GD_GUIDE_ACTION="GUIDE_ACTION",e.GD_PANEL_LOAD="PANEL_LOAD",e.GD_LAUNCH="LAUNCH_GD",e.GD_SIDE_BY_SIDE="GD_SIDE_BY_SIDE",e.GD_WIZARD="GD_WIZARD",e.GD_DESCMODE="GD_DESCMODE",e.GD_PROJECTVIEW="GD_PROJECTVIEW",e.PAGEMAP="PAGEMAP",e.APP_ACTIONS="ACTIONS",e.PAGE_EDITOR="PAGE_EDITOR",e.PAGEMAP_STARTUP_TIME="PAGEMAP_STARTUP_TIME",e.APPLICATION_PREVIEW="APPLICATION_PREVIEW",e.APP_INFO_COMMAND_STARTED="APP_INFO_COMMAND_STARTED",e.APP_INFO_LINK_CLICKED="APP_INFO_LINK_CLICKED",e.APP_INFO_STARTUP_TIME="APP_INFO_STARTUP_TIME",e.SERVICE_MODELER_EVENT="SERVICE_MODELER_EVENT",e.ANNOTATION_FILE_MANAGER_EVENT="ANNOTATION_FILE_MANAGER_EVENT",e.ANNOTATION_LSP_XML_LOAD="ANNOTATION_LSP_XML_LOAD",e.ANNOTATION_LSP_USAGE_TERM="ANNOTATION_LSP_USAGE_TERM",e.ANNOTATION_LSP_CODE_COMPLETION="ANNOTATION_LSP_CODE_COMPLETION",e.ANNOTATION_LSP_CODE_COMPL_LOAD="ANNOTATION_LSP_CODE_COMPL_LOAD",e.MIGRATION_ACTIVATED="MIGRATION_ACTIVATED",e.MIGRATION_BACKEND_LOAD="MIGRATION_BACKEND_LOAD",e.MIGRATION_REFRESH_BACKEND_LOAD="MIGRATION_REFRESH_BACKEND_LOAD",e.MIGRATION_BACK_BACKEND_LOAD="MIGRATION_BACK_BACKEND_LOAD",e.MIGRATION_COMPLETED="MIGRATION_COMPLETED",e.MIGRATION_SUCCESS="MIGRATION_SUCCESS",e.MIGRATION_FAILED="MIGRATION_FAILED",e.MIGRATION_SHOW_INFO_PAGE="MIGRATION_SHOW_INFO_PAGE",e.MIGRATION_ADD_PROJECT="MIGRATION_ADD_PROJECT",e.DEPLOY_CONFIG="DEPLOY_CONFIG",e.DEPLOY="DEPLOY",e.DEPLOY_FAIL="DEPLOY_FAIL",e.UNDEPLOY="UNDEPLOY",e.UNDEPLOY_FAIL="UNDEPLOY_FAIL",e.DATA_EDITOR_EVENT="DATA_EDITOR_EVENT",e.CPE_EVENT="CONTROL_PROPERTY_EDITOR_EVENT",e.SYSTEM_DETAILS_VIEW_EVENT="SYSTEM_DETAILS_VIEW_EVENT",e.SERVICE_INQUIRER_BAS_SUCCESS="SERVICE_INQUIRER_BAS_SUCCESS",e.SERVICE_INQUIRER_BAS_ERROR="SERVICE_INQUIRER_BAS_ERROR",e.GA_LINK_CREATED="GA_LINK_CREATED",e.LIB_REFERENCE_ADDED="LIB_REFERENCE_ADDED",e.ADT_TOOLS_APP_GEN="ADT_TOOLS_APP_GEN",e.AI_GEN="AI_GEN"}(n||(t.EventName=n={}))},67686:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SampleRate=void 0,function(e){e[e.OnePercent=0]="OnePercent",e[e.TenPercent=1]="TenPercent",e[e.NoSampling=2]="NoSampling"}(n||(t.SampleRate=n={}))},1704:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logTelemetryAsync=t.logTelemetry=void 0;const a=n(2599),o=(e,t,n,o,r,i,s)=>{const l=n.value,p=(e?a.asyncInterceptorTypesMapping:a.interceptorTypesMapping).get(r);n.value=p(t,l,o,i,s)};t.logTelemetry=(e,t,n,a)=>(r,i,s)=>{o(!1,r,s,e,t,n,a)};t.logTelemetryAsync=(e,t,n,a)=>(r,i,s)=>{o(!0,r,s,e,t,n,a)}},47937:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetrySettings=t.ToolsId=t.getTelemetrySetting=t.setEnableTelemetry=t.ToolsSuiteTelemetryClient=t.initTelemetrySettings=t.logTelemetryAsync=t.logTelemetry=t.ParamRecordConfigField=t.ParamRecordConfig=t.PerformanceMeasurementAPI=t.interceptorTypes=t.SampleRate=t.EventName=t.EventHeader=t.TelemetrySystem=t.ApplicationInsightClient=t.ClientType=t.Client=t.ClientFactory=void 0;var a=n(94120);Object.defineProperty(t,"ClientFactory",{enumerable:!0,get:function(){return a.ClientFactory}});var o=n(26479);Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return o.Client}});var r=n(43159);Object.defineProperty(t,"ClientType",{enumerable:!0,get:function(){return r.ClientType}});var i=n(18473);Object.defineProperty(t,"ApplicationInsightClient",{enumerable:!0,get:function(){return i.ApplicationInsightClient}});var s=n(24275);Object.defineProperty(t,"TelemetrySystem",{enumerable:!0,get:function(){return s.TelemetrySystem}});var l=n(68192);Object.defineProperty(t,"EventHeader",{enumerable:!0,get:function(){return l.EventHeader}});var p=n(83064);Object.defineProperty(t,"EventName",{enumerable:!0,get:function(){return p.EventName}});var c=n(67686);Object.defineProperty(t,"SampleRate",{enumerable:!0,get:function(){return c.SampleRate}});var u=n(2599);Object.defineProperty(t,"interceptorTypes",{enumerable:!0,get:function(){return u.interceptorTypes}});var m=n(35299);Object.defineProperty(t,"PerformanceMeasurementAPI",{enumerable:!0,get:function(){return m.PerformanceMeasurementAPI}});var d=n(10398);Object.defineProperty(t,"ParamRecordConfig",{enumerable:!0,get:function(){return d.ParamRecordConfig}}),Object.defineProperty(t,"ParamRecordConfigField",{enumerable:!0,get:function(){return d.ParamRecordConfigField}});var y=n(1704);Object.defineProperty(t,"logTelemetry",{enumerable:!0,get:function(){return y.logTelemetry}}),Object.defineProperty(t,"logTelemetryAsync",{enumerable:!0,get:function(){return y.logTelemetryAsync}});var g=n(56035);Object.defineProperty(t,"initTelemetrySettings",{enumerable:!0,get:function(){return g.initTelemetrySettings}}),Object.defineProperty(t,"ToolsSuiteTelemetryClient",{enumerable:!0,get:function(){return g.ToolsSuiteTelemetryClient}}),Object.defineProperty(t,"setEnableTelemetry",{enumerable:!0,get:function(){return g.setEnableTelemetry}}),Object.defineProperty(t,"getTelemetrySetting",{enumerable:!0,get:function(){return g.getTelemetrySetting}}),Object.defineProperty(t,"ToolsId",{enumerable:!0,get:function(){return g.ToolsId}}),t.TelemetrySettings={}},2599:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.asyncInterceptorTypesMapping=t.interceptorTypesMapping=t.interceptorTypes=void 0;const i=r(n(89410));var s;!function(e){e.NOTIFICATION="notify",e.DURATION="duration",e.CAPTURE_PARAM="captureParam"}(s||(t.interceptorTypes=s={}));const l=new Map;t.interceptorTypesMapping=l,l.set(s.NOTIFICATION,i.notify),l.set(s.DURATION,i.duration),l.set(s.CAPTURE_PARAM,i.captureParam);const p=new Map;t.asyncInterceptorTypesMapping=p,p.set(s.NOTIFICATION,i.notifyAsync),p.set(s.DURATION,i.durationAsync),p.set(s.CAPTURE_PARAM,i.captureParamAsync)},89410:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.captureParamAsync=t.captureParam=t.durationAsync=t.duration=t.notifyAsync=t.notify=void 0;const a=n(94120),o=n(35299),r=n(10398);t.notify=(e,t,n,o)=>(...r)=>{const i=t.apply(e,r);return a.ClientFactory.getTelemetryClient().report(n,{},{},o),i};t.notifyAsync=(e,t,n,o)=>async(...r)=>{const i=await t.apply(e,r);return a.ClientFactory.getTelemetryClient().report(n,{},{},o),i};t.duration=(e,t,n,r)=>(...i)=>{const s=o.PerformanceMeasurementAPI.startMark("mark"),l=t.apply(e,i);o.PerformanceMeasurementAPI.endMark(s),o.PerformanceMeasurementAPI.measure(s);const p=o.PerformanceMeasurementAPI.getMeasurementDuration(s);return a.ClientFactory.getTelemetryClient().report(n,{},{ms:p},r),l};t.durationAsync=(e,t,n,r)=>async(...i)=>{const s=o.PerformanceMeasurementAPI.startMark("mark"),l=await t.apply(e,i);o.PerformanceMeasurementAPI.endMark(s),o.PerformanceMeasurementAPI.measure(s);const p=o.PerformanceMeasurementAPI.getMeasurementDuration(s);return a.ClientFactory.getTelemetryClient().report(n,{},{ms:p},r),l};t.captureParam=(e,t,n,o,i)=>(...s)=>{const l=t.apply(e,s),[p,c]=(0,r.getParamsData)(s,i);return a.ClientFactory.getTelemetryClient().report(n,p,c,o),l};t.captureParamAsync=(e,t,n,o,i)=>async(...s)=>{const l=await t.apply(e,s),[p,c]=(0,r.getParamsData)(s,i);return a.ClientFactory.getTelemetryClient().report(n,p,c,o),l}},35299:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceMeasurementAPI=void 0;const a=n(39858),o=n(59297),r=n(126);class PerformanceMeasurementAPI extends o.PerformanceMeasurement{static initialize(){PerformanceMeasurementAPI.initTiming=PerformanceMeasurementAPI.now()}static mark(e,t,n){const o=new a.Mark(e,t,n);PerformanceMeasurementAPI.entries.push(o)}static startMark(e){const t=PerformanceMeasurementAPI.now(),n=e+t;return PerformanceMeasurementAPI.mark(n,o.EntryType.START_MARK,t),n}static endMark(e){const t=PerformanceMeasurementAPI.now();PerformanceMeasurementAPI.mark(e,o.EntryType.END_MARK,t)}static measure(e){const t=PerformanceMeasurementAPI.getEntriesByNameType(e,o.EntryType.START_MARK).slice(-1)[0],n=PerformanceMeasurementAPI.getEntriesByNameType(e,o.EntryType.END_MARK).slice(-1)[0];if(!t&&!n)throw new Error(`Failed to execute 'measure': mark '${e}' doesn't exist.`);if(!t||!n){const n=t?o.EntryType.END_MARK:o.EntryType.START_MARK;throw new Error(`Failed to execute 'measure': mark '${e}'of type '${n}' doesn't exist.`)}const r=t.getStartTime(),i=n.getStartTime()-r,s=new a.Measurement(`${e}`,PerformanceMeasurementAPI.now(),i);PerformanceMeasurementAPI.entries.push(s)}static getEntries(){return PerformanceMeasurementAPI.entries}static getEntriesByName(e){return PerformanceMeasurementAPI.entries.filter((t=>t.name===e))}static getEntriesByNameType(e,t){return PerformanceMeasurementAPI.entries.filter((n=>n.name===e&&n.type===t))}static getEntriesByType(e){return PerformanceMeasurementAPI.entries.filter((t=>t.type===e))}static getMeasurementDuration(e){return PerformanceMeasurementAPI.getEntriesByNameType(e,o.EntryType.MEASUREMENT).slice(-1)[0].getDurationTime()}static clearEntries(){PerformanceMeasurementAPI.entries=[]}}t.PerformanceMeasurementAPI=PerformanceMeasurementAPI,PerformanceMeasurementAPI.now=r,PerformanceMeasurementAPI.entries=[],PerformanceMeasurementAPI.initialize()},39858:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Measurement=t.Mark=void 0;const a=n(59297);class Mark{getStartTime(){return this.startTime}constructor(e,t,n){this.startTime=n,this.name=e,this.startTime=n,this.type=t}}t.Mark=Mark;t.Measurement=class Measurement extends Mark{constructor(e,t,n){super(e,a.EntryType.MEASUREMENT,t),this.startTime=t,this.duration=n,this.duration=n}getDurationTime(){return this.duration}}},59297:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceMeasurement=t.EntryType=void 0,function(e){e.START_MARK="START_MARK",e.END_MARK="END_MARK",e.MEASUREMENT="MEASUREMENT"}(n||(t.EntryType=n={}));t.PerformanceMeasurement=class PerformanceMeasurement{}},24275:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetrySystem=void 0;t.TelemetrySystem=class TelemetrySystem{}},56035:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.processToolsSuiteTelemetry=void 0,o(n(70127),t);var r=n(77471);Object.defineProperty(t,"processToolsSuiteTelemetry",{enumerable:!0,get:function(){return r.processToolsSuiteTelemetry}}),o(n(39493),t),o(n(11767),t)},70127:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolsSuiteTelemetryClient=void 0;const a=n(18473),o=n(56035),r=n(12319);class ToolsSuiteTelemetryClient extends a.ApplicationInsightClient{constructor(e,t,n){super(e,t,n)}async report(e,t,n,a,i,s){const l={...t,...await(0,o.processToolsSuiteTelemetry)(i),...{v:this.extensionVersion,datetime:(0,r.localDatetimeToUTC)()}};await super.report(e,l,n,a,i,s)}async reportEvent(e,t,n,a){const{finalProperties:o,finalMeasurements:r}=await this.collectToolsSuiteTelemetry(e,n);return super.report(e.eventName,o,r,t,n,a)}async reportEventBlocking(e,t,n,a){const{finalProperties:o,finalMeasurements:r}=await this.collectToolsSuiteTelemetry(e,n);return super.reportBlocking(e.eventName,o,r,t,a)}async collectToolsSuiteTelemetry(e,t){const n=await(0,o.processToolsSuiteTelemetry)(t),a={v:this.extensionVersion,datetime:(0,r.localDatetimeToUTC)()};return{finalProperties:{...e.properties,...n,...a},finalMeasurements:{...e.measurements}}}}t.ToolsSuiteTelemetryClient=ToolsSuiteTelemetryClient},77471:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.spawnCommand=t.getCommonProperties=t.processToolsSuiteTelemetry=void 0;const o=n(43895),r=a(n(28887)),i=a(n(57147)),s=a(n(71017)),l=a(n(52375)),p=n(8144),c=n(78702),u=n(5092),m=n(11767),d=n(37705),y=n(32081),g=a(n(22037));async function f(){const e={};return e[m.CommonProperties.DevSpace]=await async function(){if((0,o.isAppStudio)())try{const e=process.env.H2O_URL,t=`${e}/ws-manager/api/v1/workspace/${process.env.WORKSPACE_ID.replace("workspaces-","")}`,n=await r.default.get(t);if(n.data){const e=n.data?.config?.annotations?.pack;return e||""}}catch(e){}return""}(),e[m.CommonProperties.AppStudio]=(0,o.isAppStudio)(),e[m.CommonProperties.AppStudioBackwardCompatible]=e[m.CommonProperties.AppStudio],e[m.CommonProperties.InternlVsExternal]=(0,d.isInternalFeaturesSettingEnabled)()?"internal":"external",e[m.CommonProperties.InternlVsExternalBackwardCompatible]=e[m.CommonProperties.InternlVsExternal],e[m.CommonProperties.NodeVersion]=(await async function(){try{const e=await h("node",["-p","JSON.stringify(process.versions)"]);return JSON.parse(e)}catch{return{}}}()).node,e}function h(e,t){const n=/^win/.test(process.platform)?{windowsVerbatimArguments:!0,shell:!0,cwd:g.default.homedir()}:{cwd:g.default.homedir()};return new Promise(((a,o)=>{let r="";const i=(0,y.spawn)(e,t,n);i.stdout.on("data",(e=>{const t=e.toString();r+=t})),i.stderr.on("data",(e=>{const t=e.toString();r+=t})),i.on("exit",(()=>{a(r)})),i.on("error",(e=>{o(e)}))}))}t.processToolsSuiteTelemetry=async function(e){const t=await f();let n={};return e&&(n=await async function(e){if(!e)return{};const t=await async function(e){const t=s.default.join(e,"README.md");if(i.default.existsSync(t)){const e=await i.default.promises.readFile(t,"utf-8");if(e){let t="";const n=e.split(/\r?\n/);for(const e of n){const n=e.match(/\|\*\*Template Used\*\*<br>.*\|/g);if(n&&n.length>0){t=e.replace("|**Template Used**<br>","").replace("|","").trim();break}}return t}}return""}(e),n=await async function(e){let t=m.DeployTarget.NO_DEPLOY_CONFIG;const n=s.default.join(e,"ui5-deploy.yaml");try{if(await(0,c.fileExists)(n)){const e=await(0,c.readFile)(n),a=l.default.parse(e)?.builder?.customTasks;if(a){t=a.some((e=>"deploy-to-abap"===e.name))?m.DeployTarget.ABAP:m.DeployTarget.CF}else t=m.DeployTarget.UNKNOWN_DEPLOY_CONFIG}}catch(e){console.log(`[Telemetry]: ${e.message}`)}return t}(e),a=await async function(e){try{let t;try{t=await(0,p.findProjectRoot)(e)}catch{}if(!t)try{const n=s.default.dirname(e);t=await(0,p.findProjectRoot)(n,!1)}catch(e){}let n=!1;if(!t){const a=s.default.dirname(e),o=s.default.dirname(a);n=await(0,u.isCapJavaProject)(o),t=n?o:e}if(n)return m.ODataSource.CAPJava;const a=await(0,p.getProjectType)(t);if("Cap"===a){if(await(0,u.isCapJavaProject)(t))return m.ODataSource.CAPJava;if(await(0,u.isCapNodeJsProject)(t))return m.ODataSource.CAPNode}else if("Edmx"===a)return m.ODataSource.ABAP}catch(e){return m.ODataSource.UNKNOWN}}(e),o=await async function(e){let t;try{const n=s.default.join(e,"webapp","manifest.json");if(i.default.existsSync(n)){t=(await(0,c.readJSON)(n))["sap.app"]?.sourceTemplate}}catch(e){console.log(`[Telemetry]: ${e.message}`)}return t=t??{},t.id=t.id??"",t.version=t.version??"",t.toolsId=t.toolsId??m.ToolsId.NO_TOOLS_ID,t}(e),r=await(0,p.getAppProgrammingLanguage)(e),d=await(0,p.getAppType)(e,e),y={};return y[m.CommonProperties.TemplateType]=t,y[m.CommonProperties.DeployTargetType]=n,y[m.CommonProperties.ODataSourceType]=a,y[m.CommonProperties.AppToolsId]=o.toolsId,y[m.CommonProperties.AppProgrammingLanguage]=r,y[m.CommonProperties.TemplateId]=o.id,y[m.CommonProperties.TemplateVersion]=o.version,y[m.CommonProperties.ApplicationType]=d,y}(e.appPath)),{...t,...n}},t.getCommonProperties=f,t.spawnCommand=h},39493:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initTelemetrySettings=t.getTelemetrySetting=t.setEnableTelemetry=void 0;const o=n(83380),r=n(43724),i=n(24275),s=n(20034),l=n(43895),p=a(n(22037)),c=a(n(71017)),u=a(n(57147)),m=n(77471),d={win32:"\\AppData\\Roaming\\Code\\User\\settings.json",darwin:"/Library/Application Support/Code/User/settings.json",linux:"/.config/Code/User/settings.json",theia:"/.theia/settings.json"},y=["sap.ux.annotation.lsp.enableTelemetry","sap.ux.applicationModeler.enableTelemetry","sap.ux.help.enableTelemetry","sap.ux.serviceModeler.enableTelemetry"];t.setEnableTelemetry=async e=>{try{const t=await(0,s.getService)({entityName:"telemetrySetting"}),n=new s.TelemetrySetting({enableTelemetry:e});await t.write(n),i.TelemetrySystem.telemetryEnabled=e}catch(e){console.error(`Telemetry settings could not be written. Error : ${e.message}`)}const t=await(0,m.getCommonProperties)();(0,o.reportEnableTelemetryOnOff)(e,t)};t.getTelemetrySetting=async()=>{let e;try{const t=await(0,s.getService)({entityName:"telemetrySetting"});e=await t.read(new s.TelemetrySettingKey)}catch{}return e};const g=async()=>{const e=await(0,s.getService)({entityName:"telemetrySetting"});let n;try{n=await e.read(new s.TelemetrySettingKey)}catch{}if(n)i.TelemetrySystem.telemetryEnabled=n.enableTelemetry;else{const e=(e=>{const t=process.platform;let n=e[t];if((0,l.isAppStudio)()&&(n=e.theia),!n)return console.error("no path for current OS is provided - ",t),null;const a=p.default.homedir();return c.default.join(a,n)})(d);if(e){let n;try{n=await u.default.promises.readFile(e,"utf-8");const a=JSON.parse(n),o=y.map((e=>a[e]??!0)).reduce(((e,t)=>e&&t));(0,t.setEnableTelemetry)(o)}catch{(0,t.setEnableTelemetry)(!0)}}else(0,t.setEnableTelemetry)(!0)}"extension"===i.TelemetrySystem.WORKSTREAM&&(0,s.getFilesystemWatcherFor)(s.Entity.TelemetrySetting,(async()=>{const t=await e.read(new s.TelemetrySettingKey);i.TelemetrySystem.telemetryEnabled=t.enableTelemetry}))},f=async e=>{var t;i.TelemetrySystem.WORKSTREAM=(t=e.modulePackageJson).contributes||t.activationEvents||t.name.match(/sap-ux-.*-extension/g)?"extension":"core",i.TelemetrySystem.manifest=e.modulePackageJson,await(async()=>{if((0,r.debug)("start initTelemetrySettings"),!i.TelemetrySystem.WORKSTREAM)throw new Error("Workstream is undefined");(0,r.debug)(`workstream: ${i.TelemetrySystem.WORKSTREAM}`),i.TelemetrySystem.telemetryEnabled=!0,await g()})()};t.initTelemetrySettings=async e=>{try{await f(e)}catch(e){(0,o.reportRuntimeError)(e)}}},11767:(e,t)=>{"use strict";var n,a,o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.CommonProperties=t.DeployTarget=t.ODataSource=t.ToolsId=void 0,function(e){e.UNKNOWN="UNKNOWN",e.NO_TOOLS_ID="NO_TOOLS_ID"}(n||(t.ToolsId=n={})),function(e){e.CAPJava="CAPJava",e.CAPNode="CAPNode",e.ABAP="ABAP",e.UNKNOWN="UNKNOWN"}(a||(t.ODataSource=a={})),function(e){e.CF="CF",e.ABAP="ABAP",e.UNKNOWN_DEPLOY_CONFIG="UNKNOWN_DEPLOY_CONFIG",e.NO_DEPLOY_CONFIG="NO_DEPLOY_CONFIG"}(o||(t.DeployTarget=o={})),function(e){e.DevSpace="cmn.devspace",e.AppStudio="cmn.appstudio",e.AppStudioBackwardCompatible="appstudio",e.InternlVsExternal="cmn.internalFeatures",e.InternlVsExternalBackwardCompatible="internalVsExternal",e.TemplateType="cmn.template",e.DeployTargetType="cmn.deployTarget",e.ODataSourceType="cmn.odataSource",e.AppToolsId="cmn.toolsId",e.NodeVersion="cmn.nodeVersion",e.AppProgrammingLanguage="cmn.appLanguage",e.TemplateId="cmn.templateId",e.TemplateVersion="cmn.templateVersion",e.ApplicationType="cmn.applicationType"}(r||(t.CommonProperties=r={}))},43724:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.debug=void 0;const o=a(n(57147)),r=a(n(22037)),i=a(n(71017)),s=r.default.homedir(),l=i.default.join(s,"theiadebug.txt");t.debug=(e,t=!1)=>{t&&o.default.appendFileSync(l,`${e}\n`,"utf8")}},12319:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localDatetimeToUTC=void 0;t.localDatetimeToUTC=()=>{const e=(new Date).getTime();return new Date(e).toISOString()}},10398:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParamsData=t.paramsProcessing=t.getValue=t.wrongPathErr=t.ParamRecordConfig=t.ParamRecordConfigField=void 0;t.ParamRecordConfigField=class ParamRecordConfigField{constructor(e){this.path=e}};t.ParamRecordConfig=class ParamRecordConfig{constructor(e,t,n){this.key=e,this.value=t,this.paramIndex=n}};t.wrongPathErr=(e,t)=>new Error(`Wrong path for '${e}' field is specified in instructions with index - ${t}`);t.getValue=(e,n,a,o)=>{const r=n.split("/");let i=e,s=0;for(;s<r.length;){if(i=i[r[s]],void 0===i)throw(0,t.wrongPathErr)(a,o);s++}return i};t.paramsProcessing=(e,n)=>{const a={},o={};let r=null;void 0!==n.paramIndex&&(r=e[n.paramIndex]);const i=n.key?n.key:"data";let s="";return s="string"==typeof n.value?n.value:void 0!==n.value&&void 0!==n.paramIndex?(0,t.getValue)(r,n.value.path,"val",n.paramIndex):r,isNaN(s)?a[i]=s:o[i]=s,[a,o]};t.getParamsData=(e,n)=>{let a,o,r={},i={};if(Array.isArray(n))for(const s of n)[a,o]=(0,t.paramsProcessing)(e,s),r={...r,...a},i={...i,...o};else[r,i]=(0,t.paramsProcessing)(e,n);return[r,i]}},83380:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.reportEnableTelemetryOnOff=t.reportRuntimeError=void 0;const i=n(83064),s=r(n(4683)),l=r(n(5401)),p=n(3782);let c;"true"!==process.env.SAP_UX_FIORI_TOOLS_DISABLE_TELEMETRY?.trim()&&(c=new s.TelemetryClient(l.azureInstrumentationKey),(0,p.configAzureTelemetryClient)(c));t.reportRuntimeError=e=>{const t={message:e.message};if(e.stack){const n=(e=>{const t=[/sap-ux.+/gi,/[a-zA-Z-]+\/ide-extension\/.+/gi,/(\/telemetry\/.+)/gi],n=[],a=e.split("\n").filter((e=>!!e.match(/^\s*at .*(\S+:\d+|\(native\))/m)));return a.length?(a.forEach((e=>{let a=e.replace(/^\s+/,"");const o=e.match(/ (\((.+):(\d+):(\d+)\)$)/);if(!o)return;let r=null;const i=o[2].replace(/\\/g,"/");for(const e of t){const t=i.match(e);if(t){r=t[0];break}}if(!r)return;a=a.replace(o[0],"");const s=`${a.split(/\s+/).slice(1).join("")} at (${r}:${o[3]}:${o[4]});`;n.push(s)})),n):n})(e.stack);n.length&&(t.stack=n.join(" \n"))}const n={name:i.EventName.TELEMETRY_SETTINGS_INIT_FAILED,properties:t,measurements:{}};"true"!==process.env.SAP_UX_FIORI_TOOLS_DISABLE_TELEMETRY&&c.trackEvent(n)};t.reportEnableTelemetryOnOff=(e,t)=>{const n={name:i.EventName.DISABLE_TELEMETRY,properties:{disableTelemetry:`${!e}`,...t},measurements:{}};"true"!==process.env.SAP_UX_FIORI_TOOLS_DISABLE_TELEMETRY&&c.trackEvent(n)}},3782:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configAzureTelemetryClient=void 0,t.configAzureTelemetryClient=function(e){e.channel.setUseDiskRetryCaching(!0),e.addTelemetryProcessor((e=>(e.tags["ai.location.ip"]="0.0.0.0",e.tags["ai.cloud.roleInstance"]="masked",e.tags["ai.cloud.role"]="masked",e.tags["ai.device.type"]="masked",!0)))}},43130:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandRunner=void 0;const a=n(32081);t.CommandRunner=class CommandRunner{run(e,t=[]){return new Promise(((n,o)=>{const r=[],i=(0,a.spawn)(e,t,{});let s;i.stdout.setEncoding("utf8"),i.stdout.on("data",(e=>{s=e.toString()})),i.stderr.on("data",(e=>{r.push(e.toString())})),i.on("error",(e=>{o(`Command failed with error: ${e.message}`)})),i.on("close",(a=>{0!==a&&o(`Command failed, \`${e} ${t.join(" ")}\`, ${r.join(", ")}`),n(s)}))}))}}},59390:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UI5Info=t.minUI5VersionForLocalDev=t.FioriElementsVersion=t.ThemeIds=t.getSpecTagVersion=t.getLatestSapui5Version=t.parseUI5VersionsOverview=t.getUI5VersionsEnhanced=t.getSapSystemUI5Version=t.parseUI5Versions=t.uI5VersionsWithCodeAssist=t.getManifestVersion=t.getDefaultTheme=t.getUi5Themes=t.retrieveUI5Versions=t.MIN_UI5_VERSION_FPM_TEMPLATE=t.MIN_UI5_VERSION_OVERVIEW_V4_TEMPLATE=t.MIN_UI5_VERSION_WORKLIST_V4_TEMPLATE=t.MIN_UI5_VERSION_FORM_ENTRY_TEMPLATE=t.MIN_UI5_VERSION_ALP_V4_TEMPLATE=t.MIN_UI5_VERSION=t.MIN_UI5_VERSION_V4_TEMPLATE=t.CommandRunner=void 0;var a=n(43130);Object.defineProperty(t,"CommandRunner",{enumerable:!0,get:function(){return a.CommandRunner}});var o=n(57957);Object.defineProperty(t,"MIN_UI5_VERSION_V4_TEMPLATE",{enumerable:!0,get:function(){return o.MIN_UI5_VERSION_V4_TEMPLATE}}),Object.defineProperty(t,"MIN_UI5_VERSION",{enumerable:!0,get:function(){return o.MIN_UI5_VERSION}}),Object.defineProperty(t,"MIN_UI5_VERSION_ALP_V4_TEMPLATE",{enumerable:!0,get:function(){return o.MIN_UI5_VERSION_ALP_V4_TEMPLATE}}),Object.defineProperty(t,"MIN_UI5_VERSION_FORM_ENTRY_TEMPLATE",{enumerable:!0,get:function(){return o.MIN_UI5_VERSION_FORM_ENTRY_TEMPLATE}}),Object.defineProperty(t,"MIN_UI5_VERSION_WORKLIST_V4_TEMPLATE",{enumerable:!0,get:function(){return o.MIN_UI5_VERSION_WORKLIST_V4_TEMPLATE}}),Object.defineProperty(t,"MIN_UI5_VERSION_OVERVIEW_V4_TEMPLATE",{enumerable:!0,get:function(){return o.MIN_UI5_VERSION_OVERVIEW_V4_TEMPLATE}}),Object.defineProperty(t,"MIN_UI5_VERSION_FPM_TEMPLATE",{enumerable:!0,get:function(){return o.MIN_UI5_VERSION_FPM_TEMPLATE}}),Object.defineProperty(t,"retrieveUI5Versions",{enumerable:!0,get:function(){return o.retrieveUI5Versions}}),Object.defineProperty(t,"getUi5Themes",{enumerable:!0,get:function(){return o.getUi5Themes}}),Object.defineProperty(t,"getDefaultTheme",{enumerable:!0,get:function(){return o.getDefaultTheme}}),Object.defineProperty(t,"getManifestVersion",{enumerable:!0,get:function(){return o.getManifestVersion}}),Object.defineProperty(t,"uI5VersionsWithCodeAssist",{enumerable:!0,get:function(){return o.uI5VersionsWithCodeAssist}}),Object.defineProperty(t,"parseUI5Versions",{enumerable:!0,get:function(){return o.parseUI5Versions}}),Object.defineProperty(t,"getSapSystemUI5Version",{enumerable:!0,get:function(){return o.getSapSystemUI5Version}}),Object.defineProperty(t,"getUI5VersionsEnhanced",{enumerable:!0,get:function(){return o.getUI5VersionsEnhanced}}),Object.defineProperty(t,"parseUI5VersionsOverview",{enumerable:!0,get:function(){return o.parseUI5VersionsOverview}}),Object.defineProperty(t,"getLatestSapui5Version",{enumerable:!0,get:function(){return o.getLatestSapui5Version}}),Object.defineProperty(t,"getSpecTagVersion",{enumerable:!0,get:function(){return o.getSpecTagVersion}}),Object.defineProperty(t,"ThemeIds",{enumerable:!0,get:function(){return o.ThemeIds}});var r=n(9336);Object.defineProperty(t,"FioriElementsVersion",{enumerable:!0,get:function(){return r.FioriElementsVersion}}),Object.defineProperty(t,"minUI5VersionForLocalDev",{enumerable:!0,get:function(){return r.minUI5VersionForLocalDev}}),Object.defineProperty(t,"UI5Info",{enumerable:!0,get:function(){return r.UI5Info}})},9336:(e,t)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.inMaintenance=t.minUI5VersionForLocalDev=t.FioriElementsVersion=t.UI5Info=void 0,function(e){e.OfficialUrl="https://ui5.sap.com",e.SnapshotUrl="https://sapui5preview-sapui5.dispatcher.int.sap.eu2.hana.ondemand.com",e.NeoAppFile="neo-app.json",e.VersionsFile="version.json?sap-ui-config-patches=true&sap-ui-config-showall=true",e.DefaultVersion="Latest",e.LatestVersionString="Latest",e.VersionsOverview="versionoverview.json",e.VersionExternalFile="version.json"}(n||(t.UI5Info=n={})),function(e){e.v2="v2",e.v4="v4"}(a||(t.FioriElementsVersion=a={})),t.minUI5VersionForLocalDev="1.79.0",t.inMaintenance="Maintenance"},57957:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSpecTagVersion=t.getLatestSapui5Version=t.getSapSystemUI5Version=t.uI5VersionsWithCodeAssist=t.getDefaultTheme=t.getUi5Themes=t.getUI5VersionsEnhanced=t.retrieveUI5Versions=t.retrieveUI5VersionsCache=t.parseUI5VersionsOverview=t.parseUI5Versions=t.requestUI5Versions=t.getManifestVersion=t.ui5VersionsCache=t.UI5_VERSIONS_TYPE=t.ThemeIds=t.MIN_UI5_VERSION_FPM_TEMPLATE=t.MIN_UI5_VERSION_OVERVIEW_V4_TEMPLATE=t.MIN_UI5_VERSION_FORM_ENTRY_TEMPLATE=t.MIN_UI5_VERSION_WORKLIST_V4_TEMPLATE=t.MIN_UI5_VERSION_ALP_V4_TEMPLATE=t.MIN_UI5_VERSION=t.MIN_UI5_VERSION_V4_TEMPLATE=void 0;const o=a(n(67883)),r=n(76027),i=n(77090),s=n(9336),l=n(43130),p=a(n(28887)),c=a(n(95687));t.MIN_UI5_VERSION_V4_TEMPLATE="1.84.0",t.MIN_UI5_VERSION="1.65.0",t.MIN_UI5_VERSION_ALP_V4_TEMPLATE="1.90.0",t.MIN_UI5_VERSION_WORKLIST_V4_TEMPLATE="1.99.0",t.MIN_UI5_VERSION_FORM_ENTRY_TEMPLATE="1.90.0",t.MIN_UI5_VERSION_OVERVIEW_V4_TEMPLATE="1.96.8",t.MIN_UI5_VERSION_FPM_TEMPLATE="1.94.0";const u="1.76.0",m="1.102.0",d=["Latest","1.104.0","1.103.0","1.102.0","1.101.0","1.100.0","1.99.0","1.98.0","1.97.0","1.96.0","1.95.0","1.94.0","1.93.0","1.92.0","1.91.0","1.90.0","1.89.0","1.88.0","1.87.0","1.86.0","1.85.0","1.84.0","1.82.0","1.81.0","1.80.0","1.79.0","1.78.0","1.77.0","1.76.0","1.75.0","1.74.0","1.73.0","1.72.0","1.71.0","1.70.0","1.69.0","1.68.0","1.67.0","1.66.0",t.MIN_UI5_VERSION],y=[{version:"1.104.*",support:"Maintenance"},{version:"1.103.*",support:"Out of maintenance"},{version:"1.102.*",support:"Maintenance"},{version:"1.101.*",support:"Out of maintenance"},{version:"1.100.*",support:"Out of maintenance"},{version:"1.99.*",support:"Out of maintenance"},{version:"1.98.*",support:"Out of maintenance"},{version:"1.97.*",support:"Out of maintenance"},{version:"1.96.*",support:"Maintenance"},{version:"1.95.*",support:"Out of maintenance"},{version:"1.94.*",support:"Out of maintenance"},{version:"1.93.*",support:"Out of maintenance"},{version:"1.92.*",support:"Out of maintenance"},{version:"1.91.*",support:"Out of maintenance"},{version:"1.90.*",support:"Out of maintenance"},{version:"1.89.*",support:"Out of maintenance"},{version:"1.88.*",support:"Out of maintenance"},{version:"1.87.*",support:"Out of maintenance"},{version:"1.86.*",support:"Out of maintenance"},{version:"1.85.*",support:"Out of maintenance"},{version:"1.84.*",support:"Maintenance"},{version:"1.83.*",support:"Skipped"},{version:"1.82.*",support:"Out of maintenance"},{version:"1.81.*",support:"Out of maintenance"},{version:"1.80.*",support:"Out of maintenance"},{version:"1.79.*",support:"Out of maintenance"},{version:"1.78.*",support:"Out of maintenance"},{version:"1.77.*",support:"Out of maintenance"},{version:"1.76.*",support:"Out of maintenance"},{version:"1.75.*",support:"Out of maintenance"},{version:"1.74.*",support:"Out of maintenance"},{version:"1.73.*",support:"Out of maintenance"},{version:"1.72.*",support:"Out of maintenance"},{version:"1.71.*",support:"Maintenance"},{version:"1.70.*",support:"Out of maintenance"},{version:"1.69.*",support:"Out of maintenance"},{version:"1.68.*",support:"Out of maintenance"},{version:"1.67.*",support:"Out of maintenance"},{version:"1.66.*",support:"Out of maintenance"},{version:"1.65.*",support:"Out of maintenance"},{version:"1.64.*",support:"Out of maintenance"},{version:"1.63.*",support:"Out of maintenance"},{version:"1.62.*",support:"Out of maintenance"},{version:"1.61.*",support:"Out of maintenance"},{version:"1.60.*",support:"Out of maintenance"},{version:"1.58.*",support:"Out of maintenance"},{version:"1.56.*",support:"Out of maintenance"},{version:"1.54.*",support:"Out of maintenance"},{version:"1.52.*",support:"Out of maintenance"},{version:"1.50.*",support:"Out of maintenance"},{version:"1.48.*",support:"Out of maintenance"},{version:"1.46.*",support:"Out of maintenance"},{version:"1.44.*",support:"Out of maintenance"},{version:"1.42.*",support:"Out of maintenance"},{version:"1.40.*",support:"Out of maintenance"},{version:"1.38.*",support:"Maintenance"},{version:"1.36.*",support:"Out of maintenance"},{version:"1.34.*",support:"Out of maintenance"},{version:"1.32.*",support:"Out of maintenance"},{version:"1.30.*",support:"Out of maintenance"},{version:"1.28.*",support:"Out of maintenance"},{version:"1.26.*",support:"Out of maintenance"},{version:"1.24.*",support:"Out of maintenance"},{version:"1.22.*",support:"Out of maintenance"},{version:"*",support:"Out of maintenance"}];var g;!function(e){e.SAP_BELIZE="sap_belize",e.SAP_FIORI_3="sap_fiori_3",e.SAP_FIORI_3_DARK="sap_fiori_3_dark",e.SAP_HORIZON="sap_horizon",e.SAP_HORIZON_DARK="sap_horizon_dark",e.SAP_HORIZON_CONTRAST="sap_horizon_hcw",e.SAP_HORIZON_CONTRAST_DARK="sap_horizon_hcb"}(g||(t.ThemeIds=g={}));const f=[{themeid:"sap_belize",label:"Belize"},{themeid:"sap_fiori_3",label:"Quartz Light"},{themeid:"sap_fiori_3_dark",label:"Quartz Dark"},{themeid:"sap_horizon",label:"Morning Horizon"},{themeid:"sap_horizon_dark",label:"Evening Horizon"}],h="1.32.0",T={"1.30":"1.1.0",1.32:"1.2.0",1.34:"1.3.0",1.38:"1.4.0",1.42:"1.5.0",1.46:"1.6.0",1.48:"1.7.0","1.50":"1.8.0",1.52:"1.9.0",1.54:"1.10.0",1.56:"1.11.0",1.58:"1.12.0",1.61:"1.13.0",1.62:"1.14.0",1.66:"1.15.0","1.70":"1.16.0",1.71:"1.17.0",1.74:"1.18.0",1.75:"1.19.0",1.76:"1.20.0",1.77:"1.21.0",1.78:"1.22.0",1.79:"1.23.0","1.80":"1.24.0",1.81:"1.25.0",1.82:"1.26.0",1.83:"1.27.0",1.84:"1.28.0",1.85:"1.29.0",1.86:"1.30.0",1.87:"1.31.0",1.88:h},P={warning:e=>{console.warn(e)},error:e=>{console.error(e)}},E=new Set(["snapshot","snapshot-untested","Latest"]);let v;var b;function _(e,t){e=e.replace("snapshot-",""),t=t.replace("snapshot-","");const n=["Latest","snapshot","untested"];return n.indexOf(e)>-1&&n.indexOf(t)>-1?e.localeCompare(t):n.indexOf(e)>-1||n.indexOf(t)>-1?(0,o.default)(e,t):(0,o.default)(t+".999",e+".999")}function A(e,t){return e.filter((e=>!!E.has(e)||(e.startsWith("snapshot-")&&(e=e.replace("snapshot-","")),(0,o.default)(e,t)>=0)))}async function C(e,t="/"+("https://ui5.sap.com"===e?"version.json?sap-ui-config-patches=true&sap-ui-config-showall=true":"neo-app.json")){const{system:n}=(0,i.newSapSystemForServiceUrl)(e);n.config.service=t;return new i.ODataClient({system:n.config,autoAddTrailingSlash:!1,timeout:4e3}).get()}async function N(e){const t=await C(e);let n;return Array.isArray(t.routes)?n=t.routes.map((e=>("/"===e.path&&(v=e.target.version),"/"===e.path?"Latest":e.target.version))):(v=t.latest.version,n=[].concat(...Object.keys(t).map((e=>{if("latest"!==e)return t[e].patches.map((e=>e))}))).filter((e=>void 0!==e))),n}async function I(){let e=[],t=[];try{const e=await C("https://ui5.sap.com","/versionoverview.json");t=JSON.parse(JSON.stringify(e)).versions}catch(e){console.warn(`Request to 'https://ui5.sap.com' failed. Error was: '${e.message}'. Fallback to default UI5 versions`),t=y}return e=t.map((e=>{const t=(0,r.coerce)(e.version)?.version;if(void 0!==t)return{version:t,support:e.support}})),e}!function(e){e.official="officialVersions",e.snapshot="snapshotsVersions",e.overview="overview"}(b||(t.UI5_VERSIONS_TYPE=b={})),t.ui5VersionsCache={officialVersions:[],snapshotsVersions:[],overview:[]},t.getManifestVersion=function(e){const t=e.includes("snapshot");e=(e=e.replace("snapshot-","")).replace("snapshot","");const n=Object.keys(T).sort(o.default);let a;if(e&&"Latest"!==e)for(const[,t]of n.entries())e>=t&&(a=t);return a||(a=t?h:void 0!==v?v.substring(0,4):h),T[a]||h},t.requestUI5Versions=C,t.parseUI5Versions=N,t.parseUI5VersionsOverview=I;async function S(e,n=P,a){let i=[],s=[];try{i=e?.onlyNpmVersion?await async function(e,n){const a="v2"===e?u:t.MIN_UI5_VERSION_V4_TEMPLATE;let i=[];try{const e=new l.CommandRunner,t="win32"===process.platform?"npm.cmd":"npm";i=(await e.run(t,["show","@sapui5/distribution-metadata","versions","--no-color"])).replace(/[\r?\n|\r[\] ']/g,"").trim().split(",")}catch(e){i=d.slice()}const s=A(O(i),a);let p=s.length?s.filter((e=>e&&/^\d+(\.\d+)*$/.test(e))):[a];if(n&&n.length){const e=p.findIndex((e=>e===n));p=-1===e?(0,o.default)(n,p.slice(-1)[0])>0||"Latest"===n||!(0,r.valid)(n)?p.slice(0):p.slice(-1):p.slice(e)}return p}(e.fioriElementsVersion||"v2",e.ui5SelectedVersion):await(0,t.retrieveUI5VersionsCache)("officialVersions",e?.useCache)}catch(e){n.warning(`Request to 'https://ui5.sap.com' failed. Error was: '${e.message}'. Fallback to default UI5 versions`),i=d.slice()}if(e?.includeSnapshots)try{s=await(0,t.retrieveUI5VersionsCache)("snapshotsVersions",e?.useCache)}catch(e){n.error(`Request to 'https://sapui5preview-sapui5.dispatcher.int.sap.eu2.hana.ondemand.com' failed.  Error was: '${e.message}'`)}let p=[...i,...s].sort(_);return p=e?.minSupportedUI5Version?A(p,e?.minSupportedUI5Version):e?.fioriElementsVersion&&"v4"===e.fioriElementsVersion?A(p,t.MIN_UI5_VERSION_V4_TEMPLATE):A(p,t.MIN_UI5_VERSION),e?.onlyVersionNumbers&&(p=p.filter((e=>e&&/^\d+(\.\d+)*$/.test(e)))),a&&p[0].includes("Latest")&&(p[0]=v),!0===e?.removeDuplicateVersions?[...new Set(p)]:p}function x(e){return"Latest"===e||"untested"===e||"snapshot"===e}function O(e){return e.filter(Boolean).sort(((e,t)=>{const n=e.split("."),a=t.split("."),o=Math.max(n.length,a.length);for(let e=0;e<o;e++){const t=+n[e]||0,o=+a[e]||0;if(t!==o)return t>o?1:-1}return 0})).reverse()}t.retrieveUI5VersionsCache=async(e,n=!1)=>{if(!n)switch(e){case"officialVersions":return N("https://ui5.sap.com");case"snapshotsVersions":return N("https://sapui5preview-sapui5.dispatcher.int.sap.eu2.hana.ondemand.com");case"overview":return I()}if(0===t.ui5VersionsCache[e].length)switch(e){case"officialVersions":t.ui5VersionsCache[e]=await N("https://ui5.sap.com");break;case"snapshotsVersions":t.ui5VersionsCache[e]=await N("https://sapui5preview-sapui5.dispatcher.int.sap.eu2.hana.ondemand.com");break;case"overview":t.ui5VersionsCache[e]=await I()}return t.ui5VersionsCache[e]},t.retrieveUI5Versions=S,t.getUI5VersionsEnhanced=async function(e){let n;try{n=await S(e,void 0,!0)}catch(e){console.warn(`Request to 'https://ui5.sap.com' failed. Error was: '${e.message}'. Fallback to default UI5 versions`),n=d.slice()}const a=n[0];let o;return e?.includeSnapshots||(n=O(n)),!0===e?.groupUI5Versions&&(o=await(0,t.retrieveUI5VersionsCache)("overview",e?.useCache)),n.map((t=>{const n={name:t,value:t,version:{semantic:t,default:a===t}};return!0===e?.groupUI5Versions&&void 0!==o&&(n.version.maintained=o.some((e=>{if(void 0!==e)return`${(0,r.major)(e.version)}.${(0,r.minor)(e.version)}`==`${(0,r.major)(t)}.${(0,r.minor)(t)}`&&e.support===s.inMaintenance}))),n}))},t.getUi5Themes=function(e="Latest"){let t=e.replace("snapshot-","");t=function(e){e.split(".").length<3&&!x(e)&&(e=e.concat(".0"));return e}(t);const n=[];for(const e of f)switch(e.themeid){case"sap_belize":case"sap_fiori_3":n.push(e);break;case"sap_fiori_3_dark":(x(t)||(0,o.default)(t,"1.72.0")>=0)&&n.push(e);break;case"sap_horizon":case"sap_horizon_dark":case"sap_horizon_hcw":case"sap_horizon_hcb":(x(t)||(0,o.default)(t,m)>=0)&&n.push(e)}return n},t.getDefaultTheme=function(e){return e&&(0,r.coerce)(e)&&(0,r.lt)(e,m)?"sap_fiori_3":"sap_horizon"},t.uI5VersionsWithCodeAssist=function(e,t){return A(e,"1.76.0").includes(t)||"Latest"===t},t.getSapSystemUI5Version=async function(e,t=!1){if(!e)return;const n=new URL("/sap/public/bc/ui5_ui5/bootstrap_info.json",e).toString();let a="";try{const e=await p.default.get(n,{httpsAgent:new c.default.Agent({rejectUnauthorized:t})});if(200===e.status){a=e.data.Version}}catch{}return a},t.getLatestSapui5Version=async function(){let e;try{const t="https://ui5.sap.com/version.json",n=await p.default.get(t);if(200===n.status){e=n.data?.latest?.version}}catch{e=void 0}return e},t.getSpecTagVersion=function(e){if(e){if((0,r.valid)(e))return`UI5-${(0,r.major)(e)}.${(0,r.minor)(e)}`;if(e.includes("snapshot")&&e.includes(".")){return`UI5-${e.split("snapshot-")[1]}`}}return"latest"}},2026:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addI18nEntriesForCdsFile=void 0;const a=n(71017),o=n(57147),r=n(3524),i=n(2868),s=n(76221),l=n(98462),p=n(20854);async function c(e,t,n){const{fallbackLanguage:a}=(0,s.getI18nConfiguration)(e);try{const e=(0,s.jsonPathFormatter)(t),r=await o.promises.readFile(e,{encoding:"utf8"}),i=(0,l.addJsonTexts)(r,a,n);await o.promises.writeFile(e,i,{encoding:"utf8"})}catch(e){if("ENOENT"===e?.code)return!1;throw e}return!0}async function u(e,t,n){const a=(0,s.propertiesPathFormatter)(t,e);let i=n.map((e=>(0,r.printPropertiesFileI18nEntry)(e.key,e.value,e.annotation))).join("");try{const e=await o.promises.readFile(a,{encoding:"utf8"}),t=e.split(/\r\n|\n/);t.length>0&&t[t.length-1].trim()&&(i=`\n${i}`),await o.promises.writeFile(a,e.concat(i),{encoding:"utf8"})}catch(r){if("ENOENT"===r?.code){return await m(e,t,n)||await o.promises.writeFile(a,i,{encoding:"utf8"}),!0}throw r}return!0}async function m(e,t,n){const{defaultLanguage:a}=(0,s.getI18nConfiguration)(e);try{const e=(0,s.csvPathFormatter)(t),r=await o.promises.readFile(e,{encoding:"utf8"}),i=(0,p.addCsvTexts)(r,a,n);await o.promises.writeFile(e,i,{encoding:"utf8"})}catch(e){if("ENOENT"===e?.code)return!1;throw e}return!0}t.addI18nEntriesForCdsFile=async function(e,t,n,r){const{folders:l,baseFileName:p}=(0,s.getI18nConfiguration)(e);let d=(0,i.resolveI18nFolderForFile)(t,e,(0,a.join)(t,n));if(!d){const e=l[0];d=(0,a.join)(t,e),await o.promises.mkdir(d)}const y=[c,u,m],g=(0,a.join)(d,p);for(const t of y){if(await t(e,g,r))break}}},20854:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTextNode=t.addCsvTexts=t.loadCsvTexts=void 0;const a=n(44594),o=n(3524),r=n(46293),i=n(76221);function s(e){if(e)return{value:e.value,range:e.range}}t.loadCsvTexts=function(e,t=""){const n={},a=(0,r.parseCsv)(e);for(let e=1;e<a.header.fields.length;e++){const o=[];n[a.header.fields[e].value]=o;for(let n=0;n<a.rows.length;n++){const r=a.rows[n];if(r){const n=s(r.fields[0]),a=s(r.fields[e]);n&&a&&o.push({filePath:t,key:n,value:a})}}}return n},t.addCsvTexts=function(e,t,n){const s=(0,r.parseCsv)(e),l=(0,i.discoverLineEnding)(e),p=s.header.fields;if(-1!==p.findIndex((e=>e.value===t))){let a="";for(const e of n){a+=`${e.key};`;for(let n=1;n<p.length;n++){p[n].value===t&&(a+=`${e.value}`),n+1!==p.length&&(a+=";")}a+=l}return e.endsWith(l)?e+a:e+l+a}if(0===p.length){let a=`key;${t}${l}`;for(const e of n)a+=`${e.key};${e.value}${l}`;return e+a}{const r=a.TextDocument.create("","",0,e),i=[];i.push({newText:`;${t}`,range:o.Range.create(0,s.header.range.end.character,0,s.header.range.end.character)});for(const e of s.rows)i.push({newText:";",range:o.Range.create(e.range.end,e.range.end)});let c=`${l}`;for(const e of n){c+=`${e.key};`;for(let e=1;e<p.length;e++)c+=";";c+=`${e.value}${l}`}const u=s.rows.slice(-1)[0],m=u?u.range.end:o.Position.create(1,0);return i.push({newText:c,range:o.Range.create(m,m)}),a.TextDocument.applyEdits(r,i)}},t.createTextNode=function(e,t){return{value:e,range:t}}},46293:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tokenize=t.parseCsv=void 0;const a=n(3524),o=/[,;\t]/;function r(e){const t=[];let n=0,a="",r="default",i=0,s="text";for(;n<e.length;){const l=e[n];"default"===r?o.test(l)||"\n"===l?(t.push({type:s,value:a,start:i,end:n}),"\n"===l?t.push({type:"eol",value:"\n",start:n,end:n+1}):o.test(l)&&t.push({type:"separator",value:l,start:n,end:n+1}),a="",i=n+1,s="text"):'"'===l?r="quoted":a+=l:"quoted"===r&&('"'===l?n+1<e.length&&'"'===e[n+1]?(a+='"',n++):(s="escaped-text",r="default"):a+=l),n++}return a&&t.push({type:"text",value:a,start:i,end:n}),t}t.parseCsv=function(e){const t=r(e),n=(0,a.getLineOffsets)(e),o=e.length;let i=0;const s=e=>e?t[i+e]:t[i],l=()=>t[i++],p=()=>i>=t.length;function c(){const e=l();return{quoted:"escaped-text"===e.type,value:e.value,range:a.Range.create((0,a.positionAt)(n,e.start,o),(0,a.positionAt)(n,e.end,o))}}function u(){const e={fields:[],range:a.Range.create(0,0,0,0)};for(;!p()&&"eol"!==s()?.type;){"escaped-text"!==s().type&&"text"!==s().type||e.fields.push(c());const t=s();t&&"eol"!==t.type&&("separator"===t.type&&void 0===s(1)&&e.fields.push({quoted:!1,value:"",range:a.Range.create((0,a.positionAt)(n,t.end,o),(0,a.positionAt)(n,t.end,o))}),l())}if(e.fields.length){const t=e.fields[0].range.start,n=e.fields[e.fields.length-1].range.end;e.range=a.Range.create(t.line,t.character,n.line,n.character)}return e}return function(){const e={header:u(),rows:[]};for(;!p();)"escaped-text"!==s()?.type&&"text"!==s()?.type||e.rows.push(u()),l();return e}()},t.tokenize=r},54145:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addI18nEntriesForCdsFile=t.getCapI18nBundle=t.getI18nFolderNames=t.loadJsonTexts=t.addJsonTexts=t.loadCsvTexts=t.addCsvTexts=void 0;var a=n(20854);Object.defineProperty(t,"addCsvTexts",{enumerable:!0,get:function(){return a.addCsvTexts}}),Object.defineProperty(t,"loadCsvTexts",{enumerable:!0,get:function(){return a.loadCsvTexts}});var o=n(98462);Object.defineProperty(t,"addJsonTexts",{enumerable:!0,get:function(){return o.addJsonTexts}}),Object.defineProperty(t,"loadJsonTexts",{enumerable:!0,get:function(){return o.loadJsonTexts}});var r=n(2868);Object.defineProperty(t,"getI18nFolderNames",{enumerable:!0,get:function(){return r.getI18nFolderNames}}),Object.defineProperty(t,"getCapI18nBundle",{enumerable:!0,get:function(){return r.getCapI18nBundle}});var i=n(2026);Object.defineProperty(t,"addI18nEntriesForCdsFile",{enumerable:!0,get:function(){return i.addI18nEntriesForCdsFile}})},98462:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTextNode=t.addJsonTexts=t.loadJsonTexts=void 0;const a=n(24529),o=n(44594),r=n(3524),i=n(76221);function s(e,t){return{[e]:t.reduce(((e,t)=>(e[t.key]=t.value,e)),{})}}function l(e,t){return{value:e,range:t}}function p(e,t,n){if(e)switch(typeof e.value){case"string":{const a=(0,r.positionAt)(t,e.offset+1,n),{value:o}=e;return l(o,r.Range.create(a,r.Position.create(a.line,a.character+o.length)))}case"number":{const a=(0,r.positionAt)(t,e.offset,n),o=e.value.toString();return l(o,r.Range.create(a,r.Position.create(a.line,a.character+o.length)))}case"boolean":{const a=(0,r.positionAt)(t,e.offset,n),o=e.value?"true":"";return l(o,r.Range.create(a,r.Position.create(a.line,a.character+o.length)))}default:{const a=(0,r.positionAt)(t,e.offset,n);return l("",r.Range.create(a,a))}}}t.loadJsonTexts=function(e,t=""){const n={},o=(0,a.parseTree)(e),i=(0,r.getLineOffsets)(e),s=e.length;if("object"===o?.type){const e=o.children??[];for(const a of e)if("property"===a.type){const e=[];n[(a.children??[])[0]?.value??""]=e;const o=(a.children??[])[1]?.children??[];for(const n of o)if("property"===n.type){const a=p((n.children??[])[0],i,s),o=p((n.children??[])[1],i,s);e.push({filePath:t,key:a,value:o})}}}return n},t.addJsonTexts=function(e,t,n){if(""===e){const e=s(t,n);return JSON.stringify(e,void 0,4)}const l=(0,a.parseTree)(e);if("object"===l?.type){const a=l.children??[],p=(0,i.discoverLineEnding)(e),c=(0,i.discoverIndent)(e),u=a.find((e=>(e.children??[])[0]?.value===t));if(!u){if(0===a.length){const e=s(t,n);return JSON.stringify(e,void 0,4)}{const l=o.TextDocument.create("","",0,e),[u]=a.slice(-1),m=l.positionAt(u.offset),d=s(t,n),y=JSON.stringify(d[t],void 0,c),g={newText:(0,i.applyIndent)(`"${t}": ${y},`,c,p)+p,range:r.Range.create(m.line,0,m.line,0)};return o.TextDocument.applyEdits(l,[g])}}{const a=(u.children??[])[1],l=a?.children??[];if(l.length){const t=o.TextDocument.create("","",0,e),a=t.positionAt(l[0].offset);let i="";for(let e=0;e<n.length;e++){const t=n[e];i+=`${c+c}"${t.key}": "${t.value}",${p}`}const s={newText:i,range:r.Range.create(a.line,0,a.line,0)};return o.TextDocument.applyEdits(t,[s])}if(a?.offset){const l=o.TextDocument.create("","",0,e),u=l.positionAt(a.offset),m=l.positionAt(a.offset+a.length),d=s(t,n),y=JSON.stringify(d[t],void 0,c),g={newText:(0,i.applyIndent)(`${y}`,c,p,!1),range:r.Range.create(u,m)};return o.TextDocument.applyEdits(l,[g])}}}return e},t.createTextNode=l},2868:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCapI18nBundle=t.resolveI18nFolderForFile=t.getI18nFolderNames=void 0;const a=n(71017),o=n(57147),r=n(3524),i=n(20854),s=n(98462),l=n(76221);t.getI18nFolderNames=function(e){const{folders:t}=(0,l.getI18nConfiguration)(e);return t};const p=a.sep+"node_modules";function c(e,t,n){const{folders:r}=(0,l.getI18nConfiguration)(t);return function t(n){for(const e of r){const t=(0,a.join)(n,e);if((0,o.existsSync)(t))return t}const i=(0,a.dirname)(n);if(i.includes(p)){if(i.endsWith(p))return}else if(s=e,!u(i).startsWith(u(s)))return;var s;return i&&i!==n?t(i):void 0}(n)}function u(e){return"win32"===process.platform?e.charAt(0).toLowerCase()+e.slice(1):e}async function m(e,t){try{return t(await o.promises.readFile(e,{encoding:"utf8"}),e)}catch(e){if("ENOENT"===e?.code)return;throw e}}t.resolveI18nFolderForFile=c,t.getCapI18nBundle=async function(e,t,n,o){const{defaultLanguage:p,fallbackLanguage:u,baseFileName:d}=(0,l.getI18nConfiguration)(t),y={},g=n.reduce(((n,o)=>{const r=c(e,t,o);if(r){const e=(0,a.join)(r,d);-1===n.indexOf(e)&&n.push(e)}return n}),[]),f=[{loader:s.loadJsonTexts,filePathFormatter:l.jsonPathFormatter},{loader:(e,t)=>({[u]:(0,r.loadPropertiesTexts)(e,t)}),filePathFormatter:l.propertiesPathFormatter},{loader:i.loadCsvTexts,filePathFormatter:l.csvPathFormatter}];for(const e of g){let n=!1,r=!1;for(const{loader:a,filePathFormatter:i}of f){const s=i(e,t);try{const e=await m(s,a);if(e){const t=e[u]??e[p];for(const e of t)y[e.key.value]?y[e.key.value].push(e):y[e.key.value]=[e];o.info(`Loaded i18n texts from ${s}`),n=!0;break}}catch(e){r=!0,o.error(`Failed to load ${s}. ${e?.message}`);break}}n||r||o.error(`No translation file found in ${(0,a.dirname)(e)}`)}return y}},76221:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.csvPathFormatter=t.propertiesPathFormatter=t.jsonPathFormatter=t.getI18nConfiguration=t.applyIndent=t.discoverIndent=t.discoverLineEnding=void 0;const n=/\r|\n|\r?\n/,a=/(?:\r|\n|\r?\n)([\t|\s]+)/;function o(e){const{default_language:t,fallback_bundle:n,file:a,folders:o}=e&&e.i18n||{};return{defaultLanguage:t??"en",fallbackLanguage:n??"",baseFileName:a??"i18n",folders:o??["_i18n","i18n"]}}t.discoverLineEnding=function(e){for(let t=0;t<e.length;t++){const n=e[t];if("\r"===n)return t+1<e.length&&"\n"===e[t+1]?"\r\n":"\r";if("\n"===n)return"\n"}return"\n"},t.discoverIndent=function(e){const t=a.exec(e);return t?t[1]:"    "},t.applyIndent=function(e,t,a,o=!0){const r=e.split(n);let i="";for(let e=0;e<r.length;e++){const n=r[e];i+=o||0!==e?t+n:n,e+1!==r.length&&(i+=a)}return i},t.getI18nConfiguration=o,t.jsonPathFormatter=function(e){return`${e}.json`},t.propertiesPathFormatter=function(e,t){const{fallbackLanguage:n}=o(t);return`${e}${""===n?"":`_${n}`}.properties`},t.csvPathFormatter=function(e){return`${e}.csv`}},74448:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(52066),t),o(n(54145),t)},5092:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toReferenceUri=t.toAbsoluteUri=t.isCapJavaProject=t.isCapNodeJsProject=t.isCapProject=t.CAP_DB_FOLDER=t.CAP_APPS_FOLDER=t.CAP_SERVICES_FOLDER=void 0;const a=n(71017),o=n(36036);t.CAP_SERVICES_FOLDER="srv",t.CAP_APPS_FOLDER="app",t.CAP_DB_FOLDER="db";async function r(e,t){return t||(t=await async function(e){let t;const n=(0,a.join)(e,"package.json");if(await(0,o.fileExists)(n))try{t=JSON.parse(await(0,o.readFile)(n))}catch(e){}return t}(e)),!(!t?.cds&&!t?.dependencies?.["@sap/cds"])}async function i(e){return(0,o.fileExists)((0,a.join)(e,t.CAP_SERVICES_FOLDER,"src","main","resources","application.yaml"))}t.isCapProject=async function(e,t){return await r(e,t)||await i(e)},t.isCapNodeJsProject=r,t.isCapJavaProject=i;t.toAbsoluteUri=(e,t)=>(0,a.join)(e.root,t);async function s(e,t){let n="";try{const r=(0,a.normalize)(e+"/"+t+"/package.json"),i=await(0,o.readFile)(r);if(i){n=JSON.parse(i).name}}catch(e){n=""}return n}t.toReferenceUri=async(e,n,o)=>{let r="";const i=o.lastIndexOf("node_modules");if(i>=0){const e=o.lastIndexOf(".");r=e>i+13?o.slice(i+13,e):o.slice(i+13)}else if(o.startsWith("../")||o.startsWith("..\\")){const t=await async function(e,t){const n=t.split(a.sep),o={packageName:"",packageFolder:t};for(let t=n.length-1;t>=0&&!o.packageName;t--){const r=n.slice(0,t).join(a.sep);o.packageName=await s(e,r),o.packageName&&(o.packageFolder=r)}return o}(e.root,o);t.packageName&&(r=t.packageName+o.slice(t.packageFolder.length))}if(!r){const i=(0,a.dirname)((0,t.toAbsoluteUri)(e,n));r=(0,a.relative)(i,(0,t.toAbsoluteUri)(e,o)),r.startsWith(".")||(r="./"+r)}const l=r.lastIndexOf(".")>0?r.slice(r.lastIndexOf(".")+1):"";return["CDS","JSON"].includes(l.toUpperCase())&&(r=r.slice(0,r.length-l.length-1)),r.split(a.sep).join("/")}},36036:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileExists=t.readFile=void 0;const a=n(57147);t.readFile=async function(e){const t=await a.promises.readFile(e);return Buffer.from(t).toString("utf8")},t.fileExists=async function(e){try{return await a.promises.access(e),!0}catch{return!1}}},86654:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCapCustomPaths=void 0;const o=a(n(85767));t.getCapCustomPaths=e=>{const t={},n=o.default.env.for("cds",e);try{n.folders&&(t.app=n.folders.app,t.db=n.folders.db,t.srv=n.folders.srv)}catch(e){}return t}},52066:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(5092),t),o(n(86654),t)},18517:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmlDomainAdapter=void 0;const a=n(10383),o=n(69311),r=n(40231),i=n(19332),s=n(41810),l=n(18775),p=n(46593),c=n(38230),u=n(99476);var m;!function(e){e[e.Error=1]="Error",e[e.Warning=2]="Warning",e[e.Information=3]="Information",e[e.Hint=4]="Hint"}(m||(m={}));const d=(e,t)=>{const n=(e||"").substring(0,t).split("\n");return{line:n.length,character:n[n.length-1].length}},y=e=>{switch(e){case"info":return m.Information;case"warning":return m.Warning;default:return m.Error}},g=(e,t,n,a)=>{let o=[];const s=(0,r.getSchemaValidators)(p.annotationFileSchema);try{o=(0,i.validate)({doc:t,validators:{attribute:[s.attribute],element:[s.element]}}).map((e=>((e,t)=>({message:t.msg,range:{start:d(e,t.position.startOffset),end:d(e,t.position.endOffset+1)},severity:y(t.severity)}))(n,e)))}catch(e){const t=`error in simple schema validations for "${a}": ${e}`;c.uxLogger.error(t)}return o};t.XmlDomainAdapter=class XmlDomainAdapter{parseEdmxFile(e,t,n){const{cst:r,lexErrors:i,parseErrors:s,tokenVector:p}=(0,o.parse)(t),c=(0,a.buildAst)(r,p);if(this.diagnosticsHandler){let a=[];n&&(a=g(0,c,t,e)),this.diagnosticsHandler(e,[...i.map((e=>({message:e.message,range:{start:{line:e.line,character:e.column},end:{line:e.line,character:e.column}},severity:m.Error}))),...s.map((e=>({message:e.message,range:{start:{line:e.token.startLine,character:e.token.startColumn},end:{line:e.token.endLine,character:e.token.endColumn}},severity:m.Error}))),...a])}return(0,l.transformAst)(c,e,n)}getFileSelectors(){return["**/*.xml"]}setDiagnosticsHandler(e){this.diagnosticsHandler=e}toServiceFile(e,t,n,a,o){return{uri:e,serviceName:o,content:{type:"annotation-file",uri:e,...this.parseEdmxFile(e,t,!n)}}}getManifestUris(e){return Object.keys(e.apps).map((t=>e.apps[t].manifest))}getODataVersionFromManifest(e,t){const n=JSON.parse(e)["sap.app"].dataSources[t];return n&&n.settings.odataVersion||"2.0"}serializeTarget(e,t){return(0,u.serializeTarget)(e,t)}serializeElement(e,t){return(0,u.serializeElement)(e,t)}serializeReference(e,t){return(0,u.serializeReference)(e,t)}serializeAttribute(e){return(0,u.serializeAttribute)(e)}serializePrimitiveValue(e,t){return t}interceptDiagnostics(e,t){let n=[],a=!1;const o=(t||[]).filter((e=>e.rule===s.NO_UNDEFINED_NAMESPACE_TYPE||e.rule===s.NO_UNUSED_NAMESPACE_TYPE));return o.length&&(n=o.map((t=>{if(t.rule===s.NO_UNDEFINED_NAMESPACE_TYPE){const n=t.data,a=e.range.start.character,o=this.serializeReference(n,a),r=e.contentRange.start;return{range:{start:r,end:r},newText:o}}if(t.rule===s.NO_UNUSED_NAMESPACE_TYPE){const n=t.data,a=e.references.filter((e=>e.name===n.namespace));if(a.length&&a[0].range)return{range:a[0].range,newText:""}}})),n=n.filter(((e,t,n)=>!!(t===n.findIndex((t=>JSON.stringify(t)===JSON.stringify(e))))||""===e.newText)),a=!0),{quickFixTextEdits:n,suppressDiagnostics:a}}getNewAnnotationFile(e,t,n){return(0,u.getNewAnnotationFile)(e,t,n)}isSplitSupported(){return!1}getRangeForDeletion(e,t,n,a,o){if(o||(o=e=>e),a>1&&("Collection"===t.name||"Record"===t.name)){let r,i=1;for(let o=n+1;o<t.content.length&&!r;o++){const n=t.content[o];n.type===s.ELEMENT_TYPE&&n.name===e.name&&(i++,i===a&&(r=n))}if(r)return o({start:e.range.start,end:r.range.end})}return o(e.range)}serializeElementInParent(e,t,n,a,o){return o||this.serializeElement(e,t.range.start.character)}}},71498:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initI18n=t.i18n=void 0;const o=a(n(63085)),r=a(n(76947));t.i18n=o.default.createInstance(),t.initI18n=async function(){await t.i18n.init({resources:{en:{translation:r.default}},lng:"en",fallbackLng:"en",joinArrays:"\n\n"})}},17676:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.FileKind=t.initI18n=t.XmlDomainAdapter=void 0;var r=n(18517);Object.defineProperty(t,"XmlDomainAdapter",{enumerable:!0,get:function(){return r.XmlDomainAdapter}}),o(n(18775),t),o(n(46593),t),o(n(19558),t);var i=n(71498);Object.defineProperty(t,"initI18n",{enumerable:!0,get:function(){return i.initI18n}});var s=n(3664);Object.defineProperty(t,"FileKind",{enumerable:!0,get:function(){return s.FileKind}})},38230:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uxLogger=void 0;const a=n(63940);t.uxLogger=new class LoggerUX{error(e){a.logger.error(e)}warn(e){a.logger.warn(e)}info(e){a.logger.info(e)}}},19558:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createQuickFixForDiagnostic=void 0;var a=n(23979);Object.defineProperty(t,"createQuickFixForDiagnostic",{enumerable:!0,get:function(){return a.createQuickFixForDiagnostic}})},23979:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createQuickFixForDiagnostic=void 0;const a=n(91610),o=n(67774),r=(e,t,n,a,o,r)=>o?o({uri:e,ast:t,diagnostic:n,formatterOptions:r,i18nEntries:a}):[];t.createQuickFixForDiagnostic=(e,t,n,i)=>s=>{if(s.data?.caseCheck&&s.data.caseCheck.proposedValue)return r(e,t,s,n,o.checkCaseProvider,i);if(s.code){const o=a.RULE_TO_PROVIDER.get(s.code);return r(e,t,s,n,o,i)}return[]}},67774:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkCaseProvider=void 0;const a=n(72307),o=n(71498);t.checkCaseProvider=({uri:e,diagnostic:t})=>{const{message:n,severity:r,range:i}=t,s=t.data,l=[];if(!s?.caseCheck)return l;const p={changes:{[e]:[a.TextEdit.replace(i,s?.caseCheck?.proposedValue)]}};let c=s?.caseCheck.value;s?.caseCheck.isNamespacedValue&&(c=`${s.alias??s.namespace}.${c}`);let u=o.i18n.t("Replace_0_with_1",{wrong:c,correct:s?.caseCheck.proposedValue});u=u.replace(/&#x2F;/g,"/");const m={title:u,kind:a.CodeActionKind.QuickFix,edit:p,diagnostics:[{message:n,range:i,severity:r}]};return l.push(m),l}},91610:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RULE_TO_PROVIDER=void 0;const a=n(49921),o=n(28689),r=n(15502),i=n(40652),s=n(41810);t.RULE_TO_PROVIDER=new Map([[s.NO_UNDEFINED_NAMESPACE_TYPE,a.noUndefinedNamespaceProvider],[s.NO_UNUSED_NAMESPACE_TYPE,o.noUnusedNamespaceProvider],[s.NAME_CASE_ISSUE_PATH_VALUE,r.nameCasePathValueProvider],[s.MISSING_I18N_KEY,i.missingI18nKeyProvider]])},40652:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.missingI18nKeyProvider=void 0;const a=n(72307),o=n(26853),r=n(3524),i=n(71498);t.missingI18nKeyProvider=({uri:e,diagnostic:t,i18nEntries:n})=>{const{message:s,severity:l,range:p}=t,c=t.data;if(!(0,o.i18nFileExists)())return[];let u=c.value.trim(),m="",d=!1,y=!1;if(-1!==u.indexOf("{@i18n>")||-1!==u.indexOf("{@i18n&gt;"))m=(0,r.extractI18nKey)(u),u=m,d=!0;else{const e=n.filter((e=>e.value.value===u));e.length?(y=!0,m=e[0].key.value):(m=(0,r.convertToCamelCase)(u),m=(0,r.getI18nUniqueKey)(m,n))}const g=(0,r.getI18nMaxLength)(u),f=`\n${`#${(0,r.getI18nTextType)(g)},${g}:`}\n${`${m}=${u}`}\n`;let h=`{@i18n>${m}}`;-1===c.value.indexOf("{@i18n&gt;")||y||(h=`{@i18n&gt;${m}}`);const T=a.TextEdit.replace(p,h);let P=(0,o.getI18nUri)(e);P=(0,o.getPath)(P);const E={changes:{[e]:[T]}};let v="";v=d?i.i18n.t("Generate_text_key_0_with_value_1_in_i18n",{key:m,value:m}):y?i.i18n.t("Substitue_0_by_1",{value:u,key:m}):i.i18n.t("Generate_text_key_0_in_i18n_and_substitue_1_by_2",{key:m,value:u,i18nKey:m});return[{title:v,kind:a.CodeActionKind.QuickFix,edit:E,diagnostics:[{message:s,range:p,severity:l}],command:{command:"sap.ux.annoataionModeler.updateI18nContent",title:"",arguments:[P,f,y]}}]}},15502:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nameCasePathValueProvider=void 0;const a=n(72307),o=n(71498);t.nameCasePathValueProvider=({uri:e,diagnostic:t})=>{const{message:n,severity:r,range:i}=t,s=t.data;if(s){const t={changes:{[e]:[a.TextEdit.replace(i,s.correct)]}};return[{title:o.i18n.t("Replace_0_with_1",{wrong:s.wrong,correct:s.correct}).replace(/&#x2F;/g,"/"),kind:a.CodeActionKind.QuickFix,edit:t,diagnostics:[{message:n,range:i,severity:r}]}]}return[]}},49921:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noUndefinedNamespaceProvider=void 0;const a=n(72307),o=n(99476),r=n(71498),i=n(26853),s=n(41810);t.noUndefinedNamespaceProvider=({uri:e,ast:t,diagnostic:n,formatterOptions:i})=>{const{message:s,severity:m,range:d}=n,y=n.data,g=t.rootElement;let f;const h=!!g.syntax.closeBody;let T,P="";if(c(g)&&h&&y){const t=u(g,y.referenceUri);t.isReferenceExisting?(P=y.alias?r.i18n.t("Add_include_to_reference_with_0_namespace_with_alias_1",{namespace:y.namespace,alias:y.alias}):r.i18n.t("Add_include_to_reference_with_0_namespace",{namespace:y.namespace}),T=p(y),f=t.referenceElement):(P=y.alias?r.i18n.t("Add_a_reference_to_0_namespace_with_alias_1",{namespace:y.namespace,alias:y.alias}):r.i18n.t("Add_a_reference_to_0_namespace",{namespace:y.namespace}),T=l(y));const n={changes:{[e]:[(0,o.insertWithOptions)(f||g,T,i)]}};return[{title:P,kind:a.CodeActionKind.QuickFix,edit:n,diagnostics:[{message:s,range:d,severity:m}]}]}return[]};const l=e=>{const t=new i.SnippetBase("Include",!0,1,s.EDMX_NAMESPACE_ALIAS);return new i.SnippetBase("Reference",!0,1,s.EDMX_NAMESPACE_ALIAS).setAttribute("Uri",e.referenceUri).appendContent(e.alias?t.setAttribute("Namespace",e.namespace).setAttribute("Alias",e.alias):t.setAttribute("Namespace",e.namespace)).generic},p=e=>{const t=new i.SnippetBase("Include",!0,1,s.EDMX_NAMESPACE_ALIAS);return(e.alias?t.setAttribute("Namespace",e.namespace).setAttribute("Alias",e.alias):t.setAttribute("Namespace",e.namespace)).generic},c=e=>{const t=Object.keys(e.namespaces).find((t=>e.namespaces[t]===o.EDMX_V4_NAMESPACE));return"Edmx"===e.name&&t&&e.ns===t},u=(e,t)=>{let n,a=!1;return e.subElements.forEach((e=>{e.attributes.forEach((o=>{a||"Uri"!==o.key||o.value!==t||"Reference"!==e.name||(a=!0,n=e)}))})),{referenceElement:n,isReferenceExisting:a}}},28689:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noUnusedNamespaceProvider=void 0;const a=n(72307),o=n(59659),r=n(71498);t.noUnusedNamespaceProvider=({uri:e,ast:t,diagnostic:n})=>{const{message:a,severity:o,range:p}=n,c=n.data;if(c){const n=i(t.rootElement.subElements,c.namespace);if(!n)return[];const u=n.parent,m={message:a,severity:o,range:p},d=r.i18n.t("Delete_0",{reference:u.subElements.length<=1?"edmx:Reference":"edmx:Include"}),y=s(u.subElements.length<=1?u:n);return[l(m,d,{changes:{[e]:[y]}})]}return[]};const i=(e,t)=>{let n;for(let a=0;e.length>a;a++){const r=e[a],s=(0,o.getElementAttributeByName)(r,"Namespace");if(s&&s.value===t)return r;if(e[a].subElements.length&&(n=i(e[a].subElements,t)),n)return n}return n},s=e=>{const t=e.position,n=t.startLine-1,o=t.startColumn-1,r=t.endLine-1,i=t.endColumn;return{range:a.Range.create(n,o,r,i),newText:""}},l=(e,t,n)=>({title:t,kind:a.CodeActionKind.QuickFix,edit:n,diagnostics:[e]})},77460:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.annotationFileSchema=void 0;const a=n(255),o="http://docs.oasis-open.org/odata/ns/edm",r="http://docs.oasis-open.org/odata/ns/edmx";t.annotationFileSchema={name:"Edmx",namespace:r,cardinality:"single",required:!0,require:!0,attributesType:"closed",elementsType:"closed",attributes:{Version:{key:"Version",required:!0,value:["4.0","4.01"]}},elements:{Reference:{name:"Reference",namespace:r,cardinality:"many",required:!1,attributesType:"closed",elementsType:"closed",attributes:{Uri:{key:"Uri",required:!0}},elements:{Include:{name:"Include",namespace:r,cardinality:"many",required:!1,attributesType:"closed",elementsType:"closed",attributes:{Namespace:{key:"Namespace",required:!0},Alias:{key:"Alias",required:!1}},elements:a.sequenceOfOptionalAnnotations},IncludeAnnotations:{name:"IncludeAnnotations",namespace:r,cardinality:"many",required:!1,attributesType:"closed",elementsType:"closed",attributes:{TermNamespace:{key:"TermNamespace",required:!0},Qualifier:{key:"Qualifier",required:!1},TargetNamespace:{key:"TargetNamespace",required:!1}},elements:{}}}},DataServices:{name:"DataServices",namespace:r,cardinality:"single",required:!0,attributesType:"closed",elementsType:"closed",attributes:{},elements:{Schema:{name:"Schema",namespace:o,cardinality:"many",required:!1,attributesType:"closed",elementsType:"closed",attributes:{Namespace:{key:"Namespace",required:!0},Alias:{key:"Alias",required:!1}},elements:{Annotations:{name:"Annotations",namespace:o,cardinality:"many",required:!1,attributesType:"closed",elementsType:"closed",attributes:{Target:{key:"Target",required:!0},Qualifier:{key:"Qualifier",required:!1}},elements:{Annotation:{...a.annotationDefinition,required:!0}}},Annotation:{...a.annotationDefinition}}}}}}}},46593:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metadataSchemaV4=t.metadataSchemaV2=t.annotationFileSchema=void 0;var a=n(77460);Object.defineProperty(t,"annotationFileSchema",{enumerable:!0,get:function(){return a.annotationFileSchema}});var o=n(11639);Object.defineProperty(t,"metadataSchemaV2",{enumerable:!0,get:function(){return o.metadataSchemaV2}});var r=n(86751);Object.defineProperty(t,"metadataSchemaV4",{enumerable:!0,get:function(){return r.metadataSchemaV4}})},11639:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metadataSchemaV2=void 0;const a=n(255),o="http://schemas.microsoft.com/ado/2008/09/edm",r="http://schemas.microsoft.com/ado/2007/06/edmx";t.metadataSchemaV2={name:"Edmx",namespace:r,cardinality:"single",required:!0,require:!0,attributesType:"open",elementsType:"open",attributes:{Version:{key:"Version",required:!0}},elements:{Reference:{name:"Reference",namespace:r,cardinality:"many",required:!1,attributesType:"open",elementsType:"open",attributes:{Uri:{key:"Uri",required:!0}},elements:{Include:{name:"Include",namespace:r,cardinality:"many",required:!1,attributesType:"open",elementsType:"open",attributes:{Namespace:{key:"Namespace",required:!0},Alias:{key:"Alias",required:!1}},elements:{}},IncludeAnnotations:{name:"IncludeAnnotations",namespace:r,cardinality:"many",required:!1,attributesType:"open",elementsType:"open",attributes:{TermNamespace:{key:"TermNamespace",required:!0},Qualifier:{key:"Qualifier",required:!1},TargetNamespace:{key:"TargetNamespace",required:!1}},elements:{}}}},DataServices:{name:"DataServices",namespace:r,cardinality:"single",required:!0,attributesType:"open",elementsType:"open",attributes:{},elements:{Schema:{name:"Schema",namespace:o,cardinality:"many",required:!1,attributesType:"open",elementsType:"open",attributes:{Namespace:{key:"Namespace",required:!0},Alias:{key:"Alias",required:!1}},elements:{Annotations:{name:"Annotations",namespace:o,cardinality:"many",required:!1,attributesType:"closed",elementsType:"closed",attributes:{Target:{key:"Target",required:!0},Qualifier:{key:"Qualifier",required:!1}},elements:{Annotation:{name:"Annotation",namespace:o,cardinality:"many",required:!0,attributes:{Term:{key:"Term",required:!0},Qualifier:{key:"Qualifier",required:!1}},elements:{}}}},EntityContainer:{...a.entityContainerDefinition,attributesType:"open",elementsType:"closed",attributes:{Name:{key:"Name",required:!0},Extends:{key:"Extends",required:!1}},elements:{EntitySet:{...a.entitySetDefinition,attributesType:"open",elementsType:"open"},AssociationSet:{...a.baseOpenElementDefinition,name:"AssociationSet",attributes:{Name:{key:"Name",required:!0},Association:{key:"Association",required:!0}}},FunctionImport:{...a.baseOpenElementDefinition,name:"FunctionImport",attributes:{Name:{key:"Name",required:!0},ReturnType:{key:"ReturnType",required:!0},EntitySet:{key:"EntitySet",required:!1}}}}},Annotation:{...a.annotationDefinition}}}}}}}},86751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metadataSchemaV4=void 0;const a=n(255),o="http://docs.oasis-open.org/odata/ns/edm",r="http://docs.oasis-open.org/odata/ns/edmx";t.metadataSchemaV4={name:"Edmx",namespace:r,cardinality:"single",required:!0,require:!0,attributesType:"closed",elementsType:"closed",attributes:{Version:{key:"Version",required:!0,value:["4.0","4.01"]}},elements:{Reference:{name:"Reference",namespace:r,cardinality:"many",required:!1,attributesType:"closed",elementsType:"closed",attributes:{Uri:{key:"Uri",required:!0}},elements:{Include:{name:"Include",namespace:r,cardinality:"many",required:!1,attributesType:"closed",elementsType:"closed",attributes:{Namespace:{key:"Namespace",required:!0},Alias:{key:"Alias",required:!1}},elements:a.sequenceOfOptionalAnnotations},IncludeAnnotations:{name:"IncludeAnnotations",namespace:r,cardinality:"many",required:!1,attributesType:"closed",elementsType:"closed",attributes:{TermNamespace:{key:"TermNamespace",required:!0},Qualifier:{key:"Qualifier",required:!1},TargetNamespace:{key:"TargetNamespace",required:!1}},elements:{}}}},DataServices:{name:"DataServices",namespace:r,cardinality:"single",required:!0,attributesType:"closed",elementsType:"closed",attributes:{},elements:{Schema:{name:"Schema",namespace:o,cardinality:"many",required:!1,attributesType:"closed",elementsType:"closed",attributes:{Namespace:{key:"Namespace",required:!0},Alias:{key:"Alias",required:!1}},elements:{Annotations:{name:"Annotations",namespace:o,cardinality:"many",required:!1,attributesType:"closed",elementsType:"closed",attributes:{Target:{key:"Target",required:!0},Qualifier:{key:"Qualifier",required:!1}},elements:{Annotation:{...a.annotationDefinition,required:!0}}},EntityContainer:a.entityContainerDefinition,EntitySet:a.entitySetDefinition,EntityType:a.entityTypeDefinition,Action:a.actionDefinition,Function:a.functionDefinition,ComplexType:a.complexTypeDefinition,Annotation:{...a.annotationDefinition}}}}}}}},255:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.entityContainerDefinition=t.complexTypeDefinition=t.functionDefinition=t.actionDefinition=t.entityTypeDefinition=t.actionImportDefinition=t.functionImportDefinition=t.singletonDefinition=t.entitySetDefinition=t.sequenceOfOptionalAnnotations=t.annotationDefinition=t.actionOrFunctionAttributes=t.derivableAttributes=t.commonPropertyAttributes=t.facetAttributes=t.typeAttributes=t.baseOpenElementDefinition=void 0;const n={name:"",namespace:"http://docs.oasis-open.org/odata/ns/edm",cardinality:"many",required:!1,attributesType:"closed",elementsType:"closed",attributes:{},elements:{}};t.baseOpenElementDefinition={...n,attributesType:"open",elementsType:"open"},t.typeAttributes={Name:{key:"Name",required:!0}},t.facetAttributes={MaxLength:{key:"MaxLength",required:!1},Precision:{key:"Precision",required:!1},Scale:{key:"Scale",required:!1},SRID:{key:"SRID",required:!1},Unicode:{key:"Unicode",required:!1}},t.commonPropertyAttributes={Name:{key:"Name",required:!0},Type:{key:"Type",required:!0},Nullable:{key:"Nullable",required:!1},DefaultValue:{key:"DefaultValue",required:!1},...t.facetAttributes},t.derivableAttributes={...t.typeAttributes,BaseType:{key:"BaseType",required:!1},Abstract:{key:"Abstract",required:!1}},t.actionOrFunctionAttributes={...t.typeAttributes,IsBound:{key:"IsBound",required:!1},EntitySetPath:{key:"EntitySetPath",required:!1}},t.annotationDefinition={...n,name:"Annotation",elementsType:"open",attributesType:"open",attributes:{Term:{key:"Term",required:!0},Qualifier:{key:"Qualifier",required:!1}}},t.sequenceOfOptionalAnnotations={Annotation:t.annotationDefinition};const a={...n,name:"PropertyRef",attributes:{Name:{key:"Name",required:!0},Alias:{key:"Alias",required:!1}},elements:{}},o={...n,name:"Key",cardinality:"single",elements:{PropertyRef:{...a,required:!0}}},r={...n,name:"Property",attributes:t.commonPropertyAttributes,elements:t.sequenceOfOptionalAnnotations},i={...n,name:"Parameter",attributes:t.commonPropertyAttributes,elements:t.sequenceOfOptionalAnnotations},s={...n,name:"ReturnType",cardinality:"single",attributes:{Type:{key:"Type",required:!0},Nullable:{key:"Nullable",required:!1},DefaultValue:{key:"DefaultValue",required:!1},...t.facetAttributes},elements:t.sequenceOfOptionalAnnotations},l={...n,name:"ReferentialConstraint",attributes:{Property:{key:"Property",required:!0},ReferencedProperty:{key:"ReferencedProperty",required:!0}},elements:t.sequenceOfOptionalAnnotations},p={...n,name:"OnDelete",attributes:{Action:{key:"Action",required:!0}},elements:t.sequenceOfOptionalAnnotations},c={...n,name:"NavigationProperty",attributes:{Name:{key:"Name",required:!0},Type:{key:"Type",required:!0},Nullable:{key:"Nullable",required:!1},Partner:{key:"Partner",required:!1},ContainsTarget:{key:"ContainsTarget",required:!1}},elements:{ReferentialConstraint:l,OnDelete:p,...t.sequenceOfOptionalAnnotations}};t.entitySetDefinition={...n,name:"EntitySet",attributes:{Name:{key:"Name",required:!0},EntityType:{key:"EntityType",required:!0},IncludeInServiceDocument:{key:"IncludeInServiceDocument",required:!1}},elements:{NavigationPropertyBinding:{...n,name:"NavigationPropertyBinding",attributes:{Path:{key:"Path",required:!0},Target:{key:"Target",required:!0}}},...t.sequenceOfOptionalAnnotations}},t.singletonDefinition={...n,name:"Singleton",attributes:{Name:{key:"Name",required:!0},Type:{key:"Type",required:!0},Nullable:{key:"Nullable",required:!1}},elements:{NavigationPropertyBinding:{...n,name:"NavigationPropertyBinding",attributes:{Path:{key:"Path",required:!0},Target:{key:"Target",required:!0}}},...t.sequenceOfOptionalAnnotations}},t.functionImportDefinition={...n,name:"FunctionImport",attributes:{Name:{key:"Name",required:!0},Function:{key:"Function",required:!0},EntitySet:{key:"EntitySet",required:!1},IncludeInServiceDocument:{key:"IncludeInServiceDocument",required:!1}}},t.actionImportDefinition={...n,name:"ActionImport",attributes:{Name:{key:"Name",required:!0},Action:{key:"Action",required:!0},EntitySet:{key:"EntitySet",required:!1}}},t.entityTypeDefinition={...n,name:"EntityType",attributes:{...t.derivableAttributes,OpenType:{key:"OpenType",required:!1},HasStream:{key:"HasStream",required:!1}},elements:{Key:o,Property:r,NavigationProperty:c,...t.sequenceOfOptionalAnnotations}},t.actionDefinition={...n,name:"Action",attributes:{...t.actionOrFunctionAttributes},elements:{Parameter:i,ReturnType:s,...t.sequenceOfOptionalAnnotations}},t.functionDefinition={...n,name:"Function",attributes:{...t.actionOrFunctionAttributes},elements:{Parameter:i,ReturnType:s,...t.sequenceOfOptionalAnnotations}},t.complexTypeDefinition={...n,name:"ComplexType",attributes:{...t.derivableAttributes,OpenType:{key:"OpenType",required:!1}},elements:{Property:r,NavigationProperty:c,...t.sequenceOfOptionalAnnotations}},t.entityContainerDefinition={...n,name:"EntityContainer",attributes:{Name:{key:"Name",required:!0},Extends:{key:"Extends",required:!1}},elements:{EntitySet:t.entitySetDefinition,Singleton:t.singletonDefinition,FunctionImport:t.functionImportDefinition,ActionImport:t.actionImportDefinition}}},90326:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformAst=void 0;const a=n(99476);t.transformAst=function(e,t,n=!0){const o=(0,a.convertDocument)(t,e);if(!n){const n=(0,a.convertMetadataDocument)(t,e);return{...o,metadataElements:n||[]}}return o}},59659:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAttributeValue=t.getElementAttributeByName=void 0;t.getElementAttributeByName=(e,t)=>(e.attributes||[]).find((e=>e.key===t));t.getAttributeValue=(e,t)=>{const n=e.attributes.find((e=>e.key===t));return n&&n.value||""}},44090:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformAst=void 0;var a=n(90326);Object.defineProperty(t,"transformAst",{enumerable:!0,get:function(){return a.transformAst}})},18775:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(44090),t)},3664:(e,t)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.FileKind=t.AnnotationFileType=void 0,function(e){e[e.Readonly=0]="Readonly",e[e.Changeable=1]="Changeable"}(n||(t.AnnotationFileType=n={})),function(e){e[e.Metadata=0]="Metadata",e[e.Annotations=1]="Annotations"}(a||(t.FileKind=a={}))},87334:e=>{"use strict";e.exports=JSON.parse('{"0_is_unknown_Do_you_mean_1":"\'{{unknown}}\' is unknown. Do you mean \'{{known}}\'?","Unknown_Vocabulary_Do_you_mean_0_namespace":"Unknown Vocabulary. Do you mean \'{{namespace}}\' namespace?","Unknown_Vocabulary_Do_you_mean_alias_0_from_1_namespace":"Unknown Vocabulary. Do you mean alias \'{{alias}}\' from \'{{namespace}}\' namespace?","Unknown_Namespace_Do_you_mean_Metadata_namespace_0":"Unknown Namespace. Do you mean Metadata namespace \'{{namespace}}\'?","Unused_namespace_0":"Unused namespace \'{{namespace}}\'","Unused_namespace_0_with_alias_1":"Unused namespace \'{{namespace}}\' with alias \'{{alias}}\'","Enter_a_unique_qualifier_for_0":"Enter a unique qualifier for \'{{term}}\'","Invalid_target_check_0":"Invalid target - check \'{{segment}}\'","Invalid_target_0":"Invalid target \'{{target}}\'","Invalid_Term":"Invalid Term","Annotation_0_is_not_available_in_vocabulary_1":"Annotation \'{{term}}\' is not available in vocabulary \'{{vocabulary}}\'","Term_0_cannot_be_applied_for_target_kind_1_It_can_be_applied_to_2":"Term \'{{term}}\' cannot be applied for target kind \'{{wrong}}\'. It can be applied to \'{{correct}}\'","Term_0_is_not_in_applicable_term_constraint_allowed_terms_are_1":"\'{{term}}\' cannot be applied in the current context. Use code completion to see the applicable terms.","Term_0_cannot_be_applied_to_this_element_It_can_be_applied_to_1_of_type_2":"Term \'{{term}}\' cannot be applied to this element. It can be applied to \'{{elements}}\' of type \'{{type}}\'","Unsupported_Vocabulary_0":"Unsupported Vocabulary \'{{vocabulary}}\'","Qualifier_0_should_be_of_type_SimpleIdentifier":"Qualifier \'{{qualifier}}\' should be of type SimpleIdentifier. Qualifiers must start with a letter or underscore, followed by maximal 127 letters, underscores or digits.","Additional_Information":"Additional Information","Unknown_attribute_0":"Unknown attribute \'{{attribute}}\'","Unknown_child_element_0":"Unknown child element \'{{element}}\'","Invalid_type_0":"Invalid type \'{{type}}\'","Invalid_value_for_0_indynamic_expression_1":"Invalid value for \'{{element}}\' in dynamic expression \'{{expression}}\'","Missing_mandatory_child_element_0_on_position_1":"Missing mandatory child element in \'{{elementName}}\' on position \'{{position}}\'","Enum_value_required":"Enum value required","Multiple_enum_values_not_allowed":"Multiple enum values not allowed","Invalid_enum_value_0":"Invalid enum value \'{{value}}\'","Duplicate_enum_value":"Duplicate enum value","Enum_value_is_deprecated_0":"Enum value is deprecated{{deprecationDescription}}","Experimental_0":"Experimental {{- info}}","underlying_type_0":"underlying type \'{{type}}\'","0_cannot_provide_value_for_type_1_2":"\'{{expression}}\' cannot provide value for type \'{{aliasedName}}\'{{underlyingType}}","Text_key_is_not_available":"Text key is not available. \'i18n.properties\' file is missing or not registered in \'manifest.json\' file","Text_key_0_is_not_available":"Text key or value for \'{{value}}\' is not available in i18n.properties file","Text_key_is_not_available_in_i18Properties_file":"Text key or value is not available in i18.properties file","Text_key_0_for_value_1_is_available_in_i18nProperties_file_Consider_substituting_1_by_2":"Text key \'{{key}}\' for value \'{{value}}\' is available in i18n.properties file. Consider substituting \'{{value}}\' by \'{{substitute}}\'.","Text_key_or_value_for_0_is_not_available_in_i18nProperties_file":"Text key or value for \'{{value}}\' is not available in i18n.properties file","Invalid_value_for_primitive_type_0":"Invalid value for primitive type \'{{type}}\'","Value_0_not_allowed_due_to_restrictions_defined_in_vocabulary_Provide_a_value_with_precision_1":"Value {{value}} not allowed due to restrictions defined in vocabulary. Provide a value with precision {{precision}}","Attribute_not_allowed_here_0":"Attribute not allowed here: \'{{attribute}}\'","Attributes_required_0":"Attributes required: \'{{attribute}}\'","Element_0_and_its_subElements_are_not_validated_by_XML_annotation_language_server":"Element \'{{element}}\' and its subElements are not validated by XML annotation language server","Element_not_allowed_here_0":"Element not allowed here: \'{{element}}\'","Element_0_not_allowed_below_element_1":"Element \'{{element0}}\' not allowed below element \'{{element1}}\'","Additional_text_nodes_ignored_in_element_0":"Additional text nodes ignored in element \'{{element}}\'","Element_0_and_its_child_elements_are_not_validated_by_current_version_of_XML_annotation_language_server":"Element \'{{element}}\' and its child elements are not validated by current version of XML annotation language server","No_additional_value_possible_Value_provided_already_via_0":"No additional value possible. Value provided already via \'{{property}}\'","Value_required_for_0":"Value required for \'{{element}}\'","Value_required_in_node_0":"Value required in node \'{{element}}\'","Element_0_cannot_provide_type_1":"Element \'{{element}}\' cannot provide type \'{{type}}\'","Check_0":"Check: \'{{segment}}\'","Incomplete_0_Use_code_completion_or_add_slash_and_select_the_next_segment":"Incomplete \'{{element}}\'. Use code completion or add \'/\' and select the next segment.","Incomplete0_Add_slash_and_select_the_next_segment":"Incomplete \'{{path}}\'. Add \'/\' and select the next segment.","Invalid_path_for_0_expression":"Invalid path for \'{{expression}}\' expression.","Path_0_leads_to_1_The_path_should_lead_to_type_2":"Path {{value}} leads to {{abstractType}}. The path should lead to type {{typeExpected}}.","Path_0_leads_to_1_The_path_should_lead_to_a_collection_representing_2":"Path {{value}} leads to {{abstractType}}. The path should lead to a collection of type representing {{expressionName}}.","Path_0_leads_to_1_The_path_should_lead_to_type_representing_2_3":"Path {{value}} leads to {{abstractType}}. The path should lead to a type representing {{expressionName}} (e.g. {{typeExpected}} )","Does_not_conform_to_OData_Specification_Type_attribute_for_record_element_is_missing":"Does not conform to OData Specification. Type attribute for record element is missing.","Duplicate_element":"Duplicate element","Missing_required_attribute_Type_Type_0_is_abstract":"Missing required attribute \'Type\' (Type \'{{type}}\' is abstract)","Missing_required_value_for_Type_Type_0_is_abstract":"Missing required value for \'Type\' (Type \'{{type}}\' is abstract)","Unknown_Type_0":"Unknown Type \'{{type}}\'","Record_type_0_not_allowed_due_to_restrictions_defined_in_vocabulary_Use_the_code_completion_to_select_one_of_the_allowed_values":"Record type \'{{recordType}}\' not allowed due to restrictions defined in vocabulary. Use the code completion to select one of the allowed values.","Value_not_allowed_Use_the_code_completion_to_select_one_of_the_allowed_values":"Value not allowed. Use the code completion to select one of the allowed values.","Record_Type_0_must_not_be_abstract":"Record Type \'{{recordType}}\' must not be abstract","Record_Type_0_must_be_derived_from_1":"Record Type \'{{recordType}}\' must be derived from \'{{element}}\'","Mandatory_properties_not_provided_0":"Mandatory properties not provided: {{properties}}","Invalid_Property_0":"Invalid Property \'{{property}}\'","Invalid_Entity_Property":"Deprecated non-standard annotation property \'entity\'. Change it to \'CollectionPath\' or annotate the association target entity with \'@cds.odata.valuelist\' instead.","Missing_value_for_Property":"Missing value for Property","Namespace_0_should_be_a_sequence_of_type_SimpleIdentifier_separated_by_dot":"Namespace \'{{namespace}}\' should be a sequence of type SimpleIdentifier separated by dot (.)","Namespace_for_the_metadata_must_match_the_one_defined_in_the_metadata_file_0":"Unknown Namespace.\\nNamespace for the metadata must match the one defined in the metadata file: \'{{metadataFile}}\'.\\nNamespaces for vocabularies must match the namespace from the supported vocabularies, see User Guide.","Duplicate_schema_namespace_namespace_is_already_used_in_0":"Duplicate schema namespace - namespace is already used (in \'{{fileNames}}\')`","Cannot_use_a_reserved_namespace_Namespace_is_reserved_for_0_vocabulary":"Cannot use a reserved namespace. Namespace is reserved for \'{{namespace}}\' vocabulary","path-value_is_required":"Incomplete \'{{element}}\'. Use code completion to select a value.","Did_you_mean_0":"Did you mean \'{{proposedValue}}\'?","Property_name_0_should_be_of_type_SimpleIdentifier":"Property \'{{propertyName}}\' should be of type SimpleIdentifier. Property names must start with a letter or underscore, followed by maximal 127 letters, underscores or digits.","No_namespace_or_Invalid_namespace_defined":"This target and applied annotations cannot be validated. Ensure that metadata namespace is defined in this file and matches the namespace in the metadata file to enable the code completion and validation.","path_does_not_exist":"Path does not exist.","Replace_0_with_1":"Replace \'{{wrong}}\' with \'{{correct}}\'","common_text_should_be_provided":"Common.Text should be provided with Common.TextArrangement","numeric_primitive_value":"numeric primitive value","Unknown_Function_0":"Unknown function {{functionName}}","Function_0_not_allowed_here_required_result_type_1":"Function \'{{functionName}}\' not allowed here ( required result type \'{{resultType}}\')","Function_Parameter_index_0_not_provided":"Function \'{{functionName}}\': mandatory parameter at position {{index}} missing. Use CTRL/CMD+Space to add parameter.","Template_must_not_be_empty":"This string value must represent a template and must not be empty","Template_value_0_contains_no_variables":"No variables found. The string value \'{{templateText}}\' must represent a template with one or more variables. Add variable in the format \'{variableName}\'.","Template_value_0_variables_must_no_be_empty":"Template \'{{templateText}}\': variable name must be provided","Template_variable_0_not_defined":"Template variable \'{{varName}}\' not defined as LabeledElement. Use CTRL/CMD+Space to add LabeledElement with name \'{{varName}}\'.","Labeled_element_0_not_used_in_template":"Labeled element \'{{name}}\' is not used in template parameter of function","Labeled_element_name_0_should_be_of_type_SimpleIdentifier":"Labeled element name \'{{name}}\' should be of type SimpleIdentifier. I.e. it must start with a letter or underscore, followed by maximal 127 letters, underscores or digits.","Labeled_element_name_0_must_be_unique_within_namespace_2":"Labeled element name \'{{name}}\' must be unique within namespace \'{{namespace}}\'","Labeled_element_must_have_a_name":"Labeled element must have a Name","Invalid_value_for_types_0":"Invalid value for type(s): {{types}}","The_value_of_types_0_is_for_strict_comparison_only":"The value of type(s) {{types}} should be used for strict comparison only, i.e. Eq, Ne","Wildcard_path_segment_description":"An * as the last path segment means all structural properties directly reached via the preceding path","Empty_property_path_as_string":"This string value must represent a path to a property. Use code completion to select a value segment.","Sum":"Sum","Minimum":"Minimum","Maximum":"Maximum","Average":"Average","CountDistinct":"Count Distinct Values"}')},19206:e=>{"use strict";e.exports=JSON.parse('{"UI.FieldGroup":[{"guideId":"addFieldGroup","guideTitle":"Add a field group as a section to a page"}],"UI.Facets":[{"guideId":"addFieldGroup","guideTitle":"Add a field group as a section to a page"},{"guideId":"addPageSection","guideTitle":"Add a new section to a page"},{"guideId":"addSmartChartFacet","guideTitle":"Add a smart chart facet to an object page"}],"UI.HeaderFacets":[{"guideId":"addDataPointsHeaderFacetObjectPage","guideTitle":"Add a header facet using data points"}],"UI.DataPoint":[{"guideId":"addDataPointsHeaderFacetObjectPage","guideTitle":"Add a header facet using data points"},{"guideId":"addTableProgressColumn","guideTitle":"Add a progress indicator column to a table"},{"guideId":"addTableRatingColumn","guideTitle":"Add a rating indicator column to a table"},{"guideId":"addMicroChart","guideTitle":"Add a smart micro chart to a table"},{"guideId":"addTableCard","guideTitle":"Add a table card to an overview page"},{"guideId":"addAnalyticalCard","guideTitle":"Add an analytical card to an overview page"}],"UI.Identification":[{"guideId":"addLinkListCard","guideTitle":"Add a link list card to an overview page"},{"guideId":"addListCard","guideTitle":"Add a list card to an overview page"},{"guideId":"addTableCard","guideTitle":"Add a table card to an overview page"},{"guideId":"addAnalyticalCard","guideTitle":"Add an analytical card to an overview page"}],"UI.PresentationVariant":[{"guideId":"addListCard","guideTitle":"Add a list card to an overview page"},{"guideId":"addVisualFilter.xml","guideTitle":"Add a new visual filter"},{"guideId":"addAnalyticalCard","guideTitle":"Add an analytical card to an overview page"},{"guideId":"addSmartChart","guideTitle":"Add an interactive chart"},{"guideId":"addSemanticColoringToVisualFilter.xml","guideTitle":"Add semantic colors to visual filters"}],"UI.LineItem":[{"guideId":"addListCard","guideTitle":"Add a list card to an overview page"},{"guideId":"addTableContact","guideTitle":"Add a new column as a contact view"},{"guideId":"addTableColumn","guideTitle":"Add a new column to a table"},{"guideId":"addTableProgressColumn","guideTitle":"Add a progress indicator column to a table"},{"guideId":"addTableRatingColumn","guideTitle":"Add a rating indicator column to a table"},{"guideId":"addMicroChart","guideTitle":"Add a smart micro chart to a table"},{"guideId":"addTableCard","guideTitle":"Add a table card to an overview page"},{"guideId":"addCriticalityHighlight","guideTitle":"Add semantic highlights to line items in a table"},{"guideId":"addStatusColorAndIcon","guideTitle":"Add status colors and icons for a column"},{"guideId":"reorderTableColumns","guideTitle":"Reorder columns in a table"}],"UI.Importance":[{"guideId":"addTableContact","guideTitle":"Add a new column as a contact view"}],"UI.SelectionFields":[{"guideId":"addFilterBarSelectionField","guideTitle":"Add a new filter field to the Filter Bar"}],"UI.Chart":[{"guideId":"addVisualFilter.xml","guideTitle":"Add a new visual filter"},{"guideId":"addSmartChartFacet","guideTitle":"Add a smart chart facet to an object page"},{"guideId":"addMicroChart","guideTitle":"Add a smart micro chart to a table"},{"guideId":"addAnalyticalCard","guideTitle":"Add an analytical card to an overview page"},{"guideId":"addSmartChart","guideTitle":"Add an interactive chart"},{"guideId":"addSemanticColoringToVisualFilter.xml","guideTitle":"Add semantic colors to visual filters"}],"UI.SelectionVariant":[{"guideId":"addTableCard","guideTitle":"Add a table card to an overview page"}],"UI.Criticality":[{"guideId":"addCriticalityHighlight","guideTitle":"Add semantic highlights to line items in a table"},{"guideId":"addStatusColorAndIcon","guideTitle":"Add status colors and icons for a column"}],"UI.HeaderInfo":[{"guideId":"configureObjectPageHeader.xml","guideTitle":"Configure object page header"}]}')},82403:e=>{"use strict";e.exports=JSON.parse('{"Name":"Name","New":"New","None":"None","CreateNew":"Create New","Complex":"complex","BaseLayer":"base layer","ConstantNumber":"Constant Number","NumericProperty":"Numeric Property","TargetValueTypeLabel":"Target Type","TargetValueTypeTooltip":"Choose the expression type for the progress goal. It could be a constant number or a property of a numeric type if provided in the service","TargetValueLabel":"Target","TargetValuePathTooltip":"Choose a property representing the progress goal","TargetValueDecimalTooltip":"Choose a number representing the progress goal","TargetValueIntegerTooltip":"Choose a number representing the maximum rating","Criticality":"Criticality","CriticalityTooltip":"Choose a property representing progress criticality","CriticalityTooltipField":"Choose a property representing the criticality status. The field is then highlighted with semantic colors and icons based on the criticality calculation logic defined for the selected property in the back end.","CriticalityTooltipColumn":"Choose a property representing the criticality status for the column values. The column values are then highlighted with semantic colors and icons based on the criticality calculation logic defined for the selected property in the back end.","CriticalityRepresentation":"Criticality Representation","CriticalityRepresentationTooltip":"Choose whether to display the criticality status with an icon in addition to the semantic coloring. By default, SAP Fiori elements displays the criticality status with an icon.","AddChartSection":"Add Chart Section","VariantNoneTooltip":"Applies no presentation variant and references the chart in manifest.json directly","VariantNewTooltip":"Generates new presentation variant","VariantNoneOpSectionTooltip":"Applies no presentation variant","VariantReuseAlpTableTooltip":"Reuses the presentation variant defined for the table to apply the same presentation settings for the chart","VariantReuseAlpChartTooltip":"Reuses the presentation variant defined for the chart to apply the same presentation settings for the table","FromTable":"From Table","FromChart":"From Chart","SortOrder":"Presentation Variant: Sort Order","SortOrderTooltip":"Choose the property used to sort data and the direction of sorting","SortOrderRowTitle":"Sort Property","SortOrderAddNewRowTitle":"Add Sort Property","SortProperty":"Property","SortDirection":"Direction","Ascending":"Ascending","Descending":"Descending","Grouping":"Presentation Variant: Grouping","GroupingTooltip":"Choose the property to group records by. Note: Grouping is not supported for the type \'GridTable\'. Grouping by multiple properties is only supported for the type \'AnalyticalTable\'.","GroupingRowTitle":"Grouping","GroupingAddNewRowTitle":"Add Grouping Property","GroupProperty":"Property","SelectOptions":"Selection Variant: Default Filters","SelectOptionsTooltip":"Choose properties used to filter the table data by default","SelectionOptionAddNewRowTitle":"Add Default Filter","SelectionProperty":"Property","SelectOptionSign":"Include/Exclude","SelectOptionSignInclude":"Include","SelectOptionSignExclude":"Exclude","SelectOptionOption":"Comparison Operator","SelectOptionEQ":"Equal to","SelectOptionBT":"Between","SelectOptionCP":"Contains a pattern","SelectOptionLE":"Less than or equal to","SelectOptionGE":"Greater than or equal to","SelectOptionNE":"Not equal to","SelectOptionNB":"Not between","SelectOptionNP":"Does not contain a pattern","SelectOptionGT":"Greater than","SelectOptionLT":"Less than","SelectOptionValue":"Value","SelectOptionLowValue":"Low Value","SelectOptionHighValue":"High Value","SelectionVariantNoneTooltip":"Applies no selection variant and references the table in manifest.json directly","SelectionVariantNewTooltip":"Generates new selection variant","SelectionRowTitleUnsupportedPath":"Unknown Filter","InvalidPath":"Invalid value. \'{{value}}\' is not part of the service definition.","InvalidAnnotationPath":"Invalid value. \'{{value}}\' is not a valid annotation path.","UnsupportedDataType":"Value type is not supported in this context. Check the service definition or choose a different value in the code editor.","UnsupportedValue":"Value {{value}} is not supported in this context. Check the service definition or choose a different value in the code editor","TooltipType":"Tooltip Source","TooltipTypeTooltip":"Choose the source of the tooltip. Choose Property if the tooltip is defined in the back end and exposed as a service entity element. Choose String to define the same text for all values.","TooltipString":"Tooltip Text","TooltipStringTooltip":"Enter the tooltip text","StringOption":"String","TooltipPath":"Tooltip Property","TooltipPathTooltip":"Choose property representing the tooltip","ValueHelpResultList":"Result List","ValueHelpResultListTooltip":"Properties to be used as additional columns in result lists and dependency relationships of such columns with other fields on the screen","ValueHelpResultListAddNewRowTitle":"Add Column","ValueHelpResultListSorting":"Sort Order","ValueListProperty":"Property","ValueListPropertyTooltip":"Property to be shown as an additional column in the value help result list","ValueListDependency":"Dependency","ValueListDependencyTooltip":"Dependency between the value help and other fields/columns built on this property","ValueListLocalValue":"Local Value","ValueListLocalValueTooltip":"Property of the main entity to filter the value list or auto-populate the dependent field","ValueListParameterNone":"None","ValueListParameterIn":"In","ValueListParameterOut":"Out","ValueListParameterInOut":"InOut","StringProperty":"Property","StringValue":"Text String","ExpressionType":"Expression Type","MeasuresType":"Measures and Currencies","MeasuresTypeTooltip":"Choose a measure or a currency displayed next to the value","MeasureRowTitle":"Measure","MeasureAddNewRowTitle":"Add New Measure","Unit":"Unit of Measure","UnitTypeTooltip":"Choose the expression type for the measure unit. It could be a fixed text string or a property of type string.","UnitStringTooltip":"Enter a text string representing the unit of measure","UnitPropertyTooltip":"Choose a property representing the unit of measure","Currency":"Currency Unit","CurrencyTypeTooltip":"Choose the expression type for the currency unit. It could be a fixed text string or a property of type string.","CurrencyStringTooltip":"Enter a text string representing the currency unit","CurrencyPropertyTooltip":"Choose a property representing the currency unit","TypeName":"Type Name","TypeNameTooltip":"Define the name of the main object for this page. It is displayed on the very top of the object page","TypeNamePlural":"Type Name Plural","TypeNamePluralTooltip":"Define the plural form of the object name. It is displayed as a table header on a previous page.","Title":"Title","TitleTooltip":"Choose a property representing the main object of the page. It is displayed in the header area of the page.","DescriptionType":"Description Type","DescriptionTypeTooltip":"Choose the expression type for the description. It could be a fixed text string or a property of any type except boolean.","Description":"Description","DescriptionStringTooltip":"Enter a text describing the main object of the page. It is displayed after the title in the header area of the page.","DescriptionPathTooltip":"Choose a property describing the main object of the page. It is displayed after the title in the header area of the page.","ImageTooltip":"Choose a property representing an image of the main page object","InitialsTooltip":"Choose a property representing the object initials. It is displayed in the object header if the Image is not available.","TypeImageUrlTooltip":"Enter a URL of the icon representing the object. You can use one of the icon URLs provided in the icon explorer https://ui5.sap.com/sdk/test-resources/sap/m/demokit/iconExplorer/webapp/index.html. This icon will be displayed in the page header if neither an image nor initials are available.","Property":"Property","Calculation":"Calculation","Minimize":"Minimize","Maximize":"Maximize","Target":"Target","Text":"Text","TextArrangement":"Text Arrangement","Label":"Label","LabelTooltip":"Define text to be displayed as a section label","DescriptionTooltip":"Define text to be displayed as a progress indicator description","ValueHelpLabelTooltip":"Label displayed in the value help dialog once multiple value helps are defined for the same property. It enables the end user to select the relevant one.","ViewLabel":"View Label","ViewLabelTooltip":"Enter the text to be displayed as a label for this view","ChartView":"Chart View","TableView":"Table View","ChartTitleTooltip":"Define the chart title.","ChartType":"Chart Type","ChartTypeTooltip":"Type of the micro chart. To use a different chart type, add another chart column with that type.","ChartTypeArea":"Area","ChartTypeBullet":"Bullet","ChartTypeLine":"Line","ChartTypeRadial":"Radial","ChartTypeBar":"Bar","ChartTypeColumn":"Column","ChartTypePie":"Pie","ChartTypeHeatMap":"Heat Map","ChartTypeVerticalBullet":"Vertical Bullet","ChartTypeBarStacked":"Stacked Bar","ChartTypeColumnStacked":"Stacked Column","ChartTypeBarStacked100":"100% Stacked Bar","ChartTypeColumnStacked100":"100% Stacked Column","ChartTypeWaterfall":"Waterfall","ChartTypeHorizontalWaterfall":"Horizontal Waterfall","AnalyticalChartDeleteNotSupported":"Deletion of the analytical chart not supported (UI.LineItem is referenced via UI.PresentationVariant with a qualifier).","AnalyticalChartDelete":"Delete analytical chart.","AnalyticalChartAdd":"Add an analytical chart to create an analytical list page.","AnalyticalChartAddToMultiView":"Add an analytical chart to create a multi-view report","AnalyticalChartAddNotSupportedALP":"Adding an analytical chart to create a multi-view list report is not allowed: the analytical chart is already defined as part of the analytical list page.","AnalyticalChartAddNotSupportedNoEntityEnabled":"Adding an analytical chart is not possible: no entity found that is enabled for analytics.","AnalyticalChartDisabledPresent":"Analytical chart is already defined. You cannot add more than one analytical chart in the same view.","AnalyticalChartDisabledMultiView":"List Report with multiple views. You cannot add an analytical chart to create an Analytical List Page.","AnalyticalChartDisabledOnEntity":"Entity \'{{entityTypeName}}\' is not fully enabled for the analytical chart.","AnalyticalChartDisabledMissingTerms":"The following annotations cannot be found: {{missingTermsText}}.","AnalyticalChartDisabledNoGroupable":"Groupable properties cannot be found in annotation @Aggregation.ApplySupported.","AnalyticalChartDisabledNoAggregatable":"Aggregatable properties cannot be found in annotation @Aggregation.ApplySupported.","AnalyticalChartDisabledNoValidGroupable":"Properties in @Aggregation.ApplySupported/Groupable do not exist","AnalyticalChartDisabledNoValidAggregatable":"Properties in @Aggregation.ApplySupported/Aggregatable do not exist","AnalyticalChartDisabledForObjectPage":"There are no entities associated with cardinality ‘to many’ or they are not fully enabled for displaying a chart based on custom aggregation.","AnalyticalChartTypeTooltip":"Type of the analytical chart","ChartValue":"Value","ChartValueTooltip":"Property representing a value in the chart","ChartValues":"Values","ChartValuesTooltip":"Add properties representing values for additional lines","ShowAsDefault":"Default","ReadonlyTooltipCannotBeChanged":"Value cannot be changed","AggregationMethod":"Aggregation Method","Dimension":"Dimension","DimensionTooltip":"Choose a dimension to represent the x-axis of the chart by default","Dimensions":"Dimensions","DimensionsTooltip":"Choose dimensions to represent the x-axis of the chart by default","Measures":"Measures","MeasuresTooltip":"Choose existing measures and/or add new measures to represent y-axis values of the chart by default","TargetValue":"Target Value","TargetValueTooltip":"Choose property representing the target value","ForecastValue":"Forecast Value","ForecastValueTooltip":"Choose a property representing the expected value","CriticalitySource":"Criticality Source","CriticalitySourceTooltip":"Choose how the chart color should be calculated. Choose Property if criticality calculation is performed in the back end and exposed as a service entity element. Choose Calculation to define the criticality calculation parameters, such as improvement direction and deviation ranges.","CriticalityValue":"Criticality Value","CriticalityValueTooltip":"Choose a property representing the criticality status for the chart values. The chart value is then displayed with semantic colors based on the criticality calculation logic defined for the selected property in the back end.","ActionCriticalityPositive":"Positive","ActionCriticalityNegative":"Negative","ActionCriticalityTooltipField":"Choose Positive or Negative to display the action as a button with positive or negative semantics. Choose None to remove the criticality semantics. Note that actions with criticality semantics are always displayed at the left-most position.","ImprovementDirection":"Improvement Direction","ImprovementDirectionTooltip":"Choose the direction in which the value is considered improved","DecimalProperty":"Decimal Property","DecimalNumber":"Decimal Number","MaximumValueType":"Maximum Value Type","MaximumValueTypeTooltip":"Choose the expression type for the maximum possible value in the chart. It could be a decimal number or a property of type decimal.","MaximumValue":"Maximum Value","MaximumValuePathTooltip":"Choose a property representing the maximum possible value in the chart","MaximumValueTooltip":"Choose a decimal number representing the maximum possible value in the chart","MinimumValueType":"Minimum Value Type","MinimumValueTypeTooltip":" Choose the expression type for the starting value of the chart. It could be a decimal number or a property of type decimal.","MinimumValue":"Minimum Value","MinimumValuePathTooltip":"Choose a property representing the starting value for the chart","MinimumValueTooltip":"Choose a decimal number representing the starting value for the chart","DeviationLowValue":"Critically Low Threshold","DeviationLowValueTooltip":"Values below this threshold are displayed as critical","DeviationHighValue":"Critically High Threshold","DeviationHighValueTooltip":"Values above this threshold are displayed as critical","ToleranceLowValue":"Warning Low Threshold","ToleranceLowValueTooltip":"Values below this threshold are displayed as warnings","ToleranceHighValue":"Warning High Threshold","ToleranceHighValueTooltip":"Values above this threshold are displayed as warnings","CriticalityRepresentationWithIcon":"With Icon","CriticalityRepresentationWithoutIcon":"Without Icon","Contact":"Contact Name","ContactTooltip":"Property representing the full name of the contact","JobTitle":"Job Title","JobTitleTooltip":"Choose a string property indicating the job title of the contact","Photo":"Photo","PhotoTooltip":"Choose a property representing the link to the photo assigned to the contact","Role":"Role","RoleTooltip":"Choose a property representing the role of the contact","Department":"Department","DepartmentTooltip":"Choose a property representing the organization of the contact","Address":"Address","AddressTooltip":"Define one or more addresses for the contact","AddressRowTitle":"Address","AddressAddNewRowTitle":"Add Address","Street":"Street","City":"City","Region":"State/Province","PostalCode":"Postal Code","Country":"Country","Phone":"Phone","PhoneList":"Phone","PhoneListTooltip":"Define one or more phone numbers for the contact","PhoneAddNewRowTitle":"Add Phone Number","PhoneType":"Type","Work":"Work","Mobile":"Mobile","Fax":"Fax","Preferred":"Preferred","Email":"Email","EmailList":"Email","EmailListTooltip":"Define one or more email addresses for the contact","EmailAddNewRowTitle":"Add Email Address","DisplayOnDemand":"Display on Demand","DisplayOnDemandTooltip":"Define if the section should be displayed only after the user presses the Show More button","SectionDisplayedOnDemand":"Section is displayed on demand.","SectionDisplayedAlways":"Section is always displayed.","ReadonlyTooltipMultilineText":"Text is defined as multiline text and cannot be changed. Use \'Edit in source code\' to update it in the source file.","ReadonlyTooltipAnnoInSiblingApp":"Element defined in a different app \'{{appName}}\' cannot be updated from the current app. Open the page editor for the source app or use \'Edit in source code\' to update it in the source file.","ReadonlyTooltipAnnoChangeInSiblingApp":"Modifying the element would lead to changes in a different app \'{{appName}}\' hence it cannot be updated from the current app. Open the page editor for an app \'{{appName}}\' or use \'Edit in source code\' to update it in the source file.","ReadonlyTooltipAnnoParentChangeInSiblingApp":"Parent element defined in the different app \'{{appName}}\' hence the property cannot be defined from the current app. Open the page editor for the source app or use \'Edit in source code\' to update it in the source file.","ReadonlyTooltipMeasureUnitOnBase":"Measures and currencies defined in the base layer should not be changed on the app layer. To change the value on the base layer, use \'Edit in source code\'.","ReadonlyTooltipMicroChartType":"Micro chart type cannot be updated independent of other chart properties. Add a new micro chart of the desired type instead.","ReadonlyTooltipMicroChartValue":"Micro chart value cannot be updated directly. Add a new micro chart for the desired value instead.","ReadonlyTooltipContactFullName":"Contact Name cannot be updated directly. Add a contact with the desired name instead.","ReadOnlyTooltipTextArrangement_TextValueIsTooComplex":"Text Arrangement cannot be updated because application modeler does not yet support Text property value. Use the \'Edit in source code\' button to define the Text Arrangement for it in the code editor.","ReadOnlyTooltipTextArrangement_NoTextAnnotation":"Text Arrangement cannot be defined until Text is set. Choose the value in the Text field to enable the Text Arrangement.","ReadOnlyTooltipTextArrangement_NotApplicable":"Text Arrangement is not applicable. Choose the value in the Text field to enable the Text Arrangement.","ReadonlyTooltipLabelOnInvalidPath":"Label for a nonexistent property cannot be changed","ReadonlyTooltipVisualFilterChartType":"Chart type of a visual filter cannot be updated independently. Remove the visual filter and create a new one with a different chart type.","ReadOnlyTooltipDominatingPropInitial":"Value cannot be defined before \'{{propertyLabel}}\'.","ReadonlyTooltipNoDeletionForLast":"The default chart view needs to contain at least one dimension and one measure.","DeletionDisablesTooltipBaseAnnotation":"A measure cannot be deleted. It represents an annotation that is not in the local annotation file.","DeletionDisablesTooltipDifferentAppAnnotation":"A measure cannot be deleted. It represents an annotation that is defined in a different app \'{{appName}}\'.","DeletionDisablesTooltipAnnotationInUse":"A measure cannot be deleted. It represents an annotation that is still referenced.","DeletionDisablesTooltipAnnotationInUseOnce":"A measure cannot be deleted. It is still used in the annotation {{annoPath}}","DeletionDisabledTooltipCustomMeasure":"Custom measure cannot be deleted","DeletionDisabledTooltipServiceDimension":"Dimension cannot be deleted","DisableMenuTooltipIdentification":"The identification section is already defined","DisableMenuTooltipTooManyAssociationsTable":"Page entity does not have \'to many\' associations with other entities","DisableMenuTooltipTooManyAssociationsChart":"Page entity does not have \'to many\' associations with other entities enabled with custom aggregations","DisableMenuTooltipAction":"No actions are defined in the service, and the entity or all actions are already used","DisableMenuTooltipBasicColumn":"All basic columns are already added","DisableMenuTooltipNumericProperty":"All numeric properties are already used","DisableMenuTooltipNumericNoPropertyDefined":"Entity does not have any numeric properties defined","DisableMenuTooltipFields":"All basic columns have already been added","DisableMenuTooltipVisualFiltersNoAnalytics":"No visual filters are possible: no entity was found that is enabled for analytics","DisableMenuTooltipVisualFiltersNoFields":"No filter field was found that is suitable for creating a visual filter","DisabledMenuTooltipChart":"Entity does not have any numeric properties defined, or all numeric properties are already used","DataPointValueTooltip":"Property representing the value in DataPoint","ReadonlyTooltipDataPointValue":"DataPoint value cannot be updated directly","ScaleFactor":"Scale Factor","ScaleFactorTooltip":"Choose the scale suitable for the expected values. To allow for automatic determination, choose None.","ScaleFactorKilo":"x1000 (K)","ScaleFactorMillion":"x1000000 (M)","ScaleFactorBillion":"x1000000000 (B)","ScaleFactorTera":"x1000000000000 (T)","Digits":"Number of Fractional Digits","DigitsTooltip":"You can specify 1 or 2 decimal places to be displayed for the measure. Note that for a currency-based measure, the number of decimal places, as specified here, is only considered if the Scale Factor is defined. Otherwise, the number of decimal places is based on the currency.","MeasureNameTooltip":"Technical name of the measure","MeasureLabelTooltip":"Human-readable label for the measure to be displayed in the app","MeasurePropertyTooltip":"Use a property aggregated as a measure","MeasureAggregationMethodTooltip":"The method used to aggregate data","MeasureShowAsDefaultTooltip":"Apply measure to chart by default","NoMixedCustomAndDynamicTransformationMeasures":"You cannot mix custom and standard transformation measures","LastDefaultMeasureCannotBeMovedDown":"The last default measure cannot be moved down","LastDefaultDimensionCannotBeMovedDown":"The last default dimension cannot be moved down","OnlyDefaultMeasuresAreReorderable":"Only default measures can be moved","OnlyDefaultDimensionsAreReorderable":"Only default dimensions can be moved","TooComplexRowNotReorderable":"Row reordering is not supported. Use \'Edit in source code\' to update it in the source file.","TooComplexRowNotDeletable":"Row deletion is not supported. Use \'Edit in source code\' to update it in the source file.","VisualFilterAddTooltip":"Add a visual filter","VisualFilterSortOrder":"Sort Order","VisualFilterChartTypeTooltip":"Type of chart used as a visual filter","VisualFilterMeasuresTooltip":"Measure representing the y-axis value of the chart","VisualFilterDimensionsTooltip":"Filter field representing the x-axis value of the chart","VisualFilterSortOrderTooltip":"Sort order of the chart data","VisualFilterSelection":"Fixed Values","VisualFilterSelectionTooltip":"Choose filters restricting the records on the visual filter chart","VisualFilterSelectionAddRow":"Add Filters","SemanticObjectName":"Semantic Object Name","SemanticObjectAction":"Semantic Object Action","Mapping":"Mapping","SemanticObjectProperty":"Semantic Object Property","LocalProperty":"Local Property","RequiresContext":"Requires context","SemanticObjectTooltip":"To enable navigation to a different app, enter the semantic object name as defined in the inbound navigation of the target app.","SemanticObjectPropertyName":"Semantic Object Property Mapping","SemanticObjectPropertyNameTooltip":"If the semantic object property in the target app is different from this one, provide the name of the semantic object property in the target app.","SemanticObjectOnBaseReadonlyTooltip":"Semantic objects (and mapping) defined in the base layer should not be changed on the app layer. To change the value on the base layer, use \'Edit in source code\'.","SemanticObjectNameTooltip":"Name of the relevant semantic object in the target app","SemanticObjectActionTooltip":"Name of the relevant action for the semantic object as defined in the SAP Fiori launchpad configuration","MappingTooltip":"If the semantic object name in the target app differs from the respective property in the current app, provide the name of the semantic object property in the target app and choose the matching property in the current app to define the mapping.","SemanticObjectPropertyTooltip":"The name of the property used as a semantic object in the target apps","LocalPropertyTooltip":"The local property mapping the semantic object in the target app","RequiresContextTooltip":"Define whether this action requires context and stays disabled until a relevant record is selected (on) or is enabled all the time (off)","SemanticMapAddNewRowTitle":"Add Semantic Mapping","SemanticMapTitle":"Semantic Mapping","CrossAppNavigationInfo":"Cross-app navigation is to be enabled in the SAP Fiori launchpad and target app","ContextRequired":"Context required","ContextNotRequired":"Context not required","MessageAdditionalValueHelpVariants":"Additional value help variants apply","ReadOnlyTooltipHideByProperty_Hidden":"Defines if the UI element is hidden in the application UI. Once you have activated the Hidden feature with the toggle button, the Hide by Property field is displayed below the current field to let you set the condition for hiding.","ReadOnlyTooltipHideByProperty_HiddenIsTrue":" You cannot define the Hide by Property if Hidden is false. Set Hidden to true to enable the Hide by Property.","ReadOnlyTooltipHideByProperty_NotApplicable":"You cannot define the Hide by Property if there is no boolean property available"}')},71466:e=>{"use strict";e.exports=JSON.parse('{"value_is_required":"A value is required","incomplete_use_CC_or_slash_or_dot":"Incomplete \'{{name}}\'. Use code completion or add \'.\' or \'/\' and select the next segment.","missing_required_value_for_$Type":"A value is required for \'$Type\'","Property_is_not_allowed_here":"Property is not allowed here \'{{name}}\'","Vocabulary_0_is_already_specified_in_line_1":"Vocabulary \'{{vocabulary}}\' is already specified for this annotation term in line {{line}}","Annotation_0_is_not_available_in_vocabulary_1":"Annotation \'{{term}}\' is not available in vocabulary \'{{alias}}\'","Term_0_cannot_be_applied_for_target_kind_1_It_can_be_applied_to_2":"Term \'{{name}}\' cannot be applied for target kind \'{{wrong}}\'. It can be applied to \'{{correct}}\'","Term_0_is_not_in_applicable_term_constraint_allowed_terms_are_1":"\'{{name}}\' cannot be applied in the current context. Use code completion to see the applicable terms.","Element_0_not_allowed_here_collection_1":"\'{{name}}\' not allowed here. Expected: Collection(\'{{type}}\')","Element_0_not_allowed_here_1":"\'{{name}}\' not allowed here. Expected: \'{{type}}\'","Function_0_not_allowed_here_collection_1":"\'{{name}}\' not allowed here. Required result type: Collection(\'{{type}}\')","Function_0_not_allowed_here_1":"\'{{name}}\' not allowed here. Required result type: \'{{type}}\'","incomplete_use_slash":"Incomplete \'{{name}}\'. Add \'/\' and select the next segment.","incomplete_use_dot":"Incomplete \'{{name}}\'. Add \'.\' and select the next segment.","Invalid_path_for_0_expression_using_statement":"\'{{name}}\' expression \'{{value}}\' is invalid or its source is not referenced with the \'using...\' directive statement in this file.  Check: {{value}}","path-value_is_required":"Incomplete \'{{name}}\'. Use code completion to select a value.","Missing_i18n_value":"\'{{value}}\' is not a valid translation reference. Translation reference must match the format \'{i18n>textKey}\' where textKey is translation ID defined in i18n file.","Invalid_enum_value_0":"Invalid enum value \'{{value}}\'","Did_you_mean_0":"Did you mean \'{{proposedValue}}\'?","Element_0_and_subnodes_are_not_validated":"\'{{name}}\' and its subnodes are not validated by this version of CDS Language Server","Path_0_leads_to_1_The_path_should_lead_to_type_2":"Path {{pathValue}} leads to {{abstractName}}. The path should lead to type {{expectedType}}.","Path_0_leads_to_1_The_path_should_lead_to_a_collection_representing_2":"Path {{pathValue}} leads to {{abstractName}}. The path should lead to a collection of type representing {{expressionName}}.","Path_0_leads_to_1_The_path_should_lead_to_type_representing_2_3":"Path {{pathValue}} leads to {{abstractName}}. The path should lead to a type representing {{expressionName}} (e.g. {{expectedType}} )"}')},52673:e=>{"use strict";e.exports=JSON.parse('{"Property_is_not_allowed_here":"Property is not allowed here \'{{name}}\'","The_attribute_value_must_be_a_string_literal":"The attribute value must be a string literal","Wrong_element_0_Did_you_mean_1":"Wrong element \'{{currentValue}}\'. Did you mean \'{{proposedValue}}\'?","Mandatory_property_not_provided_0":"Mandatory property not provided: {{property}}","Path_escaping_brackets_should_be_used":"Path escaping brackets ![] should be used","Wrong_path_separator_0_Did_you_mean_1":"Wrong path separator \'{{currentValue}}\'. Did you mean \'{{proposedValue}}\'?"}')},74316:e=>{"use strict";e.exports=JSON.parse('{"Text_Key":"Text Key","Text_Value":"Text Value","Additional_Information":"Additional Information"}')},47473:e=>{"use strict";e.exports=JSON.parse('{"ERROR_SPECIFICATION_MISSING":"Seems specification package is missing. Please execute command \'npm i @sap/ux-specification --save-dev\' in root (where package.json is) of your project. \'{{- root}}\'.","ERROR_VOCABULARY_NOT_FOUND":"Vocabulary not found! namespace: {{namespace}}, uri: {{- uri}} ","ERROR_READING_METADATA":"Error while reading service metadata {{path}}. Error was: {{error}}","ERROR_METADATA_NOT_FOUND":"There is no valid metadata file in this project","ERROR_SERVICE_NOT_FOUND":"Service for uri: \'{{- uri}}\' not found. Available services: {{- services}}","ERROR_READING_CAP_SERVICE_METADATA":"Error while reading CAP service metadata. Path: {{- root}}, service uri: {{- uri}}, error: {{- error}}","ERROR_PROJECT_ROOT_WORKSPACE":"Error while trying to find project in workspace root {{root}}. Error was: {{error}}","ERROR_INVALID_PACKAGE_JSON":"Found invalid package.json. {{error}}","ERROR_INVALIND_PACKAGE_JSON_FOR_APP":"Found invalid package.json in \'{{- root}}\'","ERROR_REQUIRED_APP":"Application ID required.","ERROR_INVALID_APP_ID":"Invalid application ID.","CONSOLE_SHOULD_NOT_BE_HERE":"Should not be here \' {{currentValue}}","ERROR_LOADING_ANNOTATIONS_FROM_CAP":"Loading annotations from CAP project failed. {{error}}","ERROR_LOADING_ANNOTATIONS":"Loading annotations failed. {{error}}","ERROR_DEL_CAP_APP_SAPUX":"Property \'sapux\' in \'{{- packageJsonPath}}\' is not an array. Leaving..","ERROR_DEL_CAP_APP_MODIFY_CDS":"Could not modify file \'{{- cdsFilePath}}\'. Skipping this file.","INFO_DEL_CAP_APP":"Deleting app \'{{appName}}\' from CAP project \'{{- projectRoot}}\'.","INFO_DEL_LAST_CAP_APP":"This was the last app in this CAP project. Deleting property \'sapux\' from \'{{- packageJsonPath}}\'.","INFO_DEL_CAP_APP_FILE_UPDATED":"File \'{{- packageJsonPath}}\' updated.","INFO_DEL_CAP_APP_DIR_DELETED":"Directory \'{{- appPath}}\' deleted.","INFO_DEL_CAP_APP_DELETE_USING":"Removing using statement for \'./{{appName}}/annotations\' from \'{{- cdsFilePath}}\'.","INFO_DEL_CAP_APP_DEL_CDS":"File \'{{- cdsFilePath}}\' is now empty, removing it.","INFO_DEL_CAP_APP_FOLDER_EMPTY":"Directory \'{{- appPath}}\' is now empty. Deleting it.","ERROR_DETAIL_PROJECT_TYPE":"Cannot determine project type for app \'{{- appRoot}}\' with project root \'{{- projectRoot}}\'","ERROR_UI5_YAML_PARSING":"Cannot parse ui5 config file \'{{- filePath}}\'. Cause - \'{{- parsingError}}\'","ERROR_UI5_YAML_DYNAMIC_CFG_IMPORT":"Cannot import dynamic config from \'{{- filePath}}\', defined in - \'{{- yamlFile}}\'","ERROR_UI5_YAML_MISSING":"This project is not configured to use mockserver. To preview the data in the application, add mockserver config from the application info page","ERROR_RESOLVING_I18N_BUNDLES":"Error resolving i18n bundles: \'{{- error}}\'"}')},11109:e=>{"use strict";e.exports=JSON.parse('{"declaration":{"attributes":{"version":"1.0","encoding":"utf-8"}},"elements":[{"type":"element","name":"edmx:Edmx","attributes":{"xmlns:edmx":"http://docs.oasis-open.org/odata/ns/edmx","Version":"4.0"},"elements":[{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Core.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Core","Namespace":"Org.OData.Core.V1"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Aggregation.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Aggregation","Namespace":"Org.OData.Aggregation.V1"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Validation.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Validation","Namespace":"Org.OData.Validation.V1"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://sap.github.io/odata-vocabularies/vocabularies/Common.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Namespace":"com.sap.vocabularies.Common.v1","Alias":"Common"}}]},{"type":"element","name":"edmx:DataServices","elements":[{"type":"element","name":"Schema","attributes":{"xmlns":"http://docs.oasis-open.org/odata/ns/edm","Namespace":"com.sap.vocabularies.Analytics.v1","Alias":"Analytics"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Terms for annotating analytical resources"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","Qualifier":"Published"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"2017-02-15 © Copyright 2013 SAP AG. All rights reserved"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Links"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"latest-version"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/Analytics.xml"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"alternate"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/Analytics.json"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"describedby"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://github.com/sap/odata-vocabularies/blob/main/vocabularies/Analytics.md"}}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"Dimension","Type":"Core.Tag","BaseTerm":"Aggregation.Groupable","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Deprecated in favor of [`AnalyticalContext/Dimension`](#AnalyticalContext)"}}]}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A property holding the key of a dimension in an analytical context"}}]},{"type":"element","name":"Term","attributes":{"Name":"Measure","Type":"Core.Tag","BaseTerm":"Aggregation.Aggregatable","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Deprecated in favor of [`AnalyticalContext/Measure`](#AnalyticalContext)"}}]}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A property holding the numeric value of a measure in an analytical context"}}]},{"type":"element","name":"Term","attributes":{"Name":"AccumulativeMeasure","BaseTerm":"Analytics.Measure","Type":"Core.Tag","Nullable":"false","DefaultValue":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Deprecated in favor of [`AnalyticalContext/AccumulativeMeasure`](#AnalyticalContext)"}}]}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The measure has non-negative and additive values; it can be used in whole-part charts, e.g. the Donut"}}]},{"type":"element","name":"Term","attributes":{"Name":"RolledUpPropertyCount","Type":"Edm.Int16","Nullable":"false"},"elements":[{"type":"comment","comment":" instance annotation "},{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Number of properties in the entity instance that have been aggregated away"}}]},{"type":"element","name":"Term","attributes":{"Name":"DrillURL","Type":"Edm.String","AppliesTo":"EntityType","Nullable":"false"},"elements":[{"type":"comment","comment":" metadata annotation that can also appear as instance annotation "},{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"\\n            URL to retrieve more detailed data related to a node of a recursive hierarchy.\\n            Annotations with this term MUST include a qualifier to select the hierarchy for which the drill URL is provided.\\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}}]},{"type":"element","name":"Term","attributes":{"Name":"PlanningAction","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"ActionImport"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":" Processes or generates plan data. Its logic may have side-effects on entity sets.\\n          "}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"AggregatedProperties","Type":"Collection(Analytics.AggregatedPropertyType)","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Deprecated in favor of [`AggregatedProperty`](#AggregatedProperty)"}}]}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Dynamic properties for aggregate expressions with specified aggregation method defined on the annotated entity type."}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"\\n            Other annotations may refer in property paths to dynamic properties declared in any AgrgegatedProperties annotation of the \\n            given entity type to leverage the results of the aggregate expression determined in the context of an entity collection of \\n            the annotated type.\\n          "}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"AggregatedProperty","Type":"Analytics.AggregatedPropertyType","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Dynamic property for aggregate expression with specified aggregation method defined on the annotated entity type."}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"AggregatedPropertyType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"Name","Type":"Core.SimpleIdentifier","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the dynamic property holding the aggregated value."}}]},{"type":"element","name":"Property","attributes":{"Name":"AggregationMethod","Type":"Aggregation.AggregationMethod","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the standard or custom aggregation method to be applied."}}]},{"type":"element","name":"Property","attributes":{"Name":"AggregatableProperty","Type":"Edm.PropertyPath","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property whose values shall be aggregated."}}]},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Common.Label"}]},{"type":"comment","comment":" more in the future as needed "}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"AnalyticalContext","Type":"Collection(Analytics.AnalyticalContextType)","Nullable":"false","AppliesTo":"Collection"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.AppliesViaContainer"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection of properties that define an analytical context"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"AnalyticalContextType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Exactly one of `Property` and `DynamicProperty` must be present"}},{"type":"element","name":"Property","attributes":{"Name":"Property","Type":"Edm.PropertyPath"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property that is part of the analytical context"}}]},{"type":"element","name":"Property","attributes":{"Name":"DynamicProperty","Type":"Edm.AnnotationPath"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Dynamic property introduced by annotations that is part of the analytical context"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Analytics.AggregatedProperty"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Aggregation.CustomAggregate"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Dimension","Type":"Core.Tag","Nullable":"false","DefaultValue":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The property holds the key of a dimension"}}]},{"type":"element","name":"Property","attributes":{"Name":"Measure","Type":"Core.Tag","Nullable":"false","DefaultValue":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The property holds the numeric value of a measure"}}]},{"type":"element","name":"Property","attributes":{"Name":"AccumulativeMeasure","Type":"Core.Tag","Nullable":"false","DefaultValue":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The measure has non-negative and additive values; it can be used in whole-part charts, e.g. the Donut"}}]}]},{"type":"element","name":"Annotations","attributes":{"Target":"Aggregation.CustomAggregate"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Adding a list of other terms that can be annotated to it."}},{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Common.Label"}]},{"type":"comment","comment":" more in the future as needed "}]}]}]}]}]}]}]}')},20762:e=>{"use strict";e.exports=JSON.parse('{"declaration":{"attributes":{"version":"1.0","encoding":"utf-8"}},"elements":[{"type":"element","name":"edmx:Edmx","attributes":{"xmlns:edmx":"http://docs.oasis-open.org/odata/ns/edmx","Version":"4.01"},"elements":[{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Core.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Core","Namespace":"Org.OData.Core.V1"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://sap.github.io/odata-vocabularies/vocabularies/Common.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Namespace":"com.sap.vocabularies.Common.v1","Alias":"Common"}}]},{"type":"element","name":"edmx:DataServices","elements":[{"type":"element","name":"Schema","attributes":{"xmlns":"http://docs.oasis-open.org/odata/ns/edm","Namespace":"com.sap.vocabularies.CodeList.v1","Alias":"CodeList"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Terms for Code Lists"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","Qualifier":"Published"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"2018-12-04 © Copyright 2018 SAP SE. All rights reserved"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Links"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"latest-version"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/CodeList.xml"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"alternate"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/CodeList.json"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"describedby"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://github.com/sap/odata-vocabularies/blob/main/vocabularies/CodeList.md"}}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"CurrencyCodes","Type":"CodeList.CodeListSource","Nullable":"false","AppliesTo":"EntityContainer"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"An entity set containing the code list for currencies"}}]},{"type":"element","name":"Term","attributes":{"Name":"UnitsOfMeasure","Type":"CodeList.CodeListSource","Nullable":"false","AppliesTo":"EntityContainer"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"An entity set containing the code list for units of measure"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"CodeListSource"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"An entity set containing the code list for currencies"}},{"type":"element","name":"Property","attributes":{"Name":"Url","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"URL of a CSDL document describing an entity set for a code list"}}]},{"type":"element","name":"Property","attributes":{"Name":"CollectionPath","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the entity set for the code list"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"StandardCode","Type":"Edm.PropertyPath","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property containing standard code values"}}]},{"type":"element","name":"Term","attributes":{"Name":"ExternalCode","Type":"Edm.PropertyPath","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property containing code values that can be used for visualization"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The annotated property contains values that are not intended for visualization and should thus stay hidden from end-users. Instead the values of the referenced properties are used for visualization."}}]},{"type":"element","name":"Term","attributes":{"Name":"IsConfigurationDeprecationCode","Type":"Edm.Boolean","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property contains a Configuration Deprecation Code"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The Configuration Deprecation Code indicates whether a code list value is valid (deprecation code is empty/space), deprecated (deprecation code `W`), or revoked (deprecation code `E`). "}]}]}]}]}]}]}]}')},1106:e=>{"use strict";e.exports=JSON.parse('{"declaration":{"attributes":{"version":"1.0","encoding":"utf-8"}},"elements":[{"type":"element","name":"edmx:Edmx","attributes":{"xmlns:edmx":"http://docs.oasis-open.org/odata/ns/edmx","Version":"4.0"},"elements":[{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Core.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Core","Namespace":"Org.OData.Core.V1"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Validation.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Validation","Namespace":"Org.OData.Validation.V1"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Aggregation.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Aggregation","Namespace":"Org.OData.Aggregation.V1"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://sap.github.io/odata-vocabularies/vocabularies/UI.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Namespace":"com.sap.vocabularies.UI.v1","Alias":"UI"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://sap.github.io/odata-vocabularies/vocabularies/Analytics.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Namespace":"com.sap.vocabularies.Analytics.v1","Alias":"Analytics"}}]},{"type":"element","name":"edmx:DataServices","elements":[{"type":"element","name":"Schema","attributes":{"xmlns":"http://docs.oasis-open.org/odata/ns/edm","Namespace":"com.sap.vocabularies.Common.v1","Alias":"Common"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Common terms for all SAP vocabularies"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","Qualifier":"Published"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"2017-02-15 © Copyright 2013 SAP SE. All rights reserved."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Links"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"latest-version"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/Common.xml"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"alternate"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/Common.json"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"describedby"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://github.com/sap/odata-vocabularies/blob/main/vocabularies/Common.md"}}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"Experimental","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"comment","comment":" can be used without value "},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Terms, types, and properties annotated with this term are experimental and can be changed incompatibly or removed completely any time without prior warning."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Do not use or rely on experimental terms, types, and properties in production environments."}]}]}]},{"type":"comment","comment":" Section: Versioning "},{"type":"element","name":"Term","attributes":{"Name":"ServiceVersion","Type":"Edm.Int32","Nullable":"false","AppliesTo":"Schema"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"1 for first version of a service, incremented when schema changes incompatibly and service is published with a different URI"}}]},{"type":"element","name":"Term","attributes":{"Name":"ServiceSchemaVersion","Type":"Edm.Int32","Nullable":"false","AppliesTo":"Schema"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"0 for first schema version within a service version, incremented when schema changes compatibly"}}]},{"type":"comment","comment":" Section: General Semantics "},{"type":"element","name":"Term","attributes":{"Name":"Label","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A short, human-readable text suitable for labels and captions in UIs"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}}]},{"type":"element","name":"Term","attributes":{"Name":"Heading","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A short, human-readable text suitable for column headings in UIs"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}}]},{"type":"element","name":"Term","attributes":{"Name":"QuickInfo","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A short, human-readable text suitable for tool tips in UIs"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}}]},{"type":"element","name":"Term","attributes":{"Name":"Text","Type":"Edm.String","Nullable":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A descriptive text for values of the annotated property. Value MUST be a dynamic expression when used as metadata annotation."}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"UI.TextArrangement"}]}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"TextFor","Type":"Edm.PropertyPath","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The annotated property contains a descriptive text for values of the referenced property."}}]},{"type":"element","name":"Term","attributes":{"Name":"ExternalID","Type":"Edm.String","Nullable":"true","AppliesTo":"Property Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A human readable identifier for values of the annotated property or parameter. Value MUST be a dynamic expression when used as metadata annotation."}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"If the annotated property is (part of) a foreign key of a resource, the external id is a human readable (part of an) identifier of this resource.\\n            There is a one-to-one relationship between each possible value of the annotated property and the corresponding external id.\\n            The annotation of a parameter refers to a property of the operation binding parameter."}]}]}]},{"type":"comment","comment":"\\n      <Term Name=\\"ExternalIDs\\" Type=\\"Collection(Edm.String)\\" Nullable=\\"true\\" AppliesTo=\\"Property\\">\\n        <Annotation Term=\\"Common.Experimental\\" />\\n        <Annotation Term=\\"Core.Description\\" String=\\"A list of parts of a human readable identifier for values of the annotated property. Value MUST be a dynamic expression when used as metadata annotation.\\" />\\n        <Annotation Term=\\"Core.LongDescription\\" String=\\"If the annotated property is (part of) a foreign key of a resource, the collection of external ids constitutes a human readable (part of an) identifier of this resource. There is a one-to-one relationship between each possible value of the annotated property and the corresponding collection of external ids.\\" />\\n      </Term>\\n      "},{"type":"element","name":"Term","attributes":{"Name":"IsLanguageIdentifier","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"An identifier to distinguish multiple texts in different languages for the same entity"}}]},{"type":"element","name":"Term","attributes":{"Name":"TextFormat","Type":"Common.TextFormatType","Nullable":"false","AppliesTo":"Property Parameter ReturnType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The annotated property, parameter, or return type contains human-readable text that may contain formatting information"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}}]},{"type":"element","name":"EnumType","attributes":{"Name":"TextFormatType"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"plain"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Plain text, line breaks represented as the character 0x0A"}}]},{"type":"element","name":"Member","attributes":{"Name":"html"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Plain text with markup that can validly appear directly within an HTML DIV element"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"Timezone","Type":"Edm.String","Nullable":"true","AppliesTo":"Property Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The point in time represented by the annotated property or parameter shall be interpreted in the given time zone"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Time zones shall be specified according to the [IANA](https://www.iana.org/time-zones) standard.\\n            If this annotation is absent or null or an empty string, points in time are typically interpreted in the current user\'s or default time zone.\\n            The annotation value can be a path expression resolving to a property that may be tagged with [`IsTimezone`](#IsTimezone)."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.DateTimeOffset"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsTimezone","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Annotated property or parameter is a time zone"}}]},{"type":"comment","comment":" under discussion\\n        <Term Name=\\"ValidationConstraint\\" Type=\\"Common.ValidationConstraintType\\" Nullable=\\"false\\" AppliesTo=\\"Property EntityType ComplexType\\">\\n        <Annotation Term=\\"Core.Description\\" String=\\"Condition that the annotation target has to fulfill\\" />\\n        </Term>\\n        <ComplexType Name=\\"ValidationConstraintType\\">\\n        <Property Name=\\"FailureMessage\\" Type=\\"Edm.String\\" Nullable=\\"true\\">\\n        <Annotation Term=\\"Core.IsLanguageDependent\\" />\\n        </Property>\\n        <Property Name=\\"Condition\\" Type=\\"Edm.Boolean\\" Nullable=\\"false\\">\\n        <Annotation Term=\\"Core.Description\\"\\n        String=\\"Value MUST be a dynamic expression that evaluates to true if and only if the constraint is fulfilled\\" />\\n        </Property>\\n        </ComplexType>\\n      "},{"type":"comment","comment":" Examples:\\n        <Annotation Term=\\"Common.ValidationConstraint\\" Qualifier=\\"Comparison\\">\\n        <Record>\\n        <PropertyValue Property=\\"FailureMessage\\" String=\\"Start date cannot be after end date\\" />\\n        <PropertyValue Property=\\"Condition\\">\\n        <Le>\\n        <Path>StartDate</Path>\\n        <Path>EndDate</Path>\\n        </Le>\\n        </PropertyValue>\\n        </Record>\\n        </Annotation>\\n\\n        <Annotation Term=\\"Common.ValidationConstraint\\" Qualifier=\\"Minimum\\">\\n        <Record>\\n        <PropertyValue Property=\\"FailureMessage\\" String=\\"Value cannot be negative\\" />\\n        <PropertyValue Property=\\"Condition\\">\\n        <Ge>\\n        <Path>Amount</Path>\\n        <Decimal>0</Decimal>\\n        </Ge>\\n        </PropertyValue>\\n        </Record>\\n        </Annotation>\\n      "},{"type":"comment","comment":"\\n        could later be combined with a client-side function sap.matchRegularExpression\\n        Two arguments of type string, second argument MUST evaluate to a JavaScript regular expression, see e.g.\\n        https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\\n        Function returns true if and only if the whole first argument matches the regular expression in the second argumentReturns\\n      "},{"type":"element","name":"Term","attributes":{"Name":"IsDigitSequence","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Contains only digits"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsUpperCase","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Contains just uppercase characters"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsCurrency","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Annotated property or parameter is a currency code"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsUnit","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Annotated property or parameter is a unit of measure"}}]},{"type":"element","name":"Term","attributes":{"Name":"UnitSpecificScale","Type":"Edm.PrimitiveType","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The number of fractional decimal digits of a currency amount or measured quantity"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The annotated property contains a currency code or unit of measure, and the annotation value specifies the default scale of numeric values with that currency code or unit of measure. Can be used in e.g. a list of available currency codes or units of measure, or a list of measuring devices to specify the number of fractional digits captured by that device."}}]},{"type":"element","name":"Term","attributes":{"Name":"UnitSpecificPrecision","Type":"Edm.PrimitiveType","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The number of significant decimal digits of a currency amount or measured quantity"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The annotated property contains a currency code or unit of measure, and the annotation value specifies the default precision of numeric values with that currency code or unit of measure. Can be used in e.g. a list of available currency codes or units of measure, or a list of measuring devices to specify the number of significant digits captured by that device."}}]},{"type":"element","name":"Term","attributes":{"Name":"SecondaryKey","AppliesTo":"EntityType","Type":"Collection(Edm.PropertyPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Use term `AlternateKeys` from the OASIS Core vocabulary instead"}}]}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The listed properties form a secondary key. Multiple secondary keys are possible using different qualifiers."}}]},{"type":"element","name":"Term","attributes":{"Name":"MinOccurs","AppliesTo":"NavigationProperty Property EntitySet Term Parameter","Type":"Edm.Int64","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The annotated set or collection contains at least this number of items"}}]},{"type":"element","name":"Term","attributes":{"Name":"MaxOccurs","AppliesTo":"NavigationProperty Property EntitySet Term Parameter","Type":"Edm.Int64","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The annotated set or collection contains at most this number of items"}}]},{"type":"element","name":"Term","attributes":{"Name":"AssociationEntity","Type":"Collection(Edm.NavigationPropertyPath)","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Entity representing an n:m association with attributes"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MinOccurs","Int":"2"}}]},{"type":"element","name":"Term","attributes":{"Name":"DerivedNavigation","Type":"Edm.NavigationPropertyPath","Nullable":"false","AppliesTo":"NavigationProperty"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Shortcut for a multi-segment navigation, contains the long path with all its segments"}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"Masked","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Use terms `MaskedValue` instead"}}]}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property contains sensitive data that should by default be masked on a UI and clear-text visible only upon user interaction"}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"MaskedValue","Type":"Edm.String","Nullable":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property contains sensitive data that is by default not transferred"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"By default a masked property is excluded from responses and instead an instance annotation with this term is sent, containing a masked value that can be rendered by user interfaces."}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"RevealOnDemand","Type":"Edm.Boolean","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Unmasked data for this property can be requested with custom query option `masked-values=false`"}}]},{"type":"element","name":"Term","attributes":{"Name":"SemanticObject","Type":"Edm.String","Nullable":"true","AppliesTo":"EntitySet EntityType Property NavigationProperty"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the Semantic Object represented as this entity type or identified by this property"}}]},{"type":"element","name":"Term","attributes":{"Name":"SemanticObjectMapping","BaseTerm":"Common.SemanticObject","Type":"Collection(Common.SemanticObjectMappingType)","Nullable":"false","AppliesTo":"EntitySet EntityType Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Maps properties of the annotated entity type or sibling properties of the annotated property to properties of the Semantic Object"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"This allows \\"renaming\\" of properties in the current context to match property names of the Semantic Object, e.g. `SenderPartyID` to `PartyID`. Only properties explicitly listed in the mapping are renamed, all other properties are available for intent-based navigation with their \\"local\\" name."}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"SemanticObjectMappingType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Maps a property of the annotated entity type or a sibling property of the annotated property to a property of the Semantic Object"}},{"type":"element","name":"Property","attributes":{"Name":"LocalProperty","Type":"Edm.PropertyPath","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Path to a local property that provides the value for the Semantic Object property"}}]},{"type":"element","name":"Property","attributes":{"Name":"SemanticObjectProperty","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the Semantic Object property"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"SemanticObjectUnavailableActions","BaseTerm":"Common.SemanticObject","Type":"Collection(Edm.String)","Nullable":"false","AppliesTo":"EntitySet EntityType Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"List of actions that are not available in the current state of the instance of the Semantic Object"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsInstanceAnnotation","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Term"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Term can also be used as instance annotation; AppliesTo of this term specifies where it can be applied"}}]},{"type":"comment","comment":" use Capabilities instead\\n      <Term Name=\\"Insertable\\" Type=\\"Edm.Boolean\\" Nullable=\\"false\\" DefaultValue=\\"true\\" AppliesTo=\\"NavigationProperty\\">\\n        <Annotation Term=\\"Common.Experimental\\" />\\n        <Annotation Term=\\"Common.IsInstanceAnnotation\\" />\\n        <Annotation Term=\\"Core.Description\\">\\n          <String>Specifies whether the service allows to create an entity by sending a POST request to the navigation link URL (in this case the created entity is automatically linked to the entity containing the navigation link)</String>\\n        </Annotation>\\n      </Term>\\n\\n      <Term Name=\\"Updatable\\" Type=\\"Edm.Boolean\\" Nullable=\\"false\\" DefaultValue=\\"true\\" AppliesTo=\\"EntityType\\">\\n        <Annotation Term=\\"Common.Experimental\\" />\\n        <Annotation Term=\\"Common.IsInstanceAnnotation\\" />\\n        <Annotation Term=\\"Core.Description\\">\\n          <String>Specifies whether the annotated entity can be updated</String>\\n        </Annotation>\\n      </Term>\\n\\n      <Term Name=\\"Deletable\\" Type=\\"Edm.Boolean\\" Nullable=\\"false\\" DefaultValue=\\"true\\" AppliesTo=\\"EntityType\\">\\n        <Annotation Term=\\"Common.Experimental\\" />\\n        <Annotation Term=\\"Common.IsInstanceAnnotation\\" />\\n        <Annotation Term=\\"Core.Description\\">\\n          <String>Specifies whether the annotated entity can be deleted</String>\\n        </Annotation>\\n      </Term>\\n      "},{"type":"element","name":"Term","attributes":{"Name":"FilterExpressionRestrictions","Type":"Collection(Common.FilterExpressionRestrictionType)","Nullable":"false","AppliesTo":"EntitySet"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"These properties only allow a subset of expressions"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Use term Capabilities.FilterRestrictions instead"}}]}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"FilterExpressionRestrictionType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Use term Capabilities.FilterRestrictions instead"}}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Property","Type":"Edm.PropertyPath"}},{"type":"element","name":"Property","attributes":{"Name":"AllowedExpressions","Type":"Common.FilterExpressionType"}}]},{"type":"element","name":"EnumType","attributes":{"Name":"FilterExpressionType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Use term Capabilities.FilterRestrictions instead"}}]}]}]},{"type":"element","name":"Member","attributes":{"Name":"SingleValue"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"a single \'eq\' clause"}}]},{"type":"element","name":"Member","attributes":{"Name":"MultiValue"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"one or more \'eq\' clauses, separated by \'or\'"}}]},{"type":"element","name":"Member","attributes":{"Name":"SingleInterval"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"at most one \'ge\' and one \'le\' clause, separated by \'and\', alternatively a single \'eq\' clause"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"FieldControl","Type":"Common.FieldControlType","DefaultValue":"Optional","AppliesTo":"Property Parameter Record EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Control state of a property, parameter, or the media stream of a media entity"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"This term can be used for static field control, providing an enumeration member value in $metadata, as well as dynamically, providing a `Path` expression.\\n\\nIn the dynamic case the property referenced by the `Path` expression MUST be of type `Edm.Byte` to accommodate OData V2 services as well as V4 infrastructures that don\'t support enumeration types."}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}}]},{"type":"element","name":"EnumType","attributes":{"Name":"FieldControlType","UnderlyingType":"Edm.Byte"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Control state of a property"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"When changes are requested, the value of this annotation in the before-image or after-image\\n          of the request plays a role. These may differ if the value is given dynamically in the metadata."}]}]},{"type":"element","name":"Member","attributes":{"Name":"Mandatory","Value":"7"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property is mandatory from a business perspective"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"A request that sets the property to its initial value or null fails entirely if this annotation is `Mandatory` in the after-image of the request.\\n\\n            This annotation value does not imply any restrictions on the value range of the property. For restricting the value range use e.g. the standard type facet `Nullable` with a value of `false` to exclude the `null` value, or terms from the [Validation vocabulary](https://github.com/oasis-tcs/odata-vocabularies/blob/main/vocabularies/Org.OData.Validation.V1.md)."}]}]}]},{"type":"element","name":"Member","attributes":{"Name":"Optional","Value":"3"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property may have a value"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"This value does not make sense as a static annotation value."}}]},{"type":"element","name":"Member","attributes":{"Name":"ReadOnly","Value":"1"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property value cannot be changed"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"A request to change the property to a value that differs from the before-image fails entirely\\n            according to [OData-Protocol, section 11.4.3](https://docs.oasis-open.org/odata/odata/v4.01/odata-v4.01-part1-protocol.html#sec_UpdateanEntity)\\n            if this annotation is given dynamically as `ReadOnly` in the before-image of the request.\\n\\n            To statically mark a property as read-only use term [Core.Computed](https://github.com/oasis-tcs/odata-vocabularies/blob/main/vocabularies/Org.OData.Core.V1.md#Computed) instead."}]}]}]},{"type":"element","name":"Member","attributes":{"Name":"Inapplicable","Value":"0"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property has no meaning in the current entity state"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"A request that sets the property to a non-initial non-null value fails entirely if this annotation is `Inapplicable` in the after-image of the request.\\n\\n            This value does not make sense as a static annotation value.\\n\\nExample for dynamic use: in a travel expense report the property `DestinationCountry` is inapplicable if trip type is domestic, and mandatory if trip type is international."}]}]}]},{"type":"element","name":"Member","attributes":{"Name":"Hidden","Value":"0"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Deprecated synonym for Inapplicable, do not use"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"To statically hide a property on a UI use [UI.Hidden](UI.md#Hidden) instead"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"ExceptionCategory","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A machine-readable exception category"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}}]},{"type":"element","name":"Term","attributes":{"Name":"Application","Type":"Common.ApplicationType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"..."}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ApplicationType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Property","attributes":{"Name":"Component","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Software component of service implementation"}}]},{"type":"element","name":"Property","attributes":{"Name":"ServiceRepository","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"..."}}]},{"type":"element","name":"Property","attributes":{"Name":"ServiceId","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"..."}}]},{"type":"element","name":"Property","attributes":{"Name":"ServiceVersion","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"..."}}]}]},{"type":"element","name":"Term","attributes":{"Name":"Timestamp","Type":"Edm.DateTimeOffset","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"..."}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}}]},{"type":"element","name":"Term","attributes":{"Name":"TransactionId","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"..."}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}}]},{"type":"element","name":"Term","attributes":{"Name":"ErrorResolution","Type":"Common.ErrorResolutionType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Hints for resolving this error"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ErrorResolutionType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Property","attributes":{"Name":"Analysis","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Short hint on how to analyze this error"}}]},{"type":"element","name":"Property","attributes":{"Name":"Note","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Note for error resolution"}}]},{"type":"element","name":"Property","attributes":{"Name":"AdditionalNote","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Additional note for error resolution"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"Messages","Type":"Collection(Edm.ComplexType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection of end-user messages"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The name of the message type is service-specific, its structure components are identified by naming convention, following the names of the OData error response structure.\\n\\nThe minimum structure is\\n\\n- `code: Edm.String`\\n\\n- `message: Edm.String`\\n\\n- `target: Edm.String nullable`\\n\\n- `additionalTargets: Collection(Edm.String)`\\n\\n- `transition: Edm.Boolean`\\n\\n- `numericSeverity: Edm.Byte`\\n\\n- `longtextUrl: Edm.String nullable`\\n          "}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"additionalTargets","Type":"Collection(Edm.String)","Nullable":"false","AppliesTo":"Record"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Additional targets for the message"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"This instance annotation can be applied to the `error` object and the objects within the `details` array of an OData error response"}}]},{"type":"element","name":"Term","attributes":{"Name":"longtextUrl","Type":"Edm.String","Nullable":"false","AppliesTo":"Record"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Location of the message long text"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"This instance annotation can be applied to the `error` object and the objects within the `details` array of an OData error response"}}]},{"type":"element","name":"Term","attributes":{"Name":"numericSeverity","Type":"Common.NumericMessageSeverityType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Classifies an end-user message as info, success, warning, or error"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"This instance annotation can be applied to the `error` object and the objects within the `details` array of an OData error response"}}]},{"type":"element","name":"Term","attributes":{"Name":"MaximumNumericMessageSeverity","Type":"Common.NumericMessageSeverityType","BaseTerm":"Common.Messages","Nullable":"true","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The maximum severity of all end-user messages attached to an entity, null if no messages are attached"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"This metadata annotation can be applied to entity types that are also annotated with term [`Common.Messages`](#Messages)"}}]},{"type":"element","name":"TypeDefinition","attributes":{"Name":"NumericMessageSeverityType","UnderlyingType":"Edm.Byte"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Classifies an end-user message as info, success, warning, or error"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedValues"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","Int":"1"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Success - no action required"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","Int":"2"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Information - no action required"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","Int":"3"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Warning - action may be required"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","Int":"4"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Error - action is required"}}]}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"IsActionCritical","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"true","AppliesTo":"Action Function ActionImport FunctionImport"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Criticality of the function or action to enforce a warning or similar before it\'s executed"}}]},{"type":"element","name":"Term","attributes":{"Name":"Attributes","Type":"Collection(Edm.PropertyPath)","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Attributes related to this property, which may occur in denormalized entity types"}}]},{"type":"element","name":"Term","attributes":{"Name":"RelatedRecursiveHierarchy","Type":"Edm.AnnotationPath","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A recursive hierarchy related to this property. The annotation path must end in Aggregation.RecursiveHierarchy."}}]},{"type":"element","name":"Term","attributes":{"Name":"Interval","Type":"Common.IntervalType","Nullable":"false","AppliesTo":"EntityType ComplexType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"An interval with lower and upper boundaries described by two properties"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"IntervalType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"LowerBoundary","Type":"Edm.PropertyPath","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property holding the lower interval boundary"}}]},{"type":"element","name":"Property","attributes":{"Name":"LowerBoundaryIncluded","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The lower boundary value is included in the interval"}}]},{"type":"element","name":"Property","attributes":{"Name":"UpperBoundary","Type":"Edm.PropertyPath","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property holding the upper interval boundary"}}]},{"type":"element","name":"Property","attributes":{"Name":"UpperBoundaryIncluded","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The upper boundary value is included in the interval"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"ResultContext","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The annotated entity type has one or more containment navigation properties.\\n            An instance of the annotated entity type provides the context required for determining\\n            the target entity sets reached by these containment navigation properties."}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"SAPObjectNodeType","Type":"Common.SAPObjectNodeTypeType","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The SAP Object Node Type represented by the annotated entity type"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"SAP Object Node Types define the structure of SAP Object Types, which are a generalization of Business Object, Technical Object, Configuration Object, and Analytical Object."}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"SAPObjectNodeTypeType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Information about an SAP Object Node Type"}},{"type":"element","name":"Property","attributes":{"Name":"Name","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The name of the SAP Object Node Type"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"Composition","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"NavigationProperty"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The annotated navigation property represents a logical composition, even though it is non-containment"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The entities related via this navigation property have an existential dependency on their composition parent. The entity set of the composition parent MUST contain a NavigationPropertyBinding for this navigation property."}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"SAPObjectNodeTypeReference","Type":"Edm.String","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The entity referenced by the annotated property has the [`SAPObjectNodeType`](#SAPObjectNodeType) with this name"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The entity containing the property and the entity referenced by it will in general have different SAP Object Node Types."}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"IsNaturalPerson","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"EntityType Annotation"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The annotated entity type (e.g. `Employee`) or annotation (e.g. `IsImageUrl`) represents a natural person"}}]},{"type":"comment","comment":" Section: Value Help "},{"type":"element","name":"Term","attributes":{"Name":"ValueList","Type":"Common.ValueListType","Nullable":"false","AppliesTo":"Property Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Specifies how to get a list of acceptable values for a property or parameter"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The value list can be based on user input that is passed in the value list request. The value list can be used for type-ahead and classical pick lists."}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ValueListType"},"elements":[{"type":"comment","comment":"\\n          Example: Value list for currency code using entity set Currencies with properties Code, Text, Symbol and more\\n          that are not needed in the value list\\n          - CollectionPath: Currencies\\n          - SearchSupported: true\\n          - Parameters:\\n          - - InOut: LocalDataProperty = CurrencyCode, ValueListPropert = Code\\n\\n          Example: Region within Country using entity set Regions with properties Code, Name, CountryCode\\n          - CollectionPath: Regions\\n          - SearchSupported: false\\n          - Parameters:\\n          - - InOut: LocalDataProperty = CountryCode, ValueListProperty = CountryCode\\n          - - InOut: LocalDataProperty = RegionCode, ValueListProperty = Code\\n        "},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Common.QuickInfo"}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Label","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Headline for value list, fallback is the label of the property or parameter"}}]},{"type":"element","name":"Property","attributes":{"Name":"CollectionPath","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Resource path of an OData collection with possible values, relative to CollectionRoot"}}]},{"type":"element","name":"Property","attributes":{"Name":"CollectionRoot","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Service root of the value list collection; not specified means local to the document containing the annotation"}}]},{"type":"element","name":"Property","attributes":{"Name":"DistinctValuesSupported","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Indicates that the value list supports a \'distinct\' aggregation on the value list properties defined via ValueListParameterInOut and ValueListParameterOut"}}]},{"type":"element","name":"Property","attributes":{"Name":"SearchSupported","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Value list supports the $search query option"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The value of the target property is used as the search expression instead of in $filter"}}]},{"type":"element","name":"Property","attributes":{"Name":"FetchValues","Type":"Common.FetchValuesType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Hint on when to fetch values"}}]},{"type":"element","name":"Property","attributes":{"Name":"PresentationVariantQualifier","Type":"Core.SimpleIdentifier"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Alternative representation of a value help, e.g. as a bar chart"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Qualifier for annotation with term [UI.PresentationVariant](UI.md#PresentationVariant) on the entity set identified via CollectionPath"}}]},{"type":"element","name":"Property","attributes":{"Name":"SelectionVariantQualifier","Type":"Core.SimpleIdentifier"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Optional combination of parameters and filters to query the value help entity set"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Qualifier for annotation with term [UI.SelectionVariant](UI.md#SelectionVariant) on the entity set identified via CollectionPath"}}]},{"type":"element","name":"Property","attributes":{"Name":"Parameters","Type":"Collection(Common.ValueListParameter)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Instructions on how to construct the value list request and consume response properties"}}]}]},{"type":"element","name":"TypeDefinition","attributes":{"Name":"FetchValuesType","UnderlyingType":"Edm.Byte"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Hint on when to fetch values"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedValues"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","Int":"1"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Fetch values immediately without filter"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","Int":"2"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Fetch values with a filter"}}]}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"ValueListRelevantQualifiers","Type":"Collection(Core.SimpleIdentifier)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"List of qualifiers of relevant ValueList annotations"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The value of this annotation is a dynamic expression for calculating the qualifiers of relevant value lists depending on the values of one or more other properties."}}]},{"type":"element","name":"Term","attributes":{"Name":"ValueListWithFixedValues","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"If specified as true, there\'s only one value list mapping and its value list consists of a small number of fixed values"}}]},{"type":"element","name":"Term","attributes":{"Name":"ValueListForValidation","Type":"Edm.String","Nullable":"false","AppliesTo":"Property Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Contains the qualifier of the ValueList or ValueListMapping that should be used for validation"}}]},{"type":"element","name":"Term","attributes":{"Name":"ValueListReferences","Type":"Collection(Edm.String)","Nullable":"false","AppliesTo":"Property Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A list of URLs of CSDL documents containing value list mappings for this parameter or property"}}]},{"type":"element","name":"Term","attributes":{"Name":"ValueListMapping","Type":"Common.ValueListMappingType","Nullable":"false","AppliesTo":"Property Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Specifies the mapping between data service properties and value list properties"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The value list can be filtered based on user input. It can be used for type-ahead and classical pick lists. There may be many alternative mappings with different qualifiers."}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ValueListMappingType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Common.QuickInfo"}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Label","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Headline for value list, fallback is the label of the property or parameter"}}]},{"type":"element","name":"Property","attributes":{"Name":"CollectionPath","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Resource path of an OData collection with possible values, relative to the document containing the value list mapping"}}]},{"type":"element","name":"Property","attributes":{"Name":"DistinctValuesSupported","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Indicates that the value list supports a \'distinct\' aggregation on the value list properties defined via ValueListParameterInOut and ValueListParameterOut"}}]},{"type":"element","name":"Property","attributes":{"Name":"FetchValues","Type":"Common.FetchValuesType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Hint on when to fetch values"}}]},{"type":"element","name":"Property","attributes":{"Name":"PresentationVariantQualifier","Type":"Core.SimpleIdentifier"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Alternative representation of a value help, e.g. as a bar chart"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Qualifier for annotation with term [UI.PresentationVariant](UI.md#PresentationVariant) on the value list entity set identified via CollectionPath in the ValueListReference annotation"}}]},{"type":"element","name":"Property","attributes":{"Name":"SelectionVariantQualifier","Type":"Core.SimpleIdentifier"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Optional combination of parameters and filters to query the value help entity set"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Qualifier for annotation with term [UI.SelectionVariant](UI.md#SelectionVariant) on the entity set identified via CollectionPath"}}]},{"type":"element","name":"Property","attributes":{"Name":"Parameters","Type":"Collection(Common.ValueListParameter)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Instructions on how to construct the value list request and consume response properties"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ValueListParameter","Abstract":"true"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"ValueListProperty","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Path to property in the value list . Format is identical to PropertyPath annotations."}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ValueListParameterIn","BaseType":"Common.ValueListParameter"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"LocalDataProperty","Type":"Edm.PropertyPath","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Path to property that is used to filter the value list with `eq` comparison"}}]},{"type":"element","name":"Property","attributes":{"Name":"InitialValueIsSignificant","Type":"Edm.Boolean","DefaultValue":"false","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Initial value, e.g. empty string, is a valid and significant value"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ValueListParameterConstant","BaseType":"Common.ValueListParameter"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"Constant","Type":"Edm.PrimitiveType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Constant value that is used to filter the value list with `eq` comparison, using the same representation as property default values, see [CSDL XML, 7.2.7 Default Value](https://docs.oasis-open.org/odata/odata-csdl-xml/v4.01/odata-csdl-xml-v4.01.html#sec_DefaultValue)"}}]},{"type":"element","name":"Property","attributes":{"Name":"InitialValueIsSignificant","Type":"Edm.Boolean","DefaultValue":"false","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Initial value, e.g. empty string, is a valid and significant value"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ValueListParameterInOut","BaseType":"Common.ValueListParameter"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"LocalDataProperty","Type":"Edm.PropertyPath","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Path to property that is used to filter the value list with `startswith` comparison and filled from the picked value list item"}}]},{"type":"element","name":"Property","attributes":{"Name":"InitialValueIsSignificant","Type":"Edm.Boolean","DefaultValue":"false","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Initial value, e.g. empty string, is a valid and significant value"}}]},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"UI.Importance"}]}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ValueListParameterOut","BaseType":"Common.ValueListParameter"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"LocalDataProperty","Type":"Edm.PropertyPath","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Path to property that is filled from response"}}]},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"UI.Importance"}]}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ValueListParameterDisplayOnly","BaseType":"Common.ValueListParameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Value list property that is not used to fill the edited entity"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"UI.Importance"}]}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ValueListParameterFilterOnly","BaseType":"Common.ValueListParameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Value list property that is used to filter the value list, not connected to the edited entity"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"All filterable properties of the value list can be used to filter"}}]}]}]}]},{"type":"comment","comment":" Section: Calendar Points in Time "},{"type":"element","name":"Term","attributes":{"Name":"IsCalendarYear","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a year number as string following the logical pattern (-?)YYYY(Y*) consisting of an optional\\n            minus sign for years B.C. followed by at least four digits. The string matches the regex pattern -?([1-9][0-9]{3,}|0[0-9]{3})\\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsCalendarHalfyear","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a halfyear number as string following the logical pattern H consisting of a single digit.\\n            The string matches the regex pattern [1-2]\\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsCalendarQuarter","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a calendar quarter number as string following the logical pattern Q consisting of a single digit.\\n            The string matches the regex pattern [1-4]\\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsCalendarMonth","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a calendar month number as string following the logical pattern MM consisting of two digits.\\n            The string matches the regex pattern 0[1-9]|1[0-2]\\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsCalendarWeek","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a calendar week number as string following the logical pattern WW consisting of two digits.\\n            The string matches the regex pattern 0[1-9]|[1-4][0-9]|5[0-3]\\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsDayOfCalendarMonth","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Day number relative to a calendar month. Valid values are between 1 and 31.\\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.SByte"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsDayOfCalendarYear","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Day number relative to a calendar year. Valid values are between 1 and 366.\\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.Int16"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsCalendarYearHalfyear","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a calendar year and halfyear as string following the logical pattern (-?)YYYY(Y*)H consisting\\n            of an optional minus sign for years B.C. followed by at least five digits, where the last digit represents the halfyear.\\n            The string matches the regex pattern -?([1-9][0-9]{3,}|0[0-9]{3})[1-2]\\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsCalendarYearQuarter","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a calendar year and quarter as string following the logical pattern (-?)YYYY(Y*)Q consisting\\n            of an optional minus sign for years B.C. followed by at least five digits, where the last digit represents the quarter.\\n            The string matches the regex pattern -?([1-9][0-9]{3,}|0[0-9]{3})[1-4]\\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsCalendarYearMonth","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a calendar year and month as string following the logical pattern (-?)YYYY(Y*)MM consisting\\n            of an optional minus sign for years B.C. followed by at least six digits, where the last two digits represent the months January to\\n            December.\\n            The string matches the regex pattern -?([1-9][0-9]{3,}|0[0-9]{3})(0[1-9]|1[0-2])\\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsCalendarYearWeek","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a calendar year and week as string following the logical pattern (-?)YYYY(Y*)WW consisting \\n          of an optional minus sign for years B.C. followed by at least six digits, where the last two digits represent week number in the year.\\n          The string matches the regex pattern -?([1-9][0-9]{3,}|0[0-9]{3})(0[1-9]|[1-4][0-9]|5[0-3]) \\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsCalendarDate","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a calendar date: year, month and day as string following the logical pattern (-?)YYYY(Y*)MMDD consisting \\n          of an optional minus sign for years B.C. followed by at least eight digits, where the last four digits represent \\n          the months January to December (MM) and the day of the month (DD).\\n          The string matches the regex pattern -?([1-9][0-9]{3,}|0[0-9]{3})(0[1-9]|1[0-2])(0[1-9]|[12][0-9]|3[01])\\n          The regex pattern does not reflect the additional constraint for \\"Day-of-month Values\\":\\n          The day value must be no more than 30 if month is one of 04, 06, 09, or 11, no more than 28 if month is 02 and year is not divisible by 4, \\n          or is divisible by 100 but not by 400, and no more than 29 if month is 02 and year is divisible by 400, or by 4 but not by 100.          \\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"comment","comment":" Section: Fiscal Points in Time "},{"type":"element","name":"Term","attributes":{"Name":"IsFiscalYear","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a fiscal year number as string following the logical pattern YYYY consisting of four digits. \\n          The string matches the regex pattern [1-9][0-9]{3}\\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsFiscalPeriod","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a fiscal period as string following the logical pattern PPP consisting of three digits. \\n          The string matches the regex pattern [0-9]{3}\\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsFiscalYearPeriod","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a fiscal year and period as string following the logical pattern YYYYPPP consisting \\n          of seven digits, where the last three digits represent the fiscal period in the year.\\n          The string matches the regex pattern ([1-9][0-9]{3})([0-9]{3})\\n          "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsFiscalQuarter","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a fiscal quarter number as string following the logical pattern Q consisting of a single digit. \\n          The string matches the regex pattern [1-4]"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsFiscalYearQuarter","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a fiscal year and quarter as string following the logical pattern YYYYQ consisting of\\n          five digits, where the last digit represents the quarter. \\n          The string matches the regex pattern [1-9][0-9]{3}[1-4]"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsFiscalWeek","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a fiscal week number as string following the logical pattern WW consisting of two digits. \\n          The string matches the regex pattern 0[1-9]|[1-4][0-9]|5[0-3]"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsFiscalYearWeek","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property encodes a fiscal year and week as string following the logical pattern YYYYWW consisting of \\n          six digits, where the last two digits represent the week number in the year. \\n          The string matches the regex pattern [1-9][0-9]{3}(0[1-9]|[1-4][0-9]|5[0-3])"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsDayOfFiscalYear","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Day number relative to a fiscal year. Valid values are between 1 and 371."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsFiscalYearVariant","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property encodes a fiscal year variant"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.MutuallyExclusiveTerm","Qualifier":"DatePart"}}]},{"type":"comment","comment":" Section: Term Constraints "},{"type":"element","name":"Term","attributes":{"Name":"MutuallyExclusiveTerm","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Term"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Only one term of the group identified with the Qualifier attribute can be applied"}}]},{"type":"comment","comment":" Section: Draft Handling "},{"type":"element","name":"Term","attributes":{"Name":"DraftRoot","Type":"Common.DraftRootType","Nullable":"false","AppliesTo":"EntitySet"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Root entities of business documents that support the draft pattern"}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DraftRootType","BaseType":"Common.DraftNodeType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"ActivationAction","Type":"Common.QualifiedName","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Action that activates a draft document"}}]},{"type":"element","name":"Property","attributes":{"Name":"DiscardAction","Type":"Common.QualifiedName","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Action that discards a draft document"}}]},{"type":"element","name":"Property","attributes":{"Name":"EditAction","Type":"Common.QualifiedName","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Action that creates an edit draft"}}]},{"type":"element","name":"Property","attributes":{"Name":"NewAction","Type":"Common.QualifiedName","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Action that creates a new draft"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"New drafts may also be created by POSTing an empty entity without any properties to the entity set."}}]},{"type":"element","name":"Property","attributes":{"Name":"AdditionalNewActions","Type":"Collection(Common.QualifiedName)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Additional actions that create a new draft"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Additional actions beside the default POST or standard `NewAction` that create a new draft."}}]},{"type":"element","name":"Property","attributes":{"Name":"ShareAction","Type":"Common.QualifiedName","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Action that shares a draft document with other users"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The action is bound to the draft document root node and has the following signature:\\n\\n            - `Users`: collection of structure with properties\\n\\n              - `UserID` of type `String` and\\n\\n              - `UserAccessRole` of type `String` with possible values `O` (owner, can perform all draft actions), and `E` (editor, can change the draft)\\n\\n            It restricts access to the listed users in their specified roles."}]}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"DraftNode","Type":"Common.DraftNodeType","Nullable":"false","AppliesTo":"EntitySet"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Entities in this set are parts of business documents that support the draft pattern"}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DraftNodeType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"PreparationAction","Type":"Common.QualifiedName"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Action that prepares a draft document for later activation"}}]},{"type":"element","name":"Property","attributes":{"Name":"ValidationFunction","Type":"Common.QualifiedName"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Separate validation without side-effects is not useful"}}]}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Function that validates whether a draft document is ready for activation"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"DraftActivationVia","Type":"Collection(Core.SimpleIdentifier)","Nullable":"false","AppliesTo":"EntitySet"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Draft entities in this set are indirectly activated via draft entities in the referenced entity sets"}}]},{"type":"element","name":"Term","attributes":{"Name":"EditableFieldFor","Type":"Edm.PropertyPath","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The annotated property is an editable field for the referenced key property"}}]},{"type":"element","name":"TypeDefinition","attributes":{"Name":"SimpleIdentifier","UnderlyingType":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The SimpleIdentifier of an OData construct in scope"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Use type [Core.SimpleIdentifier](https://github.com/oasis-tcs/odata-vocabularies/blob/main/vocabularies/Org.OData.Core.V1.md#SimpleIdentifier) instead"}}]}]}]}]},{"type":"element","name":"TypeDefinition","attributes":{"Name":"QualifiedName","UnderlyingType":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The namespace-qualified name of an OData construct in scope"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Alias-qualified names are not fully supported, and the use of namespace-qualified names is strongly recommended."}}]},{"type":"element","name":"TypeDefinition","attributes":{"Name":"ActionOverload","UnderlyingType":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The namespace-qualified name of an action with an optional overload"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The namespace-qualified name of an action, optionally followed by parentheses \\n            containing the binding parameter type of a bound action overload to identify that bound overload, \\n            or by empty parentheses to identify the unbound overload, like in the `Target` attribute of an `Annotation`."}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"SemanticKey","AppliesTo":"EntityType","Type":"Collection(Edm.PropertyPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The listed properties form the semantic key, i.e. they are unique modulo IsActiveEntity"}}]},{"type":"element","name":"Term","attributes":{"Name":"SideEffects","Type":"Common.SideEffectsType","Nullable":"false","AppliesTo":"EntitySet EntityType ComplexType Action"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Describes side-effects of modification operations"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"SideEffectsType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Changes to the source properties or source entities may have side-effects on the target properties or entities."}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"If neither TargetProperties nor TargetEntities are specified, a change to the source property values may have unforeseeable side-effects.\\nAn empty NavigationPropertyPath may be used in TargetEntities to specify that any property of the annotated entity type may be affected.\\n\\nSide effects without a `TriggerAction` happen immediately when modifying one of the source properties or source entities. Side effects with a `TriggerAction` are deferred until explicitly triggered via the `TriggerAction`.\\n\\nSpecial case where the side effect is annotated on an action: here the change trigger is the action invocation, so `SourceProperties` and `SourceEntities` have no meaning, \\nonly `TargetProperties` and `TargetEntities` are relevant. They are addressed via the binding parameter of the action, e.g. if the binding parameter is named `_it`, all paths have to start with `_it/`.\\nThis can also be used with OData V2 services: the annotation target is a function import that is marked with [`sap:action-for`](https://wiki.scn.sap.com/wiki/display/EmTech/SAP+Annotations+for+OData+Version+2.0#SAPAnnotationsforODataVersion2.0-Elementedm:FunctionImport), and all paths have to start with `_it/`."}]}]},{"type":"element","name":"Property","attributes":{"Name":"SourceProperties","Type":"Collection(Edm.PropertyPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Changes to the values of one or more of these structural properties may affect the targets"}}]},{"type":"element","name":"Property","attributes":{"Name":"SourceEntities","Type":"Collection(Edm.NavigationPropertyPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Changes to one or more of these entities may affect the targets. An empty path means the annotation target."}}]},{"type":"element","name":"Property","attributes":{"Name":"TargetProperties","Type":"Collection(Edm.String)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"These structural properties may be affected if the value of one of the sources changes"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The syntax follows closely the syntax rules for `Edm.PropertyPath`, with the addition of `*` as the last path segment meaning all structural properties directly reached via the preceding path"}}]},{"type":"element","name":"Property","attributes":{"Name":"TargetEntities","Type":"Collection(Edm.NavigationPropertyPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"These entities will be affected if the value of one of the sources changes. All affected entities need to be explicitly listed. An empty path means the annotation target."}}]},{"type":"element","name":"Property","attributes":{"Name":"EffectTypes","Type":"Common.EffectType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"All side effects are essentially value changes, differentiation not needed."}}]}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"One or more of the targets may show these effects. If not specified, any effect is possible."}}]},{"type":"element","name":"Property","attributes":{"Name":"TriggerAction","Type":"Common.QualifiedName","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Bound action to trigger side-effects after modifying an entity"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Binding parameter type of the trigger action is the entity type annotated with `SideEffects`. The action does not have any additional parameters and does not return anything. It either succeeds with `204 No Content` or it fails with `4xx` or `5xx`."}}]},{"type":"element","name":"Property","attributes":{"Name":"TriggeredIndicator","Type":"Edm.Boolean","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Indicates whether the side-effect has already happened"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The value of this property typically is a Path expression pointing to a boolean property. It can be used by clients to defer expensive refresh calls until they are actually needed and instead just request the referenced indicator property. Servers can choose to return indicator properties even if not explicitly requested."}}]},{"type":"element","name":"Property","attributes":{"Name":"Discretionary","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Indicates whether the client can decide if a side-effect should be triggered or not"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The value of this property typically a static boolean value. It can be used by clients (e.g. by asking the end user) to decide if the side effect should be triggered or not. This indicator is only allowed in case a trigger action is given as only then the execution control of the side effect is provided to the client."}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"EffectType","IsFlags":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"All side effects are essentially value changes, differentiation not needed."}}]}]}]},{"type":"element","name":"Member","attributes":{"Name":"ValidationMessage","Value":"1"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Validation messages are assigned to a target"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"This side effect type indicates that validation messages may result from changes of source properties or entities.  \\nThus, a validation request can be sent either in conjunction with or separately after a modifying request. \\nValidation messages shall be persisted with the draft and immediately available in a subsequent request without repeating the validation logic."}]}]}]},{"type":"element","name":"Member","attributes":{"Name":"ValueChange","Value":"2"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The value of a target changes"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"This side effect type declares that changes to source properties or entities may impact the values of any, one or multiple target properties or entities.  \\nUpon modification preparation logic is performed that determines additional values to be stored in the draft document."}]}]}]},{"type":"element","name":"Member","attributes":{"Name":"FieldControlChange","Value":"4"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The value of the Common.FieldControl annotation of a target changes"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"This side effect type specifies that source properties or entities may impact the dynamic field control state of any, one or multiple target properties or entities.  \\nUpon modification field control logic is invoked so that meta-information like hidden or read-only is determined."}]}]}]}]},{"type":"comment","comment":" Section: Default Values "},{"type":"element","name":"Term","attributes":{"Name":"DefaultValuesFunction","Type":"Common.QualifiedName","Nullable":"false","AppliesTo":"EntitySet NavigationProperty Action Function"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Function to calculate default values based on user input that is only known to the client and \\"context information\\" that is already available to the service"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"\\n            The default values function must have a bound overload whose binding parameter type matches the annotation target\\n\\n            - for an entity set: collection of entity type of entity set\\n\\n            - for a navigation property: identical to the type of the navigation property (single- or collection-valued)\\n\\n            - for a bound action/function: identical to the binding parameter type of the annotated action/function\\n\\n            In addition the overload can have non-binding parameters for values that the user has already entered:\\n\\n            - for an entity set or navigation property: each non-binding parameter name and type must match the name and type of a property of the entity to be created\\n\\n            - for an action or function: each non-binding parameter name and type must match the name and type of a non-binding parameter of the action or function to be called\\n\\n            The result type of the default values function is a complex type whose properties correspond in name and type to a subset of\\n\\n            - the properties of the entity to create, or\\n\\n            - the parameters of the action or function to call\\n                      "}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"DerivedDefaultValue","Type":"Edm.String","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental","String":"This has been experimental for three years, consider to delete it"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Function import to derive a default value for the property from a given context."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"\\n            Function import has two parameters of complex types:\\n\\n            - `parameters`, a structure resembling the entity type the parameter entity set related to the entity set of the annotated property\\n\\n            - `properties`, a structure resembling the type of the entity set of the annotated property\\n\\n            The return type must be of the same type as the annotated property.\\n\\n            Arguments passed to the function import are used as context for deriving the default value. \\n            The function import returns this default value, or null in case such a value could not be determined.\\n          "}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"FilterDefaultValue","Type":"Edm.PrimitiveType","Nullable":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A default value for the property to be used in filter expressions."}}]},{"type":"element","name":"Term","attributes":{"Name":"FilterDefaultValueHigh","Type":"Edm.PrimitiveType","Nullable":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental","String":"Requested by Roland Trapp as a counterpart to CDS annotation @Consumption.filter.defaultValueHigh"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A default upper limit for the property to be used in \'less than or equal\' filter expressions."}}]},{"type":"element","name":"Term","attributes":{"Name":"DerivedFilterDefaultValue","Type":"Edm.String","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental","String":"This has been experimental for three years, consider to delete it"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Function import to derive a default value for the property from a given context in order to use it in filter expressions."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"\\n            Function import has two parameters of complex types:\\n\\n            - `parameters`, a structure resembling the entity type the parameter\\n            entity set related to the entity set of the annotated property\\n\\n            - `properties`, a structure resembling the\\n            type of the entity set of the annotated property\\n\\n            The return type must be of the same type as the annotated\\n            property.\\n\\n            Arguments passed to the function import are used as context for deriving the default value.\\n            The function import returns this default value, or null in case such a value could not be determined.\\n          "}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"SortOrder","Type":"Collection(Common.SortOrderType)","Nullable":"false","AppliesTo":"EntitySet EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"List of sort criteria"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The items of the annotated entity set or the items of the \\n          collection of the annotated entity type are sorted by the first entry of the SortOrder collection. \\n          Items with same value for this first sort criteria are sorted by the second entry of the SortOrder collection, and so on. "}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"SortOrderType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Exactly one of `Property` and `DynamicProperty` must be present"}},{"type":"element","name":"Property","attributes":{"Name":"Property","Type":"Edm.PropertyPath"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.PrimitivePropertyPath"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Sort property"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Modified"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Now nullable if `DynamicProperty` is present"}}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"DynamicProperty","Type":"Edm.AnnotationPath"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Dynamic property introduced by an annotation and used as sort property"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"If the annotation referenced by the annotation path does not apply to the same collection of entities\\n            as the one being sorted according to the [`UI.PresentationVariant`](UI.md#PresentationVariant) or `Common.SortOrder` annotation,\\n            this instance of `UI.PresentationVariant/SortOrder` or `Common.SortOrder` MUST be silently ignored."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Analytics.AggregatedProperty"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Aggregation.CustomAggregate"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Descending","Type":"Edm.Boolean","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Sort direction, ascending if not specified otherwise"}}]}]},{"type":"comment","comment":" under discussion with Heiko Theissen, Heiko Gerwens, Christoph Glania, and Ralf Dentzer\\n        <Term Name=\\"CacheControlProposal\\" Type=\\"Common.CacheControlProposalType\\" Nullable=\\"false\\" AppliesTo=\\"EntitySet\\">\\n        <Annotation Term=\\"Core.Description\\">\\n        <String>Proposed values for the Cache-Control request header when accessing this entity set, see https://tools.ietf.org/html/rfc7234#section-5.2.1</String>\\n        </Annotation>\\n        </Term>\\n        <ComplexType Name=\\"CacheControlProposalType\\">\\n        <Property Name=\\"MaxAge\\" Type=\\"Edm.Int32\\">\\n        <Annotation Term=\\"Core.Description\\"\\n        String=\\"Maximum acceptable age of the response in seconds, see https://tools.ietf.org/html/rfc7234#section-5.2.1.1\\"\\n        />\\n        </Property>\\n        </ComplexType>\\n      "},{"type":"element","name":"Term","attributes":{"Name":"RecursiveHierarchy","BaseTerm":"Aggregation.RecursiveHierarchy","Type":"Common.RecursiveHierarchyType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Use terms [Aggregation.RecursiveHierarchy](https://github.com/oasis-tcs/odata-vocabularies/blob/main/vocabularies/Org.OData.Aggregation.V1.md#RecursiveHierarchy) and [Hierarchy.RecursiveHierarchy](https://github.com/SAP/odata-vocabularies/blob/main/vocabularies/Hierarchy.md#RecursiveHierarchy) instead"}}]}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Defines a recursive hierarchy."}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"RecursiveHierarchyType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Deprecated"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Use terms [Aggregation.RecursiveHierarchy](https://github.com/oasis-tcs/odata-vocabularies/blob/main/vocabularies/Org.OData.Aggregation.V1.md#RecursiveHierarchy) and [Hierarchy.RecursiveHierarchy](https://github.com/SAP/odata-vocabularies/blob/main/vocabularies/Hierarchy.md#RecursiveHierarchy) instead"}}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"ExternalNodeKeyProperty","Type":"Edm.PropertyPath"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property holding the external human-readable key identifying the node"}}]},{"type":"element","name":"Property","attributes":{"Name":"NodeDescendantCountProperty","Type":"Edm.PropertyPath"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property holding the descendant count for a hierarchy node. \\n            The descendant count of a node is the number of its descendants in the hierarchy structure of the result considering \\n            only those nodes matching any specified $filter and $search. A property holding descendant counts has an integer \\n            data type."}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"NodeDrillStateProperty","Type":"Edm.PropertyPath"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Property holding the drill state of a hierarchy node. The drill state is indicated \\n            by one of the following string values: collapsed, expanded, or leaf. For an expanded node, its \\n            children are included in the result collection. For a collapsed node, the children are included in the entity set, but \\n            they are not part of the result collection. Retrieving them requires a relaxed filter expression or a separate request \\n            filtering on the parent node ID with the ID of the collapsed node. A leaf does not have any child in the entity set.\\n            "}]}]}]}]},{"type":"comment","comment":" Metadata annotations that can also appear as instance annotations "},{"type":"element","name":"Term","attributes":{"Name":"CreatedAt","Type":"Edm.DateTimeOffset","Nullable":"true","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Creation timestamp"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}}]},{"type":"element","name":"Term","attributes":{"Name":"CreatedBy","Type":"Common.UserID","Nullable":"true","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"First editor"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}}]},{"type":"element","name":"Term","attributes":{"Name":"ChangedAt","Type":"Edm.DateTimeOffset","Nullable":"true","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Last modification timestamp"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}}]},{"type":"element","name":"Term","attributes":{"Name":"ChangedBy","Type":"Common.UserID","Nullable":"true","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Last editor"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}}]},{"type":"element","name":"TypeDefinition","attributes":{"Name":"UserID","UnderlyingType":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"User ID"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}}]},{"type":"comment","comment":" Metadata annotations for converters "},{"type":"element","name":"Term","attributes":{"Name":"OriginalProtocolVersion","Type":"Edm.String","Nullable":"false","AppliesTo":"Schema"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Original protocol version of a converted (V4) CSDL document, allowed values `2.0` and `3.0`"}}]},{"type":"comment","comment":" Odds and ends "},{"type":"element","name":"Term","attributes":{"Name":"ApplyMultiUnitBehaviorForSortingAndFiltering","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"EntityContainer"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Sorting and filtering of amounts in multiple currencies needs special consideration"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"TODO: add link to UX documentation on https://experience.sap.com/fiori-design/"}}]},{"type":"element","name":"Term","attributes":{"Name":"mediaUploadLink","Type":"Edm.String","Nullable":"false","AppliesTo":"Property EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.Stream"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"URL for uploading new media content to a Document Management Service"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"In contrast to the `@odata.mediaEditLink` this URL allows to upload new media content without directly changing a stream property or media resource.\\nThe upload request typically uses HTTP POST with `Content-Type: multipart/form-data` following RFC 7578.\\nThe upload request must contain one multipart representing the content of the file. The `name` parameter in the `Content-Disposition` header (as described in RFC 7578) is irrelevant, but the `filename` parameter is expected.\\nIf the request succeeds the response will contain a JSON body of `Content-Type: application/json` with a JSON property `readLink`. The newly uploaded media resource can be linked to the stream property by changing the `@odata.mediaReadLink` to the value of this `readLink` in a subsequent PATCH request to the OData entity."}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"PrimitivePropertyPath","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Term Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A term or term property with this tag whose type is (a collection of) `Edm.PropertyPath` MUST resolve to a primitive structural property"}}]},{"type":"element","name":"Term","attributes":{"Name":"WebSocketBaseURL","Type":"Edm.String","Nullable":"false","AppliesTo":"EntityContainer"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Base URL for WebSocket connections"}}]}]}]}]}]}')},42864:e=>{"use strict";e.exports=JSON.parse('{"declaration":{"attributes":{"version":"1.0","encoding":"utf-8"}},"elements":[{"type":"element","name":"edmx:Edmx","attributes":{"xmlns:edmx":"http://docs.oasis-open.org/odata/ns/edmx","Version":"4.0"},"elements":[{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Core.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Core","Namespace":"Org.OData.Core.V1"}}]},{"type":"element","name":"edmx:DataServices","elements":[{"type":"element","name":"Schema","attributes":{"xmlns":"http://docs.oasis-open.org/odata/ns/edm","Namespace":"com.sap.vocabularies.Communication.v1","Alias":"Communication"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Terms for annotating communication-relevant information"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"\\nThese terms are inspired by\\n- RFC6350 vCard (http://tools.ietf.org/html/rfc6350)\\n- RFC5545 iCalendar (http://tools.ietf.org/html/rfc5545)\\n- RFC5322 Internet Message Format (http://tools.ietf.org/html/rfc5322)\\n- RFC6351 xCard: vCard XML Representation (https://tools.ietf.org/html/rfc6351)\\n        "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","Qualifier":"Published"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"2017-02-15 © Copyright 2013 SAP AG. All rights reserved"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Links"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"latest-version"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/Communication.xml"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"alternate"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/Communication.json"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"describedby"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://github.com/sap/odata-vocabularies/blob/main/vocabularies/Communication.md"}}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"Contact","Type":"Communication.ContactType","Nullable":"true","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Address book entry"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ContactType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"fn","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Full name"}}]},{"type":"element","name":"Property","attributes":{"Name":"n","Type":"Communication.NameType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name"}}]},{"type":"element","name":"Property","attributes":{"Name":"nickname","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Nickname"}}]},{"type":"element","name":"Property","attributes":{"Name":"photo","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Image or photograph"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}}]},{"type":"element","name":"Property","attributes":{"Name":"bday","Type":"Edm.Date","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Birthday"}}]},{"type":"element","name":"Property","attributes":{"Name":"anniversary","Type":"Edm.Date","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Date of marriage, or equivalent"}}]},{"type":"element","name":"Property","attributes":{"Name":"gender","Type":"Communication.GenderType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Sex and gender identity"}}]},{"type":"element","name":"Property","attributes":{"Name":"title","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Position or job title"}}]},{"type":"element","name":"Property","attributes":{"Name":"role","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Function or part played in a particular situation"}}]},{"type":"element","name":"Property","attributes":{"Name":"org","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Organization Name defined by X.520"}}]},{"type":"element","name":"Property","attributes":{"Name":"orgunit","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Organization Unit defined by X.520"}}]},{"type":"element","name":"Property","attributes":{"Name":"kind","Type":"Communication.KindType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Kind of contact"}}]},{"type":"element","name":"Property","attributes":{"Name":"note","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Supplemental information or a comment associated with the contact"}}]},{"type":"element","name":"Property","attributes":{"Name":"adr","Type":"Collection(Communication.AddressType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Addresses"}}]},{"type":"element","name":"Property","attributes":{"Name":"tel","Type":"Collection(Communication.PhoneNumberType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Phone numbers"}}]},{"type":"element","name":"Property","attributes":{"Name":"email","Type":"Collection(Communication.EmailAddressType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Email addresses"}}]},{"type":"element","name":"Property","attributes":{"Name":"geo","Type":"Collection(Communication.GeoDataType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Geographic locations"}}]},{"type":"element","name":"Property","attributes":{"Name":"url","Type":"Collection(Communication.UrlType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"URLs"}}]},{"type":"comment","comment":" TODO: social networks - yet reflected in VCARD? "}]},{"type":"element","name":"ComplexType","attributes":{"Name":"NameType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"surname","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Surname or family name"}}]},{"type":"element","name":"Property","attributes":{"Name":"given","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Given name"}}]},{"type":"element","name":"Property","attributes":{"Name":"additional","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Additional names"}}]},{"type":"element","name":"Property","attributes":{"Name":"prefix","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Honorific prefix(es)"}}]},{"type":"element","name":"Property","attributes":{"Name":"suffix","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Honorific suffix(es)"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"Address","Type":"Communication.AddressType","Nullable":"true","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Address"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"AddressType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"building","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Building identifier"}}]},{"type":"element","name":"Property","attributes":{"Name":"street","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Street address"}}]},{"type":"element","name":"Property","attributes":{"Name":"district","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Territorial administrative organization in a large city"}}]},{"type":"element","name":"Property","attributes":{"Name":"locality","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"City or similar"}}]},{"type":"element","name":"Property","attributes":{"Name":"region","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"State, province, or similar"}}]},{"type":"element","name":"Property","attributes":{"Name":"code","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Postal code"}}]},{"type":"element","name":"Property","attributes":{"Name":"country","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Country name"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}}]},{"type":"element","name":"Property","attributes":{"Name":"pobox","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Post office box"}}]},{"type":"element","name":"Property","attributes":{"Name":"ext","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Extended address (e.g., apartment or suite number)"}}]},{"type":"element","name":"Property","attributes":{"Name":"careof","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"An intermediary who is responsible for transferring a piece of mail between the postal system and the final addressee"}}]},{"type":"element","name":"Property","attributes":{"Name":"label","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Delivery address label; plain-text string representing the formatted address, may contain line breaks"}}]},{"type":"element","name":"Property","attributes":{"Name":"type","Type":"Communication.ContactInformationType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Address type"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"PhoneNumberType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"uri","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"This SHOULD use the tel: URL schema defined in RFC3966"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}}]},{"type":"element","name":"Property","attributes":{"Name":"type","Type":"Communication.PhoneType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Telephone type"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"EmailAddressType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"address","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Email address"}}]},{"type":"element","name":"Property","attributes":{"Name":"type","Type":"Communication.ContactInformationType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Address type"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"GeoDataType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"uri","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"This SHOULD use the geo: URL schema defined in RFC5870 which encodes the same information as an Edm.GeographyPoint"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}}]},{"type":"element","name":"Property","attributes":{"Name":"type","Type":"Communication.ContactInformationType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Address type"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"UrlType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"uri","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"This MUST use the URL schema defined in RFC3986"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}}]},{"type":"element","name":"Property","attributes":{"Name":"type","Type":"Communication.ContactInformationType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"URL type"}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"KindType"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"individual"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A single person or entity"}}]},{"type":"element","name":"Member","attributes":{"Name":"group"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A group of persons or entities"}}]},{"type":"element","name":"Member","attributes":{"Name":"org"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"An organization"}}]},{"type":"element","name":"Member","attributes":{"Name":"location"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A named geographical place"}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"ContactInformationType","IsFlags":"true"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"work","Value":"1"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Related to an individual\'s work place"}}]},{"type":"element","name":"Member","attributes":{"Name":"home","Value":"2"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Related to an indivdual\'s personal life"}}]},{"type":"element","name":"Member","attributes":{"Name":"preferred","Value":"4"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Preferred-use contact information"}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"PhoneType","IsFlags":"true"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"work","Value":"1"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Work telephone number"}}]},{"type":"element","name":"Member","attributes":{"Name":"home","Value":"2"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Private telephone number"}}]},{"type":"element","name":"Member","attributes":{"Name":"preferred","Value":"4"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Preferred-use telephone number"}}]},{"type":"element","name":"Member","attributes":{"Name":"voice","Value":"8"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Voice telephone number"}}]},{"type":"element","name":"Member","attributes":{"Name":"cell","Value":"16"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Cellular or mobile telephone number"}}]},{"type":"element","name":"Member","attributes":{"Name":"fax","Value":"32"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Facsimile telephone number"}}]},{"type":"element","name":"Member","attributes":{"Name":"video","Value":"64"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Video conferencing telephone number"}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"GenderType"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"M"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"male"}}]},{"type":"element","name":"Member","attributes":{"Name":"F"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"female"}}]},{"type":"element","name":"Member","attributes":{"Name":"O"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"other"}}]},{"type":"element","name":"Member","attributes":{"Name":"N"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"not applicable"}}]},{"type":"element","name":"Member","attributes":{"Name":"U"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"unknown"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"IsEmailAddress","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property contains an email address"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsPhoneNumber","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property contains a phone number"}}]},{"type":"element","name":"Term","attributes":{"Name":"Event","Type":"Communication.EventData","Nullable":"true","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Calendar entry"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"EventData"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"summary","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Short description of the event"}}]},{"type":"element","name":"Property","attributes":{"Name":"description","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"More complete description"}}]},{"type":"element","name":"Property","attributes":{"Name":"categories","Type":"Collection(Edm.String)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Categories or subtypes of the event"}}]},{"type":"element","name":"Property","attributes":{"Name":"dtstart","Type":"Edm.DateTimeOffset","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Start date and time of the event"}}]},{"type":"element","name":"Property","attributes":{"Name":"dtend","Type":"Edm.DateTimeOffset","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Date and time by which the event ends, alternative to duration"}}]},{"type":"element","name":"Property","attributes":{"Name":"duration","Type":"Edm.Duration","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Duration of the event, alternative to dtend"}}]},{"type":"element","name":"Property","attributes":{"Name":"class","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Access classification, e.g. PUBLIC, PRIVATE, CONFIDENTIAL"}}]},{"type":"element","name":"Property","attributes":{"Name":"status","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Confirmation status, e.g. CONFIRMED, TENTATIVE, CANCELLED"}}]},{"type":"element","name":"Property","attributes":{"Name":"location","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Intended venue of the event"}}]},{"type":"element","name":"Property","attributes":{"Name":"transp","Type":"Edm.Boolean","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Time transparency for busy time searches, true = free, false = blocked"}}]},{"type":"element","name":"Property","attributes":{"Name":"wholeday","Type":"Edm.Boolean","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Wholeday event"}}]},{"type":"element","name":"Property","attributes":{"Name":"fbtype","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Free or busy time type, e.g. FREE, BUSY, BUSY-TENTATIVE"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"Task","Type":"Communication.TaskData","Nullable":"true","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Task list entry"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"TaskData"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"summary","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Short description of the task"}}]},{"type":"element","name":"Property","attributes":{"Name":"description","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"More complete description of the task"}}]},{"type":"element","name":"Property","attributes":{"Name":"due","Type":"Edm.DateTimeOffset","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Date and time that a to-do is expected to be completed"}}]},{"type":"element","name":"Property","attributes":{"Name":"completed","Type":"Edm.DateTimeOffset","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Date and time that a to-do was actually completed"}}]},{"type":"element","name":"Property","attributes":{"Name":"percentcomplete","Type":"Edm.Byte","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Percent completion of a to-do, e.g. 50 for half done"}}]},{"type":"element","name":"Property","attributes":{"Name":"priority","Type":"Edm.Byte","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Relative priority, 0 = undefined, 1 = highest, 9 = lowest"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"Message","Type":"Communication.MessageData","Nullable":"true","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Email message"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"MessageData"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"from","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Author(s) of the message"}}]},{"type":"element","name":"Property","attributes":{"Name":"sender","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Agent responsible for the actual transmission of the message, e.g. a secretary"}}]},{"type":"element","name":"Property","attributes":{"Name":"to","Type":"Collection(Edm.String)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"List of primary recipients"}}]},{"type":"element","name":"Property","attributes":{"Name":"cc","Type":"Collection(Edm.String)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"List of other recipients (carbon copy)"}}]},{"type":"element","name":"Property","attributes":{"Name":"bcc","Type":"Collection(Edm.String)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"List of recipients whose addresses are not to be revealed (blind carbon copy)"}}]},{"type":"element","name":"Property","attributes":{"Name":"subject","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Topic of the message"}}]},{"type":"element","name":"Property","attributes":{"Name":"body","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Main part of the message"}}]},{"type":"element","name":"Property","attributes":{"Name":"keywords","Type":"Collection(Edm.String)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"List of important words and phrases that might be useful for the recipient"}}]},{"type":"element","name":"Property","attributes":{"Name":"received","Type":"Edm.DateTimeOffset","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Date and time the message was received"}}]}]}]}]}]}]}')},97066:e=>{"use strict";e.exports=JSON.parse('{"declaration":{"attributes":{"version":"1.0","encoding":"utf-8"}},"elements":[{"type":"element","name":"edmx:Edmx","attributes":{"xmlns:edmx":"http://docs.oasis-open.org/odata/ns/edmx","Version":"4.0"},"elements":[{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Core.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Core","Namespace":"Org.OData.Core.V1"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Aggregation.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Aggregation","Namespace":"Org.OData.Aggregation.V1"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://sap.github.io/odata-vocabularies/vocabularies/Common.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Namespace":"com.sap.vocabularies.Common.v1","Alias":"Common"}}]},{"type":"element","name":"edmx:DataServices","elements":[{"type":"element","name":"Schema","attributes":{"xmlns":"http://docs.oasis-open.org/odata/ns/edm","Namespace":"com.sap.vocabularies.Hierarchy.v1","Alias":"Hierarchy"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Terms for Hierarchies"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","Qualifier":"Published"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"2018-01-31 © Copyright 2018 SAP SE. All rights reserved"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Links"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"latest-version"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/Hierarchy.xml"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"alternate"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/Hierarchy.json"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"describedby"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://github.com/sap/odata-vocabularies/blob/main/vocabularies/Hierarchy.md"}}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"RecursiveHierarchy","Type":"Hierarchy.RecursiveHierarchyType","BaseTerm":"Aggregation.RecursiveHierarchy","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Hierarchy-specific information in the result set of a hierarchical request"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The [base term](https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Aggregation.V1.html#RecursiveHierarchy)\\n          governs what are the nodes and parents in the hierarchy, whereas this term defines derived information."}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"RecursiveHierarchyType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The properties in this complex type contain information about\\na node in the result set of a hierarchical request. If the same node occurs multiple times\\nwith different parents, certain properties may differ between the occurrences.\\nThe properties are derived when hierarchical transformations\\nare applied whose first parameter has the annotated entity type\\nand whose second parameter is the annotation qualifier.\\n\\nFor requests like\\n```\\nSalesOrganizations?$apply=\\ndescendants(..., ID, filter(ID eq \'US\'), keep start)\\n/ancestors(..., ID, filter(contains(Name, \'New York\')), keep start)\\n/Hierarchy.TopLevels(..., NodeProperty=\'ID\', Levels=2)\\n&$top=10\\n```\\nor\\n```\\nSalesOrganizations?$apply=groupby((rolluprecursive(..., ID,\\n  descendants(..., ID, filter(ID eq \'US\')),\\n  ancestors(..., ID, filter(contains(Name, \'New York\')), keep start))), aggregate(...))\\n/Hierarchy.TopLevels(..., NodeProperty=\'ID\', Levels=2)\\n&$top=10\\n```\\n(where `...,` stands for hierarchy nodes and hierarchy qualifier)\\nthe following collections of hierarchy nodes are distinguished:\\n|Collection|Definition|Value|Where in request|\\n|----------|----------|-----|----------------|\\n|sub-hierarchy|output set of a `descendants` transformation, possibly embedded in a `rolluprecursive` transformation, that is not preceded by an `ancestors` or `descendants` transformation|US sales organizations|rows 1–2|\\n|matching nodes|see [`MatchCount`](#MatchCount)|US sales organizations with \\"New York\\" in their name|output set of `filter` transformation in row 3|\\n|unlimited hierarchy|output set of the last `ancestors`, `descendants` or `traverse` transformation, possibly embedded in a `rolluprecursive` transformation, disregarding numeric fifth parameters|US sales organizations with leaves containing \\"New York\\"|rows 1–3|\\n|limited hierarchy|output set of the last `ancestors`, `descendants`, `traverse` or [`Hierarchy.TopLevels`](#TopLevels) transformation, possibly embedded in a `rolluprecursive` transformation|2 levels of US sales organizations with leaves containing \\"New York\\"|rows 1–4|\\n"}]}]},{"type":"element","name":"Property","attributes":{"Name":"ExternalKey","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Human-readable key value for a node"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"If a `NodeType` exists, the external key is unique only in combination with it.\\n            Or the external key can coincide with the [`Aggregation.RecursiveHierarchy/NodeProperty`](https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Aggregation.V1.html#RecursiveHierarchyType)."}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"NodeType","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Type of a node"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"In a recursive hierarchy with mixed types, nodes can\\n            <br>- have a type-specific (navigation) property whose name is the node type or\\n            <br>- be represented by entities of different subtypes of a common entity type that is\\n            annotated with the `RecursiveHierarchy` annotation. The qualified name of the subtype is the node type."}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"ChildCount","Type":"Edm.Int64","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Number of children a node has in the unlimited hierarchy"}}]},{"type":"element","name":"Property","attributes":{"Name":"DescendantCount","Type":"Edm.Int64","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Number of descendants a node has in the unlimited hierarchy"}}]},{"type":"element","name":"Property","attributes":{"Name":"LimitedDescendantCount","Type":"Edm.Int64","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Number of descendants a node has in the limited hierarchy"}}]},{"type":"element","name":"Property","attributes":{"Name":"DrillState","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Drill state of an occurrence of a node"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Possible drill states are:\\n            <br>- `expanded` if a node has children in the limited hierarchy\\n            <br>- `collapsed` if a node has children in the unlimited hierarchy but not in the limited hierarchy\\n            <br>- `leaf` if a node has no children in the unlimited hierarchy"}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"DistanceFromRoot","Type":"Edm.Int64","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Number of ancestors an occurrence of a node has in the limited hierarchy"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"This equals the number of ancestors in the sub-hierarchy, if the request involves a sub-hierarchy."}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"SiblingRank","Type":"Edm.Int64","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Sibling rank of a node"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The sibling rank of a node is the index of the node in the sequence of all nodes\\n            in the unlimited hierarchy with the same parent. The first sibling has rank 0."}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Matched","Type":"Edm.Boolean","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Flag indicating [matching](#MatchCount) nodes"}}]},{"type":"element","name":"Property","attributes":{"Name":"MatchedDescendantCount","Type":"Edm.Int64","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Number of [matching](#MatchCount) descendants a node has in the unlimited hierarchy"}}]},{"type":"comment","comment":"\\n        <Property Name=\\"Cycle\\" Type=\\"Edm.Boolean\\" Nullable=\\"true\\">\\n          <Annotation Term=\\"Core.Description\\" String=\\"There is a cycle from this occurrence of a node to the node itself following the [`Aggregation.UpPath`](https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Aggregation.V1.html#UpPath)\\" />\\n        </Property>\\n        "}]},{"type":"element","name":"Term","attributes":{"Name":"RecursiveHierarchyActions","Type":"Hierarchy.RecursiveHierarchyActionsType","BaseTerm":"Aggregation.RecursiveHierarchy","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Actions for maintaining the recursive hierarchy defined by the [base term](https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Aggregation.V1.html#RecursiveHierarchy)"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"When an annotation with this term is present, the [`ParentNavigationProperty`](https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Aggregation.V1.html#RecursiveHierarchyType)\\n          in the base term must not have a collection-valued segment prior to its last segment."}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"RecursiveHierarchyActionsType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The qualified action names identify actions for maintaining nodes in the recursive hierarchy,\\nwhich are specific for the given annotation qualifier.\\nThese actions MUST have the same signature as the template actions linked below, with\\n`Edm.EntityType` replaced with the entity type on which the recursive hierarchy is defined.\\nThe resource path of the binding parameter MUST traverse the hierarchy collection,\\nincluding any hierarchy directory.\\n\\nThe template actions themselves cannot be invoked."}]}]},{"type":"element","name":"Property","attributes":{"Name":"ChangeNextSiblingAction","Type":"Common.QualifiedName","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Action that moves a node among its siblings, following [this template](#Template_ChangeNextSiblingAction)"}}]},{"type":"comment","comment":"\\n        <Property Name=\\"ChangePreviousSiblingAction\\" Type=\\"Common.QualifiedName\\" Nullable=\\"true\\">\\n          <Annotation Term=\\"Core.Description\\" String=\\"Action that moves a node among its siblings, following [this template](#Template_ChangePreviousSiblingAction)\\" />\\n        </Property>\\n        "},{"type":"element","name":"Property","attributes":{"Name":"CopyAction","Type":"Common.QualifiedName","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Action that copies a node and its descendants, following [this template](#Template_CopyAction)"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"MatchCount","Type":"Edm.Int64","Nullable":"false","AppliesTo":"Collection"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.IsInstanceAnnotation"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Instance annotation on the result of an `$apply` query option containing the number of matching nodes after hierarchical transformations"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The service MAY designate a subset of the `$apply` result as \\"matching nodes\\".\\n          For requests following the pattern described [here](#RecursiveHierarchyType), this subset is the output set of the\\n          `filter` or `search` transformation that occurs as the fourth parameter\\n          of the last `ancestors` transformation or occurs nested into it.<br>\\n          For requests not following this pattern, the subset NEED NOT be defined.<br>\\n          This instance annotation is available if [`RecursiveHierarchy/Matched`](#RecursiveHierarchyType)\\n          and [`RecursiveHierarchy/MatchedDescendantCount`](#RecursiveHierarchyType) are also available."}]}]}]},{"type":"comment","comment":"\\n      <Term Name=\\"StartNodeCounts\\" Type=\\"Collection(Edm.Int64)\\" AppliesTo=\\"Collection\\">\\n        <Annotation Term=\\"Common.Experimental\\" />\\n        <Annotation Term=\\"Common.IsInstanceAnnotation\\" />\\n        <Annotation Term=\\"Core.Description\\" String=\\"Instance annotation on the result of an `$apply` query option containing the number of start nodes for each `ancestors` or `descendants` transformation\\" />\\n        <Annotation Term=\\"Core.LongDescription\\">\\n          <String>The annotation value is an integer collection whose n-th entry is the number of start nodes determined\\n          for the n-th `ancestors` or `descendants` transformation in the order in which they occur in the `$apply` query option.\\n          Start nodes are determined by the fourth parameter of an `ancestors` or `descendants` transformation.</String>\\n        </Annotation>\\n      </Term>\\n      "},{"type":"element","name":"Function","attributes":{"Name":"TopLevels","IsBound":"true","EntitySetPath":"InputSet"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Returns the first n levels of a hierarchical collection in preorder with individual nodes expanded or collapsed"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"This function can be used as a transformation whose input set has a recursive hierarchy\\n          defined by an [`Aggregation.RecursiveHierarchy`](https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Aggregation.V1.html#RecursiveHierarchy)\\n          annotation on the entity type of the `HierarchyNodes`.\\n          (Its binding parameter is the unlimited hierarchy as defined [here](#RecursiveHierarchyType),\\n          its output is the limited hierarchy.) The output initially contains the nodes with less than n ancestors\\n          in the hierarchical collection given in the binding parameter.\\n          Then individual nodes are expanded, shown or collapsed in the output, which extends or reduces the limited hierarchy.\\n          Finally the output is sorted in preorder as with the `traverse` transformation with the hierarchy-specific\\n          definition of start nodes."}]}]},{"type":"element","name":"Parameter","attributes":{"Name":"InputSet","Type":"Collection(Edm.EntityType)","Nullable":"false"}},{"type":"element","name":"Parameter","attributes":{"Name":"HierarchyNodes","Type":"Collection(Edm.EntityType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A collection, given through a `$root` expression"}}]},{"type":"element","name":"Parameter","attributes":{"Name":"HierarchyQualifier","Type":"Aggregation.HierarchyQualifier","Nullable":"false"}},{"type":"element","name":"Parameter","attributes":{"Name":"NodeProperty","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property path to the node identifier, evaluated relative to the binding parameter"}}]},{"type":"element","name":"Parameter","attributes":{"Name":"Levels","Type":"Edm.Int64","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The number n of levels to be output, absent means all levels"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.OptionalParameter"},"elements":[{"type":"element","name":"Record"}]},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.Minimum","Int":"1"}}]},{"type":"element","name":"Parameter","attributes":{"Name":"Show","Type":"Collection(Edm.String)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Identifiers of nodes to be shown"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.OptionalParameter"},"elements":[{"type":"element","name":"Record"}]}]},{"type":"element","name":"Parameter","attributes":{"Name":"ExpandLevels","Type":"Collection(Hierarchy.TopLevelsExpandType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Nodes to be expanded"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.OptionalParameter"},"elements":[{"type":"element","name":"Record"}]}]},{"type":"element","name":"ReturnType","attributes":{"Type":"Collection(Edm.EntityType)"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"TopLevelsExpandType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Information about nodes to be expanded"}},{"type":"element","name":"Property","attributes":{"Name":"NodeID","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Identifier of a node to be expanded"}}]},{"type":"element","name":"Property","attributes":{"Name":"Levels","Type":"Edm.Int64","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Number of levels to be expanded, null means all levels, 0 means collapsed"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"RecursiveHierarchySupported","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Collection"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.AppliesViaContainer"}},{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Whether the annotated collection acts as a [`RecursiveHierarchy`](#RecursiveHierarchy) with the given qualifier"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"This tag is applied to a collection with the same qualifier as the [`RecursiveHierarchy`](#RecursiveHierarchy) term which is applied to its entity type.\\n          The recursive hierarchy can then only be addressed through a collection where this tag is true."}]}]}]},{"type":"element","name":"Action","attributes":{"Name":"Template_ChangeNextSiblingAction","IsBound":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Template for actions that move a node among its siblings and are named in [`RecursiveHierarchyActions/ChangeNextSiblingAction`](#RecursiveHierarchyActionsType)"}},{"type":"element","name":"Parameter","attributes":{"Name":"Node","Type":"Edm.EntityType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The node T to be moved"}}]},{"type":"element","name":"Parameter","attributes":{"Name":"NextSibling","Type":"Edm.ComplexType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Key of the node\'s new next sibling S (null if the node shall become the last sibling)"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"This parameter has properties with the same names as the key properties of the entity type.\\n            next(T) = S after the action.\\n            If R is a node with next(R) = S before the action, then next(R) = T after the action, even if S = null.\\n            It is an error if S has a different parent than T."}]}]}]}]},{"type":"comment","comment":"\\n      <Action Name=\\"Template_ChangePreviousSiblingAction\\" IsBound=\\"true\\">\\n        <Annotation Term=\\"Common.Experimental\\" />\\n        <Annotation Term=\\"Core.Description\\" String=\\"Template for actions that move a node among its siblings and are named in [`RecursiveHierarchyActions/ChangePreviousSiblingAction`](#RecursiveHierarchyActionsType)\\" />\\n        <Parameter Name=\\"Node\\" Type=\\"Edm.EntityType\\" Nullable=\\"false\\">\\n          <Annotation Term=\\"Core.Description\\" String=\\"The node T to be moved\\" />\\n        </Parameter>\\n        <Parameter Name=\\"PreviousSibling\\" Type=\\"Edm.ComplexType\\" Nullable=\\"true\\">\\n          <Annotation Term=\\"Core.Description\\" String=\\"Key of the node\'s new previous sibling S (null if the node shall become the first sibling)\\" />\\n          <Annotation Term=\\"Core.LongDescription\\">\\n            <String>This parameter has properties with the same names as the key properties of the entity type.\\n            prev(T) = S after the action.\\n            If R is a node with prev(R) = S before the action, then prev(R) = T after the action, even if S = null.\\n            It is an error if S has a different parent than T.</String>\\n          </Annotation>\\n        </Parameter>\\n      </Action>\\n      "},{"type":"element","name":"Action","attributes":{"Name":"Template_CopyAction","IsBound":"true","EntitySetPath":"Node"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Template for actions that copy a node and its descendants and are named in [`RecursiveHierarchyActions/CopyAction`](#RecursiveHierarchyActionsType)"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"To give the copied sub-hierarchy a parent, the action invocation can be followed\\nby a PATCH that binds the parent navigation property (for example, `Superordinate` in the following JSON batch request).\\n```json\\n{\\"requests\\": [{\\n  \\"id\\": \\"1\\",\\n  \\"method\\": \\"post\\",\\n  \\"url\\": \\"HierarchyDirectory(1)/Nodes(\'A\')/CopyAction\\"\\n}, {\\n  \\"id\\": \\"2\\",\\n  \\"dependsOn\\": [\\"1\\"],\\n  \\"method\\": \\"patch\\",\\n  \\"url\\": \\"$1\\",\\n  \\"body\\": {\\n    \\"Superordinate\\": {\\"@id\\": \\"Nodes(\'B\')\\"}\\n  }\\n}]}\\n```"}]}]},{"type":"element","name":"Parameter","attributes":{"Name":"Node","Type":"Edm.EntityType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The node to be copied"}}]},{"type":"element","name":"ReturnType","attributes":{"Type":"Edm.EntityType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The copied node"}}]}]}]}]}]}]}')},74756:e=>{"use strict";e.exports=JSON.parse('{"declaration":{"attributes":{"version":"1.0","encoding":"utf-8"}},"elements":[{"type":"element","name":"edmx:Edmx","attributes":{"xmlns:edmx":"http://docs.oasis-open.org/odata/ns/edmx","Version":"4.0"},"elements":[{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Core.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Core","Namespace":"Org.OData.Core.V1"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Validation.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Validation","Namespace":"Org.OData.Validation.V1"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://sap.github.io/odata-vocabularies/vocabularies/Common.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Namespace":"com.sap.vocabularies.Common.v1","Alias":"Common"}}]},{"type":"element","name":"edmx:DataServices","elements":[{"type":"element","name":"Schema","attributes":{"xmlns":"http://docs.oasis-open.org/odata/ns/edm","Namespace":"com.sap.vocabularies.PersonalData.v1","Alias":"PersonalData"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Terms for annotating Personal Data"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","Qualifier":"Published"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"2018-01-24 © Copyright 2018 SAP SE. All rights reserved"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Links"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"latest-version"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/PersonalData.xml"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"alternate"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/PersonalData.json"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"describedby"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://github.com/sap/odata-vocabularies/blob/main/vocabularies/PersonalData.md"}}]}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"\\n## Definition\\n\\nPersonal Data is any information relating to an identified or identifiable natural person (\\"data subject\\"). \\n\\nAn identifiable natural person is one who can be identified, directly or indirectly, in particular by reference to an identifier such as a name, an identification number, location data, an online identifier, or to one or more factors specific to the physical, physiological, genetic, mental, economic, cultural, or social identity of that natural person.\\n\\nPersonal data can only be processed under certain legal grounds, e.g. explicit consent of the data subject or a contractual obligation.\\n\\nThis vocabulary defines terms specific to the European [General Data Protection Regulation (GDPR)](https://ec.europa.eu/info/law/law-topic/data-protection_en).\\n\\nTerms for contact and address information are defined in the [Communication vocabulary](Communication.md#).\\n\\n### References\\n- [European Commission: Reform of EU data protection rules](https://ec.europa.eu/info/law/law-topic/data-protection/reform_en)\\n- [European Commission: Rules for business and organisations](https://ec.europa.eu/info/law/law-topic/data-protection/reform/rules-business-and-organisations_en)\\n- [European Commission: Legal grounds for processing data](https://ec.europa.eu/info/law/law-topic/data-protection/reform/rules-business-and-organisations/legal-grounds-processing-data_en).\\n       "}]}]},{"type":"element","name":"Term","attributes":{"Name":"EntitySemantics","Type":"PersonalData.EntitySemanticsType","Nullable":"false","AppliesTo":"EntitySet"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Primary meaning of the entities in the annotated entity set"}}]},{"type":"element","name":"Term","attributes":{"Name":"DataSubjectRole","Type":"Edm.String","Nullable":"true","AppliesTo":"EntitySet"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Role of the data subjects in this set (e.g. employee, customer)"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Values are application-specific.\\n          Can be a static value or a `Path` expression If the role varies per entity"}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"DataSubjectRoleDescription","Type":"Edm.String","Nullable":"true","AppliesTo":"EntitySet"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Language-dependent description of the role of the data subjects in this set (e.g. employee, customer)"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Values are application-specific.\\n          Can be a static value or a `Path` expression If the role varies per entity"}]}]}]},{"type":"element","name":"TypeDefinition","attributes":{"Name":"EntitySemanticsType","UnderlyingType":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Primary meaning of the data contained in the annotated entity set"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedValues"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","String":"DataSubject"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Entities describing a data subject (an identified or identifiable natural person), e.g. customer, vendor, employee"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"These entities are relevant for audit logging. There are no restrictions on their structure. The properties should be annotated suitably with [FieldSemantics](#FieldSemantics)."}]}]}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","String":"DataSubjectDetails"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Entities containing details to a data subject (an identified or identifiable natural person) but not representing data subjects by themselves, e.g. street addresses, email addresses, phone numbers"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"These entities are relevant for audit logging. There are no restrictions on their structure. The properties should be annotated suitably with [FieldSemantics](#FieldSemantics)."}]}]}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","String":"Other"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Entities containing personal data or references to data subjects but not representing data subjects or data subject details by themselves, e.g. customer quote, customer order, purchase order with involved business partners"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"These entities are relevant for audit logging. There are no restrictions on their structure. The properties should be annotated suitably with [FieldSemantics](#FieldSemantics)."}]}]}]}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"FieldSemantics","Type":"PersonalData.FieldSemanticsType","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Primary meaning of the personal data contained in the annotated property"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Changes to values of annotated properties are tracked in the audit log. Use this annotation also on fields that are already marked as contact or address data."}}]},{"type":"element","name":"TypeDefinition","attributes":{"Name":"FieldSemanticsType","UnderlyingType":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Primary meaning of a data field"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedValues"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","String":"DataSubjectID"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The unique identifier for a data subject"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","String":"DataSubjectIDType"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The type of ID identifying the data subject and which is allocated when creating a consent record, e.g. an e-mail address or a phone number."}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","String":"ConsentID"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The unique identifier for a consent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"A consent is the action of the data subject confirming that \\n                the usage of his or her personal data shall be allowed for a given purpose. \\n                A consent functionality allows the storage of a consent record in relation \\n                to a specific purpose and shows if a data subject has granted, withdrawn, \\n                or denied consent."}]}]}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","String":"PurposeID"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The unique identifier for the purpose of a consent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The purpose of a consent is the information that specifies the reason and the goal for\\n                the processing of a specific set of personal data. As a rule, the purpose\\n                references the relevant legal basis for the processing of personal data."}]}]}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","String":"ContractRelatedID"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The unique identifier for transactional data that is related to a contract that requires processing of personal data"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Examples:\\n\\n                - Sales Contract ID\\n\\n                - Purchase Contract ID\\n\\n                - Service Contract ID\\n                "}]}]}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","String":"LegalEntityID"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The unique identifier of a legal entity"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"A legal entity is a corporation, an association, or any other organization of legal capacity, which has statutory rights and responsibilities."}]}]}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","String":"UserID"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The unique identifier of a user"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"A user is an individual who interacts with the services supplied by a system."}]}]}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","String":"EndOfBusinessDate"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Defines the end of active business and the start of residence time and retention period"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"End of business is the point in time when the processing of a set of personal data is no longer required for the active business,\\n                for example, when a contract is fulfilled. After this has been reached and a customer-defined residence period has passed, the data is blocked and can only be accessed\\n                by users with special authorizations (for example, tax auditors).\\n                All fields of type `Edm.Date` or `Edm.DateTimeOffset` on which the end of business determination depends should be annotated."}]}]}]}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"IsPotentiallyPersonal","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property contains potentially personal data"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Personal data is information relating to an identified or identifiable natural person (data subject).\\n\\nNote: properties annotated with [`FieldSemantics`](#FieldSemantics) need not be additionally annotated with this term.\\n\\nSee also: [What is personal data?](https://ec.europa.eu/info/law/law-topic/data-protection/reform/what-personal-data_en)"}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"IsPotentiallySensitive","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Property contains potentially sensitive personal data"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Sensitive data is a colloquial term usually including the following data:\\n\\n-  Special categories of personal data such as data revealing racial or ethnic origin, political opinions, religious or philosophical beliefs, or trade union membership, and the processing of genetic data, biometric data, data concerning health or sex life or sexual orientation\\n\\n-  Personal data subject to professional secrecy\\n\\n-  Personal data relating to criminal or administrative offences\\n\\n-  Personal data concerning bank or credit card accounts\\n\\nSee also: [What personal data is considered sensitive?](https://ec.europa.eu/info/law/law-topic/data-protection/reform/rules-business-and-organisations/legal-grounds-processing-data/sensitive-data/what-personal-data-considered-sensitive_en)"}]}]}]}]}]}]}]}')},57688:e=>{"use strict";e.exports=JSON.parse('{"declaration":{"attributes":{"version":"1.0","encoding":"utf-8"}},"elements":[{"type":"element","name":"edmx:Edmx","attributes":{"xmlns:edmx":"http://docs.oasis-open.org/odata/ns/edmx","Version":"4.0"},"elements":[{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Core.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Core","Namespace":"Org.OData.Core.V1"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://sap.github.io/odata-vocabularies/vocabularies/Common.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Namespace":"com.sap.vocabularies.Common.v1","Alias":"Common"}}]},{"type":"element","name":"edmx:DataServices","elements":[{"type":"element","name":"Schema","attributes":{"xmlns":"http://docs.oasis-open.org/odata/ns/edm","Namespace":"com.sap.vocabularies.Session.v1","Alias":"Session"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Terms for services supporting sticky sessions for data modification"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","Qualifier":"Published"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"2018-07-26 © Copyright 2018 SAP SE. All rights reserved"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Links"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"latest-version"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/Session.xml"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"alternate"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/Session.json"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"describedby"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://github.com/sap/odata-vocabularies/blob/main/vocabularies/Session.md"}}]}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"\\nBuilding REST APIs on top of ABAP code that has been written for classic session-based communication is hard and sometimes not economically feasible.\\n\\nHTTP is not connection-based, meaning that each request may be sent over a different TCP connection. \\nAdding scalable servers and load balancers into the mix, each individual HTTP request is typically answered by a different application server instance.\\n\\nSticky sessions to the rescue: session stickiness or session affinity is a mechanism to route (HTTP) calls from the same client instance to the same \\"session\\", \\n\\"work process\\", or \\"application instance\\".  This is a performance improvement measure because it allows the server to keep server state in process-specific memory.\\nThis process-specific memory is lost if the server process instance crashes, in which case the client is redirected to another process instance.\\nIn modern, scalable server environments sticky sessions are usually combined with a persistency service to allow recovering session state after \\na process instance crash, so from the client\'s perspective the server state is kept. In the case of ABAP servers the session state is simply lost.\\n\\nSession stickiness is usually achieved via a cookie containing the session id. This has the benefit that browser-based applications don\'t need to be aware \\nof the session stickiness because browsers automatically send cookies on subsequent requests. \\nHowever, cookies are shared across browser tabs and windows, and requests from different tabs or windows would be dispatched to the same server session.\\nAgain this poses a problem for classic ABAP code which was built under the assumption that each server session is tied to at most one client instance.\\n\\nThis means that the client application has to be aware of the service\'s limitations and cooperate to route calls from each client application instance (browser tab or window) \\nto a different server session. The ABAP server allows this by sending the session id in the response header `sap-contextid`, \\nwhich client application instances will need to echo as a request header in subsequent requests.\\n\\nAlso the client needs to adhere to a strict choreography of \\n- initiate session\\n- send data modification and read requests\\n- end session by either\\n  - confirm data modification or\\n  - discard changes\\n\\nThis choreography is (intentionally) similar to the choreography for [Draft Handling](https://experience.sap.com/fiori-design-web/draft-handling/).\\n\\nData modification requests outside of a session are allowed and have their usual OData semantics.\\nThis allows e.g. using the same service for a list report with actions and for an editable object page, \\ncombined as one UI app.\\n        "}]}]},{"type":"element","name":"Term","attributes":{"Name":"StickySessionSupported","Type":"Session.StickySessionSupportedType","Nullable":"false","AppliesTo":"EntitySet"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The annotated entity set allows data modification only within a sticky session"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Example"},"elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Session.SessionOnlyStateSupported"},"elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"NewAction","String":"..."}},{"type":"element","name":"PropertyValue","attributes":{"Property":"EditAction","String":"..."}},{"type":"element","name":"PropertyValue","attributes":{"Property":"SaveAction","String":"..."}},{"type":"element","name":"PropertyValue","attributes":{"Property":"DiscardAction","String":"..."}}]}]}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"StickySessionSupportedType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Actions for managing data modification within a sticky session"}},{"type":"element","name":"Property","attributes":{"Name":"NewAction","Type":"Common.QualifiedName","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Bound action that initiates a sticky session for creating new entities in the targeted entity set or collection"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Signature:\\n\\n- Binding parameter is collection of type of annotated entity set\\n\\n- No non-binding parameters\\n\\n- No return type \\n\\nIf called within a sticky session the sticky session continues. \\n\\nOtherwise:\\n\\n- On success this action initiates a sticky session.\\n\\n- On failure no sticky session is initiated."}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"AdditionalNewActions","Type":"Collection(Common.QualifiedName)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Additional bound actions that initiate a sticky session"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Actions have the same binding parameter as the `NewAction` and may have non-binding paramters"}}]},{"type":"element","name":"Property","attributes":{"Name":"EditAction","Type":"Common.QualifiedName","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Bound action that initiates a sticky session for editing the targeted entity"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Signature:\\n\\n- Binding parameter is type of annotated entity set\\n\\n- No non-binding parameters\\n\\n- Return type is same as binding parameter type \\n\\nIf called within a sticky session the sticky session continues. \\n\\nOtherwise:\\n\\n- On success this action returns the targeted entity and initiates a sticky session.\\n\\n- On failure no sticky session is initiated."}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"SaveAction","Type":"Common.QualifiedName","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Bound action that saves a new or edited entity"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Signature:\\n\\n- Binding parameter is type of annotated entity set\\n\\n- No non-binding parameters\\n\\n- Return type is same as binding parameter type \\n\\nOn success this action returns the newly created or edited entity. The sticky session is terminated after all entities that were newly created or edited in it have been saved. \\n\\nOn failure the sticky session is kept alive."}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"DiscardAction","Type":"Core.SimpleIdentifier","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Action import for an unbound action that discards all changes and terminates the sticky session"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Signature:\\n\\n- No parameters\\n\\n- No return type \\n\\nIf called within a sticky session the sticky session is terminated, irrespective of whether the action succeeds or fails. \\n\\nIf called outside of a sticky session the action fails and does not initiate a session."}]}]}]}]}]}]}]}]}')},62760:e=>{"use strict";e.exports=JSON.parse('{"declaration":{"attributes":{"version":"1.0","encoding":"utf-8"}},"elements":[{"type":"element","name":"edmx:Edmx","attributes":{"Version":"4.01","xmlns:edmx":"http://docs.oasis-open.org/odata/ns/edmx"},"elements":[{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Core.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Namespace":"Org.OData.Core.V1","Alias":"Core"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Validation.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Validation","Namespace":"Org.OData.Validation.V1"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Aggregation.V1.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Alias":"Aggregation","Namespace":"Org.OData.Aggregation.V1"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://sap.github.io/odata-vocabularies/vocabularies/Communication.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Namespace":"com.sap.vocabularies.Communication.v1","Alias":"Communication"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://sap.github.io/odata-vocabularies/vocabularies/Common.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Namespace":"com.sap.vocabularies.Common.v1","Alias":"Common"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://sap.github.io/odata-vocabularies/vocabularies/HTML5.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Namespace":"com.sap.vocabularies.HTML5.v1","Alias":"HTML5"}}]},{"type":"element","name":"edmx:Reference","attributes":{"Uri":"https://sap.github.io/odata-vocabularies/vocabularies/Analytics.xml"},"elements":[{"type":"element","name":"edmx:Include","attributes":{"Namespace":"com.sap.vocabularies.Analytics.v1","Alias":"Analytics"}}]},{"type":"element","name":"edmx:DataServices","elements":[{"type":"element","name":"Schema","attributes":{"xmlns":"http://docs.oasis-open.org/odata/ns/edm","Alias":"UI","Namespace":"com.sap.vocabularies.UI.v1"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Terms for presenting data in user interfaces"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The SAP UI Vocabulary aims to optimize usage of data in UI channels.\\nIt focuses on usage patterns of data in UIs, not on UI patterns, and it is completely independent of the\\nUI technologies or devices used to visualize the data.\\n\\nThese usage patterns represent certain semantic views on business data, some of them very general,\\nothers centering around the concept of a Thing, i.e. something tangible to end users.\\nExamples for Things are semantic object instances or business object instances.\\nOne example for a usage pattern is the collection of properties which helps the user to identify a Thing,\\nthe [UI.Identification](#Identification) term.\\nAnother example is the [UI.LineItem](#LineItem) term, which is a set of properties suitable for visualizing\\na collection of business object instances, e.g. as a list or table."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","Qualifier":"Published"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"2019-02-14 © Copyright 2013 SAP SE. All rights reserved"}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Links"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"latest-version"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/UI.xml"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"alternate"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://sap.github.io/odata-vocabularies/vocabularies/UI.json"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"rel","String":"describedby"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"href","String":"https://github.com/sap/odata-vocabularies/blob/main/vocabularies/UI.md"}}]}]}]},{"type":"comment","comment":" Semantic Views / Perspectives "},{"type":"element","name":"Term","attributes":{"Name":"HeaderInfo","Type":"UI.HeaderInfoType","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Information for the header area of an entity representation. HeaderInfo is mandatory for main entity types of the model"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"HeaderInfoType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"TypeName","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the main entity type"}}]},{"type":"element","name":"Property","attributes":{"Name":"TypeNamePlural","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Plural form of the name of the main entity type"}}]},{"type":"element","name":"Property","attributes":{"Name":"Title","Type":"UI.DataFieldAbstract","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Title, e.g. for overview pages"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"This can be a [DataField](#DataField) and any of its children, or a [DataFieldForAnnotation](#DataFieldForAnnotation) targeting [ConnectedFields](#ConnectedFields)."}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.DerivedTypeConstraint"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"UI.DataField"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.DataFieldForAnnotation"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Description","Type":"UI.DataFieldAbstract","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Description, e.g. for overview pages"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"This can be a [DataField](#DataField) and any of its children, or a [DataFieldForAnnotation](#DataFieldForAnnotation) targeting [ConnectedFields](#ConnectedFields)."}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.DerivedTypeConstraint"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"UI.DataField"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.DataFieldForAnnotation"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Image","Type":"Edm.Stream","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Image for an instance of the entity type. If the property has a valid value, it can be used for the visualization of the instance. If it is not available or not valid the value of the property `ImageUrl` can be used instead."}}]},{"type":"element","name":"Property","attributes":{"Name":"ImageUrl","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Image URL for an instance of the entity type. If the property has a valid value, it can be used for the visualization of the instance. If it is not available or not valid the value of the property `TypeImageUrl` can be used instead."}}]},{"type":"element","name":"Property","attributes":{"Name":"TypeImageUrl","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Image URL for the entity type"}}]},{"type":"element","name":"Property","attributes":{"Name":"Initials","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Latin letters to be used in case no `Image`, `ImageUrl`, or `TypeImageUrl` is present"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"Identification","Type":"Collection(UI.DataFieldAbstract)","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection of fields identifying the object"}}]},{"type":"element","name":"Term","attributes":{"Name":"Badge","Type":"UI.BadgeType","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Information usually displayed in the form of a business card"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"BadgeType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"HeadLine","Type":"UI.DataField","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Headline"}}]},{"type":"element","name":"Property","attributes":{"Name":"Title","Type":"UI.DataField","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Title"}}]},{"type":"element","name":"Property","attributes":{"Name":"ImageUrl","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Image URL for an instance of the entity type. If the property has a valid value, it can be used for the visualization of the instance. If it is not available or not valid the value of the property `TypeImageUrl` can be used instead."}}]},{"type":"element","name":"Property","attributes":{"Name":"TypeImageUrl","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Image URL for the entity type"}}]},{"type":"element","name":"Property","attributes":{"Name":"MainInfo","Type":"UI.DataField","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Main information on the business card"}}]},{"type":"element","name":"Property","attributes":{"Name":"SecondaryInfo","Type":"UI.DataField","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Additional information on the business card"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"LineItem","Type":"Collection(UI.DataFieldAbstract)","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection of data fields for representation in a table or list"}},{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}}]},{"type":"element","name":"Term","attributes":{"Name":"StatusInfo","Type":"Collection(UI.DataFieldAbstract)","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection of data fields describing the status of an entity"}},{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}}]},{"type":"element","name":"Term","attributes":{"Name":"FieldGroup","Type":"UI.FieldGroupType","Nullable":"false","AppliesTo":"EntityType Action Function FunctionImport"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Group of fields with an optional label"}},{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"FieldGroupType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"Label","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Label for the field group"}}]},{"type":"element","name":"Property","attributes":{"Name":"Data","Type":"Collection(UI.DataFieldAbstract)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection of data fields"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"ConnectedFields","Type":"UI.ConnectedFieldsType","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Group of semantically connected fields with a representation template and an optional label"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Example"},"elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"Annotation","attributes":{"Term":"com.sap.vocabularies.UI.v1.ConnectedFields","Qualifier":"Material"},"elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Label","String":"Material"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Template","String":"{MaterialName} - {MaterialClassName}"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Data"},"elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"MaterialName"},"elements":[{"type":"element","name":"Record","attributes":{"Type":"com.sap.vocabularies.UI.v1.DataField"},"elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","Path":"Material"}}]}]},{"type":"element","name":"PropertyValue","attributes":{"Property":"MaterialClassName"},"elements":[{"type":"element","name":"Record","attributes":{"Type":"com.sap.vocabularies.UI.v1.DataField"},"elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","Path":"MaterialClass"}}]}]}]}]}]}]}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ConnectedFieldsType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Group of semantically connected fields with a representation template and an optional label"}},{"type":"element","name":"Property","attributes":{"Name":"Label","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Label for the connected fields"}}]},{"type":"element","name":"Property","attributes":{"Name":"Template","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Template for representing the connected fields"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Template variables are identifiers enclosed in curly braces, e.g. `{MaterialName} - {MaterialClassName}`. The `Data` collection assigns values to the template variables."}}]},{"type":"element","name":"Property","attributes":{"Name":"Data","Type":"Core.Dictionary","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Validation.OpenPropertyTypeConstraint"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"UI.DataFieldAbstract"}]}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Dictionary of template variables"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Each template variable used in `Template` must be assigned a value here. The value must be of type [DataFieldAbstract](#DataFieldAbstract)"}}]}]},{"type":"comment","comment":" Under Discussion\\n        <Term Name=\\"GeoPoints\\" Type=\\"Collection(Edm.AnnotationPath)\\" Nullable=\\"false\\" AppliesTo=\\"EntityType\\">\\n        <Annotation Term=\\"Core.Description\\">\\n        <String>\\n        Each collection element MUST reference an annotation of a\\n        - Communication.Contact or\\n        - collection of Communication.ContactData or\\n        - UI.Contacts or\\n        - UI.GeoLocation or\\n        - collection of UI.GeoLocationType\\n        </String>\\n        </Annotation>\\n        <Annotation Term=\\"UI.ThingPerspective\\" />\\n        </Term>\\n      "},{"type":"element","name":"Term","attributes":{"Name":"GeoLocations","Type":"Collection(UI.GeoLocationType)","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection of geographic locations"}}]},{"type":"element","name":"Term","attributes":{"Name":"GeoLocation","Type":"UI.GeoLocationType","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Geographic location"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"GeoLocationType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Properties that define a geographic location"}},{"type":"element","name":"Property","attributes":{"Name":"Latitude","Type":"Edm.Double","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Geographic latitude"}}]},{"type":"element","name":"Property","attributes":{"Name":"Longitude","Type":"Edm.Double","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Geographic longitude"}}]},{"type":"element","name":"Property","attributes":{"Name":"Location","Type":"Edm.GeographyPoint","SRID":"variable","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A point in a round-earth coordinate system"}}]},{"type":"element","name":"Property","attributes":{"Name":"Address","Type":"Communication.AddressType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"vCard-style address"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"Contacts","Type":"Collection(Edm.AnnotationPath)","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection of contacts"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Each collection item MUST reference an annotation of a Communication.Contact"}},{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Communication.Contact"}]}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"MediaResource","Type":"UI.MediaResourceType","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Properties that describe a media resource"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Either `Url` or `Stream` MUST be present, and never both."}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"MediaResourceType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"Url","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"URL of media resource"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"HTML5.LinkTarget"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Stream","Type":"Edm.Stream","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Stream of media resource"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"HTML5.LinkTarget"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"ContentType","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Content type, such as application/pdf, video/x-flv, image/jpeg"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsMediaType"}}]},{"type":"element","name":"Property","attributes":{"Name":"ByteSize","Type":"Edm.Int64","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Resource size in bytes"}}]},{"type":"element","name":"Property","attributes":{"Name":"ChangedAt","Type":"Edm.DateTimeOffset","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Date of last change"}}]},{"type":"element","name":"Property","attributes":{"Name":"Thumbnail","Type":"UI.ImageType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Thumbnail image"}}]},{"type":"element","name":"Property","attributes":{"Name":"Title","Type":"UI.DataField","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Resource title"}}]},{"type":"element","name":"Property","attributes":{"Name":"Description","Type":"UI.DataField","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Resource description"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ImageType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Properties that describe an image"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Either `Url` or `Stream` MUST be present, and never both."}},{"type":"element","name":"Property","attributes":{"Name":"Url","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"URL of image"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}}]},{"type":"element","name":"Property","attributes":{"Name":"Stream","Type":"Edm.Stream","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Stream of image"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"HTML5.LinkTarget"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Width","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Width of image"}}]},{"type":"element","name":"Property","attributes":{"Name":"Height","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Height of image"}}]}]},{"type":"comment","comment":" Under discussion\\n        <Term Name=\\"AdditionalInfo\\" Type=\\"Edm.AnnotationPath\\" Nullable=\\"true\\" AppliesTo=\\"Annotation\\">\\n        <Annotation Term=\\"Core.Description\\">\\n        <String>\\n        Applies to UI.GeoLocation and Communication.Contact annotations only\\n        Provides additional related information for a UI.GeoLocation or Communication.Contact\\n        Reference to UI.HeaderInfo, UI.Badge, a qualified UI.FieldGroup, or a dedicated property tagged with Core.IsURL\\n        </String>\\n        </Annotation>\\n        </Term>\\n      "},{"type":"element","name":"Term","attributes":{"Name":"DataPoint","Type":"UI.DataPointType","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Visualization of a single point of data, typically a number; may also be textual, e.g. a status value"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DataPointType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"Title","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Title of the data point"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}}]},{"type":"element","name":"Property","attributes":{"Name":"Description","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Short description"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}}]},{"type":"element","name":"Property","attributes":{"Name":"LongDescription","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Full description"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}}]},{"type":"element","name":"Property","attributes":{"Name":"Value","Type":"Edm.PrimitiveType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Numeric value"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"\\nThe value is typically provided via a `Path` construct. The path MUST lead to a direct property of the same entity type or a property of a complex property (recursively) of that entity type, navigation segments are not allowed.\\n\\nIt could be annotated with either `UoM.ISOCurrency` or `UoM.Unit`.\\nPercentage values are annotated with `UoM.Unit = \'%\'`.\\nA renderer should take an optional `Common.Text` annotation into consideration.\\n            "}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"TargetValue","Type":"Edm.PrimitiveType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Target value"}}]},{"type":"element","name":"Property","attributes":{"Name":"ForecastValue","Type":"Edm.PrimitiveType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Forecast value"}}]},{"type":"element","name":"Property","attributes":{"Name":"MinimumValue","Type":"Edm.Decimal","Scale":"variable","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Minimum value (for output rendering)"}}]},{"type":"element","name":"Property","attributes":{"Name":"MaximumValue","Type":"Edm.Decimal","Scale":"variable","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Maximum value (for output rendering)"}}]},{"type":"element","name":"Property","attributes":{"Name":"ValueFormat","Type":"UI.NumberFormat","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Number format"}}]},{"type":"element","name":"Property","attributes":{"Name":"Visualization","Type":"UI.VisualizationType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Preferred visualization"}}]},{"type":"element","name":"Property","attributes":{"Name":"SampleSize","Type":"Edm.PrimitiveType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"\\n              Sample size used for the determination of the data point; should contain just integer value as Edm.Byte, Edm.SByte, Edm.Intxx, and Edm.Decimal with scale 0.\\n            "}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"ReferencePeriod","Type":"UI.ReferencePeriod","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Reference period"}}]},{"type":"element","name":"Property","attributes":{"Name":"Criticality","Type":"UI.CriticalityType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Service-calculated criticality, alternative to CriticalityCalculation"}}]},{"type":"element","name":"Property","attributes":{"Name":"CriticalityLabels","Type":"Edm.AnnotationPath","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Custom labels for the criticality legend. Annotation path MUST end in UI.CriticalityLabels"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"UI.CriticalityLabels"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"CriticalityRepresentation","Type":"UI.CriticalityRepresentationType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Decides if criticality is visualized in addition by means of an icon"}}]},{"type":"element","name":"Property","attributes":{"Name":"CriticalityCalculation","Type":"UI.CriticalityCalculationType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Parameters for client-calculated criticality, alternative to Criticality"}}]},{"type":"element","name":"Property","attributes":{"Name":"Trend","Type":"UI.TrendType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Service-calculated trend, alternative to TrendCalculation"}}]},{"type":"element","name":"Property","attributes":{"Name":"TrendCalculation","Type":"UI.TrendCalculationType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Parameters for client-calculated trend, alternative to Trend"}}]},{"type":"element","name":"Property","attributes":{"Name":"Responsible","Type":"Communication.ContactType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Contact person"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"NumberFormat"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Describes how to visualise a number"}},{"type":"element","name":"Property","attributes":{"Name":"ScaleFactor","Type":"Edm.Decimal","Scale":"variable","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Display value in *ScaleFactor* units, e.g. 1000 for k (kilo), 1e6 for M (Mega)"}}]},{"type":"element","name":"Property","attributes":{"Name":"NumberOfFractionalDigits","Type":"Edm.Byte","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Number of fractional digits of the scaled value to be visualized"}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"VisualizationType"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"Number"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Visualize as a number"}}]},{"type":"element","name":"Member","attributes":{"Name":"BulletChart"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Visualize as bullet chart - requires TargetValue"}}]},{"type":"element","name":"Member","attributes":{"Name":"Progress"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Visualize as progress indicator - requires TargetValue"}}]},{"type":"element","name":"Member","attributes":{"Name":"Rating"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Visualize as partially or completely filled stars/hearts/... - requires TargetValue"}}]},{"type":"element","name":"Member","attributes":{"Name":"Donut"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Visualize as donut, optionally with missing segment - requires TargetValue"}}]},{"type":"element","name":"Member","attributes":{"Name":"DeltaBulletChart"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Visualize as delta bullet chart - requires TargetValue"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ReferencePeriod"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Reference period"}},{"type":"element","name":"Property","attributes":{"Name":"Description","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Short description of the reference period"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}}]},{"type":"element","name":"Property","attributes":{"Name":"Start","Type":"Edm.DateTimeOffset","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Start of the reference period"}}]},{"type":"element","name":"Property","attributes":{"Name":"End","Type":"Edm.DateTimeOffset","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"End of the reference period"}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"CriticalityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Criticality of a value or status, represented e.g. via semantic colors (https://experience.sap.com/fiori-design-web/foundation/colors/#semantic-colors)"}},{"type":"element","name":"Member","attributes":{"Name":"VeryNegative","Value":"-1"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Very negative / dark-red status - risk - out of stock - late"}}]},{"type":"element","name":"Member","attributes":{"Name":"Neutral","Value":"0"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Neutral / grey status - inactive - open - in progress"}}]},{"type":"element","name":"Member","attributes":{"Name":"Negative","Value":"1"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Negative / red status - attention - overload - alert"}}]},{"type":"element","name":"Member","attributes":{"Name":"Critical","Value":"2"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Critical / orange status - warning"}}]},{"type":"element","name":"Member","attributes":{"Name":"Positive","Value":"3"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Positive / green status - completed - available - on track - acceptable"}}]},{"type":"element","name":"Member","attributes":{"Name":"VeryPositive","Value":"4"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Very positive - above max stock - excess"}}]},{"type":"element","name":"Member","attributes":{"Name":"Information","Value":"5"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Information - noticable - informative"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"CriticalityCalculationType","BaseType":"UI.CriticalityThresholdsType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Describes how to calculate the criticality of a value depending on the improvement direction"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"\\nThe calculation is done by comparing a value to the threshold values relevant for the specified improvement direction.\\n\\nThe value to be compared is\\n  - Value - if ReferenceValue is not specified\\n  - Value sub ReferenceValue – if ReferenceValue is specified and IsRelativeDifference is not specified or specified as false\\n  - (Value sub ReferenceValue) divBy ReferenceValue – if ReferenceValue is specified and IsRelativeDifference is specified as true\\n\\nFor improvement direction `Target`, the criticality is calculated using both low and high threshold values. It will be\\n  - Positive if the value is greater than or equal to AcceptanceRangeLowValue and lower than or equal to AcceptanceRangeHighValue\\n  - Neutral if the value is greater than or equal to ToleranceRangeLowValue and lower than AcceptanceRangeLowValue OR greater than AcceptanceRangeHighValue and lower than or equal to ToleranceRangeHighValue\\n  - Critical if the value is greater than or equal to DeviationRangeLowValue and lower than ToleranceRangeLowValue OR greater than ToleranceRangeHighValue  and lower than or equal to DeviationRangeHighValue\\n  - Negative if the value is lower than DeviationRangeLowValue or greater than DeviationRangeHighValue\\n\\nFor improvement direction `Minimize`, the criticality is calculated using the high threshold values. It is\\n  - Positive if the value is lower than or equal to AcceptanceRangeHighValue\\n  - Neutral if the value is  greater than AcceptanceRangeHighValue and lower than or equal to ToleranceRangeHighValue\\n  - Critical if the value is greater than ToleranceRangeHighValue and lower than or equal to DeviationRangeHighValue\\n  - Negative if the value is greater than DeviationRangeHighValue\\n\\nFor improvement direction `Maximize`, the criticality is calculated using the low threshold values. It is\\n  - Positive if the value is greater than or equal to AcceptanceRangeLowValue\\n  - Neutral if the value is less than AcceptanceRangeLowValue and greater than or equal to ToleranceRangeLowValue\\n  - Critical if the value is lower than ToleranceRangeLowValue and greater than or equal to DeviationRangeLowValue\\n  - Negative if the value is lower than DeviationRangeLowValue\\n\\nThresholds are optional. For unassigned values, defaults are determined in this order:\\n  - For DeviationRange, an omitted LowValue translates into the smallest possible number (-INF), an omitted HighValue translates into the largest possible number (+INF)\\n  - For ToleranceRange, an omitted LowValue will be initialized with DeviationRangeLowValue, an omitted HighValue will be initialized with DeviationRangeHighValue\\n  - For AcceptanceRange, an omitted LowValue will be initialized with ToleranceRangeLowValue, an omitted HighValue will be initialized with ToleranceRangeHighValue\\n          "}]}]},{"type":"element","name":"Property","attributes":{"Name":"ReferenceValue","Type":"Edm.PrimitiveType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Reference value for the calculation, e.g. number of sales for the last year"}}]},{"type":"element","name":"Property","attributes":{"Name":"IsRelativeDifference","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Calculate with a relative difference"}}]},{"type":"element","name":"Property","attributes":{"Name":"ImprovementDirection","Type":"UI.ImprovementDirectionType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Describes in which direction the value improves"}}]},{"type":"element","name":"Property","attributes":{"Name":"ConstantThresholds","Type":"Collection(UI.LevelThresholdsType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"List of thresholds depending on the aggregation level as a set of constant values"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Constant thresholds shall only be used in order to refine constant values given for the data point overall (aggregation level with empty collection of property paths), but not if the thresholds are based on other measure elements."}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"CriticalityThresholdsType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Thresholds for calculating the criticality of a value"}},{"type":"element","name":"Property","attributes":{"Name":"AcceptanceRangeLowValue","Type":"Edm.PrimitiveType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Lowest value that is considered positive"}}]},{"type":"element","name":"Property","attributes":{"Name":"AcceptanceRangeHighValue","Type":"Edm.PrimitiveType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Highest value that is considered positive"}}]},{"type":"element","name":"Property","attributes":{"Name":"ToleranceRangeLowValue","Type":"Edm.PrimitiveType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Lowest value that is considered neutral"}}]},{"type":"element","name":"Property","attributes":{"Name":"ToleranceRangeHighValue","Type":"Edm.PrimitiveType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Highest value that is considered neutral"}}]},{"type":"element","name":"Property","attributes":{"Name":"DeviationRangeLowValue","Type":"Edm.PrimitiveType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Lowest value that is considered critical"}}]},{"type":"element","name":"Property","attributes":{"Name":"DeviationRangeHighValue","Type":"Edm.PrimitiveType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Highest value that is considered critical"}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"ImprovementDirectionType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Describes which direction of a value change is seen as an improvement"}},{"type":"element","name":"Member","attributes":{"Name":"Minimize","Value":"1"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Lower is better"}}]},{"type":"element","name":"Member","attributes":{"Name":"Target","Value":"2"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Closer to the target is better"}}]},{"type":"element","name":"Member","attributes":{"Name":"Maximize","Value":"3"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Higher is better"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"LevelThresholdsType","BaseType":"UI.CriticalityThresholdsType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Thresholds for an aggregation level"}},{"type":"element","name":"Property","attributes":{"Name":"AggregationLevel","Type":"Collection(Edm.PropertyPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"An unordered tuple of dimensions, i.e. properties which are intended to be used for grouping in aggregating requests. In analytical UIs, e.g. an analytical chart, the aggregation level typically corresponds to the visible dimensions."}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"TrendType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The trend of a value"}},{"type":"element","name":"Member","attributes":{"Name":"StrongUp","Value":"1"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Value grows strongly"}}]},{"type":"element","name":"Member","attributes":{"Name":"Up","Value":"2"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Value grows"}}]},{"type":"element","name":"Member","attributes":{"Name":"Sideways","Value":"3"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Value does not significantly grow or shrink"}}]},{"type":"element","name":"Member","attributes":{"Name":"Down","Value":"4"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Value shrinks"}}]},{"type":"element","name":"Member","attributes":{"Name":"StrongDown","Value":"5"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Value shrinks strongly"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"TrendCalculationType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Describes how to calculate the trend of a value"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"\\nBy default, the calculation is done by comparing the difference between Value and ReferenceValue to the threshold values.\\nIf IsRelativeDifference is set, the difference of Value and ReferenceValue is divided by ReferenceValue and the relative difference is compared.\\n\\nThe trend is\\n  - StrongUp if the difference is greater than or equal to StrongUpDifference\\n  - Up if the difference is less than StrongUpDifference and greater than or equal to UpDifference\\n  - Sideways if the difference  is less than UpDifference and greater than DownDifference\\n  - Down if the difference is greater than StrongDownDifference and lower than or equal to DownDifference\\n  - StrongDown if the difference is lower than or equal to StrongDownDifference"}]}]},{"type":"element","name":"Property","attributes":{"Name":"ReferenceValue","Type":"Edm.PrimitiveType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Reference value for the calculation, e.g. number of sales for the last year"}}]},{"type":"element","name":"Property","attributes":{"Name":"IsRelativeDifference","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Calculate with a relative difference"}}]},{"type":"element","name":"Property","attributes":{"Name":"UpDifference","Type":"Edm.Decimal","Scale":"variable","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Threshold for Up"}}]},{"type":"element","name":"Property","attributes":{"Name":"StrongUpDifference","Type":"Edm.Decimal","Scale":"variable","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Threshold for StrongUp"}}]},{"type":"element","name":"Property","attributes":{"Name":"DownDifference","Type":"Edm.Decimal","Scale":"variable","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Threshold for Down"}}]},{"type":"element","name":"Property","attributes":{"Name":"StrongDownDifference","Type":"Edm.Decimal","Scale":"variable","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Threshold for StrongDown"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"KPI","Type":"UI.KPIType","Nullable":"false","AppliesTo":"EntitySet EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"A Key Performance Indicator (KPI) bundles a SelectionVariant and a DataPoint, and provides details for progressive disclosure"}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"KPIType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"ID","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Optional identifier to reference this instance from an external context"}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"ShortDescription","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Very short description"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}}]},{"type":"element","name":"Property","attributes":{"Name":"SelectionVariant","Type":"UI.SelectionVariantType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Selection variant, either specified inline or referencing another annotation via Path"}}]},{"type":"element","name":"Property","attributes":{"Name":"DataPoint","Type":"UI.DataPointType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Data point, either specified inline or referencing another annotation via Path"}}]},{"type":"element","name":"Property","attributes":{"Name":"AdditionalDataPoints","Type":"Collection(UI.DataPointType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Additional data points, either specified inline or referencing another annotation via Path"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Additional data points are typically related to the main data point and provide complementing information or could be used for comparisons"}}]},{"type":"element","name":"Property","attributes":{"Name":"Detail","Type":"UI.KPIDetailType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Contains information about KPI details, especially drill-down presentations"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"KPIDetailType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"DefaultPresentationVariant","Type":"UI.PresentationVariantType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Presentation variant, either specified inline or referencing another annotation via Path"}}]},{"type":"element","name":"Property","attributes":{"Name":"AlternativePresentationVariants","Type":"Collection(UI.PresentationVariantType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A list of alternative presentation variants, either specified inline or referencing another annotation via Path"}}]},{"type":"element","name":"Property","attributes":{"Name":"SemanticObject","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the Semantic Object. If not specified, use Semantic Object annotated at the property referenced in KPI/DataPoint/Value"}}]},{"type":"element","name":"Property","attributes":{"Name":"Action","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the Action on the Semantic Object. If not specified, let user choose which of the available actions to trigger."}}]}]},{"type":"element","name":"Term","attributes":{"Name":"Chart","Type":"UI.ChartDefinitionType","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Visualization of multiple data points"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ChartDefinitionType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"Title","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Title of the chart"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}}]},{"type":"element","name":"Property","attributes":{"Name":"Description","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Short description"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}}]},{"type":"element","name":"Property","attributes":{"Name":"ChartType","Type":"UI.ChartType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Chart type"}}]},{"type":"element","name":"Property","attributes":{"Name":"AxisScaling","Type":"UI.ChartAxisScalingType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Describes the scale of the chart value axes"}}]},{"type":"element","name":"Property","attributes":{"Name":"Measures","Type":"Collection(Edm.PropertyPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.PrimitivePropertyPath"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Measures of the chart, e.g. size and color in a bubble chart"}}]},{"type":"element","name":"Property","attributes":{"Name":"DynamicMeasures","Type":"Collection(Edm.AnnotationPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Dynamic properties introduced by annotations and used as measures of the chart"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"If the annotation referenced by an annotation path does not apply to the same collection of entities\\n            as the one being visualized according to the `UI.Chart` annotation, the annotation path MUST be silently ignored."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Analytics.AggregatedProperty"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Aggregation.CustomAggregate"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"MeasureAttributes","Type":"Collection(UI.ChartMeasureAttributeType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Describes Attributes for Measures. All Measures used in this collection must also be part of the Measures Property."}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Dimensions","Type":"Collection(Edm.PropertyPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Dimensions of the chart, e.g. x- and y-axis of a bubble chart"}}]},{"type":"element","name":"Property","attributes":{"Name":"DimensionAttributes","Type":"Collection(UI.ChartDimensionAttributeType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Describes Attributes for Dimensions. All Dimensions used in this collection must also be part of the Dimensions Property."}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Actions","Type":"Collection(UI.DataFieldForActionAbstract)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Available actions"}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"ChartType"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"Column"}},{"type":"element","name":"Member","attributes":{"Name":"ColumnStacked"}},{"type":"element","name":"Member","attributes":{"Name":"ColumnDual"}},{"type":"element","name":"Member","attributes":{"Name":"ColumnStackedDual"}},{"type":"element","name":"Member","attributes":{"Name":"ColumnStacked100"}},{"type":"element","name":"Member","attributes":{"Name":"ColumnStackedDual100"}},{"type":"element","name":"Member","attributes":{"Name":"Bar"}},{"type":"element","name":"Member","attributes":{"Name":"BarStacked"}},{"type":"element","name":"Member","attributes":{"Name":"BarDual"}},{"type":"element","name":"Member","attributes":{"Name":"BarStackedDual"}},{"type":"element","name":"Member","attributes":{"Name":"BarStacked100"}},{"type":"element","name":"Member","attributes":{"Name":"BarStackedDual100"}},{"type":"element","name":"Member","attributes":{"Name":"Area"}},{"type":"element","name":"Member","attributes":{"Name":"AreaStacked"}},{"type":"element","name":"Member","attributes":{"Name":"AreaStacked100"}},{"type":"element","name":"Member","attributes":{"Name":"HorizontalArea"}},{"type":"element","name":"Member","attributes":{"Name":"HorizontalAreaStacked"}},{"type":"element","name":"Member","attributes":{"Name":"HorizontalAreaStacked100"}},{"type":"element","name":"Member","attributes":{"Name":"Line"}},{"type":"element","name":"Member","attributes":{"Name":"LineDual"}},{"type":"element","name":"Member","attributes":{"Name":"Combination"}},{"type":"element","name":"Member","attributes":{"Name":"CombinationStacked"}},{"type":"element","name":"Member","attributes":{"Name":"CombinationDual"}},{"type":"element","name":"Member","attributes":{"Name":"CombinationStackedDual"}},{"type":"element","name":"Member","attributes":{"Name":"HorizontalCombinationStacked"}},{"type":"element","name":"Member","attributes":{"Name":"Pie"}},{"type":"element","name":"Member","attributes":{"Name":"Donut"}},{"type":"element","name":"Member","attributes":{"Name":"Scatter"}},{"type":"element","name":"Member","attributes":{"Name":"Bubble"}},{"type":"element","name":"Member","attributes":{"Name":"Radar"}},{"type":"element","name":"Member","attributes":{"Name":"HeatMap"}},{"type":"element","name":"Member","attributes":{"Name":"TreeMap"}},{"type":"element","name":"Member","attributes":{"Name":"Waterfall"}},{"type":"element","name":"Member","attributes":{"Name":"Bullet"}},{"type":"element","name":"Member","attributes":{"Name":"VerticalBullet"}},{"type":"element","name":"Member","attributes":{"Name":"HorizontalWaterfall"}},{"type":"element","name":"Member","attributes":{"Name":"HorizontalCombinationDual"}},{"type":"element","name":"Member","attributes":{"Name":"HorizontalCombinationStackedDual"}},{"type":"element","name":"Member","attributes":{"Name":"Donut100"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}}]},{"type":"comment","comment":" Future: GeoPie, GeoBubble, ChoroplethMap "}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ChartAxisScalingType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"ScaleBehavior","Type":"UI.ChartAxisScaleBehaviorType","DefaultValue":"AutoScale","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Scale is fixed or adapts automatically to rendered values"}}]},{"type":"element","name":"Property","attributes":{"Name":"AutoScaleBehavior","Type":"UI.ChartAxisAutoScaleBehaviorType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Settings for automatic scaling"}}]},{"type":"element","name":"Property","attributes":{"Name":"FixedScaleMultipleStackedMeasuresBoundaryValues","Type":"UI.FixedScaleMultipleStackedMeasuresBoundaryValuesType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Boundary values for fixed scaling of a stacking chart type with multiple measures"}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"ChartAxisScaleBehaviorType"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"AutoScale"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Value axes scale automatically"}}]},{"type":"element","name":"Member","attributes":{"Name":"FixedScale"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Fixed minimum and maximum values are applied, which are derived from the @UI.MeasureAttributes.DataPoint/MinimumValue and .../MaximumValue annotation by default.\\n        For stacking chart types with multiple measures, they are taken from ChartAxisScalingType/FixedScaleMultipleStackedMeasuresBoundaryValues.\\n            "}]}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ChartAxisAutoScaleBehaviorType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"ZeroAlwaysVisible","Type":"Edm.Boolean","DefaultValue":"true","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Forces the value axis to always display the zero value"}}]},{"type":"element","name":"Property","attributes":{"Name":"DataScope","Type":"UI.ChartAxisAutoScaleDataScopeType","DefaultValue":"DataSet","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Determines the automatic scaling"}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"ChartAxisAutoScaleDataScopeType"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"DataSet"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Minimum and maximum axes values are determined from the entire data set"}}]},{"type":"element","name":"Member","attributes":{"Name":"VisibleData"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Minimum and maximum axes values are determined from the currently visible data. Scrolling will change the scale."}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"FixedScaleMultipleStackedMeasuresBoundaryValuesType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"MinimumValue","Type":"Edm.Decimal","Scale":"variable","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Minimum value on value axes"}}]},{"type":"element","name":"Property","attributes":{"Name":"MaximumValue","Type":"Edm.Decimal","Scale":"variable","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Maximum value on value axes"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ChartDimensionAttributeType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"Dimension","Type":"Edm.PropertyPath"}},{"type":"element","name":"Property","attributes":{"Name":"Role","Type":"UI.ChartDimensionRoleType"}},{"type":"element","name":"Property","attributes":{"Name":"HierarchyLevel","Type":"Edm.Int32"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"For a dimension with a hierarchy, members are selected from this level. The root node of the hierarchy is at level 0."}}]},{"type":"element","name":"Property","attributes":{"Name":"ValuesForSequentialColorLevels","Type":"Collection(Edm.String)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"All values in this collection should be assigned to levels of the same color."}}]},{"type":"element","name":"Property","attributes":{"Name":"EmphasizedValues","Type":"Collection(Edm.String)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"All values in this collection should be emphasized."}}]},{"type":"element","name":"Property","attributes":{"Name":"EmphasisLabels","Type":"UI.EmphasisLabelType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Assign a label to values with an emphasized representation. This is required, if more than one emphasized value has been specified."}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ChartMeasureAttributeType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Exactly one of `Measure` and `DynamicMeasure` must be present"}},{"type":"element","name":"Property","attributes":{"Name":"Measure","Type":"Edm.PropertyPath"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.PrimitivePropertyPath"}}]},{"type":"element","name":"Property","attributes":{"Name":"DynamicMeasure","Type":"Edm.AnnotationPath"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Dynamic property introduced by an annotation and used as a measure in a chart"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"If the annotation referenced by an annotation path does not apply to the same collection of entities\\n            as the one being visualized according to the `UI.Chart` annotation, the annotation path MUST be silently ignored."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Analytics.AggregatedProperty"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Aggregation.CustomAggregate"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Role","Type":"UI.ChartMeasureRoleType"}},{"type":"element","name":"Property","attributes":{"Name":"DataPoint","Type":"Edm.AnnotationPath"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Annotation path MUST end in @UI.DataPoint and the data point\'s Value MUST be the same property as in Measure"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"UI.DataPoint"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"UseSequentialColorLevels","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"All measures for which this setting is true should be assigned to levels of the same color."}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"ChartDimensionRoleType"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"Category"}},{"type":"element","name":"Member","attributes":{"Name":"Series"}},{"type":"element","name":"Member","attributes":{"Name":"Category2"}}]},{"type":"element","name":"EnumType","attributes":{"Name":"ChartMeasureRoleType"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"Axis1"}},{"type":"element","name":"Member","attributes":{"Name":"Axis2"}},{"type":"element","name":"Member","attributes":{"Name":"Axis3"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"EmphasisLabelType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Assigns a label to the set of emphasized values and optionally also for non-emphasized values. This information can be used for semantic coloring."}},{"type":"element","name":"Property","attributes":{"Name":"EmphasizedValuesLabel","Type":"Edm.String","Nullable":"false"}},{"type":"element","name":"Property","attributes":{"Name":"NonEmphasizedValuesLabel","Type":"Edm.String","Nullable":"true"}}]},{"type":"element","name":"Term","attributes":{"Name":"ValueCriticality","Type":"Collection(UI.ValueCriticalityType)","Nullable":"false","AppliesTo":"Property TypeDefinition"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Assign criticalities to primitive values. This information can be used for semantic coloring."}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ValueCriticalityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Assigns a fixed criticality to a primitive value. This information can be used for semantic coloring."}},{"type":"element","name":"Property","attributes":{"Name":"Value","Type":"Edm.PrimitiveType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"MUST be a fixed value of primitive type"}}]},{"type":"element","name":"Property","attributes":{"Name":"Criticality","Type":"UI.CriticalityType"}}]},{"type":"element","name":"Term","attributes":{"Name":"CriticalityLabels","Type":"Collection(UI.CriticalityLabelType)","Nullable":"false","AppliesTo":"Property EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"\\n              Assign labels to criticalities. This information can be used for semantic coloring.\\n              When applied to a property, a label for a criticality must be provided, if more than one value of the annotated property has been assigned to the same criticality.\\n              There must be no more than one label per criticality.\\n          "}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"CriticalityLabelType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Assigns a label to a criticality. This information can be used for semantic coloring."}},{"type":"element","name":"Property","attributes":{"Name":"Criticality","Type":"UI.CriticalityType","Nullable":"false"}},{"type":"element","name":"Property","attributes":{"Name":"Label","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Criticality label"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"SelectionFields","Type":"Collection(Edm.PropertyPath)","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Properties that might be relevant for filtering a collection of entities of this type"}}]},{"type":"comment","comment":" Segmentation of content according to facets of the Object "},{"type":"element","name":"Term","attributes":{"Name":"Facets","Type":"Collection(UI.Facet)","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection of facets"}}]},{"type":"element","name":"Term","attributes":{"Name":"HeaderFacets","Type":"Collection(UI.Facet)","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Facets for additional object header information"}}]},{"type":"element","name":"Term","attributes":{"Name":"QuickViewFacets","Type":"Collection(UI.Facet)","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Facets that may be used for a quick overview of the object"}}]},{"type":"element","name":"Term","attributes":{"Name":"QuickCreateFacets","Type":"Collection(UI.Facet)","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Facets that may be used for a (quick) create of the object"}}]},{"type":"element","name":"Term","attributes":{"Name":"FilterFacets","Type":"Collection(UI.ReferenceFacet)","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Facets that reference UI.FieldGroup annotations to group filterable fields"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"Facet","Abstract":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Abstract base type for facets"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"UI.Hidden"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.PartOfPreview"}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Label","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Facet label"}}]},{"type":"element","name":"Property","attributes":{"Name":"ID","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Unique identifier of a facet. ID should be stable, as long as the perceived semantics of the facet is unchanged."}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"CollectionFacet","BaseType":"UI.Facet"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection of facets"}},{"type":"element","name":"Property","attributes":{"Name":"Facets","Type":"Collection(UI.Facet)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Nested facets. An empty collection may be used as a placeholder for content added via extension points."}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ReferenceFacet","BaseType":"UI.Facet"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Facet that refers to a thing perspective, e.g. LineItem"}},{"type":"element","name":"Property","attributes":{"Name":"Target","Type":"Edm.AnnotationPath","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Referenced information: Communication.Contact, Communication.Address, or a term that is tagged with UI.ThingPerspective, e.g. UI.StatusInfo, UI.LineItem, UI.Identification, UI.FieldGroup, UI.Badge"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Communication.Address"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Communication.Contact"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.Badge"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.Chart"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.Contacts"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.DataPoint"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.FieldGroup"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.GeoLocation"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.GeoLocations"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.HeaderInfo"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.Identification"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.KPI"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.LineItem"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.MediaResource"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.Note"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.PresentationVariant"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.SelectionFields"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.SelectionPresentationVariant"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.StatusInfo"}]}]}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ReferenceURLFacet","BaseType":"UI.Facet"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Facet that refers to a URL"}},{"type":"element","name":"Property","attributes":{"Name":"Url","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"URL of referenced information"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"HTML5.LinkTarget"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"UrlContentType","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsMediaType"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Media type of referenced information"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"SelectionPresentationVariant","Type":"UI.SelectionPresentationVariantType","Nullable":"false","AppliesTo":"EntitySet EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"A SelectionPresentationVariant bundles a Selection Variant and a Presentation Variant"}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"SelectionPresentationVariantType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"ID","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Optional identifier to reference this variant from an external context"}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Text","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the bundling variant"}}]},{"type":"element","name":"Property","attributes":{"Name":"SelectionVariant","Type":"UI.SelectionVariantType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Selection variant, either specified inline or referencing another annotation via Path"}}]},{"type":"element","name":"Property","attributes":{"Name":"PresentationVariant","Type":"UI.PresentationVariantType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Presentation variant, either specified inline or referencing another annotation via Path"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"PresentationVariant","Type":"UI.PresentationVariantType","Nullable":"false","AppliesTo":"EntitySet EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"UI.ThingPerspective"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Defines how the result of a queried collection of entities is shaped and how this result is displayed"}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"PresentationVariantType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"ID","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Optional identifier to reference this variant from an external context"}}]},{"type":"element","name":"Property","attributes":{"Name":"Text","Type":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the presentation variant"}}]},{"type":"element","name":"Property","attributes":{"Name":"MaxItems","Type":"Edm.Int32"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Maximum number of items that should be included in the result"}}]},{"type":"element","name":"Property","attributes":{"Name":"SortOrder","Type":"Collection(Common.SortOrderType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection can be provided inline or as a reference to a Common.SortOrder annotation via Path"}}]},{"type":"element","name":"Property","attributes":{"Name":"GroupBy","Type":"Collection(Edm.PropertyPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Sequence of groupable properties p1, p2, ... defining how the result is composed of instances representing groups,\\n            one for each combination of value properties in the queried collection. The sequence specifies a certain level\\n            of aggregation for the queried collection, and every group instance will provide aggregated values for\\n            properties that are aggregatable. Moreover, the series of sub-sequences (p1), (p1, p2), ... forms a leveled hierarchy,\\n            which may become relevant in combination with `InitialExpansionLevel`."}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"TotalBy","Type":"Collection(Edm.PropertyPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Sub-sequence q1, q2, ... of properties p1, p2, ... specified in GroupBy. With this, additional levels of aggregation\\n            are requested in addition to the most granular level defined by GroupBy: Every element in the series of sub-sequences\\n            (q1), (q1, q2), ... introduces an additional aggregation level included in the result."}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Total","Type":"Collection(Edm.PropertyPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.PrimitivePropertyPath"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Aggregatable properties for which aggregated values should be provided for the additional aggregation levels specified in TotalBy."}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"DynamicTotal","Type":"Collection(Edm.AnnotationPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Dynamic properties introduced by annotations for which aggregated values should be provided for the additional aggregation levels specified in TotalBy"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"If the annotation referenced by an annotation path does not apply to the same collection of entities\\n            as the one being presented according to the `UI.PresentationVariant` annotation, the annotation path MUST be silently ignored."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Analytics.AggregatedProperty"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Aggregation.CustomAggregate"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"IncludeGrandTotal","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Result should include a grand total for the properties specified in Total"}}]},{"type":"element","name":"Property","attributes":{"Name":"InitialExpansionLevel","Type":"Edm.Int32","Nullable":"false","DefaultValue":"1"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Level up to which the hierarchy defined for the queried collection should be expanded initially.\\n            The hierarchy may be implicitly imposed by the sequence of the GroupBy, or by an explicit hierarchy annotation."}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Visualizations","Type":"Collection(Edm.AnnotationPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Lists available visualization types. Currently supported types are `UI.LineItem`, `UI.Chart`, and `UI.DataPoint`.\\n              For each type, no more than a single annotation is meaningful. Multiple instances of the same visualization type\\n              shall be modeled with different presentation variants.\\n              A reference to `UI.Lineitem` should always be part of the collection (least common denominator for renderers).\\n              The first entry of the collection is the default visualization.\\n            "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"UI.Chart"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.DataPoint"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.LineItem"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"RequestAtLeast","Type":"Collection(Edm.PropertyPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Properties that should always be included in the result of the queried collection"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Properties in `RequestAtLeast` must occur either in the `$select` clause of an OData request\\n            or among the grouping properties in an `$apply=groupby((grouping properties),...)` clause of an\\n            aggregating OData request."}]}]}]},{"type":"comment","comment":"\\n        <Property Name=\\"RequestAtLeastDynamic\\" Type=\\"Collection(Edm.AnnotationPath)\\" Nullable=\\"false\\">\\n          <Annotation Term=\\"Core.Description\\" String=\\"Dynamic properties introduced by annotations that should always be included in the result of the queried collection\\" />\\n          <Annotation Term=\\"Core.LongDescription\\">\\n            <String>If the annotation referenced by an annotation path does not apply to the same collection of entities\\n            as the one being presented according to the `UI.PresentationVariant` annotation, the annotation path MUST be silently ignored.</String>\\n          </Annotation>\\n          <Annotation Term=\\"Validation.AllowedTerms\\">\\n            <Collection>\\n              <String>Analytics.AggregatedProperty</String>\\n              <String>Aggregation.CustomAggregate</String>\\n            </Collection>\\n          </Annotation>\\n        </Property>\\n        "},{"type":"element","name":"Property","attributes":{"Name":"SelectionFields","Type":"Collection(Edm.PropertyPath)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Properties that should be presented for filtering a collection of entities.\\n            Can be provided inline or as a reference to a `UI.SelectionFields` annotation via Path."}]}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"SelectionVariant","Type":"UI.SelectionVariantType","Nullable":"false","AppliesTo":"EntitySet EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"A SelectionVariant denotes a combination of parameters and filters to query the annotated entity set"}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"SelectionVariantType"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"ID","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":" May contain identifier to reference this instance from an external context"}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Text","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the selection variant"}}]},{"type":"element","name":"Property","attributes":{"Name":"Parameters","Type":"Collection(UI.ParameterAbstract)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Parameters of the selection variant"}}]},{"type":"element","name":"Property","attributes":{"Name":"FilterExpression","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Filter string for query part of URL, without `$filter=`"}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"SelectOptions","Type":"Collection(UI.SelectOptionType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"ABAP Select Options Pattern"}]}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"ParameterAbstract","Abstract":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Key property of a parameter entity type"}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"Parameter","BaseType":"UI.ParameterAbstract"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Single-valued parameter"}},{"type":"element","name":"Property","attributes":{"Name":"PropertyName","Type":"Edm.PropertyPath","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Path to a key property of a parameter entity type"}}]},{"type":"element","name":"Property","attributes":{"Name":"PropertyValue","Type":"Edm.PrimitiveType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Value for the key property"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"IntervalParameter","BaseType":"UI.ParameterAbstract"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Interval parameter formed with a \'from\' and a \'to\' property"}},{"type":"element","name":"Property","attributes":{"Name":"PropertyNameFrom","Type":"Edm.PropertyPath","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Path to the \'from\' property of a parameter entity type"}}]},{"type":"element","name":"Property","attributes":{"Name":"PropertyValueFrom","Type":"Edm.PrimitiveType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Value for the \'from\' property"}}]},{"type":"element","name":"Property","attributes":{"Name":"PropertyNameTo","Type":"Edm.PropertyPath","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Path to the \'to\' property of a parameter entity type"}}]},{"type":"element","name":"Property","attributes":{"Name":"PropertyValueTo","Type":"Edm.PrimitiveType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Value for the \'to\' property"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"SelectOptionType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"List of value ranges for a single property"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Exactly one of `PropertyName` and `DynamicPropertyName` must be present"}},{"type":"element","name":"Property","attributes":{"Name":"PropertyName","Type":"Edm.PropertyPath"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.PrimitivePropertyPath"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Path to the property"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Revisions"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Kind","EnumMember":"Core.RevisionKind/Modified"}},{"type":"element","name":"PropertyValue","attributes":{"Property":"Description","String":"Now nullable if `DynamicPropertyName` is present"}}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"DynamicPropertyName","Type":"Edm.AnnotationPath"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Dynamic property introduced by annotations for which value ranges are specified"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"If the annotation referenced by the annotation path does not apply to the same collection of entities\\n            as the one being filtered according to the `UI.SelectionVariant` annotation, this instance of `UI.SelectionVariant/SelectOptions` MUST be silently ignored.\\n            For an example, see the `UI.SelectionVariant` annotation in the [example](../examples/DynamicProperties-sample.xml)."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Analytics.AggregatedProperty"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Aggregation.CustomAggregate"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Ranges","Type":"Collection(UI.SelectionRangeType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"List of value ranges"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"SelectionRangeType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Value range. If the range option only requires a single value, the value must be in the property Low"}]}]},{"type":"element","name":"Property","attributes":{"Name":"Sign","Type":"UI.SelectionRangeSignType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Include or exclude values"}}]},{"type":"element","name":"Property","attributes":{"Name":"Option","Type":"UI.SelectionRangeOptionType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Comparison operator"}}]},{"type":"element","name":"Property","attributes":{"Name":"Low","Type":"Edm.PrimitiveType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Single value or lower interval boundary"}}]},{"type":"element","name":"Property","attributes":{"Name":"High","Type":"Edm.PrimitiveType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Upper interval boundary"}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"SelectionRangeSignType"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"I"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Inclusive"}}]},{"type":"element","name":"Member","attributes":{"Name":"E"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Exclusive"}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"SelectionRangeOptionType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Comparison operator"}},{"type":"element","name":"Member","attributes":{"Name":"EQ"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Equal to"}}]},{"type":"element","name":"Member","attributes":{"Name":"BT"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Between"}}]},{"type":"element","name":"Member","attributes":{"Name":"CP"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Contains pattern"}}]},{"type":"element","name":"Member","attributes":{"Name":"LE"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Less than or equal to"}}]},{"type":"element","name":"Member","attributes":{"Name":"GE"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Greater than or equal to"}}]},{"type":"element","name":"Member","attributes":{"Name":"NE"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Not equal to"}}]},{"type":"element","name":"Member","attributes":{"Name":"NB"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Not between"}}]},{"type":"element","name":"Member","attributes":{"Name":"NP"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Does not contain pattern"}}]},{"type":"element","name":"Member","attributes":{"Name":"GT"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Greater than"}}]},{"type":"element","name":"Member","attributes":{"Name":"LT"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Less than"}}]}]},{"type":"comment","comment":" basic type definitions for reuse "},{"type":"element","name":"Term","attributes":{"Name":"ThingPerspective","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Term"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The annotated term is a Thing Perspective"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsSummary","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Record"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"This Facet and all included Facets are the summary of the thing. At most one Facet of a thing can be tagged with this term"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"UI.Facet"}}]},{"type":"element","name":"Term","attributes":{"Name":"PartOfPreview","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Record"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"This record and all included structural elements are part of the Thing preview"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"This term can be applied e.g. to UI.Facet and UI.DataField"}}]},{"type":"element","name":"Term","attributes":{"Name":"Map","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Record"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Target MUST reference a UI.GeoLocation, Communication.Address or a collection of these"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"UI.ReferenceFacet"}}]},{"type":"element","name":"Term","attributes":{"Name":"Gallery","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Record"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Target MUST reference a UI.MediaResource"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"UI.ReferenceFacet"}}]},{"type":"element","name":"Term","attributes":{"Name":"IsImageURL","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property Term"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Properties and terms annotated with this term MUST contain a valid URL referencing an resource with a MIME type image"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Common.IsNaturalPerson"}]}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"IsImage","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Properties annotated with this term MUST be a stream property annotated with a MIME type image. Entity types annotated with this term MUST be a media entity type annotated with a MIME type image."}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.Stream"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Common.IsNaturalPerson"}]}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"MultiLineText","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property PropertyValue Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Properties and parameters annotated with this annotation should be rendered as multi-line text (e.g. text area)"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"Edm.String"}}]},{"type":"element","name":"Term","attributes":{"Name":"Placeholder","Type":"Edm.String","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A short, human-readable text that gives a hint or an example to help the user with data entry"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}}]},{"type":"element","name":"Term","attributes":{"Name":"TextArrangement","Type":"UI.TextArrangementType","Nullable":"false","AppliesTo":"Annotation EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Describes the arrangement of a code or ID value and its text"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"This term annotates one of the following:<br>\\n          (1) a [`Common.Text`](Common.md#Text) annotation of the code or ID property where the annotation value is the text<br>\\n          (2) an entity type, this has the same effect as annotating all `Common.Text` annotations of properties of that entity type."}]}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"TextArrangementType"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"TextFirst"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Text is first, followed by the code/ID (e.g. in parentheses)"}}]},{"type":"element","name":"Member","attributes":{"Name":"TextLast"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Code/ID is first, followed by the text (e.g. separated by a dash)"}}]},{"type":"element","name":"Member","attributes":{"Name":"TextSeparate"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Code/ID and text are represented separately (code/ID will be shown and text can be visualized in a separate place)"}}]},{"type":"element","name":"Member","attributes":{"Name":"TextOnly"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Only text is represented, code/ID is hidden (e.g. for UUIDs)"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"Note","Type":"UI.NoteType","Nullable":"false","AppliesTo":"EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Visualization of a note attached to an entity"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Administrative data is given by the annotations\\n          [`Common.CreatedBy`](Common.md#CreatedBy),\\n          [`Common.CreatedAt`](Common.md#CreatedAt),\\n          [`Common.ChangedBy`](Common.md#ChangedBy),\\n          [`Common.ChangedAt`](Common.md#ChangedAt)\\n          on the same entity type."}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"NoteType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Property","attributes":{"Name":"Title","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Title of the note"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The title of a note is hidden with an annotation `@UI.Note/Title/@UI.Hidden`, not with\\n            an annotation on the property targeted by `@UI.Note/Title`."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"UI.Hidden"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Content","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Content of the note, as a string"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The property targeted by `@UI.Note/Content` must be annotated with `Core.MediaType` and\\n            may be annotated with `Common.SAPObjectNodeTypeReference`. When it is tagged with `Core.IsLanguageDependent`,\\n            another property of the same entity type that is tagged with [`Common.IsLanguageIdentifier`](Common.md#IsLanguageIdentifier)\\n            determines the language of the note."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Core.MediaType"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Core.IsLanguageDependent"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Common.SAPObjectNodeTypeReference"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Type","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A type used for grouping notes"}}]},{"type":"element","name":"Property","attributes":{"Name":"MaximalLength","Type":"Edm.Int32","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Type-specific maximal length of the content of the note"}}]},{"type":"element","name":"Property","attributes":{"Name":"MultipleNotes","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Whether the type allows multiple notes for one object"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"Importance","Type":"UI.ImportanceType","Nullable":"false","AppliesTo":"Annotation Record"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Expresses the importance of e.g. a DataField or an annotation"}}]},{"type":"element","name":"EnumType","attributes":{"Name":"ImportanceType"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"High"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"High importance"}}]},{"type":"element","name":"Member","attributes":{"Name":"Medium"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Medium importance"}}]},{"type":"element","name":"Member","attributes":{"Name":"Low"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Low importance"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"Hidden","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property NavigationProperty Record Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Properties or facets (see UI.Facet) annotated with this term will not be rendered if the annotation evaluates to true."}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Hidden properties usually carry technical information that is used for application control and is of no direct interest to end users.\\n          The annotation value may be an expression to dynamically hide or render the annotated feature. If a navigation property is annotated with `Hidden` true, all subsequent parts are hidden - independent of their own potential `Hidden` annotations."}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"IsCopyAction","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Record"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.RequiresType","String":"UI.DataFieldForAction"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The annotated [`DataFieldForAction`](#DataFieldForAction) record references an action that deep-copies an instance of the annotated entity type"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The referenced action MUST be bound to the annotated entity type and MUST create a new instance of the same entity type as a deep copy of the bound instance.\\nUpon successful completion, the response MUST contain a `Location` header that contains the edit URL or read URL of the created entity,\\nand the response MUST be either `201 Created` and a representation of the created entity,\\nor `204 No Content` if the request included a `Prefer` header with a value of `return=minimal` and did not include the system query options `$select` and `$expand`."}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"CreateHidden","Type":"Core.Tag","Nullable":"false","AppliesTo":"EntitySet EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"EntitySets annotated with this term can control the visibility of the Create operation dynamically"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The annotation value should be a path to another property from a related entity."}}]},{"type":"element","name":"Term","attributes":{"Name":"UpdateHidden","Type":"Core.Tag","Nullable":"false","AppliesTo":"EntitySet EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"EntitySets annotated with this term can control the visibility of the Edit/Save operation dynamically"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The annotation value should be a path to another property from the same or a related entity."}}]},{"type":"element","name":"Term","attributes":{"Name":"DeleteHidden","Type":"Core.Tag","Nullable":"false","AppliesTo":"EntitySet EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"EntitySets annotated with this term can control the visibility of the Delete operation dynamically"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The annotation value should be a path to another property from the same or a related entity."}}]},{"type":"element","name":"Term","attributes":{"Name":"HiddenFilter","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property NavigationProperty"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Properties annotated with this term will not be rendered as filter criteria if the annotation evaluates to true."}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Properties annotated with `HiddenFilter` are intended as parts of a `$filter` expression that cannot be directly influenced by end users.\\n          The properties will be rendered in all other places, e.g. table columns or form fields. This is in contrast to properties annotated with [Hidden](#Hidden) that are not rendered at all.\\n          If a navigation property is annotated with `HiddenFilter` true, all subsequent parts are hidden in filter - independent of their own potential `HiddenFilter` annotations."}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"AdaptationHidden","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property EntitySet EntityType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Properties or entities annotated with this term can\'t be used for UI adaptation/configuration/personalization"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The tagged elements can only be used in UI based on metadata, annnotations or code."}}]},{"type":"element","name":"Term","attributes":{"Name":"DataFieldDefault","Type":"UI.DataFieldAbstract","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Default representation of a property as a datafield, e.g. when the property is added as a table column or form field via personalization"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Only concrete subtypes of [DataFieldAbstract](#DataFieldAbstract) can be used for a DataFieldDefault. For type [DataField](#DataField) and its subtypes the annotation target SHOULD be the same property that is referenced via a path expression in the `Value` of the datafield."}}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DataFieldAbstract","Abstract":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Elementary building block that represents a piece of data and/or allows triggering an action"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"By using the applicable terms UI.Hidden, UI.Importance or HTML5.CssDefaults, the visibility, the importance and\\n          and the default css settings (as the width) of the data field can be influenced. "}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"UI.Hidden"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.Importance"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.PartOfPreview"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"HTML5.CssDefaults"}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"Label","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A short, human-readable text suitable for labels and captions in UIs"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}}]},{"type":"element","name":"Property","attributes":{"Name":"Criticality","Type":"UI.CriticalityType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Criticality of the data field value"}}]},{"type":"element","name":"Property","attributes":{"Name":"CriticalityRepresentation","Type":"UI.CriticalityRepresentationType","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Decides if criticality is visualized in addition by means of an icon"}}]},{"type":"element","name":"Property","attributes":{"Name":"IconUrl","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Optional icon"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"CriticalityRepresentationType"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"WithIcon"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Criticality is represented with an icon"}}]},{"type":"element","name":"Member","attributes":{"Name":"WithoutIcon"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Criticality is represented without icon, e.g. only via text color"}}]},{"type":"element","name":"Member","attributes":{"Name":"OnlyIcon"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Criticality is represented only by using an icon"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DataFieldForAnnotation","BaseType":"UI.DataFieldAbstract"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A structured piece of data described by an annotation"}},{"type":"element","name":"Property","attributes":{"Name":"Target","Type":"Edm.AnnotationPath","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Target MUST reference an annotation of terms Communication.Contact, Communication.Address, UI.DataPoint, UI.Chart, UI.FieldGroup, or UI.ConnectedFields"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Communication.Address"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Communication.Contact"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.Chart"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.ConnectedFields"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.DataPoint"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"UI.FieldGroup"}]}]}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DataFieldForActionAbstract","BaseType":"UI.DataFieldAbstract","Abstract":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Triggers an action"}},{"type":"element","name":"Property","attributes":{"Name":"Inline","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Action should be placed close to (or even inside) the visualized term"}}]},{"type":"element","name":"Property","attributes":{"Name":"Determining","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Determines whether the action completes a process step (e.g. approve, reject)."}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DataFieldForAction","BaseType":"UI.DataFieldForActionAbstract"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Triggers an OData action"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The action is NOT tied to a data value (in contrast to [DataFieldWithAction](#DataFieldWithAction))."}},{"type":"element","name":"Property","attributes":{"Name":"Action","Type":"UI.ActionName","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of an Action, Function, ActionImport, or FunctionImport in scope"}}]},{"type":"element","name":"Property","attributes":{"Name":"InvocationGrouping","Type":"UI.OperationGroupingType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Expresses how invocations of this action on multiple instances should be grouped"}}]}]},{"type":"element","name":"EnumType","attributes":{"Name":"OperationGroupingType"},"elements":[{"type":"element","name":"Member","attributes":{"Name":"Isolated"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Invoke each action in isolation from other actions"}}]},{"type":"element","name":"Member","attributes":{"Name":"ChangeSet"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Group all actions into a single change set"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DataFieldForIntentBasedNavigation","BaseType":"UI.DataFieldForActionAbstract"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Triggers intent-based UI navigation"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The navigation intent is expressed as a Semantic Object and optionally an Action on that object.\\n\\nIt is NOT tied to a data value (in contrast to [DataFieldWithIntentBasedNavigation](#DataFieldWithIntentBasedNavigation))."}]}]},{"type":"element","name":"Property","attributes":{"Name":"SemanticObject","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the Semantic Object"}}]},{"type":"element","name":"Property","attributes":{"Name":"Action","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the Action on the Semantic Object. If not specified, let user choose which of the available actions to trigger."}}]},{"type":"element","name":"Property","attributes":{"Name":"NavigationAvailable","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The navigation intent is for that user with the selected context and parameters available"}}]},{"type":"element","name":"Property","attributes":{"Name":"RequiresContext","Type":"Edm.Boolean","Nullable":"false","DefaultValue":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Determines whether  a context needs to be passed to the target of this navigation."}}]},{"type":"element","name":"Property","attributes":{"Name":"Mapping","Type":"Collection(Common.SemanticObjectMappingType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Maps properties of the annotated entity type to properties of the Semantic Object"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DataFieldForActionGroup","BaseType":"UI.DataFieldAbstract"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection of OData actions and intent based navigations"}},{"type":"element","name":"Property","attributes":{"Name":"Actions","Type":"Collection(UI.DataFieldForActionAbstract)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection of data fields that refer to actions or intent based navigations"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DataField","BaseType":"UI.DataFieldAbstract"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A piece of data"}},{"type":"element","name":"Property","attributes":{"Name":"Value","Type":"Edm.Untyped","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The data field\'s value"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.DerivedTypeConstraint"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Edm.PrimitiveType"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.Binary)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.Boolean)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.Byte)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.Date)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.DateTimeOffset)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.Decimal)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.Double)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.Duration)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.Guid)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.Int16)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.Int32)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.Int64)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.SByte)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.Single)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.String)"}]},{"type":"element","name":"String","elements":[{"type":"text","text":"Collection(Edm.TimeOfDay)"}]}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsLanguageDependent"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DataFieldWithAction","BaseType":"UI.DataField"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A piece of data that allows triggering an OData action"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The action is tied to a data value. This is in contrast to [DataFieldForAction](#DataFieldForAction) which is not tied to a specific data value."}},{"type":"element","name":"Property","attributes":{"Name":"Value","Type":"Edm.PrimitiveType","Nullable":"false"}},{"type":"element","name":"Property","attributes":{"Name":"Action","Type":"UI.ActionName","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of an Action, Function, ActionImport, or FunctionImport in scope"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DataFieldWithIntentBasedNavigation","BaseType":"UI.DataField"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A piece of data that allows triggering intent-based UI navigation"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The navigation intent is expressed as a Semantic Object and optionally an Action on that object.\\n\\nIt is tied to a data value which should be rendered as a hyperlink.\\nThis is in contrast to [DataFieldForIntentBasedNavigation](#DataFieldForIntentBasedNavigation) which is not tied to a specific data value."}]}]},{"type":"element","name":"Property","attributes":{"Name":"Value","Type":"Edm.PrimitiveType","Nullable":"false"}},{"type":"element","name":"Property","attributes":{"Name":"SemanticObject","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the Semantic Object"}}]},{"type":"element","name":"Property","attributes":{"Name":"Action","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the Action on the Semantic Object. If not specified, let user choose which of the available actions to trigger."}}]},{"type":"element","name":"Property","attributes":{"Name":"Mapping","Type":"Collection(Common.SemanticObjectMappingType)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Maps properties of the annotated entity type to properties of the Semantic Object"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DataFieldWithNavigationPath","BaseType":"UI.DataField"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A piece of data that allows navigating to related data"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"It should be rendered as a hyperlink"}},{"type":"element","name":"Property","attributes":{"Name":"Value","Type":"Edm.PrimitiveType","Nullable":"false"}},{"type":"element","name":"Property","attributes":{"Name":"Target","Type":"Edm.NavigationPropertyPath","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Contains either a navigation property or a term cast, where term is of type Edm.EntityType or a concrete entity type or a collection of these types"}]}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DataFieldWithUrl","BaseType":"UI.DataField"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"A piece of data that allows navigating to other information on the Web"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"It should be rendered as a hyperlink"}},{"type":"element","name":"Property","attributes":{"Name":"Value","Type":"Edm.PrimitiveType","Nullable":"false"}},{"type":"element","name":"Property","attributes":{"Name":"Url","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Target of the hyperlink"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsURL"}},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.ApplicableTerms"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"HTML5.LinkTarget"}]}]}]}]},{"type":"element","name":"Property","attributes":{"Name":"UrlContentType","Type":"Edm.String","Nullable":"true"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Media type of the hyperlink target, e.g. `video/mp4`"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.IsMediaType"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"DataFieldWithActionGroup","BaseType":"UI.DataField"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection of OData actions and intent based navigations"}},{"type":"element","name":"Property","attributes":{"Name":"Value","Type":"Edm.PrimitiveType","Nullable":"false"}},{"type":"element","name":"Property","attributes":{"Name":"Actions","Type":"Collection(UI.DataField)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Collection of data fields that are either [DataFieldWithAction](#DataFieldWithAction), [DataFieldWithIntentBasedNavigation](#DataFieldWithIntentBasedNavigation), [DataFieldWithNavigationPath](#DataFieldWithNavigationPath), or [DataFieldWithUrl](#DataFieldWithUrl)"}}]}]},{"type":"element","name":"Term","attributes":{"Name":"Criticality","Type":"UI.CriticalityType","Nullable":"false","AppliesTo":"Annotation"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Service-calculated criticality, alternative to UI.CriticalityCalculation"}}]},{"type":"element","name":"Term","attributes":{"Name":"CriticalityCalculation","Type":"UI.CriticalityCalculationType","Nullable":"false","AppliesTo":"Annotation"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Parameters for client-calculated criticality, alternative to UI.Criticality"}}]},{"type":"element","name":"Term","attributes":{"Name":"Emphasized","Type":"Core.Tag","DefaultValue":"true","Nullable":"false","AppliesTo":"Record"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Highlight something that is of special interest"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"The usage of a property or operation should be highlighted as it\'s of special interest for the end user"}}]},{"type":"element","name":"Term","attributes":{"Name":"OrderBy","Type":"Edm.PropertyPath","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Sort by the referenced property instead of by the annotated property"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"Example: annotated property `SizeCode` has string values XS, S, M, L, XL, referenced property SizeOrder has numeric values -2, -1, 0, 1, 2. Numeric ordering by SizeOrder will be more understandable than lexicographic ordering by SizeCode."}}]},{"type":"element","name":"Term","attributes":{"Name":"ParameterDefaultValue","Type":"Edm.PrimitiveType","Nullable":"true","AppliesTo":"Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Define default values for action parameters"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription","String":"For unbound actions the default value can either be a constant expression, or a dynamic expression using absolute paths, e.g. singletons or function import results.\\n            Whereas for bound actions the bound entity and its properties and associated properties can be used as default values"}}]},{"type":"element","name":"Term","attributes":{"Name":"RecommendationState","Type":"UI.RecommendationStateType","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Indicates whether a field contains or has a recommended value"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Intelligent systems can help users by recommending input the user may \\"prefer\\"."}]}]}]},{"type":"element","name":"TypeDefinition","attributes":{"Name":"RecommendationStateType","UnderlyingType":"Edm.Byte"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Indicates whether a field contains or has a recommended value"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Editable fields for which a recommendation has been pre-filled or that have recommendations that differ from existing human input need to be highlighted."}]}]},{"type":"element","name":"Annotation","attributes":{"Term":"Validation.AllowedValues"},"elements":[{"type":"element","name":"Collection","elements":[{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","Int":"0"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"regular - with human or default input, no recommendation"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","Int":"1"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"highlighted - without human input and with recommendation"}}]},{"type":"element","name":"Record","elements":[{"type":"element","name":"PropertyValue","attributes":{"Property":"Value","Int":"2"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"warning - with human or default input and with recommendation"}}]}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"RecommendationList","Type":"UI.RecommendationListType","Nullable":"false","AppliesTo":"Property Parameter"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Specifies how to get a list of recommended values for a property or parameter"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Intelligent systems can help users by recommending input the user may \\"prefer\\"."}]}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"RecommendationListType"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Reference to a recommendation list"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"A recommendation consists of one or more values for editable fields plus a rank between 0.0 and 9.9, with 9.9 being the best recommendation."}]}]},{"type":"element","name":"Property","attributes":{"Name":"CollectionPath","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Resource path of a collection of recommended values"}}]},{"type":"element","name":"Property","attributes":{"Name":"RankProperty","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of the property within the collection of recommended values that describes the rank of the recommendation"}}]},{"type":"element","name":"Property","attributes":{"Name":"Binding","Type":"Collection(UI.RecommendationBinding)","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"List of pairs of a local property and recommended value property"}}]}]},{"type":"element","name":"ComplexType","attributes":{"Name":"RecommendationBinding"},"elements":[{"type":"element","name":"Property","attributes":{"Name":"LocalDataProperty","Type":"Edm.PropertyPath","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Path to editable property for which recommended values exist"}}]},{"type":"element","name":"Property","attributes":{"Name":"ValueListProperty","Type":"Edm.String","Nullable":"false"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Path to property in the collection of recommended values. Format is identical to PropertyPath annotations."}}]}]},{"type":"element","name":"Term","attributes":{"Name":"ExcludeFromNavigationContext","Type":"Core.Tag","Nullable":"false","DefaultValue":"true","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The contents of this property must not be propagated to the app-to-app navigation context"}}]},{"type":"element","name":"Term","attributes":{"Name":"DoNotCheckScaleOfMeasuredQuantity","Type":"Edm.Boolean","Nullable":"false","AppliesTo":"Property"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Do not check the number of fractional digits of the annotated measured quantity"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"The annotated property contains a measured quantity, and the user may enter more fractional digits than defined for the corresponding unit of measure.\\n\\nThis switches off the validation of user input with respect to decimals."}]}]}]},{"type":"element","name":"Term","attributes":{"Name":"LeadingEntitySet","Type":"Edm.String","Nullable":"false","AppliesTo":"EntityContainer"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Common.Experimental"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"The referenced entity set is the preferred starting point for UIs using this service"}}]},{"type":"element","name":"TypeDefinition","attributes":{"Name":"ActionName","UnderlyingType":"Edm.String"},"elements":[{"type":"element","name":"Annotation","attributes":{"Term":"Core.Description","String":"Name of an Action, Function, ActionImport, or FunctionImport in scope"}},{"type":"element","name":"Annotation","attributes":{"Term":"Core.LongDescription"},"elements":[{"type":"element","name":"String","elements":[{"type":"text","text":"Possible values are\\n        \\n- Namespace-qualified name of an action or function (`foo.bar`)\\n- Namespace-qualified name of an action or function followed by parentheses with the parameter signature to identify a specific overload, like in an [annotation target](https://docs.oasis-open.org/odata/odata-csdl-xml/v4.01/odata-csdl-xml-v4.01.html#sec_Target) (`foo.bar(baz.qux)`)\\n- Simple name of an action import or function import of the annotated service (`quux`)\\n- Namespace-qualified name of an entity container, followed by a slash and the simple name of an action import or function import in any referenced schema (`foo.corge/quux`)"}]}]}]}]}]}]}]}')},5401:e=>{"use strict";e.exports=JSON.parse('{"name":"@sap/ux-telemetry","version":"1.12.4","description":"SAP Fiori tools telemetry library","main":"dist/src/index.js","author":"SAP SE","license":"MIT","private":true,"azureInstrumentationKey":"0a65e45d-6bf4-421d-b845-61e888c50e9e","azureProdKey":"0a65e45d-6bf4-421d-b845-61e888c50e9e","scripts":{"pre-commit":"lint-staged --quiet","clean:dist":"rimraf ./dist ./generators *.tsbuildinfo","clean":"rimraf ./reports","build":"ts-node ./build-script/ && yarn run clean && tsc --build ./","test":"cross-env SAP_UX_FIORI_TOOLS_DISABLE_TELEMETRY=false jest --maxWorkers=1 --ci --forceExit --detectOpenHandles","lint":"eslint . --ext .ts","lint:summary":"eslint . --ext .ts -f summary","lint:fix":"eslint --fix","lint:fix:all":"eslint . --ext .ts --fix","lint:report":"eslint . --ext .ts -f multiple ","format:fix":"prettier --write --loglevel silent --ignore-path ../../../.prettierignore","format:fix:all":"prettier --write \'**/*.{css,scss,html,js,json,ts,tsx,yaml,yml}\' \'!**/{out,dist,node_modules}/**\' \'!**/*.{svg,png,xml}\' --ignore-path ../../../.prettierignore","madge":"madge --warning --circular --extensions ts ./"},"dependencies":{"@sap-ux/store":"0.4.0","@sap/ux-cds":"1.12.4","@sap/ux-common-utils":"1.12.4","@sap/ux-feature-toggle":"1.12.4","@sap/ux-project-access":"1.12.4","applicationinsights":"1.4.1","axios":"1.6.1","performance-now":"2.1.0","yaml":"2.2.2"},"devDependencies":{"memfs":"3.4.13","ts-jest":"29.1.1","ts-node":"8.5.2","typescript":"5.2.2","unionfs":"4.4.0"},"files":["dist/"],"jestSonar":{"reportPath":"reports/test/unit","reportFile":"test-report.xml"},"eslint-formatter-multiple":{"formatters":[{"name":"stylish","output":"console"},{"name":"json","output":"file","path":"reports/lint/eslint.json"},{"name":"checkstyle","output":"file","path":"reports/lint/eslint.checkstyle.xml"}]}}')},76947:e=>{"use strict";e.exports=JSON.parse('{"Replace_0_with_1":"Replace \'{{wrong}}\' with \'{{correct}}\'","Delete_0":"Delete \'{{reference}}\'","Add_include_to_reference_with_0_namespace_with_alias_1":"Add include to reference with \'{namespace}\' namespace with alias \'{alias}\'","Add_include_to_reference_with_0_namespace":"Add include to reference with \'{{namespace}}\' namespace","Add_a_reference_to_0_namespace_with_alias_1":"Add a reference to \'{{namespace}}\' namespace with alias \'{{alias}}\'","Add_a_reference_to_0_namespace":"Add a reference to \'{{namespace}}\' namespace","Generate_text_key_0_with_value_1_in_i18n":"Generate a text key \'{{key}}\' with value \'{{value}}\' in i18n properties file","Generate_text_key_0_in_i18n_and_substitue_1_by_2":"Generate a text key \'{{key}}\' in i18n properties file and substitute \'{{value}}\' by \'{@i18n>{{i18nKey}}}\'","Substitue_0_by_1":"Substitute \'{{value}}\' by \'{@i18n>{{key}}}\'"}')}};